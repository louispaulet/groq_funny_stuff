const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/STLViewer-ug1mwbRs.js","assets/stl-CnLqqc1a.js","assets/react-CcDFt0PU.js","assets/markdown-BoWTVge5.js"])))=>i.map(i=>d[i]);
import{a as v,j as d,F as ko,b as Zs,c as Ks,d as Js,e as dr,f as Qs,g as Io,h as el,i as tl,k as rl,l as Oo,m as nl,n as To,o as al,p as Qr,q as il,s as ol,t as sl,R as ll}from"./react-CcDFt0PU.js";import{_ as dl}from"./stl-CnLqqc1a.js";import{H as Ye,j as jo,t as Ro,p as Do,a as cl,b as Po,m as ul,d as Mo,c as Lo}from"./markdown-BoWTVge5.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();/**
 * react-router v7.9.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Ba="popstate";function fl(t={}){function e(a,i){let{pathname:o="/",search:s="",hash:l=""}=Tt(a.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Mn("",{pathname:o,search:s,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(a,i){let o=a.document.querySelector("base"),s="";if(o&&o.getAttribute("href")){let l=a.location.href,c=l.indexOf("#");s=c===-1?l:l.slice(0,c)}return s+"#"+(typeof i=="string"?i:or(i))}function n(a,i){tt(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(i)})`)}return pl(e,r,n,t)}function me(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function tt(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function hl(){return Math.random().toString(36).substring(2,10)}function Fa(t,e){return{usr:t.state,key:t.key,idx:e}}function Mn(t,e,r=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Tt(e):e,state:r,key:e&&e.key||n||hl()}}function or({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Tt(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function pl(t,e,r,n={}){let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,s="POP",l=null,c=u();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function u(){return(o.state||{idx:null}).idx}function f(){s="POP";let g=u(),y=g==null?null:g-c;c=g,l&&l({action:s,location:m.location,delta:y})}function h(g,y){s="PUSH";let b=Mn(m.location,g,y);r&&r(b,g),c=u()+1;let w=Fa(b,c),C=m.createHref(b);try{o.pushState(w,"",C)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;a.location.assign(C)}i&&l&&l({action:s,location:m.location,delta:1})}function p(g,y){s="REPLACE";let b=Mn(m.location,g,y);r&&r(b,g),c=u();let w=Fa(b,c),C=m.createHref(b);o.replaceState(w,"",C),i&&l&&l({action:s,location:m.location,delta:0})}function x(g){return xl(g)}let m={get action(){return s},get location(){return t(a,o)},listen(g){if(l)throw new Error("A history only accepts one active listener");return a.addEventListener(Ba,f),l=g,()=>{a.removeEventListener(Ba,f),l=null}},createHref(g){return e(a,g)},createURL:x,encodeLocation(g){let y=x(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:p,go(g){return o.go(g)}};return m}function xl(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),me(r,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:or(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function Bo(t,e,r="/"){return ml(t,e,r,!1)}function ml(t,e,r,n){let a=typeof e=="string"?Tt(e):e,i=mt(a.pathname||"/",r);if(i==null)return null;let o=Fo(t);gl(o);let s=null;for(let l=0;s==null&&l<o.length;++l){let c=kl(i);s=Nl(o[l],c,n)}return s}function Fo(t,e=[],r=[],n="",a=!1){let i=(o,s,l=a,c)=>{let u={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(n)&&l)return;me(u.relativePath.startsWith(n),`Absolute route path "${u.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(n.length)}let f=xt([n,u.relativePath]),h=r.concat(u);o.children&&o.children.length>0&&(me(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),Fo(o.children,e,h,f,l)),!(o.path==null&&!o.index)&&e.push({path:f,score:Cl(f,o.index),routesMeta:h})};return t.forEach((o,s)=>{if(o.path===""||!o.path?.includes("?"))i(o,s);else for(let l of Uo(o.path))i(o,s,!0,l)}),e}function Uo(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=Uo(n.join("/")),s=[];return s.push(...o.map(l=>l===""?i:[i,l].join("/"))),a&&s.push(...o),s.map(l=>t.startsWith("/")&&l===""?"/":l)}function gl(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:El(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var vl=/^:[\w-]+$/,bl=3,yl=2,wl=1,_l=10,Al=-2,Ua=t=>t==="*";function Cl(t,e){let r=t.split("/"),n=r.length;return r.some(Ua)&&(n+=Al),e&&(n+=yl),r.filter(a=>!Ua(a)).reduce((a,i)=>a+(vl.test(i)?bl:i===""?wl:_l),n)}function El(t,e){return t.length===e.length&&t.slice(0,-1).every((n,a)=>n===e[a])?t[t.length-1]-e[e.length-1]:0}function Nl(t,e,r=!1){let{routesMeta:n}=t,a={},i="/",o=[];for(let s=0;s<n.length;++s){let l=n[s],c=s===n.length-1,u=i==="/"?e:e.slice(i.length)||"/",f=Mr({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),h=l.route;if(!f&&c&&r&&!n[n.length-1].route.index&&(f=Mr({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!f)return null;Object.assign(a,f.params),o.push({params:a,pathname:xt([i,f.pathname]),pathnameBase:jl(xt([i,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(i=xt([i,f.pathnameBase]))}return o}function Mr(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=Sl(t.path,t.caseSensitive,t.end),a=e.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),s=a.slice(1);return{params:n.reduce((c,{paramName:u,isOptional:f},h)=>{if(u==="*"){let x=s[h]||"";o=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const p=s[h];return f&&!p?c[u]=void 0:c[u]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function Sl(t,e=!1,r=!0){tt(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,s,l)=>(n.push({paramName:s,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(n.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),n]}function kl(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return tt(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function mt(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function Il(t,e="/"){let{pathname:r,search:n="",hash:a=""}=typeof t=="string"?Tt(t):t;return{pathname:r?r.startsWith("/")?r:Ol(r,e):e,search:Rl(n),hash:Dl(a)}}function Ol(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function un(t,e,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Tl(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function na(t){let e=Tl(t);return e.map((r,n)=>n===e.length-1?r.pathname:r.pathnameBase)}function aa(t,e,r,n=!1){let a;typeof t=="string"?a=Tt(t):(a={...t},me(!a.pathname||!a.pathname.includes("?"),un("?","pathname","search",a)),me(!a.pathname||!a.pathname.includes("#"),un("#","pathname","hash",a)),me(!a.search||!a.search.includes("#"),un("#","search","hash",a)));let i=t===""||a.pathname==="",o=i?"/":a.pathname,s;if(o==null)s=r;else{let f=e.length-1;if(!n&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),f-=1;a.pathname=h.join("/")}s=f>=0?e[f]:"/"}let l=Il(a,s),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var xt=t=>t.join("/").replace(/\/\/+/g,"/"),jl=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Rl=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Dl=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Pl(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var Go=["POST","PUT","PATCH","DELETE"];new Set(Go);var Ml=["GET",...Go];new Set(Ml);var Gt=v.createContext(null);Gt.displayName="DataRouter";var en=v.createContext(null);en.displayName="DataRouterState";v.createContext(!1);var Vo=v.createContext({isTransitioning:!1});Vo.displayName="ViewTransition";var Ll=v.createContext(new Map);Ll.displayName="Fetchers";var Bl=v.createContext(null);Bl.displayName="Await";var st=v.createContext(null);st.displayName="Navigation";var cr=v.createContext(null);cr.displayName="Location";var ht=v.createContext({outlet:null,matches:[],isDataRoute:!1});ht.displayName="Route";var ia=v.createContext(null);ia.displayName="RouteError";function Fl(t,{relative:e}={}){me(Vt(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=v.useContext(st),{hash:a,pathname:i,search:o}=ur(t,{relative:e}),s=i;return r!=="/"&&(s=i==="/"?r:xt([r,i])),n.createHref({pathname:s,search:o,hash:a})}function Vt(){return v.useContext(cr)!=null}function gt(){return me(Vt(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(cr).location}var $o="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ho(t){v.useContext(st).static||v.useLayoutEffect(t)}function zo(){let{isDataRoute:t}=v.useContext(ht);return t?Jl():Ul()}function Ul(){me(Vt(),"useNavigate() may be used only in the context of a <Router> component.");let t=v.useContext(Gt),{basename:e,navigator:r}=v.useContext(st),{matches:n}=v.useContext(ht),{pathname:a}=gt(),i=JSON.stringify(na(n)),o=v.useRef(!1);return Ho(()=>{o.current=!0}),v.useCallback((l,c={})=>{if(tt(o.current,$o),!o.current)return;if(typeof l=="number"){r.go(l);return}let u=aa(l,JSON.parse(i),a,c.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:xt([e,u.pathname])),(c.replace?r.replace:r.push)(u,c.state,c)},[e,r,i,a,t])}v.createContext(null);function ur(t,{relative:e}={}){let{matches:r}=v.useContext(ht),{pathname:n}=gt(),a=JSON.stringify(na(r));return v.useMemo(()=>aa(t,JSON.parse(a),n,e==="path"),[t,a,n,e])}function Gl(t,e){return Wo(t,e)}function Wo(t,e,r,n,a){me(Vt(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=v.useContext(st),{matches:o}=v.useContext(ht),s=o[o.length-1],l=s?s.params:{},c=s?s.pathname:"/",u=s?s.pathnameBase:"/",f=s&&s.route;{let b=f&&f.path||"";Xo(c,!f||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let h=gt(),p;if(e){let b=typeof e=="string"?Tt(e):e;me(u==="/"||b.pathname?.startsWith(u),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${b.pathname}" was given in the \`location\` prop.`),p=b}else p=h;let x=p.pathname||"/",m=x;if(u!=="/"){let b=u.replace(/^\//,"").split("/");m="/"+x.replace(/^\//,"").split("/").slice(b.length).join("/")}let g=Bo(t,{pathname:m});tt(f||g!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),tt(g==null||g[g.length-1].route.element!==void 0||g[g.length-1].route.Component!==void 0||g[g.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=Wl(g&&g.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:xt([u,i.encodeLocation?i.encodeLocation(b.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?u:xt([u,i.encodeLocation?i.encodeLocation(b.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathnameBase])})),o,r,n,a);return e&&y?v.createElement(cr.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},y):y}function Vl(){let t=Kl(),e=Pl(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=v.createElement(v.Fragment,null,v.createElement("p",null,"💿 Hey developer 👋"),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:i},"ErrorBoundary")," or"," ",v.createElement("code",{style:i},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},e),r?v.createElement("pre",{style:a},r):null,o)}var $l=v.createElement(Vl,null),Hl=class extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?v.createElement(ht.Provider,{value:this.props.routeContext},v.createElement(ia.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function zl({routeContext:t,match:e,children:r}){let n=v.useContext(Gt);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),v.createElement(ht.Provider,{value:t},r)}function Wl(t,e=[],r=null,n=null,a=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let i=t,o=r?.errors;if(o!=null){let c=i.findIndex(u=>u.route.id&&o?.[u.route.id]!==void 0);me(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let s=!1,l=-1;if(r)for(let c=0;c<i.length;c++){let u=i[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=c),u.route.id){let{loaderData:f,errors:h}=r,p=u.route.loader&&!f.hasOwnProperty(u.route.id)&&(!h||h[u.route.id]===void 0);if(u.route.lazy||p){s=!0,l>=0?i=i.slice(0,l+1):i=[i[0]];break}}}return i.reduceRight((c,u,f)=>{let h,p=!1,x=null,m=null;r&&(h=o&&u.route.id?o[u.route.id]:void 0,x=u.route.errorElement||$l,s&&(l<0&&f===0?(Xo("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,m=null):l===f&&(p=!0,m=u.route.hydrateFallbackElement||null)));let g=e.concat(i.slice(0,f+1)),y=()=>{let b;return h?b=x:p?b=m:u.route.Component?b=v.createElement(u.route.Component,null):u.route.element?b=u.route.element:b=c,v.createElement(zl,{match:u,routeContext:{outlet:c,matches:g,isDataRoute:r!=null},children:b})};return r&&(u.route.ErrorBoundary||u.route.errorElement||f===0)?v.createElement(Hl,{location:r.location,revalidation:r.revalidation,component:x,error:h,children:y(),routeContext:{outlet:null,matches:g,isDataRoute:!0},unstable_onError:n}):y()},null)}function oa(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Xl(t){let e=v.useContext(Gt);return me(e,oa(t)),e}function Yl(t){let e=v.useContext(en);return me(e,oa(t)),e}function ql(t){let e=v.useContext(ht);return me(e,oa(t)),e}function sa(t){let e=ql(t),r=e.matches[e.matches.length-1];return me(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function Zl(){return sa("useRouteId")}function Kl(){let t=v.useContext(ia),e=Yl("useRouteError"),r=sa("useRouteError");return t!==void 0?t:e.errors?.[r]}function Jl(){let{router:t}=Xl("useNavigate"),e=sa("useNavigate"),r=v.useRef(!1);return Ho(()=>{r.current=!0}),v.useCallback(async(a,i={})=>{tt(r.current,$o),r.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:e,...i}))},[t,e])}var Ga={};function Xo(t,e,r){!e&&!Ga[t]&&(Ga[t]=!0,tt(!1,r))}v.memo(Ql);function Ql({routes:t,future:e,state:r,unstable_onError:n}){return Wo(t,void 0,r,n,e)}function ed({to:t,replace:e,state:r,relative:n}){me(Vt(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=v.useContext(st);tt(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=v.useContext(ht),{pathname:o}=gt(),s=zo(),l=aa(t,na(i),o,n==="path"),c=JSON.stringify(l);return v.useEffect(()=>{s(JSON.parse(c),{replace:e,state:r,relative:n})},[s,c,n,e,r]),null}function be(t){me(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function td({basename:t="/",children:e=null,location:r,navigationType:n="POP",navigator:a,static:i=!1}){me(!Vt(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),s=v.useMemo(()=>({basename:o,navigator:a,static:i,future:{}}),[o,a,i]);typeof r=="string"&&(r=Tt(r));let{pathname:l="/",search:c="",hash:u="",state:f=null,key:h="default"}=r,p=v.useMemo(()=>{let x=mt(l,o);return x==null?null:{location:{pathname:x,search:c,hash:u,state:f,key:h},navigationType:n}},[o,l,c,u,f,h,n]);return tt(p!=null,`<Router basename="${o}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:v.createElement(st.Provider,{value:s},v.createElement(cr.Provider,{children:e,value:p}))}function rd({children:t,location:e}){return Gl(Ln(t),e)}function Ln(t,e=[]){let r=[];return v.Children.forEach(t,(n,a)=>{if(!v.isValidElement(n))return;let i=[...e,a];if(n.type===v.Fragment){r.push.apply(r,Ln(n.props.children,i));return}me(n.type===be,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),me(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Ln(n.props.children,i)),r.push(o)}),r}var kr="get",Ir="application/x-www-form-urlencoded";function tn(t){return t!=null&&typeof t.tagName=="string"}function nd(t){return tn(t)&&t.tagName.toLowerCase()==="button"}function ad(t){return tn(t)&&t.tagName.toLowerCase()==="form"}function id(t){return tn(t)&&t.tagName.toLowerCase()==="input"}function od(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function sd(t,e){return t.button===0&&(!e||e==="_self")&&!od(t)}var xr=null;function ld(){if(xr===null)try{new FormData(document.createElement("form"),0),xr=!1}catch{xr=!0}return xr}var dd=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function fn(t){return t!=null&&!dd.has(t)?(tt(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ir}"`),null):t}function cd(t,e){let r,n,a,i,o;if(ad(t)){let s=t.getAttribute("action");n=s?mt(s,e):null,r=t.getAttribute("method")||kr,a=fn(t.getAttribute("enctype"))||Ir,i=new FormData(t)}else if(nd(t)||id(t)&&(t.type==="submit"||t.type==="image")){let s=t.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||s.getAttribute("action");if(n=l?mt(l,e):null,r=t.getAttribute("formmethod")||s.getAttribute("method")||kr,a=fn(t.getAttribute("formenctype"))||fn(s.getAttribute("enctype"))||Ir,i=new FormData(s,t),!ld()){let{name:c,type:u,value:f}=t;if(u==="image"){let h=c?`${c}.`:"";i.append(`${h}x`,"0"),i.append(`${h}y`,"0")}else c&&i.append(c,f)}}else{if(tn(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=kr,n=null,a=Ir,o=t}return i&&a==="text/plain"&&(o=i,i=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function la(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ud(t,e,r){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname=`_root.${r}`:e&&mt(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function fd(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function hd(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function pd(t,e,r){let n=await Promise.all(t.map(async a=>{let i=e.routes[a.route.id];if(i){let o=await fd(i,r);return o.links?o.links():[]}return[]}));return vd(n.flat(1).filter(hd).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Va(t,e,r,n,a,i){let o=(l,c)=>r[c]?l.route.id!==r[c].route.id:!0,s=(l,c)=>r[c].pathname!==l.pathname||r[c].route.path?.endsWith("*")&&r[c].params["*"]!==l.params["*"];return i==="assets"?e.filter((l,c)=>o(l,c)||s(l,c)):i==="data"?e.filter((l,c)=>{let u=n.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(o(l,c)||s(l,c))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function xd(t,e,{includeHydrateFallback:r}={}){return md(t.map(n=>{let a=e.routes[n.route.id];if(!a)return[];let i=[a.module];return a.clientActionModule&&(i=i.concat(a.clientActionModule)),a.clientLoaderModule&&(i=i.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(i=i.concat(a.hydrateFallbackModule)),a.imports&&(i=i.concat(a.imports)),i}).flat(1))}function md(t){return[...new Set(t)]}function gd(t){let e={},r=Object.keys(t).sort();for(let n of r)e[n]=t[n];return e}function vd(t,e){let r=new Set;return new Set(e),t.reduce((n,a)=>{let i=JSON.stringify(gd(a));return r.has(i)||(r.add(i),n.push({key:i,link:a})),n},[])}function Yo(){let t=v.useContext(Gt);return la(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function bd(){let t=v.useContext(en);return la(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var da=v.createContext(void 0);da.displayName="FrameworkContext";function qo(){let t=v.useContext(da);return la(t,"You must render this element inside a <HydratedRouter> element"),t}function yd(t,e){let r=v.useContext(da),[n,a]=v.useState(!1),[i,o]=v.useState(!1),{onFocus:s,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:f}=e,h=v.useRef(null);v.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let m=y=>{y.forEach(b=>{o(b.isIntersecting)})},g=new IntersectionObserver(m,{threshold:.5});return h.current&&g.observe(h.current),()=>{g.disconnect()}}},[t]),v.useEffect(()=>{if(n){let m=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(m)}}},[n]);let p=()=>{a(!0)},x=()=>{a(!1),o(!1)};return r?t!=="intent"?[i,h,{}]:[i,h,{onFocus:Xt(s,p),onBlur:Xt(l,x),onMouseEnter:Xt(c,p),onMouseLeave:Xt(u,x),onTouchStart:Xt(f,p)}]:[!1,h,{}]}function Xt(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function wd({page:t,...e}){let{router:r}=Yo(),n=v.useMemo(()=>Bo(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?v.createElement(Ad,{page:t,matches:n,...e}):null}function _d(t){let{manifest:e,routeModules:r}=qo(),[n,a]=v.useState([]);return v.useEffect(()=>{let i=!1;return pd(t,e,r).then(o=>{i||a(o)}),()=>{i=!0}},[t,e,r]),n}function Ad({page:t,matches:e,...r}){let n=gt(),{manifest:a,routeModules:i}=qo(),{basename:o}=Yo(),{loaderData:s,matches:l}=bd(),c=v.useMemo(()=>Va(t,e,l,a,n,"data"),[t,e,l,a,n]),u=v.useMemo(()=>Va(t,e,l,a,n,"assets"),[t,e,l,a,n]),f=v.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let x=new Set,m=!1;if(e.forEach(y=>{let b=a.routes[y.route.id];!b||!b.hasLoader||(!c.some(w=>w.route.id===y.route.id)&&y.route.id in s&&i[y.route.id]?.shouldRevalidate||b.hasClientLoader?m=!0:x.add(y.route.id))}),x.size===0)return[];let g=ud(t,o,"data");return m&&x.size>0&&g.searchParams.set("_routes",e.filter(y=>x.has(y.route.id)).map(y=>y.route.id).join(",")),[g.pathname+g.search]},[o,s,n,a,c,e,t,i]),h=v.useMemo(()=>xd(u,a),[u,a]),p=_d(u);return v.createElement(v.Fragment,null,f.map(x=>v.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...r})),h.map(x=>v.createElement("link",{key:x,rel:"modulepreload",href:x,...r})),p.map(({key:x,link:m})=>v.createElement("link",{key:x,nonce:r.nonce,...m})))}function Cd(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var Zo=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Zo&&(window.__reactRouterVersion="7.9.3")}catch{}function Ed({basename:t,children:e,window:r}){let n=v.useRef();n.current==null&&(n.current=fl({window:r,v5Compat:!0}));let a=n.current,[i,o]=v.useState({action:a.action,location:a.location}),s=v.useCallback(l=>{v.startTransition(()=>o(l))},[o]);return v.useLayoutEffect(()=>a.listen(s),[a,s]),v.createElement(td,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:a})}var Ko=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,we=v.forwardRef(function({onClick:e,discover:r="render",prefetch:n="none",relative:a,reloadDocument:i,replace:o,state:s,target:l,to:c,preventScrollReset:u,viewTransition:f,...h},p){let{basename:x}=v.useContext(st),m=typeof c=="string"&&Ko.test(c),g,y=!1;if(typeof c=="string"&&m&&(g=c,Zo))try{let I=new URL(window.location.href),O=c.startsWith("//")?new URL(I.protocol+c):new URL(c),j=mt(O.pathname,x);O.origin===I.origin&&j!=null?c=j+O.search+O.hash:y=!0}catch{tt(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let b=Fl(c,{relative:a}),[w,C,A]=yd(n,h),N=kd(c,{replace:o,state:s,target:l,preventScrollReset:u,relative:a,viewTransition:f});function E(I){e&&e(I),I.defaultPrevented||N(I)}let S=v.createElement("a",{...h,...A,href:g||b,onClick:y||i?e:E,ref:Cd(p,C),target:l,"data-discover":!m&&r==="render"?"true":void 0});return w&&!m?v.createElement(v.Fragment,null,S,v.createElement(wd,{page:b})):S});we.displayName="Link";var $e=v.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:n="",end:a=!1,style:i,to:o,viewTransition:s,children:l,...c},u){let f=ur(o,{relative:c.relative}),h=gt(),p=v.useContext(en),{navigator:x,basename:m}=v.useContext(st),g=p!=null&&Rd(f)&&s===!0,y=x.encodeLocation?x.encodeLocation(f).pathname:f.pathname,b=h.pathname,w=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;r||(b=b.toLowerCase(),w=w?w.toLowerCase():null,y=y.toLowerCase()),w&&m&&(w=mt(w,m)||w);const C=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let A=b===y||!a&&b.startsWith(y)&&b.charAt(C)==="/",N=w!=null&&(w===y||!a&&w.startsWith(y)&&w.charAt(y.length)==="/"),E={isActive:A,isPending:N,isTransitioning:g},S=A?e:void 0,I;typeof n=="function"?I=n(E):I=[n,A?"active":null,N?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let O=typeof i=="function"?i(E):i;return v.createElement(we,{...c,"aria-current":S,className:I,ref:u,style:O,to:o,viewTransition:s},typeof l=="function"?l(E):l)});$e.displayName="NavLink";var Nd=v.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:n,replace:a,state:i,method:o=kr,action:s,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:f,...h},p)=>{let x=Td(),m=jd(s,{relative:c}),g=o.toLowerCase()==="get"?"get":"post",y=typeof s=="string"&&Ko.test(s),b=w=>{if(l&&l(w),w.defaultPrevented)return;w.preventDefault();let C=w.nativeEvent.submitter,A=C?.getAttribute("formmethod")||o;x(C||w.currentTarget,{fetcherKey:e,method:A,navigate:r,replace:a,state:i,relative:c,preventScrollReset:u,viewTransition:f})};return v.createElement("form",{ref:p,method:g,action:m,onSubmit:n?l:b,...h,"data-discover":!y&&t==="render"?"true":void 0})});Nd.displayName="Form";function Sd(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Jo(t){let e=v.useContext(Gt);return me(e,Sd(t)),e}function kd(t,{target:e,replace:r,state:n,preventScrollReset:a,relative:i,viewTransition:o}={}){let s=zo(),l=gt(),c=ur(t,{relative:i});return v.useCallback(u=>{if(sd(u,e)){u.preventDefault();let f=r!==void 0?r:or(l)===or(c);s(t,{replace:f,state:n,preventScrollReset:a,relative:i,viewTransition:o})}},[l,s,c,r,n,e,t,a,i,o])}var Id=0,Od=()=>`__${String(++Id)}__`;function Td(){let{router:t}=Jo("useSubmit"),{basename:e}=v.useContext(st),r=Zl();return v.useCallback(async(n,a={})=>{let{action:i,method:o,encType:s,formData:l,body:c}=cd(n,e);if(a.navigate===!1){let u=a.fetcherKey||Od();await t.fetch(u,r,a.action||i,{preventScrollReset:a.preventScrollReset,formData:l,body:c,formMethod:a.method||o,formEncType:a.encType||s,flushSync:a.flushSync})}else await t.navigate(a.action||i,{preventScrollReset:a.preventScrollReset,formData:l,body:c,formMethod:a.method||o,formEncType:a.encType||s,replace:a.replace,state:a.state,fromRouteId:r,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,e,r])}function jd(t,{relative:e}={}){let{basename:r}=v.useContext(st),n=v.useContext(ht);me(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),i={...ur(t||".",{relative:e})},o=gt();if(t==null){i.search=o.search;let s=new URLSearchParams(i.search),l=s.getAll("index");if(l.some(u=>u==="")){s.delete("index"),l.filter(f=>f).forEach(f=>s.append("index",f));let u=s.toString();i.search=u?`?${u}`:""}}return(!t||t===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:xt([r,i.pathname])),or(i)}function Rd(t,{relative:e}={}){let r=v.useContext(Vo);me(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Jo("useViewTransitionState"),a=ur(t,{relative:e});if(!r.isTransitioning)return!1;let i=mt(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=mt(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Mr(a.pathname,o)!=null||Mr(a.pathname,i)!=null}function Dd(){return d.jsxs("div",{className:"space-y-3",children:[d.jsxs("p",{className:"text-base text-white/90",children:["🚩 Flag Foundry stress-tests the ",d.jsx("code",{className:"rounded bg-white/10 px-1 py-0.5",children:"/svg"})," route by rebuilding national flags at a controlled pace, showing how an LLM keeps the required shapes and color rules in line."]}),d.jsx("p",{className:"text-sm text-white/80",children:"Queue flag prompts for the SVG worker and it streams a new European flag every two seconds, paired with the Unicode reference for quick accuracy checks."}),d.jsxs("p",{className:"text-sm text-white/80",children:["🧠 This page looks at how much flag detail"," ",d.jsx("a",{href:"https://en.wikipedia.org/wiki/LLaMA_(language_model)",className:"underline decoration-dotted underline-offset-2 text-white transition hover:text-white/80",target:"_blank",rel:"noreferrer",children:"LLaMA 3 70B"})," can recover within a 1024-token budget. Simple layouts are easy wins; intricate layouts push the limit."]})]})}var $a={};const hn=typeof globalThis<"u"&&$a?$a:void 0;function at(t){if(t&&hn&&hn[t]!==void 0)return hn[t]}const Ge=(at("VITE_CHAT_BASE_URL")||"https://groq-endpoint.louispaulet13.workers.dev").replace(/\/$/,""),$t=[{id:"allergyfinder",path:"/allergyfinder",name:"AllergyFinder",headline:"Allergy Assistant",description:"Use Groq to explore ingredient lists, highlight allergens, and triage food questions with product context.",badge:"Nutrition",heroGradient:"from-emerald-500 to-teal-500",panelAccent:"bg-emerald-100 text-emerald-900 dark:bg-emerald-500/20 dark:text-emerald-200",navAccent:{gradient:"from-emerald-500 to-teal-500",hover:"hover:bg-emerald-500/10 hover:text-emerald-600 hover:border-emerald-400/60 dark:hover:bg-emerald-500/20 dark:hover:text-emerald-200 dark:hover:border-emerald-400/60",focus:"focus-visible:ring-emerald-500/40"},defaultModel:"openai/gpt-oss-20b",modelOptions:["openai/gpt-oss-20b","openai/gpt-oss-120b"],greeting:"Hi! Ask me about allergens in any food and I'll look it up for you.",promptPlaceholder:"Ask about allergens in a recipe or packaged food...",systemPrompt:["You are an allergy assistant that uses product data to answer questions about food allergens.","Use the provided context when it is relevant and be transparent about any gaps.","When a barcode is available, share the product page URL.","Encourage users to double-check packaging for medical decisions.","When allergy notes from the Allergy Cookie Editor are supplied, treat them as authoritative user-provided context and surface relevant reminders proactively."].join(" "),allowBaseUrlOverride:!1,enableStlViewer:!1,enableBarcodeScanner:!0,logLabel:"AllergyFinder",defaultBaseUrl:(at("VITE_ALLERGY_CHAT_BASE_URL")||Ge).replace(/\/$/,"")},{id:"objectmaker",path:"/objectmaker",name:"Object Maker",headline:"Design JSON → Create Objects",description:"Handcraft a JSON structure or ask the assistant to propose one, then call the /obj endpoint to instantiate concrete objects. Save results and browse them in the Zoo.",badge:"Builder",heroGradient:"from-yellow-400 to-amber-600",panelAccent:"bg-yellow-100 text-yellow-900 dark:bg-yellow-500/20 dark:text-yellow-200",navAccent:{gradient:"from-yellow-400 to-amber-600",hover:"hover:bg-yellow-500/10 hover:text-amber-600 hover:border-amber-400/60 dark:hover:bg-yellow-500/20 dark:hover:text-yellow-200 dark:hover:border-amber-400/60",focus:"focus-visible:ring-yellow-500/40"},defaultModel:"openai/gpt-oss-20b",modelOptions:["openai/gpt-oss-20b","openai/gpt-oss-120b"],greeting:'Describe an object you want (e.g., pizza, hot sauce, car). I will propose a JSON Schema with type "object" and useful properties.',promptPlaceholder:"Describe the JSON Schema you want…",systemPrompt:["You help design concise JSON Schema definitions (draft-agnostic) for a single object.",'Always return exactly one JSON object that is a JSON Schema with top-level "type":"object" and a "properties" map.','Prefer simple types (string, number, integer, boolean, array, object). Include "items" for arrays. Avoid examples or prose.','Avoid unsupported JSON Schema keywords such as "format", "$ref", or vendor-specific extensions. Express constraints with enums or descriptions instead.',"Do not include markdown fences or backticks. Return only the JSON Schema object."].join(" "),allowBaseUrlOverride:!1,enableStlViewer:!1,logLabel:"Object Maker",defaultBaseUrl:(at("VITE_OBJECTMAKER_CHAT_BASE_URL")||Ge).replace(/\/$/,"")},{id:"stlviewer",path:"/stlviewer",name:"STL Studio",headline:"3D Printing Copilot",description:"Chat about STL files, design tweaks, and 3D printing tips while previewing models inline.",badge:"3D",heroGradient:"from-indigo-500 to-slate-700",panelAccent:"bg-indigo-100 text-indigo-900 dark:bg-indigo-500/20 dark:text-indigo-200",navAccent:{gradient:"from-indigo-500 to-slate-700",hover:"hover:bg-indigo-500/10 hover:text-indigo-400 hover:border-indigo-400/60 dark:hover:bg-indigo-500/20 dark:hover:text-indigo-200 dark:hover:border-indigo-400/60",focus:"focus-visible:ring-indigo-500/40"},defaultModel:"openai/gpt-oss-20b",modelOptions:["openai/gpt-oss-20b","openai/gpt-oss-120b"],greeting:"Hi! Ask me anything about STL models or 3D printing workflows.",promptPlaceholder:"Need help with an STL? Ask about fixes, slicing, or design tweaks...",systemPrompt:["You are a helpful AI assistant who understands STL files and 3D printing workflows.","Provide concise, practical answers and include tips for viewing or tweaking STL content when relevant."].join(" "),allowBaseUrlOverride:!1,enableStlViewer:!0,logLabel:"STL Studio",defaultBaseUrl:(at("VITE_STL_CHAT_BASE_URL")||Ge).replace(/\/$/,"")},{id:"pokedex",path:"/pokedex",name:"Pokedex",headline:"Concise Pokemon Companion",description:"Ask for typings, strengths, weaknesses, and quick lore delivered by a remote Pokedex service.",badge:"Pokemon",heroGradient:"from-rose-500 to-orange-500",panelAccent:"bg-rose-100 text-rose-900 dark:bg-rose-500/20 dark:text-rose-200",navAccent:{gradient:"from-rose-500 to-orange-500",hover:"hover:bg-rose-500/10 hover:text-rose-500 hover:border-rose-400/60 dark:hover:bg-rose-500/20 dark:hover:text-rose-200 dark:hover:border-rose-400/60",focus:"focus-visible:ring-rose-500/40"},defaultModel:"openai/gpt-oss-20b",modelOptions:["openai/gpt-oss-20b","openai/gpt-oss-120b"],greeting:"Hi! Ask me about any Pokemon and I will fetch quick Pokedex facts.",promptPlaceholder:"Example: What are Gengar strengths and weaknesses?",systemPrompt:["You are a remote Pokedex assistant. Answer questions about Pokemon in two or three sentences.","Highlight typings, notable strengths or weaknesses, and other concise Pokedex facts.","If the question falls outside Pokemon, politely redirect the user."].join(" "),allowBaseUrlOverride:!0,enableStlViewer:!1,logLabel:"Pokedex",defaultBaseUrl:(at("VITE_POKEDEX_CHAT_BASE_URL")||Ge).replace(/\/$/,"")},{id:"imagegen",path:"/imagegen",name:"Flux Image Lab",headline:"Prompt → Flux image in seconds",description:"Send prompts to the Groq-hosted Flux endpoint, preview the returned image, and keep a cookie-backed gallery of recent hits.",badge:"Images",heroGradient:"from-sky-500 to-cyan-600",panelAccent:"bg-sky-100 text-sky-900 dark:bg-sky-500/20 dark:text-sky-200",navAccent:{gradient:"from-sky-500 to-cyan-600",hover:"hover:bg-sky-500/10 hover:text-sky-600 hover:border-sky-400/60 dark:hover:bg-sky-500/20 dark:hover:text-sky-200 dark:hover:border-sky-400/60",focus:"focus-visible:ring-sky-500/40"},defaultModel:"flux-image-endpoint",modelOptions:["Flux image endpoint"],imageApiBaseUrl:(at("VITE_IMAGE_API_BASE_URL")||Ge).replace(/\/$/,""),allowBaseUrlOverride:!1,enableStlViewer:!1,enableBarcodeScanner:!1,logLabel:"ImageGen"},{id:"svglab",path:"/svg-lab",name:"SVG Prompt Lab",headline:"Sketch vector art from pure text instructions.",description:"Feed prompts into the /svg worker endpoint, preview the returned artwork inline, and keep a cookie-backed gallery of your favorite prompts.",badge:"Vector",heroGradient:"from-violet-500 to-purple-600",panelAccent:"bg-violet-100 text-violet-900 dark:bg-violet-500/20 dark:text-violet-200",navAccent:{gradient:"from-violet-500 to-purple-600",hover:"hover:bg-violet-500/10 hover:text-violet-600 hover:border-violet-400/60 dark:hover:bg-violet-500/20 dark:hover:text-violet-200 dark:hover:border-violet-400/60",focus:"focus-visible:ring-violet-500/40"},defaultModel:"svg-route",modelOptions:["SVG worker route"],allowBaseUrlOverride:!1,enableStlViewer:!1,enableBarcodeScanner:!1,logLabel:"SVGLab",svgApiBaseUrl:(at("VITE_SVG_API_BASE_URL")||Ge).replace(/\/$/,"")},{id:"flagfoundry",path:"/flag-foundry",name:"Flag Foundry",headline:"Throttle /svg calls to rebuild national flags.",description:"Queue flag prompts for the SVG worker, loading a new European flag every two seconds with a Unicode reference for accuracy checks.",badge:"Atlas",heroGradient:"from-sky-500 to-blue-600",panelAccent:"bg-sky-100 text-sky-900 dark:bg-sky-500/20 dark:text-sky-200",heroContent:Dd,navAccent:{gradient:"from-sky-500 to-blue-600",hover:"hover:bg-sky-500/10 hover:text-sky-600 hover:border-sky-400/60 dark:hover:bg-sky-500/20 dark:hover:text-sky-200 dark:hover:border-sky-400/60",focus:"focus-visible:ring-sky-500/40"},defaultModel:"svg-route",modelOptions:["SVG worker route"],allowBaseUrlOverride:!1,enableStlViewer:!1,enableBarcodeScanner:!1,logLabel:"FlagFoundry",svgApiBaseUrl:(at("VITE_SVG_API_BASE_URL")||Ge).replace(/\/$/,"")},{id:"pizzamaker",path:"/pizza-maker",name:"Pizza Maker",headline:"Design your dream pie, then let Groq plate it.",description:"Select sauces, cheeses, toppings, and art direction. Groq converts your build into a luxe image prompt and renders the pie.",badge:"Culinary",heroGradient:"from-orange-500 to-red-500",panelAccent:"bg-orange-100 text-orange-900 dark:bg-orange-500/20 dark:text-orange-200",navAccent:{gradient:"from-orange-500 to-red-500",hover:"hover:bg-orange-500/10 hover:text-orange-600 hover:border-orange-400/60 dark:hover:bg-orange-500/20 dark:hover:text-orange-200 dark:hover:border-orange-400/60",focus:"focus-visible:ring-orange-500/40"},defaultModel:"openai/gpt-oss-20b",modelOptions:["openai/gpt-oss-20b","openai/gpt-oss-120b"],greeting:"Craving something specific? Dial in your toppings and we will stage the perfect pizza photo.",promptPlaceholder:"Describe the pizza mood you want to capture…",systemPrompt:["You are a culinary art director who helps users plan photorealistic pizza imagery.","Reference the provided configuration faithfully and suggest plating or styling ideas when asked."].join(" "),allowBaseUrlOverride:!1,enableStlViewer:!1,enableBarcodeScanner:!1,logLabel:"PizzaMaker",imageApiBaseUrl:(at("VITE_IMAGE_API_BASE_URL")||Ge).replace(/\/$/,""),defaultBaseUrl:Ge},{id:"carmaker",path:"/car-maker",name:"Car Maker",headline:"Style a hero car and Groq will stage the scene.",description:"Select the brand, finish, camera angle, and cinematic backdrop. Groq transforms it into a luxe prompt and renders the ride.",badge:"Automotive",heroGradient:"from-slate-900 via-sky-800 to-cyan-600",panelAccent:"bg-slate-900 text-white dark:bg-slate-900 dark:text-slate-100",navAccent:{gradient:"from-slate-900 via-sky-800 to-cyan-600",hover:"hover:bg-slate-900/10 hover:text-slate-900 hover:border-slate-700/60 dark:hover:bg-slate-900/30 dark:hover:text-slate-100 dark:hover:border-slate-500/60",focus:"focus-visible:ring-slate-900/40"},defaultModel:"openai/gpt-oss-20b",modelOptions:["openai/gpt-oss-20b","openai/gpt-oss-120b"],greeting:"Ready to spec a show-stopping hero car? Tune the exterior and I will help stage it.",promptPlaceholder:"Describe the vibe you want for this hero car shot…",systemPrompt:["You are an automotive concept stylist who helps users craft photorealistic hero car imagery.","Only discuss visible exterior design, stance, lighting, and setting."].join(" "),allowBaseUrlOverride:!1,enableStlViewer:!1,enableBarcodeScanner:!1,logLabel:"CarMaker",imageApiBaseUrl:(at("VITE_IMAGE_API_BASE_URL")||Ge).replace(/\/$/,""),defaultBaseUrl:Ge},{id:"pongshowdown",path:"/pong-showdown",name:"Pong Showdown",headline:"Arcade rallies with Groq-styled palettes.",description:"Watch an autonomous Pong match where every paddle hit or score triggers a Groq /obj request for a brand-new colorway.",badge:"Arcade",heroGradient:"from-emerald-500 to-sky-500",panelAccent:"bg-emerald-100 text-emerald-900 dark:bg-emerald-500/20 dark:text-emerald-200",navAccent:{gradient:"from-emerald-500 to-sky-500",hover:"hover:bg-emerald-500/10 hover:text-emerald-600 hover:border-emerald-400/60 dark:hover:bg-emerald-500/20 dark:hover:text-emerald-200 dark:hover:border-emerald-400/60",focus:"focus-visible:ring-emerald-500/40"},defaultModel:"meta-llama/llama-4-maverick-17b-128e-instruct",modelOptions:["meta-llama/llama-4-maverick-17b-128e-instruct","meta-llama/llama-4-scout-17b-16e-instruct"],allowBaseUrlOverride:!1,enableStlViewer:!1,enableBarcodeScanner:!1,logLabel:"PongShowdown",defaultBaseUrl:Ge},{id:"newsanalyzer",path:"/newsanalyzer",name:"News Analyzer",headline:"Real-time News Analysis",description:"Explore and analyze real-time news feeds from various sources, powered by a Cloudflare Worker.",badge:"News",heroGradient:"from-blue-500 to-sky-600",panelAccent:"bg-blue-100 text-blue-900 dark:bg-blue-500/20 dark:text-blue-200",navAccent:{gradient:"from-blue-500 to-sky-600",hover:"hover:bg-blue-500/10 hover:text-blue-600 hover:border-blue-400/60 dark:hover:bg-blue-500/20 dark:hover:text-blue-200 dark:hover:border-blue-400/60",focus:"focus-visible:ring-blue-500/40"},defaultModel:"openai/gpt-oss-20b",modelOptions:["openai/gpt-oss-20b","openai/gpt-oss-120b"],greeting:"Welcome to the News Analyzer. Select your topics and let's see what's happening.",promptPlaceholder:"Ask a question about the news...",systemPrompt:["You are a news analysis assistant.","Use the provided news articles to answer questions and provide summaries.","Be neutral and objective in your analysis."].join(" "),allowBaseUrlOverride:!0,enableStlViewer:!1,enableBarcodeScanner:!1,logLabel:"NewsAnalyzer",defaultBaseUrl:(at("VITE_NEWS_BASE_URL")||Ge).replace(/\/$/,"")},{id:"sixdegrees",path:"/six-degrees",name:"Six Degrees Of",headline:"Watch a message morph through six parody passes.",description:"Start with any sentence and see how Groq remixes it into six escalating parodies, delivered one beat at a time.",badge:"Remix",heroGradient:"from-fuchsia-500 to-purple-600",panelAccent:"bg-fuchsia-100 text-fuchsia-900 dark:bg-fuchsia-500/20 dark:text-fuchsia-200",navAccent:{gradient:"from-fuchsia-500 to-purple-600",hover:"hover:bg-fuchsia-500/10 hover:text-fuchsia-600 hover:border-fuchsia-400/60 dark:hover:bg-fuchsia-500/20 dark:hover:text-fuchsia-200 dark:hover:border-fuchsia-400/60",focus:"focus-visible:ring-fuchsia-500/40"},defaultModel:"openai/gpt-oss-20b",modelOptions:["openai/gpt-oss-20b","openai/gpt-oss-120b"],systemPrompt:["You are a playful parody writer. When given any text you respond with a witty parody of it.","Keep responses concise (2-4 sentences) and ensure they clearly riff on the original idea.","Match the length of the original message as closely as possible—no more than about 20% longer than the user's input.","Avoid quoting the original verbatim; reshape it with humor and creative twists."].join(" "),allowBaseUrlOverride:!1,enableStlViewer:!1,enableBarcodeScanner:!1,logLabel:"SixDegrees",defaultBaseUrl:Ge}];function rn(t){return $t.find(e=>e.id===t)}const Qo=v.createContext({theme:"light",setTheme:()=>{}});function Pd(){if(typeof window>"u")return"light";try{return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}catch{return"light"}}function Md({children:t}){const[e,r]=v.useState(()=>{try{const a=localStorage.getItem("theme");if(a==="light"||a==="dark")return a}catch{}return Pd()});v.useEffect(()=>{try{localStorage.setItem("theme",e)}catch{}const a=document.documentElement;e==="dark"?a.classList.add("dark"):a.classList.remove("dark")},[e]);const n=v.useMemo(()=>({theme:e,setTheme:r}),[e]);return d.jsx(Qo.Provider,{value:n,children:t})}function Ld(){return v.useContext(Qo)}function Bd(){const{theme:t,setTheme:e}=Ld(),r=t==="dark";return d.jsxs("button",{type:"button",onClick:()=>e(r?"light":"dark"),className:"inline-flex items-center gap-2 rounded-md border border-slate-300 bg-white/80 px-3 py-2 text-sm font-medium text-slate-700 shadow-sm hover:bg-slate-50 dark:border-slate-700 dark:bg-slate-800/70 dark:text-slate-100",title:"Toggle theme",children:[r?d.jsx(Zs,{className:"h-5 w-5"}):d.jsx(Ks,{className:"h-5 w-5"}),d.jsx("span",{className:"hidden sm:inline",children:r?"Light mode":"Dark mode"})]})}function Ha({isActive:t}){const e="inline-flex items-center rounded-full border px-4 py-2 text-sm font-medium transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-slate-900",r="focus-visible:ring-brand-500/40";return t?`${e} border-transparent bg-brand-600 text-white shadow ${r}`:`${e} border-slate-300 bg-white/70 text-slate-600 hover:border-brand-500/60 hover:bg-brand-500/10 hover:text-brand-600 dark:border-slate-700 dark:bg-slate-900/60 dark:text-slate-300 dark:hover:text-white ${r}`}function Fd(t){const e=t?.gradient||"from-brand-500 to-brand-600",r=t?.hover||"hover:bg-brand-500/10 hover:text-brand-600 hover:border-brand-400/60",n=t?.focus||"focus-visible:ring-brand-500/40";return({isActive:a})=>{const i="inline-flex items-center rounded-full border px-4 py-2 text-sm font-medium transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-slate-900";return a?`${i} border-transparent bg-gradient-to-r ${e} text-white shadow ${n}`:`${i} border-slate-300 bg-white/70 text-slate-600 ${r} dark:border-slate-700 dark:bg-slate-900/60 dark:text-slate-300 dark:hover:text-white ${n}`}}function za({isActive:t}){return`inline-flex items-center rounded-full border border-slate-300 px-3 py-1 text-xs font-medium text-slate-600 transition hover:border-brand-500 hover:text-brand-600 dark:border-slate-600 dark:text-slate-300 ${t?"bg-brand-600 text-white border-brand-600 shadow-sm":""}`}function Ud({isActive:t}){const e="inline-flex h-11 w-11 items-center justify-center rounded-full border text-slate-600 transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500/40 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:text-slate-200 dark:focus-visible:ring-offset-slate-900";return t?`${e} border-brand-500 bg-brand-600 text-white shadow`:`${e} border-slate-300 bg-white/80 hover:border-brand-500/60 hover:bg-brand-500/10 hover:text-brand-600 dark:border-slate-700 dark:bg-slate-800/70`}function Gd({children:t}){return d.jsxs("div",{className:"min-h-screen flex flex-col",children:[d.jsx("header",{className:"sticky top-0 z-20 border-b border-slate-200 bg-white/80 backdrop-blur supports-[backdrop-filter]:bg-white/70 dark:border-slate-800 dark:bg-slate-900/70",children:d.jsxs("div",{className:"mx-auto flex w-full max-w-6xl items-center justify-between gap-4 px-4 py-4 sm:px-6 lg:px-8",children:[d.jsxs($e,{to:"/",className:"flex items-center gap-3",children:[d.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-xl bg-brand-600 text-white text-lg font-semibold",children:"llI"}),d.jsxs("div",{className:"leading-tight",children:[d.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Groq"}),d.jsx("div",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"AllIn Studio"})]})]}),d.jsxs("nav",{className:"hidden items-center gap-2 md:flex",children:[d.jsx($e,{to:"/",className:Ha,end:!0,children:"Overview"}),$t.filter(e=>e.id!=="objectmaker"&&e.id!=="stlviewer"&&e.id!=="sixdegrees"&&e.id!=="imagegen"&&e.id!=="svglab"&&e.id!=="flagfoundry"&&e.id!=="pizzamaker"&&e.id!=="carmaker"&&e.id!=="pongshowdown").map(e=>d.jsx($e,{to:e.path,className:Fd(e.navAccent),children:e.name},e.id)),d.jsx($e,{to:"/about",className:Ha,children:"About"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs($e,{to:"/profile",className:Ud,title:"Profile options",children:[d.jsx(ko,{className:"h-5 w-5"}),d.jsx("span",{className:"sr-only",children:"Profile options"})]}),d.jsx(Bd,{})]})]})}),d.jsx("main",{className:"flex-1",children:d.jsx("div",{className:"mx-auto w-full max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:t})}),d.jsx("footer",{className:"mt-auto border-t border-slate-200 bg-white/80 py-6 text-sm text-slate-600 backdrop-blur supports-[backdrop-filter]:bg-white/70 dark:border-slate-800 dark:bg-slate-900/70 dark:text-slate-300",children:d.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-2 px-4 text-center sm:flex-row sm:items-center sm:justify-between sm:px-6 lg:px-8 sm:text-left",children:[d.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-x-3 gap-y-2 sm:justify-start",children:[d.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-x-2 gap-y-1 sm:justify-start",children:[d.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:"Groq AllIn Studio"}),d.jsx("span",{className:"text-xs uppercase tracking-wide text-slate-400 dark:text-slate-500",children:"Unified Workspace ⚙️"})]}),d.jsx($e,{to:"/",className:za,end:!0,children:"Overview"}),d.jsx($e,{to:"/about",className:za,children:"About"})]}),d.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Fast chats powered by Groq’s API · Built with React, Vite, and Tailwind CSS ⚡️"})]})})]})}const pt=[{name:"Gosper Loop Garden",description:"A classic glider gun keeps launching ships that wrap around the toroidal edge.",cells:[[5,1],[5,2],[6,1],[6,2],[5,11],[6,11],[7,11],[4,12],[3,13],[3,14],[8,12],[9,13],[9,14],[6,15],[4,16],[8,16],[5,17],[6,17],[7,17],[6,18],[3,21],[4,21],[5,21],[3,22],[4,22],[5,22],[2,23],[6,23],[1,25],[2,25],[6,25],[7,25],[3,35],[4,35],[3,36],[4,36]]},{name:"Pulsar Observatory",description:"Twin pulsars breathe in sync while stabilizers keep the rhythm steady.",cells:[[2,8],[2,9],[2,10],[2,14],[2,15],[2,16],[4,6],[4,11],[4,13],[4,18],[5,6],[5,11],[5,13],[5,18],[6,6],[6,11],[6,13],[6,18],[7,8],[7,9],[7,10],[7,14],[7,15],[7,16],[9,8],[9,9],[9,10],[9,14],[9,15],[9,16],[10,6],[10,11],[10,13],[10,18],[11,6],[11,11],[11,13],[11,18],[12,6],[12,11],[12,13],[12,18],[14,8],[14,9],[14,10],[14,14],[14,15],[14,16],[16,8],[16,9],[16,10],[16,14],[16,15],[16,16],[3,24],[3,25],[4,24],[4,25],[13,24],[13,25],[14,24],[14,25]]},{name:"Spaceship Carousel",description:"Four lightweight spaceships chase each other on a seamless neon grid.",cells:[[2,3],[2,4],[3,2],[4,2],[5,2],[5,5],[2,5],[3,6],[4,6],[5,6],[16,10],[16,11],[15,12],[14,12],[13,12],[13,9],[16,9],[15,8],[14,8],[13,8],[6,30],[6,31],[7,32],[7,33],[7,34],[8,29],[9,29],[9,34],[8,35],[6,34],[12,20],[12,21],[11,22],[11,23],[11,24],[10,19],[9,19],[9,24],[10,25],[12,24]]},{name:"Pentadecathlon Runway",description:"A period-15 backbone oscillates between narrow and wide beams like a gated particle accelerator.",cells:[[0,2],[0,7],[1,0],[1,1],[1,3],[1,4],[1,5],[1,6],[1,8],[1,9],[2,2],[2,7]]},{name:"Queen Bee Shuttle",description:"Catalyzed queen bees shuttle sparks between stabilizers for a graceful period-30 cycle.",cells:[[0,9],[1,7],[1,9],[2,6],[2,8],[3,0],[3,1],[3,5],[3,8],[3,20],[3,21],[4,0],[4,1],[4,6],[4,8],[4,20],[4,21],[5,7],[5,9],[6,9]]},{name:"Simkin Workshop",description:"A compact period-120 glider gun quietly forges ships that wrap around the torus for ages.",cells:[[0,0],[0,1],[0,7],[0,8],[1,0],[1,1],[1,7],[1,8],[3,4],[3,5],[4,4],[4,5],[9,22],[9,23],[9,25],[9,26],[10,21],[10,27],[11,21],[11,28],[11,31],[11,32],[12,21],[12,22],[12,23],[12,27],[12,31],[12,32],[13,26],[17,20],[17,21],[18,20],[19,21],[19,22],[19,23],[20,23]]},{name:"Spaceship Squadron",description:"Light, middle, and heavyweight spaceships sprint eastward in formation for a c/2 flyby.",cells:[[4,4],[4,7],[5,8],[6,4],[6,8],[7,5],[7,6],[7,7],[7,8],[14,8],[15,6],[15,10],[16,11],[17,6],[17,11],[18,7],[18,8],[18,9],[18,10],[18,11],[24,10],[24,11],[25,8],[25,13],[26,14],[27,8],[27,14],[28,9],[28,10],[28,11],[28,12],[28,13],[28,14]]},{name:"Glider Pinwheel",description:"Four gliders peel away in opposite diagonals, sketching a pinwheel of c/4 ships.",cells:[[12,13],[12,19],[13,14],[13,18],[14,12],[14,13],[14,14],[14,18],[14,19],[14,20],[18,12],[18,13],[18,14],[18,18],[18,19],[18,20],[19,14],[19,18],[20,13],[20,19]]},{name:"Snowflake Stillness",description:"Nine detached blocks crystalize into a snowflake still life that never changes shape.",cells:[[6,6],[6,7],[6,9],[6,10],[6,12],[6,13],[7,6],[7,7],[7,9],[7,10],[7,12],[7,13],[9,6],[9,7],[9,9],[9,10],[9,12],[9,13],[10,6],[10,7],[10,9],[10,10],[10,12],[10,13],[12,6],[12,7],[12,9],[12,10],[12,12],[12,13],[13,6],[13,7],[13,9],[13,10],[13,12],[13,13]]},{name:"Switch Engine Trail",description:"A classic block-laying switch engine carves a diagonal debris trail over hundreds of ticks.",cells:[[0,18],[1,1],[1,2],[1,3],[1,12],[1,18],[2,0],[2,4],[2,11],[2,19],[3,1],[3,2],[3,12],[3,13],[3,14],[3,15],[3,18],[3,19],[4,3],[4,4],[4,6],[4,7],[4,17],[4,18],[4,19],[5,5],[5,6],[5,18],[5,20],[6,19],[6,27],[6,28],[7,19],[7,27],[7,28],[18,7],[18,8],[19,7],[19,8],[26,15],[26,16],[27,15],[27,16]]}],Vd=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]];function $d(t,e){return t<=0||e<=0?[]:Array.from({length:t},()=>Array(e).fill(0))}function Hd(t,e,r){if(!Array.isArray(t)||!t.length||e<=0||r<=0)return[];const n=t.map(([p])=>p),a=t.map(([,p])=>p),i=Math.min(...n),o=Math.max(...n),s=Math.min(...a),l=Math.max(...a),c=o-i+1,u=l-s+1,f=Math.floor((e-c)/2)-i,h=Math.floor((r-u)/2)-s;return t.map(([p,x])=>[((p+f)%e+e)%e,((x+h)%r+r)%r])}function Lr(t,e,r,n={}){const{center:a=!0}=n,i=Number.isFinite(e)?Math.max(0,Math.floor(e)):0,o=Number.isFinite(r)?Math.max(0,Math.floor(r)):0;if(i===0||o===0)return[];const s=$d(i,o),l=Array.isArray(t?.cells)?t.cells:[];return(a?Hd(l,i,o):l).forEach(([u,f])=>{const h=(u%i+i)%i,p=(f%o+o)%o;s[h][p]=1}),s}function Bn(t,e={}){const{wrap:r=!0}=e,n=t.length;if(n===0)return[];const a=t[0]?.length??0;return a===0?Array.from({length:n},()=>[]):t.map((i,o)=>i.map((s,l)=>{const c=Vd.reduce((u,[f,h])=>{let p=o+f,x=l+h;return r?(p=(p+n)%n,x=(x+a)%a,u+t[p][x]):p<0||p>=n||x<0||x>=a?u:u+t[p][x]},0);return s?c===2||c===3?1:0:c===3?1:0}))}function zd(t){return t.reduce((e,r)=>e+r.reduce((n,a)=>n+(a?1:0),0),0)}const Wa=22,pn=44,Wd=260;function Xd(){const t=v.useMemo(()=>Math.floor(Math.random()*pt.length),[]),[e,r]=v.useState(t),[n,a]=v.useState(()=>Lr(pt[t],Wa,pn)),[i,o]=v.useState(0);v.useEffect(()=>{a(Lr(pt[e],Wa,pn)),o(0)},[e]),v.useEffect(()=>{const c=window.setInterval(()=>{a(u=>Bn(u)),o(u=>u+1)},Wd);return()=>{window.clearInterval(c)}},[]);const s=()=>{r(c=>(c+1)%pt.length)},l=pt[e];return d.jsxs("section",{className:"relative overflow-hidden rounded-[2.5rem] border border-slate-200 bg-slate-900/95 px-6 py-7 text-white shadow-xl transition hover:shadow-2xl dark:border-slate-700 sm:px-10 sm:py-10",children:[d.jsx("div",{className:"pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(56,189,248,0.35),_transparent_55%)]","aria-hidden":!0}),d.jsxs("div",{className:"relative z-10 space-y-6",children:[d.jsxs("div",{className:"flex flex-col gap-5 lg:flex-row lg:items-start lg:justify-between",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("p",{className:"inline-flex items-center gap-2 rounded-full bg-white/10 px-4 py-1 text-xs font-semibold uppercase tracking-[0.35em] text-sky-200",children:"🧬 Ambient Simulation"}),d.jsx("h2",{className:"text-2xl font-semibold sm:text-3xl",children:"Life Loop Observatory"}),d.jsx("p",{className:"max-w-2xl text-sm text-slate-200",children:"Watch a Conway's Game of Life preset evolve on a toroidal grid. Ready for custom dimensions or speed ramps? Hop into the Game of Life Lab for hands-on controls."})]}),d.jsxs("div",{className:"flex flex-col gap-2 self-start sm:flex-row sm:items-center",children:[d.jsxs("button",{type:"button",onClick:s,className:"inline-flex items-center justify-center gap-2 rounded-full bg-white/12 px-4 py-2 text-xs font-semibold uppercase tracking-[0.3em] text-white shadow-sm transition hover:bg-white/20",children:["Reset & Shuffle Pattern",d.jsx("span",{"aria-hidden":!0,children:"↻"})]}),d.jsxs(we,{to:"/game-of-life-lab",className:"inline-flex items-center justify-center gap-2 rounded-full bg-sky-400 px-5 py-2 text-sm font-semibold text-slate-900 shadow-lg transition hover:bg-sky-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-900 focus-visible:ring-sky-200",children:["Launch Game of Life Lab",d.jsx("span",{"aria-hidden":!0,children:"→"})]})]})]}),d.jsxs("div",{className:"relative overflow-hidden rounded-[2.25rem] border border-white/10 bg-gradient-to-br from-slate-900 via-slate-900/80 to-slate-800 p-5 shadow-lg",children:[d.jsx("div",{className:"pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_center,_rgba(14,116,144,0.3),_transparent_70%)]","aria-hidden":!0}),d.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-3",children:[d.jsx("div",{className:"grid gap-[3px] rounded-2xl border border-white/5 bg-slate-900/80 p-4 shadow-inner",style:{gridTemplateColumns:`repeat(${pn}, minmax(0, 1fr))`},children:n.map((c,u)=>c.map((f,h)=>d.jsx("div",{className:`h-3 w-3 rounded-[0.45rem] transition-all duration-300 sm:h-4 sm:w-4 ${f?"bg-sky-300 shadow-[0_0_8px_rgba(125,211,252,0.7)]":"bg-white/5"}`},`${u}-${h}`)))}),d.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4 text-xs uppercase tracking-[0.35em] text-slate-300",children:[d.jsxs("span",{className:"rounded-full border border-white/20 px-3 py-1 font-semibold",children:["Preset · ",l.name]}),d.jsxs("span",{className:"rounded-full border border-white/10 px-3 py-1 font-semibold",children:["Gen ",i.toLocaleString()]})]}),d.jsx("p",{className:"max-w-2xl text-center text-xs text-slate-300/80",children:l.description})]})]})]})]})}const Yd={allergyfinder:d.jsxs(d.Fragment,{children:[d.jsx("p",{children:"🛡️ AllergyFinder taps into Open Food Facts so it can examine ingredient panels in context. Bring your saved allergen profile into the conversation and the assistant highlights risky ingredients, suggests safe alternatives, and drafts grocery lists that respect your preferences. Transparency comes first: responses call out when product data is missing or when you should double-check real-world packaging. 🧾"}),d.jsx("p",{children:"Use it for meal planning, quick label triage, or inspiration when you are cooking for friends with different dietary needs. Because it runs on Groq-accelerated LLMs, you get near-instant summaries even for lengthy ingredient lists. 🚀"})]}),imagegen:d.jsxs(d.Fragment,{children:[d.jsx("p",{children:"🎬 Flux Image Lab sends prompts directly to Groq-hosted Flux endpoints and streams back high-fidelity renders within a heartbeat. Dial in lens styles, lighting, and art direction while the assistant suggests extra flourish—think props, color palettes, or camera modifiers that make the output pop. Every render lands in a sticky gallery so you can remix a prior shot with one click. 🖼️"}),d.jsx("p",{children:"The workspace is tuned for creative sprints: it keeps your last prompt ready, exposes seed values for reproducibility, and exports image metadata for downstream pipelines. Whether you are art directing concept pieces or prototyping marketing visuals, Flux Image Lab compresses the ideation cycle down to seconds. ⚡️"})]}),objectmaker:d.jsxs(d.Fragment,{children:[d.jsxs("p",{children:["🧠 Object Maker is a workspace for structured creativity. Start with a conversational brief and the assistant drafts JSON schemas that describe imaginative artifacts—anything from a pizza, to a track-ready car, to a curated ice cream flight. Once the schema looks right, you can call the",d.jsx("code",{className:"rounded bg-slate-900/80 px-1 py-0.5 text-[0.7rem] text-white",children:"/obj"})," endpoint to spin up dozens of variants that adhere to the structure. The workflow is grounded in Groq hosted",d.jsx("span",{className:"font-medium",children:" openai/gpt-oss-20b"})," and ",d.jsx("span",{className:"font-medium",children:"openai/gpt-oss-120b"}),"models, keeping generation fast while your schema evolves. ⚙️"]}),d.jsx("p",{children:"Each session curates a “Zoo” of finished creations so you can revisit, iterate, and compare outputs. The aim is to demonstrate how reliable JSON scaffolding unlocks downstream tooling: the sharper the schema, the more dependable the generated objects. Image generation integrations are planned, but today is about perfecting the structured prompt. 🗂️"})]}),stlviewer:d.jsxs(d.Fragment,{children:[d.jsx("p",{children:"🧩 STL Studio preserves the original 3D printing workflow. The assistant can draft STL snippets, explain mesh edits, and, thanks to the embedded viewer, render models directly inside the chat transcript. Share a design tweak, paste an STL file, and see the preview update without leaving the conversation. 🖥️"}),d.jsx("p",{children:"It is ideal for rapid iteration on printable parts, offering slicing tips, material suggestions, and context-aware troubleshooting. Whether you are validating overhangs or collaborating on a new gadget, the mix of text guidance and inline visuals keeps the feedback loop tight. 🔁"})]}),pokedex:d.jsxs(d.Fragment,{children:[d.jsx("p",{children:"📘 The Pokédex workspace is a focused encyclopedia for trainers. Ask about any Pokémon and you will get typings, strengths, weaknesses, and a bite-sized lore blurb sourced from our remote service. It is tuned to stay in-universe: off-topic questions politely steer you back to the Pokédex. 🎓"}),d.jsx("p",{children:"Combine it with team-building sessions or quick reminders before a battle. Because the base URL is configurable, you can point the workspace at experimental datasets or community-maintained entries while keeping the same interface. 🔄"})]}),svglab:d.jsxs(d.Fragment,{children:[d.jsxs("p",{children:["🎨 SVG Prompt Lab turns the paint-by-text demo into a polished studio. Type instructions (“draw a rocket in a frame, make the stars sparkle”) and the UI relays them to the ",d.jsx("code",{className:"rounded bg-slate-900/80 px-1 py-0.5 text-[0.7rem] text-white",children:"/svg"}),"worker route. The JSON response includes the raw markup and a ready-to-use data URL so you can preview the artwork in seconds."]}),d.jsx("p",{children:"Every generation automatically lands in a cookie-backed gallery. Tap a tile to reload its markup, copy the SVG source, and remix the prompt. It is a fast way to prototype iconography or onboarding illustrations while the LLM does the coordinate math for you. ✍️"})]}),flagfoundry:d.jsxs(d.Fragment,{children:[d.jsxs("p",{children:["🚩 Flag Foundry adapts the SVG Prompt Lab flow for vexillology fans. It now covers every sovereign flag, grouped by continent. Europe auto-queues while the rest wait for your click so you can pace the ",d.jsx("code",{className:"rounded bg-slate-900/80 px-1 py-0.5 text-[0.7rem] text-white",children:"/svg"})," route two seconds at a time."]}),d.jsxs("p",{children:["Each card pairs the AI generated SVG with a Unicode-rendered reference flag using ",d.jsx("code",{className:"rounded bg-slate-900/80 px-1 py-0.5 text-[0.7rem] text-white",children:"react-country-flag"}),", making it easy to compare palettes and ratios while the gallery fills in real time—whether you trigger a single region or the entire planet. 🌍"]})]}),pizzamaker:d.jsxs(d.Fragment,{children:[d.jsx("p",{children:"🍕 Pizza Maker feels like running your own test kitchen. Choose sauces, cheeses, toppings, and surface treatments while the assistant suggests inventive combinations—truffle honey on a blistered crust, charred broccolini with smoked mozzarella, or a Detroit-style corner slice with an HDR drizzle. Every configuration becomes a lush prompt that Groq sends to the Flux image backend for plating. 🔥"}),d.jsx("p",{children:"As soon as the render lands, you can tweak the brief and spin up variants to compare crust textures, camera angles, or prop styling. Save favorites, export the art direction notes, and share a mood board with your team. It is ideal for restaurants, food stylists, or anyone craving a hyper-real hero shot. 📸"})]}),carmaker:d.jsxs(d.Fragment,{children:[d.jsx("p",{children:"🚗 Car Maker doubles as a concept studio for automotive storytellers. Start by selecting a marque, paint finish, and performance stance, then layer in cinematic lighting cues like dusk reflections or rain-slick asphalt. The assistant keeps recommendations grounded in automotive vocabulary—splitters, wheel fitment, aero kits—so each prompt reads like a creative brief a photographer would love. 🌆"}),d.jsx("p",{children:"Once generated, swap environments, colorways, or camera focal lengths to craft an entire campaign from a single session. The gallery remembers your best looks and surfaces the prompt metadata for future shoots. Great for designers pitching concept decks, agencies iterating mood boards, or fans dreaming up their next build. 🏁"})]}),sixdegrees:d.jsxs(d.Fragment,{children:[d.jsx("p",{children:"🎭 Six Degrees Of is a parody escalator. Drop in any sentence and we will send it through six rapid-fire parodies, each one riffing only on what came immediately before it. The responses show up one-by-one so you can watch the humor mutate in real time. ⏱️"}),d.jsx("p",{children:"Under the hood it taps the same Groq-accelerated chat endpoint, but with a playful system prompt that keeps each remix short, witty, and distinct from the original. Use it for creative warm-ups, writing prompts, or just a quick laugh between tasks. 😄"})]}),newsanalyzer:d.jsxs(d.Fragment,{children:[d.jsx("p",{children:"🗞️ News Analyzer connects to a Cloudflare Worker that aggregates live articles, quotes, and metadata from across the web. Start by filtering the beats you care about—markets, climate, geopolitics—and the assistant contextualizes the incoming headlines with timelines, related coverage, and source links. It is a rapid way to separate the signal from the noise. 📊"}),d.jsx("p",{children:"Ask for comparisons, bullet summaries, or follow-up questions and the assistant grounds responses in the fetched documents, noting when context is thin or evolving. Pin the conversations you want to revisit and export briefings for stakeholders. Analysts, comms teams, and curious readers all get a high-velocity newsroom companion. 📰"})]}),pongshowdown:d.jsxs(d.Fragment,{children:[d.jsxs("p",{children:["🕹️ Pong Showdown is an autonomous rally where Groq-hosted LLAMA 4 models restyle the court in real time. Every paddle deflection or out-of-bounds point calls the",d.jsx("code",{className:"rounded bg-slate-900/80 px-1 py-0.5 text-[0.7rem] text-white",children:"/obj"})," endpoint with a schema demanding labeled colors and usage prompts. The response paints the background, paddles, ball, and scoreboard with fresh hex values the instant the rally continues."]}),d.jsx("p",{children:"Use it as a living demo of structured outputs driving UI state. The paddles run on simple AI while the Groq workers keep the palette energetic and legible—perfect for showcasing how deterministic schemas and low-latency inference can remix an experience mid-game. 🎨"})]})},qd={allergyfinder:["chat-based","data-connected","safety-first"],imagegen:["image-based","flux-powered","gallery-backed"],objectmaker:["chat-based","schema-first","automation-ready"],stlviewer:["chat-based","3d-workflow","viewer-embedded"],pokedex:["chat-based","fandom","api-powered"],svglab:["text-to-svg","gallery-backed","promptable"],flagfoundry:["image-based","svg-automation","slow-drip"],pizzamaker:["image-based","guided-prompts","culinary"],carmaker:["image-based","cinematic","automotive"],newsanalyzer:["chat-based","data-connected","real-time"],sixdegrees:["chat-based","humor","sequential"],pongshowdown:["arcade","structured-output","llama-4"]},Zd=Object.fromEntries($t.map(t=>[t.id,t])),Fn=[{id:"specialists",title:"Specialist Assistants",description:"Domain experts that deliver answers with context, transparency, and speed.",experienceIds:["allergyfinder","newsanalyzer"]},{id:"builders",title:"Schema & 3D Labs",description:"Structured creativity hubs for JSON schematics and printable meshes.",experienceIds:["objectmaker","stlviewer"]},{id:"svg",title:"SVG Studios",description:"Vector-first workspaces for programmatic art and evolving flags.",experienceIds:["svglab","flagfoundry"]},{id:"visuals",title:"Visual Launchpads",description:"Image-first workflows that stage cinematic scenes and product-ready art.",experienceIds:["imagegen","pizzamaker","carmaker"]},{id:"play",title:"Play & Discovery",description:"Lighthearted sandboxes for fandoms, remixing, and storytelling breaks.",experienceIds:["pokedex","sixdegrees","pongshowdown"]}],Kd=new Set(Fn.flatMap(t=>t.experienceIds)),Xa=$t.map(t=>t.id).filter(t=>!Kd.has(t)),Jd=Xa.length?[...Fn,{id:"fresh",title:"Fresh Drops",description:"New experiments and utilities that just landed in the studio.",experienceIds:Xa}]:Fn,Qd=d.jsxs(d.Fragment,{children:[d.jsxs("p",{children:["Conway's Game of Life is a zero-player cellular automaton where each generation springs from the last. A four-rule system lets gliders, pulsars, and guns emerge from simple seeds—no human steering. Brush up on the origin story on"," ",d.jsx("a",{href:"https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life",target:"_blank",rel:"noreferrer",className:"font-semibold text-sky-600 underline-offset-2 transition hover:underline dark:text-sky-300",children:"Wikipedia"}),"."]}),d.jsx("p",{children:"The Game of Life Lab lets you dial in the matrix size, swap curated presets, and modulate the simulation clock from slow motion to warp speed. Centered seeds wrap around a toroidal grid so spaceships never fall off the edge."}),d.jsxs("ul",{className:"ml-4 list-disc space-y-2 text-slate-600 dark:text-slate-300",children:[d.jsx("li",{children:"Pause, resume, or step one generation at a time for frame-by-frame analysis."}),d.jsx("li",{children:"Track active-cell stats in real time to see how density shifts across the surface."}),d.jsx("li",{children:"Experiment with oscillators, glider guns, and looped spaceships in one quick workspace."})]})]}),Ya=["cellular-automaton","toroidal-grid","live-controls"];function ec(){return d.jsxs("div",{className:"space-y-12",children:[d.jsxs("section",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-brand-600 to-indigo-700 px-8 py-12 text-white shadow-xl",children:[d.jsxs("div",{className:"max-w-5xl space-y-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("p",{className:"text-sm uppercase tracking-[0.3em] text-white/80",children:"Groq Studio"}),d.jsx("h1",{className:"text-3xl font-semibold sm:text-4xl",children:"All experiences in one workspace."}),d.jsx("p",{className:"text-base text-white/90",children:"Launch the assistants that fit your workflow—whether you are prototyping JSON schemas, staging cinematic imagery, or diving into trusted domain research. ⚡️"})]}),d.jsx("div",{className:"grid gap-4 pt-2 sm:grid-cols-2",children:Jd.map(t=>d.jsxs("div",{className:"group relative overflow-hidden rounded-2xl border border-white/10 bg-white/10 p-5 shadow-sm backdrop-blur transition hover:border-white/20 hover:bg-white/15",children:[d.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-br from-white/5 via-white/0 to-white/10 opacity-0 transition group-hover:opacity-100","aria-hidden":!0}),d.jsxs("div",{className:"relative space-y-3",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-semibold text-white",children:t.title}),d.jsx("p",{className:"text-sm text-white/80",children:t.description})]}),d.jsxs("div",{className:"flex flex-wrap gap-2 pt-1",children:[t.experienceIds.map(e=>Zd[e]).filter(Boolean).map(e=>d.jsxs(we,{to:e.path,className:"inline-flex items-center gap-1 rounded-full bg-white/90 px-3 py-1.5 text-xs font-semibold text-slate-900 transition hover:bg-white",children:[d.jsx("span",{children:e.name}),d.jsx("span",{"aria-hidden":!0,children:"↗"})]},e.id)),t.id==="play"?d.jsxs(we,{to:"/game-of-life-lab",className:"inline-flex items-center gap-1 rounded-full bg-white/90 px-3 py-1.5 text-xs font-semibold text-slate-900 transition hover:bg-white",children:[d.jsx("span",{children:"Game of Life Lab"}),d.jsx("span",{"aria-hidden":!0,children:"↗"})]}):null]})]})]},t.id))}),d.jsxs("div",{className:"flex flex-wrap items-center gap-3 pt-4",children:[d.jsxs(we,{to:"/dalle-vs-flux",className:"inline-flex items-center gap-2 rounded-full bg-white px-4 py-2 text-sm font-semibold text-brand-600 shadow transition hover:bg-brand-50",children:["View the DALL·E 3 vs Flux comparison",d.jsx("span",{"aria-hidden":!0,children:"→"})]}),d.jsx("span",{className:"inline-flex items-center gap-2 rounded-full border border-dashed border-white/40 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-white/80",children:"New spotlight"})]})]}),d.jsx("div",{className:"absolute -right-24 -top-24 h-56 w-56 rounded-full bg-white/10 blur-3xl","aria-hidden":!0})]}),d.jsx(Xd,{}),d.jsxs("section",{className:"relative overflow-hidden rounded-[2.75rem] border border-slate-200 bg-white/90 px-6 py-8 shadow-sm transition hover:shadow-xl dark:border-slate-800 dark:bg-slate-900/80 sm:px-8 sm:py-10",children:[d.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(99,102,241,0.08),_transparent_60%)] dark:bg-[radial-gradient(circle_at_top,_rgba(99,102,241,0.18),_transparent_65%)]","aria-hidden":!0}),d.jsxs("div",{className:"relative z-10 grid gap-6 lg:grid-cols-[minmax(0,1.2fr)_minmax(0,1fr)] lg:items-center",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsx("p",{className:"inline-flex items-center gap-2 rounded-full bg-brand-500/10 px-4 py-1 text-xs font-semibold uppercase tracking-[0.35em] text-brand-600 dark:text-brand-300",children:"🧤 Pop-up · Satirical"}),d.jsx("h2",{className:"text-2xl font-semibold text-slate-900 dark:text-slate-100",children:"Second-Hand Food Market"}),d.jsx("p",{className:"text-sm leading-relaxed text-slate-600 dark:text-slate-300",children:"Browse a cursed catalogue of pre-loved cuisine featuring seven-eighths of a pizza, artisanal bath water, and other hygienically questionable delights. The storefront leans into cozy flea-market vibes while staying inside the AllIn shell."}),d.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[d.jsxs(we,{to:"/second-hand-food-market",className:"inline-flex items-center gap-2 rounded-full bg-brand-600 px-4 py-2 text-sm font-semibold text-white shadow transition hover:bg-brand-500",children:["Visit the market",d.jsx("span",{"aria-hidden":!0,children:"→"})]}),d.jsx("span",{className:"inline-flex items-center gap-2 rounded-full border border-dashed border-brand-500/40 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-brand-600 dark:text-brand-300",children:"Curses included"})]})]}),d.jsx("div",{className:"relative hidden justify-center lg:flex",children:d.jsxs("div",{className:"relative w-full max-w-sm overflow-hidden rounded-3xl border border-slate-200 bg-slate-50/80 p-6 text-left shadow-sm dark:border-slate-700 dark:bg-slate-900/80",children:[d.jsx("div",{className:"absolute -top-8 right-4 h-16 w-16 rounded-full bg-brand-500/20 blur-2xl","aria-hidden":!0}),d.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400 dark:text-slate-500",children:"Sample listings"}),d.jsxs("ul",{className:"mt-4 space-y-3 text-sm text-slate-600 dark:text-slate-300",children:[d.jsxs("li",{className:"flex items-start gap-2",children:[d.jsx("span",{"aria-hidden":!0,children:"🍕"}),d.jsxs("span",{children:[d.jsx("span",{className:"font-semibold",children:"Foot-Stomped Pizza"}),d.jsx("span",{className:"block text-xs text-slate-500 dark:text-slate-400",children:"Pairs best with a tetanus shot."})]})]}),d.jsxs("li",{className:"flex items-start gap-2",children:[d.jsx("span",{"aria-hidden":!0,children:"🥤"}),d.jsxs("span",{children:[d.jsx("span",{className:"font-semibold",children:"Lipstick Latte (Half)"}),d.jsx("span",{className:"block text-xs text-slate-500 dark:text-slate-400",children:"Now with bonus secrets."})]})]}),d.jsxs("li",{className:"flex items-start gap-2",children:[d.jsx("span",{"aria-hidden":!0,children:"🧴"}),d.jsxs("span",{children:[d.jsx("span",{className:"font-semibold",children:"Bath Water Vial"}),d.jsx("span",{className:"block text-xs text-slate-500 dark:text-slate-400",children:"Serve chilled. Question why later."})]})]})]})]})})]})]}),d.jsxs("section",{className:"relative mx-auto max-w-6xl overflow-hidden rounded-[2.75rem] bg-gradient-to-br from-emerald-500 via-cyan-500 to-sky-500 px-6 py-8 text-white shadow-xl sm:px-8 sm:py-10",children:[d.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.25),_transparent_55%)]","aria-hidden":!0}),d.jsxs("div",{className:"relative z-10 grid gap-6 lg:grid-cols-[minmax(0,1.4fr)_minmax(0,1fr)] lg:items-center",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-white/80",children:"Spotlight · New utility"}),d.jsx("h2",{className:"text-2xl font-semibold sm:text-3xl",children:"BHP — Bank Holiday Planner"}),d.jsxs("p",{className:"text-sm leading-relaxed text-white/80",children:["Optimize your paid leave around official bank holidays for the USA, UK, France, Spain, and Italy. BHP prepares a strict",d.jsx("code",{className:"mx-1 rounded bg-white/20 px-1 py-0.5 text-[0.7rem] font-semibold text-white",children:"/obj"}),"schema request so the assistant can return PTO blocks, totals, and a comparison against randomly scattered leave days."]}),d.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[d.jsxs(we,{to:"/bank-holiday-planner",className:"inline-flex items-center gap-2 rounded-full bg-white px-4 py-2 text-sm font-semibold text-emerald-700 shadow transition hover:bg-emerald-50",children:["Launch planner",d.jsx("span",{"aria-hidden":!0,children:"→"})]}),d.jsx("span",{className:"inline-flex items-center gap-2 rounded-full bg-white/20 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-white/80",children:"Calendar heatmap included"})]})]}),d.jsx("div",{className:"relative hidden justify-center lg:flex",children:d.jsxs("div",{className:"relative w-full max-w-xs rounded-3xl border border-white/25 bg-white/10 p-6 text-left shadow-lg",children:[d.jsx("div",{className:"absolute -top-10 right-6 h-20 w-20 rounded-full bg-white/10 blur-2xl","aria-hidden":!0}),d.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-white/70",children:"Sample itinerary"}),d.jsxs("div",{className:"mt-4 space-y-4",children:[d.jsxs("div",{className:"rounded-2xl bg-white/10 p-3 shadow-sm",children:[d.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-white/60",children:"Stretch"}),d.jsx("p",{className:"text-lg font-semibold text-white",children:"Apr 27 → May 12"}),d.jsx("p",{className:"text-xs text-white/70",children:"Wrap two long weekends into a 16 day break."})]}),d.jsxs("dl",{className:"grid grid-cols-2 gap-3 text-white",children:[d.jsxs("div",{children:[d.jsx("dt",{className:"text-[0.65rem] uppercase tracking-[0.3em] text-white/60",children:"PTO Used"}),d.jsx("dd",{className:"text-xl font-semibold",children:"6 days"})]}),d.jsxs("div",{children:[d.jsx("dt",{className:"text-[0.65rem] uppercase tracking-[0.3em] text-white/60",children:"Coverage"}),d.jsx("dd",{className:"text-xl font-semibold",children:"16 days"})]}),d.jsxs("div",{className:"col-span-2",children:[d.jsx("dt",{className:"text-[0.65rem] uppercase tracking-[0.3em] text-white/60",children:"Next best option"}),d.jsx("dd",{className:"text-sm text-white/75",children:"4 PTO days · 11 days off total — BHP highlights why the top plan wins."})]})]})]})]})})]})]}),d.jsxs("section",{className:"space-y-10",children:[d.jsxs("header",{className:"space-y-3",children:[d.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Deep dive into each workspace ✨"}),d.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Every experience shares the core Groq Studio shell, but the long-form briefs below highlight their data sources, inline tools, and standout workflows so you can choose the right copilot for the moment. 🎯"})]}),d.jsxs("div",{className:"space-y-8",children:[$t.map(t=>{const e=Yd[t.id]??d.jsx("p",{children:t.description}),r=qd[t.id]??[];return d.jsxs("article",{className:"group relative overflow-hidden rounded-3xl border border-slate-200 bg-white/90 p-8 shadow-sm transition hover:shadow-xl dark:border-slate-800 dark:bg-slate-900",children:[d.jsxs("div",{className:"pointer-events-none absolute inset-0 opacity-0 transition-opacity group-hover:opacity-100","aria-hidden":!0,children:[d.jsx("div",{className:"absolute -top-20 right-0 h-40 w-40 rounded-full bg-brand-500/10 blur-3xl"}),d.jsx("div",{className:"absolute -bottom-24 left-6 h-36 w-36 rounded-full bg-slate-400/10 blur-3xl"})]}),d.jsxs("div",{className:"relative space-y-5",children:[d.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[d.jsxs("div",{className:"flex flex-col gap-2",children:[d.jsx("div",{className:`h-1 w-16 rounded-full bg-gradient-to-r ${t.heroGradient}`,"aria-hidden":!0}),d.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:t.name})]}),d.jsx("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold ${t.panelAccent}`,children:t.badge}),d.jsxs(we,{to:t.path,className:"ml-auto inline-flex items-center gap-2 rounded-full border border-slate-300 px-3 py-1 text-sm font-medium text-slate-700 transition hover:border-brand-500 hover:bg-brand-50 hover:text-brand-600 dark:border-slate-700 dark:text-slate-200 dark:hover:border-brand-400/60 dark:hover:bg-brand-500/10",children:["Enter workspace",d.jsx("span",{"aria-hidden":!0,children:"→"})]})]}),d.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:t.headline}),d.jsx("div",{className:"space-y-3 text-sm leading-relaxed text-slate-600 dark:text-slate-300",children:e}),r.length>0&&d.jsx("div",{className:"flex flex-wrap gap-2 pt-2",children:r.map(n=>d.jsx("span",{className:"inline-flex items-center rounded-full border border-slate-200 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-500 dark:border-slate-700 dark:text-slate-300",children:n},n))}),d.jsx("div",{className:"text-xs uppercase tracking-wider text-slate-400 dark:text-slate-500",children:t.modelOptions.join(" • ")})]})]},t.id)}),d.jsxs("article",{className:"group relative overflow-hidden rounded-3xl border border-slate-200 bg-white/90 p-8 shadow-sm transition hover:shadow-xl dark:border-slate-800 dark:bg-slate-900",children:[d.jsxs("div",{className:"pointer-events-none absolute inset-0 opacity-0 transition-opacity group-hover:opacity-100","aria-hidden":!0,children:[d.jsx("div",{className:"absolute -top-20 right-0 h-40 w-40 rounded-full bg-fuchsia-500/10 blur-3xl"}),d.jsx("div",{className:"absolute -bottom-24 left-6 h-36 w-36 rounded-full bg-amber-400/10 blur-3xl"})]}),d.jsxs("div",{className:"relative space-y-5",children:[d.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[d.jsxs("div",{className:"flex flex-col gap-2",children:[d.jsx("div",{className:"h-1 w-16 rounded-full bg-gradient-to-r from-fuchsia-500 via-amber-400 to-rose-500","aria-hidden":!0}),d.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Flux vs DALL·E Comparison Lab"})]}),d.jsx("span",{className:"inline-flex items-center rounded-full bg-fuchsia-100 px-3 py-1 text-xs font-semibold text-fuchsia-800 dark:bg-fuchsia-500/20 dark:text-fuchsia-200",children:"Research drop"}),d.jsxs(we,{to:"/dalle-vs-flux",className:"ml-auto inline-flex items-center gap-2 rounded-full border border-slate-300 px-3 py-1 text-sm font-medium text-slate-700 transition hover:border-fuchsia-500 hover:bg-fuchsia-50 hover:text-fuchsia-600 dark:border-slate-700 dark:text-slate-200 dark:hover:border-fuchsia-400/60 dark:hover:bg-fuchsia-500/10",children:["Open comparison",d.jsx("span",{"aria-hidden":!0,children:"→"})]})]}),d.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"See how Groq-hosted Flux Schnell stacks up against OpenAI’s latest DALL·E 3 release across shared prompts, styles, and budgets."}),d.jsxs("div",{className:"space-y-3 text-sm leading-relaxed text-slate-600 dark:text-slate-300",children:[d.jsx("p",{children:"We logged 186 matched prompts and streamed both renders via public endpoints. Flux Schnell ran on GroqCloud for free, while the DALL·E 3 set consumed $30 of credits — a practical look at cost-per-image trade-offs."}),d.jsx("p",{children:"The gallery batches ten comparisons per page for quick scanning, and every tile links to the original export so you can inspect details, brushwork, and color handling up close."})]}),d.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[d.jsx("span",{className:"inline-flex items-center rounded-full border border-slate-200 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-500 dark:border-slate-700 dark:text-slate-300",children:"image-benchmark"}),d.jsx("span",{className:"inline-flex items-center rounded-full border border-slate-200 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-500 dark:border-slate-700 dark:text-slate-300",children:"pagination-ready"}),d.jsx("span",{className:"inline-flex items-center rounded-full border border-slate-200 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-500 dark:border-slate-700 dark:text-slate-300",children:"cost-transparency"})]}),d.jsx("div",{className:"text-xs uppercase tracking-wider text-slate-400 dark:text-slate-500",children:"Flux Schnell (GroqCloud) • DALL·E 3 (OpenAI) • 186 prompts tracked"})]})]}),d.jsxs("article",{className:"group relative overflow-hidden rounded-3xl border border-slate-200 bg-white/90 p-8 shadow-sm transition hover:shadow-xl dark:border-slate-800 dark:bg-slate-900",children:[d.jsxs("div",{className:"pointer-events-none absolute inset-0 opacity-0 transition-opacity group-hover:opacity-100","aria-hidden":!0,children:[d.jsx("div",{className:"absolute -top-20 right-0 h-40 w-40 rounded-full bg-sky-500/10 blur-3xl"}),d.jsx("div",{className:"absolute -bottom-24 left-6 h-36 w-36 rounded-full bg-cyan-400/10 blur-3xl"})]}),d.jsxs("div",{className:"relative space-y-5",children:[d.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[d.jsxs("div",{className:"flex flex-col gap-2",children:[d.jsx("div",{className:"h-1 w-16 rounded-full bg-gradient-to-r from-sky-500 to-cyan-400","aria-hidden":!0}),d.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Game of Life Lab"})]}),d.jsx("span",{className:"inline-flex items-center rounded-full bg-sky-100 px-3 py-1 text-xs font-semibold text-sky-800 dark:bg-sky-500/20 dark:text-sky-200",children:"Lab"}),d.jsxs(we,{to:"/game-of-life-lab",className:"ml-auto inline-flex items-center gap-2 rounded-full border border-slate-300 px-3 py-1 text-sm font-medium text-slate-700 transition hover:border-sky-500 hover:bg-sky-50 hover:text-sky-600 dark:border-slate-700 dark:text-slate-200 dark:hover:border-sky-400/60 dark:hover:bg-sky-500/10",children:["Enter workspace",d.jsx("span",{"aria-hidden":!0,children:"→"})]})]}),d.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Explore Conway's classic automaton with live controls and toroidal wrap."}),d.jsx("div",{className:"space-y-3 text-sm leading-relaxed text-slate-600 dark:text-slate-300",children:Qd}),Ya.length>0&&d.jsx("div",{className:"flex flex-wrap gap-2 pt-2",children:Ya.map(t=>d.jsx("span",{className:"inline-flex items-center rounded-full border border-slate-200 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-500 dark:border-slate-700 dark:text-slate-300",children:t},t))}),d.jsx("div",{className:"text-xs uppercase tracking-wider text-slate-400 dark:text-slate-500",children:"Toroidal wrap • Live controls • Preset seeds"})]})]})]})]})]})}function Ke({experience:t,children:e,navigation:r}){if(!t)return d.jsx("div",{className:"rounded-2xl border border-red-200 bg-red-50 p-6 text-red-700 dark:border-red-800 dark:bg-red-900/40 dark:text-red-200",children:"Experience not found."});const n=t.heroContent;return d.jsxs("div",{className:"space-y-8",children:[d.jsxs("section",{className:`relative overflow-hidden rounded-3xl bg-gradient-to-br px-8 py-10 text-white shadow-lg ${t.heroGradient}`,children:[d.jsxs("div",{className:"max-w-3xl space-y-4",children:[d.jsx("span",{className:"inline-flex items-center rounded-full bg-black/20 px-3 py-1 text-xs uppercase tracking-wide",children:t.badge}),d.jsx("h1",{className:"text-3xl font-semibold sm:text-4xl",children:t.name}),n?d.jsx(n,{experience:t}):d.jsxs(d.Fragment,{children:[d.jsx("p",{className:"text-base text-white/90",children:t.headline}),d.jsx("p",{className:"text-sm text-white/80",children:t.description})]})]}),d.jsx("div",{className:"absolute -right-20 bottom-0 top-0 w-64 bg-white/10 blur-3xl","aria-hidden":!0})]}),r?d.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white/80 px-4 py-3 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:r}):null,d.jsx("div",{children:e})]})}const tc=[{method:"POST",path:"/chat",badge:"Conversational core",description:"Primary endpoint used by every experience. The frontend appends /chat to the configured base URL and sends OpenAI-style chat payloads; the worker can augment requests with product lookups before returning Groq responses.",emoji:"💬"},{method:"GET",path:"/flavor-finder/<foodOrBarcode>",badge:"Allergy scout",description:"Helper route that fetches allergy metadata on demand, perfect for debugging the worker's ingredient sourcing without loading the full UI.",emoji:"🔎"},{method:"GET",path:"/news/<category>",badge:"Curated headlines",description:"Curated newsfeed powering the News Analyzer experience. The worker aggregates trusted sources per category and returns normalized JSON so the UI can render headlines instantly.",emoji:"🗞️"},{method:"GET",path:"/svg/<prompt> & /svg_deluxe/<prompt>",badge:"Vector foundry",description:"SVG rendering routes used by the Prompt Lab and Flag Foundry. /svg streams Llama 3 inline markup, while /svg_deluxe taps oss-120B for high-token animated canvases.",emoji:"🧵"},{method:"GET",path:"/flux/<prompt>",badge:"Visual studio",description:"Image generator backing Pizza Maker, Car Maker, and the Flux playground. The worker orchestrates Groq's Flux models and normalizes the resulting gallery payloads.",emoji:"🖼️"},{method:"POST",path:"/obj/<type> (and /object*/ variants)",badge:"Structured maker",description:"Structured generation endpoint consumed by Object Maker. It accepts a JSON schema, user prompt, and optional model parameters, then returns a compliant object.",emoji:"🧩"}];function rc(){return d.jsxs("div",{className:"space-y-12",children:[d.jsx("section",{className:"rounded-3xl bg-gradient-to-br from-slate-900 via-brand-700 to-indigo-600 px-8 py-12 text-white shadow-xl",children:d.jsxs("div",{className:"max-w-3xl space-y-4",children:[d.jsx("p",{className:"text-sm uppercase tracking-[0.3em] text-white/70",children:"About Groq AllIn Studio"}),d.jsx("h1",{className:"text-3xl font-semibold sm:text-4xl",children:"Louis Paulet's Groq AllIn Studio 🤝"}),d.jsx("p",{className:"text-base text-white/90",children:"Groq AllIn Studio is a personal initiative by Louis Paulet, Data Scientist at Checkout.com. The project explores how GroqCloud services can support focused conversational tools while complementing his production work. Each module tests practical applications, latency-sensitive interfaces, and the supporting infrastructure required to run them responsibly. 🔍"}),d.jsx(we,{to:"/",className:"inline-flex items-center rounded-full bg-white/90 px-4 py-2 text-sm font-medium text-slate-900 transition hover:bg-white",children:"Back to Overview"})]})}),d.jsxs("section",{className:"grid gap-8 md:grid-cols-3",children:[d.jsxs("article",{className:"space-y-3 rounded-2xl border border-slate-200 bg-white/80 p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900/70",children:[d.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"1. Frontend studio 🖥️"}),d.jsxs("p",{className:"text-sm leading-relaxed text-slate-600 dark:text-slate-400",children:["The ",d.jsx("code",{children:"all_in/"})," workspace is the production React shell that unifies the Pokédex, AllergyFinder, STL Viewer, and Object Maker experiences for deployment. It is the only project that ships live, while reusing shared chat and UI components across each tab."]})]}),d.jsxs("article",{className:"space-y-3 rounded-2xl border border-slate-200 bg-white/80 p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900/70",children:[d.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"2. Cloudflare worker backend ☁️"}),d.jsx("p",{className:"text-sm leading-relaxed text-slate-600 dark:text-slate-400",children:"☁️ A dedicated Cloudflare Worker powers the Groq backend. Every chat in the studio tunnels through this worker, which enriches prompts with tools like product lookups before relaying Groq responses."})]}),d.jsxs("article",{className:"space-y-3 rounded-2xl border border-slate-200 bg-white/80 p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900/70",children:[d.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"3. Applied research space 🧪"}),d.jsx("p",{className:"text-sm leading-relaxed text-slate-600 dark:text-slate-400",children:"🔬 The studio hosts a rotating set of exploratory prompts and prototypes that examine new interaction patterns. It is the venue for trying emerging Groq capabilities, refining responsible guardrails, and translating lessons back into production-quality solutions."})]})]}),d.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900/70",children:[d.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Why the worker matters 🛠️"}),d.jsx("p",{className:"mt-3 text-sm leading-relaxed text-slate-600 dark:text-slate-400",children:"Louis designed the worker to carry its own intelligence. Beyond proxying Groq models, it can query product data when a chat session asks about allergens, providing the same product evidence that powers the dedicated AllergyFinder experience. 🧠"}),d.jsx("p",{className:"mt-3 text-sm leading-relaxed text-slate-600 dark:text-slate-400",children:"The Object Maker tooling leans on the worker too: schema brainstorming happens through the chat endpoint, then the structured output endpoint turns those schemas into real JSON objects. 🧾"})]}),d.jsxs("section",{className:"relative overflow-hidden rounded-3xl border border-slate-200 bg-gradient-to-br from-slate-950 via-indigo-900 to-brand-700 p-8 text-white shadow-xl dark:border-slate-800",children:[d.jsx("div",{className:"absolute -top-20 -right-16 h-56 w-56 rounded-full bg-white/10 blur-3xl","aria-hidden":"true"}),d.jsx("div",{className:"absolute -bottom-24 -left-10 h-64 w-64 rounded-full bg-brand-400/20 blur-3xl","aria-hidden":"true"}),d.jsxs("div",{className:"relative",children:[d.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-white/60",children:"Worker capabilities"}),d.jsx("h2",{className:"mt-2 text-2xl font-semibold sm:text-3xl",children:"Supported worker routes 🚦"})]}),d.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-white/20 bg-white/10 px-4 py-1 text-xs font-medium text-white/80 backdrop-blur",children:[d.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-400"}),"Always-on tunnel to GroqCloud"]})]}),d.jsx("p",{className:"mt-4 max-w-2xl text-sm leading-relaxed text-white/80",children:"Each route is tuned for a specialized job—from conversational routing to asset generation—so experiments feel crisp without any custom wiring. Tap into them directly or through the studio experiences to unlock the same low-latency magic."}),d.jsx("div",{className:"mt-8 grid gap-4 md:grid-cols-2 xl:grid-cols-3",children:tc.map(t=>d.jsxs("div",{className:"group relative overflow-hidden rounded-2xl border border-white/10 bg-white/5 p-6 shadow-lg backdrop-blur-sm transition-all duration-300 hover:-translate-y-1 hover:border-white/30 hover:bg-white/10",children:[d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsx("span",{className:"rounded-full border border-white/20 bg-white/10 px-3 py-1 font-semibold uppercase tracking-widest text-white",children:t.method}),d.jsx("span",{className:"text-xl","aria-hidden":"true",children:t.emoji})]}),d.jsx("p",{className:"mt-4 text-lg font-semibold text-white",children:t.path}),d.jsxs("p",{className:"mt-2 inline-flex items-center gap-2 text-xs font-medium uppercase tracking-[0.2em] text-white/60",children:[d.jsx("span",{className:"h-1 w-6 rounded-full bg-brand-300/60 transition-all duration-300 group-hover:w-12 group-hover:bg-brand-200"}),t.badge]}),d.jsx("p",{className:"mt-3 text-sm leading-relaxed text-white/80",children:t.description})]},t.path))}),d.jsx("p",{className:"mt-8 text-sm leading-relaxed text-white/80",children:"The worker keeps each experiment consistent, ensuring the studio remains reliable even as new ideas are introduced. 📈"})]})]})]})}function nc({conversations:t,activeId:e,onSelect:r,onNew:n,onRename:a,onFlushHistory:i,disableNew:o=!1,disableFlush:s=!1}){const[l,c]=v.useState(null),[u,f]=v.useState("");return d.jsxs("div",{className:"h-full rounded-2xl border border-slate-200 bg-white/80 p-3 shadow-sm dark:border-slate-800 dark:bg-slate-900/60",children:[d.jsxs("button",{type:"button",onClick:n,disabled:o,className:"mb-3 inline-flex w-full items-center justify-center gap-2 rounded-xl bg-brand-600 px-3 py-2 text-sm font-medium text-white transition hover:bg-brand-700 disabled:cursor-not-allowed disabled:bg-brand-600/60",children:[d.jsx(Js,{className:"h-5 w-5"})," New chat"]}),i?d.jsxs("button",{type:"button",onClick:i,disabled:s,className:"mb-4 inline-flex w-full items-center justify-center gap-2 rounded-xl border border-slate-300 px-3 py-2 text-sm font-medium text-slate-600 transition hover:border-slate-400 hover:bg-slate-50 disabled:cursor-not-allowed disabled:text-slate-400 dark:border-slate-700 dark:text-slate-300 dark:hover:border-slate-600 dark:hover:bg-slate-800",children:[d.jsx(dr,{className:"h-5 w-5"})," Delete saved chats"]}):null,d.jsx("div",{className:"space-y-1",children:t.map(h=>d.jsxs("div",{className:`group flex items-center justify-between rounded-xl border px-3 py-2 text-sm transition ${h.id===e?"border-brand-600 bg-brand-50 text-brand-700 dark:border-brand-500 dark:bg-slate-800 dark:text-brand-300":"border-slate-200 text-slate-600 hover:bg-slate-50 dark:border-slate-700 dark:text-slate-300 dark:hover:bg-slate-800"}`,onClick:()=>r?.(h.id),children:[l===h.id?d.jsx("form",{onSubmit:p=>{p.preventDefault(),a?.(h.id,u||h.title),c(null)},className:"flex grow items-center gap-2",children:d.jsx("input",{autoFocus:!0,className:"w-full rounded-md border border-slate-300 px-2 py-1 text-sm text-slate-700 focus:border-brand-500 focus:outline-none focus:ring-1 focus:ring-brand-500 dark:border-slate-600 dark:bg-slate-800 dark:text-slate-100",defaultValue:h.title,onChange:p=>f(p.target.value),onBlur:()=>c(null)})}):d.jsx("div",{className:"truncate pr-2 text-sm font-medium",children:h.title}),d.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),c(h.id),f(h.title)},className:"invisible rounded-md p-1 text-slate-500 transition group-hover:visible hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-700",title:"Rename",children:d.jsx(Qs,{className:"h-4 w-4"})})]},h.id))})]})}Ye.registerLanguage("javascript",jo);Ye.registerLanguage("js",jo);Ye.registerLanguage("typescript",Ro);Ye.registerLanguage("ts",Ro);Ye.registerLanguage("python",Do);Ye.registerLanguage("py",Do);Ye.registerLanguage("json",cl);Ye.registerLanguage("bash",Po);Ye.registerLanguage("sh",Po);Ye.registerLanguage("markdown",ul);Mo.setOptions({breaks:!0,highlight(t,e){try{return e&&Ye.getLanguage(e)?Ye.highlight(t,{language:e}).value:Ye.highlightAuto(t).value}catch{return t}}});function ac(t){const e=Mo.parse(t||"");return Lo.sanitize(e)}function ic(t){return(typeof t=="number"?new Date(t):t).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}class oc extends v.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,r){console.error("ErrorBoundary caught",e,r)}render(){return this.state.hasError?d.jsx("div",{className:"h-64 grid place-items-center text-sm text-red-600 dark:text-red-400",children:"Failed to render 3D preview."}):this.props.children}}const sc=v.lazy(()=>dl(()=>import("./STLViewer-ug1mwbRs.js"),__vite__mapDeps([0,1,2,3])));function lc(t){if(!t)return[];const e=[],r=/(https?:\/\/\S+?\.stl)\b/gi,n=new Set;let a;for(;(a=r.exec(t))!==null;)n.add(a[1]);for(const u of n)e.push({type:"url",url:u});const i=t.toLowerCase(),o=/```([^\n`]*)\n([\s\S]*?)```/g;let s;for(;(s=o.exec(t))!==null;){const u=(s[1]||"").trim().toLowerCase(),f=s[2]||"",h=f.toLowerCase(),p=(h.match(/facet normal/g)||[]).length;(u==="stl"||h.startsWith("solid")||p>=4&&h.includes("vertex"))&&e.push({type:"text",text:f.trim()})}const l=(i.match(/facet normal/g)||[]).length;return(/(\n|^)\s*solid\b/.test(i)&&l>=1||l>=4&&i.includes("vertex"))&&(e.some(u=>u.type==="text")||e.push({type:"text",text:t.trim()})),e}function dc({experience:t,role:e,content:r,name:n,timestamp:a,streaming:i=!1,showAvatar:o=!0,showName:s=!0}){const l=e==="user",c=!!t?.enableStlViewer,u=v.useMemo(()=>c?lc(r):[],[r,c]),f=v.useMemo(()=>{if(!c)return!1;const h=(r||"").toLowerCase();return[h.includes(".stl"),h.includes("facet normal"),h.includes("vertex "),h.includes("outer loop")].filter(Boolean).length>=2},[r,c]);return d.jsxs("div",{className:`flex ${l?"justify-end":"justify-start"}`,children:[!l&&o&&d.jsx("div",{className:"mr-2 mt-1 h-7 w-7 shrink-0 rounded-full bg-brand-600 text-white",children:d.jsx("div",{className:"grid h-full w-full place-items-center",children:d.jsx(Io,{className:"h-4 w-4"})})}),d.jsxs("div",{className:l?"max-w-[80%] rounded-2xl bg-indigo-600 px-4 py-2 text-sm text-white shadow":"max-w-[80%] rounded-2xl border border-slate-200 bg-white px-4 py-2 text-sm text-slate-800 shadow-sm dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",children:[s&&d.jsxs("div",{className:`mb-1 text-xs ${l?"text-indigo-100/80":"text-slate-500 dark:text-slate-400"}`,children:[n," • ",ic(a)]}),l?d.jsx("div",{className:"whitespace-pre-wrap",children:r}):d.jsx("div",{className:"prose",dangerouslySetInnerHTML:{__html:ac(r)}}),c&&u.length>0&&!i&&d.jsx("div",{className:"mt-2",children:d.jsx(oc,{children:d.jsx(v.Suspense,{fallback:d.jsx("div",{className:"h-64 grid place-items-center text-slate-500",children:"Loading 3D viewer… ⏳"}),children:d.jsx(sc,{source:u[0]})})})}),c&&u.length>0&&i&&d.jsx("div",{className:"mt-2 text-xs text-slate-500",children:"3D preview will appear when the response finishes… 🛰️"}),c&&u.length===0&&!i&&f&&d.jsx("div",{className:"mt-2 text-xs text-amber-600 dark:text-amber-400",children:"The response looks like STL content but may be incomplete. Wrap it in a fenced block (```stl … ```), or include full facets so the preview can render correctly. 🧱"})]}),l&&o&&d.jsx("div",{className:"ml-2 mt-1 h-7 w-7 shrink-0 rounded-full bg-slate-200 text-slate-600",children:d.jsx("div",{className:"grid h-full w-full place-items-center",children:d.jsx(ko,{className:"h-4 w-4"})})})]})}function cc(t){return t.map((e,r,n)=>{const a=r>0?n[r-1]:null,i=r<n.length-1?n[r+1]:null,o=!a||a.role!==e.role,s=!i||i.role!==e.role;return{...e,isFirstOfGroup:o,isLastOfGroup:s}})}function uc({experience:t,messages:e}){const r=v.useRef(null);return v.useEffect(()=>{r.current?.scrollIntoView({behavior:"smooth",block:"end"})},[e]),d.jsx("div",{className:"h-[65vh] overflow-y-auto rounded-2xl border border-slate-200 bg-white/80 p-4 shadow-sm thin-scrollbar dark:border-slate-800 dark:bg-slate-900/60",children:d.jsxs("div",{className:"flex flex-col gap-3",children:[cc(e).map((n,a)=>d.jsx(dc,{experience:t,role:n.role,content:n.content,name:n.name,timestamp:n.timestamp,streaming:n.streaming,showAvatar:n.isFirstOfGroup,showName:n.isFirstOfGroup,sources:n.sources},a)),d.jsx("div",{ref:r})]})})}function fc({value:t,onChange:e,onSend:r,onStop:n,loading:a,onClear:i,placeholder:o,onOpenScanner:s}){return d.jsx("form",{onSubmit:l=>{l.preventDefault(),a||r?.(t)},className:"sticky bottom-0 w-full",children:d.jsxs("div",{className:"flex items-end gap-2 rounded-2xl border border-slate-200 bg-white/90 p-2 shadow-sm backdrop-blur dark:border-slate-700 dark:bg-slate-900/60",children:[d.jsx("textarea",{className:"block w-full resize-none rounded-xl border-none bg-transparent p-3 text-sm text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-brand-600/60 dark:bg-slate-800/70 dark:text-slate-100 dark:placeholder-slate-400",rows:2,value:t,onChange:l=>e?.(l.target.value),placeholder:o||"Ask anything... (Shift+Enter for newline)",onKeyDown:l=>{l.key==="Enter"&&!l.shiftKey&&(l.preventDefault(),a||r?.(t))}}),d.jsx("div",{className:"flex items-center gap-2 pr-1",children:a?d.jsx("button",{type:"button",onClick:n,className:"inline-flex items-center rounded-xl bg-slate-200 px-3 py-2 text-slate-700 hover:bg-slate-300 dark:bg-slate-800 dark:text-slate-100 dark:hover:bg-slate-700",title:"Stop",children:d.jsx(el,{className:"h-5 w-5"})}):d.jsxs(d.Fragment,{children:[s&&d.jsx("button",{type:"button",onClick:()=>s?.(),className:"inline-flex items-center rounded-xl bg-slate-100 px-3 py-2 text-slate-700 hover:bg-slate-200 dark:bg-slate-800/80 dark:text-slate-200 dark:hover:bg-slate-700",title:"Scan barcode",children:d.jsx(tl,{className:"h-5 w-5"})}),d.jsx("button",{type:"button",onClick:i,className:"inline-flex items-center rounded-xl bg-slate-100 px-3 py-2 text-slate-700 hover:bg-slate-200 dark:bg-slate-800/80 dark:text-slate-200 dark:hover:bg-slate-700",title:"Clear",children:d.jsx(rl,{className:"h-5 w-5"})}),d.jsx("button",{type:"submit",disabled:!t.trim(),className:"inline-flex items-center rounded-xl bg-brand-600 px-4 py-2 text-white shadow hover:bg-brand-700 disabled:opacity-60",title:"Send",children:d.jsx(Oo,{className:"h-5 w-5"})})]})})]})})}function hc({value:t,onChange:e,options:r=[]}){const n=r.length>0?r:[t];return d.jsxs("label",{className:"block text-sm",children:[d.jsx("span",{className:"block text-xs font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Model"}),d.jsx("select",{className:"mt-1 block w-56 rounded-md border border-slate-300 bg-white px-2 py-2 text-sm text-slate-800 focus:border-brand-500 focus:outline-none focus:ring-1 focus:ring-brand-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",value:t,onChange:a=>e?.(a.target.value),children:n.map(a=>d.jsx("option",{value:a,children:a},a))})]})}function pc(t,e){var r=Object.setPrototypeOf;r?r(t,e):t.__proto__=e}function xc(t,e){e===void 0&&(e=t.constructor);var r=Error.captureStackTrace;r&&r(t,e)}var mc=(function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(a[o]=i[o])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),gc=(function(t){mc(e,t);function e(r,n){var a=this.constructor,i=t.call(this,r,n)||this;return Object.defineProperty(i,"name",{value:a.name,enumerable:!1,configurable:!0}),pc(i,a.prototype),xc(i),i}return e})(Error),vc=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),ze=(function(t){vc(e,t);function e(r){r===void 0&&(r=void 0);var n=t.call(this,r)||this;return n.message=r,n}return e.prototype.getKind=function(){var r=this.constructor;return r.kind},e.kind="Exception",e})(gc),bc=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),ye=(function(t){bc(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArgumentException",e})(ze),yc=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),U=(function(t){yc(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e})(ze),es=(function(){function t(e){if(this.binarizer=e,e===null)throw new U("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(e,r){return this.binarizer.getBlackRow(e,r)},t.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,r,n,a){var i=this.binarizer.getLuminanceSource().crop(e,r,n,a);return new t(this.binarizer.createBinarizer(i))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},t})(),wc=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),_e=(function(t){wc(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e})(ze),_c=(function(){function t(e){this.source=e}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t})(),he=(function(){function t(){}return t.arraycopy=function(e,r,n,a,i){for(;i--;)n[a++]=e[r++]},t.currentTimeMillis=function(){return Date.now()},t})(),Ac=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),ca=(function(t){Ac(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e})(ze),Cc=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),qa=(function(t){Cc(e,t);function e(r,n){r===void 0&&(r=void 0),n===void 0&&(n=void 0);var a=t.call(this,n)||this;return a.index=r,a.message=n,a}return e.kind="ArrayIndexOutOfBoundsException",e})(ca),Ec=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ke=(function(){function t(){}return t.fill=function(e,r){for(var n=0,a=e.length;n<a;n++)e[n]=r},t.fillWithin=function(e,r,n,a){t.rangeCheck(e.length,r,n);for(var i=r;i<n;i++)e[i]=a},t.rangeCheck=function(e,r,n){if(r>n)throw new U("fromIndex("+r+") > toIndex("+n+")");if(r<0)throw new qa(r);if(n>e)throw new qa(n)},t.asList=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e},t.create=function(e,r,n){var a=Array.from({length:e});return a.map(function(i){return Array.from({length:r}).fill(n)})},t.createInt32Array=function(e,r,n){var a=Array.from({length:e});return a.map(function(i){return Int32Array.from({length:r}).fill(n)})},t.equals=function(e,r){if(!e||!r||!e.length||!r.length||e.length!==r.length)return!1;for(var n=0,a=e.length;n<a;n++)if(e[n]!==r[n])return!1;return!0},t.hashCode=function(e){var r,n;if(e===null)return 0;var a=1;try{for(var i=Ec(e),o=i.next();!o.done;o=i.next()){var s=o.value;a=31*a+s}}catch(l){r={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a},t.fillUint8Array=function(e,r){for(var n=0;n!==e.length;n++)e[n]=r},t.copyOf=function(e,r){return e.slice(0,r)},t.copyOfUint8Array=function(e,r){if(e.length<=r){var n=new Uint8Array(r);return n.set(e),n}return e.slice(0,r)},t.copyOfRange=function(e,r,n){var a=n-r,i=new Int32Array(a);return he.arraycopy(e,r,i,0,a),i},t.binarySearch=function(e,r,n){n===void 0&&(n=t.numberComparator);for(var a=0,i=e.length-1;a<=i;){var o=i+a>>1,s=n(r,e[o]);if(s>0)a=o+1;else if(s<0)i=o-1;else return o}return-a-1},t.numberComparator=function(e,r){return e-r},t})(),X=(function(){function t(){}return t.numberOfTrailingZeros=function(e){var r;if(e===0)return 32;var n=31;return r=e<<16,r!==0&&(n-=16,e=r),r=e<<8,r!==0&&(n-=8,e=r),r=e<<4,r!==0&&(n-=4,e=r),r=e<<2,r!==0&&(n-=2,e=r),n-(e<<1>>>31)},t.numberOfLeadingZeros=function(e){if(e===0)return 32;var r=1;return e>>>16||(r+=16,e<<=16),e>>>24||(r+=8,e<<=8),e>>>28||(r+=4,e<<=4),e>>>30||(r+=2,e<<=2),r-=e>>>31,r},t.toHexString=function(e){return e.toString(16)},t.toBinaryString=function(e){return String(parseInt(String(e),2))},t.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},t.truncDivision=function(e,r){return Math.trunc(e/r)},t.parseInt=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t})(),je=(function(){function t(e,r){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,r==null?this.bits=t.makeArray(e):this.bits=r)}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var r=t.makeArray(e);he.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}},t.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},t.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},t.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},t.prototype.getNextSet=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,a=Math.floor(e/32),i=n[a];i&=~((1<<(e&31))-1);for(var o=n.length;i===0;){if(++a===o)return r;i=n[a]}var s=a*32+X.numberOfTrailingZeros(i);return s>r?r:s},t.prototype.getNextUnset=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,a=Math.floor(e/32),i=~n[a];i&=~((1<<(e&31))-1);for(var o=n.length;i===0;){if(++a===o)return r;i=~n[a]}var s=a*32+X.numberOfTrailingZeros(i);return s>r?r:s},t.prototype.setBulk=function(e,r){this.bits[Math.floor(e/32)]=r},t.prototype.setRange=function(e,r){if(r<e||e<0||r>this.size)throw new U;if(r!==e){r--;for(var n=Math.floor(e/32),a=Math.floor(r/32),i=this.bits,o=n;o<=a;o++){var s=o>n?0:e&31,l=o<a?31:r&31,c=(2<<l)-(1<<s);i[o]|=c}}},t.prototype.clear=function(){for(var e=this.bits.length,r=this.bits,n=0;n<e;n++)r[n]=0},t.prototype.isRange=function(e,r,n){if(r<e||e<0||r>this.size)throw new U;if(r===e)return!0;r--;for(var a=Math.floor(e/32),i=Math.floor(r/32),o=this.bits,s=a;s<=i;s++){var l=s>a?0:e&31,c=s<i?31:r&31,u=(2<<c)-(1<<l)&4294967295;if((o[s]&u)!==(n?u:0))return!1}return!0},t.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},t.prototype.appendBits=function(e,r){if(r<0||r>32)throw new U("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(var n=r;n>0;n--)this.appendBit((e>>n-1&1)===1)},t.prototype.appendBitArray=function(e){var r=e.size;this.ensureCapacity(this.size+r);for(var n=0;n<r;n++)this.appendBit(e.get(n))},t.prototype.xor=function(e){if(this.size!==e.size)throw new U("Sizes don't match");for(var r=this.bits,n=0,a=r.length;n<a;n++)r[n]^=e.bits[n]},t.prototype.toBytes=function(e,r,n,a){for(var i=0;i<a;i++){for(var o=0,s=0;s<8;s++)this.get(e)&&(o|=1<<7-s),e++;r[n+i]=o}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),n=r+1,a=this.bits,i=0;i<n;i++){var o=a[i];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[r-i]=o}if(this.size!==n*32){for(var s=n*32-this.size,l=e[0]>>>s,i=1;i<n;i++){var c=e[i];l|=c<<32-s,e[i-1]=l,l=c>>>s}e[n-1]=l}this.bits=e},t.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.size===r.size&&ke.equals(this.bits,r.bits)},t.prototype.hashCode=function(){return 31*this.size+ke.hashCode(this.bits)},t.prototype.toString=function(){for(var e="",r=0,n=this.size;r<n;r++)(r&7)===0&&(e+=" "),e+=this.get(r)?"X":".";return e},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t.prototype.toArray=function(){for(var e=[],r=0,n=this.size;r<n;r++)e.push(this.get(r));return e},t})(),Un;(function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",t[t.ASSUME_GS1=8]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(Un||(Un={}));const fe=Un;var Nc=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),P=(function(t){Nc(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e})(ze),Sc=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},le;(function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"})(le||(le={}));var Se=(function(){function t(e,r,n){for(var a,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];this.valueIdentifier=e,this.name=n,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=o,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(n,this);for(var l=this.values,c=0,u=l.length;c!==u;c++){var f=l[c];t.VALUES_TO_ECI.set(f,this)}try{for(var h=Sc(o),p=h.next();!p.done;p=h.next()){var x=p.value;t.NAME_TO_ECI.set(x,this)}}catch(m){a={error:m}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(a)throw a.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new P("incorect value");var r=t.VALUES_TO_ECI.get(e);if(r===void 0)throw new P("incorect value");return r},t.getCharacterSetECIByName=function(e){var r=t.NAME_TO_ECI.get(e);if(r===void 0)throw new P("incorect value");return r},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.getName()===r.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(le.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(le.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(le.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(le.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(le.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(le.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(le.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(le.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(le.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(le.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(le.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(le.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(le.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(le.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(le.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(le.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(le.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(le.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(le.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(le.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(le.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(le.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(le.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(le.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(le.Big5,28,"Big5"),t.GB18030=new t(le.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(le.EUC_KR,30,"EUC_KR","EUC-KR"),t})(),kc=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Or=(function(t){kc(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e})(ze),et=(function(){function t(){}return t.decode=function(e,r){var n=this.encodingName(r);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&e==="ISO-8859-1"},t.encode=function(e,r){var n=this.encodingName(r);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},t.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},t.encodingName=function(e){return typeof e=="string"?e:e.getName()},t.encodingCharacterSet=function(e){return e instanceof Se?e:Se.getCharacterSetECIByName(e)},t.decodeFallback=function(e,r){var n=this.encodingCharacterSet(r);if(t.isDecodeFallbackSupported(n)){for(var a="",i=0,o=e.length;i<o;i++){var s=e[i].toString(16);s.length<2&&(s="0"+s),a+="%"+s}return decodeURIComponent(a)}if(n.equals(Se.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Or("Encoding "+this.encodingName(r)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(e){return e.equals(Se.UTF8)||e.equals(Se.ISO8859_1)||e.equals(Se.ASCII)},t.encodeFallback=function(e){for(var r=btoa(unescape(encodeURIComponent(e))),n=r.split(""),a=[],i=0;i<n.length;i++)a.push(n[i].charCodeAt(0));return new Uint8Array(a)},t})(),Q=(function(){function t(){}return t.castAsNonUtf8Char=function(e,r){r===void 0&&(r=null);var n=r?r.getName():this.ISO88591;return et.decode(new Uint8Array([e]),n)},t.guessEncoding=function(e,r){if(r!=null&&r.get(fe.CHARACTER_SET)!==void 0)return r.get(fe.CHARACTER_SET).toString();for(var n=e.length,a=!0,i=!0,o=!0,s=0,l=0,c=0,u=0,f=0,h=0,p=0,x=0,m=0,g=0,y=0,b=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,w=0;w<n&&(a||i||o);w++){var C=e[w]&255;o&&(s>0?(C&128)===0?o=!1:s--:(C&128)!==0&&((C&64)===0?o=!1:(s++,(C&32)===0?l++:(s++,(C&16)===0?c++:(s++,(C&8)===0?u++:o=!1))))),a&&(C>127&&C<160?a=!1:C>159&&(C<192||C===215||C===247)&&y++),i&&(f>0?C<64||C===127||C>252?i=!1:f--:C===128||C===160||C>239?i=!1:C>160&&C<224?(h++,x=0,p++,p>m&&(m=p)):C>127?(f++,p=0,x++,x>g&&(g=x)):(p=0,x=0))}return o&&s>0&&(o=!1),i&&f>0&&(i=!1),o&&(b||l+c+u>0)?t.UTF8:i&&(t.ASSUME_SHIFT_JIS||m>=3||g>=3)?t.SHIFT_JIS:a&&i?m===2&&h===2||y*10>=n?t.SHIFT_JIS:t.ISO88591:a?t.ISO88591:i?t.SHIFT_JIS:o?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a=-1;function i(s,l,c,u,f,h){if(s==="%%")return"%";if(r[++a]!==void 0){s=u?parseInt(u.substr(1)):void 0;var p=f?parseInt(f.substr(1)):void 0,x;switch(h){case"s":x=r[a];break;case"c":x=r[a][0];break;case"f":x=parseFloat(r[a]).toFixed(s);break;case"p":x=parseFloat(r[a]).toPrecision(s);break;case"e":x=parseFloat(r[a]).toExponential(s);break;case"x":x=parseInt(r[a]).toString(p||16);break;case"d":x=parseFloat(parseInt(r[a],p||10).toPrecision(s)).toFixed(0);break}x=typeof x=="object"?JSON.stringify(x):(+x).toString(p);for(var m=parseInt(c),g=c&&c[0]+""=="0"?"0":" ";x.length<m;)x=l!==void 0?x+g:g+x;return x}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,i)},t.getBytes=function(e,r){return et.encode(e,r)},t.getCharCode=function(e,r){return r===void 0&&(r=0),e.charCodeAt(r)},t.getCharAt=function(e){return String.fromCharCode(e)},t.SHIFT_JIS=Se.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=Se.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=Se.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t})(),z=(function(){function t(e){e===void 0&&(e=""),this.value=e}return t.prototype.enableDecoding=function(e){return this.encoding=e,this},t.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=Q.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},t.prototype.appendChars=function(e,r,n){for(var a=r;r<r+n;a++)this.append(e[a]);return this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(e){return this.value.charAt(e)},t.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},t.prototype.setCharAt=function(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+1)},t.prototype.substring=function(e,r){return this.value.substring(e,r)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(e,r){this.value=this.value.substring(0,e)+r+this.value.substring(e)},t})(),ut=(function(){function t(e,r,n,a){if(this.width=e,this.height=r,this.rowSize=n,this.bits=a,r==null&&(r=e),this.height=r,e<1||r<1)throw new U("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,a==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var r=e.length,n=e[0].length,a=new t(n,r),i=0;i<r;i++)for(var o=e[i],s=0;s<n;s++)o[s]&&a.set(s,i);return a},t.parseFromString=function(e,r,n){if(e===null)throw new U("stringRepresentation cannot be null");for(var a=new Array(e.length),i=0,o=0,s=-1,l=0,c=0;c<e.length;)if(e.charAt(c)===`
`||e.charAt(c)==="\r"){if(i>o){if(s===-1)s=i-o;else if(i-o!==s)throw new U("row lengths do not match");o=i,l++}c++}else if(e.substring(c,c+r.length)===r)c+=r.length,a[i]=!0,i++;else if(e.substring(c,c+n.length)===n)c+=n.length,a[i]=!1,i++;else throw new U("illegal character encountered: "+e.substring(c));if(i>o){if(s===-1)s=i-o;else if(i-o!==s)throw new U("row lengths do not match");l++}for(var u=new t(s,l),f=0;f<i;f++)a[f]&&u.set(Math.floor(f%s),Math.floor(f/s));return u},t.prototype.get=function(e,r){var n=r*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0},t.prototype.set=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295},t.prototype.unset=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)},t.prototype.flip=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295},t.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new U("input matrix dimensions do not match");for(var r=new je(Math.floor(this.width/32)+1),n=this.rowSize,a=this.bits,i=0,o=this.height;i<o;i++)for(var s=i*n,l=e.getRow(i,r).getBitArray(),c=0;c<n;c++)a[s+c]^=l[c]},t.prototype.clear=function(){for(var e=this.bits,r=e.length,n=0;n<r;n++)e[n]=0},t.prototype.setRegion=function(e,r,n,a){if(r<0||e<0)throw new U("Left and top must be nonnegative");if(a<1||n<1)throw new U("Height and width must be at least 1");var i=e+n,o=r+a;if(o>this.height||i>this.width)throw new U("The region must fit inside the matrix");for(var s=this.rowSize,l=this.bits,c=r;c<o;c++)for(var u=c*s,f=e;f<i;f++)l[u+Math.floor(f/32)]|=1<<(f&31)&4294967295},t.prototype.getRow=function(e,r){r==null||r.getSize()<this.width?r=new je(this.width):r.clear();for(var n=this.rowSize,a=this.bits,i=e*n,o=0;o<n;o++)r.setBulk(o*32,a[i+o]);return r},t.prototype.setRow=function(e,r){he.arraycopy(r.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var e=this.getWidth(),r=this.getHeight(),n=new je(e),a=new je(e),i=0,o=Math.floor((r+1)/2);i<o;i++)n=this.getRow(i,n),a=this.getRow(r-1-i,a),n.reverse(),a.reverse(),this.setRow(i,a),this.setRow(r-1-i,n)},t.prototype.getEnclosingRectangle=function(){for(var e=this.width,r=this.height,n=this.rowSize,a=this.bits,i=e,o=r,s=-1,l=-1,c=0;c<r;c++)for(var u=0;u<n;u++){var f=a[c*n+u];if(f!==0){if(c<o&&(o=c),c>l&&(l=c),u*32<i){for(var h=0;(f<<31-h&4294967295)===0;)h++;u*32+h<i&&(i=u*32+h)}if(u*32+31>s){for(var h=31;!(f>>>h);)h--;u*32+h>s&&(s=u*32+h)}}}return s<i||l<o?null:Int32Array.from([i,o,s-i+1,l-o+1])},t.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,r=this.bits,n=0;n<r.length&&r[n]===0;)n++;if(n===r.length)return null;for(var a=n/e,i=n%e*32,o=r[n],s=0;(o<<31-s&4294967295)===0;)s++;return i+=s,Int32Array.from([i,a])},t.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,r=this.bits,n=r.length-1;n>=0&&r[n]===0;)n--;if(n<0)return null;for(var a=Math.floor(n/e),i=Math.floor(n%e)*32,o=r[n],s=31;!(o>>>s);)s--;return i+=s,Int32Array.from([i,a])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&ke.equals(this.bits,r.bits)},t.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+ke.hashCode(this.bits),e},t.prototype.toString=function(e,r,n){return e===void 0&&(e="X "),r===void 0&&(r="  "),n===void 0&&(n=`
`),this.buildToString(e,r,n)},t.prototype.buildToString=function(e,r,n){for(var a=new z,i=0,o=this.height;i<o;i++){for(var s=0,l=this.width;s<l;s++)a.append(this.get(s,i)?e:r);a.append(n)}return a.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t})(),Ic=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),T=(function(t){Ic(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e})(ze),Oc=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Tc=(function(t){Oc(e,t);function e(r){var n=t.call(this,r)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return e.prototype.getBlackRow=function(r,n){var a=this.getLuminanceSource(),i=a.getWidth();n==null||n.getSize()<i?n=new je(i):n.clear(),this.initArrays(i);for(var o=a.getRow(r,this.luminances),s=this.buckets,l=0;l<i;l++)s[(o[l]&255)>>e.LUMINANCE_SHIFT]++;var c=e.estimateBlackPoint(s);if(i<3)for(var l=0;l<i;l++)(o[l]&255)<c&&n.set(l);else for(var u=o[0]&255,f=o[1]&255,l=1;l<i-1;l++){var h=o[l+1]&255;(f*4-u-h)/2<c&&n.set(l),u=f,f=h}return n},e.prototype.getBlackMatrix=function(){var r=this.getLuminanceSource(),n=r.getWidth(),a=r.getHeight(),i=new ut(n,a);this.initArrays(n);for(var o=this.buckets,s=1;s<5;s++)for(var l=Math.floor(a*s/5),c=r.getRow(l,this.luminances),u=Math.floor(n*4/5),f=Math.floor(n/5);f<u;f++){var h=c[f]&255;o[h>>e.LUMINANCE_SHIFT]++}for(var p=e.estimateBlackPoint(o),x=r.getMatrix(),s=0;s<a;s++)for(var m=s*n,f=0;f<n;f++){var h=x[m+f]&255;h<p&&i.set(f,s)}return i},e.prototype.createBinarizer=function(r){return new e(r)},e.prototype.initArrays=function(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));for(var n=this.buckets,a=0;a<e.LUMINANCE_BUCKETS;a++)n[a]=0},e.estimateBlackPoint=function(r){for(var n=r.length,a=0,i=0,o=0,s=0;s<n;s++)r[s]>o&&(i=s,o=r[s]),r[s]>a&&(a=r[s]);for(var l=0,c=0,s=0;s<n;s++){var u=s-i,f=r[s]*u*u;f>c&&(l=s,c=f)}if(i>l){var h=i;i=l,l=h}if(l-i<=n/16)throw new T;for(var p=l-1,x=-1,s=l-1;s>i;s--){var m=s-i,f=m*m*(l-s)*(a-r[s]);f>x&&(p=s,x=f)}return p<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e})(_c),jc=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),ts=(function(t){jc(e,t);function e(r){var n=t.call(this,r)||this;return n.matrix=null,n}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var r=this.getLuminanceSource(),n=r.getWidth(),a=r.getHeight();if(n>=e.MINIMUM_DIMENSION&&a>=e.MINIMUM_DIMENSION){var i=r.getMatrix(),o=n>>e.BLOCK_SIZE_POWER;(n&e.BLOCK_SIZE_MASK)!==0&&o++;var s=a>>e.BLOCK_SIZE_POWER;(a&e.BLOCK_SIZE_MASK)!==0&&s++;var l=e.calculateBlackPoints(i,o,s,n,a),c=new ut(n,a);e.calculateThresholdForBlock(i,o,s,n,a,l,c),this.matrix=c}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(r){return new e(r)},e.calculateThresholdForBlock=function(r,n,a,i,o,s,l){for(var c=o-e.BLOCK_SIZE,u=i-e.BLOCK_SIZE,f=0;f<a;f++){var h=f<<e.BLOCK_SIZE_POWER;h>c&&(h=c);for(var p=e.cap(f,2,a-3),x=0;x<n;x++){var m=x<<e.BLOCK_SIZE_POWER;m>u&&(m=u);for(var g=e.cap(x,2,n-3),y=0,b=-2;b<=2;b++){var w=s[p+b];y+=w[g-2]+w[g-1]+w[g]+w[g+1]+w[g+2]}var C=y/25;e.thresholdBlock(r,m,h,C,i,l)}}},e.cap=function(r,n,a){return r<n?n:r>a?a:r},e.thresholdBlock=function(r,n,a,i,o,s){for(var l=0,c=a*o+n;l<e.BLOCK_SIZE;l++,c+=o)for(var u=0;u<e.BLOCK_SIZE;u++)(r[c+u]&255)<=i&&s.set(n+u,a+l)},e.calculateBlackPoints=function(r,n,a,i,o){for(var s=o-e.BLOCK_SIZE,l=i-e.BLOCK_SIZE,c=new Array(a),u=0;u<a;u++){c[u]=new Int32Array(n);var f=u<<e.BLOCK_SIZE_POWER;f>s&&(f=s);for(var h=0;h<n;h++){var p=h<<e.BLOCK_SIZE_POWER;p>l&&(p=l);for(var x=0,m=255,g=0,y=0,b=f*i+p;y<e.BLOCK_SIZE;y++,b+=i){for(var w=0;w<e.BLOCK_SIZE;w++){var C=r[b+w]&255;x+=C,C<m&&(m=C),C>g&&(g=C)}if(g-m>e.MIN_DYNAMIC_RANGE)for(y++,b+=i;y<e.BLOCK_SIZE;y++,b+=i)for(var w=0;w<e.BLOCK_SIZE;w++)x+=r[b+w]&255}var A=x>>e.BLOCK_SIZE_POWER*2;if(g-m<=e.MIN_DYNAMIC_RANGE&&(A=m/2,u>0&&h>0)){var N=(c[u-1][h]+2*c[u][h-1]+c[u-1][h-1])/4;m<N&&(A=N)}c[u][h]=A}}return c},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e})(Tc),fr=(function(){function t(e,r){this.width=e,this.height=r}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(e,r,n,a){throw new Or("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new Or("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new Or("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),r=new z,n=0;n<this.height;n++){for(var a=this.getRow(n,e),i=0;i<this.width;i++){var o=a[i]&255,s=void 0;o<64?s="#":o<128?s="+":o<192?s=".":s=" ",r.append(s)}r.append(`
`)}return r.toString()},t})(),Rc=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),nn=(function(t){Rc(e,t);function e(r){var n=t.call(this,r.getWidth(),r.getHeight())||this;return n.delegate=r,n}return e.prototype.getRow=function(r,n){for(var a=this.delegate.getRow(r,n),i=this.getWidth(),o=0;o<i;o++)a[o]=255-(a[o]&255);return a},e.prototype.getMatrix=function(){for(var r=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(n),i=0;i<n;i++)a[i]=255-(r[i]&255);return a},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(r,n,a,i){return new e(this.delegate.crop(r,n,a,i))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e})(fr),Dc=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Pc=(function(t){Dc(e,t);function e(r,n){n===void 0&&(n=!1);var a=t.call(this,r.width,r.height)||this;return a.canvas=r,a.tempCanvasElement=null,a.buffer=e.makeBufferFromCanvasImageData(r,n),a}return e.makeBufferFromCanvasImageData=function(r,n){n===void 0&&(n=!1);var a=r.getContext("2d").getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(a.data,r.width,r.height,n)},e.toGrayscaleBuffer=function(r,n,a,i){i===void 0&&(i=!1);var o=new Uint8ClampedArray(n*a);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!i)for(var s=0,l=0,c=r.length;s<c;s+=4,l++){var u=void 0,f=r[s+3];if(f===0)u=255;else{var h=r[s],p=r[s+1],x=r[s+2];u=306*h+601*p+117*x+512>>10}o[l]=u}else for(var s=0,l=0,m=r.length;s<m;s+=4,l++){var u=void 0,f=r[s+3];if(f===0)u=255;else{var h=r[s],p=r[s+1],x=r[s+2];u=306*h+601*p+117*x+512>>10}o[l]=255-u}return o},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new U("Requested row is outside the image: "+r);var a=this.getWidth(),i=r*a;return n===null?n=this.buffer.slice(i,i+a):(n.length<a&&(n=new Uint8ClampedArray(a)),n.set(this.buffer.slice(i,i+a))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,i){return t.prototype.crop.call(this,r,n,a,i),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement(),a=n.getContext("2d"),i=r*e.DEGREE_TO_RADIANS,o=this.canvas.width,s=this.canvas.height,l=Math.ceil(Math.abs(Math.cos(i))*o+Math.abs(Math.sin(i))*s),c=Math.ceil(Math.abs(Math.sin(i))*o+Math.abs(Math.cos(i))*s);return n.width=l,n.height=c,a.translate(l/2,c/2),a.rotate(i),a.drawImage(this.canvas,o/-2,s/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.prototype.invert=function(){return new nn(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e})(fr),Mc=(function(){function t(e,r,n){this.deviceId=e,this.label=r,this.kind="videoinput",this.groupId=n||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t})(),Be=function(t,e,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function s(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):a(u.value).then(s,l)}c((n=n.apply(t,e||[])).next())})},Fe=function(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(i=c[0]&2?a.return:c[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,c[1])).done)return i;switch(a=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,a=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],a=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Lc=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ht=(function(){function t(e,r,n){r===void 0&&(r=500),this.reader=e,this.timeBetweenScansMillis=r,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return Be(this,void 0,void 0,function(){var e,r,n,a,i,o,s,l,c,u,f,h;return Fe(this,function(p){switch(p.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=p.sent(),r=[];try{for(n=Lc(e),a=n.next();!a.done;a=n.next())i=a.value,o=i.kind==="video"?"videoinput":i.kind,o==="videoinput"&&(s=i.deviceId||i.id,l=i.label||"Video device "+(r.length+1),c=i.groupId,u={deviceId:s,label:l,kind:o,groupId:c},r.push(u))}catch(x){f={error:x}}finally{try{a&&!a.done&&(h=n.return)&&h.call(n)}finally{if(f)throw f.error}}return[2,r]}})})},t.prototype.getVideoInputDevices=function(){return Be(this,void 0,void 0,function(){var e;return Fe(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=r.sent(),[2,e.map(function(n){return new Mc(n.deviceId,n.label)})]}})})},t.prototype.findDeviceById=function(e){return Be(this,void 0,void 0,function(){var r;return Fe(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(a){return a.deviceId===e})]:[2,null]}})})},t.prototype.decodeFromInputVideoDevice=function(e,r){return Be(this,void 0,void 0,function(){return Fe(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return Be(this,void 0,void 0,function(){var n,a;return Fe(this,function(i){switch(i.label){case 0:return this.reset(),e?n={deviceId:{exact:e}}:n={facingMode:"environment"},a={video:n},[4,this.decodeOnceFromConstraints(a,r)];case 1:return[2,i.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return Be(this,void 0,void 0,function(){var n;return Fe(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=a.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,a.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return Be(this,void 0,void 0,function(){var n,a;return Fe(this,function(i){switch(i.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return n=i.sent(),[4,this.decodeOnce(n)];case 2:return a=i.sent(),[2,a]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(e,r,n){return Be(this,void 0,void 0,function(){return Fe(this,function(a){switch(a.label){case 0:return[4,this.decodeFromVideoDevice(e,r,n)];case 1:return[2,a.sent()]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return Be(this,void 0,void 0,function(){var a,i;return Fe(this,function(o){switch(o.label){case 0:return e?a={deviceId:{exact:e}}:a={facingMode:"environment"},i={video:a},[4,this.decodeFromConstraints(i,r,n)];case 1:return[2,o.sent()]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return Be(this,void 0,void 0,function(){var a;return Fe(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return a=i.sent(),[4,this.decodeFromStream(a,r,n)];case 2:return[2,i.sent()]}})})},t.prototype.decodeFromStream=function(e,r,n){return Be(this,void 0,void 0,function(){var a;return Fe(this,function(i){switch(i.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return a=i.sent(),[4,this.decodeContinuously(a,n)];case 2:return[2,i.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(e,r){return Be(this,void 0,void 0,function(){var n;return Fe(this,function(a){switch(a.label){case 0:return n=this.prepareVideoElement(r),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return a.sent(),[2,n]}})})},t.prototype.playVideoOnLoadAsync=function(e){var r=this;return new Promise(function(n,a){return r.playVideoOnLoad(e,function(){return n()})})},t.prototype.playVideoOnLoad=function(e,r){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",r),this.tryPlayVideo(e)},t.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},t.prototype.tryPlayVideo=function(e){return Be(this,void 0,void 0,function(){return Fe(this,function(r){switch(r.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[3,4];case 3:return r.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new ye("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new ye("element with id '"+e+"' must be an "+r+" element");return n},t.prototype.decodeFromImage=function(e,r){if(!e&&!r)throw new ye("either imageElement with a src set or an url must be provided");return r&&!e?this.decodeFromImageUrl(r):this.decodeFromImageElement(e)},t.prototype.decodeFromVideo=function(e,r){if(!e&&!r)throw new ye("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(e)},t.prototype.decodeFromVideoContinuously=function(e,r,n){if(e===void 0&&r===void 0)throw new ye("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrlContinuously(r,n):this.decodeFromVideoElementContinuously(e,n)},t.prototype.decodeFromImageElement=function(e){if(!e)throw new ye("An image element must be provided.");this.reset();var r=this.prepareImageElement(e);this.imageElement=r;var n;return this.isImageLoaded(r)?n=this.decodeOnce(r,!1,!0):n=this._decodeOnLoadImage(r),n},t.prototype.decodeFromVideoElement=function(e){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(r)},t.prototype.decodeFromVideoElementContinuously=function(e,r){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,r)},t.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new ye("A video element must be provided.");this.reset();var r=this.prepareVideoElement(e);return this.videoElement=r,r},t.prototype.decodeFromImageUrl=function(e){if(!e)throw new ye("An URL must be provided.");this.reset();var r=this.prepareImageElement();this.imageElement=r;var n=this._decodeOnLoadImage(r);return r.src=e,n},t.prototype.decodeFromVideoUrl=function(e){if(!e)throw new ye("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),n=this.decodeFromVideoElement(r);return r.src=e,n},t.prototype.decodeFromVideoUrlContinuously=function(e,r){if(!e)throw new ye("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),a=this.decodeFromVideoElementContinuously(n,r);return n.src=e,a},t.prototype._decodeOnLoadImage=function(e){var r=this;return new Promise(function(n,a){r.imageLoadedListener=function(){return r.decodeOnce(e,!1,!0).then(n,a)},e.addEventListener("load",r.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(e){return Be(this,void 0,void 0,function(){return Fe(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),[4,this.decodeOnce(e)];case 2:return[2,r.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(e,r){return Be(this,void 0,void 0,function(){return Fe(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,r),[2]}})})},t.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.prototype.prepareImageElement=function(e){var r;return typeof e>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(r=e),r},t.prototype.prepareVideoElement=function(e){var r;return!e&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(r=e),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.prototype.decodeOnce=function(e,r,n){var a=this;r===void 0&&(r=!0),n===void 0&&(n=!0),this._stopAsyncDecode=!1;var i=function(o,s){if(a._stopAsyncDecode){s(new T("Video stream has ended before any code could be detected.")),a._stopAsyncDecode=void 0;return}try{var l=a.decode(e);o(l)}catch(h){var c=r&&h instanceof T,u=h instanceof _e||h instanceof P,f=u&&n;if(c||f)return setTimeout(i,a._timeBetweenDecodingAttempts,o,s);s(h)}};return new Promise(function(o,s){return i(o,s)})},t.prototype.decodeContinuously=function(e,r){var n=this;this._stopContinuousDecode=!1;var a=function(){if(n._stopContinuousDecode){n._stopContinuousDecode=void 0;return}try{var i=n.decode(e);r(i,null),setTimeout(a,n.timeBetweenScansMillis)}catch(l){r(null,l);var o=l instanceof _e||l instanceof P,s=l instanceof T;(o||s)&&setTimeout(a,n._timeBetweenDecodingAttempts)}};a()},t.prototype.decode=function(e){var r=this.createBinaryBitmap(e);return this.decodeBitmap(r)},t.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var r=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),r=!0):this.drawImageOnCanvas(e);var n=this.getCaptureCanvas(e),a=new Pc(n,r),i=new ts(a);return new es(i)},t.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var r=this.getCaptureCanvas(e),n=void 0;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var r=this.createCaptureCanvas(e);this.captureCanvas=r}return this.captureCanvas},t.prototype.drawFrameOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.drawImageOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},t.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var r=document.createElement("canvas"),n,a;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,a=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,a=e.naturalHeight||e.height)),r.style.width=n+"px",r.style.height=a+"px",r.width=n,r.height=a,r},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(e,r){try{e.srcObject=r}catch{e.src=URL.createObjectURL(r)}},t.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},t})(),Le=(function(){function t(e,r,n,a,i,o){n===void 0&&(n=r==null?0:8*r.length),o===void 0&&(o=he.currentTimeMillis()),this.text=e,this.rawBytes=r,this.numBits=n,this.resultPoints=a,this.format=i,this.timestamp=o,this.text=e,this.rawBytes=r,n==null?this.numBits=r==null?0:8*r.length:this.numBits=n,this.resultPoints=a,this.format=i,this.resultMetadata=null,o==null?this.timestamp=he.currentTimeMillis():this.timestamp=o}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(e,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,r)},t.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},t.prototype.addResultPoints=function(e){var r=this.resultPoints;if(r===null)this.resultPoints=e;else if(e!==null&&e.length>0){var n=new Array(r.length+e.length);he.arraycopy(r,0,n,0,r.length),he.arraycopy(e,0,n,r.length,e.length),this.resultPoints=n}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t})(),Gn;(function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Gn||(Gn={}));const L=Gn;var Vn;(function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Vn||(Vn={}));const Pe=Vn;var an=(function(){function t(e,r,n,a,i,o){i===void 0&&(i=-1),o===void 0&&(o=-1),this.rawBytes=e,this.text=r,this.byteSegments=n,this.ecLevel=a,this.structuredAppendSequenceNumber=i,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(e){this.numBits=e},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(e){this.erasures=e},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(e){this.other=e},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t})(),Jt=(function(){function t(){}return t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new U;return this.logTable[e]},t.addOrSubtract=function(e,r){return e^r},t})(),_t=(function(){function t(e,r){if(r.length===0)throw new U;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var a=1;a<n&&r[a]===0;)a++;a===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-a),he.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var r=this.coefficients,n;if(e===1){n=0;for(var a=0,i=r.length;a!==i;a++){var o=r[a];n=Jt.addOrSubtract(n,o)}return n}n=r[0];for(var s=r.length,l=this.field,a=1;a<s;a++)n=Jt.addOrSubtract(l.multiply(e,n),r[a]);return n},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new U("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var a=r;r=n,n=a}var i=new Int32Array(n.length),o=n.length-r.length;he.arraycopy(n,0,i,0,o);for(var s=o;s<n.length;s++)i[s]=Jt.addOrSubtract(r[s-o],n[s]);return new t(this.field,i)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new U("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var r=this.coefficients,n=r.length,a=e.coefficients,i=a.length,o=new Int32Array(n+i-1),s=this.field,l=0;l<n;l++)for(var c=r[l],u=0;u<i;u++)o[l+u]=Jt.addOrSubtract(o[l+u],s.multiply(c,a[u]));return new t(s,o)},t.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var r=this.coefficients.length,n=this.field,a=new Int32Array(r),i=this.coefficients,o=0;o<r;o++)a[o]=n.multiply(i[o],e);return new t(n,a)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new U;if(r===0)return this.field.getZero();for(var n=this.coefficients,a=n.length,i=new Int32Array(a+e),o=this.field,s=0;s<a;s++)i[s]=o.multiply(n[s],r);return new t(o,i)},t.prototype.divide=function(e){if(!this.field.equals(e.field))throw new U("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new U("Divide by 0");for(var r=this.field,n=r.getZero(),a=this,i=e.getCoefficient(e.getDegree()),o=r.inverse(i);a.getDegree()>=e.getDegree()&&!a.isZero();){var s=a.getDegree()-e.getDegree(),l=r.multiply(a.getCoefficient(a.getDegree()),o),c=e.multiplyByMonomial(s,l),u=r.buildMonomial(s,l);n=n.addOrSubtract(u),a=a.addOrSubtract(c)}return[n,a]},t.prototype.toString=function(){for(var e="",r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),r===0||n!==1){var a=this.field.log(n);a===0?e+="1":a===1?e+="a":(e+="a^",e+=a)}r!==0&&(r===1?e+="x":(e+="x^",e+=r))}}return e},t})(),Bc=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),rs=(function(t){Bc(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArithmeticException",e})(ze),Fc=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),He=(function(t){Fc(e,t);function e(r,n,a){var i=t.call(this)||this;i.primitive=r,i.size=n,i.generatorBase=a;for(var o=new Int32Array(n),s=1,l=0;l<n;l++)o[l]=s,s*=2,s>=n&&(s^=r,s&=n-1);i.expTable=o;for(var c=new Int32Array(n),l=0;l<n-1;l++)c[o[l]]=l;return i.logTable=c,i.zero=new _t(i,Int32Array.from([0])),i.one=new _t(i,Int32Array.from([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new U;if(n===0)return this.zero;var a=new Int32Array(r+1);return a[0]=n,new _t(this,a)},e.prototype.inverse=function(r){if(r===0)throw new rs;return this.expTable[this.size-this.logTable[r]-1]},e.prototype.multiply=function(r,n){return r===0||n===0?0:this.expTable[(this.logTable[r]+this.logTable[n])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+X.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(r){return r===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e})(Jt),Uc=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),mr=(function(t){Uc(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReedSolomonException",e})(ze),Gc=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),hr=(function(t){Gc(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalStateException",e})(ze),on=(function(){function t(e){this.field=e}return t.prototype.decode=function(e,r){for(var n=this.field,a=new _t(n,e),i=new Int32Array(r),o=!0,s=0;s<r;s++){var l=a.evaluateAt(n.exp(s+n.getGeneratorBase()));i[i.length-1-s]=l,l!==0&&(o=!1)}if(!o)for(var c=new _t(n,i),u=this.runEuclideanAlgorithm(n.buildMonomial(r,1),c,r),f=u[0],h=u[1],p=this.findErrorLocations(f),x=this.findErrorMagnitudes(h,p),s=0;s<p.length;s++){var m=e.length-1-n.log(p[s]);if(m<0)throw new mr("Bad error location");e[m]=He.addOrSubtract(e[m],x[s])}},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var a=e;e=r,r=a}for(var i=this.field,o=e,s=r,l=i.getZero(),c=i.getOne();s.getDegree()>=(n/2|0);){var u=o,f=l;if(o=s,l=c,o.isZero())throw new mr("r_{i-1} was zero");s=u;for(var h=i.getZero(),p=o.getCoefficient(o.getDegree()),x=i.inverse(p);s.getDegree()>=o.getDegree()&&!s.isZero();){var m=s.getDegree()-o.getDegree(),g=i.multiply(s.getCoefficient(s.getDegree()),x);h=h.addOrSubtract(i.buildMonomial(m,g)),s=s.addOrSubtract(o.multiplyByMonomial(m,g))}if(c=h.multiply(l).addOrSubtract(f),s.getDegree()>=o.getDegree())throw new hr("Division algorithm failed to reduce polynomial?")}var y=c.getCoefficient(0);if(y===0)throw new mr("sigmaTilde(0) was zero");var b=i.inverse(y),w=c.multiplyScalar(b),C=s.multiplyScalar(b);return[w,C]},t.prototype.findErrorLocations=function(e){var r=e.getDegree();if(r===1)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(r),a=0,i=this.field,o=1;o<i.getSize()&&a<r;o++)e.evaluateAt(o)===0&&(n[a]=i.inverse(o),a++);if(a!==r)throw new mr("Error locator degree does not match number of roots");return n},t.prototype.findErrorMagnitudes=function(e,r){for(var n=r.length,a=new Int32Array(n),i=this.field,o=0;o<n;o++){for(var s=i.inverse(r[o]),l=1,c=0;c<n;c++)if(o!==c){var u=i.multiply(r[c],s),f=(u&1)===0?u|1:u&-2;l=i.multiply(l,f)}a[o]=i.multiply(e.evaluateAt(s),i.inverse(l)),i.getGeneratorBase()!==0&&(a[o]=i.multiply(a[o],s))}return a},t})(),Re;(function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"})(Re||(Re={}));var Za=(function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var r=e.getBits(),n=this.extractBits(r),a=this.correctBits(n),i=t.convertBoolArrayToByteArray(a),o=t.getEncodedData(a),s=new an(i,o,null,null);return s.setNumBits(a.length),s},t.highLevelDecode=function(e){return this.getEncodedData(e)},t.getEncodedData=function(e){for(var r=e.length,n=Re.UPPER,a=Re.UPPER,i="",o=0;o<r;)if(a===Re.BINARY){if(r-o<5)break;var s=t.readCode(e,o,5);if(o+=5,s===0){if(r-o<11)break;s=t.readCode(e,o,11)+31,o+=11}for(var l=0;l<s;l++){if(r-o<8){o=r;break}var c=t.readCode(e,o,8);i+=Q.castAsNonUtf8Char(c),o+=8}a=n}else{var u=a===Re.DIGIT?4:5;if(r-o<u)break;var c=t.readCode(e,o,u);o+=u;var f=t.getCharacter(a,c);f.startsWith("CTRL_")?(n=a,a=t.getTable(f.charAt(5)),f.charAt(6)==="L"&&(n=a)):(i+=f,a=n)}return i},t.getTable=function(e){switch(e){case"L":return Re.LOWER;case"P":return Re.PUNCT;case"M":return Re.MIXED;case"D":return Re.DIGIT;case"B":return Re.BINARY;case"U":default:return Re.UPPER}},t.getCharacter=function(e,r){switch(e){case Re.UPPER:return t.UPPER_TABLE[r];case Re.LOWER:return t.LOWER_TABLE[r];case Re.MIXED:return t.MIXED_TABLE[r];case Re.PUNCT:return t.PUNCT_TABLE[r];case Re.DIGIT:return t.DIGIT_TABLE[r];default:throw new hr("Bad table")}},t.prototype.correctBits=function(e){var r,n;this.ddata.getNbLayers()<=2?(n=6,r=He.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,r=He.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,r=He.AZTEC_DATA_10):(n=12,r=He.AZTEC_DATA_12);var a=this.ddata.getNbDatablocks(),i=e.length/n;if(i<a)throw new P;for(var o=e.length%n,s=new Int32Array(i),l=0;l<i;l++,o+=n)s[l]=t.readCode(e,o,n);try{var c=new on(r);c.decode(s,i-a)}catch(g){throw new P(g)}for(var u=(1<<n)-1,f=0,l=0;l<a;l++){var h=s[l];if(h===0||h===u)throw new P;(h===1||h===u-1)&&f++}for(var p=new Array(a*n-f),x=0,l=0;l<a;l++){var h=s[l];if(h===1||h===u-1)p.fill(h>1,x,x+n-1),x+=n-1;else for(var m=n-1;m>=0;--m)p[x++]=(h&1<<m)!==0}return p},t.prototype.extractBits=function(e){var r=this.ddata.isCompact(),n=this.ddata.getNbLayers(),a=(r?11:14)+n*4,i=new Int32Array(a),o=new Array(this.totalBitsInLayer(n,r));if(r)for(var s=0;s<i.length;s++)i[s]=s;else for(var l=a+1+2*X.truncDivision(X.truncDivision(a,2)-1,15),c=a/2,u=X.truncDivision(l,2),s=0;s<c;s++){var f=s+X.truncDivision(s,15);i[c-s-1]=u-f-1,i[c+s]=u+f+1}for(var s=0,h=0;s<n;s++){for(var p=(n-s)*4+(r?9:12),x=s*2,m=a-1-x,g=0;g<p;g++)for(var y=g*2,b=0;b<2;b++)o[h+y+b]=e.get(i[x+b],i[x+g]),o[h+2*p+y+b]=e.get(i[x+g],i[m-b]),o[h+4*p+y+b]=e.get(i[m-b],i[m-g]),o[h+6*p+y+b]=e.get(i[m-g],i[x+b]);h+=p*8}return o},t.readCode=function(e,r,n){for(var a=0,i=r;i<r+n;i++)a<<=1,e[i]&&(a|=1);return a},t.readByte=function(e,r){var n=e.length-r;return n>=8?t.readCode(e,r,8):t.readCode(e,r,n)<<8-n},t.convertBoolArrayToByteArray=function(e){for(var r=new Uint8Array((e.length+7)/8),n=0;n<r.length;n++)r[n]=t.readByte(e,8*n);return r},t.prototype.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t})(),ae=(function(){function t(){}return t.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},t.distance=function(e,r,n,a){var i=e-n,o=r-a;return Math.sqrt(i*i+o*o)},t.sum=function(e){for(var r=0,n=0,a=e.length;n!==a;n++){var i=e[n];r+=i}return r},t})(),$n=(function(){function t(){}return t.floatToIntBits=function(e){return e},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t})(),B=(function(){function t(e,r){this.x=e,this.y=r}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){if(e instanceof t){var r=e;return this.x===r.x&&this.y===r.y}return!1},t.prototype.hashCode=function(){return 31*$n.floatToIntBits(this.x)+$n.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(e){var r=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),a=this.distance(e[0],e[2]),i,o,s;if(n>=r&&n>=a?(o=e[0],i=e[1],s=e[2]):a>=n&&a>=r?(o=e[1],i=e[0],s=e[2]):(o=e[2],i=e[0],s=e[1]),this.crossProductZ(i,o,s)<0){var l=i;i=s,s=l}e[0]=i,e[1]=o,e[2]=s},t.distance=function(e,r){return ae.distance(e.x,e.y,r.x,r.y)},t.crossProductZ=function(e,r,n){var a=r.x,i=r.y;return(n.x-a)*(e.y-i)-(n.y-i)*(e.x-a)},t})(),ua=(function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t})(),Vc=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),$c=(function(t){Vc(e,t);function e(r,n,a,i,o){var s=t.call(this,r,n)||this;return s.compact=a,s.nbDatablocks=i,s.nbLayers=o,s}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e})(ua),Hn=(function(){function t(e,r,n,a){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),r==null&&(r=t.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),a==null&&(a=e.getHeight()/2|0);var i=r/2|0;if(this.leftInit=n-i,this.rightInit=n+i,this.upInit=a-i,this.downInit=a+i,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new T}return t.prototype.detect=function(){for(var e=this.leftInit,r=this.rightInit,n=this.upInit,a=this.downInit,i=!1,o=!0,s=!1,l=!1,c=!1,u=!1,f=!1,h=this.width,p=this.height;o;){o=!1;for(var x=!0;(x||!l)&&r<h;)x=this.containsBlackPoint(n,a,r,!1),x?(r++,o=!0,l=!0):l||r++;if(r>=h){i=!0;break}for(var m=!0;(m||!c)&&a<p;)m=this.containsBlackPoint(e,r,a,!0),m?(a++,o=!0,c=!0):c||a++;if(a>=p){i=!0;break}for(var g=!0;(g||!u)&&e>=0;)g=this.containsBlackPoint(n,a,e,!1),g?(e--,o=!0,u=!0):u||e--;if(e<0){i=!0;break}for(var y=!0;(y||!f)&&n>=0;)y=this.containsBlackPoint(e,r,n,!0),y?(n--,o=!0,f=!0):f||n--;if(n<0){i=!0;break}o&&(s=!0)}if(!i&&s){for(var b=r-e,w=null,C=1;w===null&&C<b;C++)w=this.getBlackPointOnSegment(e,a-C,e+C,a);if(w==null)throw new T;for(var A=null,C=1;A===null&&C<b;C++)A=this.getBlackPointOnSegment(e,n+C,e+C,n);if(A==null)throw new T;for(var N=null,C=1;N===null&&C<b;C++)N=this.getBlackPointOnSegment(r,n+C,r-C,n);if(N==null)throw new T;for(var E=null,C=1;E===null&&C<b;C++)E=this.getBlackPointOnSegment(r,a-C,r-C,a);if(E==null)throw new T;return this.centerEdges(E,w,N,A)}else throw new T},t.prototype.getBlackPointOnSegment=function(e,r,n,a){for(var i=ae.round(ae.distance(e,r,n,a)),o=(n-e)/i,s=(a-r)/i,l=this.image,c=0;c<i;c++){var u=ae.round(e+c*o),f=ae.round(r+c*s);if(l.get(u,f))return new B(u,f)}return null},t.prototype.centerEdges=function(e,r,n,a){var i=e.getX(),o=e.getY(),s=r.getX(),l=r.getY(),c=n.getX(),u=n.getY(),f=a.getX(),h=a.getY(),p=t.CORR;return i<this.width/2?[new B(f-p,h+p),new B(s+p,l+p),new B(c-p,u-p),new B(i+p,o-p)]:[new B(f+p,h+p),new B(s+p,l-p),new B(c-p,u+p),new B(i-p,o-p)]},t.prototype.containsBlackPoint=function(e,r,n,a){var i=this.image;if(a){for(var o=e;o<=r;o++)if(i.get(o,n))return!0}else for(var s=e;s<=r;s++)if(i.get(n,s))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t})(),Ka=(function(){function t(){}return t.checkAndNudgePoints=function(e,r){for(var n=e.getWidth(),a=e.getHeight(),i=!0,o=0;o<r.length&&i;o+=2){var s=Math.floor(r[o]),l=Math.floor(r[o+1]);if(s<-1||s>n||l<-1||l>a)throw new T;i=!1,s===-1?(r[o]=0,i=!0):s===n&&(r[o]=n-1,i=!0),l===-1?(r[o+1]=0,i=!0):l===a&&(r[o+1]=a-1,i=!0)}i=!0;for(var o=r.length-2;o>=0&&i;o-=2){var s=Math.floor(r[o]),l=Math.floor(r[o+1]);if(s<-1||s>n||l<-1||l>a)throw new T;i=!1,s===-1?(r[o]=0,i=!0):s===n&&(r[o]=n-1,i=!0),l===-1?(r[o+1]=0,i=!0):l===a&&(r[o+1]=a-1,i=!0)}},t})(),ns=(function(){function t(e,r,n,a,i,o,s,l,c){this.a11=e,this.a21=r,this.a31=n,this.a12=a,this.a22=i,this.a32=o,this.a13=s,this.a23=l,this.a33=c}return t.quadrilateralToQuadrilateral=function(e,r,n,a,i,o,s,l,c,u,f,h,p,x,m,g){var y=t.quadrilateralToSquare(e,r,n,a,i,o,s,l),b=t.squareToQuadrilateral(c,u,f,h,p,x,m,g);return b.times(y)},t.prototype.transformPoints=function(e){for(var r=e.length,n=this.a11,a=this.a12,i=this.a13,o=this.a21,s=this.a22,l=this.a23,c=this.a31,u=this.a32,f=this.a33,h=0;h<r;h+=2){var p=e[h],x=e[h+1],m=i*p+l*x+f;e[h]=(n*p+o*x+c)/m,e[h+1]=(a*p+s*x+u)/m}},t.prototype.transformPointsWithValues=function(e,r){for(var n=this.a11,a=this.a12,i=this.a13,o=this.a21,s=this.a22,l=this.a23,c=this.a31,u=this.a32,f=this.a33,h=e.length,p=0;p<h;p++){var x=e[p],m=r[p],g=i*x+l*m+f;e[p]=(n*x+o*m+c)/g,r[p]=(a*x+s*m+u)/g}},t.squareToQuadrilateral=function(e,r,n,a,i,o,s,l){var c=e-n+i-s,u=r-a+o-l;if(c===0&&u===0)return new t(n-e,i-n,e,a-r,o-a,r,0,0,1);var f=n-i,h=s-i,p=a-o,x=l-o,m=f*x-h*p,g=(c*x-h*u)/m,y=(f*u-c*p)/m;return new t(n-e+g*n,s-e+y*s,e,a-r+g*a,l-r+y*l,r,g,y,1)},t.quadrilateralToSquare=function(e,r,n,a,i,o,s,l){return t.squareToQuadrilateral(e,r,n,a,i,o,s,l).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t})(),Hc=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),zc=(function(t){Hc(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.sampleGrid=function(r,n,a,i,o,s,l,c,u,f,h,p,x,m,g,y,b,w,C){var A=ns.quadrilateralToQuadrilateral(i,o,s,l,c,u,f,h,p,x,m,g,y,b,w,C);return this.sampleGridWithTransform(r,n,a,A)},e.prototype.sampleGridWithTransform=function(r,n,a,i){if(n<=0||a<=0)throw new T;for(var o=new ut(n,a),s=new Float32Array(2*n),l=0;l<a;l++){for(var c=s.length,u=l+.5,f=0;f<c;f+=2)s[f]=f/2+.5,s[f+1]=u;i.transformPoints(s),Ka.checkAndNudgePoints(r,s);try{for(var f=0;f<c;f+=2)r.get(Math.floor(s[f]),Math.floor(s[f+1]))&&o.set(f/2,l)}catch{throw new T}}return o},e})(Ka),fa=(function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new zc,t})(),Ve=(function(){function t(e,r){this.x=e,this.y=r}return t.prototype.toResultPoint=function(){return new B(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t})(),Wc=(function(){function t(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(e){var r=this.getMatrixCenter(),n=this.getBullsEyeCorners(r);if(e){var a=n[0];n[0]=n[2],n[2]=a}this.extractParameters(n);var i=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),o=this.getMatrixCornerPoints(n);return new $c(i,o,this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new T;var r=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],r),this.sampleLine(e[1],e[2],r),this.sampleLine(e[2],e[3],r),this.sampleLine(e[3],e[0],r)]);this.shift=this.getRotation(n,r);for(var a=0,i=0;i<4;i++){var o=n[(this.shift+i)%4];this.compact?(a<<=7,a+=o>>1&127):(a<<=10,a+=(o>>2&992)+(o>>1&31))}var s=this.getCorrectedParameterData(a,this.compact);this.compact?(this.nbLayers=(s>>6)+1,this.nbDataBlocks=(s&63)+1):(this.nbLayers=(s>>11)+1,this.nbDataBlocks=(s&2047)+1)},t.prototype.getRotation=function(e,r){var n=0;e.forEach(function(i,o,s){var l=(i>>r-2<<1)+(i&1);n=(n<<3)+l}),n=((n&1)<<11)+(n>>1);for(var a=0;a<4;a++)if(X.bitCount(n^this.EXPECTED_CORNER_BITS[a])<=2)return a;throw new T},t.prototype.getCorrectedParameterData=function(e,r){var n,a;r?(n=7,a=2):(n=10,a=4);for(var i=n-a,o=new Int32Array(n),s=n-1;s>=0;--s)o[s]=e&15,e>>=4;try{var l=new on(He.AZTEC_PARAM);l.decode(o,i)}catch{throw new T}for(var c=0,s=0;s<a;s++)c=(c<<4)+o[s];return c},t.prototype.getBullsEyeCorners=function(e){var r=e,n=e,a=e,i=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var s=this.getFirstDifferent(r,o,1,-1),l=this.getFirstDifferent(n,o,1,1),c=this.getFirstDifferent(a,o,-1,1),u=this.getFirstDifferent(i,o,-1,-1);if(this.nbCenterLayers>2){var f=this.distancePoint(u,s)*this.nbCenterLayers/(this.distancePoint(i,r)*(this.nbCenterLayers+2));if(f<.75||f>1.25||!this.isWhiteOrBlackRectangle(s,l,c,u))break}r=s,n=l,a=c,i=u,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new T;this.compact=this.nbCenterLayers===5;var h=new B(r.getX()+.5,r.getY()-.5),p=new B(n.getX()+.5,n.getY()+.5),x=new B(a.getX()-.5,a.getY()+.5),m=new B(i.getX()-.5,i.getY()-.5);return this.expandSquare([h,p,x,m],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){var e,r,n,a;try{var i=new Hn(this.image).detect();e=i[0],r=i[1],n=i[2],a=i[3]}catch{var o=this.image.getWidth()/2,s=this.image.getHeight()/2;e=this.getFirstDifferent(new Ve(o+7,s-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Ve(o+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Ve(o-7,s+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new Ve(o-7,s-7),!1,-1,-1).toResultPoint()}var l=ae.round((e.getX()+a.getX()+r.getX()+n.getX())/4),c=ae.round((e.getY()+a.getY()+r.getY()+n.getY())/4);try{var i=new Hn(this.image,15,l,c).detect();e=i[0],r=i[1],n=i[2],a=i[3]}catch{e=this.getFirstDifferent(new Ve(l+7,c-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Ve(l+7,c+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Ve(l-7,c+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new Ve(l-7,c-7),!1,-1,-1).toResultPoint()}return l=ae.round((e.getX()+a.getX()+r.getX()+n.getX())/4),c=ae.round((e.getY()+a.getY()+r.getY()+n.getY())/4),new Ve(l,c)},t.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(e,r,n,a,i){var o=fa.getInstance(),s=this.getDimension(),l=s/2-this.nbCenterLayers,c=s/2+this.nbCenterLayers;return o.sampleGrid(e,s,s,l,l,c,l,c,c,l,c,r.getX(),r.getY(),n.getX(),n.getY(),a.getX(),a.getY(),i.getX(),i.getY())},t.prototype.sampleLine=function(e,r,n){for(var a=0,i=this.distanceResultPoint(e,r),o=i/n,s=e.getX(),l=e.getY(),c=o*(r.getX()-e.getX())/i,u=o*(r.getY()-e.getY())/i,f=0;f<n;f++)this.image.get(ae.round(s+f*c),ae.round(l+f*u))&&(a|=1<<n-f-1);return a},t.prototype.isWhiteOrBlackRectangle=function(e,r,n,a){var i=3;e=new Ve(e.getX()-i,e.getY()+i),r=new Ve(r.getX()-i,r.getY()-i),n=new Ve(n.getX()+i,n.getY()-i),a=new Ve(a.getX()+i,a.getY()+i);var o=this.getColor(a,e);if(o===0)return!1;var s=this.getColor(e,r);return s!==o||(s=this.getColor(r,n),s!==o)?!1:(s=this.getColor(n,a),s===o)},t.prototype.getColor=function(e,r){for(var n=this.distancePoint(e,r),a=(r.getX()-e.getX())/n,i=(r.getY()-e.getY())/n,o=0,s=e.getX(),l=e.getY(),c=this.image.get(e.getX(),e.getY()),u=Math.ceil(n),f=0;f<u;f++)s+=a,l+=i,this.image.get(ae.round(s),ae.round(l))!==c&&o++;var h=o/n;return h>.1&&h<.9?0:h<=.1===c?1:-1},t.prototype.getFirstDifferent=function(e,r,n,a){for(var i=e.getX()+n,o=e.getY()+a;this.isValid(i,o)&&this.image.get(i,o)===r;)i+=n,o+=a;for(i-=n,o-=a;this.isValid(i,o)&&this.image.get(i,o)===r;)i+=n;for(i-=n;this.isValid(i,o)&&this.image.get(i,o)===r;)o+=a;return o-=a,new Ve(i,o)},t.prototype.expandSquare=function(e,r,n){var a=n/(2*r),i=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),s=(e[0].getX()+e[2].getX())/2,l=(e[0].getY()+e[2].getY())/2,c=new B(s+a*i,l+a*o),u=new B(s-a*i,l-a*o);i=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),s=(e[1].getX()+e[3].getX())/2,l=(e[1].getY()+e[3].getY())/2;var f=new B(s+a*i,l+a*o),h=new B(s-a*i,l-a*o),p=[c,f,u,h];return p},t.prototype.isValid=function(e,r){return e>=0&&e<this.image.getWidth()&&r>0&&r<this.image.getHeight()},t.prototype.isValidPoint=function(e){var r=ae.round(e.getX()),n=ae.round(e.getY());return this.isValid(r,n)},t.prototype.distancePoint=function(e,r){return ae.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.distanceResultPoint=function(e,r){return ae.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(X.truncDivision(this.nbLayers-4,8)+1)+15},t})(),Br=(function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=null,a=new Wc(e.getBlackMatrix()),i=null,o=null;try{var s=a.detectMirror(!1);i=s.getPoints(),this.reportFoundResultPoints(r,i),o=new Za().decode(s)}catch(f){n=f}if(o==null)try{var s=a.detectMirror(!0);i=s.getPoints(),this.reportFoundResultPoints(r,i),o=new Za().decode(s)}catch(f){throw n??f}var l=new Le(o.getText(),o.getRawBytes(),o.getNumBits(),i,L.AZTEC,he.currentTimeMillis()),c=o.getByteSegments();c!=null&&l.putMetadata(Pe.BYTE_SEGMENTS,c);var u=o.getECLevel();return u!=null&&l.putMetadata(Pe.ERROR_CORRECTION_LEVEL,u),l},t.prototype.reportFoundResultPoints=function(e,r){if(e!=null){var n=e.get(fe.NEED_RESULT_POINT_CALLBACK);n!=null&&r.forEach(function(a,i,o){n.foundPossibleResultPoint(a)})}},t.prototype.reset=function(){},t})(),Xc=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(t){Xc(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new Br,r)||this}return e})(Ht);var Ie=(function(){function t(){}return t.prototype.decode=function(e,r){try{return this.doDecode(e,r)}catch{var n=r&&r.get(fe.TRY_HARDER)===!0;if(n&&e.isRotateSupported()){var a=e.rotateCounterClockwise(),i=this.doDecode(a,r),o=i.getResultMetadata(),s=270;o!==null&&o.get(Pe.ORIENTATION)===!0&&(s=s+o.get(Pe.ORIENTATION)%360),i.putMetadata(Pe.ORIENTATION,s);var l=i.getResultPoints();if(l!==null)for(var c=a.getHeight(),u=0;u<l.length;u++)l[u]=new B(c-l[u].getY()-1,l[u].getX());return i}else throw new T}},t.prototype.reset=function(){},t.prototype.doDecode=function(e,r){var n=e.getWidth(),a=e.getHeight(),i=new je(n),o=r&&r.get(fe.TRY_HARDER)===!0,s=Math.max(1,a>>(o?8:5)),l;o?l=a:l=15;for(var c=Math.trunc(a/2),u=0;u<l;u++){var f=Math.trunc((u+1)/2),h=(u&1)===0,p=c+s*(h?f:-f);if(p<0||p>=a)break;try{i=e.getBlackRow(p,i)}catch{continue}for(var x=function(b){if(b===1&&(i.reverse(),r&&r.get(fe.NEED_RESULT_POINT_CALLBACK)===!0)){var w=new Map;r.forEach(function(N,E){return w.set(E,N)}),w.delete(fe.NEED_RESULT_POINT_CALLBACK),r=w}try{var C=m.decodeRow(p,i,r);if(b===1){C.putMetadata(Pe.ORIENTATION,180);var A=C.getResultPoints();A!==null&&(A[0]=new B(n-A[0].getX()-1,A[0].getY()),A[1]=new B(n-A[1].getX()-1,A[1].getY()))}return{value:C}}catch{}},m=this,g=0;g<2;g++){var y=x(g);if(typeof y=="object")return y.value}}throw new T},t.recordPattern=function(e,r,n){for(var a=n.length,i=0;i<a;i++)n[i]=0;var o=e.getSize();if(r>=o)throw new T;for(var s=!e.get(r),l=0,c=r;c<o;){if(e.get(c)!==s)n[l]++;else{if(++l===a)break;n[l]=1,s=!s}c++}if(!(l===a||l===a-1&&c===o))throw new T},t.recordPatternInReverse=function(e,r,n){for(var a=n.length,i=e.get(r);r>0&&a>=0;)e.get(--r)!==i&&(a--,i=!i);if(a>=0)throw new T;t.recordPattern(e,r+1,n)},t.patternMatchVariance=function(e,r,n){for(var a=e.length,i=0,o=0,s=0;s<a;s++)i+=e[s],o+=r[s];if(i<o)return Number.POSITIVE_INFINITY;var l=i/o;n*=l;for(var c=0,u=0;u<a;u++){var f=e[u],h=r[u]*l,p=f>h?f-h:h-f;if(p>n)return Number.POSITIVE_INFINITY;c+=p}return c/i},t})(),Yc=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Ja=(function(t){Yc(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.findStartPattern=function(r){for(var n=r.getSize(),a=r.getNextSet(0),i=0,o=Int32Array.from([0,0,0,0,0,0]),s=a,l=!1,c=6,u=a;u<n;u++)if(r.get(u)!==l)o[i]++;else{if(i===c-1){for(var f=e.MAX_AVG_VARIANCE,h=-1,p=e.CODE_START_A;p<=e.CODE_START_C;p++){var x=Ie.patternMatchVariance(o,e.CODE_PATTERNS[p],e.MAX_INDIVIDUAL_VARIANCE);x<f&&(f=x,h=p)}if(h>=0&&r.isRange(Math.max(0,s-(u-s)/2),s,!1))return Int32Array.from([s,u,h]);s+=o[0]+o[1],o=o.slice(2,o.length),o[i-1]=0,o[i]=0,i--}else i++;o[i]=1,l=!l}throw new T},e.decodeCode=function(r,n,a){Ie.recordPattern(r,a,n);for(var i=e.MAX_AVG_VARIANCE,o=-1,s=0;s<e.CODE_PATTERNS.length;s++){var l=e.CODE_PATTERNS[s],c=this.patternMatchVariance(n,l,e.MAX_INDIVIDUAL_VARIANCE);c<i&&(i=c,o=s)}if(o>=0)return o;throw new T},e.prototype.decodeRow=function(r,n,a){var i=a&&a.get(fe.ASSUME_GS1)===!0,o=e.findStartPattern(n),s=o[2],l=0,c=new Uint8Array(20);c[l++]=s;var u;switch(s){case e.CODE_START_A:u=e.CODE_CODE_A;break;case e.CODE_START_B:u=e.CODE_CODE_B;break;case e.CODE_START_C:u=e.CODE_CODE_C;break;default:throw new P}for(var f=!1,h=!1,p="",x=o[0],m=o[1],g=Int32Array.from([0,0,0,0,0,0]),y=0,b=0,w=s,C=0,A=!0,N=!1,E=!1;!f;){var S=h;switch(h=!1,y=b,b=e.decodeCode(n,g,m),c[l++]=b,b!==e.CODE_STOP&&(A=!0),b!==e.CODE_STOP&&(C++,w+=C*b),x=m,m+=g.reduce(function(Z,ne){return Z+ne},0),b){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new P}switch(u){case e.CODE_CODE_A:if(b<64)E===N?p+=String.fromCharCode(32+b):p+=String.fromCharCode(32+b+128),E=!1;else if(b<96)E===N?p+=String.fromCharCode(b-64):p+=String.fromCharCode(b+64),E=!1;else switch(b!==e.CODE_STOP&&(A=!1),b){case e.CODE_FNC_1:i&&(p.length===0?p+="]C1":p+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!N&&E?(N=!0,E=!1):N&&E?(N=!1,E=!1):E=!0;break;case e.CODE_SHIFT:h=!0,u=e.CODE_CODE_B;break;case e.CODE_CODE_B:u=e.CODE_CODE_B;break;case e.CODE_CODE_C:u=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_B:if(b<96)E===N?p+=String.fromCharCode(32+b):p+=String.fromCharCode(32+b+128),E=!1;else switch(b!==e.CODE_STOP&&(A=!1),b){case e.CODE_FNC_1:i&&(p.length===0?p+="]C1":p+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!N&&E?(N=!0,E=!1):N&&E?(N=!1,E=!1):E=!0;break;case e.CODE_SHIFT:h=!0,u=e.CODE_CODE_A;break;case e.CODE_CODE_A:u=e.CODE_CODE_A;break;case e.CODE_CODE_C:u=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_C:if(b<100)b<10&&(p+="0"),p+=b;else switch(b!==e.CODE_STOP&&(A=!1),b){case e.CODE_FNC_1:i&&(p.length===0?p+="]C1":p+="");break;case e.CODE_CODE_A:u=e.CODE_CODE_A;break;case e.CODE_CODE_B:u=e.CODE_CODE_B;break;case e.CODE_STOP:f=!0;break}break}S&&(u=u===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var I=m-x;if(m=n.getNextUnset(m),!n.isRange(m,Math.min(n.getSize(),m+(m-x)/2),!1))throw new T;if(w-=C*y,w%103!==y)throw new _e;var O=p.length;if(O===0)throw new T;O>0&&A&&(u===e.CODE_CODE_C?p=p.substring(0,O-2):p=p.substring(0,O-1));for(var j=(o[1]+o[0])/2,M=x+I/2,G=c.length,F=new Uint8Array(G),V=0;V<G;V++)F[V]=c[V];var Y=[new B(j,r),new B(M,r)];return new Le(p,F,0,Y,L.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e})(Ie),qc=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),xn=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Qa=(function(t){qc(e,t);function e(r,n){r===void 0&&(r=!1),n===void 0&&(n=!1);var a=t.call(this)||this;return a.usingCheckDigit=r,a.extendedMode=n,a.decodeRowResult="",a.counters=new Int32Array(9),a}return e.prototype.decodeRow=function(r,n,a){var i,o,s,l,c=this.counters;c.fill(0),this.decodeRowResult="";var u=e.findAsteriskPattern(n,c),f=n.getNextSet(u[1]),h=n.getSize(),p,x;do{e.recordPattern(n,f,c);var m=e.toNarrowWidePattern(c);if(m<0)throw new T;p=e.patternToChar(m),this.decodeRowResult+=p,x=f;try{for(var g=(i=void 0,xn(c)),y=g.next();!y.done;y=g.next()){var b=y.value;f+=b}}catch(G){i={error:G}}finally{try{y&&!y.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}f=n.getNextSet(f)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var w=0;try{for(var C=xn(c),A=C.next();!A.done;A=C.next()){var b=A.value;w+=b}}catch(G){s={error:G}}finally{try{A&&!A.done&&(l=C.return)&&l.call(C)}finally{if(s)throw s.error}}var N=f-x-w;if(f!==h&&N*2<w)throw new T;if(this.usingCheckDigit){for(var E=this.decodeRowResult.length-1,S=0,I=0;I<E;I++)S+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(I));if(this.decodeRowResult.charAt(E)!==e.ALPHABET_STRING.charAt(S%43))throw new _e;this.decodeRowResult=this.decodeRowResult.substring(0,E)}if(this.decodeRowResult.length===0)throw new T;var O;this.extendedMode?O=e.decodeExtended(this.decodeRowResult):O=this.decodeRowResult;var j=(u[1]+u[0])/2,M=x+w/2;return new Le(O,null,0,[new B(j,r),new B(M,r)],L.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(r,n){for(var a=r.getSize(),i=r.getNextSet(0),o=0,s=i,l=!1,c=n.length,u=i;u<a;u++)if(r.get(u)!==l)n[o]++;else{if(o===c-1){if(this.toNarrowWidePattern(n)===e.ASTERISK_ENCODING&&r.isRange(Math.max(0,s-Math.floor((u-s)/2)),s,!1))return[s,u];s+=n[0]+n[1],n.copyWithin(0,2,2+o-1),n[o-1]=0,n[o]=0,o--}else o++;n[o]=1,l=!l}throw new T},e.toNarrowWidePattern=function(r){var n,a,i=r.length,o=0,s;do{var l=2147483647;try{for(var c=(n=void 0,xn(r)),u=c.next();!u.done;u=c.next()){var f=u.value;f<l&&f>o&&(l=f)}}catch(m){n={error:m}}finally{try{u&&!u.done&&(a=c.return)&&a.call(c)}finally{if(n)throw n.error}}o=l,s=0;for(var h=0,p=0,x=0;x<i;x++){var f=r[x];f>o&&(p|=1<<i-1-x,s++,h+=f)}if(s===3){for(var x=0;x<i&&s>0;x++){var f=r[x];if(f>o&&(s--,f*2>=h))return-1}return p}}while(s>3);return-1},e.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);if(r===e.ASTERISK_ENCODING)return"*";throw new T},e.decodeExtended=function(r){for(var n=r.length,a="",i=0;i<n;i++){var o=r.charAt(i);if(o==="+"||o==="$"||o==="%"||o==="/"){var s=r.charAt(i+1),l="\0";switch(o){case"+":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)+32);else throw new P;break;case"$":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)-64);else throw new P;break;case"%":if(s>="A"&&s<="E")l=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")l=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")l=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")l="\0";else if(s==="V")l="@";else if(s==="W")l="`";else if(s==="X"||s==="Y"||s==="Z")l="";else throw new P;break;case"/":if(s>="A"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")l=":";else throw new P;break}a+=l,i++}else a+=o}return a},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e})(Ie),Zc=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),mn=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ei=(function(t){Zc(e,t);function e(){var r=t.call(this)||this;return r.decodeRowResult="",r.counters=new Int32Array(6),r}return e.prototype.decodeRow=function(r,n,a){var i,o,s,l,c=this.findAsteriskPattern(n),u=n.getNextSet(c[1]),f=n.getSize(),h=this.counters;h.fill(0),this.decodeRowResult="";var p,x;do{e.recordPattern(n,u,h);var m=this.toPattern(h);if(m<0)throw new T;p=this.patternToChar(m),this.decodeRowResult+=p,x=u;try{for(var g=(i=void 0,mn(h)),y=g.next();!y.done;y=g.next()){var b=y.value;u+=b}}catch(I){i={error:I}}finally{try{y&&!y.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}u=n.getNextSet(u)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var w=0;try{for(var C=mn(h),A=C.next();!A.done;A=C.next()){var b=A.value;w+=b}}catch(I){s={error:I}}finally{try{A&&!A.done&&(l=C.return)&&l.call(C)}finally{if(s)throw s.error}}if(u===f||!n.get(u))throw new T;if(this.decodeRowResult.length<2)throw new T;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var N=this.decodeExtended(this.decodeRowResult),E=(c[1]+c[0])/2,S=x+w/2;return new Le(N,null,0,[new B(E,r),new B(S,r)],L.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(r){var n=r.getSize(),a=r.getNextSet(0);this.counters.fill(0);for(var i=this.counters,o=a,s=!1,l=i.length,c=0,u=a;u<n;u++)if(r.get(u)!==s)i[c]++;else{if(c===l-1){if(this.toPattern(i)===e.ASTERISK_ENCODING)return new Int32Array([o,u]);o+=i[0]+i[1],i.copyWithin(0,2,2+c-1),i[c-1]=0,i[c]=0,c--}else c++;i[c]=1,s=!s}throw new T},e.prototype.toPattern=function(r){var n,a,i=0;try{for(var o=mn(r),s=o.next();!s.done;s=o.next()){var l=s.value;i+=l}}catch(x){n={error:x}}finally{try{s&&!s.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}for(var c=0,u=r.length,f=0;f<u;f++){var h=Math.round(r[f]*9/i);if(h<1||h>4)return-1;if((f&1)===0)for(var p=0;p<h;p++)c=c<<1|1;else c<<=h}return c},e.prototype.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);throw new T},e.prototype.decodeExtended=function(r){for(var n=r.length,a="",i=0;i<n;i++){var o=r.charAt(i);if(o>="a"&&o<="d"){if(i>=n-1)throw new P;var s=r.charAt(i+1),l="\0";switch(o){case"d":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)+32);else throw new P;break;case"a":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)-64);else throw new P;break;case"b":if(s>="A"&&s<="E")l=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")l=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")l=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")l="\0";else if(s==="V")l="@";else if(s==="W")l="`";else if(s>="X"&&s<="Z")l="";else throw new P;break;case"c":if(s>="A"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")l=":";else throw new P;break}a+=l,i++}else a+=o}return a},e.prototype.checkChecksums=function(r){var n=r.length;this.checkOneChecksum(r,n-2,20),this.checkOneChecksum(r,n-1,15)},e.prototype.checkOneChecksum=function(r,n,a){for(var i=1,o=0,s=n-1;s>=0;s--)o+=i*e.ALPHABET_STRING.indexOf(r.charAt(s)),++i>a&&(i=1);if(r.charAt(n)!==e.ALPHABET_STRING[o%47])throw new _e},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e})(Ie),Kc=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Jc=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ti=(function(t){Kc(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.narrowLineWidth=-1,r}return e.prototype.decodeRow=function(r,n,a){var i,o,s=this.decodeStart(n),l=this.decodeEnd(n),c=new z;e.decodeMiddle(n,s[1],l[0],c);var u=c.toString(),f=null;a!=null&&(f=a.get(fe.ALLOWED_LENGTHS)),f==null&&(f=e.DEFAULT_ALLOWED_LENGTHS);var h=u.length,p=!1,x=0;try{for(var m=Jc(f),g=m.next();!g.done;g=m.next()){var y=g.value;if(h===y){p=!0;break}y>x&&(x=y)}}catch(C){i={error:C}}finally{try{g&&!g.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}if(!p&&h>x&&(p=!0),!p)throw new P;var b=[new B(s[1],r),new B(l[0],r)],w=new Le(u,null,0,b,L.ITF,new Date().getTime());return w},e.decodeMiddle=function(r,n,a,i){var o=new Int32Array(10),s=new Int32Array(5),l=new Int32Array(5);for(o.fill(0),s.fill(0),l.fill(0);n<a;){Ie.recordPattern(r,n,o);for(var c=0;c<5;c++){var u=2*c;s[c]=o[u],l[c]=o[u+1]}var f=e.decodeDigit(s);i.append(f.toString()),f=this.decodeDigit(l),i.append(f.toString()),o.forEach(function(h){n+=h})}},e.prototype.decodeStart=function(r){var n=e.skipWhiteSpace(r),a=e.findGuardPattern(r,n,e.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(r,a[0]),a},e.prototype.validateQuietZone=function(r,n){var a=this.narrowLineWidth*10;a=a<n?a:n;for(var i=n-1;a>0&&i>=0&&!r.get(i);i--)a--;if(a!==0)throw new T},e.skipWhiteSpace=function(r){var n=r.getSize(),a=r.getNextSet(0);if(a===n)throw new T;return a},e.prototype.decodeEnd=function(r){r.reverse();try{var n=e.skipWhiteSpace(r),a=void 0;try{a=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[0])}catch(o){o instanceof T&&(a=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,a[0]);var i=a[0];return a[0]=r.getSize()-a[1],a[1]=r.getSize()-i,a}finally{r.reverse()}},e.findGuardPattern=function(r,n,a){var i=a.length,o=new Int32Array(i),s=r.getSize(),l=!1,c=0,u=n;o.fill(0);for(var f=n;f<s;f++)if(r.get(f)!==l)o[c]++;else{if(c===i-1){if(Ie.patternMatchVariance(o,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[u,f];u+=o[0]+o[1],he.arraycopy(o,2,o,0,c-1),o[c-1]=0,o[c]=0,c--}else c++;o[c]=1,l=!l}throw new T},e.decodeDigit=function(r){for(var n=e.MAX_AVG_VARIANCE,a=-1,i=e.PATTERNS.length,o=0;o<i;o++){var s=e.PATTERNS[o],l=Ie.patternMatchVariance(r,s,e.MAX_INDIVIDUAL_VARIANCE);l<n?(n=l,a=o):l===n&&(a=-1)}if(a>=0)return a%10;throw new T},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e})(Ie),Qc=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Ut=(function(t){Qc(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.decodeRowStringBuffer="",r}return e.findStartGuardPattern=function(r){for(var n=!1,a,i=0,o=Int32Array.from([0,0,0]);!n;){o=Int32Array.from([0,0,0]),a=e.findGuardPattern(r,i,!1,this.START_END_PATTERN,o);var s=a[0];i=a[1];var l=s-(i-s);l>=0&&(n=r.isRange(l,s,!1))}return a},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var a=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===a},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,a=0,i=n-1;i>=0;i-=2){var o=r.charAt(i).charCodeAt(0)-48;if(o<0||o>9)throw new P;a+=o}a*=3;for(var i=n-2;i>=0;i-=2){var o=r.charAt(i).charCodeAt(0)-48;if(o<0||o>9)throw new P;a+=o}return(1e3-a)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(r,n,a,i){return this.findGuardPattern(r,n,a,i,new Int32Array(i.length))},e.findGuardPattern=function(r,n,a,i,o){var s=r.getSize();n=a?r.getNextUnset(n):r.getNextSet(n);for(var l=0,c=n,u=i.length,f=a,h=n;h<s;h++)if(r.get(h)!==f)o[l]++;else{if(l===u-1){if(Ie.patternMatchVariance(o,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([c,h]);c+=o[0]+o[1];for(var p=o.slice(2,o.length),x=0;x<l-1;x++)o[x]=p[x];o[l-1]=0,o[l]=0,l--}else l++;o[l]=1,f=!f}throw new T},e.decodeDigit=function(r,n,a,i){this.recordPattern(r,a,n);for(var o=this.MAX_AVG_VARIANCE,s=-1,l=i.length,c=0;c<l;c++){var u=i[c],f=Ie.patternMatchVariance(n,u,e.MAX_INDIVIDUAL_VARIANCE);f<o&&(o=f,s=c)}if(s>=0)return s;throw new T},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e})(Ie),e0=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},t0=(function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var a=this.decodeRowStringBuffer,i=this.decodeMiddle(r,n,a),o=a.toString(),s=t.parseExtensionString(o),l=[new B((n[0]+n[1])/2,e),new B(i,e)],c=new Le(o,null,0,l,L.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&c.putAllMetadata(s),c},t.prototype.decodeMiddle=function(e,r,n){var a,i,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var s=e.getSize(),l=r[1],c=0,u=0;u<5&&l<s;u++){var f=Ut.decodeDigit(e,o,l,Ut.L_AND_G_PATTERNS);n+=String.fromCharCode(48+f%10);try{for(var h=(a=void 0,e0(o)),p=h.next();!p.done;p=h.next()){var x=p.value;l+=x}}catch(g){a={error:g}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(a)throw a.error}}f>=10&&(c|=1<<4-u),u!==4&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(n.length!==5)throw new T;var m=this.determineCheckDigit(c);if(t.extensionChecksum(n.toString())!==m)throw new T;return l},t.extensionChecksum=function(e){for(var r=e.length,n=0,a=r-2;a>=0;a-=2)n+=e.charAt(a).charCodeAt(0)-48;n*=3;for(var a=r-1;a>=0;a-=2)n+=e.charAt(a).charCodeAt(0)-48;return n*=3,n%10},t.prototype.determineCheckDigit=function(e){for(var r=0;r<10;r++)if(e===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new T},t.parseExtensionString=function(e){if(e.length!==5)return null;var r=t.parseExtension5String(e);return r==null?null:new Map([[Pe.SUGGESTED_PRICE,r]])},t.parseExtension5String=function(e){var r;switch(e.charAt(0)){case"0":r="£";break;case"5":r="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}var n=parseInt(e.substring(1)),a=(n/100).toString(),i=n%100,o=i<10?"0"+i:i.toString();return r+a+"."+o},t})(),r0=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},n0=(function(){function t(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var a=this.decodeRowStringBuffer,i=this.decodeMiddle(r,n,a),o=a.toString(),s=t.parseExtensionString(o),l=[new B((n[0]+n[1])/2,e),new B(i,e)],c=new Le(o,null,0,l,L.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&c.putAllMetadata(s),c},t.prototype.decodeMiddle=function(e,r,n){var a,i,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var s=e.getSize(),l=r[1],c=0,u=0;u<2&&l<s;u++){var f=Ut.decodeDigit(e,o,l,Ut.L_AND_G_PATTERNS);n+=String.fromCharCode(48+f%10);try{for(var h=(a=void 0,r0(o)),p=h.next();!p.done;p=h.next()){var x=p.value;l+=x}}catch(m){a={error:m}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(a)throw a.error}}f>=10&&(c|=1<<1-u),u!==1&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(n.length!==2)throw new T;if(parseInt(n.toString())%4!==c)throw new T;return l},t.parseExtensionString=function(e){return e.length!==2?null:new Map([[Pe.ISSUE_NUMBER,parseInt(e)]])},t})(),a0=(function(){function t(){}return t.decodeRow=function(e,r,n){var a=Ut.findGuardPattern(r,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var i=new t0;return i.decodeRow(e,r,a)}catch{var o=new n0;return o.decodeRow(e,r,a)}},t.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),t})(),i0=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Ne=(function(t){i0(e,t);function e(){var r=t.call(this)||this;r.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(s){return Int32Array.from(s)});for(var n=10;n<20;n++){for(var a=e.L_PATTERNS[n-10],i=new Int32Array(a.length),o=0;o<a.length;o++)i[o]=a[a.length-o-1];e.L_AND_G_PATTERNS[n]=i}return r}return e.prototype.decodeRow=function(r,n,a){var i=e.findStartGuardPattern(n),o=a==null?null:a.get(fe.NEED_RESULT_POINT_CALLBACK);if(o!=null){var s=new B((i[0]+i[1])/2,r);o.foundPossibleResultPoint(s)}var l=this.decodeMiddle(n,i,this.decodeRowStringBuffer),c=l.rowOffset,u=l.resultString;if(o!=null){var f=new B(c,r);o.foundPossibleResultPoint(f)}var h=e.decodeEnd(n,c);if(o!=null){var p=new B((h[0]+h[1])/2,r);o.foundPossibleResultPoint(p)}var x=h[1],m=x+(x-h[0]);if(m>=n.getSize()||!n.isRange(x,m,!1))throw new T;var g=u.toString();if(g.length<8)throw new P;if(!e.checkChecksum(g))throw new _e;var y=(i[1]+i[0])/2,b=(h[1]+h[0])/2,w=this.getBarcodeFormat(),C=[new B(y,r),new B(b,r)],A=new Le(g,null,0,C,w,new Date().getTime()),N=0;try{var E=a0.decodeRow(r,n,h[1]);A.putMetadata(Pe.UPC_EAN_EXTENSION,E.getText()),A.putAllMetadata(E.getResultMetadata()),A.addResultPoints(E.getResultPoints()),N=E.getText().length}catch{}var S=a==null?null:a.get(fe.ALLOWED_EAN_EXTENSIONS);if(S!=null){var I=!1;for(var O in S)if(N.toString()===O){I=!0;break}if(!I)throw new T}return w===L.EAN_13||L.UPC_A,A},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var a=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===a},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,a=0,i=n-1;i>=0;i-=2){var o=r.charAt(i).charCodeAt(0)-48;if(o<0||o>9)throw new P;a+=o}a*=3;for(var i=n-2;i>=0;i-=2){var o=r.charAt(i).charCodeAt(0)-48;if(o<0||o>9)throw new P;a+=o}return(1e3-a)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e})(Ut),o0=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),ri=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zn=(function(t){o0(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,a){var i,o,s,l,c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;for(var u=r.getSize(),f=n[1],h=0,p=0;p<6&&f<u;p++){var x=Ne.decodeDigit(r,c,f,Ne.L_AND_G_PATTERNS);a+=String.fromCharCode(48+x%10);try{for(var m=(i=void 0,ri(c)),g=m.next();!g.done;g=m.next()){var y=g.value;f+=y}}catch(A){i={error:A}}finally{try{g&&!g.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}x>=10&&(h|=1<<5-p)}a=e.determineFirstDigit(a,h);var b=Ne.findGuardPattern(r,f,!0,Ne.MIDDLE_PATTERN,new Int32Array(Ne.MIDDLE_PATTERN.length).fill(0));f=b[1];for(var p=0;p<6&&f<u;p++){var x=Ne.decodeDigit(r,c,f,Ne.L_PATTERNS);a+=String.fromCharCode(48+x);try{for(var w=(s=void 0,ri(c)),C=w.next();!C.done;C=w.next()){var y=C.value;f+=y}}catch(E){s={error:E}}finally{try{C&&!C.done&&(l=w.return)&&l.call(w)}finally{if(s)throw s.error}}}return{rowOffset:f,resultString:a}},e.prototype.getBarcodeFormat=function(){return L.EAN_13},e.determineFirstDigit=function(r,n){for(var a=0;a<10;a++)if(n===this.FIRST_DIGIT_ENCODINGS[a])return r=String.fromCharCode(48+a)+r,r;throw new T},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e})(Ne),s0=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),ni=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ai=(function(t){s0(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,a){var i,o,s,l,c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;for(var u=r.getSize(),f=n[1],h=0;h<4&&f<u;h++){var p=Ne.decodeDigit(r,c,f,Ne.L_PATTERNS);a+=String.fromCharCode(48+p);try{for(var x=(i=void 0,ni(c)),m=x.next();!m.done;m=x.next()){var g=m.value;f+=g}}catch(C){i={error:C}}finally{try{m&&!m.done&&(o=x.return)&&o.call(x)}finally{if(i)throw i.error}}}var y=Ne.findGuardPattern(r,f,!0,Ne.MIDDLE_PATTERN,new Int32Array(Ne.MIDDLE_PATTERN.length).fill(0));f=y[1];for(var h=0;h<4&&f<u;h++){var p=Ne.decodeDigit(r,c,f,Ne.L_PATTERNS);a+=String.fromCharCode(48+p);try{for(var b=(s=void 0,ni(c)),w=b.next();!w.done;w=b.next()){var g=w.value;f+=g}}catch(N){s={error:N}}finally{try{w&&!w.done&&(l=b.return)&&l.call(b)}finally{if(s)throw s.error}}}return{rowOffset:f,resultString:a}},e.prototype.getBarcodeFormat=function(){return L.EAN_8},e})(Ne),l0=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),ii=(function(t){l0(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.ean13Reader=new zn,r}return e.prototype.getBarcodeFormat=function(){return L.UPC_A},e.prototype.decode=function(r,n){return this.maybeReturnResult(this.ean13Reader.decode(r))},e.prototype.decodeRow=function(r,n,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,n,a))},e.prototype.decodeMiddle=function(r,n,a){return this.ean13Reader.decodeMiddle(r,n,a)},e.prototype.maybeReturnResult=function(r){var n=r.getText();if(n.charAt(0)==="0"){var a=new Le(n.substring(1),null,null,r.getResultPoints(),L.UPC_A);return r.getResultMetadata()!=null&&a.putAllMetadata(r.getResultMetadata()),a}else throw new T},e.prototype.reset=function(){this.ean13Reader.reset()},e})(Ne),d0=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),c0=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oi=(function(t){d0(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=new Int32Array(4),r}return e.prototype.decodeMiddle=function(r,n,a){var i,o,s=this.decodeMiddleCounters.map(function(g){return g});s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var l=r.getSize(),c=n[1],u=0,f=0;f<6&&c<l;f++){var h=e.decodeDigit(r,s,c,e.L_AND_G_PATTERNS);a+=String.fromCharCode(48+h%10);try{for(var p=(i=void 0,c0(s)),x=p.next();!x.done;x=p.next()){var m=x.value;c+=m}}catch(g){i={error:g}}finally{try{x&&!x.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}h>=10&&(u|=1<<5-f)}return e.determineNumSysAndCheckDigit(new z(a),u),c},e.prototype.decodeEnd=function(r,n){return e.findGuardPatternWithoutCounters(r,n,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(r){return Ne.checkChecksum(e.convertUPCEtoUPCA(r))},e.determineNumSysAndCheckDigit=function(r,n){for(var a=0;a<=1;a++)for(var i=0;i<10;i++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][i]){r.insert(0,"0"+a),r.append("0"+i);return}throw T.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return L.UPC_E},e.convertUPCEtoUPCA=function(r){var n=r.slice(1,7).split("").map(function(o){return o.charCodeAt(0)}),a=new z;a.append(r.charAt(0));var i=n[5];switch(i){case 0:case 1:case 2:a.appendChars(n,0,2),a.append(i),a.append("0000"),a.appendChars(n,2,3);break;case 3:a.appendChars(n,0,3),a.append("00000"),a.appendChars(n,3,2);break;case 4:a.appendChars(n,0,4),a.append("00000"),a.append(n[4]);break;default:a.appendChars(n,0,5),a.append("0000"),a.append(i);break}return r.length>=8&&a.append(r.charAt(7)),a.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e})(Ne),u0=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),si=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gn=(function(t){u0(e,t);function e(r){var n=t.call(this)||this,a=r==null?null:r.get(fe.POSSIBLE_FORMATS),i=[];return a!=null&&(a.indexOf(L.EAN_13)>-1&&i.push(new zn),a.indexOf(L.UPC_A)>-1&&i.push(new ii),a.indexOf(L.EAN_8)>-1&&i.push(new ai),a.indexOf(L.UPC_E)>-1&&i.push(new oi)),i.length===0&&(i.push(new zn),i.push(new ii),i.push(new ai),i.push(new oi)),n.readers=i,n}return e.prototype.decodeRow=function(r,n,a){var i,o;try{for(var s=si(this.readers),l=s.next();!l.done;l=s.next()){var c=l.value;try{var u=c.decodeRow(r,n,a),f=u.getBarcodeFormat()===L.EAN_13&&u.getText().charAt(0)==="0",h=a==null?null:a.get(fe.POSSIBLE_FORMATS),p=h==null||h.includes(L.UPC_A);if(f&&p){var x=u.getRawBytes(),m=new Le(u.getText().substring(1),x,x?x.length:null,u.getResultPoints(),L.UPC_A);return m.putAllMetadata(u.getResultMetadata()),m}return u}catch{}}}catch(g){i={error:g}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}throw new T},e.prototype.reset=function(){var r,n;try{for(var a=si(this.readers),i=a.next();!i.done;i=a.next()){var o=i.value;o.reset()}}catch(s){r={error:s}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},e})(Ie),f0=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),h0=(function(t){f0(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},r}return e.prototype.decodeRow=function(r,n,a){var i=this.getValidRowData(n);if(!i)throw new T;var o=this.codaBarDecodeRow(i.row);if(!o)throw new T;return new Le(o,null,0,[new B(i.left,r),new B(i.right,r)],L.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(r){var n=r.toArray(),a=n.indexOf(!0);if(a===-1)return null;var i=n.lastIndexOf(!0);if(i<=a)return null;n=n.slice(a,i+1);for(var o=[],s=n[0],l=1,c=1;c<n.length;c++)n[c]===s?l++:(s=n[c],o.push(l),l=1);return o.push(l),o.length<23&&(o.length+1)%8!==0?null:{row:o,left:a,right:i}},e.prototype.codaBarDecodeRow=function(r){for(var n=[],a=Math.ceil(r.reduce(function(l,c){return(l+c)/2},0));r.length>0;){var i=r.splice(0,8).splice(0,7),o=i.map(function(l){return l<a?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[o]===void 0)return null;n.push(this.CODA_BAR_CHAR_SET[o])}var s=n.join("");return this.validCodaBarString(s)?s:null},e.prototype.validCodaBarString=function(r){var n=/^[A-D].{1,}[A-D]$/;return n.test(r)},e})(Ie),p0=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),x0=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kt=(function(t){p0(e,t);function e(){var r=t.call(this)||this;return r.decodeFinderCounters=new Int32Array(4),r.dataCharacterCounters=new Int32Array(8),r.oddRoundingErrors=new Array(4),r.evenRoundingErrors=new Array(4),r.oddCounts=new Array(r.dataCharacterCounters.length/2),r.evenCounts=new Array(r.dataCharacterCounters.length/2),r}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(r,n){for(var a=0;a<n.length;a++)if(Ie.patternMatchVariance(r,n[a],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return a;throw new T},e.count=function(r){return ae.sum(new Int32Array(r))},e.increment=function(r,n){for(var a=0,i=n[0],o=1;o<r.length;o++)n[o]>i&&(i=n[o],a=o);r[a]++},e.decrement=function(r,n){for(var a=0,i=n[0],o=1;o<r.length;o++)n[o]<i&&(i=n[o],a=o);r[a]--},e.isFinderPattern=function(r){var n,a,i=r[0]+r[1],o=i+r[2]+r[3],s=i/o;if(s>=e.MIN_FINDER_PATTERN_RATIO&&s<=e.MAX_FINDER_PATTERN_RATIO){var l=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER;try{for(var u=x0(r),f=u.next();!f.done;f=u.next()){var h=f.value;h>c&&(c=h),h<l&&(l=h)}}catch(p){n={error:p}}finally{try{f&&!f.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}return c<10*l}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e})(Ie),Fr=(function(){function t(e,r){this.value=e,this.checksumPortion=r}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value&&this.checksumPortion===r.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t})(),as=(function(){function t(e,r,n,a,i){this.value=e,this.startEnd=r,this.value=e,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new B(n,i)),this.resultPoints.push(new B(a,i))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.hashCode=function(){return this.value},t})(),m0=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Dt=(function(){function t(){}return t.getRSSvalue=function(e,r,n){var a,i,o=0;try{for(var s=m0(e),l=s.next();!l.done;l=s.next()){var c=l.value;o+=c}}catch(b){a={error:b}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(a)throw a.error}}for(var u=0,f=0,h=e.length,p=0;p<h-1;p++){var x=void 0;for(x=1,f|=1<<p;x<e[p];x++,f&=~(1<<p)){var m=t.combins(o-x-1,h-p-2);if(n&&f===0&&o-x-(h-p-1)>=h-p-1&&(m-=t.combins(o-x-(h-p),h-p-2)),h-p-1>1){for(var g=0,y=o-x-(h-p-2);y>r;y--)g+=t.combins(o-x-y-1,h-p-3);m-=g*(h-1-p)}else o-x>r&&m--;u+=m}o-=x}return u},t.combins=function(e,r){var n,a;e-r>r?(a=r,n=e-r):(a=e-r,n=r);for(var i=1,o=1,s=e;s>n;s--)i*=s,o<=a&&(i/=o,o++);for(;o<=a;)i/=o,o++;return i},t})(),g0=(function(){function t(){}return t.buildBitArray=function(e){var r=e.length*2-1;e[e.length-1].getRightChar()==null&&(r-=1);for(var n=12*r,a=new je(n),i=0,o=e[0],s=o.getRightChar().getValue(),l=11;l>=0;--l)(s&1<<l)!==0&&a.set(i),i++;for(var l=1;l<e.length;++l){for(var c=e[l],u=c.getLeftChar().getValue(),f=11;f>=0;--f)(u&1<<f)!==0&&a.set(i),i++;if(c.getRightChar()!==null)for(var h=c.getRightChar().getValue(),f=11;f>=0;--f)(h&1<<f)!==0&&a.set(i),i++}return a},t})(),Ct=(function(){function t(e,r){r?this.decodedInformation=null:(this.finished=e,this.decodedInformation=r)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t})(),ha=(function(){function t(e){this.newPosition=e}return t.prototype.getNewPosition=function(){return this.newPosition},t})(),v0=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),rt=(function(t){v0(e,t);function e(r,n){var a=t.call(this,r)||this;return a.value=n,a}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e})(ha),b0=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Et=(function(t){b0(e,t);function e(r,n,a){var i=t.call(this,r)||this;return a?(i.remaining=!0,i.remainingValue=i.remainingValue):(i.remaining=!1,i.remainingValue=0),i.newString=n,i}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e})(ha),y0=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),jt=(function(t){y0(e,t);function e(r,n,a){var i=t.call(this,r)||this;if(n<0||n>10||a<0||a>10)throw new P;return i.firstDigit=n,i.secondDigit=a,i}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e})(ha),gr=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},w0=(function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){var r,n,a,i,o,s,l,c;if(!e)return null;if(e.length<2)throw new T;var u=e.substring(0,2);try{for(var f=gr(t.TWO_DIGIT_DATA_LENGTH),h=f.next();!h.done;h=f.next()){var p=h.value;if(p[0]===u)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(2,p[2],e):t.processFixedAI(2,p[1],e)}}catch(N){r={error:N}}finally{try{h&&!h.done&&(n=f.return)&&n.call(f)}finally{if(r)throw r.error}}if(e.length<3)throw new T;var x=e.substring(0,3);try{for(var m=gr(t.THREE_DIGIT_DATA_LENGTH),g=m.next();!g.done;g=m.next()){var p=g.value;if(p[0]===x)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(3,p[2],e):t.processFixedAI(3,p[1],e)}}catch(N){a={error:N}}finally{try{g&&!g.done&&(i=m.return)&&i.call(m)}finally{if(a)throw a.error}}try{for(var y=gr(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),b=y.next();!b.done;b=y.next()){var p=b.value;if(p[0]===x)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,p[2],e):t.processFixedAI(4,p[1],e)}}catch(N){o={error:N}}finally{try{b&&!b.done&&(s=y.return)&&s.call(y)}finally{if(o)throw o.error}}if(e.length<4)throw new T;var w=e.substring(0,4);try{for(var C=gr(t.FOUR_DIGIT_DATA_LENGTH),A=C.next();!A.done;A=C.next()){var p=A.value;if(p[0]===w)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,p[2],e):t.processFixedAI(4,p[1],e)}}catch(N){l={error:N}}finally{try{A&&!A.done&&(c=C.return)&&c.call(C)}finally{if(l)throw l.error}}throw new T},t.processFixedAI=function(e,r,n){if(n.length<e)throw new T;var a=n.substring(0,e);if(n.length<e+r)throw new T;var i=n.substring(e,e+r),o=n.substring(e+r),s="("+a+")"+i,l=t.parseFieldsInGeneralPurpose(o);return l==null?s:s+l},t.processVariableAI=function(e,r,n){var a=n.substring(0,e),i;n.length<e+r?i=n.length:i=e+r;var o=n.substring(e,i),s=n.substring(i),l="("+a+")"+o,c=t.parseFieldsInGeneralPurpose(s);return c==null?l:l+c},t.VARIABLE_LENGTH=[],t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t})(),Tr=(function(){function t(e){this.buffer=new z,this.information=e}return t.prototype.decodeAllCodes=function(e,r){var n=r,a=null;do{var i=this.decodeGeneralPurposeField(n,a),o=w0.parseFieldsInGeneralPurpose(i.getNewString());if(o!=null&&e.append(o),i.isRemaining()?a=""+i.getRemainingValue():a=null,n===i.getNewPosition())break;n=i.getNewPosition()}while(!0);return e.toString()},t.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var r=e;r<e+3;++r)if(this.information.get(r))return!0;return this.information.get(e+3)},t.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var r=this.extractNumericValueFromBitArray(e,4);return r===0?new jt(this.information.getSize(),jt.FNC1,jt.FNC1):new jt(this.information.getSize(),r-1,jt.FNC1)}var n=this.extractNumericValueFromBitArray(e,7),a=(n-8)/11,i=(n-8)%11;return new jt(e+7,a,i)},t.prototype.extractNumericValueFromBitArray=function(e,r){return t.extractNumericValueFromBitArray(this.information,e,r)},t.extractNumericValueFromBitArray=function(e,r,n){for(var a=0,i=0;i<n;++i)e.get(r+i)&&(a|=1<<n-i-1);return a},t.prototype.decodeGeneralPurposeField=function(e,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(e);var n=this.parseBlocks();return n!=null&&n.isRemaining()?new Et(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new Et(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){var e,r;do{var n=this.current.getPosition();this.current.isAlpha()?(r=this.parseAlphaBlock(),e=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),e=r.isFinished()):(r=this.parseNumericBlock(),e=r.isFinished());var a=n!==this.current.getPosition();if(!a&&!e)break}while(!e);return r.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var r=void 0;return e.isSecondDigitFNC1()?r=new Et(this.current.getPosition(),this.buffer.toString()):r=new Et(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Ct(!0,r)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var r=new Et(this.current.getPosition(),this.buffer.toString());return new Ct(!0,r)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Ct(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new Et(this.current.getPosition(),this.buffer.toString());return new Ct(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Ct(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new Et(this.current.getPosition(),this.buffer.toString());return new Ct(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Ct(!1)},t.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var a=this.extractNumericValueFromBitArray(e,8);return a>=232&&a<253},t.prototype.decodeIsoIec646=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new rt(e+5,rt.FNC1);if(r>=5&&r<15)return new rt(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new rt(e+7,""+(n+1));if(n>=90&&n<116)return new rt(e+7,""+(n+7));var a=this.extractNumericValueFromBitArray(e,8),i;switch(a){case 232:i="!";break;case 233:i='"';break;case 234:i="%";break;case 235:i="&";break;case 236:i="'";break;case 237:i="(";break;case 238:i=")";break;case 239:i="*";break;case 240:i="+";break;case 241:i=",";break;case 242:i="-";break;case 243:i=".";break;case 244:i="/";break;case 245:i=":";break;case 246:i=";";break;case 247:i="<";break;case 248:i="=";break;case 249:i=">";break;case 250:i="?";break;case 251:i="_";break;case 252:i=" ";break;default:throw new P}return new rt(e+8,i)},t.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},t.prototype.decodeAlphanumeric=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new rt(e+5,rt.FNC1);if(r>=5&&r<15)return new rt(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new rt(e+6,""+(n+33));var a;switch(n){case 58:a="*";break;case 59:a=",";break;case 60:a="-";break;case 61:a=".";break;case 62:a="/";break;default:throw new hr("Decoding invalid alphanumeric value: "+n)}return new rt(e+6,a)},t.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<5&&r+e<this.information.getSize();++r)if(r===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+r))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var r=e;r<e+3;++r)if(this.information.get(r))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<4&&r+e<this.information.getSize();++r)if(this.information.get(e+r))return!1;return!0},t})(),is=(function(){function t(e){this.information=e,this.generalDecoder=new Tr(e)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t})(),_0=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),it=(function(t){_0(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedGtin=function(r,n){r.append("(01)");var a=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,n,a)},e.prototype.encodeCompressedGtinWithoutAI=function(r,n,a){for(var i=0;i<4;++i){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*i,10);o/100===0&&r.append("0"),o/10===0&&r.append("0"),r.append(o)}e.appendCheckDigit(r,a)},e.appendCheckDigit=function(r,n){for(var a=0,i=0;i<13;i++){var o=r.charAt(i+n).charCodeAt(0)-48;a+=(i&1)===0?3*o:o}a=10-a%10,a===10&&(a=0),r.append(a)},e.GTIN_SIZE=40,e})(is),A0=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),C0=(function(t){A0(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new z;r.append("(01)");var n=r.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return r.append(a),this.encodeCompressedGtinWithoutAI(r,e.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e})(it),E0=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),N0=(function(t){E0(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new z;return this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE)},e.HEADER_SIZE=5,e})(is),S0=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),jr=(function(t){S0(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedWeight=function(r,n,a){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,a);this.addWeightCode(r,i);for(var o=this.checkWeight(i),s=1e5,l=0;l<5;++l)o/s===0&&r.append("0"),s/=10;r.append(o)},e})(it),k0=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),os=(function(t){k0(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+jr.GTIN_SIZE+e.WEIGHT_SIZE)throw new T;var r=new z;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+jr.GTIN_SIZE,e.WEIGHT_SIZE),r.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e})(jr),I0=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),O0=(function(t){I0(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){r.append("(3103)")},e.prototype.checkWeight=function(r){return r},e})(os),T0=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),j0=(function(t){T0(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){n<1e4?r.append("(3202)"):r.append("(3203)")},e.prototype.checkWeight=function(r){return r<1e4?r:r-1e4},e})(os),R0=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),D0=(function(t){R0(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+it.GTIN_SIZE)throw new T;var r=new z;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+it.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(392"),r.append(n),r.append(")");var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+it.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return r.append(a.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e})(it),P0=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),M0=(function(t){P0(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+it.GTIN_SIZE)throw new T;var r=new z;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+it.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(393"),r.append(n),r.append(")");var a=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+it.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);a/100===0&&r.append("0"),a/10===0&&r.append("0"),r.append(a);var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+it.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return r.append(i.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e})(it),L0=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),bt=(function(t){L0(e,t);function e(r,n,a){var i=t.call(this,r)||this;return i.dateCode=a,i.firstAIdigits=n,i}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new T;var r=new z;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(r,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),r.toString()},e.prototype.encodeCompressedDate=function(r,n){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(n,e.DATE_SIZE);if(a!==38400){r.append("("),r.append(this.dateCode),r.append(")");var i=a%32;a/=32;var o=a%12+1;a/=12;var s=a;s/10===0&&r.append("0"),r.append(s),o/10===0&&r.append("0"),r.append(o),i/10===0&&r.append("0"),r.append(i)}},e.prototype.addWeightCode=function(r,n){r.append("("),r.append(this.firstAIdigits),r.append(n/1e5),r.append(")")},e.prototype.checkWeight=function(r){return r%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e})(jr);function B0(t){try{if(t.get(1))return new C0(t);if(!t.get(2))return new N0(t);var e=Tr.extractNumericValueFromBitArray(t,1,4);switch(e){case 4:return new O0(t);case 5:return new j0(t)}var r=Tr.extractNumericValueFromBitArray(t,1,5);switch(r){case 12:return new D0(t);case 13:return new M0(t)}var n=Tr.extractNumericValueFromBitArray(t,1,7);switch(n){case 56:return new bt(t,"310","11");case 57:return new bt(t,"320","11");case 58:return new bt(t,"310","13");case 59:return new bt(t,"320","13");case 60:return new bt(t,"310","15");case 61:return new bt(t,"320","15");case 62:return new bt(t,"310","17");case 63:return new bt(t,"320","17")}}catch(a){throw console.log(a),new hr("unknown decoder: "+t)}}var li=(function(){function t(e,r,n,a){this.leftchar=e,this.rightchar=r,this.finderpattern=n,this.maybeLast=a}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return this.rightchar==null},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,r){return e instanceof t?t.equalsOrNull(e.leftchar,r.leftchar)&&t.equalsOrNull(e.rightchar,r.rightchar)&&t.equalsOrNull(e.finderpattern,r.finderpattern):!1},t.equalsOrNull=function(e,r){return e===null?r===null:t.equals(e,r)},t.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},t})(),F0=(function(){function t(e,r,n){this.pairs=e,this.rowNumber=r,this.wasReversed=n}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,r){return e instanceof t?this.checkEqualitity(e,r)&&e.wasReversed===r.wasReversed:!1},t.prototype.checkEqualitity=function(e,r){if(!(!e||!r)){var n;return e.forEach(function(a,i){r.forEach(function(o){a.getLeftChar().getValue()===o.getLeftChar().getValue()&&a.getRightChar().getValue()===o.getRightChar().getValue()&&a.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(n=!0)})}),n}},t})(),U0=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),yt=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},G0=(function(t){U0(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.pairs=new Array(e.MAX_PAIRS),r.rows=new Array,r.startEnd=[2],r}return e.prototype.decodeRow=function(r,n,a){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(r,n))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(r,n))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(r,n){for(var a=!1;!a;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,r))}catch(s){if(s instanceof T){if(!this.pairs.length)throw new T;a=!0}}if(this.checkChecksum())return this.pairs;var i;if(this.rows.length?i=!0:i=!1,this.storeRow(r,!1),i){var o=this.checkRowsBoolean(!1);if(o!=null||(o=this.checkRowsBoolean(!0),o!=null))return o}throw new T},e.prototype.checkRowsBoolean=function(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());var n=null;try{n=this.checkRows(new Array,0)}catch(a){console.log(a)}return r&&(this.rows=this.rows.reverse()),n},e.prototype.checkRows=function(r,n){for(var a,i,o=n;o<this.rows.length;o++){var s=this.rows[o];this.pairs.length=0;try{for(var l=(a=void 0,yt(r)),c=l.next();!c.done;c=l.next()){var u=c.value;this.pairs.push(u.getPairs())}}catch(h){a={error:h}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(a)throw a.error}}if(this.pairs.push(s.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var f=new Array(r);f.push(s);try{return this.checkRows(f,o+1)}catch(h){console.log(h)}}}throw new T},e.isValidSequence=function(r){var n,a;try{for(var i=yt(e.FINDER_PATTERN_SEQUENCES),o=i.next();!o.done;o=i.next()){var s=o.value;if(!(r.length>s.length)){for(var l=!0,c=0;c<r.length;c++)if(r[c].getFinderPattern().getValue()!==s[c]){l=!1;break}if(l)return!0}}}catch(u){n={error:u}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}return!1},e.prototype.storeRow=function(r,n){for(var a=0,i=!1,o=!1;a<this.rows.length;){var s=this.rows[a];if(s.getRowNumber()>r){o=s.isEquivalent(this.pairs);break}i=s.isEquivalent(this.pairs),a++}o||i||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new F0(this.pairs,r,n)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(r,n){var a,i,o,s,l,c;try{for(var u=yt(n),f=u.next();!f.done;f=u.next()){var h=f.value;if(h.getPairs().length!==r.length){var p=!0;try{for(var x=(o=void 0,yt(h.getPairs())),m=x.next();!m.done;m=x.next()){var g=m.value,y=!1;try{for(var b=(l=void 0,yt(r)),w=b.next();!w.done;w=b.next()){var C=w.value;if(li.equals(g,C)){y=!0;break}}}catch(A){l={error:A}}finally{try{w&&!w.done&&(c=b.return)&&c.call(b)}finally{if(l)throw l.error}}y||(p=!1)}}catch(A){o={error:A}}finally{try{m&&!m.done&&(s=x.return)&&s.call(x)}finally{if(o)throw o.error}}}}}catch(A){a={error:A}}finally{try{f&&!f.done&&(i=u.return)&&i.call(u)}finally{if(a)throw a.error}}},e.isPartialRow=function(r,n){var a,i,o,s,l,c;try{for(var u=yt(n),f=u.next();!f.done;f=u.next()){var h=f.value,p=!0;try{for(var x=(o=void 0,yt(r)),m=x.next();!m.done;m=x.next()){var g=m.value,y=!1;try{for(var b=(l=void 0,yt(h.getPairs())),w=b.next();!w.done;w=b.next()){var C=w.value;if(g.equals(C)){y=!0;break}}}catch(A){l={error:A}}finally{try{w&&!w.done&&(c=b.return)&&c.call(b)}finally{if(l)throw l.error}}if(!y){p=!1;break}}}catch(A){o={error:A}}finally{try{m&&!m.done&&(s=x.return)&&s.call(x)}finally{if(o)throw o.error}}if(p)return!0}}catch(A){a={error:A}}finally{try{f&&!f.done&&(i=u.return)&&i.call(u)}finally{if(a)throw a.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(r){var n=g0.buildBitArray(r),a=B0(n),i=a.parseInformation(),o=r[0].getFinderPattern().getResultPoints(),s=r[r.length-1].getFinderPattern().getResultPoints(),l=[o[0],o[1],s[0],s[1]];return new Le(i,null,null,l,L.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var r=this.pairs.get(0),n=r.getLeftChar(),a=r.getRightChar();if(a===null)return!1;for(var i=a.getChecksumPortion(),o=2,s=1;s<this.pairs.size();++s){var l=this.pairs.get(s);i+=l.getLeftChar().getChecksumPortion(),o++;var c=l.getRightChar();c!=null&&(i+=c.getChecksumPortion(),o++)}i%=211;var u=211*(o-4)+i;return u===n.getValue()},e.getNextSecondBar=function(r,n){var a;return r.get(n)?(a=r.getNextUnset(n),a=r.getNextSet(a)):(a=r.getNextSet(n),a=r.getNextUnset(a)),a},e.prototype.retrieveNextPair=function(r,n,a){var i=n.length%2===0;this.startFromEven&&(i=!i);var o,s=!0,l=-1;do this.findNextPair(r,n,l),o=this.parseFoundFinderPattern(r,a,i),o===null?l=e.getNextSecondBar(r,this.startEnd[0]):s=!1;while(s);var c=this.decodeDataCharacter(r,o,i,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new T;var u;try{u=this.decodeDataCharacter(r,o,i,!1)}catch(f){u=null,console.log(f)}return new li(c,u,o,!0)},e.prototype.isEmptyPair=function(r){return r.length===0},e.prototype.findNextPair=function(r,n,a){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;var o=r.getSize(),s;if(a>=0)s=a;else if(this.isEmptyPair(n))s=0;else{var l=n[n.length-1];s=l.getFinderPattern().getStartEnd()[1]}var c=n.length%2!==0;this.startFromEven&&(c=!c);for(var u=!1;s<o&&(u=!r.get(s),!!u);)s++;for(var f=0,h=s,p=s;p<o;p++)if(r.get(p)!==u)i[f]++;else{if(f===3){if(c&&e.reverseCounters(i),e.isFinderPattern(i)){this.startEnd[0]=h,this.startEnd[1]=p;return}c&&e.reverseCounters(i),h+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,f--}else f++;i[f]=1,u=!u}throw new T},e.reverseCounters=function(r){for(var n=r.length,a=0;a<n/2;++a){var i=r[a];r[a]=r[n-a-1],r[n-a-1]=i}},e.prototype.parseFoundFinderPattern=function(r,n,a){var i,o,s;if(a){for(var l=this.startEnd[0]-1;l>=0&&!r.get(l);)l--;l++,i=this.startEnd[0]-l,o=l,s=this.startEnd[1]}else o=this.startEnd[0],s=r.getNextUnset(this.startEnd[1]+1),i=s-this.startEnd[1];var c=this.getDecodeFinderCounters();he.arraycopy(c,0,c,1,c.length-1),c[0]=i;var u;try{u=this.parseFinderValue(c,e.FINDER_PATTERNS)}catch{return null}return new as(u,[o,s],o,s,n)},e.prototype.decodeDataCharacter=function(r,n,a,i){for(var o=this.getDataCharacterCounters(),s=0;s<o.length;s++)o[s]=0;if(i)e.recordPatternInReverse(r,n.getStartEnd()[0],o);else{e.recordPattern(r,n.getStartEnd()[1],o);for(var l=0,c=o.length-1;l<c;l++,c--){var u=o[l];o[l]=o[c],o[c]=u}}var f=17,h=ae.sum(new Int32Array(o))/f,p=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(h-p)/p>.3)throw new T;for(var x=this.getOddCounts(),m=this.getEvenCounts(),g=this.getOddRoundingErrors(),y=this.getEvenRoundingErrors(),l=0;l<o.length;l++){var b=1*o[l]/h,w=b+.5;if(w<1){if(b<.3)throw new T;w=1}else if(w>8){if(b>8.7)throw new T;w=8}var C=l/2;(l&1)===0?(x[C]=w,g[C]=b-w):(m[C]=w,y[C]=b-w)}this.adjustOddEvenCounts(f);for(var A=4*n.getValue()+(a?0:2)+(i?0:1)-1,N=0,E=0,l=x.length-1;l>=0;l--){if(e.isNotA1left(n,a,i)){var S=e.WEIGHTS[A][2*l];E+=x[l]*S}N+=x[l]}for(var I=0,l=m.length-1;l>=0;l--)if(e.isNotA1left(n,a,i)){var S=e.WEIGHTS[A][2*l+1];I+=m[l]*S}var O=E+I;if((N&1)!==0||N>13||N<4)throw new T;var j=(13-N)/2,M=e.SYMBOL_WIDEST[j],G=9-M,F=Dt.getRSSvalue(x,M,!0),V=Dt.getRSSvalue(m,G,!1),Y=e.EVEN_TOTAL_SUBSET[j],Z=e.GSUM[j],ne=F*Y+V+Z;return new Fr(ne,O)},e.isNotA1left=function(r,n,a){return!(r.getValue()===0&&n&&a)},e.prototype.adjustOddEvenCounts=function(r){var n=ae.sum(new Int32Array(this.getOddCounts())),a=ae.sum(new Int32Array(this.getEvenCounts())),i=!1,o=!1;n>13?o=!0:n<4&&(i=!0);var s=!1,l=!1;a>13?l=!0:a<4&&(s=!0);var c=n+a-r,u=(n&1)===1,f=(a&1)===0;if(c===1)if(u){if(f)throw new T;o=!0}else{if(!f)throw new T;l=!0}else if(c===-1)if(u){if(f)throw new T;i=!0}else{if(!f)throw new T;s=!0}else if(c===0){if(u){if(!f)throw new T;n<a?(i=!0,l=!0):(o=!0,s=!0)}else if(f)throw new T}else throw new T;if(i){if(o)throw new T;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(l)throw new T;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}l&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e})(kt),V0=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),$0=(function(t){V0(e,t);function e(r,n,a){var i=t.call(this,r,n)||this;return i.count=0,i.finderPattern=a,i}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e})(Fr),H0=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),vn=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},di=(function(t){H0(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.possibleLeftPairs=[],r.possibleRightPairs=[],r}return e.prototype.decodeRow=function(r,n,a){var i,o,s,l,c=this.decodePair(n,!1,r,a);e.addOrTally(this.possibleLeftPairs,c),n.reverse();var u=this.decodePair(n,!0,r,a);e.addOrTally(this.possibleRightPairs,u),n.reverse();try{for(var f=vn(this.possibleLeftPairs),h=f.next();!h.done;h=f.next()){var p=h.value;if(p.getCount()>1)try{for(var x=(s=void 0,vn(this.possibleRightPairs)),m=x.next();!m.done;m=x.next()){var g=m.value;if(g.getCount()>1&&e.checkChecksum(p,g))return e.constructResult(p,g)}}catch(y){s={error:y}}finally{try{m&&!m.done&&(l=x.return)&&l.call(x)}finally{if(s)throw s.error}}}}catch(y){i={error:y}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}throw new T},e.addOrTally=function(r,n){var a,i;if(n!=null){var o=!1;try{for(var s=vn(r),l=s.next();!l.done;l=s.next()){var c=l.value;if(c.getValue()===n.getValue()){c.incrementCount(),o=!0;break}}}catch(u){a={error:u}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(a)throw a.error}}o||r.push(n)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(r,n){for(var a=4537077*r.getValue()+n.getValue(),i=new String(a).toString(),o=new z,s=13-i.length;s>0;s--)o.append("0");o.append(i);for(var l=0,s=0;s<13;s++){var c=o.charAt(s).charCodeAt(0)-48;l+=(s&1)===0?3*c:c}l=10-l%10,l===10&&(l=0),o.append(l.toString());var u=r.getFinderPattern().getResultPoints(),f=n.getFinderPattern().getResultPoints();return new Le(o.toString(),null,0,[u[0],u[1],f[0],f[1]],L.RSS_14,new Date().getTime())},e.checkChecksum=function(r,n){var a=(r.getChecksumPortion()+16*n.getChecksumPortion())%79,i=9*r.getFinderPattern().getValue()+n.getFinderPattern().getValue();return i>72&&i--,i>8&&i--,a===i},e.prototype.decodePair=function(r,n,a,i){try{var o=this.findFinderPattern(r,n),s=this.parseFoundFinderPattern(r,a,n,o),l=i==null?null:i.get(fe.NEED_RESULT_POINT_CALLBACK);if(l!=null){var c=(o[0]+o[1])/2;n&&(c=r.getSize()-1-c),l.foundPossibleResultPoint(new B(c,a))}var u=this.decodeDataCharacter(r,s,!0),f=this.decodeDataCharacter(r,s,!1);return new $0(1597*u.getValue()+f.getValue(),u.getChecksumPortion()+4*f.getChecksumPortion(),s)}catch{return null}},e.prototype.decodeDataCharacter=function(r,n,a){for(var i=this.getDataCharacterCounters(),o=0;o<i.length;o++)i[o]=0;if(a)Ie.recordPatternInReverse(r,n.getStartEnd()[0],i);else{Ie.recordPattern(r,n.getStartEnd()[1]+1,i);for(var s=0,l=i.length-1;s<l;s++,l--){var c=i[s];i[s]=i[l],i[l]=c}}for(var u=a?16:15,f=ae.sum(new Int32Array(i))/u,h=this.getOddCounts(),p=this.getEvenCounts(),x=this.getOddRoundingErrors(),m=this.getEvenRoundingErrors(),s=0;s<i.length;s++){var g=i[s]/f,y=Math.floor(g+.5);y<1?y=1:y>8&&(y=8);var b=Math.floor(s/2);(s&1)===0?(h[b]=y,x[b]=g-y):(p[b]=y,m[b]=g-y)}this.adjustOddEvenCounts(a,u);for(var w=0,C=0,s=h.length-1;s>=0;s--)C*=9,C+=h[s],w+=h[s];for(var A=0,N=0,s=p.length-1;s>=0;s--)A*=9,A+=p[s],N+=p[s];var E=C+3*A;if(a){if((w&1)!==0||w>12||w<4)throw new T;var S=(12-w)/2,I=e.OUTSIDE_ODD_WIDEST[S],O=9-I,j=Dt.getRSSvalue(h,I,!1),M=Dt.getRSSvalue(p,O,!0),G=e.OUTSIDE_EVEN_TOTAL_SUBSET[S],F=e.OUTSIDE_GSUM[S];return new Fr(j*G+M+F,E)}else{if((N&1)!==0||N>10||N<4)throw new T;var S=(10-N)/2,I=e.INSIDE_ODD_WIDEST[S],O=9-I,j=Dt.getRSSvalue(h,I,!0),M=Dt.getRSSvalue(p,O,!1),V=e.INSIDE_ODD_TOTAL_SUBSET[S],F=e.INSIDE_GSUM[S];return new Fr(M*V+j+F,E)}},e.prototype.findFinderPattern=function(r,n){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var i=r.getSize(),o=!1,s=0;s<i&&(o=!r.get(s),n!==o);)s++;for(var l=0,c=s,u=s;u<i;u++)if(r.get(u)!==o)a[l]++;else{if(l===3){if(kt.isFinderPattern(a))return[c,u];c+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,l--}else l++;a[l]=1,o=!o}throw new T},e.prototype.parseFoundFinderPattern=function(r,n,a,i){for(var o=r.get(i[0]),s=i[0]-1;s>=0&&o!==r.get(s);)s--;s++;var l=i[0]-s,c=this.getDecodeFinderCounters(),u=new Int32Array(c.length);he.arraycopy(c,0,u,1,c.length-1),u[0]=l;var f=this.parseFinderValue(u,e.FINDER_PATTERNS),h=s,p=i[1];return a&&(h=r.getSize()-1-h,p=r.getSize()-1-p),new as(f,[s,i[1]],h,p,n)},e.prototype.adjustOddEvenCounts=function(r,n){var a=ae.sum(new Int32Array(this.getOddCounts())),i=ae.sum(new Int32Array(this.getEvenCounts())),o=!1,s=!1,l=!1,c=!1;r?(a>12?s=!0:a<4&&(o=!0),i>12?c=!0:i<4&&(l=!0)):(a>11?s=!0:a<5&&(o=!0),i>10?c=!0:i<4&&(l=!0));var u=a+i-n,f=(a&1)===(r?1:0),h=(i&1)===1;if(u===1)if(f){if(h)throw new T;s=!0}else{if(!h)throw new T;c=!0}else if(u===-1)if(f){if(h)throw new T;o=!0}else{if(!h)throw new T;l=!0}else if(u===0){if(f){if(!h)throw new T;a<i?(o=!0,c=!0):(s=!0,l=!0)}else if(h)throw new T}else throw new T;if(o){if(s)throw new T;kt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&kt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(c)throw new T;kt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&kt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e})(kt),z0=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Pt=(function(t){z0(e,t);function e(r){var n=t.call(this)||this;n.readers=[];var a=r?r.get(fe.POSSIBLE_FORMATS):null,i=r&&r.get(fe.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,o=r&&r.get(fe.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return a&&((a.includes(L.EAN_13)||a.includes(L.UPC_A)||a.includes(L.EAN_8)||a.includes(L.UPC_E))&&n.readers.push(new gn(r)),a.includes(L.CODE_39)&&n.readers.push(new Qa(i,o)),a.includes(L.CODE_93)&&n.readers.push(new ei),a.includes(L.CODE_128)&&n.readers.push(new Ja),a.includes(L.ITF)&&n.readers.push(new ti),a.includes(L.CODABAR)&&n.readers.push(new h0),a.includes(L.RSS_14)&&n.readers.push(new di),a.includes(L.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new G0))),n.readers.length===0&&(n.readers.push(new gn(r)),n.readers.push(new Qa),n.readers.push(new ei),n.readers.push(new gn(r)),n.readers.push(new Ja),n.readers.push(new ti),n.readers.push(new di)),n}return e.prototype.decodeRow=function(r,n,a){for(var i=0;i<this.readers.length;i++)try{return this.readers[i].decodeRow(r,n,a)}catch{}throw new T},e.prototype.reset=function(){this.readers.forEach(function(r){return r.reset()})},e})(Ie),W0=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(t){W0(e,t);function e(r,n){return r===void 0&&(r=500),t.call(this,new Pt(n),r,n)||this}return e})(Ht);var ci=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},se=(function(){function t(e,r,n){this.ecCodewords=e,this.ecBlocks=[r],n&&this.ecBlocks.push(n)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t})(),ie=(function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t})(),X0=(function(){function t(e,r,n,a,i,o){var s,l;this.versionNumber=e,this.symbolSizeRows=r,this.symbolSizeColumns=n,this.dataRegionSizeRows=a,this.dataRegionSizeColumns=i,this.ecBlocks=o;var c=0,u=o.getECCodewords(),f=o.getECBlocks();try{for(var h=ci(f),p=h.next();!p.done;p=h.next()){var x=p.value;c+=x.getCount()*(x.getDataCodewords()+u)}}catch(m){s={error:m}}finally{try{p&&!p.done&&(l=h.return)&&l.call(h)}finally{if(s)throw s.error}}this.totalCodewords=c}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,r){var n,a;if((e&1)!==0||(r&1)!==0)throw new P;try{for(var i=ci(t.VERSIONS),o=i.next();!o.done;o=i.next()){var s=o.value;if(s.symbolSizeRows===e&&s.symbolSizeColumns===r)return s}}catch(l){n={error:l}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}throw new P},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new se(5,new ie(1,3))),new t(2,12,12,10,10,new se(7,new ie(1,5))),new t(3,14,14,12,12,new se(10,new ie(1,8))),new t(4,16,16,14,14,new se(12,new ie(1,12))),new t(5,18,18,16,16,new se(14,new ie(1,18))),new t(6,20,20,18,18,new se(18,new ie(1,22))),new t(7,22,22,20,20,new se(20,new ie(1,30))),new t(8,24,24,22,22,new se(24,new ie(1,36))),new t(9,26,26,24,24,new se(28,new ie(1,44))),new t(10,32,32,14,14,new se(36,new ie(1,62))),new t(11,36,36,16,16,new se(42,new ie(1,86))),new t(12,40,40,18,18,new se(48,new ie(1,114))),new t(13,44,44,20,20,new se(56,new ie(1,144))),new t(14,48,48,22,22,new se(68,new ie(1,174))),new t(15,52,52,24,24,new se(42,new ie(2,102))),new t(16,64,64,14,14,new se(56,new ie(2,140))),new t(17,72,72,16,16,new se(36,new ie(4,92))),new t(18,80,80,18,18,new se(48,new ie(4,114))),new t(19,88,88,20,20,new se(56,new ie(4,144))),new t(20,96,96,22,22,new se(68,new ie(4,174))),new t(21,104,104,24,24,new se(56,new ie(6,136))),new t(22,120,120,18,18,new se(68,new ie(6,175))),new t(23,132,132,20,20,new se(62,new ie(8,163))),new t(24,144,144,22,22,new se(62,new ie(8,156),new ie(2,155))),new t(25,8,18,6,16,new se(7,new ie(1,5))),new t(26,8,32,6,14,new se(11,new ie(1,10))),new t(27,12,26,10,24,new se(14,new ie(1,16))),new t(28,12,36,10,16,new se(18,new ie(1,22))),new t(29,16,36,14,16,new se(24,new ie(1,32))),new t(30,16,48,14,22,new se(28,new ie(1,49)))]},t.VERSIONS=t.buildVersions(),t})(),Y0=(function(){function t(e){var r=e.getHeight();if(r<8||r>144||(r&1)!==0)throw new P;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new ut(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(e){var r=e.getHeight(),n=e.getWidth();return X0.getVersionForDimensions(r,n)},t.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),r=0,n=4,a=0,i=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth(),s=!1,l=!1,c=!1,u=!1;do if(n===i&&a===0&&!s)e[r++]=this.readCorner1(i,o)&255,n-=2,a+=2,s=!0;else if(n===i-2&&a===0&&(o&3)!==0&&!l)e[r++]=this.readCorner2(i,o)&255,n-=2,a+=2,l=!0;else if(n===i+4&&a===2&&(o&7)===0&&!c)e[r++]=this.readCorner3(i,o)&255,n-=2,a+=2,c=!0;else if(n===i-2&&a===0&&(o&7)===4&&!u)e[r++]=this.readCorner4(i,o)&255,n-=2,a+=2,u=!0;else{do n<i&&a>=0&&!this.readMappingMatrix.get(a,n)&&(e[r++]=this.readUtah(n,a,i,o)&255),n-=2,a+=2;while(n>=0&&a<o);n+=1,a+=3;do n>=0&&a<o&&!this.readMappingMatrix.get(a,n)&&(e[r++]=this.readUtah(n,a,i,o)&255),n+=2,a-=2;while(n<i&&a>=0);n+=3,a+=1}while(n<i||a<o);if(r!==this.version.getTotalCodewords())throw new P;return e},t.prototype.readModule=function(e,r,n,a){return e<0&&(e+=n,r+=4-(n+4&7)),r<0&&(r+=a,e+=4-(a+4&7)),this.readMappingMatrix.set(r,e),this.mappingBitMatrix.get(r,e)},t.prototype.readUtah=function(e,r,n,a){var i=0;return this.readModule(e-2,r-2,n,a)&&(i|=1),i<<=1,this.readModule(e-2,r-1,n,a)&&(i|=1),i<<=1,this.readModule(e-1,r-2,n,a)&&(i|=1),i<<=1,this.readModule(e-1,r-1,n,a)&&(i|=1),i<<=1,this.readModule(e-1,r,n,a)&&(i|=1),i<<=1,this.readModule(e,r-2,n,a)&&(i|=1),i<<=1,this.readModule(e,r-1,n,a)&&(i|=1),i<<=1,this.readModule(e,r,n,a)&&(i|=1),i},t.prototype.readCorner1=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,1,e,r)&&(n|=1),n<<=1,this.readModule(e-1,2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.readCorner2=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-4,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner3=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-3,e,r)&&(n|=1),n<<=1,this.readModule(1,r-2,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner4=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.extractDataRegion=function(e){var r=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==r)throw new U("Dimension of bitMatrix must match the version size");for(var a=this.version.getDataRegionSizeRows(),i=this.version.getDataRegionSizeColumns(),o=r/a|0,s=n/i|0,l=o*a,c=s*i,u=new ut(c,l),f=0;f<o;++f)for(var h=f*a,p=0;p<s;++p)for(var x=p*i,m=0;m<a;++m)for(var g=f*(a+2)+1+m,y=h+m,b=0;b<i;++b){var w=p*(i+2)+1+b;if(e.get(w,g)){var C=x+b;u.set(C,y)}}return u},t})(),ui=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},q0=(function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r){var n,a,i,o,s=r.getECBlocks(),l=0,c=s.getECBlocks();try{for(var u=ui(c),f=u.next();!f.done;f=u.next()){var h=f.value;l+=h.getCount()}}catch(F){n={error:F}}finally{try{f&&!f.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}var p=new Array(l),x=0;try{for(var m=ui(c),g=m.next();!g.done;g=m.next())for(var h=g.value,y=0;y<h.getCount();y++){var b=h.getDataCodewords(),w=s.getECCodewords()+b;p[x++]=new t(b,new Uint8Array(w))}}catch(F){i={error:F}}finally{try{g&&!g.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}for(var C=p[0].codewords.length,A=C-s.getECCodewords(),N=A-1,E=0,y=0;y<N;y++)for(var S=0;S<x;S++)p[S].codewords[y]=e[E++];for(var I=r.getVersionNumber()===24,O=I?8:x,S=0;S<O;S++)p[S].codewords[A-1]=e[E++];for(var j=p[0].codewords.length,y=A;y<j;y++)for(var S=0;S<x;S++){var M=I?(S+8)%x:S,G=I&&M>7?y-1:y;p[M].codewords[G]=e[E++]}if(E!==e.length)throw new U;return p},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t})(),ss=(function(){function t(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new U(""+e);var r=0,n=this.bitOffset,a=this.byteOffset,i=this.bytes;if(n>0){var o=8-n,s=e<o?e:o,l=o-s,c=255>>8-s<<l;r=(i[a]&c)>>l,e-=s,n+=s,n===8&&(n=0,a++)}if(e>0){for(;e>=8;)r=r<<8|i[a]&255,a++,e-=8;if(e>0){var l=8-e,c=255>>l<<l;r=r<<e|(i[a]&c)>>l,n+=e}}return this.bitOffset=n,this.byteOffset=a,r},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t})(),Ce;(function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"})(Ce||(Ce={}));var Z0=(function(){function t(){}return t.decode=function(e){var r=new ss(e),n=new z,a=new z,i=new Array,o=Ce.ASCII_ENCODE;do if(o===Ce.ASCII_ENCODE)o=this.decodeAsciiSegment(r,n,a);else{switch(o){case Ce.C40_ENCODE:this.decodeC40Segment(r,n);break;case Ce.TEXT_ENCODE:this.decodeTextSegment(r,n);break;case Ce.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,n);break;case Ce.EDIFACT_ENCODE:this.decodeEdifactSegment(r,n);break;case Ce.BASE256_ENCODE:this.decodeBase256Segment(r,n,i);break;default:throw new P}o=Ce.ASCII_ENCODE}while(o!==Ce.PAD_ENCODE&&r.available()>0);return a.length()>0&&n.append(a.toString()),new an(e,n.toString(),i.length===0?null:i,null)},t.decodeAsciiSegment=function(e,r,n){var a=!1;do{var i=e.readBits(8);if(i===0)throw new P;if(i<=128)return a&&(i+=128),r.append(String.fromCharCode(i-1)),Ce.ASCII_ENCODE;if(i===129)return Ce.PAD_ENCODE;if(i<=229){var o=i-130;o<10&&r.append("0"),r.append(""+o)}else switch(i){case 230:return Ce.C40_ENCODE;case 231:return Ce.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:a=!0;break;case 236:r.append("[)>05"),n.insert(0,"");break;case 237:r.append("[)>06"),n.insert(0,"");break;case 238:return Ce.ANSIX12_ENCODE;case 239:return Ce.TEXT_ENCODE;case 240:return Ce.EDIFACT_ENCODE;case 241:break;default:if(i!==254||e.available()!==0)throw new P;break}}while(e.available()>0);return Ce.ASCII_ENCODE},t.decodeC40Segment=function(e,r){var n=!1,a=[],i=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),a);for(var s=0;s<3;s++){var l=a[s];switch(i){case 0:if(l<3)i=l+1;else if(l<this.C40_BASIC_SET_CHARS.length){var c=this.C40_BASIC_SET_CHARS[l];n?(r.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):r.append(c)}else throw new P;break;case 1:n?(r.append(String.fromCharCode(l+128)),n=!1):r.append(String.fromCharCode(l)),i=0;break;case 2:if(l<this.C40_SHIFT2_SET_CHARS.length){var c=this.C40_SHIFT2_SET_CHARS[l];n?(r.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):r.append(c)}else switch(l){case 27:r.append("");break;case 30:n=!0;break;default:throw new P}i=0;break;case 3:n?(r.append(String.fromCharCode(l+224)),n=!1):r.append(String.fromCharCode(l+96)),i=0;break;default:throw new P}}}while(e.available()>0)},t.decodeTextSegment=function(e,r){var n=!1,a=[],i=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),a);for(var s=0;s<3;s++){var l=a[s];switch(i){case 0:if(l<3)i=l+1;else if(l<this.TEXT_BASIC_SET_CHARS.length){var c=this.TEXT_BASIC_SET_CHARS[l];n?(r.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):r.append(c)}else throw new P;break;case 1:n?(r.append(String.fromCharCode(l+128)),n=!1):r.append(String.fromCharCode(l)),i=0;break;case 2:if(l<this.TEXT_SHIFT2_SET_CHARS.length){var c=this.TEXT_SHIFT2_SET_CHARS[l];n?(r.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):r.append(c)}else switch(l){case 27:r.append("");break;case 30:n=!0;break;default:throw new P}i=0;break;case 3:if(l<this.TEXT_SHIFT3_SET_CHARS.length){var c=this.TEXT_SHIFT3_SET_CHARS[l];n?(r.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):r.append(c),i=0}else throw new P;break;default:throw new P}}}while(e.available()>0)},t.decodeAnsiX12Segment=function(e,r){var n=[];do{if(e.available()===8)return;var a=e.readBits(8);if(a===254)return;this.parseTwoBytes(a,e.readBits(8),n);for(var i=0;i<3;i++){var o=n[i];switch(o){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(o<14)r.append(String.fromCharCode(o+44));else if(o<40)r.append(String.fromCharCode(o+51));else throw new P;break}}}while(e.available()>0)},t.parseTwoBytes=function(e,r,n){var a=(e<<8)+r-1,i=Math.floor(a/1600);n[0]=i,a-=i*1600,i=Math.floor(a/40),n[1]=i,n[2]=a-i*40},t.decodeEdifactSegment=function(e,r){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var a=e.readBits(6);if(a===31){var i=8-e.getBitOffset();i!==8&&e.readBits(i);return}(a&32)===0&&(a|=64),r.append(String.fromCharCode(a))}}while(e.available()>0)},t.decodeBase256Segment=function(e,r,n){var a=1+e.getByteOffset(),i=this.unrandomize255State(e.readBits(8),a++),o;if(i===0?o=e.available()/8|0:i<250?o=i:o=250*(i-249)+this.unrandomize255State(e.readBits(8),a++),o<0)throw new P;for(var s=new Uint8Array(o),l=0;l<o;l++){if(e.available()<8)throw new P;s[l]=this.unrandomize255State(e.readBits(8),a++)}n.push(s);try{r.append(et.decode(s,Q.ISO88591))}catch(c){throw new hr("Platform does not support required encoding: "+c.message)}},t.unrandomize255State=function(e,r){var n=149*r%255+1,a=e-n;return a>=0?a:a+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],t})(),K0=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},J0=(function(){function t(){this.rsDecoder=new on(He.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(e){var r,n,a=new Y0(e),i=a.getVersion(),o=a.readCodewords(),s=q0.getDataBlocks(o,i),l=0;try{for(var c=K0(s),u=c.next();!u.done;u=c.next()){var f=u.value;l+=f.getNumDataCodewords()}}catch(w){r={error:w}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}for(var h=new Uint8Array(l),p=s.length,x=0;x<p;x++){var m=s[x],g=m.getCodewords(),y=m.getNumDataCodewords();this.correctErrors(g,y);for(var b=0;b<y;b++)h[b*p+x]=g[b]}return Z0.decode(h)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new _e}for(var a=0;a<r;a++)e[a]=n[a]},t})(),Q0=(function(){function t(e){this.image=e,this.rectangleDetector=new Hn(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),r=this.detectSolid1(e);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new T;r=this.shiftToModuleCenter(r);var n=r[0],a=r[1],i=r[2],o=r[3],s=this.transitionsBetween(n,o)+1,l=this.transitionsBetween(i,o)+1;(s&1)===1&&(s+=1),(l&1)===1&&(l+=1),4*s<7*l&&4*l<7*s&&(s=l=Math.max(s,l));var c=t.sampleGrid(this.image,n,a,i,o,s,l);return new ua(c,[n,a,i,o])},t.shiftPoint=function(e,r,n){var a=(r.getX()-e.getX())/(n+1),i=(r.getY()-e.getY())/(n+1);return new B(e.getX()+a,e.getY()+i)},t.moveAway=function(e,r,n){var a=e.getX(),i=e.getY();return a<r?a-=1:a+=1,i<n?i-=1:i+=1,new B(a,i)},t.prototype.detectSolid1=function(e){var r=e[0],n=e[1],a=e[3],i=e[2],o=this.transitionsBetween(r,n),s=this.transitionsBetween(n,a),l=this.transitionsBetween(a,i),c=this.transitionsBetween(i,r),u=o,f=[i,r,n,a];return u>s&&(u=s,f[0]=r,f[1]=n,f[2]=a,f[3]=i),u>l&&(u=l,f[0]=n,f[1]=a,f[2]=i,f[3]=r),u>c&&(f[0]=a,f[1]=i,f[2]=r,f[3]=n),f},t.prototype.detectSolid2=function(e){var r=e[0],n=e[1],a=e[2],i=e[3],o=this.transitionsBetween(r,i),s=t.shiftPoint(n,a,(o+1)*4),l=t.shiftPoint(a,n,(o+1)*4),c=this.transitionsBetween(s,r),u=this.transitionsBetween(l,i);return c<u?(e[0]=r,e[1]=n,e[2]=a,e[3]=i):(e[0]=n,e[1]=a,e[2]=i,e[3]=r),e},t.prototype.correctTopRight=function(e){var r=e[0],n=e[1],a=e[2],i=e[3],o=this.transitionsBetween(r,i),s=this.transitionsBetween(n,i),l=t.shiftPoint(r,n,(s+1)*4),c=t.shiftPoint(a,n,(o+1)*4);o=this.transitionsBetween(l,i),s=this.transitionsBetween(c,i);var u=new B(i.getX()+(a.getX()-n.getX())/(o+1),i.getY()+(a.getY()-n.getY())/(o+1)),f=new B(i.getX()+(r.getX()-n.getX())/(s+1),i.getY()+(r.getY()-n.getY())/(s+1));if(!this.isValid(u))return this.isValid(f)?f:null;if(!this.isValid(f))return u;var h=this.transitionsBetween(l,u)+this.transitionsBetween(c,u),p=this.transitionsBetween(l,f)+this.transitionsBetween(c,f);return h>p?u:f},t.prototype.shiftToModuleCenter=function(e){var r=e[0],n=e[1],a=e[2],i=e[3],o=this.transitionsBetween(r,i)+1,s=this.transitionsBetween(a,i)+1,l=t.shiftPoint(r,n,s*4),c=t.shiftPoint(a,n,o*4);o=this.transitionsBetween(l,i)+1,s=this.transitionsBetween(c,i)+1,(o&1)===1&&(o+=1),(s&1)===1&&(s+=1);var u=(r.getX()+n.getX()+a.getX()+i.getX())/4,f=(r.getY()+n.getY()+a.getY()+i.getY())/4;r=t.moveAway(r,u,f),n=t.moveAway(n,u,f),a=t.moveAway(a,u,f),i=t.moveAway(i,u,f);var h,p;return l=t.shiftPoint(r,n,s*4),l=t.shiftPoint(l,i,o*4),h=t.shiftPoint(n,r,s*4),h=t.shiftPoint(h,a,o*4),c=t.shiftPoint(a,i,s*4),c=t.shiftPoint(c,n,o*4),p=t.shiftPoint(i,a,s*4),p=t.shiftPoint(p,r,o*4),[l,h,c,p]},t.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},t.sampleGrid=function(e,r,n,a,i,o,s){var l=fa.getInstance();return l.sampleGrid(e,o,s,.5,.5,o-.5,.5,o-.5,s-.5,.5,s-.5,r.getX(),r.getY(),i.getX(),i.getY(),a.getX(),a.getY(),n.getX(),n.getY())},t.prototype.transitionsBetween=function(e,r){var n=Math.trunc(e.getX()),a=Math.trunc(e.getY()),i=Math.trunc(r.getX()),o=Math.trunc(r.getY()),s=Math.abs(o-a)>Math.abs(i-n);if(s){var l=n;n=a,a=l,l=i,i=o,o=l}for(var c=Math.abs(i-n),u=Math.abs(o-a),f=-c/2,h=a<o?1:-1,p=n<i?1:-1,x=0,m=this.image.get(s?a:n,s?n:a),g=n,y=a;g!==i;g+=p){var b=this.image.get(s?y:g,s?g:y);if(b!==m&&(x++,m=b),f+=u,f>0){if(y===o)break;y+=h,f-=c}}return x},t})(),Ur=(function(){function t(){this.decoder=new J0}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n,a;if(r!=null&&r.has(fe.PURE_BARCODE)){var i=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(i),a=t.NO_POINTS}else{var o=new Q0(e.getBlackMatrix()).detect();n=this.decoder.decode(o.getBits()),a=o.getPoints()}var s=n.getRawBytes(),l=new Le(n.getText(),s,8*s.length,a,L.DATA_MATRIX,he.currentTimeMillis()),c=n.getByteSegments();c!=null&&l.putMetadata(Pe.BYTE_SEGMENTS,c);var u=n.getECLevel();return u!=null&&l.putMetadata(Pe.ERROR_CORRECTION_LEVEL,u),l},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r==null||n==null)throw new T;var a=this.moduleSize(r,e),i=r[1],o=n[1],s=r[0],l=n[0],c=(l-s+1)/a,u=(o-i+1)/a;if(c<=0||u<=0)throw new T;var f=a/2;i+=f,s+=f;for(var h=new ut(c,u),p=0;p<u;p++)for(var x=i+p*a,m=0;m<c;m++)e.get(s+m*a,x)&&h.set(m,p);return h},t.moduleSize=function(e,r){for(var n=r.getWidth(),a=e[0],i=e[1];a<n&&r.get(a,i);)a++;if(a===n)throw new T;var o=a-e[0];if(o===0)throw new T;return o},t.NO_POINTS=[],t})(),eu=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(t){eu(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new Ur,r)||this}return e})(Ht);var Mt;(function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"})(Mt||(Mt={}));var tu=(function(){function t(e,r,n){this.value=e,this.stringValue=r,this.bits=n,t.FOR_BITS.set(n,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new ye(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new U;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t(Mt.L,"L",1),t.M=new t(Mt.M,"M",0),t.Q=new t(Mt.Q,"Q",3),t.H=new t(Mt.H,"H",2),t})(),ru=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ls=(function(){function t(e){this.errorCorrectionLevel=tu.forBits(e>>3&3),this.dataMask=e&7}return t.numBitsDiffering=function(e,r){return X.bitCount(e^r)},t.decodeFormatInformation=function(e,r){var n=t.doDecodeFormatInformation(e,r);return n!==null?n:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,r^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,r){var n,a,i=Number.MAX_SAFE_INTEGER,o=0;try{for(var s=ru(t.FORMAT_INFO_DECODE_LOOKUP),l=s.next();!l.done;l=s.next()){var c=l.value,u=c[0];if(u===e||u===r)return new t(c[1]);var f=t.numBitsDiffering(e,u);f<i&&(o=c[1],i=f),e!==r&&(f=t.numBitsDiffering(r,u),f<i&&(o=c[1],i=f))}}catch(h){n={error:h}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}return i<=3?new t(o):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t})(),nu=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},k=(function(){function t(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=r}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var e,r,n=0,a=this.ecBlocks;try{for(var i=nu(a),o=i.next();!o.done;o=i.next()){var s=o.value;n+=s.getCount()}}catch(l){e={error:l}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return n},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t})(),_=(function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t})(),au=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ot=(function(){function t(e,r){for(var n,a,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];this.versionNumber=e,this.alignmentPatternCenters=r,this.ecBlocks=i;var s=0,l=i[0].getECCodewordsPerBlock(),c=i[0].getECBlocks();try{for(var u=au(c),f=u.next();!f.done;f=u.next()){var h=f.value;s+=h.getCount()*(h.getDataCodewords()+l)}}catch(p){n={error:p}}finally{try{f&&!f.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}this.totalCodewords=s}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},t.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new P;try{return this.getVersionForNumber((e-17)/4)}catch{throw new P}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new U;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var r=Number.MAX_SAFE_INTEGER,n=0,a=0;a<t.VERSION_DECODE_INFO.length;a++){var i=t.VERSION_DECODE_INFO[a];if(i===e)return t.getVersionForNumber(a+7);var o=ls.numBitsDiffering(e,i);o<r&&(n=a+7,r=o)}return r<=3?t.getVersionForNumber(n):null},t.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),r=new ut(e);r.setRegion(0,0,9,9),r.setRegion(e-8,0,8,9),r.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,a=0;a<n;a++)for(var i=this.alignmentPatternCenters[a]-2,o=0;o<n;o++)a===0&&(o===0||o===n-1)||a===n-1&&o===0||r.setRegion(this.alignmentPatternCenters[o]-2,i,5,5);return r.setRegion(6,9,1,e-17),r.setRegion(9,6,e-17,1),this.versionNumber>6&&(r.setRegion(e-11,0,3,6),r.setRegion(0,e-11,6,3)),r},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new k(7,new _(1,19)),new k(10,new _(1,16)),new k(13,new _(1,13)),new k(17,new _(1,9))),new t(2,Int32Array.from([6,18]),new k(10,new _(1,34)),new k(16,new _(1,28)),new k(22,new _(1,22)),new k(28,new _(1,16))),new t(3,Int32Array.from([6,22]),new k(15,new _(1,55)),new k(26,new _(1,44)),new k(18,new _(2,17)),new k(22,new _(2,13))),new t(4,Int32Array.from([6,26]),new k(20,new _(1,80)),new k(18,new _(2,32)),new k(26,new _(2,24)),new k(16,new _(4,9))),new t(5,Int32Array.from([6,30]),new k(26,new _(1,108)),new k(24,new _(2,43)),new k(18,new _(2,15),new _(2,16)),new k(22,new _(2,11),new _(2,12))),new t(6,Int32Array.from([6,34]),new k(18,new _(2,68)),new k(16,new _(4,27)),new k(24,new _(4,19)),new k(28,new _(4,15))),new t(7,Int32Array.from([6,22,38]),new k(20,new _(2,78)),new k(18,new _(4,31)),new k(18,new _(2,14),new _(4,15)),new k(26,new _(4,13),new _(1,14))),new t(8,Int32Array.from([6,24,42]),new k(24,new _(2,97)),new k(22,new _(2,38),new _(2,39)),new k(22,new _(4,18),new _(2,19)),new k(26,new _(4,14),new _(2,15))),new t(9,Int32Array.from([6,26,46]),new k(30,new _(2,116)),new k(22,new _(3,36),new _(2,37)),new k(20,new _(4,16),new _(4,17)),new k(24,new _(4,12),new _(4,13))),new t(10,Int32Array.from([6,28,50]),new k(18,new _(2,68),new _(2,69)),new k(26,new _(4,43),new _(1,44)),new k(24,new _(6,19),new _(2,20)),new k(28,new _(6,15),new _(2,16))),new t(11,Int32Array.from([6,30,54]),new k(20,new _(4,81)),new k(30,new _(1,50),new _(4,51)),new k(28,new _(4,22),new _(4,23)),new k(24,new _(3,12),new _(8,13))),new t(12,Int32Array.from([6,32,58]),new k(24,new _(2,92),new _(2,93)),new k(22,new _(6,36),new _(2,37)),new k(26,new _(4,20),new _(6,21)),new k(28,new _(7,14),new _(4,15))),new t(13,Int32Array.from([6,34,62]),new k(26,new _(4,107)),new k(22,new _(8,37),new _(1,38)),new k(24,new _(8,20),new _(4,21)),new k(22,new _(12,11),new _(4,12))),new t(14,Int32Array.from([6,26,46,66]),new k(30,new _(3,115),new _(1,116)),new k(24,new _(4,40),new _(5,41)),new k(20,new _(11,16),new _(5,17)),new k(24,new _(11,12),new _(5,13))),new t(15,Int32Array.from([6,26,48,70]),new k(22,new _(5,87),new _(1,88)),new k(24,new _(5,41),new _(5,42)),new k(30,new _(5,24),new _(7,25)),new k(24,new _(11,12),new _(7,13))),new t(16,Int32Array.from([6,26,50,74]),new k(24,new _(5,98),new _(1,99)),new k(28,new _(7,45),new _(3,46)),new k(24,new _(15,19),new _(2,20)),new k(30,new _(3,15),new _(13,16))),new t(17,Int32Array.from([6,30,54,78]),new k(28,new _(1,107),new _(5,108)),new k(28,new _(10,46),new _(1,47)),new k(28,new _(1,22),new _(15,23)),new k(28,new _(2,14),new _(17,15))),new t(18,Int32Array.from([6,30,56,82]),new k(30,new _(5,120),new _(1,121)),new k(26,new _(9,43),new _(4,44)),new k(28,new _(17,22),new _(1,23)),new k(28,new _(2,14),new _(19,15))),new t(19,Int32Array.from([6,30,58,86]),new k(28,new _(3,113),new _(4,114)),new k(26,new _(3,44),new _(11,45)),new k(26,new _(17,21),new _(4,22)),new k(26,new _(9,13),new _(16,14))),new t(20,Int32Array.from([6,34,62,90]),new k(28,new _(3,107),new _(5,108)),new k(26,new _(3,41),new _(13,42)),new k(30,new _(15,24),new _(5,25)),new k(28,new _(15,15),new _(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new k(28,new _(4,116),new _(4,117)),new k(26,new _(17,42)),new k(28,new _(17,22),new _(6,23)),new k(30,new _(19,16),new _(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new k(28,new _(2,111),new _(7,112)),new k(28,new _(17,46)),new k(30,new _(7,24),new _(16,25)),new k(24,new _(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new k(30,new _(4,121),new _(5,122)),new k(28,new _(4,47),new _(14,48)),new k(30,new _(11,24),new _(14,25)),new k(30,new _(16,15),new _(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new k(30,new _(6,117),new _(4,118)),new k(28,new _(6,45),new _(14,46)),new k(30,new _(11,24),new _(16,25)),new k(30,new _(30,16),new _(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new k(26,new _(8,106),new _(4,107)),new k(28,new _(8,47),new _(13,48)),new k(30,new _(7,24),new _(22,25)),new k(30,new _(22,15),new _(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new k(28,new _(10,114),new _(2,115)),new k(28,new _(19,46),new _(4,47)),new k(28,new _(28,22),new _(6,23)),new k(30,new _(33,16),new _(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new k(30,new _(8,122),new _(4,123)),new k(28,new _(22,45),new _(3,46)),new k(30,new _(8,23),new _(26,24)),new k(30,new _(12,15),new _(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new k(30,new _(3,117),new _(10,118)),new k(28,new _(3,45),new _(23,46)),new k(30,new _(4,24),new _(31,25)),new k(30,new _(11,15),new _(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new k(30,new _(7,116),new _(7,117)),new k(28,new _(21,45),new _(7,46)),new k(30,new _(1,23),new _(37,24)),new k(30,new _(19,15),new _(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new k(30,new _(5,115),new _(10,116)),new k(28,new _(19,47),new _(10,48)),new k(30,new _(15,24),new _(25,25)),new k(30,new _(23,15),new _(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new k(30,new _(13,115),new _(3,116)),new k(28,new _(2,46),new _(29,47)),new k(30,new _(42,24),new _(1,25)),new k(30,new _(23,15),new _(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new k(30,new _(17,115)),new k(28,new _(10,46),new _(23,47)),new k(30,new _(10,24),new _(35,25)),new k(30,new _(19,15),new _(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new k(30,new _(17,115),new _(1,116)),new k(28,new _(14,46),new _(21,47)),new k(30,new _(29,24),new _(19,25)),new k(30,new _(11,15),new _(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new k(30,new _(13,115),new _(6,116)),new k(28,new _(14,46),new _(23,47)),new k(30,new _(44,24),new _(7,25)),new k(30,new _(59,16),new _(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new k(30,new _(12,121),new _(7,122)),new k(28,new _(12,47),new _(26,48)),new k(30,new _(39,24),new _(14,25)),new k(30,new _(22,15),new _(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new k(30,new _(6,121),new _(14,122)),new k(28,new _(6,47),new _(34,48)),new k(30,new _(46,24),new _(10,25)),new k(30,new _(2,15),new _(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new k(30,new _(17,122),new _(4,123)),new k(28,new _(29,46),new _(14,47)),new k(30,new _(49,24),new _(10,25)),new k(30,new _(24,15),new _(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new k(30,new _(4,122),new _(18,123)),new k(28,new _(13,46),new _(32,47)),new k(30,new _(48,24),new _(14,25)),new k(30,new _(42,15),new _(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new k(30,new _(20,117),new _(4,118)),new k(28,new _(40,47),new _(7,48)),new k(30,new _(43,24),new _(22,25)),new k(30,new _(10,15),new _(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new k(30,new _(19,118),new _(6,119)),new k(28,new _(18,47),new _(31,48)),new k(30,new _(34,24),new _(34,25)),new k(30,new _(20,15),new _(61,16)))],t})(),Oe;(function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"})(Oe||(Oe={}));var fi=(function(){function t(e,r){this.value=e,this.isMasked=r}return t.prototype.unmaskBitMatrix=function(e,r){for(var n=0;n<r;n++)for(var a=0;a<r;a++)this.isMasked(n,a)&&e.flip(a,n)},t.values=new Map([[Oe.DATA_MASK_000,new t(Oe.DATA_MASK_000,function(e,r){return(e+r&1)===0})],[Oe.DATA_MASK_001,new t(Oe.DATA_MASK_001,function(e,r){return(e&1)===0})],[Oe.DATA_MASK_010,new t(Oe.DATA_MASK_010,function(e,r){return r%3===0})],[Oe.DATA_MASK_011,new t(Oe.DATA_MASK_011,function(e,r){return(e+r)%3===0})],[Oe.DATA_MASK_100,new t(Oe.DATA_MASK_100,function(e,r){return(Math.floor(e/2)+Math.floor(r/3)&1)===0})],[Oe.DATA_MASK_101,new t(Oe.DATA_MASK_101,function(e,r){return e*r%6===0})],[Oe.DATA_MASK_110,new t(Oe.DATA_MASK_110,function(e,r){return e*r%6<3})],[Oe.DATA_MASK_111,new t(Oe.DATA_MASK_111,function(e,r){return(e+r+e*r%3&1)===0})]]),t})(),iu=(function(){function t(e){var r=e.getHeight();if(r<21||(r&3)!==1)throw new P;this.bitMatrix=e}return t.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,r=0;r<6;r++)e=this.copyBit(r,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);for(var a=this.bitMatrix.getHeight(),i=0,o=a-7,n=a-1;n>=o;n--)i=this.copyBit(8,n,i);for(var r=a-8;r<a;r++)i=this.copyBit(r,8,i);if(this.parsedFormatInfo=ls.decodeFormatInformation(e,i),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new P},t.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),r=Math.floor((e-17)/4);if(r<=6)return Ot.getVersionForNumber(r);for(var n=0,a=e-11,i=5;i>=0;i--)for(var o=e-9;o>=a;o--)n=this.copyBit(o,i,n);var s=Ot.decodeVersionInformation(n);if(s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;n=0;for(var o=5;o>=0;o--)for(var i=e-9;i>=a;i--)n=this.copyBit(o,i,n);if(s=Ot.decodeVersionInformation(n),s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;throw new P},t.prototype.copyBit=function(e,r,n){var a=this.isMirror?this.bitMatrix.get(r,e):this.bitMatrix.get(e,r);return a?n<<1|1:n<<1},t.prototype.readCodewords=function(){var e=this.readFormatInformation(),r=this.readVersion(),n=fi.values.get(e.getDataMask()),a=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,a);for(var i=r.buildFunctionPattern(),o=!0,s=new Uint8Array(r.getTotalCodewords()),l=0,c=0,u=0,f=a-1;f>0;f-=2){f===6&&f--;for(var h=0;h<a;h++)for(var p=o?a-1-h:h,x=0;x<2;x++)i.get(f-x,p)||(u++,c<<=1,this.bitMatrix.get(f-x,p)&&(c|=1),u===8&&(s[l++]=c,u=0,c=0));o=!o}if(l!==r.getTotalCodewords())throw new P;return s},t.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=fi.values.get(this.parsedFormatInfo.getDataMask()),r=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,r)}},t.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},t.prototype.mirror=function(){for(var e=this.bitMatrix,r=0,n=e.getWidth();r<n;r++)for(var a=r+1,i=e.getHeight();a<i;a++)e.get(r,a)!==e.get(a,r)&&(e.flip(a,r),e.flip(r,a))},t})(),hi=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ou=(function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r,n){var a,i,o,s;if(e.length!==r.getTotalCodewords())throw new U;var l=r.getECBlocksForLevel(n),c=0,u=l.getECBlocks();try{for(var f=hi(u),h=f.next();!h.done;h=f.next()){var p=h.value;c+=p.getCount()}}catch(G){a={error:G}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(a)throw a.error}}var x=new Array(c),m=0;try{for(var g=hi(u),y=g.next();!y.done;y=g.next())for(var p=y.value,b=0;b<p.getCount();b++){var w=p.getDataCodewords(),C=l.getECCodewordsPerBlock()+w;x[m++]=new t(w,new Uint8Array(C))}}catch(G){o={error:G}}finally{try{y&&!y.done&&(s=g.return)&&s.call(g)}finally{if(o)throw o.error}}for(var A=x[0].codewords.length,N=x.length-1;N>=0;){var E=x[N].codewords.length;if(E===A)break;N--}N++;for(var S=A-l.getECCodewordsPerBlock(),I=0,b=0;b<S;b++)for(var O=0;O<m;O++)x[O].codewords[b]=e[I++];for(var O=N;O<m;O++)x[O].codewords[S]=e[I++];for(var j=x[0].codewords.length,b=S;b<j;b++)for(var O=0;O<m;O++){var M=O<N?b:b+1;x[O].codewords[M]=e[I++]}return x},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t})(),Je;(function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"})(Je||(Je={}));var xe=(function(){function t(e,r,n,a){this.value=e,this.stringValue=r,this.characterCountBitsForVersions=n,this.bits=a,t.FOR_BITS.set(a,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var r=t.FOR_BITS.get(e);if(r===void 0)throw new U;return r},t.prototype.getCharacterCountBits=function(e){var r=e.getVersionNumber(),n;return r<=9?n=0:r<=26?n=1:n=2,this.characterCountBitsForVersions[n]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t(Je.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t(Je.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t(Je.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t(Je.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t(Je.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t(Je.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t(Je.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t(Je.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t(Je.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t(Je.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t})(),su=(function(){function t(){}return t.decode=function(e,r,n,a){var i=new ss(e),o=new z,s=new Array,l=-1,c=-1;try{var u=null,f=!1,h=void 0;do{if(i.available()<4)h=xe.TERMINATOR;else{var p=i.readBits(4);h=xe.forBits(p)}switch(h){case xe.TERMINATOR:break;case xe.FNC1_FIRST_POSITION:case xe.FNC1_SECOND_POSITION:f=!0;break;case xe.STRUCTURED_APPEND:if(i.available()<16)throw new P;l=i.readBits(8),c=i.readBits(8);break;case xe.ECI:var x=t.parseECIValue(i);if(u=Se.getCharacterSetECIByValue(x),u===null)throw new P;break;case xe.HANZI:var m=i.readBits(4),g=i.readBits(h.getCharacterCountBits(r));m===t.GB2312_SUBSET&&t.decodeHanziSegment(i,o,g);break;default:var y=i.readBits(h.getCharacterCountBits(r));switch(h){case xe.NUMERIC:t.decodeNumericSegment(i,o,y);break;case xe.ALPHANUMERIC:t.decodeAlphanumericSegment(i,o,y,f);break;case xe.BYTE:t.decodeByteSegment(i,o,y,u,s,a);break;case xe.KANJI:t.decodeKanjiSegment(i,o,y);break;default:throw new P}break}}while(h!==xe.TERMINATOR)}catch{throw new P}return new an(e,o.toString(),s.length===0?null:s,n===null?null:n.toString(),l,c)},t.decodeHanziSegment=function(e,r,n){if(n*13>e.available())throw new P;for(var a=new Uint8Array(2*n),i=0;n>0;){var o=e.readBits(13),s=o/96<<8&4294967295|o%96;s<959?s+=41377:s+=42657,a[i]=s>>8&255,a[i+1]=s&255,i+=2,n--}try{r.append(et.decode(a,Q.GB2312))}catch(l){throw new P(l)}},t.decodeKanjiSegment=function(e,r,n){if(n*13>e.available())throw new P;for(var a=new Uint8Array(2*n),i=0;n>0;){var o=e.readBits(13),s=o/192<<8&4294967295|o%192;s<7936?s+=33088:s+=49472,a[i]=s>>8,a[i+1]=s,i+=2,n--}try{r.append(et.decode(a,Q.SHIFT_JIS))}catch(l){throw new P(l)}},t.decodeByteSegment=function(e,r,n,a,i,o){if(8*n>e.available())throw new P;for(var s=new Uint8Array(n),l=0;l<n;l++)s[l]=e.readBits(8);var c;a===null?c=Q.guessEncoding(s,o):c=a.getName();try{r.append(et.decode(s,c))}catch(u){throw new P(u)}i.push(s)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new P;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,r,n,a){for(var i=r.length();n>1;){if(e.available()<11)throw new P;var o=e.readBits(11);r.append(t.toAlphaNumericChar(Math.floor(o/45))),r.append(t.toAlphaNumericChar(o%45)),n-=2}if(n===1){if(e.available()<6)throw new P;r.append(t.toAlphaNumericChar(e.readBits(6)))}if(a)for(var s=i;s<r.length();s++)r.charAt(s)==="%"&&(s<r.length()-1&&r.charAt(s+1)==="%"?r.deleteCharAt(s+1):r.setCharAt(s,""))},t.decodeNumericSegment=function(e,r,n){for(;n>=3;){if(e.available()<10)throw new P;var a=e.readBits(10);if(a>=1e3)throw new P;r.append(t.toAlphaNumericChar(Math.floor(a/100))),r.append(t.toAlphaNumericChar(Math.floor(a/10)%10)),r.append(t.toAlphaNumericChar(a%10)),n-=3}if(n===2){if(e.available()<7)throw new P;var i=e.readBits(7);if(i>=100)throw new P;r.append(t.toAlphaNumericChar(Math.floor(i/10))),r.append(t.toAlphaNumericChar(i%10))}else if(n===1){if(e.available()<4)throw new P;var o=e.readBits(4);if(o>=10)throw new P;r.append(t.toAlphaNumericChar(o))}},t.parseECIValue=function(e){var r=e.readBits(8);if((r&128)===0)return r&127;if((r&192)===128){var n=e.readBits(8);return(r&63)<<8&4294967295|n}if((r&224)===192){var a=e.readBits(16);return(r&31)<<16&4294967295|a}throw new P},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t})(),ds=(function(){function t(e){this.mirrored=e}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var r=e[0];e[0]=e[2],e[2]=r}},t})(),pi=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lu=(function(){function t(){this.rsDecoder=new on(He.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(e,r){return this.decodeBitMatrix(ut.parseFromBooleanArray(e),r)},t.prototype.decodeBitMatrix=function(e,r){var n=new iu(e),a=null;try{return this.decodeBitMatrixParser(n,r)}catch(o){a=o}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var i=this.decodeBitMatrixParser(n,r);return i.setOther(new ds(!0)),i}catch(o){throw a!==null?a:o}},t.prototype.decodeBitMatrixParser=function(e,r){var n,a,i,o,s=e.readVersion(),l=e.readFormatInformation().getErrorCorrectionLevel(),c=e.readCodewords(),u=ou.getDataBlocks(c,s,l),f=0;try{for(var h=pi(u),p=h.next();!p.done;p=h.next()){var x=p.value;f+=x.getNumDataCodewords()}}catch(N){n={error:N}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(n)throw n.error}}var m=new Uint8Array(f),g=0;try{for(var y=pi(u),b=y.next();!b.done;b=y.next()){var x=b.value,w=x.getCodewords(),C=x.getNumDataCodewords();this.correctErrors(w,C);for(var A=0;A<C;A++)m[g++]=w[A]}}catch(N){i={error:N}}finally{try{b&&!b.done&&(o=y.return)&&o.call(y)}finally{if(i)throw i.error}}return su.decode(m,s,l,r)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new _e}for(var a=0;a<r;a++)e[a]=n[a]},t})(),du=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),cu=(function(t){du(e,t);function e(r,n,a){var i=t.call(this,r,n)||this;return i.estimatedModuleSize=a,i}return e.prototype.aboutEquals=function(r,n,a){if(Math.abs(n-this.getY())<=r&&Math.abs(a-this.getX())<=r){var i=Math.abs(r-this.estimatedModuleSize);return i<=1||i<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,a){var i=(this.getX()+n)/2,o=(this.getY()+r)/2,s=(this.estimatedModuleSize+a)/2;return new e(i,o,s)},e})(B),uu=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fu=(function(){function t(e,r,n,a,i,o,s){this.image=e,this.startX=r,this.startY=n,this.width=a,this.height=i,this.moduleSize=o,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var e=this.startX,r=this.height,n=this.width,a=e+n,i=this.startY+r/2,o=new Int32Array(3),s=this.image,l=0;l<r;l++){var c=i+((l&1)===0?Math.floor((l+1)/2):-Math.floor((l+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var u=e;u<a&&!s.get(u,c);)u++;for(var f=0;u<a;){if(s.get(u,c))if(f===1)o[1]++;else if(f===2){if(this.foundPatternCross(o)){var h=this.handlePossibleCenter(o,c,u);if(h!==null)return h}o[0]=o[2],o[1]=1,o[2]=0,f=1}else o[++f]++;else f===1&&f++,o[f]++;u++}if(this.foundPatternCross(o)){var h=this.handlePossibleCenter(o,c,a);if(h!==null)return h}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new T},t.centerFromEnd=function(e,r){return r-e[2]-e[1]/2},t.prototype.foundPatternCross=function(e){for(var r=this.moduleSize,n=r/2,a=0;a<3;a++)if(Math.abs(r-e[a])>=n)return!1;return!0},t.prototype.crossCheckVertical=function(e,r,n,a){var i=this.image,o=i.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var l=e;l>=0&&i.get(r,l)&&s[1]<=n;)s[1]++,l--;if(l<0||s[1]>n)return NaN;for(;l>=0&&!i.get(r,l)&&s[0]<=n;)s[0]++,l--;if(s[0]>n)return NaN;for(l=e+1;l<o&&i.get(r,l)&&s[1]<=n;)s[1]++,l++;if(l===o||s[1]>n)return NaN;for(;l<o&&!i.get(r,l)&&s[2]<=n;)s[2]++,l++;if(s[2]>n)return NaN;var c=s[0]+s[1]+s[2];return 5*Math.abs(c-a)>=2*a?NaN:this.foundPatternCross(s)?t.centerFromEnd(s,l):NaN},t.prototype.handlePossibleCenter=function(e,r,n){var a,i,o=e[0]+e[1]+e[2],s=t.centerFromEnd(e,n),l=this.crossCheckVertical(r,s,2*e[1],o);if(!isNaN(l)){var c=(e[0]+e[1]+e[2])/3;try{for(var u=uu(this.possibleCenters),f=u.next();!f.done;f=u.next()){var h=f.value;if(h.aboutEquals(c,l,s))return h.combineEstimate(l,s,c)}}catch(x){a={error:x}}finally{try{f&&!f.done&&(i=u.return)&&i.call(u)}finally{if(a)throw a.error}}var p=new cu(s,l,c);this.possibleCenters.push(p),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(p)}return null},t})(),hu=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),pu=(function(t){hu(e,t);function e(r,n,a,i){var o=t.call(this,r,n)||this;return o.estimatedModuleSize=a,o.count=i,i===void 0&&(o.count=1),o}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(r,n,a){if(Math.abs(n-this.getY())<=r&&Math.abs(a-this.getX())<=r){var i=Math.abs(r-this.estimatedModuleSize);return i<=1||i<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,a){var i=this.count+1,o=(this.count*this.getX()+n)/i,s=(this.count*this.getY()+r)/i,l=(this.count*this.estimatedModuleSize+a)/i;return new e(o,s,l,i)},e})(B),xu=(function(){function t(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t})(),Yt=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mu=(function(){function t(e,r){this.image=e,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var r=e!=null&&e.get(fe.TRY_HARDER)!==void 0,n=e!=null&&e.get(fe.PURE_BARCODE)!==void 0,a=this.image,i=a.getHeight(),o=a.getWidth(),s=Math.floor(3*i/(4*t.MAX_MODULES));(s<t.MIN_SKIP||r)&&(s=t.MIN_SKIP);for(var l=!1,c=new Int32Array(5),u=s-1;u<i&&!l;u+=s){c[0]=0,c[1]=0,c[2]=0,c[3]=0,c[4]=0;for(var f=0,h=0;h<o;h++)if(a.get(h,u))(f&1)===1&&f++,c[f]++;else if((f&1)===0)if(f===4)if(t.foundPatternCross(c)){var p=this.handlePossibleCenter(c,u,h,n);if(p===!0)if(s=2,this.hasSkipped===!0)l=this.haveMultiplyConfirmedCenters();else{var x=this.findRowSkip();x>c[2]&&(u+=x-c[2]-s,h=o-1)}else{c[0]=c[2],c[1]=c[3],c[2]=c[4],c[3]=1,c[4]=0,f=3;continue}f=0,c[0]=0,c[1]=0,c[2]=0,c[3]=0,c[4]=0}else c[0]=c[2],c[1]=c[3],c[2]=c[4],c[3]=1,c[4]=0,f=3;else c[++f]++;else c[f]++;if(t.foundPatternCross(c)){var p=this.handlePossibleCenter(c,u,o,n);p===!0&&(s=c[0],this.hasSkipped&&(l=this.haveMultiplyConfirmedCenters()))}}var m=this.selectBestPatterns();return B.orderBestPatterns(m),new xu(m)},t.centerFromEnd=function(e,r){return r-e[4]-e[3]-e[2]/2},t.foundPatternCross=function(e){for(var r=0,n=0;n<5;n++){var a=e[n];if(a===0)return!1;r+=a}if(r<7)return!1;var i=r/7,o=i/2;return Math.abs(i-e[0])<o&&Math.abs(i-e[1])<o&&Math.abs(3*i-e[2])<3*o&&Math.abs(i-e[3])<o&&Math.abs(i-e[4])<o},t.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},t.prototype.crossCheckDiagonal=function(e,r,n,a){for(var i=this.getCrossCheckStateCount(),o=0,s=this.image;e>=o&&r>=o&&s.get(r-o,e-o);)i[2]++,o++;if(e<o||r<o)return!1;for(;e>=o&&r>=o&&!s.get(r-o,e-o)&&i[1]<=n;)i[1]++,o++;if(e<o||r<o||i[1]>n)return!1;for(;e>=o&&r>=o&&s.get(r-o,e-o)&&i[0]<=n;)i[0]++,o++;if(i[0]>n)return!1;var l=s.getHeight(),c=s.getWidth();for(o=1;e+o<l&&r+o<c&&s.get(r+o,e+o);)i[2]++,o++;if(e+o>=l||r+o>=c)return!1;for(;e+o<l&&r+o<c&&!s.get(r+o,e+o)&&i[3]<n;)i[3]++,o++;if(e+o>=l||r+o>=c||i[3]>=n)return!1;for(;e+o<l&&r+o<c&&s.get(r+o,e+o)&&i[4]<n;)i[4]++,o++;if(i[4]>=n)return!1;var u=i[0]+i[1]+i[2]+i[3]+i[4];return Math.abs(u-a)<2*a&&t.foundPatternCross(i)},t.prototype.crossCheckVertical=function(e,r,n,a){for(var i=this.image,o=i.getHeight(),s=this.getCrossCheckStateCount(),l=e;l>=0&&i.get(r,l);)s[2]++,l--;if(l<0)return NaN;for(;l>=0&&!i.get(r,l)&&s[1]<=n;)s[1]++,l--;if(l<0||s[1]>n)return NaN;for(;l>=0&&i.get(r,l)&&s[0]<=n;)s[0]++,l--;if(s[0]>n)return NaN;for(l=e+1;l<o&&i.get(r,l);)s[2]++,l++;if(l===o)return NaN;for(;l<o&&!i.get(r,l)&&s[3]<n;)s[3]++,l++;if(l===o||s[3]>=n)return NaN;for(;l<o&&i.get(r,l)&&s[4]<n;)s[4]++,l++;if(s[4]>=n)return NaN;var c=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(c-a)>=2*a?NaN:t.foundPatternCross(s)?t.centerFromEnd(s,l):NaN},t.prototype.crossCheckHorizontal=function(e,r,n,a){for(var i=this.image,o=i.getWidth(),s=this.getCrossCheckStateCount(),l=e;l>=0&&i.get(l,r);)s[2]++,l--;if(l<0)return NaN;for(;l>=0&&!i.get(l,r)&&s[1]<=n;)s[1]++,l--;if(l<0||s[1]>n)return NaN;for(;l>=0&&i.get(l,r)&&s[0]<=n;)s[0]++,l--;if(s[0]>n)return NaN;for(l=e+1;l<o&&i.get(l,r);)s[2]++,l++;if(l===o)return NaN;for(;l<o&&!i.get(l,r)&&s[3]<n;)s[3]++,l++;if(l===o||s[3]>=n)return NaN;for(;l<o&&i.get(l,r)&&s[4]<n;)s[4]++,l++;if(s[4]>=n)return NaN;var c=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(c-a)>=a?NaN:t.foundPatternCross(s)?t.centerFromEnd(s,l):NaN},t.prototype.handlePossibleCenter=function(e,r,n,a){var i=e[0]+e[1]+e[2]+e[3]+e[4],o=t.centerFromEnd(e,n),s=this.crossCheckVertical(r,Math.floor(o),e[2],i);if(!isNaN(s)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(s),e[2],i),!isNaN(o)&&(!a||this.crossCheckDiagonal(Math.floor(s),Math.floor(o),e[2],i)))){for(var l=i/7,c=!1,u=this.possibleCenters,f=0,h=u.length;f<h;f++){var p=u[f];if(p.aboutEquals(l,s,o)){u[f]=p.combineEstimate(s,o,l),c=!0;break}}if(!c){var x=new pu(o,s,l);u.push(x),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(x)}return!0}return!1},t.prototype.findRowSkip=function(){var e,r,n=this.possibleCenters.length;if(n<=1)return 0;var a=null;try{for(var i=Yt(this.possibleCenters),o=i.next();!o.done;o=i.next()){var s=o.value;if(s.getCount()>=t.CENTER_QUORUM)if(a==null)a=s;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-s.getX())-Math.abs(a.getY()-s.getY()))/2)}}catch(l){e={error:l}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,r,n,a,i=0,o=0,s=this.possibleCenters.length;try{for(var l=Yt(this.possibleCenters),c=l.next();!c.done;c=l.next()){var u=c.value;u.getCount()>=t.CENTER_QUORUM&&(i++,o+=u.getEstimatedModuleSize())}}catch(m){e={error:m}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}if(i<3)return!1;var f=o/s,h=0;try{for(var p=Yt(this.possibleCenters),x=p.next();!x.done;x=p.next()){var u=x.value;h+=Math.abs(u.getEstimatedModuleSize()-f)}}catch(m){n={error:m}}finally{try{x&&!x.done&&(a=p.return)&&a.call(p)}finally{if(n)throw n.error}}return h<=.05*o},t.prototype.selectBestPatterns=function(){var e,r,n,a,i=this.possibleCenters.length;if(i<3)throw new T;var o=this.possibleCenters,s;if(i>3){var l=0,c=0;try{for(var u=Yt(this.possibleCenters),f=u.next();!f.done;f=u.next()){var h=f.value,p=h.getEstimatedModuleSize();l+=p,c+=p*p}}catch(A){e={error:A}}finally{try{f&&!f.done&&(r=u.return)&&r.call(u)}finally{if(e)throw e.error}}s=l/i;var x=Math.sqrt(c/i-s*s);o.sort(function(A,N){var E=Math.abs(N.getEstimatedModuleSize()-s),S=Math.abs(A.getEstimatedModuleSize()-s);return E<S?-1:E>S?1:0});for(var m=Math.max(.2*s,x),g=0;g<o.length&&o.length>3;g++){var y=o[g];Math.abs(y.getEstimatedModuleSize()-s)>m&&(o.splice(g,1),g--)}}if(o.length>3){var l=0;try{for(var b=Yt(o),w=b.next();!w.done;w=b.next()){var C=w.value;l+=C.getEstimatedModuleSize()}}catch(N){n={error:N}}finally{try{w&&!w.done&&(a=b.return)&&a.call(b)}finally{if(n)throw n.error}}s=l/o.length,o.sort(function(N,E){if(E.getCount()===N.getCount()){var S=Math.abs(E.getEstimatedModuleSize()-s),I=Math.abs(N.getEstimatedModuleSize()-s);return S<I?1:S>I?-1:0}else return E.getCount()-N.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t})(),gu=(function(){function t(e){this.image=e}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(fe.NEED_RESULT_POINT_CALLBACK);var r=new mu(this.image,this.resultPointCallback),n=r.find(e);return this.processFinderPatternInfo(n)},t.prototype.processFinderPatternInfo=function(e){var r=e.getTopLeft(),n=e.getTopRight(),a=e.getBottomLeft(),i=this.calculateModuleSize(r,n,a);if(i<1)throw new T("No pattern found in proccess finder.");var o=t.computeDimension(r,n,a,i),s=Ot.getProvisionalVersionForDimension(o),l=s.getDimensionForVersion()-7,c=null;if(s.getAlignmentPatternCenters().length>0)for(var u=n.getX()-r.getX()+a.getX(),f=n.getY()-r.getY()+a.getY(),h=1-3/l,p=Math.floor(r.getX()+h*(u-r.getX())),x=Math.floor(r.getY()+h*(f-r.getY())),m=4;m<=16;m<<=1)try{c=this.findAlignmentInRegion(i,p,x,m);break}catch(w){if(!(w instanceof T))throw w}var g=t.createTransform(r,n,a,c,o),y=t.sampleGrid(this.image,g,o),b;return c===null?b=[a,r,n]:b=[a,r,n,c],new ua(y,b)},t.createTransform=function(e,r,n,a,i){var o=i-3.5,s,l,c,u;return a!==null?(s=a.getX(),l=a.getY(),c=o-3,u=c):(s=r.getX()-e.getX()+n.getX(),l=r.getY()-e.getY()+n.getY(),c=o,u=o),ns.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,c,u,3.5,o,e.getX(),e.getY(),r.getX(),r.getY(),s,l,n.getX(),n.getY())},t.sampleGrid=function(e,r,n){var a=fa.getInstance();return a.sampleGridWithTransform(e,n,n,r)},t.computeDimension=function(e,r,n,a){var i=ae.round(B.distance(e,r)/a),o=ae.round(B.distance(e,n)/a),s=Math.floor((i+o)/2)+7;switch(s&3){case 0:s++;break;case 2:s--;break;case 3:throw new T("Dimensions could be not found.")}return s},t.prototype.calculateModuleSize=function(e,r,n){return(this.calculateModuleSizeOneWay(e,r)+this.calculateModuleSizeOneWay(e,n))/2},t.prototype.calculateModuleSizeOneWay=function(e,r){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(r.getX()),Math.floor(r.getY())),a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?a/7:isNaN(a)?n/7:(n+a)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,r,n,a){var i=this.sizeOfBlackWhiteBlackRun(e,r,n,a),o=1,s=e-(n-e);s<0?(o=e/(e-s),s=0):s>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(s-e),s=this.image.getWidth()-1);var l=Math.floor(r-(a-r)*o);return o=1,l<0?(o=r/(r-l),l=0):l>=this.image.getHeight()&&(o=(this.image.getHeight()-1-r)/(l-r),l=this.image.getHeight()-1),s=Math.floor(e+(s-e)*o),i+=this.sizeOfBlackWhiteBlackRun(e,r,s,l),i-1},t.prototype.sizeOfBlackWhiteBlackRun=function(e,r,n,a){var i=Math.abs(a-r)>Math.abs(n-e);if(i){var o=e;e=r,r=o,o=n,n=a,a=o}for(var s=Math.abs(n-e),l=Math.abs(a-r),c=-s/2,u=e<n?1:-1,f=r<a?1:-1,h=0,p=n+u,x=e,m=r;x!==p;x+=u){var g=i?m:x,y=i?x:m;if(h===1===this.image.get(g,y)){if(h===2)return ae.distance(x,m,e,r);h++}if(c+=l,c>0){if(m===a)break;m+=f,c-=s}}return h===2?ae.distance(n+u,a,e,r):NaN},t.prototype.findAlignmentInRegion=function(e,r,n,a){var i=Math.floor(a*e),o=Math.max(0,r-i),s=Math.min(this.image.getWidth()-1,r+i);if(s-o<e*3)throw new T("Alignment top exceeds estimated module size.");var l=Math.max(0,n-i),c=Math.min(this.image.getHeight()-1,n+i);if(c-l<e*3)throw new T("Alignment bottom exceeds estimated module size.");var u=new fu(this.image,o,l,s-o,c-l,e,this.resultPointCallback);return u.find()},t})(),Gr=(function(){function t(){this.decoder=new lu}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,r){var n,a;if(r!=null&&r.get(fe.PURE_BARCODE)!==void 0){var i=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(i,r),a=t.NO_POINTS}else{var o=new gu(e.getBlackMatrix()).detect(r);n=this.decoder.decodeBitMatrix(o.getBits(),r),a=o.getPoints()}n.getOther()instanceof ds&&n.getOther().applyMirroredCorrection(a);var s=new Le(n.getText(),n.getRawBytes(),void 0,a,L.QR_CODE,void 0),l=n.getByteSegments();l!==null&&s.putMetadata(Pe.BYTE_SEGMENTS,l);var c=n.getECLevel();return c!==null&&s.putMetadata(Pe.ERROR_CORRECTION_LEVEL,c),n.hasStructuredAppend()&&(s.putMetadata(Pe.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),s.putMetadata(Pe.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),s},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r===null||n===null)throw new T;var a=this.moduleSize(r,e),i=r[1],o=n[1],s=r[0],l=n[0];if(s>=l||i>=o)throw new T;if(o-i!==l-s&&(l=s+(o-i),l>=e.getWidth()))throw new T;var c=Math.round((l-s+1)/a),u=Math.round((o-i+1)/a);if(c<=0||u<=0)throw new T;if(u!==c)throw new T;var f=Math.floor(a/2);i+=f,s+=f;var h=s+Math.floor((c-1)*a)-l;if(h>0){if(h>f)throw new T;s-=h}var p=i+Math.floor((u-1)*a)-o;if(p>0){if(p>f)throw new T;i-=p}for(var x=new ut(c,u),m=0;m<u;m++)for(var g=i+Math.floor(m*a),y=0;y<c;y++)e.get(s+Math.floor(y*a),g)&&x.set(y,m);return x},t.moduleSize=function(e,r){for(var n=r.getHeight(),a=r.getWidth(),i=e[0],o=e[1],s=!0,l=0;i<a&&o<n;){if(s!==r.get(i,o)){if(++l===5)break;s=!s}i++,o++}if(i===a||o===n)throw new T;return(i-e[0])/7},t.NO_POINTS=new Array,t})(),vu=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},re=(function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(e){return ae.sum(e)},t.toIntArray=function(e){var r,n;if(e==null||!e.length)return t.EMPTY_INT_ARRAY;var a=new Int32Array(e.length),i=0;try{for(var o=vu(e),s=o.next();!s.done;s=o.next()){var l=s.value;a[i++]=l}}catch(c){r={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a},t.getCodeword=function(e){var r=ke.binarySearch(t.SYMBOL_TABLE,e&262143);return r<0?-1:(t.CODEWORD_TABLE[r]-1)%t.NUMBER_OF_CODEWORDS},t.NUMBER_OF_CODEWORDS=929,t.MAX_CODEWORDS_IN_BARCODE=t.NUMBER_OF_CODEWORDS-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t})(),bu=(function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t})(),yu=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wu=(function(){function t(){}return t.detectMultiple=function(e,r,n){var a=e.getBlackMatrix(),i=t.detect(n,a);return i.length||(a=a.clone(),a.rotate180(),i=t.detect(n,a)),new bu(a,i)},t.detect=function(e,r){for(var n,a,i=new Array,o=0,s=0,l=!1;o<r.getHeight();){var c=t.findVertices(r,o,s);if(c[0]==null&&c[3]==null){if(!l)break;l=!1,s=0;try{for(var u=(n=void 0,yu(i)),f=u.next();!f.done;f=u.next()){var h=f.value;h[1]!=null&&(o=Math.trunc(Math.max(o,h[1].getY()))),h[3]!=null&&(o=Math.max(o,Math.trunc(h[3].getY())))}}catch(p){n={error:p}}finally{try{f&&!f.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}o+=t.ROW_STEP;continue}if(l=!0,i.push(c),!e)break;c[2]!=null?(s=Math.trunc(c[2].getX()),o=Math.trunc(c[2].getY())):(s=Math.trunc(c[4].getX()),o=Math.trunc(c[4].getY()))}return i},t.findVertices=function(e,r,n){var a=e.getHeight(),i=e.getWidth(),o=new Array(8);return t.copyToResult(o,t.findRowsWithPattern(e,a,i,r,n,t.START_PATTERN),t.INDEXES_START_PATTERN),o[4]!=null&&(n=Math.trunc(o[4].getX()),r=Math.trunc(o[4].getY())),t.copyToResult(o,t.findRowsWithPattern(e,a,i,r,n,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),o},t.copyToResult=function(e,r,n){for(var a=0;a<n.length;a++)e[n[a]]=r[a]},t.findRowsWithPattern=function(e,r,n,a,i,o){for(var s=new Array(4),l=!1,c=new Int32Array(o.length);a<r;a+=t.ROW_STEP){var u=t.findGuardPattern(e,i,a,n,!1,o,c);if(u!=null){for(;a>0;){var f=t.findGuardPattern(e,i,--a,n,!1,o,c);if(f!=null)u=f;else{a++;break}}s[0]=new B(u[0],a),s[1]=new B(u[1],a),l=!0;break}}var h=a+1;if(l){for(var p=0,f=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);h<r;h++){var u=t.findGuardPattern(e,f[0],h,n,!1,o,c);if(u!=null&&Math.abs(f[0]-u[0])<t.MAX_PATTERN_DRIFT&&Math.abs(f[1]-u[1])<t.MAX_PATTERN_DRIFT)f=u,p=0;else{if(p>t.SKIPPED_ROW_COUNT_MAX)break;p++}}h-=p+1,s[2]=new B(f[0],h),s[3]=new B(f[1],h)}return h-a<t.BARCODE_MIN_HEIGHT&&ke.fill(s,null),s},t.findGuardPattern=function(e,r,n,a,i,o,s){ke.fillWithin(s,0,s.length,0);for(var l=r,c=0;e.get(l,n)&&l>0&&c++<t.MAX_PIXEL_DRIFT;)l--;for(var u=l,f=0,h=o.length,p=i;u<a;u++){var x=e.get(u,n);if(x!==p)s[f]++;else{if(f===h-1){if(t.patternMatchVariance(s,o,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([l,u]);l+=s[0]+s[1],he.arraycopy(s,2,s,0,f-1),s[f-1]=0,s[f]=0,f--}else f++;s[f]=1,p=!p}}return f===h-1&&t.patternMatchVariance(s,o,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([l,u-1]):null},t.patternMatchVariance=function(e,r,n){for(var a=e.length,i=0,o=0,s=0;s<a;s++)i+=e[s],o+=r[s];if(i<o)return 1/0;var l=i/o;n*=l;for(var c=0,u=0;u<a;u++){var f=e[u],h=r[u]*l,p=f>h?f-h:h-f;if(p>n)return 1/0;c+=p}return c/i},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t})(),_u=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},It=(function(){function t(e,r){if(r.length===0)throw new U;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var a=1;a<n&&r[a]===0;)a++;a===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-a),he.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){var r,n;if(e===0)return this.getCoefficient(0);if(e===1){var a=0;try{for(var i=_u(this.coefficients),o=i.next();!o.done;o=i.next()){var s=o.value;a=this.field.add(a,s)}}catch(f){r={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a}for(var l=this.coefficients[0],c=this.coefficients.length,u=1;u<c;u++)l=this.field.add(this.field.multiply(e,l),this.coefficients[u]);return l},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new U("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var a=r;r=n,n=a}var i=new Int32Array(n.length),o=n.length-r.length;he.arraycopy(n,0,i,0,o);for(var s=o;s<n.length;s++)i[s]=this.field.add(r[s-o],n[s]);return new t(this.field,i)},t.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new U("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new U("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var r=this.coefficients,n=r.length,a=e.coefficients,i=a.length,o=new Int32Array(n+i-1),s=0;s<n;s++)for(var l=r[s],c=0;c<i;c++)o[s+c]=this.field.add(o[s+c],this.field.multiply(l,a[c]));return new t(this.field,o)},t.prototype.negative=function(){for(var e=this.coefficients.length,r=new Int32Array(e),n=0;n<e;n++)r[n]=this.field.subtract(0,this.coefficients[n]);return new t(this.field,r)},t.prototype.multiplyScalar=function(e){if(e===0)return new t(this.field,new Int32Array([0]));if(e===1)return this;for(var r=this.coefficients.length,n=new Int32Array(r),a=0;a<r;a++)n[a]=this.field.multiply(this.coefficients[a],e);return new t(this.field,n)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new U;if(r===0)return new t(this.field,new Int32Array([0]));for(var n=this.coefficients.length,a=new Int32Array(n+e),i=0;i<n;i++)a[i]=this.field.multiply(this.coefficients[i],r);return new t(this.field,a)},t.prototype.toString=function(){for(var e=new z,r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(r===0||n!==1)&&e.append(n),r!==0&&(r===1?e.append("x"):(e.append("x^"),e.append(r))))}return e.toString()},t})(),Au=(function(){function t(){}return t.prototype.add=function(e,r){return(e+r)%this.modulus},t.prototype.subtract=function(e,r){return(this.modulus+e-r)%this.modulus},t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new U;return this.logTable[e]},t.prototype.inverse=function(e){if(e===0)throw new rs;return this.expTable[this.modulus-this.logTable[e]-1]},t.prototype.multiply=function(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(e){return e===this},t})(),Cu=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Eu=(function(t){Cu(e,t);function e(r,n){var a=t.call(this)||this;a.modulus=r,a.expTable=new Int32Array(r),a.logTable=new Int32Array(r);for(var i=1,o=0;o<r;o++)a.expTable[o]=i,i=i*n%r;for(var o=0;o<r-1;o++)a.logTable[a.expTable[o]]=o;return a.zero=new It(a,new Int32Array([0])),a.one=new It(a,new Int32Array([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new U;if(n===0)return this.zero;var a=new Int32Array(r+1);return a[0]=n,new It(this,a)},e.PDF417_GF=new e(re.NUMBER_OF_CODEWORDS,3),e})(Au),Nu=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Su=(function(){function t(){this.field=Eu.PDF417_GF}return t.prototype.decode=function(e,r,n){for(var a,i,o=new It(this.field,e),s=new Int32Array(r),l=!1,c=r;c>0;c--){var u=o.evaluateAt(this.field.exp(c));s[r-c]=u,u!==0&&(l=!0)}if(!l)return 0;var f=this.field.getOne();if(n!=null)try{for(var h=Nu(n),p=h.next();!p.done;p=h.next()){var x=p.value,m=this.field.exp(e.length-1-x),g=new It(this.field,new Int32Array([this.field.subtract(0,m),1]));f=f.multiply(g)}}catch(S){a={error:S}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(a)throw a.error}}for(var y=new It(this.field,s),b=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),y,r),w=b[0],C=b[1],A=this.findErrorLocations(w),N=this.findErrorMagnitudes(C,w,A),c=0;c<A.length;c++){var E=e.length-1-this.field.log(A[c]);if(E<0)throw _e.getChecksumInstance();e[E]=this.field.subtract(e[E],N[c])}return A.length},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var a=e;e=r,r=a}for(var i=e,o=r,s=this.field.getZero(),l=this.field.getOne();o.getDegree()>=Math.round(n/2);){var c=i,u=s;if(i=o,s=l,i.isZero())throw _e.getChecksumInstance();o=c;for(var f=this.field.getZero(),h=i.getCoefficient(i.getDegree()),p=this.field.inverse(h);o.getDegree()>=i.getDegree()&&!o.isZero();){var x=o.getDegree()-i.getDegree(),m=this.field.multiply(o.getCoefficient(o.getDegree()),p);f=f.add(this.field.buildMonomial(x,m)),o=o.subtract(i.multiplyByMonomial(x,m))}l=f.multiply(s).subtract(u).negative()}var g=l.getCoefficient(0);if(g===0)throw _e.getChecksumInstance();var y=this.field.inverse(g),b=l.multiply(y),w=o.multiply(y);return[b,w]},t.prototype.findErrorLocations=function(e){for(var r=e.getDegree(),n=new Int32Array(r),a=0,i=1;i<this.field.getSize()&&a<r;i++)e.evaluateAt(i)===0&&(n[a]=this.field.inverse(i),a++);if(a!==r)throw _e.getChecksumInstance();return n},t.prototype.findErrorMagnitudes=function(e,r,n){for(var a=r.getDegree(),i=new Int32Array(a),o=1;o<=a;o++)i[a-o]=this.field.multiply(o,r.getCoefficient(o));for(var s=new It(this.field,i),l=n.length,c=new Int32Array(l),o=0;o<l;o++){var u=this.field.inverse(n[o]),f=this.field.subtract(0,e.evaluateAt(u)),h=this.field.inverse(s.evaluateAt(u));c[o]=this.field.multiply(f,h)}return c},t})(),Wn=(function(){function t(e,r,n,a,i){e instanceof t?this.constructor_2(e):this.constructor_1(e,r,n,a,i)}return t.prototype.constructor_1=function(e,r,n,a,i){var o=r==null||n==null,s=a==null||i==null;if(o&&s)throw new T;o?(r=new B(0,a.getY()),n=new B(0,i.getY())):s&&(a=new B(e.getWidth()-1,r.getY()),i=new B(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=r,this.bottomLeft=n,this.topRight=a,this.bottomRight=i,this.minX=Math.trunc(Math.min(r.getX(),n.getX())),this.maxX=Math.trunc(Math.max(a.getX(),i.getX())),this.minY=Math.trunc(Math.min(r.getY(),a.getY())),this.maxY=Math.trunc(Math.max(n.getY(),i.getY()))},t.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},t.merge=function(e,r){return e==null?r:r==null?e:new t(e.image,e.topLeft,e.bottomLeft,r.topRight,r.bottomRight)},t.prototype.addMissingRows=function(e,r,n){var a=this.topLeft,i=this.bottomLeft,o=this.topRight,s=this.bottomRight;if(e>0){var l=n?this.topLeft:this.topRight,c=Math.trunc(l.getY()-e);c<0&&(c=0);var u=new B(l.getX(),c);n?a=u:o=u}if(r>0){var f=n?this.bottomLeft:this.bottomRight,h=Math.trunc(f.getY()+r);h>=this.image.getHeight()&&(h=this.image.getHeight()-1);var p=new B(f.getX(),h);n?i=p:s=p}return new t(this.image,a,i,o,s)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t})(),ku=(function(){function t(e,r,n,a){this.columnCount=e,this.errorCorrectionLevel=a,this.rowCountUpperPart=r,this.rowCountLowerPart=n,this.rowCount=r+n}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t})(),pa=(function(){function t(){this.buffer=""}return t.form=function(e,r){var n=-1;function a(o,s,l,c,u,f){if(o==="%%")return"%";if(r[++n]!==void 0){o=c?parseInt(c.substr(1)):void 0;var h=u?parseInt(u.substr(1)):void 0,p;switch(f){case"s":p=r[n];break;case"c":p=r[n][0];break;case"f":p=parseFloat(r[n]).toFixed(o);break;case"p":p=parseFloat(r[n]).toPrecision(o);break;case"e":p=parseFloat(r[n]).toExponential(o);break;case"x":p=parseInt(r[n]).toString(h||16);break;case"d":p=parseFloat(parseInt(r[n],h||10).toPrecision(o)).toFixed(0);break}p=typeof p=="object"?JSON.stringify(p):(+p).toString(h);for(var x=parseInt(l),m=l&&l[0]+""=="0"?"0":" ";p.length<x;)p=s!==void 0?p+m:m+p;return p}}var i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,a)},t.prototype.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.buffer+=t.form(e,r)},t.prototype.toString=function(){return this.buffer},t})(),Iu=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cs=(function(){function t(e){this.boundingBox=new Wn(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var r=this.getCodeword(e);if(r!=null)return r;for(var n=1;n<t.MAX_NEARBY_DISTANCE;n++){var a=this.imageRowToCodewordIndex(e)-n;if(a>=0&&(r=this.codewords[a],r!=null)||(a=this.imageRowToCodewordIndex(e)+n,a<this.codewords.length&&(r=this.codewords[a],r!=null)))return r}return null},t.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},t.prototype.setCodeword=function(e,r){this.codewords[this.imageRowToCodewordIndex(e)]=r},t.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var e,r,n=new pa,a=0;try{for(var i=Iu(this.codewords),o=i.next();!o.done;o=i.next()){var s=o.value;if(s==null){n.format("%3d:    |   %n",a++);continue}n.format("%3d: %3d|%3d%n",a++,s.getRowNumber(),s.getValue())}}catch(l){e={error:l}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return n.toString()},t.MAX_NEARBY_DISTANCE=5,t})(),Ou=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Tu=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,i=[],o;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},Qt=(function(){function t(){this.values=new Map}return t.prototype.setValue=function(e){e=Math.trunc(e);var r=this.values.get(e);r==null&&(r=0),r++,this.values.set(e,r)},t.prototype.getValue=function(){var e,r,n=-1,a=new Array,i=function(f,h){var p={getKey:function(){return f},getValue:function(){return h}};p.getValue()>n?(n=p.getValue(),a=[],a.push(p.getKey())):p.getValue()===n&&a.push(p.getKey())};try{for(var o=Ou(this.values.entries()),s=o.next();!s.done;s=o.next()){var l=Tu(s.value,2),c=l[0],u=l[1];i(c,u)}}catch(f){e={error:f}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return re.toIntArray(a)},t.prototype.getConfidence=function(e){return this.values.get(e)},t})(),ju=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),bn=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xi=(function(t){ju(e,t);function e(r,n){var a=t.call(this,r)||this;return a._isLeft=n,a}return e.prototype.setRowNumbers=function(){var r,n;try{for(var a=bn(this.getCodewords()),i=a.next();!i.done;i=a.next()){var o=i.value;o?.setRowNumberAsRowIndicatorColumn()}}catch(s){r={error:s}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(r){var n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,r);for(var a=this.getBoundingBox(),i=this._isLeft?a.getTopLeft():a.getTopRight(),o=this._isLeft?a.getBottomLeft():a.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),l=this.imageRowToCodewordIndex(Math.trunc(o.getY())),c=-1,u=1,f=0,h=s;h<l;h++)if(n[h]!=null){var p=n[h],x=p.getRowNumber()-c;if(x===0)f++;else if(x===1)u=Math.max(u,f),f=1,c=p.getRowNumber();else if(x<0||p.getRowNumber()>=r.getRowCount()||x>h)n[h]=null;else{var m=void 0;u>2?m=(u-2)*x:m=x;for(var g=m>=h,y=1;y<=m&&!g;y++)g=n[h-y]!=null;g?n[h]=null:(c=p.getRowNumber(),f=1)}}},e.prototype.getRowHeights=function(){var r,n,a=this.getBarcodeMetadata();if(a==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(a);var i=new Int32Array(a.getRowCount());try{for(var o=bn(this.getCodewords()),s=o.next();!s.done;s=o.next()){var l=s.value;if(l!=null){var c=l.getRowNumber();if(c>=i.length)continue;i[c]++}}}catch(u){r={error:u}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return i},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(r){for(var n=this.getBoundingBox(),a=this._isLeft?n.getTopLeft():n.getTopRight(),i=this._isLeft?n.getBottomLeft():n.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(a.getY())),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),l=this.getCodewords(),c=-1,u=o;u<s;u++)if(l[u]!=null){var f=l[u];f.setRowNumberAsRowIndicatorColumn();var h=f.getRowNumber()-c;h===0||(h===1?c=f.getRowNumber():f.getRowNumber()>=r.getRowCount()?l[u]=null:c=f.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var r,n,a=this.getCodewords(),i=new Qt,o=new Qt,s=new Qt,l=new Qt;try{for(var c=bn(a),u=c.next();!u.done;u=c.next()){var f=u.value;if(f!=null){f.setRowNumberAsRowIndicatorColumn();var h=f.getValue()%30,p=f.getRowNumber();switch(this._isLeft||(p+=2),p%3){case 0:o.setValue(h*3+1);break;case 1:l.setValue(h/3),s.setValue(h%3);break;case 2:i.setValue(h+1);break}}}}catch(m){r={error:m}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}if(i.getValue().length===0||o.getValue().length===0||s.getValue().length===0||l.getValue().length===0||i.getValue()[0]<1||o.getValue()[0]+s.getValue()[0]<re.MIN_ROWS_IN_BARCODE||o.getValue()[0]+s.getValue()[0]>re.MAX_ROWS_IN_BARCODE)return null;var x=new ku(i.getValue()[0],o.getValue()[0],s.getValue()[0],l.getValue()[0]);return this.removeIncorrectCodewords(a,x),x},e.prototype.removeIncorrectCodewords=function(r,n){for(var a=0;a<r.length;a++){var i=r[a];if(r[a]!=null){var o=i.getValue()%30,s=i.getRowNumber();if(s>n.getRowCount()){r[a]=null;continue}switch(this._isLeft||(s+=2),s%3){case 0:o*3+1!==n.getRowCountUpperPart()&&(r[a]=null);break;case 1:(Math.trunc(o/3)!==n.getErrorCorrectionLevel()||o%3!==n.getRowCountLowerPart())&&(r[a]=null);break;case 2:o+1!==n.getColumnCount()&&(r[a]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+t.prototype.toString.call(this)},e})(cs),Ru=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Du=(function(){function t(e,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=re.MAX_CODEWORDS_IN_BARCODE,r;do r=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<r);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var r=1;r<this.barcodeColumnCount+1;r++)for(var n=this.detectionResultColumns[r].getCodewords(),a=0;a<n.length;a++)n[a]!=null&&(n[a].hasValidRowNumber()||this.adjustRowNumbers(r,a,n));return e},t.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(e[n]!=null&&r[n]!=null&&e[n].getRowNumber()===r[n].getRowNumber())for(var a=1;a<=this.barcodeColumnCount;a++){var i=this.detectionResultColumns[a].getCodewords()[n];i!=null&&(i.setRowNumber(e[n].getRowNumber()),i.hasValidRowNumber()||(this.detectionResultColumns[a].getCodewords()[n]=null))}}},t.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var a=r[n].getRowNumber(),i=0,o=this.barcodeColumnCount+1;o>0&&i<this.ADJUST_ROW_NUMBER_SKIP;o--){var s=this.detectionResultColumns[o].getCodewords()[n];s!=null&&(i=t.adjustRowNumberIfValid(a,i,s),s.hasValidRowNumber()||e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,r=this.detectionResultColumns[0].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var a=r[n].getRowNumber(),i=0,o=1;o<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;o++){var s=this.detectionResultColumns[o].getCodewords()[n];s!=null&&(i=t.adjustRowNumberIfValid(a,i,s),s.hasValidRowNumber()||e++)}return e},t.adjustRowNumberIfValid=function(e,r,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),r=0):++r),r},t.prototype.adjustRowNumbers=function(e,r,n){var a,i;if(this.detectionResultColumns[e-1]!=null){var o=n[r],s=this.detectionResultColumns[e-1].getCodewords(),l=s;this.detectionResultColumns[e+1]!=null&&(l=this.detectionResultColumns[e+1].getCodewords());var c=new Array(14);c[2]=s[r],c[3]=l[r],r>0&&(c[0]=n[r-1],c[4]=s[r-1],c[5]=l[r-1]),r>1&&(c[8]=n[r-2],c[10]=s[r-2],c[11]=l[r-2]),r<n.length-1&&(c[1]=n[r+1],c[6]=s[r+1],c[7]=l[r+1]),r<n.length-2&&(c[9]=n[r+2],c[12]=s[r+2],c[13]=l[r+2]);try{for(var u=Ru(c),f=u.next();!f.done;f=u.next()){var h=f.value;if(t.adjustRowNumber(o,h))return}}catch(p){a={error:p}}finally{try{f&&!f.done&&(i=u.return)&&i.call(u)}finally{if(a)throw a.error}}}},t.adjustRowNumber=function(e,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===e.getBucket()?(e.setRowNumber(r.getRowNumber()),!0):!1},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(e){this.boundingBox=e},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(e,r){this.detectionResultColumns[e]=r},t.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},t.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var r=new pa,n=0;n<e.getCodewords().length;n++){r.format("CW %3d:",n);for(var a=0;a<this.barcodeColumnCount+2;a++){if(this.detectionResultColumns[a]==null){r.format("    |   ");continue}var i=this.detectionResultColumns[a].getCodewords()[n];if(i==null){r.format("    |   ");continue}r.format(" %3d|%3d",i.getRowNumber(),i.getValue())}r.format("%n")}return r.toString()},t})(),Pu=(function(){function t(e,r,n,a){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(r),this.bucket=Math.trunc(n),this.value=Math.trunc(a)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(e){this.rowNumber=e},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t})(),Mu=(function(){function t(){}return t.initialize=function(){for(var e=0;e<re.SYMBOL_TABLE.length;e++)for(var r=re.SYMBOL_TABLE[e],n=r&1,a=0;a<re.BARS_IN_MODULE;a++){for(var i=0;(r&1)===n;)i+=1,r>>=1;n=r&1,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=new Array(re.BARS_IN_MODULE)),t.RATIOS_TABLE[e][re.BARS_IN_MODULE-a-1]=Math.fround(i/re.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var r=t.getDecodedCodewordValue(t.sampleBitCounts(e));return r!==-1?r:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(e){for(var r=ae.sum(e),n=new Int32Array(re.BARS_IN_MODULE),a=0,i=0,o=0;o<re.MODULES_IN_CODEWORD;o++){var s=r/(2*re.MODULES_IN_CODEWORD)+o*r/re.MODULES_IN_CODEWORD;i+e[a]<=s&&(i+=e[a],a++),n[a]++}return n},t.getDecodedCodewordValue=function(e){var r=t.getBitValue(e);return re.getCodeword(r)===-1?-1:r},t.getBitValue=function(e){for(var r=0,n=0;n<e.length;n++)for(var a=0;a<e[n];a++)r=r<<1|(n%2===0?1:0);return Math.trunc(r)},t.getClosestDecodedValue=function(e){var r=ae.sum(e),n=new Array(re.BARS_IN_MODULE);if(r>1)for(var a=0;a<n.length;a++)n[a]=Math.fround(e[a]/r);var i=$n.MAX_VALUE,o=-1;this.bSymbolTableReady||t.initialize();for(var s=0;s<t.RATIOS_TABLE.length;s++){for(var l=0,c=t.RATIOS_TABLE[s],u=0;u<re.BARS_IN_MODULE;u++){var f=Math.fround(c[u]-n[u]);if(l+=Math.fround(f*f),l>=i)break}l<i&&(i=l,o=re.SYMBOL_TABLE[s])}return o},t.bSymbolTableReady=!1,t.RATIOS_TABLE=new Array(re.SYMBOL_TABLE.length).map(function(e){return new Array(re.BARS_IN_MODULE)}),t})(),Lu=(function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(e){this.segmentIndex=e},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(e){this.fileId=e},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(e){this.optionalData=e},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(e){this.lastSegment=e},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(e){this.segmentCount=e},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(e){this.sender=e},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(e){this.addressee=e},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(e){this.fileName=e},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(e){this.fileSize=e},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(e){this.checksum=e},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(e){this.timestamp=e},t})(),mi=(function(){function t(){}return t.parseLong=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t})(),Bu=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Fu=(function(t){Bu(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="NullPointerException",e})(ze),Uu=(function(){function t(){}return t.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},t.prototype.writeBytesOffset=function(e,r,n){if(e==null)throw new Fu;if(r<0||r>e.length||n<0||r+n>e.length||r+n<0)throw new ca;if(n===0)return;for(var a=0;a<n;a++)this.write(e[r+a])},t.prototype.flush=function(){},t.prototype.close=function(){},t})(),Gu=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Vu=(function(t){Gu(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(ze),$u=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Hu=(function(t){$u(e,t);function e(r){r===void 0&&(r=32);var n=t.call(this)||this;if(n.count=0,r<0)throw new U("Negative initial size: "+r);return n.buf=new Uint8Array(r),n}return e.prototype.ensureCapacity=function(r){r-this.buf.length>0&&this.grow(r)},e.prototype.grow=function(r){var n=this.buf.length,a=n<<1;if(a-r<0&&(a=r),a<0){if(r<0)throw new Vu;a=X.MAX_VALUE}this.buf=ke.copyOfUint8Array(this.buf,a)},e.prototype.write=function(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1},e.prototype.writeBytesOffset=function(r,n,a){if(n<0||n>r.length||a<0||n+a-r.length>0)throw new ca;this.ensureCapacity(this.count+a),he.arraycopy(r,n,this.buf,this.count,a),this.count+=a},e.prototype.writeTo=function(r){r.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return ke.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(r){return new String(this.buf).toString()},e.prototype.toString_number=function(r){return new String(this.buf).toString()},e.prototype.close=function(){},e})(Uu),ue;(function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(ue||(ue={}));function us(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var vr;function wt(t){if(typeof vr>"u"&&(vr=us()),vr===null)throw new Error("BigInt is not supported!");return vr(t)}function zu(){var t=[];t[0]=wt(1);var e=wt(900);t[1]=e;for(var r=2;r<16;r++)t[r]=t[r-1]*e;return t}var Wu=(function(){function t(){}return t.decode=function(e,r){var n=new z(""),a=Se.ISO8859_1;n.enableDecoding(a);for(var i=1,o=e[i++],s=new Lu;i<e[0];){switch(o){case t.TEXT_COMPACTION_MODE_LATCH:i=t.textCompaction(e,i,n);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:i=t.byteCompaction(o,e,a,i,n);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[i++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:i=t.numericCompaction(e,i,n);break;case t.ECI_CHARSET:Se.getCharacterSetECIByValue(e[i++]);break;case t.ECI_GENERAL_PURPOSE:i+=2;break;case t.ECI_USER_DEFINED:i++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=t.decodeMacroBlock(e,i,s);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new P;default:i--,i=t.textCompaction(e,i,n);break}if(i<e.length)o=e[i++];else throw P.getFormatInstance()}if(n.length()===0)throw P.getFormatInstance();var l=new an(null,n.toString(),null,r);return l.setOther(s),l},t.decodeMacroBlock=function(e,r,n){if(r+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw P.getFormatInstance();for(var a=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),i=0;i<t.NUMBER_OF_SEQUENCE_CODEWORDS;i++,r++)a[i]=e[r];n.setSegmentIndex(X.parseInt(t.decodeBase900toBase10(a,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var o=new z;r=t.textCompaction(e,r,o),n.setFileId(o.toString());var s=-1;for(e[r]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=r+1);r<e[0];)switch(e[r]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,e[r]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var l=new z;r=t.textCompaction(e,r+1,l),n.setFileName(l.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var c=new z;r=t.textCompaction(e,r+1,c),n.setSender(c.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var u=new z;r=t.textCompaction(e,r+1,u),n.setAddressee(u.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var f=new z;r=t.numericCompaction(e,r+1,f),n.setSegmentCount(X.parseInt(f.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var h=new z;r=t.numericCompaction(e,r+1,h),n.setTimestamp(mi.parseLong(h.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var p=new z;r=t.numericCompaction(e,r+1,p),n.setChecksum(X.parseInt(p.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var x=new z;r=t.numericCompaction(e,r+1,x),n.setFileSize(mi.parseLong(x.toString()));break;default:throw P.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:r++,n.setLastSegment(!0);break;default:throw P.getFormatInstance()}if(s!==-1){var m=r-s;n.isLastSegment()&&m--,n.setOptionalData(ke.copyOfRange(e,s,s+m))}return r},t.textCompaction=function(e,r,n){for(var a=new Int32Array((e[0]-r)*2),i=new Int32Array((e[0]-r)*2),o=0,s=!1;r<e[0]&&!s;){var l=e[r++];if(l<t.TEXT_COMPACTION_MODE_LATCH)a[o]=l/30,a[o+1]=l%30,o+=2;else switch(l){case t.TEXT_COMPACTION_MODE_LATCH:a[o++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,s=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a[o]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,l=e[r++],i[o]=l,o++;break}}return t.decodeTextCompaction(a,i,o,n),r},t.decodeTextCompaction=function(e,r,n,a){for(var i=ue.ALPHA,o=ue.ALPHA,s=0;s<n;){var l=e[s],c="";switch(i){case ue.ALPHA:if(l<26)c=String.fromCharCode(65+l);else switch(l){case 26:c=" ";break;case t.LL:i=ue.LOWER;break;case t.ML:i=ue.MIXED;break;case t.PS:o=i,i=ue.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=ue.ALPHA;break}break;case ue.LOWER:if(l<26)c=String.fromCharCode(97+l);else switch(l){case 26:c=" ";break;case t.AS:o=i,i=ue.ALPHA_SHIFT;break;case t.ML:i=ue.MIXED;break;case t.PS:o=i,i=ue.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=ue.ALPHA;break}break;case ue.MIXED:if(l<t.PL)c=t.MIXED_CHARS[l];else switch(l){case t.PL:i=ue.PUNCT;break;case 26:c=" ";break;case t.LL:i=ue.LOWER;break;case t.AL:i=ue.ALPHA;break;case t.PS:o=i,i=ue.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=ue.ALPHA;break}break;case ue.PUNCT:if(l<t.PAL)c=t.PUNCT_CHARS[l];else switch(l){case t.PAL:i=ue.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=ue.ALPHA;break}break;case ue.ALPHA_SHIFT:if(i=o,l<26)c=String.fromCharCode(65+l);else switch(l){case 26:c=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:i=ue.ALPHA;break}break;case ue.PUNCT_SHIFT:if(i=o,l<t.PAL)c=t.PUNCT_CHARS[l];else switch(l){case t.PAL:i=ue.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=ue.ALPHA;break}break}c!==""&&a.append(c),s++}},t.byteCompaction=function(e,r,n,a,i){var o=new Hu,s=0,l=0,c=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var u=new Int32Array(6),f=r[a++];a<r[0]&&!c;)switch(u[s++]=f,l=900*l+f,f=r[a++],f){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:a--,c=!0;break;default:if(s%5===0&&s>0){for(var h=0;h<6;++h)o.write(Number(wt(l)>>wt(8*(5-h))));l=0,s=0}break}a===r[0]&&f<t.TEXT_COMPACTION_MODE_LATCH&&(u[s++]=f);for(var p=0;p<s;p++)o.write(u[p]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;a<r[0]&&!c;){var x=r[a++];if(x<t.TEXT_COMPACTION_MODE_LATCH)s++,l=900*l+x;else switch(x){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:a--,c=!0;break}if(s%5===0&&s>0){for(var h=0;h<6;++h)o.write(Number(wt(l)>>wt(8*(5-h))));l=0,s=0}}break}return i.append(et.decode(o.toByteArray(),n)),a},t.numericCompaction=function(e,r,n){for(var a=0,i=!1,o=new Int32Array(t.MAX_NUMERIC_CODEWORDS);r<e[0]&&!i;){var s=e[r++];if(r===e[0]&&(i=!0),s<t.TEXT_COMPACTION_MODE_LATCH)o[a]=s,a++;else switch(s){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,i=!0;break}(a%t.MAX_NUMERIC_CODEWORDS===0||s===t.NUMERIC_COMPACTION_MODE_LATCH||i)&&a>0&&(n.append(t.decodeBase900toBase10(o,a)),a=0)}return r},t.decodeBase900toBase10=function(e,r){for(var n=wt(0),a=0;a<r;a++)n+=t.EXP900[r-a-1]*wt(e[a]);var i=n.toString();if(i.charAt(0)!=="1")throw new P;return i.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,t.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t.EXP900=us()?zu():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t})(),qt=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xu=(function(){function t(){}return t.decode=function(e,r,n,a,i,o,s){for(var l=new Wn(e,r,n,a,i),c=null,u=null,f,h=!0;;h=!1){if(r!=null&&(c=t.getRowIndicatorColumn(e,l,r,!0,o,s)),a!=null&&(u=t.getRowIndicatorColumn(e,l,a,!1,o,s)),f=t.merge(c,u),f==null)throw T.getNotFoundInstance();var p=f.getBoundingBox();if(h&&p!=null&&(p.getMinY()<l.getMinY()||p.getMaxY()>l.getMaxY()))l=p;else break}f.setBoundingBox(l);var x=f.getBarcodeColumnCount()+1;f.setDetectionResultColumn(0,c),f.setDetectionResultColumn(x,u);for(var m=c!=null,g=1;g<=x;g++){var y=m?g:x-g;if(f.getDetectionResultColumn(y)===void 0){var b=void 0;y===0||y===x?b=new xi(l,y===0):b=new cs(l),f.setDetectionResultColumn(y,b);for(var w=-1,C=w,A=l.getMinY();A<=l.getMaxY();A++){if(w=t.getStartColumn(f,y,A,m),w<0||w>l.getMaxX()){if(C===-1)continue;w=C}var N=t.detectCodeword(e,l.getMinX(),l.getMaxX(),m,w,A,o,s);N!=null&&(b.setCodeword(A,N),C=w,o=Math.min(o,N.getWidth()),s=Math.max(s,N.getWidth()))}}}return t.createDecoderResult(f)},t.merge=function(e,r){if(e==null&&r==null)return null;var n=t.getBarcodeMetadata(e,r);if(n==null)return null;var a=Wn.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(r));return new Du(n,a)},t.adjustBoundingBox=function(e){var r,n;if(e==null)return null;var a=e.getRowHeights();if(a==null)return null;var i=t.getMax(a),o=0;try{for(var s=qt(a),l=s.next();!l.done;l=s.next()){var c=l.value;if(o+=i-c,c>0)break}}catch(p){r={error:p}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}for(var u=e.getCodewords(),f=0;o>0&&u[f]==null;f++)o--;for(var h=0,f=a.length-1;f>=0&&(h+=i-a[f],!(a[f]>0));f--);for(var f=u.length-1;h>0&&u[f]==null;f--)h--;return e.getBoundingBox().addMissingRows(o,h,e.isLeft())},t.getMax=function(e){var r,n,a=-1;try{for(var i=qt(e),o=i.next();!o.done;o=i.next()){var s=o.value;a=Math.max(a,s)}}catch(l){r={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a},t.getBarcodeMetadata=function(e,r){var n;if(e==null||(n=e.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();var a;return r==null||(a=r.getBarcodeMetadata())==null?n:n.getColumnCount()!==a.getColumnCount()&&n.getErrorCorrectionLevel()!==a.getErrorCorrectionLevel()&&n.getRowCount()!==a.getRowCount()?null:n},t.getRowIndicatorColumn=function(e,r,n,a,i,o){for(var s=new xi(r,a),l=0;l<2;l++)for(var c=l===0?1:-1,u=Math.trunc(Math.trunc(n.getX())),f=Math.trunc(Math.trunc(n.getY()));f<=r.getMaxY()&&f>=r.getMinY();f+=c){var h=t.detectCodeword(e,0,e.getWidth(),a,u,f,i,o);h!=null&&(s.setCodeword(f,h),a?u=h.getStartX():u=h.getEndX())}return s},t.adjustCodewordCount=function(e,r){var n=r[0][1],a=n.getValue(),i=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(a.length===0){if(i<1||i>re.MAX_CODEWORDS_IN_BARCODE)throw T.getNotFoundInstance();n.setValue(i)}else a[0]!==i&&n.setValue(i)},t.createDecoderResult=function(e){var r=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,r);for(var n=new Array,a=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),i=[],o=new Array,s=0;s<e.getBarcodeRowCount();s++)for(var l=0;l<e.getBarcodeColumnCount();l++){var c=r[s][l+1].getValue(),u=s*e.getBarcodeColumnCount()+l;c.length===0?n.push(u):c.length===1?a[u]=c[0]:(o.push(u),i.push(c))}for(var f=new Array(i.length),h=0;h<f.length;h++)f[h]=i[h];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),a,re.toIntArray(n),re.toIntArray(o),f)},t.createDecoderResultFromAmbiguousValues=function(e,r,n,a,i){for(var o=new Int32Array(a.length),s=100;s-- >0;){for(var l=0;l<o.length;l++)r[a[l]]=i[l][o[l]];try{return t.decodeCodewords(r,e,n)}catch(u){var c=u instanceof _e;if(!c)throw u}if(o.length===0)throw _e.getChecksumInstance();for(var l=0;l<o.length;l++)if(o[l]<i[l].length-1){o[l]++;break}else if(o[l]=0,l===o.length-1)throw _e.getChecksumInstance()}throw _e.getChecksumInstance()},t.createBarcodeMatrix=function(e){for(var r,n,a,i,o=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),s=0;s<o.length;s++)for(var l=0;l<o[s].length;l++)o[s][l]=new Qt;var c=0;try{for(var u=qt(e.getDetectionResultColumns()),f=u.next();!f.done;f=u.next()){var h=f.value;if(h!=null)try{for(var p=(a=void 0,qt(h.getCodewords())),x=p.next();!x.done;x=p.next()){var m=x.value;if(m!=null){var g=m.getRowNumber();if(g>=0){if(g>=o.length)continue;o[g][c].setValue(m.getValue())}}}}catch(y){a={error:y}}finally{try{x&&!x.done&&(i=p.return)&&i.call(p)}finally{if(a)throw a.error}}c++}}catch(y){r={error:y}}finally{try{f&&!f.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}return o},t.isValidBarcodeColumn=function(e,r){return r>=0&&r<=e.getBarcodeColumnCount()+1},t.getStartColumn=function(e,r,n,a){var i,o,s=a?1:-1,l=null;if(t.isValidBarcodeColumn(e,r-s)&&(l=e.getDetectionResultColumn(r-s).getCodeword(n)),l!=null)return a?l.getEndX():l.getStartX();if(l=e.getDetectionResultColumn(r).getCodewordNearby(n),l!=null)return a?l.getStartX():l.getEndX();if(t.isValidBarcodeColumn(e,r-s)&&(l=e.getDetectionResultColumn(r-s).getCodewordNearby(n)),l!=null)return a?l.getEndX():l.getStartX();for(var c=0;t.isValidBarcodeColumn(e,r-s);){r-=s;try{for(var u=(i=void 0,qt(e.getDetectionResultColumn(r).getCodewords())),f=u.next();!f.done;f=u.next()){var h=f.value;if(h!=null)return(a?h.getEndX():h.getStartX())+s*c*(h.getEndX()-h.getStartX())}}catch(p){i={error:p}}finally{try{f&&!f.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}c++}return a?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,r,n,a,i,o,s,l){i=t.adjustCodewordStartColumn(e,r,n,a,i,o);var c=t.getModuleBitCount(e,r,n,a,i,o);if(c==null)return null;var u,f=ae.sum(c);if(a)u=i+f;else{for(var h=0;h<c.length/2;h++){var p=c[h];c[h]=c[c.length-1-h],c[c.length-1-h]=p}u=i,i=u-f}if(!t.checkCodewordSkew(f,s,l))return null;var x=Mu.getDecodedValue(c),m=re.getCodeword(x);return m===-1?null:new Pu(i,u,t.getCodewordBucketNumber(x),m)},t.getModuleBitCount=function(e,r,n,a,i,o){for(var s=i,l=new Int32Array(8),c=0,u=a?1:-1,f=a;(a?s<n:s>=r)&&c<l.length;)e.get(s,o)===f?(l[c]++,s+=u):(c++,f=!f);return c===l.length||s===(a?n:r)&&c===l.length-1?l:null},t.getNumberOfECCodeWords=function(e){return 2<<e},t.adjustCodewordStartColumn=function(e,r,n,a,i,o){for(var s=i,l=a?-1:1,c=0;c<2;c++){for(;(a?s>=r:s<n)&&a===e.get(s,o);){if(Math.abs(i-s)>t.CODEWORD_SKEW_SIZE)return i;s+=l}l=-l,a=!a}return s},t.checkCodewordSkew=function(e,r,n){return r-t.CODEWORD_SKEW_SIZE<=e&&e<=n+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,r,n){if(e.length===0)throw P.getFormatInstance();var a=1<<r+1,i=t.correctErrors(e,n,a);t.verifyCodewordCount(e,a);var o=Wu.decode(e,""+r);return o.setErrorsCorrected(i),o.setErasures(n.length),o},t.correctErrors=function(e,r,n){if(r!=null&&r.length>n/2+t.MAX_ERRORS||n<0||n>t.MAX_EC_CODEWORDS)throw _e.getChecksumInstance();return t.errorCorrection.decode(e,n,r)},t.verifyCodewordCount=function(e,r){if(e.length<4)throw P.getFormatInstance();var n=e[0];if(n>e.length)throw P.getFormatInstance();if(n===0)if(r<e.length)e[0]=e.length-r;else throw P.getFormatInstance()},t.getBitCountForCodeword=function(e){for(var r=new Int32Array(8),n=0,a=r.length-1;!((e&1)!==n&&(n=e&1,a--,a<0));)r[a]++,e>>=1;return r},t.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},t.toString=function(e){for(var r=new pa,n=0;n<e.length;n++){r.format("Row %2d: ",n);for(var a=0;a<e[n].length;a++){var i=e[n][a];i.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",i.getValue()[0],i.getConfidence(i.getValue()[0]))}r.format("%n")}return r.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new Su,t})(),Yu=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Vr=(function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=t.decode(e,r,!1);if(n==null||n.length===0||n[0]==null)throw T.getNotFoundInstance();return n[0]},t.prototype.decodeMultiple=function(e,r){r===void 0&&(r=null);try{return t.decode(e,r,!0)}catch(n){throw n instanceof P||n instanceof _e?T.getNotFoundInstance():n}},t.decode=function(e,r,n){var a,i,o=new Array,s=wu.detectMultiple(e,r,n);try{for(var l=Yu(s.getPoints()),c=l.next();!c.done;c=l.next()){var u=c.value,f=Xu.decode(s.getBits(),u[4],u[5],u[6],u[7],t.getMinCodewordWidth(u),t.getMaxCodewordWidth(u)),h=new Le(f.getText(),f.getRawBytes(),void 0,u,L.PDF_417);h.putMetadata(Pe.ERROR_CORRECTION_LEVEL,f.getECLevel());var p=f.getOther();p!=null&&h.putMetadata(Pe.PDF417_EXTRA_METADATA,p),o.push(h)}}catch(x){a={error:x}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(a)throw a.error}}return o.map(function(x){return x})},t.getMaxWidth=function(e,r){return e==null||r==null?0:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMinWidth=function(e,r){return e==null||r==null?X.MAX_VALUE:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*re.MODULES_IN_CODEWORD/re.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*re.MODULES_IN_CODEWORD/re.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*re.MODULES_IN_CODEWORD/re.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*re.MODULES_IN_CODEWORD/re.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t})(),qu=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),gi=(function(t){qu(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReaderException",e})(ze),vi=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fs=(function(){function t(){}return t.prototype.decode=function(e,r){return this.setHints(r),this.decodeInternal(e)},t.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},t.prototype.setHints=function(e){this.hints=e;var r=e!=null&&e.get(fe.TRY_HARDER)!==void 0,n=e==null?null:e.get(fe.POSSIBLE_FORMATS),a=new Array;if(n!=null){var i=n.some(function(o){return o===L.UPC_A||o===L.UPC_E||o===L.EAN_13||o===L.EAN_8||o===L.CODABAR||o===L.CODE_39||o===L.CODE_93||o===L.CODE_128||o===L.ITF||o===L.RSS_14||o===L.RSS_EXPANDED});i&&!r&&a.push(new Pt(e)),n.includes(L.QR_CODE)&&a.push(new Gr),n.includes(L.DATA_MATRIX)&&a.push(new Ur),n.includes(L.AZTEC)&&a.push(new Br),n.includes(L.PDF_417)&&a.push(new Vr),i&&r&&a.push(new Pt(e))}a.length===0&&(r||a.push(new Pt(e)),a.push(new Gr),a.push(new Ur),a.push(new Br),a.push(new Vr),r&&a.push(new Pt(e))),this.readers=a},t.prototype.reset=function(){var e,r;if(this.readers!==null)try{for(var n=vi(this.readers),a=n.next();!a.done;a=n.next()){var i=a.value;i.reset()}}catch(o){e={error:o}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.decodeInternal=function(e){var r,n;if(this.readers===null)throw new gi("No readers where selected, nothing can be read.");try{for(var a=vi(this.readers),i=a.next();!i.done;i=a.next()){var o=i.value;try{return o.decode(e,this.hints)}catch(s){if(s instanceof gi)continue}}}catch(s){r={error:s}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}throw new T("No MultiFormat Readers were able to detect the code.")},t})(),Zu=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(t){Zu(e,t);function e(r,n){r===void 0&&(r=null),n===void 0&&(n=500);var a=this,i=new fs;return i.setHints(r),a=t.call(this,i,n)||this,a}return e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e})(Ht);var Ku=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(t){Ku(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new Vr,r)||this}return e})(Ht);var Ju=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(t){Ju(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new Gr,r)||this}return e})(Ht);var Xn;(function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",t[t.MIN_SIZE=4]="MIN_SIZE",t[t.MAX_SIZE=5]="MAX_SIZE",t[t.MARGIN=6]="MARGIN",t[t.PDF417_COMPACT=7]="PDF417_COMPACT",t[t.PDF417_COMPACTION=8]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=10]="AZTEC_LAYERS",t[t.QR_VERSION=11]="QR_VERSION",t[t.GS1_FORMAT=12]="GS1_FORMAT",t[t.FORCE_C40=13]="FORCE_C40"})(Xn||(Xn={}));const br=Xn;var hs=(function(){function t(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new _t(e,Int32Array.from([1])))}return t.prototype.buildGenerator=function(e){var r=this.cachedGenerators;if(e>=r.length)for(var n=r[r.length-1],a=this.field,i=r.length;i<=e;i++){var o=n.multiply(new _t(a,Int32Array.from([1,a.exp(i-1+a.getGeneratorBase())])));r.push(o),n=o}return r[e]},t.prototype.encode=function(e,r){if(r===0)throw new U("No error correction bytes");var n=e.length-r;if(n<=0)throw new U("No data bytes provided");var a=this.buildGenerator(r),i=new Int32Array(n);he.arraycopy(e,0,i,0,n);var o=new _t(this.field,i);o=o.multiplyByMonomial(r,1);for(var s=o.divide(a)[1],l=s.getCoefficients(),c=r-l.length,u=0;u<c;u++)e[n+u]=0;he.arraycopy(l,0,e,n+c,l.length)},t})(),er=(function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),i=e.getHeight(),o=0;o<i-1;o++)for(var s=n[o],l=0;l<a-1;l++){var c=s[l];c===s[l+1]&&c===n[o+1][l]&&c===n[o+1][l+1]&&r++}return t.N2*r},t.applyMaskPenaltyRule3=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),i=e.getHeight(),o=0;o<i;o++)for(var s=0;s<a;s++){var l=n[o];s+6<a&&l[s]===1&&l[s+1]===0&&l[s+2]===1&&l[s+3]===1&&l[s+4]===1&&l[s+5]===0&&l[s+6]===1&&(t.isWhiteHorizontal(l,s-4,s)||t.isWhiteHorizontal(l,s+7,s+11))&&r++,o+6<i&&n[o][s]===1&&n[o+1][s]===0&&n[o+2][s]===1&&n[o+3][s]===1&&n[o+4][s]===1&&n[o+5][s]===0&&n[o+6][s]===1&&(t.isWhiteVertical(n,s,o-4,o)||t.isWhiteVertical(n,s,o+7,o+11))&&r++}return r*t.N3},t.isWhiteHorizontal=function(e,r,n){r=Math.max(r,0),n=Math.min(n,e.length);for(var a=r;a<n;a++)if(e[a]===1)return!1;return!0},t.isWhiteVertical=function(e,r,n,a){n=Math.max(n,0),a=Math.min(a,e.length);for(var i=n;i<a;i++)if(e[i][r]===1)return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),i=e.getHeight(),o=0;o<i;o++)for(var s=n[o],l=0;l<a;l++)s[l]===1&&r++;var c=e.getHeight()*e.getWidth(),u=Math.floor(Math.abs(r*2-c)*10/c);return u*t.N4},t.getDataMaskBit=function(e,r,n){var a,i;switch(e){case 0:a=n+r&1;break;case 1:a=n&1;break;case 2:a=r%3;break;case 3:a=(n+r)%3;break;case 4:a=Math.floor(n/2)+Math.floor(r/3)&1;break;case 5:i=n*r,a=(i&1)+i%3;break;case 6:i=n*r,a=(i&1)+i%3&1;break;case 7:i=n*r,a=i%3+(n+r&1)&1;break;default:throw new U("Invalid mask pattern: "+e)}return a===0},t.applyMaskPenaltyRule1Internal=function(e,r){for(var n=0,a=r?e.getHeight():e.getWidth(),i=r?e.getWidth():e.getHeight(),o=e.getArray(),s=0;s<a;s++){for(var l=0,c=-1,u=0;u<i;u++){var f=r?o[s][u]:o[u][s];f===c?l++:(l>=5&&(n+=t.N1+(l-5)),l=1,c=f)}l>=5&&(n+=t.N1+(l-5))}return n},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t})(),Qu=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ef=(function(){function t(e,r){this.width=e,this.height=r;for(var n=new Array(r),a=0;a!==r;a++)n[a]=new Uint8Array(e);this.bytes=n}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.get=function(e,r){return this.bytes[r][e]},t.prototype.getArray=function(){return this.bytes},t.prototype.setNumber=function(e,r,n){this.bytes[r][e]=n},t.prototype.setBoolean=function(e,r,n){this.bytes[r][e]=n?1:0},t.prototype.clear=function(e){var r,n;try{for(var a=Qu(this.bytes),i=a.next();!i.done;i=a.next()){var o=i.value;ke.fill(o,e)}}catch(s){r={error:s}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;if(this.width!==r.width||this.height!==r.height)return!1;for(var n=0,a=this.height;n<a;++n)for(var i=this.bytes[n],o=r.bytes[n],s=0,l=this.width;s<l;++s)if(i[s]!==o[s])return!1;return!0},t.prototype.toString=function(){for(var e=new z,r=0,n=this.height;r<n;++r){for(var a=this.bytes[r],i=0,o=this.width;i<o;++i)switch(a[i]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},t})(),Yn=(function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var e=new z;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},t.prototype.setMode=function(e){this.mode=e},t.prototype.setECLevel=function(e){this.ecLevel=e},t.prototype.setVersion=function(e){this.version=e},t.prototype.setMaskPattern=function(e){this.maskPattern=e},t.prototype.setMatrix=function(e){this.matrix=e},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t})(),tf=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),pe=(function(t){tf(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="WriterException",e})(ze),bi=(function(){function t(){}return t.clearMatrix=function(e){e.clear(255)},t.buildMatrix=function(e,r,n,a,i){t.clearMatrix(i),t.embedBasicPatterns(n,i),t.embedTypeInfo(r,a,i),t.maybeEmbedVersionInfo(n,i),t.embedDataBits(e,a,i)},t.embedBasicPatterns=function(e,r){t.embedPositionDetectionPatternsAndSeparators(r),t.embedDarkDotAtLeftBottomCorner(r),t.maybeEmbedPositionAdjustmentPatterns(e,r),t.embedTimingPatterns(r)},t.embedTypeInfo=function(e,r,n){var a=new je;t.makeTypeInfoBits(e,r,a);for(var i=0,o=a.getSize();i<o;++i){var s=a.get(a.getSize()-1-i),l=t.TYPE_INFO_COORDINATES[i],c=l[0],u=l[1];if(n.setBoolean(c,u,s),i<8){var f=n.getWidth()-i-1,h=8;n.setBoolean(f,h,s)}else{var f=8,h=n.getHeight()-7+(i-8);n.setBoolean(f,h,s)}}},t.maybeEmbedVersionInfo=function(e,r){if(!(e.getVersionNumber()<7)){var n=new je;t.makeVersionInfoBits(e,n);for(var a=17,i=0;i<6;++i)for(var o=0;o<3;++o){var s=n.get(a);a--,r.setBoolean(i,r.getHeight()-11+o,s),r.setBoolean(r.getHeight()-11+o,i,s)}}},t.embedDataBits=function(e,r,n){for(var a=0,i=-1,o=n.getWidth()-1,s=n.getHeight()-1;o>0;){for(o===6&&(o-=1);s>=0&&s<n.getHeight();){for(var l=0;l<2;++l){var c=o-l;if(t.isEmpty(n.get(c,s))){var u=void 0;a<e.getSize()?(u=e.get(a),++a):u=!1,r!==255&&er.getDataMaskBit(r,c,s)&&(u=!u),n.setBoolean(c,s,u)}}s+=i}i=-i,s+=i,o-=2}if(a!==e.getSize())throw new pe("Not all bits consumed: "+a+"/"+e.getSize())},t.findMSBSet=function(e){return 32-X.numberOfLeadingZeros(e)},t.calculateBCHCode=function(e,r){if(r===0)throw new U("0 polynomial");var n=t.findMSBSet(r);for(e<<=n-1;t.findMSBSet(e)>=n;)e^=r<<t.findMSBSet(e)-n;return e},t.makeTypeInfoBits=function(e,r,n){if(!Yn.isValidMaskPattern(r))throw new pe("Invalid mask pattern");var a=e.getBits()<<3|r;n.appendBits(a,5);var i=t.calculateBCHCode(a,t.TYPE_INFO_POLY);n.appendBits(i,10);var o=new je;if(o.appendBits(t.TYPE_INFO_MASK_PATTERN,15),n.xor(o),n.getSize()!==15)throw new pe("should not happen but we got: "+n.getSize())},t.makeVersionInfoBits=function(e,r){r.appendBits(e.getVersionNumber(),6);var n=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(r.appendBits(n,12),r.getSize()!==18)throw new pe("should not happen but we got: "+r.getSize())},t.isEmpty=function(e){return e===255},t.embedTimingPatterns=function(e){for(var r=8;r<e.getWidth()-8;++r){var n=(r+1)%2;t.isEmpty(e.get(r,6))&&e.setNumber(r,6,n),t.isEmpty(e.get(6,r))&&e.setNumber(6,r,n)}},t.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new pe;e.setNumber(8,e.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,r,n){for(var a=0;a<8;++a){if(!t.isEmpty(n.get(e+a,r)))throw new pe;n.setNumber(e+a,r,0)}},t.embedVerticalSeparationPattern=function(e,r,n){for(var a=0;a<7;++a){if(!t.isEmpty(n.get(e,r+a)))throw new pe;n.setNumber(e,r+a,0)}},t.embedPositionAdjustmentPattern=function(e,r,n){for(var a=0;a<5;++a)for(var i=t.POSITION_ADJUSTMENT_PATTERN[a],o=0;o<5;++o)n.setNumber(e+o,r+a,i[o])},t.embedPositionDetectionPattern=function(e,r,n){for(var a=0;a<7;++a)for(var i=t.POSITION_DETECTION_PATTERN[a],o=0;o<7;++o)n.setNumber(e+o,r+a,i[o])},t.embedPositionDetectionPatternsAndSeparators=function(e){var r=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-r,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-r,e);var n=8;t.embedHorizontalSeparationPattern(0,n-1,e),t.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);var a=7;t.embedVerticalSeparationPattern(a,0,e),t.embedVerticalSeparationPattern(e.getHeight()-a-1,0,e),t.embedVerticalSeparationPattern(a,e.getHeight()-a,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,r){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,a=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],i=0,o=a.length;i!==o;i++){var s=a[i];if(s>=0)for(var l=0;l!==o;l++){var c=a[l];c>=0&&t.isEmpty(r.get(c,s))&&t.embedPositionAdjustmentPattern(c-2,s-2,r)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t})(),rf=(function(){function t(e,r){this.dataBytes=e,this.errorCorrectionBytes=r}return t.prototype.getDataBytes=function(){return this.dataBytes},t.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},t})(),yi=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.calculateMaskPenalty=function(e){return er.applyMaskPenaltyRule1(e)+er.applyMaskPenaltyRule2(e)+er.applyMaskPenaltyRule3(e)+er.applyMaskPenaltyRule4(e)},t.encode=function(e,r,n){n===void 0&&(n=null);var a=t.DEFAULT_BYTE_MODE_ENCODING,i=n!==null&&n.get(br.CHARACTER_SET)!==void 0;i&&(a=n.get(br.CHARACTER_SET).toString());var o=this.chooseMode(e,a),s=new je;if(o===xe.BYTE&&(i||t.DEFAULT_BYTE_MODE_ENCODING!==a)){var l=Se.getCharacterSetECIByName(a);l!==void 0&&this.appendECI(l,s)}this.appendModeInfo(o,s);var c=new je;this.appendBytes(e,o,c,a);var u;if(n!==null&&n.get(br.QR_VERSION)!==void 0){var f=Number.parseInt(n.get(br.QR_VERSION).toString(),10);u=Ot.getVersionForNumber(f);var h=this.calculateBitsNeeded(o,s,c,u);if(!this.willFit(h,u,r))throw new pe("Data too big for requested version")}else u=this.recommendVersion(r,o,s,c);var p=new je;p.appendBitArray(s);var x=o===xe.BYTE?c.getSizeInBytes():e.length;this.appendLengthInfo(x,u,o,p),p.appendBitArray(c);var m=u.getECBlocksForLevel(r),g=u.getTotalCodewords()-m.getTotalECCodewords();this.terminateBits(g,p);var y=this.interleaveWithECBytes(p,u.getTotalCodewords(),g,m.getNumBlocks()),b=new Yn;b.setECLevel(r),b.setMode(o),b.setVersion(u);var w=u.getDimensionForVersion(),C=new ef(w,w),A=this.chooseMaskPattern(y,r,u,C);return b.setMaskPattern(A),bi.buildMatrix(y,r,u,A,C),b.setMatrix(C),b},t.recommendVersion=function(e,r,n,a){var i=this.calculateBitsNeeded(r,n,a,Ot.getVersionForNumber(1)),o=this.chooseVersion(i,e),s=this.calculateBitsNeeded(r,n,a,o);return this.chooseVersion(s,e)},t.calculateBitsNeeded=function(e,r,n,a){return r.getSize()+e.getCharacterCountBits(a)+n.getSize()},t.getAlphanumericCode=function(e){return e<t.ALPHANUMERIC_TABLE.length?t.ALPHANUMERIC_TABLE[e]:-1},t.chooseMode=function(e,r){if(r===void 0&&(r=null),Se.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(e))return xe.KANJI;for(var n=!1,a=!1,i=0,o=e.length;i<o;++i){var s=e.charAt(i);if(t.isDigit(s))n=!0;else if(this.getAlphanumericCode(s.charCodeAt(0))!==-1)a=!0;else return xe.BYTE}return a?xe.ALPHANUMERIC:n?xe.NUMERIC:xe.BYTE},t.isOnlyDoubleByteKanji=function(e){var r;try{r=et.encode(e,Se.SJIS)}catch{return!1}var n=r.length;if(n%2!==0)return!1;for(var a=0;a<n;a+=2){var i=r[a]&255;if((i<129||i>159)&&(i<224||i>235))return!1}return!0},t.chooseMaskPattern=function(e,r,n,a){for(var i=Number.MAX_SAFE_INTEGER,o=-1,s=0;s<Yn.NUM_MASK_PATTERNS;s++){bi.buildMatrix(e,r,n,s,a);var l=this.calculateMaskPenalty(a);l<i&&(i=l,o=s)}return o},t.chooseVersion=function(e,r){for(var n=1;n<=40;n++){var a=Ot.getVersionForNumber(n);if(t.willFit(e,a,r))return a}throw new pe("Data too big")},t.willFit=function(e,r,n){var a=r.getTotalCodewords(),i=r.getECBlocksForLevel(n),o=i.getTotalECCodewords(),s=a-o,l=(e+7)/8;return s>=l},t.terminateBits=function(e,r){var n=e*8;if(r.getSize()>n)throw new pe("data bits cannot fit in the QR Code"+r.getSize()+" > "+n);for(var a=0;a<4&&r.getSize()<n;++a)r.appendBit(!1);var i=r.getSize()&7;if(i>0)for(var a=i;a<8;a++)r.appendBit(!1);for(var o=e-r.getSizeInBytes(),a=0;a<o;++a)r.appendBits((a&1)===0?236:17,8);if(r.getSize()!==n)throw new pe("Bits size does not equal capacity")},t.getNumDataBytesAndNumECBytesForBlockID=function(e,r,n,a,i,o){if(a>=n)throw new pe("Block ID too large");var s=e%n,l=n-s,c=Math.floor(e/n),u=c+1,f=Math.floor(r/n),h=f+1,p=c-f,x=u-h;if(p!==x)throw new pe("EC bytes mismatch");if(n!==l+s)throw new pe("RS blocks mismatch");if(e!==(f+p)*l+(h+x)*s)throw new pe("Total bytes mismatch");a<l?(i[0]=f,o[0]=p):(i[0]=h,o[0]=x)},t.interleaveWithECBytes=function(e,r,n,a){var i,o,s,l;if(e.getSizeInBytes()!==n)throw new pe("Number of bits and data bytes does not match");for(var c=0,u=0,f=0,h=new Array,p=0;p<a;++p){var x=new Int32Array(1),m=new Int32Array(1);t.getNumDataBytesAndNumECBytesForBlockID(r,n,a,p,x,m);var g=x[0],y=new Uint8Array(g);e.toBytes(8*c,y,0,g);var b=t.generateECBytes(y,m[0]);h.push(new rf(y,b)),u=Math.max(u,g),f=Math.max(f,b.length),c+=x[0]}if(n!==c)throw new pe("Data bytes does not match offset");for(var w=new je,p=0;p<u;++p)try{for(var C=(i=void 0,yi(h)),A=C.next();!A.done;A=C.next()){var N=A.value,y=N.getDataBytes();p<y.length&&w.appendBits(y[p],8)}}catch(O){i={error:O}}finally{try{A&&!A.done&&(o=C.return)&&o.call(C)}finally{if(i)throw i.error}}for(var p=0;p<f;++p)try{for(var E=(s=void 0,yi(h)),S=E.next();!S.done;S=E.next()){var N=S.value,b=N.getErrorCorrectionBytes();p<b.length&&w.appendBits(b[p],8)}}catch(O){s={error:O}}finally{try{S&&!S.done&&(l=E.return)&&l.call(E)}finally{if(s)throw s.error}}if(r!==w.getSizeInBytes())throw new pe("Interleaving error: "+r+" and "+w.getSizeInBytes()+" differ.");return w},t.generateECBytes=function(e,r){for(var n=e.length,a=new Int32Array(n+r),i=0;i<n;i++)a[i]=e[i]&255;new hs(He.QR_CODE_FIELD_256).encode(a,r);for(var o=new Uint8Array(r),i=0;i<r;i++)o[i]=a[n+i];return o},t.appendModeInfo=function(e,r){r.appendBits(e.getBits(),4)},t.appendLengthInfo=function(e,r,n,a){var i=n.getCharacterCountBits(r);if(e>=1<<i)throw new pe(e+" is bigger than "+((1<<i)-1));a.appendBits(e,i)},t.appendBytes=function(e,r,n,a){switch(r){case xe.NUMERIC:t.appendNumericBytes(e,n);break;case xe.ALPHANUMERIC:t.appendAlphanumericBytes(e,n);break;case xe.BYTE:t.append8BitBytes(e,n,a);break;case xe.KANJI:t.appendKanjiBytes(e,n);break;default:throw new pe("Invalid mode: "+r)}},t.getDigit=function(e){return e.charCodeAt(0)-48},t.isDigit=function(e){var r=t.getDigit(e);return r>=0&&r<=9},t.appendNumericBytes=function(e,r){for(var n=e.length,a=0;a<n;){var i=t.getDigit(e.charAt(a));if(a+2<n){var o=t.getDigit(e.charAt(a+1)),s=t.getDigit(e.charAt(a+2));r.appendBits(i*100+o*10+s,10),a+=3}else if(a+1<n){var o=t.getDigit(e.charAt(a+1));r.appendBits(i*10+o,7),a+=2}else r.appendBits(i,4),a++}},t.appendAlphanumericBytes=function(e,r){for(var n=e.length,a=0;a<n;){var i=t.getAlphanumericCode(e.charCodeAt(a));if(i===-1)throw new pe;if(a+1<n){var o=t.getAlphanumericCode(e.charCodeAt(a+1));if(o===-1)throw new pe;r.appendBits(i*45+o,11),a+=2}else r.appendBits(i,6),a++}},t.append8BitBytes=function(e,r,n){var a;try{a=et.encode(e,n)}catch(l){throw new pe(l)}for(var i=0,o=a.length;i!==o;i++){var s=a[i];r.appendBits(s,8)}},t.appendKanjiBytes=function(e,r){var n;try{n=et.encode(e,Se.SJIS)}catch(f){throw new pe(f)}for(var a=n.length,i=0;i<a;i+=2){var o=n[i]&255,s=n[i+1]&255,l=o<<8&4294967295|s,c=-1;if(l>=33088&&l<=40956?c=l-33088:l>=57408&&l<=60351&&(c=l-49472),c===-1)throw new pe("Invalid byte sequence");var u=(c>>8)*192+(c&255);r.appendBits(u,13)}},t.appendECI=function(e,r){r.appendBits(xe.ECI.getBits(),4),r.appendBits(e.getValue(),8)},t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),t.DEFAULT_BYTE_MODE_ENCODING=Se.UTF8.getName(),t})();var nf=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(t){nf(e,t);function e(r,n,a,i,o,s,l,c){var u=t.call(this,s,l)||this;if(u.yuvData=r,u.dataWidth=n,u.dataHeight=a,u.left=i,u.top=o,i+s>n||o+l>a)throw new U("Crop rectangle does not fit within image data.");return c&&u.reverseHorizontal(s,l),u}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new U("Requested row is outside the image: "+r);var a=this.getWidth();(n==null||n.length<a)&&(n=new Uint8ClampedArray(a));var i=(r+this.top)*this.dataWidth+this.left;return he.arraycopy(this.yuvData,i,n,0,a),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.yuvData;var a=r*n,i=new Uint8ClampedArray(a),o=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return he.arraycopy(this.yuvData,o,i,0,a),i;for(var s=0;s<n;s++){var l=s*r;he.arraycopy(this.yuvData,o,i,l,r),o+=this.dataWidth}return i},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,i){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+n,a,i,!1)},e.prototype.renderThumbnail=function(){for(var r=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(r*n),i=this.yuvData,o=this.top*this.dataWidth+this.left,s=0;s<n;s++){for(var l=s*r,c=0;c<r;c++){var u=i[o+c*e.THUMBNAIL_SCALE_FACTOR]&255;a[l+c]=4278190080|u*65793}o+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return a},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(r,n){for(var a=this.yuvData,i=0,o=this.top*this.dataWidth+this.left;i<n;i++,o+=this.dataWidth)for(var s=o+r/2,l=o,c=o+r-1;l<s;l++,c--){var u=a[l];a[l]=a[c],a[c]=u}},e.prototype.invert=function(){return new nn(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(fr);var af=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(t){af(e,t);function e(r,n,a,i,o,s,l){var c=t.call(this,n,a)||this;if(c.dataWidth=i,c.dataHeight=o,c.left=s,c.top=l,r.BYTES_PER_ELEMENT===4){for(var u=n*a,f=new Uint8ClampedArray(u),h=0;h<u;h++){var p=r[h],x=p>>16&255,m=p>>7&510,g=p&255;f[h]=(x+m+g)/4&255}c.luminances=f}else c.luminances=r;if(i===void 0&&(c.dataWidth=n),o===void 0&&(c.dataHeight=a),s===void 0&&(c.left=0),l===void 0&&(c.top=0),c.left+n>c.dataWidth||c.top+a>c.dataHeight)throw new U("Crop rectangle does not fit within image data.");return c}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new U("Requested row is outside the image: "+r);var a=this.getWidth();(n==null||n.length<a)&&(n=new Uint8ClampedArray(a));var i=(r+this.top)*this.dataWidth+this.left;return he.arraycopy(this.luminances,i,n,0,a),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.luminances;var a=r*n,i=new Uint8ClampedArray(a),o=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return he.arraycopy(this.luminances,o,i,0,a),i;for(var s=0;s<n;s++){var l=s*r;he.arraycopy(this.luminances,o,i,l,r),o+=this.dataWidth}return i},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,i){return new e(this.luminances,a,i,this.dataWidth,this.dataHeight,this.left+r,this.top+n)},e.prototype.invert=function(){return new nn(this)},e})(fr);var of=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),sf=(function(t){of(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.forName=function(r){return this.getCharacterSetECIByName(r)},e})(Se),lf=(function(){function t(){}return t.ISO_8859_1=Se.ISO8859_1,t})(),qn,df=301,cf=function(t,e){for(var r=1,n=0;n<255;n++)e[n]=r,t[r]=n,r*=2,r>=256&&(r^=df);return{LOG:t,ALOG:e}};qn=cf([],[]),qn.LOG;qn.ALOG;var wi;(function(t){t[t.FORCE_NONE=0]="FORCE_NONE",t[t.FORCE_SQUARE=1]="FORCE_SQUARE",t[t.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(wi||(wi={}));var _i=129,ps=230,uf=231,ff=235,hf=236,pf=237,xf=238,mf=239,gf=240,yn=254,vf=254,Ai="[)>05",Ci="[)>06",Ei="",de=0,De=1,Ue=2,Ee=3,Te=4,Me=5,bf=(function(){function t(){}return t.prototype.getEncodingMode=function(){return de},t.prototype.encode=function(e){var r=ot.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(r>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var n=e.getCurrentChar(),a=ot.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode())switch(a){case Me:e.writeCodeword(uf),e.signalEncoderChange(Me);return;case De:e.writeCodeword(ps),e.signalEncoderChange(De);return;case Ee:e.writeCodeword(xf),e.signalEncoderChange(Ee);break;case Ue:e.writeCodeword(mf),e.signalEncoderChange(Ue);break;case Te:e.writeCodeword(gf),e.signalEncoderChange(Te);break;default:throw new Error("Illegal mode: "+a)}else ot.isExtendedASCII(n)?(e.writeCodeword(ff),e.writeCodeword(n-128+1),e.pos++):(e.writeCodeword(n+1),e.pos++)}},t.prototype.encodeASCIIDigits=function(e,r){if(ot.isDigit(e)&&ot.isDigit(r)){var n=(e-48)*10+(r-48);return n+130}throw new Error("not digits: "+e+r)},t})(),yf=(function(){function t(){}return t.prototype.getEncodingMode=function(){return Me},t.prototype.encode=function(e){var r=new z;for(r.append(0);e.hasMoreCharacters();){var n=e.getCurrentChar();r.append(n),e.pos++;var a=ot.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){e.signalEncoderChange(de);break}}var i=r.length()-1,o=1,s=e.getCodewordCount()+i+o;e.updateSymbolInfo(s);var l=e.getSymbolInfo().getDataCapacity()-s>0;if(e.hasMoreCharacters()||l)if(i<=249)r.setCharAt(0,Q.getCharAt(i));else if(i<=1555)r.setCharAt(0,Q.getCharAt(Math.floor(i/250)+249)),r.insert(1,Q.getCharAt(i%250));else throw new Error("Message length not in valid ranges: "+i);for(var c=0,n=r.length();c<n;c++)e.writeCodeword(this.randomize255State(r.charAt(c).charCodeAt(0),e.getCodewordCount()+1))},t.prototype.randomize255State=function(e,r){var n=149*r%255+1,a=e+n;return a<=255?a:a-256},t})(),xa=(function(){function t(){}return t.prototype.getEncodingMode=function(){return De},t.prototype.encodeMaximal=function(e){for(var r=new z,n=0,a=e.pos,i=0;e.hasMoreCharacters();){var o=e.getCurrentChar();e.pos++,n=this.encodeChar(o,r),r.length()%3===0&&(a=e.pos,i=r.length())}if(i!==r.length()){var s=Math.floor(r.length()/3*2),l=Math.floor(e.getCodewordCount()+s+1);e.updateSymbolInfo(l);var c=e.getSymbolInfo().getDataCapacity()-l,u=Math.floor(r.length()%3);(u===2&&c!==2||u===1&&(n>3||c!==1))&&(e.pos=a)}r.length()>0&&e.writeCodeword(ps),this.handleEOD(e,r)},t.prototype.encode=function(e){for(var r=new z;e.hasMoreCharacters();){var n=e.getCurrentChar();e.pos++;var a=this.encodeChar(n,r),i=Math.floor(r.length()/3)*2,o=e.getCodewordCount()+i;e.updateSymbolInfo(o);var s=e.getSymbolInfo().getDataCapacity()-o;if(!e.hasMoreCharacters()){var l=new z;for(r.length()%3===2&&s!==2&&(a=this.backtrackOneCharacter(e,r,l,a));r.length()%3===1&&(a>3||s!==1);)a=this.backtrackOneCharacter(e,r,l,a);break}var c=r.length();if(c%3===0){var u=ot.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(u!==this.getEncodingMode()){e.signalEncoderChange(de);break}}}this.handleEOD(e,r)},t.prototype.backtrackOneCharacter=function(e,r,n,a){var i=r.length(),o=r.toString().substring(0,i-a);r.setLengthToZero(),r.append(o),e.pos--;var s=e.getCurrentChar();return a=this.encodeChar(s,n),e.resetSymbolInfo(),a},t.prototype.writeNextTriplet=function(e,r){e.writeCodewords(this.encodeToCodewords(r.toString()));var n=r.toString().substring(3);r.setLengthToZero(),r.append(n)},t.prototype.handleEOD=function(e,r){var n=Math.floor(r.length()/3*2),a=r.length()%3,i=e.getCodewordCount()+n;e.updateSymbolInfo(i);var o=e.getSymbolInfo().getDataCapacity()-i;if(a===2){for(r.append("\0");r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(yn)}else if(o===1&&a===1){for(;r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(yn),e.pos--}else if(a===0){for(;r.length()>=3;)this.writeNextTriplet(e,r);(o>0||e.hasMoreCharacters())&&e.writeCodeword(yn)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(de)},t.prototype.encodeChar=function(e,r){if(e===32)return r.append(3),1;if(e>=48&&e<=57)return r.append(e-48+4),1;if(e>=65&&e<=90)return r.append(e-65+14),1;if(e<32)return r.append(0),r.append(e),2;if(e<=47)return r.append(1),r.append(e-33),2;if(e<=64)return r.append(1),r.append(e-58+15),2;if(e<=95)return r.append(1),r.append(e-91+22),2;if(e<=127)return r.append(2),r.append(e-96),2;r.append("1");var n=2;return n+=this.encodeChar(e-128,r),n},t.prototype.encodeToCodewords=function(e){var r=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,n=r/256,a=r%256,i=new z;return i.append(n),i.append(a),i.toString()},t})(),wf=(function(){function t(){}return t.prototype.getEncodingMode=function(){return Te},t.prototype.encode=function(e){for(var r=new z;e.hasMoreCharacters();){var n=e.getCurrentChar();this.encodeChar(n,r),e.pos++;var a=r.length();if(a>=4){e.writeCodewords(this.encodeToCodewords(r.toString()));var i=r.toString().substring(4);r.setLengthToZero(),r.append(i);var o=ot.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){e.signalEncoderChange(de);break}}}r.append(Q.getCharAt(31)),this.handleEOD(e,r)},t.prototype.handleEOD=function(e,r){try{var n=r.length();if(n===0)return;if(n===1){e.updateSymbolInfo();var a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),i=e.getRemainingCharacters();if(i>a&&(e.updateSymbolInfo(e.getCodewordCount()+1),a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),i<=a&&a<=2)return}if(n>4)throw new Error("Count must not exceed 4");var o=n-1,s=this.encodeToCodewords(r.toString()),l=!e.hasMoreCharacters(),c=l&&o<=2;if(o<=2){e.updateSymbolInfo(e.getCodewordCount()+o);var a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();a>=3&&(c=!1,e.updateSymbolInfo(e.getCodewordCount()+s.length))}c?(e.resetSymbolInfo(),e.pos-=o):e.writeCodewords(s)}finally{e.signalEncoderChange(de)}},t.prototype.encodeChar=function(e,r){e>=32&&e<=63?r.append(e):e>=64&&e<=94?r.append(Q.getCharAt(e-64)):ot.illegalCharacter(Q.getCharAt(e))},t.prototype.encodeToCodewords=function(e){var r=e.length;if(r===0)throw new Error("StringBuilder must not be empty");var n=e.charAt(0).charCodeAt(0),a=r>=2?e.charAt(1).charCodeAt(0):0,i=r>=3?e.charAt(2).charCodeAt(0):0,o=r>=4?e.charAt(3).charCodeAt(0):0,s=(n<<18)+(a<<12)+(i<<6)+o,l=s>>16&255,c=s>>8&255,u=s&255,f=new z;return f.append(l),r>=2&&f.append(c),r>=3&&f.append(u),f.toString()},t})(),_f=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Af=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oe=(function(){function t(e,r,n,a,i,o,s,l){s===void 0&&(s=0),l===void 0&&(l=0),this.rectangular=e,this.dataCapacity=r,this.errorCodewords=n,this.matrixWidth=a,this.matrixHeight=i,this.dataRegions=o,this.rsBlockData=s,this.rsBlockError=l}return t.lookup=function(e,r,n,a,i){var o,s;r===void 0&&(r=0),n===void 0&&(n=null),a===void 0&&(a=null),i===void 0&&(i=!0);try{for(var l=Af(Ef),c=l.next();!c.done;c=l.next()){var u=c.value;if(!(r===1&&u.rectangular)&&!(r===2&&!u.rectangular)&&!(n!=null&&(u.getSymbolWidth()<n.getWidth()||u.getSymbolHeight()<n.getHeight()))&&!(a!=null&&(u.getSymbolWidth()>a.getWidth()||u.getSymbolHeight()>a.getHeight()))&&e<=u.dataCapacity)return u}}catch(f){o={error:f}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(o)throw o.error}}if(i)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},t.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},t.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},t.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},t.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},t.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},t.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},t.prototype.getDataCapacity=function(){return this.dataCapacity},t.prototype.getErrorCodewords=function(){return this.errorCodewords},t.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},t.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},t})(),Cf=(function(t){_f(e,t);function e(){return t.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(r){return r<=8?156:155},e})(oe),Ef=[new oe(!1,3,5,8,8,1),new oe(!1,5,7,10,10,1),new oe(!0,5,7,16,6,1),new oe(!1,8,10,12,12,1),new oe(!0,10,11,14,6,2),new oe(!1,12,12,14,14,1),new oe(!0,16,14,24,10,1),new oe(!1,18,14,16,16,1),new oe(!1,22,18,18,18,1),new oe(!0,22,18,16,10,2),new oe(!1,30,20,20,20,1),new oe(!0,32,24,16,14,2),new oe(!1,36,24,22,22,1),new oe(!1,44,28,24,24,1),new oe(!0,49,28,22,14,2),new oe(!1,62,36,14,14,4),new oe(!1,86,42,16,16,4),new oe(!1,114,48,18,18,4),new oe(!1,144,56,20,20,4),new oe(!1,174,68,22,22,4),new oe(!1,204,84,24,24,4,102,42),new oe(!1,280,112,14,14,16,140,56),new oe(!1,368,144,16,16,16,92,36),new oe(!1,456,192,18,18,16,114,48),new oe(!1,576,224,20,20,16,144,56),new oe(!1,696,272,22,22,16,174,68),new oe(!1,816,336,24,24,16,136,56),new oe(!1,1050,408,18,18,36,175,68),new oe(!1,1304,496,20,20,36,163,62),new Cf],Nf=(function(){function t(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var r=e.split("").map(function(s){return s.charCodeAt(0)}),n=new z,a=0,i=r.length;a<i;a++){var o=String.fromCharCode(r[a]&255);if(o==="?"&&e.charAt(a)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(o)}this.msg=n.toString(),this.shape=0,this.codewords=new z,this.newEncoding=-1}return t.prototype.setSymbolShape=function(e){this.shape=e},t.prototype.setSizeConstraints=function(e,r){this.minSize=e,this.maxSize=r},t.prototype.getMessage=function(){return this.msg},t.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},t.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCodewords=function(){return this.codewords},t.prototype.writeCodewords=function(e){this.codewords.append(e)},t.prototype.writeCodeword=function(e){this.codewords.append(e)},t.prototype.getCodewordCount=function(){return this.codewords.length()},t.prototype.getNewEncoding=function(){return this.newEncoding},t.prototype.signalEncoderChange=function(e){this.newEncoding=e},t.prototype.resetEncoderSignal=function(){this.newEncoding=-1},t.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},t.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},t.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},t.prototype.getSymbolInfo=function(){return this.symbolInfo},t.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=oe.lookup(e,this.shape,this.minSize,this.maxSize,!0))},t.prototype.resetSymbolInfo=function(){this.symbolInfo=null},t})(),Sf=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),kf=(function(t){Sf(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Ee},e.prototype.encode=function(r){for(var n=new z;r.hasMoreCharacters();){var a=r.getCurrentChar();r.pos++,this.encodeChar(a,n);var i=n.length();if(i%3===0){this.writeNextTriplet(r,n);var o=ot.lookAheadTest(r.getMessage(),r.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){r.signalEncoderChange(de);break}}}this.handleEOD(r,n)},e.prototype.encodeChar=function(r,n){switch(r){case 13:n.append(0);break;case 42:n.append(1);break;case 62:n.append(2);break;case 32:n.append(3);break;default:r>=48&&r<=57?n.append(r-48+4):r>=65&&r<=90?n.append(r-65+14):ot.illegalCharacter(Q.getCharAt(r));break}return 1},e.prototype.handleEOD=function(r,n){r.updateSymbolInfo();var a=r.getSymbolInfo().getDataCapacity()-r.getCodewordCount(),i=n.length();r.pos-=i,(r.getRemainingCharacters()>1||a>1||r.getRemainingCharacters()!==a)&&r.writeCodeword(vf),r.getNewEncoding()<0&&r.signalEncoderChange(de)},e})(xa),If=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Of=(function(t){If(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Ue},e.prototype.encodeChar=function(r,n){if(r===32)return n.append(3),1;if(r>=48&&r<=57)return n.append(r-48+4),1;if(r>=97&&r<=122)return n.append(r-97+14),1;if(r<32)return n.append(0),n.append(r),2;if(r<=47)return n.append(1),n.append(r-33),2;if(r<=64)return n.append(1),n.append(r-58+15),2;if(r>=91&&r<=95)return n.append(1),n.append(r-91+22),2;if(r===96)return n.append(2),n.append(0),2;if(r<=90)return n.append(2),n.append(r-65+1),2;if(r<=127)return n.append(2),n.append(r-123+27),2;n.append("1");var a=2;return a+=this.encodeChar(r-128,n),a},e})(xa),ot=(function(){function t(){}return t.randomize253State=function(e){var r=149*e%253+1,n=_i+r;return n<=254?n:n-254},t.encodeHighLevel=function(e,r,n,a,i){r===void 0&&(r=0),n===void 0&&(n=null),a===void 0&&(a=null),i===void 0&&(i=!1);var o=new xa,s=[new bf,o,new Of,new kf,new wf,new yf],l=new Nf(e);l.setSymbolShape(r),l.setSizeConstraints(n,a),e.startsWith(Ai)&&e.endsWith(Ei)?(l.writeCodeword(hf),l.setSkipAtEnd(2),l.pos+=Ai.length):e.startsWith(Ci)&&e.endsWith(Ei)&&(l.writeCodeword(pf),l.setSkipAtEnd(2),l.pos+=Ci.length);var c=de;for(i&&(o.encodeMaximal(l),c=l.getNewEncoding(),l.resetEncoderSignal());l.hasMoreCharacters();)s[c].encode(l),l.getNewEncoding()>=0&&(c=l.getNewEncoding(),l.resetEncoderSignal());var u=l.getCodewordCount();l.updateSymbolInfo();var f=l.getSymbolInfo().getDataCapacity();u<f&&c!==de&&c!==Me&&c!==Te&&l.writeCodeword("þ");var h=l.getCodewords();for(h.length()<f&&h.append(_i);h.length()<f;)h.append(this.randomize253State(h.length()+1));return l.getCodewords().toString()},t.lookAheadTest=function(e,r,n){var a=this.lookAheadTestIntern(e,r,n);if(n===Ee&&a===Ee){for(var i=Math.min(r+3,e.length),o=r;o<i;o++)if(!this.isNativeX12(e.charCodeAt(o)))return de}else if(n===Te&&a===Te){for(var i=Math.min(r+4,e.length),o=r;o<i;o++)if(!this.isNativeEDIFACT(e.charCodeAt(o)))return de}return a},t.lookAheadTestIntern=function(e,r,n){if(r>=e.length)return n;var a;n===de?a=[0,1,1,1,1,1.25]:(a=[1,2,2,2,2,2.25],a[n]=0);for(var i=0,o=new Uint8Array(6),s=[];;){if(r+i===e.length){ke.fill(o,0),ke.fill(s,0);var l=this.findMinimums(a,s,X.MAX_VALUE,o),c=this.getMinimumCount(o);if(s[de]===l)return de;if(c===1){if(o[Me]>0)return Me;if(o[Te]>0)return Te;if(o[Ue]>0)return Ue;if(o[Ee]>0)return Ee}return De}var u=e.charCodeAt(r+i);if(i++,this.isDigit(u)?a[de]+=.5:this.isExtendedASCII(u)?(a[de]=Math.ceil(a[de]),a[de]+=2):(a[de]=Math.ceil(a[de]),a[de]++),this.isNativeC40(u)?a[De]+=2/3:this.isExtendedASCII(u)?a[De]+=8/3:a[De]+=4/3,this.isNativeText(u)?a[Ue]+=2/3:this.isExtendedASCII(u)?a[Ue]+=8/3:a[Ue]+=4/3,this.isNativeX12(u)?a[Ee]+=2/3:this.isExtendedASCII(u)?a[Ee]+=13/3:a[Ee]+=10/3,this.isNativeEDIFACT(u)?a[Te]+=3/4:this.isExtendedASCII(u)?a[Te]+=17/4:a[Te]+=13/4,this.isSpecialB256(u)?a[Me]+=4:a[Me]++,i>=4){if(ke.fill(o,0),ke.fill(s,0),this.findMinimums(a,s,X.MAX_VALUE,o),s[de]<this.min(s[Me],s[De],s[Ue],s[Ee],s[Te]))return de;if(s[Me]<s[de]||s[Me]+1<this.min(s[De],s[Ue],s[Ee],s[Te]))return Me;if(s[Te]+1<this.min(s[Me],s[De],s[Ue],s[Ee],s[de]))return Te;if(s[Ue]+1<this.min(s[Me],s[De],s[Te],s[Ee],s[de]))return Ue;if(s[Ee]+1<this.min(s[Me],s[De],s[Te],s[Ue],s[de]))return Ee;if(s[De]+1<this.min(s[de],s[Me],s[Te],s[Ue])){if(s[De]<s[Ee])return De;if(s[De]===s[Ee]){for(var f=r+i+1;f<e.length;){var h=e.charCodeAt(f);if(this.isX12TermSep(h))return Ee;if(!this.isNativeX12(h))break;f++}return De}}}}},t.min=function(e,r,n,a,i){var o=Math.min(e,Math.min(r,Math.min(n,a)));return i===void 0?o:Math.min(o,i)},t.findMinimums=function(e,r,n,a){for(var i=0;i<6;i++){var o=r[i]=Math.ceil(e[i]);n>o&&(n=o,ke.fill(a,0)),n===o&&(a[i]=a[i]+1)}return n},t.getMinimumCount=function(e){for(var r=0,n=0;n<6;n++)r+=e[n];return r||0},t.isDigit=function(e){return e>=48&&e<=57},t.isExtendedASCII=function(e){return e>=128&&e<=255},t.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},t.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},t.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},t.isX12TermSep=function(e){return e===13||e===42||e===62},t.isNativeEDIFACT=function(e){return e>=32&&e<=94},t.isSpecialB256=function(e){return!1},t.determineConsecutiveDigitCount=function(e,r){r===void 0&&(r=0);for(var n=e.length,a=r;a<n&&this.isDigit(e.charCodeAt(a));)a++;return a-r},t.illegalCharacter=function(e){var r=X.toHexString(e.charCodeAt(0));throw r="0000".substring(0,4-r.length)+r,new Error("Illegal character: "+e+" (0x"+r+")")},t})(),wn=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ni=(function(){function t(e){this.charset=e,this.name=e.name}return t.prototype.canEncode=function(e){try{return et.encode(e,this.charset)!=null}catch{return!1}},t})(),Tf=(function(){function t(e,r,n){var a,i,o,s,l,c;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(I){return new Ni(sf.forName(I))}),this.encoders=[];var u=[];u.push(new Ni(lf.ISO_8859_1));for(var f=r!=null&&r.name.startsWith("UTF"),h=0;h<e.length;h++){var p=!1;try{for(var x=(a=void 0,wn(u)),m=x.next();!m.done;m=x.next()){var g=m.value,y=e.charAt(h),b=y.charCodeAt(0);if(b===n||g.canEncode(y)){p=!0;break}}}catch(I){a={error:I}}finally{try{m&&!m.done&&(i=x.return)&&i.call(x)}finally{if(a)throw a.error}}if(!p)try{for(var w=(o=void 0,wn(this.ENCODERS)),C=w.next();!C.done;C=w.next()){var g=C.value;if(g.canEncode(e.charAt(h))){u.push(g),p=!0;break}}}catch(I){o={error:I}}finally{try{C&&!C.done&&(s=w.return)&&s.call(w)}finally{if(o)throw o.error}}p||(f=!0)}if(u.length===1&&!f)this.encoders=[u[0]];else{this.encoders=[];var A=0;try{for(var N=wn(u),E=N.next();!E.done;E=N.next()){var g=E.value;this.encoders[A++]=g}}catch(I){l={error:I}}finally{try{E&&!E.done&&(c=N.return)&&c.call(N)}finally{if(l)throw l.error}}}var S=-1;if(r!=null){for(var h=0;h<this.encoders.length;h++)if(this.encoders[h]!=null&&r.name===this.encoders[h].name){S=h;break}}this.priorityEncoderIndex=S}return t.prototype.length=function(){return this.encoders.length},t.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},t.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},t.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},t.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},t.prototype.canEncode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return!0},t.prototype.encode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return et.encode(Q.getCharAt(e),this.encoders[r].name)},t})(),jf=3,Rf=(function(){function t(e,r,n){this.fnc1=n;var a=new Tf(e,r,n);if(a.length()===1)for(var i=0;i<this.bytes.length;i++){var o=e.charAt(i).charCodeAt(0);this.bytes[i]=o===n?1e3:o}else this.bytes=this.encodeMinimally(e,a,n)}return t.prototype.getFNC1Character=function(){return this.fnc1},t.prototype.length=function(){return this.bytes.length},t.prototype.haveNCharacters=function(e,r){if(e+r-1>=this.bytes.length)return!1;for(var n=0;n<r;n++)if(this.isECI(e+n))return!1;return!0},t.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},t.prototype.subSequence=function(e,r){if(e<0||e>r||r>this.length())throw new Error(""+e);for(var n=new z,a=e;a<r;a++){if(this.isECI(a))throw new Error("value at "+a+" is not a character but an ECI");n.append(this.charAt(a))}return n.toString()},t.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},t.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},t.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},t.prototype.addEdge=function(e,r,n){(e[r][n.encoderIndex]==null||e[r][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(e[r][n.encoderIndex]=n)},t.prototype.addEdges=function(e,r,n,a,i,o){var s=e.charAt(a).charCodeAt(0),l=0,c=r.length();r.getPriorityEncoderIndex()>=0&&(s===o||r.canEncode(s,r.getPriorityEncoderIndex()))&&(l=r.getPriorityEncoderIndex(),c=l+1);for(var u=l;u<c;u++)(s===o||r.canEncode(s,u))&&this.addEdge(n,a+1,new Si(s,r,u,i,o))},t.prototype.encodeMinimally=function(e,r,n){var a=e.length,i=new Si[a+1][r.length()];this.addEdges(e,r,i,0,null,n);for(var o=1;o<=a;o++){for(var s=0;s<r.length();s++)i[o][s]!=null&&o<a&&this.addEdges(e,r,i,o,i[o][s],n);for(var s=0;s<r.length();s++)i[o-1][s]=null}for(var l=-1,c=X.MAX_VALUE,s=0;s<r.length();s++)if(i[a][s]!=null){var u=i[a][s];u.cachedTotalSize<c&&(c=u.cachedTotalSize,l=s)}if(l<0)throw new Error('Failed to encode "'+e+'"');for(var f=[],h=i[a][l];h!=null;){if(h.isFNC1())f.unshift(1e3);else for(var p=r.encode(h.c,h.encoderIndex),o=p.length-1;o>=0;o--)f.unshift(p[o]&255);var x=h.previous===null?0:h.previous.encoderIndex;x!==h.encoderIndex&&f.unshift(256+r.getECIValue(h.encoderIndex)),h=h.previous}for(var m=[],o=0;o<m.length;o++)m[o]=f[o];return m},t})(),Si=(function(){function t(e,r,n,a,i){this.c=e,this.encoderSet=r,this.encoderIndex=n,this.previous=a,this.fnc1=i,this.c=e===i?1e3:e;var o=this.isFNC1()?1:r.encode(e,n).length,s=a===null?0:a.encoderIndex;s!==n&&(o+=jf),a!=null&&(o+=a.cachedTotalSize),this.cachedTotalSize=o}return t.prototype.isFNC1=function(){return this.c===1e3},t})(),Df=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();var ki;(function(t){t[t.ASCII=0]="ASCII",t[t.C40=1]="C40",t[t.TEXT=2]="TEXT",t[t.X12=3]="X12",t[t.EDF=4]="EDF",t[t.B256=5]="B256"})(ki||(ki={}));(function(t){Df(e,t);function e(r,n,a,i,o){var s=t.call(this,r,n,a)||this;return s.shape=i,s.macroId=o,s}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(Rf);var Pf=(function(){function t(){}return t.prototype.isCompact=function(){return this.compact},t.prototype.setCompact=function(e){this.compact=e},t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(e){this.size=e},t.prototype.getLayers=function(){return this.layers},t.prototype.setLayers=function(e){this.layers=e},t.prototype.getCodeWords=function(){return this.codeWords},t.prototype.setCodeWords=function(e){this.codeWords=e},t.prototype.getMatrix=function(){return this.matrix},t.prototype.setMatrix=function(e){this.matrix=e},t})(),Ii=(function(){function t(){}return t.singletonList=function(e){return[e]},t.min=function(e,r){return e.sort(r)[0]},t})(),Mf=(function(){function t(e){this.previous=e}return t.prototype.getPrevious=function(){return this.previous},t})(),Lf=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),ma=(function(t){Lf(e,t);function e(r,n,a){var i=t.call(this,r)||this;return i.value=n,i.bitCount=a,i}return e.prototype.appendTo=function(r,n){r.appendBits(this.value,this.bitCount)},e.prototype.add=function(r,n){return new e(this,r,n)},e.prototype.addBinaryShift=function(r,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,r,n)},e.prototype.toString=function(){var r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+X.toBinaryString(r|1<<this.bitCount).substring(1)+">"},e})(Mf),Bf=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Ff=(function(t){Bf(e,t);function e(r,n,a){var i=t.call(this,r,0,0)||this;return i.binaryShiftStart=n,i.binaryShiftByteCount=a,i}return e.prototype.appendTo=function(r,n){for(var a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):a===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(n[this.binaryShiftStart+a],8)},e.prototype.addBinaryShift=function(r,n){return new e(this,r,n)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e})(ma);function Uf(t,e,r){return new Ff(t,e,r)}function Zt(t,e,r){return new ma(t,e,r)}var Gf=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],At=0,$r=1,Qe=2,xs=3,ct=4,Vf=new ma(null,0,0),_n=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],$f=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function Hf(t){var e,r;try{for(var n=$f(t),a=n.next();!a.done;a=n.next()){var i=a.value;ke.fill(i,-1)}}catch(o){e={error:o}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return t[At][ct]=0,t[$r][ct]=0,t[$r][At]=28,t[xs][ct]=0,t[Qe][ct]=0,t[Qe][At]=15,t}var ms=Hf(ke.createInt32Array(6,6)),zf=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Wf=(function(){function t(e,r,n,a){this.token=e,this.mode=r,this.binaryShiftByteCount=n,this.bitCount=a}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(e,r){var n=this.bitCount,a=this.token;if(e!==this.mode){var i=_n[this.mode][e];a=Zt(a,i&65535,i>>16),n+=i>>16}var o=e===Qe?4:5;return a=Zt(a,r,o),new t(a,e,0,n+o)},t.prototype.shiftAndAppend=function(e,r){var n=this.token,a=this.mode===Qe?4:5;return n=Zt(n,ms[this.mode][e],a),n=Zt(n,r,5),new t(n,this.mode,0,this.bitCount+a+5)},t.prototype.addBinaryShiftChar=function(e){var r=this.token,n=this.mode,a=this.bitCount;if(this.mode===ct||this.mode===Qe){var i=_n[n][At];r=Zt(r,i&65535,i>>16),a+=i>>16,n=At}var o=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,s=new t(r,n,this.binaryShiftByteCount+1,a+o);return s.binaryShiftByteCount===2078&&(s=s.endBinaryShift(e+1)),s},t.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var r=this.token;return r=Uf(r,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new t(r,this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(e){var r=this.bitCount+(_n[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?r+=t.calculateBinaryShiftCost(e)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(r+=10),r<=e.bitCount},t.prototype.toBitArray=function(e){for(var r,n,a=[],i=this.endBinaryShift(e.length).token;i!==null;i=i.getPrevious())a.unshift(i);var o=new je;try{for(var s=zf(a),l=s.next();!l.done;l=s.next()){var c=l.value;c.appendTo(o,e)}}catch(u){r={error:u}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return o},t.prototype.toString=function(){return Q.format("%s bits=%d bytes=%d",Gf[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(Vf,At,0,0),t})();function Xf(t){var e=Q.getCharCode(" "),r=Q.getCharCode("."),n=Q.getCharCode(",");t[At][e]=1;for(var a=Q.getCharCode("Z"),i=Q.getCharCode("A"),o=i;o<=a;o++)t[At][o]=o-i+2;t[$r][e]=1;for(var s=Q.getCharCode("z"),l=Q.getCharCode("a"),o=l;o<=s;o++)t[$r][o]=o-l+2;t[Qe][e]=1;for(var c=Q.getCharCode("9"),u=Q.getCharCode("0"),o=u;o<=c;o++)t[Qe][o]=o-u+2;t[Qe][n]=12,t[Qe][r]=13;for(var f=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],h=0;h<f.length;h++)t[xs][Q.getCharCode(f[h])]=h;for(var p=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],h=0;h<p.length;h++)Q.getCharCode(p[h])>0&&(t[ct][Q.getCharCode(p[h])]=h);return t}var An=Xf(ke.createInt32Array(5,256)),yr=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Yf=(function(){function t(e){this.text=e}return t.prototype.encode=function(){for(var e=Q.getCharCode(" "),r=Q.getCharCode(`
`),n=Ii.singletonList(Wf.INITIAL_STATE),a=0;a<this.text.length;a++){var i=void 0,o=a+1<this.text.length?this.text[a+1]:0;switch(this.text[a]){case Q.getCharCode("\r"):i=o===r?2:0;break;case Q.getCharCode("."):i=o===e?3:0;break;case Q.getCharCode(","):i=o===e?4:0;break;case Q.getCharCode(":"):i=o===e?5:0;break;default:i=0}i>0?(n=t.updateStateListForPair(n,a,i),a++):n=this.updateStateListForChar(n,a)}var s=Ii.min(n,function(l,c){return l.getBitCount()-c.getBitCount()});return s.toBitArray(this.text)},t.prototype.updateStateListForChar=function(e,r){var n,a,i=[];try{for(var o=yr(e),s=o.next();!s.done;s=o.next()){var l=s.value;this.updateStateForChar(l,r,i)}}catch(c){n={error:c}}finally{try{s&&!s.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}return t.simplifyStates(i)},t.prototype.updateStateForChar=function(e,r,n){for(var a=this.text[r]&255,i=An[e.getMode()][a]>0,o=null,s=0;s<=ct;s++){var l=An[s][a];if(l>0){if(o==null&&(o=e.endBinaryShift(r)),!i||s===e.getMode()||s===Qe){var c=o.latchAndAppend(s,l);n.push(c)}if(!i&&ms[e.getMode()][s]>=0){var u=o.shiftAndAppend(s,l);n.push(u)}}}if(e.getBinaryShiftByteCount()>0||An[e.getMode()][a]===0){var f=e.addBinaryShiftChar(r);n.push(f)}},t.updateStateListForPair=function(e,r,n){var a,i,o=[];try{for(var s=yr(e),l=s.next();!l.done;l=s.next()){var c=l.value;this.updateStateForPair(c,r,n,o)}}catch(u){a={error:u}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(a)throw a.error}}return this.simplifyStates(o)},t.updateStateForPair=function(e,r,n,a){var i=e.endBinaryShift(r);if(a.push(i.latchAndAppend(ct,n)),e.getMode()!==ct&&a.push(i.shiftAndAppend(ct,n)),n===3||n===4){var o=i.latchAndAppend(Qe,16-n).latchAndAppend(Qe,1);a.push(o)}if(e.getBinaryShiftByteCount()>0){var s=e.addBinaryShiftChar(r).addBinaryShiftChar(r+1);a.push(s)}},t.simplifyStates=function(e){var r,n,a,i,o=[];try{for(var s=yr(e),l=s.next();!l.done;l=s.next()){var c=l.value,u=!0,f=function(g){if(g.isBetterThanOrEqualTo(c))return u=!1,"break";c.isBetterThanOrEqualTo(g)&&(o=o.filter(function(y){return y!==g}))};try{for(var h=(a=void 0,yr(o)),p=h.next();!p.done;p=h.next()){var x=p.value,m=f(x);if(m==="break")break}}catch(g){a={error:g}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(a)throw a.error}}u&&o.push(c)}}catch(g){r={error:g}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return o},t})(),qf=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.encodeBytes=function(e){return t.encode(e,t.DEFAULT_EC_PERCENT,t.DEFAULT_AZTEC_LAYERS)},t.encode=function(e,r,n){var a=new Yf(e).encode(),i=X.truncDivision(a.getSize()*r,100)+11,o=a.getSize()+i,s,l,c,u,f;if(n!==t.DEFAULT_AZTEC_LAYERS){if(s=n<0,l=Math.abs(n),l>(s?t.MAX_NB_BITS_COMPACT:t.MAX_NB_BITS))throw new U(Q.format("Illegal value %s for layers",n));c=t.totalBitsInLayer(l,s),u=t.WORD_SIZE[l];var h=c-c%u;if(f=t.stuffBits(a,u),f.getSize()+i>h)throw new U("Data to large for user specified layer");if(s&&f.getSize()>u*64)throw new U("Data to large for user specified layer")}else{u=0,f=null;for(var p=0;;p++){if(p>t.MAX_NB_BITS)throw new U("Data too large for an Aztec code");if(s=p<=3,l=s?p+1:p,c=t.totalBitsInLayer(l,s),!(o>c)){(f==null||u!==t.WORD_SIZE[l])&&(u=t.WORD_SIZE[l],f=t.stuffBits(a,u));var h=c-c%u;if(!(s&&f.getSize()>u*64)&&f.getSize()+i<=h)break}}}var x=t.generateCheckWords(f,c,u),m=f.getSize()/u,g=t.generateModeMessage(s,l,m),y=(s?11:14)+l*4,b=new Int32Array(y),w;if(s){w=y;for(var p=0;p<b.length;p++)b[p]=p}else{w=y+1+2*X.truncDivision(X.truncDivision(y,2)-1,15);for(var C=X.truncDivision(y,2),A=X.truncDivision(w,2),p=0;p<C;p++){var N=p+X.truncDivision(p,15);b[C-p-1]=A-N-1,b[C+p]=A+N+1}}for(var E=new ut(w),p=0,S=0;p<l;p++){for(var I=(l-p)*4+(s?9:12),O=0;O<I;O++)for(var j=O*2,M=0;M<2;M++)x.get(S+j+M)&&E.set(b[p*2+M],b[p*2+O]),x.get(S+I*2+j+M)&&E.set(b[p*2+O],b[y-1-p*2-M]),x.get(S+I*4+j+M)&&E.set(b[y-1-p*2-M],b[y-1-p*2-O]),x.get(S+I*6+j+M)&&E.set(b[y-1-p*2-O],b[p*2+M]);S+=I*8}if(t.drawModeMessage(E,s,w,g),s)t.drawBullsEye(E,X.truncDivision(w,2),5);else{t.drawBullsEye(E,X.truncDivision(w,2),7);for(var p=0,O=0;p<X.truncDivision(y,2)-1;p+=15,O+=16)for(var M=X.truncDivision(w,2)&1;M<w;M+=2)E.set(X.truncDivision(w,2)-O,M),E.set(X.truncDivision(w,2)+O,M),E.set(M,X.truncDivision(w,2)-O),E.set(M,X.truncDivision(w,2)+O)}var G=new Pf;return G.setCompact(s),G.setSize(w),G.setLayers(l),G.setCodeWords(m),G.setMatrix(E),G},t.drawBullsEye=function(e,r,n){for(var a=0;a<n;a+=2)for(var i=r-a;i<=r+a;i++)e.set(i,r-a),e.set(i,r+a),e.set(r-a,i),e.set(r+a,i);e.set(r-n,r-n),e.set(r-n+1,r-n),e.set(r-n,r-n+1),e.set(r+n,r-n),e.set(r+n,r-n+1),e.set(r+n,r+n-1)},t.generateModeMessage=function(e,r,n){var a=new je;return e?(a.appendBits(r-1,2),a.appendBits(n-1,6),a=t.generateCheckWords(a,28,4)):(a.appendBits(r-1,5),a.appendBits(n-1,11),a=t.generateCheckWords(a,40,4)),a},t.drawModeMessage=function(e,r,n,a){var i=X.truncDivision(n,2);if(r)for(var o=0;o<7;o++){var s=i-3+o;a.get(o)&&e.set(s,i-5),a.get(o+7)&&e.set(i+5,s),a.get(20-o)&&e.set(s,i+5),a.get(27-o)&&e.set(i-5,s)}else for(var o=0;o<10;o++){var s=i-5+o+X.truncDivision(o,5);a.get(o)&&e.set(s,i-7),a.get(o+10)&&e.set(i+7,s),a.get(29-o)&&e.set(s,i+7),a.get(39-o)&&e.set(i-7,s)}},t.generateCheckWords=function(e,r,n){var a,i,o=e.getSize()/n,s=new hs(t.getGF(n)),l=X.truncDivision(r,n),c=t.bitsToWords(e,n,l);s.encode(c,l-o);var u=r%n,f=new je;f.appendBits(0,u);try{for(var h=qf(Array.from(c)),p=h.next();!p.done;p=h.next()){var x=p.value;f.appendBits(x,n)}}catch(m){a={error:m}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(a)throw a.error}}return f},t.bitsToWords=function(e,r,n){var a=new Int32Array(n),i,o;for(i=0,o=e.getSize()/r;i<o;i++){for(var s=0,l=0;l<r;l++)s|=e.get(i*r+l)?1<<r-l-1:0;a[i]=s}return a},t.getGF=function(e){switch(e){case 4:return He.AZTEC_PARAM;case 6:return He.AZTEC_DATA_6;case 8:return He.AZTEC_DATA_8;case 10:return He.AZTEC_DATA_10;case 12:return He.AZTEC_DATA_12;default:throw new U("Unsupported word size "+e)}},t.stuffBits=function(e,r){for(var n=new je,a=e.getSize(),i=(1<<r)-2,o=0;o<a;o+=r){for(var s=0,l=0;l<r;l++)(o+l>=a||e.get(o+l))&&(s|=1<<r-1-l);(s&i)===i?(n.appendBits(s&i,r),o--):(s&i)===0?(n.appendBits(s|1,r),o--):n.appendBits(s,r)}return n},t.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.DEFAULT_EC_PERCENT=33,t.DEFAULT_AZTEC_LAYERS=0,t.MAX_NB_BITS=32,t.MAX_NB_BITS_COMPACT=4,t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),t})();var Zf=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Kf=(function(t){Zf(e,t);function e(r){var n=t.call(this,r.width,r.height)||this;return n.canvas=r,n.tempCanvasElement=null,n.buffer=e.makeBufferFromCanvasImageData(r),n}return e.makeBufferFromCanvasImageData=function(r){var n;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}if(!n)throw new Error("Couldn't get canvas context.");var a=n.getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(a.data,r.width,r.height)},e.toGrayscaleBuffer=function(r,n,a){for(var i=new Uint8ClampedArray(n*a),o=0,s=0,l=r.length;o<l;o+=4,s++){var c=void 0,u=r[o+3];if(u===0)c=255;else{var f=r[o],h=r[o+1],p=r[o+2];c=306*f+601*h+117*p+512>>10}i[s]=c}return i},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new U("Requested row is outside the image: "+r);var a=this.getWidth(),i=r*a;return n===null?n=this.buffer.slice(i,i+a):(n.length<a&&(n=new Uint8ClampedArray(a)),n.set(this.buffer.slice(i,i+a))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,i){return t.prototype.crop.call(this,r,n,a,i),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new nn(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement();if(!n)throw new Error("Could not create a Canvas element.");var a=r*e.DEGREE_TO_RADIANS,i=this.canvas.width,o=this.canvas.height,s=Math.ceil(Math.abs(Math.cos(a))*i+Math.abs(Math.sin(a))*o),l=Math.ceil(Math.abs(Math.sin(a))*i+Math.abs(Math.cos(a))*o);n.width=s,n.height=l;var c=n.getContext("2d");if(!c)throw new Error("Could not create a Canvas Context element.");return c.translate(s/2,l/2),c.rotate(a),c.drawImage(this.canvas,i/-2,o/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.DEGREE_TO_RADIANS=Math.PI/180,e})(fr);function gs(){return typeof navigator<"u"}function Jf(){return gs()&&!!navigator.mediaDevices}function Qf(){return!!(Jf()&&navigator.mediaDevices.enumerateDevices)}var Lt=function(){return Lt=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Lt.apply(this,arguments)},ge=function(t,e,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function s(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):a(u.value).then(s,l)}c((n=n.apply(t,e||[])).next())})},ve=function(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(i=c[0]&2?a.return:c[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,c[1])).done)return i;switch(a=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,a=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],a=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Cn=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eh={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},zt=(function(){function t(e,r,n){r===void 0&&(r=new Map),n===void 0&&(n={}),this.reader=e,this.hints=r,this.options=Lt(Lt({},eh),n)}return Object.defineProperty(t.prototype,"possibleFormats",{set:function(e){this.hints.set(fe.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),t.addVideoSource=function(e,r){try{e.srcObject=r}catch{console.error("got interrupted by new loading request")}},t.mediaStreamSetTorch=function(e,r){return ge(this,void 0,void 0,function(){return ve(this,function(n){switch(n.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:r?"flash":"off",torch:!!r}]})];case 1:return n.sent(),[2]}})})},t.mediaStreamIsTorchCompatible=function(e){var r,n,a=e.getVideoTracks();try{for(var i=Cn(a),o=i.next();!o.done;o=i.next()){var s=o.value;if(t.mediaStreamIsTorchCompatibleTrack(s))return!0}}catch(l){r={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return!1},t.mediaStreamIsTorchCompatibleTrack=function(e){try{var r=e.getCapabilities();return"torch"in r}catch(n){return console.error(n),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},t.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},t.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new ye("element with id '".concat(e,"' not found"));if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new ye("element with id '".concat(e,"' must be an ").concat(r," element"));return n},t.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return t.getMediaElement(e,"video");if(!e&&typeof document<"u"){var r=document.createElement("video");return r.width=200,r.height=200,r}throw new Error("Couldn't get videoElement from videoSource!")},t.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return t.getMediaElement(e,"img");if(typeof e>"u"){var r=document.createElement("img");return r.width=200,r.height=200,r}throw new Error("Couldn't get imageElement from imageSource!")},t.prepareVideoElement=function(e){var r=t.createVideoElement(e);return r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.createBinaryBitmapFromCanvas=function(e){var r=new Kf(e),n=new ts(r);return new es(n)},t.drawImageOnCanvas=function(e,r){e.drawImage(r,0,0)},t.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},t.createCaptureCanvas=function(e){if(!e)throw new ye("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var r=document.createElement("canvas"),n=t.getMediaElementDimensions(e),a=n.width,i=n.height;return r.style.width=a+"px",r.style.height=i+"px",r.width=a,r.height=i,r},t.tryPlayVideo=function(e){return ge(this,void 0,void 0,function(){var r;return ve(this,function(n){switch(n.label){case 0:if(e?.ended)return console.error("Trying to play video that has ended."),[2,!1];if(t.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.play()];case 2:return n.sent(),[2,!0];case 3:return r=n.sent(),console.warn("It was not possible to play the video.",r),[2,!1];case 4:return[2]}})})},t.createCanvasFromMediaElement=function(e){var r=t.createCaptureCanvas(e),n=r.getContext("2d");if(!n)throw new Error("Couldn't find Canvas 2D Context.");return t.drawImageOnCanvas(n,e),r},t.createBinaryBitmapFromMediaElem=function(e){var r=t.createCanvasFromMediaElement(e);return t.createBinaryBitmapFromCanvas(r)},t.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},t.listVideoInputDevices=function(){return ge(this,void 0,void 0,function(){var e,r,n,a,i,o,s,l,c,u,f,h;return ve(this,function(p){switch(p.label){case 0:if(!gs())throw new Error("Can't enumerate devices, navigator is not present.");if(!Qf())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=p.sent(),r=[];try{for(n=Cn(e),a=n.next();!a.done;a=n.next())i=a.value,o=i.kind==="video"?"videoinput":i.kind,o==="videoinput"&&(s=i.deviceId||i.id,l=i.label||"Video device ".concat(r.length+1),c=i.groupId,u={deviceId:s,label:l,kind:o,groupId:c},r.push(u))}catch(x){f={error:x}}finally{try{a&&!a.done&&(h=n.return)&&h.call(n)}finally{if(f)throw f.error}}return[2,r]}})})},t.findDeviceById=function(e){return ge(this,void 0,void 0,function(){var r;return ve(this,function(n){switch(n.label){case 0:return[4,t.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(a){return a.deviceId===e})]:[2]}})})},t.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},t.releaseAllStreams=function(){t.streamTracker.length!==0&&t.streamTracker.forEach(function(e){e.getTracks().forEach(function(r){return r.stop()})}),t.streamTracker=[]},t.playVideoOnLoadAsync=function(e,r){return ge(this,void 0,void 0,function(){var n;return ve(this,function(a){switch(a.label){case 0:return[4,t.tryPlayVideo(e)];case 1:return n=a.sent(),n?[2,!0]:[2,new Promise(function(i,o){var s=setTimeout(function(){t.isVideoPlaying(e)||(o(!1),e.removeEventListener("canplay",l))},r),l=function(){t.tryPlayVideo(e).then(function(c){clearTimeout(s),e.removeEventListener("canplay",l),i(c)})};e.addEventListener("canplay",l)})]}})})},t.attachStreamToVideo=function(e,r,n){return n===void 0&&(n=5e3),ge(this,void 0,void 0,function(){var a;return ve(this,function(i){switch(i.label){case 0:return a=t.prepareVideoElement(r),t.addVideoSource(a,e),[4,t.playVideoOnLoadAsync(a,n)];case 1:return i.sent(),[2,a]}})})},t._waitImageLoad=function(e){return new Promise(function(r,n){var a=1e4,i=setTimeout(function(){t.isImageLoaded(e)||(e.removeEventListener("load",o),n())},a),o=function(){clearTimeout(i),e.removeEventListener("load",o),r()};e.addEventListener("load",o)})},t.checkCallbackFnOrThrow=function(e){if(!e)throw new ye("`callbackFn` is a required parameter, you cannot capture results without it.")},t.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(r){return r.stop()}),e=void 0},t.prototype.decode=function(e){var r=t.createCanvasFromMediaElement(e);return this.decodeFromCanvas(r)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},t.prototype.decodeFromCanvas=function(e){var r=t.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(r)},t.prototype.decodeFromImageElement=function(e){return ge(this,void 0,void 0,function(){var r;return ve(this,function(n){switch(n.label){case 0:if(!e)throw new ye("An image element must be provided.");return r=t.prepareImageElement(e),[4,this._decodeOnLoadImage(r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeFromImageUrl=function(e){return ge(this,void 0,void 0,function(){var r;return ve(this,function(n){switch(n.label){case 0:if(!e)throw new ye("An URL must be provided.");r=t.prepareImageElement(),r.src=e,n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.decodeFromImageElement(r)];case 2:return[2,n.sent()];case 3:return t.destroyImageElement(r),[7];case 4:return[2]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return ge(this,void 0,void 0,function(){var a,i;return ve(this,function(o){switch(o.label){case 0:return t.checkCallbackFnOrThrow(n),[4,this.getUserMedia(e)];case 1:a=o.sent(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.decodeFromStream(a,r,n)];case 3:return[2,o.sent()];case 4:throw i=o.sent(),t.disposeMediaStream(a),i;case 5:return[2]}})})},t.prototype.decodeFromStream=function(e,r,n){return ge(this,void 0,void 0,function(){var a,i,o,s,l,c,u,f,h,p=this;return ve(this,function(x){switch(x.label){case 0:return t.checkCallbackFnOrThrow(n),a=this.options.tryPlayVideoTimeout,[4,t.attachStreamToVideo(e,r,a)];case 1:return i=x.sent(),o=function(){t.disposeMediaStream(e),t.cleanVideoSource(i)},s=this.scan(i,n,o),l=e.getVideoTracks(),c=Lt(Lt({},s),{stop:function(){s.stop()},streamVideoConstraintsApply:function(m,g){return ge(this,void 0,void 0,function(){var y,b,w,C,A,N,E;return ve(this,function(S){switch(S.label){case 0:y=g?l.filter(g):l,S.label=1;case 1:S.trys.push([1,6,7,8]),b=Cn(y),w=b.next(),S.label=2;case 2:return w.done?[3,5]:(C=w.value,[4,C.applyConstraints(m)]);case 3:S.sent(),S.label=4;case 4:return w=b.next(),[3,2];case 5:return[3,8];case 6:return A=S.sent(),N={error:A},[3,8];case 7:try{w&&!w.done&&(E=b.return)&&E.call(b)}finally{if(N)throw N.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(m){return l.find(m).getConstraints()},streamVideoSettingsGet:function(m){return l.find(m).getSettings()},streamVideoCapabilitiesGet:function(m){return l.find(m).getCapabilities()}}),u=t.mediaStreamIsTorchCompatible(e),u&&(f=l?.find(function(m){return t.mediaStreamIsTorchCompatibleTrack(m)}),h=function(m){return ge(p,void 0,void 0,function(){return ve(this,function(g){switch(g.label){case 0:return[4,t.mediaStreamSetTorch(f,m)];case 1:return g.sent(),[2]}})})},c.switchTorch=h,c.stop=function(){return ge(p,void 0,void 0,function(){return ve(this,function(m){switch(m.label){case 0:return s.stop(),[4,h(!1)];case 1:return m.sent(),[2]}})})}),[2,c]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return ge(this,void 0,void 0,function(){var a,i;return ve(this,function(o){switch(o.label){case 0:return t.checkCallbackFnOrThrow(n),e?a={deviceId:{exact:e}}:a={facingMode:"environment"},i={video:a},[4,this.decodeFromConstraints(i,r,n)];case 1:return[2,o.sent()]}})})},t.prototype.decodeFromVideoElement=function(e,r){return ge(this,void 0,void 0,function(){var n,a;return ve(this,function(i){switch(i.label){case 0:if(t.checkCallbackFnOrThrow(r),!e)throw new ye("A video element must be provided.");return n=t.prepareVideoElement(e),a=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(n,a)];case 1:return i.sent(),[2,this.scan(n,r)]}})})},t.prototype.decodeFromVideoUrl=function(e,r){return ge(this,void 0,void 0,function(){var n,a,i,o;return ve(this,function(s){switch(s.label){case 0:if(t.checkCallbackFnOrThrow(r),!e)throw new ye("An URL must be provided.");return n=t.prepareVideoElement(),n.src=e,a=function(){t.cleanVideoSource(n)},i=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(n,i)];case 1:return s.sent(),o=this.scan(n,r,a),[2,o]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return ge(this,void 0,void 0,function(){var n;return ve(this,function(a){switch(a.label){case 0:return[4,this.getUserMedia(e)];case 1:return n=a.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,a.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return ge(this,void 0,void 0,function(){var n,a,i;return ve(this,function(o){switch(o.label){case 0:return n=!!r,[4,t.attachStreamToVideo(e,r)];case 1:a=o.sent(),o.label=2;case 2:return o.trys.push([2,,4,5]),[4,this.scanOneResult(a)];case 3:return i=o.sent(),[2,i];case 4:return n||t.cleanVideoSource(a),[7];case 5:return[2]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return ge(this,void 0,void 0,function(){var n,a;return ve(this,function(i){switch(i.label){case 0:return e?n={deviceId:{exact:e}}:n={facingMode:"environment"},a={video:n},[4,this.decodeOnceFromConstraints(a,r)];case 1:return[2,i.sent()]}})})},t.prototype.decodeOnceFromVideoElement=function(e){return ge(this,void 0,void 0,function(){var r,n;return ve(this,function(a){switch(a.label){case 0:if(!e)throw new ye("A video element must be provided.");return r=t.prepareVideoElement(e),n=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(r,n)];case 1:return a.sent(),[4,this.scanOneResult(r)];case 2:return[2,a.sent()]}})})},t.prototype.decodeOnceFromVideoUrl=function(e){return ge(this,void 0,void 0,function(){var r,n;return ve(this,function(a){switch(a.label){case 0:if(!e)throw new ye("An URL must be provided.");r=t.prepareVideoElement(),r.src=e,n=this.decodeOnceFromVideoElement(r),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,n];case 2:return[2,a.sent()];case 3:return t.cleanVideoSource(r),[7];case 4:return[2]}})})},t.prototype.scanOneResult=function(e,r,n,a){var i=this;return r===void 0&&(r=!0),n===void 0&&(n=!0),a===void 0&&(a=!0),new Promise(function(o,s){i.scan(e,function(l,c,u){if(l){o(l),u.stop();return}if(c){if(c instanceof T&&r||c instanceof _e&&n||c instanceof P&&a)return;u.stop(),s(c)}})})},t.prototype.scan=function(e,r,n){var a=this;t.checkCallbackFnOrThrow(r);var i=t.createCaptureCanvas(e),o;try{o=i.getContext("2d",{willReadFrequently:!0})}catch{o=i.getContext("2d")}if(!o)throw new Error("Couldn't create canvas for visual element scan.");var s=function(){o=void 0,i=void 0},l=!1,c,u=function(){l=!0,clearTimeout(c),s(),n&&n()},f={stop:u},h=function(){if(!l)try{t.drawImageOnCanvas(o,e);var p=a.decodeFromCanvas(i);r(p,void 0,f),c=setTimeout(h,a.options.delayBetweenScanSuccess)}catch(y){r(void 0,y,f);var x=y instanceof _e,m=y instanceof P,g=y instanceof T;if(x||m||g){c=setTimeout(h,a.options.delayBetweenScanAttempts);return}s(),n&&n(y)}};return h(),f},t.prototype._decodeOnLoadImage=function(e){return ge(this,void 0,void 0,function(){var r;return ve(this,function(n){switch(n.label){case 0:return r=t.isImageLoaded(e),r?[3,2]:[4,t._waitImageLoad(e)];case 1:n.sent(),n.label=2;case 2:return[2,this.decode(e)]}})})},t.prototype.getUserMedia=function(e){return ge(this,void 0,void 0,function(){var r;return ve(this,function(n){switch(n.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=n.sent(),t.streamTracker.push(r),[2,r]}})})},t.streamTracker=[],t})(),th=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(t){th(e,t);function e(r,n){return t.call(this,new Br,r,n)||this}return e})(zt);var rh=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(t){rh(e,t);function e(r,n){return t.call(this,new Pt(r),r,n)||this}return e})(zt);var nh=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(t){nh(e,t);function e(r,n){return t.call(this,new Ur,r,n)||this}return e})(zt);var ah=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Oi=(function(t){ah(e,t);function e(r,n){var a=this,i=new fs;return i.setHints(r),a=t.call(this,i,r,n)||this,a.reader=i,a}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(r){this.hints.set(fe.POSSIBLE_FORMATS,r),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e.prototype.setHints=function(r){this.hints=r,this.reader.setHints(this.hints)},e})(zt),ih=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(t){ih(e,t);function e(r,n){return t.call(this,new Vr,r,n)||this}return e})(zt);var oh=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(t){oh(e,t);function e(r,n){return t.call(this,new Gr,r,n)||this}return e})(zt);const En=1e3,sh=[L.QR_CODE,L.CODE_128,L.CODE_39,L.CODE_93,L.ITF,L.EAN_13,L.EAN_8,L.UPC_A,L.UPC_E,L.UPC_EAN_EXTENSION];function lh(t){if(!t)return!1;if(`${t.name||""}`.toLowerCase().includes("notfound"))return!0;const r=`${t.message||""}`.toLowerCase();return r.includes("no multiformat readers")||r.includes("not found")}function dh({open:t,onClose:e,onDetected:r}){const n=v.useRef(null),a=v.useRef(null),i=v.useRef(null),[o,s]=v.useState([]),[l,c]=v.useState(""),[u,f]=v.useState(!1),[h,p]=v.useState(""),[x,m]=v.useState(""),g=v.useRef(0),y=v.useRef(0),b=v.useCallback(()=>{a.current?.stop(),a.current=null,i.current?.reset?.(),i.current=null},[]);return v.useEffect(()=>{if(!t){b(),s([]),c(""),p(""),m(""),y.current=0,g.current=0,f(!1);return}let w=!1;async function C(){p("");try{if(!navigator?.mediaDevices?.getUserMedia){p("This browser does not support camera access. Please try a different browser."),m(""),f(!1);return}if(f(!0),m("Requesting camera access…"),(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(E=>E.stop()),w)return;const N=await Oi.listVideoInputDevices();if(w)return;if(s(N),!N.length){p("No camera devices were detected. Please connect a camera and try again."),f(!1);return}c(E=>E||N[0]?.deviceId||""),m("")}catch(A){console.error("Barcode scanner: unable to enumerate video devices",A),w||(A?.name==="NotAllowedError"||A?.name==="SecurityError"?p("Camera access was denied. Please allow camera permissions in your browser settings and try again."):p("Unable to access the camera. Please check browser permissions and try again."),m(""),f(!1))}}return C(),()=>{w=!0,b()}},[t,b]),v.useEffect(()=>{if(!t||!l)return;const w=new Map;w.set(fe.POSSIBLE_FORMATS,sh),w.set(fe.TRY_HARDER,!0);const C=new Oi(w,En);i.current=C;let A=!0;return y.current=0,g.current=0,f(!0),p(""),m("Preparing camera…"),C.decodeFromVideoDevice(l,n.current,(N,E,S)=>{if(A){if(N){const I=N.getText?.()||"";I&&r?.(I),S?.stop(),e?.()}if(E){if(lh(E)){const O=Date.now();if(O-g.current>=En){g.current=O;const j=y.current+1;y.current=j,m(`Still scanning… attempt ${j}.`)}p("");return}console.error("Barcode scanner: decode error",E),p("Unable to read the barcode. Try holding the product steady and ensure it fills the frame.");const I=Date.now();if(I-g.current>=En){g.current=I;const O=y.current+1;y.current=O,m(`Retrying in a second… attempt ${O}.`)}}}}).then(N=>{if(!A){N?.stop();return}a.current=N,f(!1),m("Scanning for a barcode…")}).catch(N=>{A&&(console.error("Barcode scanner: failed to start video stream",N),p("Unable to start the camera stream. Please verify permissions and refresh the page."),f(!1))}),()=>{A=!1,f(!1),b()}},[l,e,r,t,b]),t?d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/70 px-4 py-8",children:d.jsxs("div",{className:"relative w-full max-w-2xl rounded-3xl bg-white p-6 shadow-xl dark:bg-slate-900",children:[d.jsx("button",{type:"button",onClick:e,className:"absolute right-4 top-4 inline-flex h-9 w-9 items-center justify-center rounded-full bg-slate-100 text-slate-600 hover:bg-slate-200 focus:outline-none focus:ring-2 focus:ring-brand-500 dark:bg-slate-800 dark:text-slate-200 dark:hover:bg-slate-700","aria-label":"Close barcode scanner",children:d.jsx(nl,{className:"h-5 w-5"})}),d.jsxs("div",{className:"flex flex-col gap-4",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Scan a barcode"}),d.jsx("p",{className:"mt-1 text-sm text-slate-600 dark:text-slate-300",children:"Allow camera access so we can scan the product barcode and look it up for you."})]}),o.length>1&&d.jsxs("label",{className:"flex flex-col gap-1 text-sm text-slate-700 dark:text-slate-200",children:["Camera",d.jsx("select",{className:"rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",value:l,onChange:w=>c(w.target.value),children:o.map(w=>d.jsx("option",{value:w.deviceId,children:w.label||`Camera ${w.deviceId.slice(-4)}`},w.deviceId))})]}),d.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-black shadow-inner",children:[d.jsx("video",{ref:n,className:"h-full w-full object-cover",autoPlay:!0,muted:!0,playsInline:!0}),u&&d.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900/60",children:d.jsx("span",{className:"rounded-full bg-white/90 px-4 py-2 text-sm font-medium text-slate-700 shadow",children:"Initializing camera…"})})]}),d.jsxs("div",{className:"flex flex-col gap-2",children:[h&&d.jsx("p",{className:"rounded-xl border border-amber-300 bg-amber-50 px-3 py-2 text-sm text-amber-700 dark:border-amber-500/60 dark:bg-amber-500/10 dark:text-amber-200",children:h}),d.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:x||"Once a barcode is detected it will automatically populate the chat."})]})]})]})}):null}const Ti={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var ji={};const Nn=typeof import.meta<"u"&&Ti?Ti:void 0,Sn=typeof globalThis<"u"&&ji?ji:void 0;function ch(t){if(Nn&&Nn[t]!==void 0)return Nn[t];if(Sn&&Sn[t]!==void 0)return Sn[t]}const uh=(ch("VITE_CHAT_BASE_URL")||"https://groq-endpoint.louispaulet13.workers.dev").replace(/\/$/,"");function kn(t="",e=180){if(!t)return"";const r=String(t).trim();return r.length<=e?r:`${r.slice(0,e)}...`}async function pr(t,e,{signal:r,model:n,baseUrl:a}={}){const i=t?.logLabel||"Chat",o=(a||t?.defaultBaseUrl||uh||"").replace(/\/$/,"");if(!o)throw new Error("Missing chat service base URL. Set VITE_CHAT_BASE_URL or provide an override.");const s=`${o}/chat`,l=typeof performance<"u"&&typeof performance.now=="function"?performance.now():Date.now(),u=e?.[e.length-1]?.content||"";console.log(`[${i}] → POST %s — model: %s — prompt: %s`,s,n||"default",kn(u,160));const f=n?{model:n,messages:e}:{messages:e};let h;try{h=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f),signal:r})}catch(b){throw new Error(`Request to ${i} service failed: ${b?.message||b}`)}const p=typeof performance<"u"&&typeof performance.now=="function"?performance.now():Date.now(),x=Math.round(p-l);let m="",g;if(typeof h.text=="function"){m=await h.text();try{g=JSON.parse(m)}catch{g=void 0}}else if(typeof h.json=="function"){g=await h.json();try{m=JSON.stringify(g)}catch{m="[object Object]"}}if(!h.ok){const b=h.statusText||"Unknown error",w=kn(m||b,200);throw new Error(`Remote chat service returned ${h.status}: ${w}`)}if(!g)try{g=JSON.parse(m)}catch{throw new Error("Remote chat service returned invalid JSON")}let y=g?.choices?.[0]?.message?.content;if(!y&&typeof g?.output_text=="string"&&(y=g.output_text),y=typeof y=="string"?y.trim():"",!y)throw new Error("Remote chat service returned an empty message");return console.log(`[${i}] ← %s %d in %dms — response: %s`,s,h.status,x,kn(y,160)),{content:y,payload:g,status:h.status,duration:x,baseUrl:o}}const vs=3600*24*365,Ri=3500;function Wt(){return typeof document>"u"?null:document}function ga(t=Wt()){return!t||!t.cookie?[]:t.cookie.split(";").map(e=>e.trim()).filter(Boolean).map(e=>{const r=e.indexOf("=");return r===-1?{name:e,value:""}:{name:e.slice(0,r),value:e.slice(r+1)}})}function sn(t){if(!t)return"";const e=ga().find(r=>r.name===t);return e?e.value:""}function va(t,e,r=vs){const n=Wt();if(!n||!t)return;const a=encodeURIComponent(e);n.cookie=`${t}=${a}; path=/; max-age=${r}`}function Ft(t){const e=Wt();!e||!t||(e.cookie=`${t}=; path=/; max-age=0`)}function ft(t){const e=Wt();if(!e||!t||!e.cookie)return;const r=`${t}__`;ga(e).filter(n=>n.name===t||n.name.startsWith(r)).forEach(n=>{e.cookie=`${n.name}=; path=/; max-age=0`})}function ba(t){if(!t)return"";const e=`${t}__`,r=ga().filter(a=>a.name===t||a.name.startsWith(e)).map(a=>({name:a.name,value:a.value||"",index:a.name===t?0:Number.parseInt(a.name.slice(e.length),10)})).filter(a=>Number.isInteger(a.index)&&a.index>=0).sort((a,i)=>a.index-i.index);if(r.length===0)return"";const n=r.map(a=>a.value).join("");if(!n)return"";try{return decodeURIComponent(n)}catch{return""}}function ya(t,e,{maxAgeSeconds:r=vs,chunkSize:n=Ri}={}){const a=Wt();if(!a||!t)return;const i=typeof e=="string"?e:JSON.stringify(e);if(!i){ft(t);return}const o=encodeURIComponent(i),s=Math.max(1,Number.parseInt(n,10)||Ri);ft(t);for(let l=0;l*s<o.length;l+=1){const c=l*s,u=o.slice(c,c+s),f=l===0?t:`${t}__${l}`;a.cookie=`${f}=${u}; path=/; max-age=${r}`}}const wa="allergy_notes",fh="allergyfinder_conversations",Hr="allin_profile_name",Bt="allin_chat_counts",bs="allergyfinder",hh="allin_conversations_",ph=["allergyfinder","stlviewer","pokedex"],_a=3600*24*365,xh=3500,mh=Number.POSITIVE_INFINITY;function sr(){try{return decodeURIComponent(sn(wa))}catch{return""}}function ys(t,e=_a){va(wa,t,e)}function Di(){const t=sr();return t?t.split(/\r?\n/).map(e=>e.replace(/^[-*+\s]+/,"").trim()).filter(e=>e.length>0).length:0}function gh(t){const e=t?.role==="assistant"?"assistant":"user",r=typeof t?.content=="string"?t.content:"";if(!r)return null;const n=typeof t?.timestamp=="number"&&Number.isFinite(t.timestamp)?Math.round(t.timestamp):Date.now(),a={role:e,content:r,timestamp:n};if(t?.sources&&Array.isArray(t.sources)&&t.sources.length>0)try{a.sources=JSON.parse(JSON.stringify(t.sources))}catch{a.sources=t.sources.filter(i=>typeof i=="string")}return t?.error&&(a.error=!0),a}function vh(t){if(!t)return null;const r=(Array.isArray(t.messages)?t.messages:[]).map(gh).filter(Boolean);if(r.length===0)return null;const n=typeof t.title=="string"&&t.title.trim()?t.title.trim().slice(0,60):"Saved chat",a={id:typeof t.id=="string"?t.id:void 0,title:n,messages:r};return t?.createdAt&&(a.createdAt=t.createdAt),a}function ws(t){return(Array.isArray(t)?t:[]).filter(Boolean).map(vh).filter(Boolean)}function Aa(t){return!t||t===bs?fh:`${hh}${t}`}function _s(t){const e=Aa(t),r=ba(e)||(()=>{const n=sn(e);return n?decodeURIComponent(n):""})();if(!r)return[];try{const n=JSON.parse(r);return ws(n)}catch{return[]}}function In(t,e){const r=Aa(t),n=ws(e);if(n.length===0){ft(r),Ea(t);return}ya(r,n,{maxAgeSeconds:_a}),As(t,n.length)}function Zn(t){const e=Aa(t);ft(e),Ea(t)}function bh(){Zn(bs)}function ln(){const t=sn(Bt);if(!t)return{};try{const e=decodeURIComponent(t),r=JSON.parse(e);if(r&&typeof r=="object")return r}catch{}return{}}function Ca(t){if(!t||Object.keys(t).length===0){Ft(Bt);return}try{const e=JSON.stringify(t);if(e.length>xh){Ft(Bt);return}va(Bt,e)}catch{Ft(Bt)}}function Pi(){const t=ln(),e={allergyfinder:Number.parseInt(t.allergyfinder,10)||0,stlviewer:Number.parseInt(t.stlviewer,10)||0,pokedex:Number.parseInt(t.pokedex,10)||0};return ph.forEach(r=>{if(e[r]===0){const n=_s(r);n.length>0&&(e[r]=n.length)}}),e}function yh(t){if(!t)return;const e=ln();e[t]=(Number.parseInt(e[t],10)||0)+1,Ca(e)}function As(t,e){if(!t)return;const r=Math.max(0,Number(e)||0),n=ln(),a=Number.parseInt(n[t],10)||0;r===0&&a===0||r<=a||(n[t]=r,Ca(n))}function Ea(t){const e=ln();!t||!(t in e)||(delete e[t],Ca(e))}function wh(){Ft(Bt)}function _h(){const t=sn(Hr);if(!t)return"";try{return decodeURIComponent(t)}catch{return""}}function Mi(t,e=_a){if(!t){Ft(Hr);return}va(Hr,t,e)}function Ah(){Ft(Hr)}function Ch(){const t=Wt();!t||!t.cookie||t.cookie.split(";").forEach(e=>{const r=e.indexOf("="),n=r>-1?e.slice(0,r).trim():e.trim();n&&(t.cookie=`${n}=; path=/; max-age=0`)})}const Eh=/【[^】]+】/g;function Nh(t){return t&&t.replace(Eh,"")}function Sh(t,e){let r=e||"";return r&&(t?.id==="allergyfinder"&&(r=Nh(r)),r.trim())}const Li=/openfoodfacts\.org\/(?:[a-z]{2}\/)?produit\/(\d{6,})/gi,Bi=/\b(\d{8,18})\b/g;function kh(t){if(!t)return null;const e=String(t);Li.lastIndex=0;let r;for(;r=Li.exec(e);){const o=r[1];if(o)return o}const n=e.replace(/[^0-9]/g,""),a=e.replace(/[0-9\s-]/g,"");if(n.length>=8&&n.length<=18&&!a)return n;Bi.lastIndex=0;const i=Bi.exec(e);return i&&i[1]?i[1]:null}async function Ih(t,e,{signal:r}={}){const n=typeof t=="string"?t.trim().replace(/\/$/,""):"";if(!n||!e)return null;const a=`${n}/flavor-finder/${encodeURIComponent(e)}`;console.log(`Calling flavor finder API: ${a}`);let i;try{i=await fetch(a,{method:"GET",headers:{Accept:"application/json"},signal:r})}catch(l){const c=new Error(`Flavor Finder request failed: ${l?.message||l}`);throw c.cause=l,c}const o=await i.text();let s;try{s=JSON.parse(o)}catch{s=null}if(console.log("Flavor finder response:",s),!i.ok){const l=new Error(`Flavor Finder returned ${i.status}`);throw l.status=i.status,l.body=o,l}return s||null}function tr(t){return t==null?"":Array.isArray(t)?t.map(e=>e==null?"":typeof e=="string"?e.trim():typeof e=="number"||typeof e=="boolean"?String(e):"").filter(Boolean).join(", "):typeof t=="number"||typeof t=="boolean"?String(t):typeof t=="string"?t.trim():""}function Ze(t,e,r){const n=tr(r);n&&t.push(`${e}: ${n}`)}function Oh(t,e){const r=Array.isArray(e?.products)?e.products:[];if(!t||r.length===0)return null;const n=[`OpenFoodFacts product context for barcode ${t}:`],a=tr(e?.resolvedUrl);a&&n.push(`Resolved URL: ${a}`);const i=tr(e?.resolvedSlug);i&&n.push(`Resolved slug: ${i}`);const o=tr(e?.sources);o&&n.push(`Sources: ${o}`);const s=3;return r.slice(0,s).forEach((l,c)=>{const u=tr(l?.name||l?.genericName||l?.generic_name||l?.product_name)||`Product ${c+1}`,f=`Product ${c+1}: ${u}`;n.push(f);const h=[];Ze(h,"Brands",l?.brands),Ze(h,"Quantity",l?.quantity),Ze(h,"Serving size",l?.servingSize||l?.serving_size),Ze(h,"Nutri-Score",l?.nutriscore||l?.nutrition_grade),Ze(h,"NOVA group",l?.nova),Ze(h,"Labels",l?.labels),Ze(h,"Categories",l?.categories),Ze(h,"Ingredients",l?.ingredients),Ze(h,"Allergens",l?.allergens),Ze(h,"Traces",l?.traces),Ze(h,"Additives",l?.additives),Ze(h,"Ingredients analysis",l?.ingredientsAnalysis||l?.ingredients_analysis),h.length>0&&h.forEach(p=>{n.push(`  - ${p}`)})}),r.length>s&&n.push(`(+ ${r.length-s} additional products omitted)`),n.join(`
`)}async function Th(t,e,{signal:r}={}){const n=kh(e);if(!n)return null;const a=await Ih(t,n,{signal:r});if(!a)return null;const i=Oh(n,a);return i?{code:n,summary:i,payload:a}:null}const jh=new Set(["allergyfinder","stlviewer","pokedex"]);function Rh(t){const e=(t||"").trim();if(!e)throw new Error("Endpoint is required.");return e.replace(/\/$/,"")}function Dh(t,e){const r=t?[{role:"system",content:t}]:[],n=(e||[]).filter(a=>a.role==="user"||a.role==="assistant").map(a=>({role:a.role,content:a.content}));return[...r,...n]}function Cs(){return`conv-${Math.random().toString(16).slice(2,6)}-${Date.now()}`}function Na(t,e){return{role:"assistant",name:e,timestamp:Date.now(),content:t?.greeting||`Hello from ${e}`}}function wr(t,e){return{id:Cs(),title:"New chat",messages:[Na(t,e)]}}function Ph(t,e,r){return!Array.isArray(t)||t.length===0?[]:t.map((n,a)=>{const i=typeof n?.id=="string"?n.id:Cs(),o=typeof n?.title=="string"&&n.title.trim()?n.title.trim():`Saved chat ${a+1}`,s=Array.isArray(n?.messages)?n.messages:[],l=s.length>0?s.map(c=>{const u=c?.role==="assistant"?"assistant":"user",f=typeof c?.content=="string"?c.content:"";return{role:u,content:f,name:u==="assistant"?r:"You",timestamp:typeof c?.timestamp=="number"&&Number.isFinite(c.timestamp)?c.timestamp:Date.now(),streaming:!1,error:!!c?.error,sources:Array.isArray(c?.sources)?c.sources:void 0}}):[Na(e,r)];return{id:i,title:o,messages:l}}).filter(n=>Array.isArray(n.messages)&&n.messages.length>0)}function Mh(t){const e=t?.name||"Groq Assistant",r=t?.defaultModel||t?.modelOptions?.[0]||"openai/gpt-oss-20b",n=v.useMemo(()=>{const F=t?.defaultBaseUrl||"";return F?F.replace(/\/$/,""):""},[t]),[a,i]=v.useState(r),[o,s]=v.useState(n),[l,c]=v.useState(()=>[wr(t,e)]),[u,f]=v.useState(()=>l[0]?.id),[h,p]=v.useState(""),[x,m]=v.useState(!1),g=v.useRef(null),y=v.useRef(!1),b=!!t?.id&&jh.has(t.id),w=!!t?.enableBarcodeScanner;v.useEffect(()=>{let F=[],V=!1;if(b){const Y=_s(t.id),Z=Ph(Y,t,e);Z.length>0&&(F=Z,V=!0,As(t?.id,Z.length))}if(F.length===0&&(F=[wr(t,e)],b&&In(t.id,F)),c(F),f(F[0]?.id),p(""),i(t?.defaultModel||t?.modelOptions?.[0]||"openai/gpt-oss-20b"),s((t?.defaultBaseUrl||"").replace(/\/$/,"")),g.current){try{g.current.abort()}catch{}g.current=null}m(!1),y.current=V},[t,e,b]);const A=v.useMemo(()=>l.find(F=>F.id===u)||l[0],[l,u])?.messages||[],N=t?.promptPlaceholder||"Ask anything...";v.useEffect(()=>{if(b){if(y.current){y.current=!1;return}In(t.id,l)}},[l,t?.id,b]);function E(F,V){c(Y=>Y.map(Z=>Z.id===F?{...Z,title:V?.trim()?V.trim():Z.title}:Z))}function S(){if(x)return;const F=wr(t,e);c(V=>{const Y=[F,...V];return b?Y.slice(0,mh):Y}),f(F.id),p("")}function I(){if(x)return;const F=Na(t,e);c(V=>V.map(Y=>Y.id===u?{...Y,title:"New chat",messages:[F]}:Y))}function O(){if(x)return;const F=wr(t,e);c([F]),f(F.id),p(""),b&&(In(t.id,[F]),y.current=!0)}function j(){if(x){try{g.current?.abort()}catch{}g.current=null,m(!1),c(F=>F.map(V=>{if(V.id!==u)return V;const Y=[...V.messages],Z=Y.length-1;return Z>=0&&Y[Z].role==="assistant"&&(Y[Z]={...Y[Z],content:"Request cancelled.",streaming:!1,error:!0}),{...V,messages:Y}}))}}async function M(F){const V=(typeof F=="string"?F:h).trim();if(!V||x)return;const Z={role:"user",name:"You",timestamp:Date.now(),content:V},ne=!!t?.id&&!A.some(K=>K.role==="user");let D;try{const K=t?.allowBaseUrlOverride?o:t?.defaultBaseUrl||o;D=Rh(K)}catch(K){c(q=>q.map(ee=>{if(ee.id!==u)return ee;const qe=ee.title==="New chat"&&V.slice(0,30)||ee.title;return{...ee,title:qe,messages:[...ee.messages,Z,{role:"assistant",name:e,timestamp:Date.now(),content:`Warning: ${K.message}`,error:!0}]}})),p("");return}c(K=>K.map(q=>{if(q.id!==u)return q;const ee=q.title==="New chat"&&V.slice(0,30)||q.title;return{...q,title:ee,messages:[...q.messages,Z,{role:"assistant",name:e,timestamp:Date.now(),content:"",streaming:!0}]}})),p(""),m(!0);const $=new AbortController;g.current=$;try{ne&&yh(t.id);const K=[...A,Z];let q=t?.systemPrompt;if(t?.id==="allergyfinder"){const R=sr();R&&(q=[q,"User allergy notes saved via the Allergy Cookie Editor (markdown format):",R].filter(Boolean).join(`

`))}let ee=q;if(t?.id==="allergyfinder")try{const R=await Th(D,V,{signal:$.signal});R?.summary?c(W=>W.map(te=>{if(te.id!==u)return te;const J=[...te.messages],Ae=J.length-1;return Ae>=0&&J[Ae].role==="assistant"&&(J[Ae]={...J[Ae],content:R.summary,streaming:!1,error:!1}),{...te,messages:J}})):ee=[ee,"I couldn't find any product with that barcode."].filter(Boolean).join(`

`)}catch(R){R?.name!=="AbortError"&&(console.error(`[${t?.logLabel||"Chat"}] flavor finder lookup failed`,R),c(W=>W.map(te=>{if(te.id!==u)return te;const J=[...te.messages],Ae=J.length-1;return Ae>=0&&J[Ae].role==="assistant"&&(J[Ae]={...J[Ae],content:"I couldn't find any product with that barcode.",streaming:!1,error:!0}),{...te,messages:J}})))}const qe=Dh(ee,K),H=await pr(t,qe,{signal:$.signal,model:a,baseUrl:D});s(H.baseUrl);const ce=Sh(t,H.content);c(R=>R.map(W=>{if(W.id!==u)return W;const te=[...W.messages],J=te.length-1;return J>=0&&te[J].role==="assistant"&&(te[J]={...te[J],content:ce,streaming:!1,error:!1}),{...W,messages:te}}))}catch(K){const q=K?.name==="AbortError",ee=q?"Request cancelled.":`Unable to reach the service. ${K?.message||"Please try again."}`;q||console.error(`[${t?.logLabel||"Chat"}] request failed`,K),c(qe=>qe.map(H=>{if(H.id!==u)return H;const ce=[...H.messages],R=ce.length-1;return R>=0&&ce[R].role==="assistant"&&(ce[R]={...ce[R],content:ee,streaming:!1,error:!0}),{...H,messages:ce}}))}finally{g.current=null,m(!1)}}const G=o||t?.defaultBaseUrl||"";return{activeId:u,assistantName:e,baseUrl:o,conversations:l,enableBarcodeScanner:w,endpointDisplay:G,handleClear:I,handleFlushHistory:O,handleNewConversation:S,handleRename:E,handleSend:M,handleStop:j,loading:x,messages:A,model:a,persistConversations:b,placeholder:N,prompt:h,setActiveId:f,setModel:i,setPrompt:p}}function Fi({experience:t}){const{activeId:e,assistantName:r,conversations:n,enableBarcodeScanner:a,endpointDisplay:i,handleClear:o,handleFlushHistory:s,handleNewConversation:l,handleRename:c,handleSend:u,handleStop:f,loading:h,messages:p,model:x,persistConversations:m,placeholder:g,prompt:y,setActiveId:b,setModel:w,setPrompt:C}=Mh(t),[A,N]=v.useState(!1);function E(S){if(!a)return;const I=`${S}`.trim();I&&(N(!1),C(I),u(I))}return d.jsxs("div",{className:"grid gap-6 md:grid-cols-12",children:[d.jsx("aside",{className:"md:col-span-4 lg:col-span-3",children:d.jsx(nc,{conversations:n,activeId:e,onSelect:b,onNew:l,onRename:c,onFlushHistory:m?s:void 0,disableNew:h,disableFlush:h})}),d.jsxs("section",{className:"md:col-span-8 lg:col-span-9 flex flex-col gap-4",children:[d.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white/80 p-4 shadow-sm dark:border-slate-800 dark:bg-slate-900/60",children:[d.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-end lg:justify-between",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Session settings"}),d.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Select a model and endpoint for this workspace."})]}),d.jsx("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end",children:d.jsx(hc,{value:x,onChange:w,options:t?.modelOptions||[]})})]}),d.jsxs("div",{className:"mt-3 grid gap-2 text-xs text-slate-500 dark:text-slate-400 sm:grid-cols-2",children:[d.jsxs("div",{children:[d.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-300",children:"Assistant"}),": ",r]}),d.jsxs("div",{children:[d.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-300",children:"Endpoint"}),": ",i||"Not configured"]})]})]}),d.jsx(uc,{experience:t,messages:p}),d.jsx(fc,{value:y,onChange:C,onSend:u,onStop:f,onClear:o,loading:h,placeholder:g,onOpenScanner:a?()=>N(!0):void 0})]}),a&&d.jsx(dh,{open:A,onClose:()=>N(!1),onDetected:E})]})}const Lh=`- Peanuts
- Shellfish
- Dairy
- Eggs
- Sesame
- Tree nuts`;function Bh(){const[t,e]=v.useState(""),[r,n]=v.useState(null),a=v.useMemo(()=>Lh,[]);v.useEffect(()=>{const s=sr();e(s)},[]);function i(s){s.preventDefault(),ys(t||""),n({type:"success",message:"Allergy notes saved to cookie. ✅"})}function o(){Ch(),e(""),n({type:"warning",message:"All cookies cleared for this site. ⚠️"})}return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"rounded-2xl border border-emerald-100 bg-emerald-50/60 p-6 text-emerald-900 dark:border-emerald-500/40 dark:bg-emerald-900/30 dark:text-emerald-100",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Allergy Cookie Editor 🍪"}),d.jsx("p",{className:"mt-2 text-sm text-emerald-900/80 dark:text-emerald-100/80",children:"📝 Save a markdown list of allergens you or your household need to watch out for. The notes are stored in a browser cookie so you can quickly reference or reuse them when chatting with the assistant."})]}),d.jsxs("form",{className:"space-y-4",onSubmit:i,children:[d.jsxs("label",{className:"block space-y-2",htmlFor:"allergy-cookie-textarea",children:[d.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Allergy list 📋"}),d.jsx("textarea",{id:"allergy-cookie-textarea",name:"allergy-notes",value:t,onChange:s=>e(s.target.value),placeholder:a,rows:10,className:"w-full rounded-2xl border border-slate-300 bg-white/80 p-4 font-mono text-sm text-slate-800 placeholder:text-slate-400 focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-400 dark:border-slate-700 dark:bg-slate-900/60 dark:text-slate-100 dark:placeholder:text-slate-500 dark:focus:border-emerald-300 dark:focus:ring-emerald-300","aria-describedby":"allergy-cookie-helper"})]}),d.jsx("p",{id:"allergy-cookie-helper",className:"text-xs text-slate-500 dark:text-slate-400",children:`Tip: This information is stored in the "${wa}" browser cookie. Use markdown lists, headings, or bold text to organise allergens by family members. 💡`}),d.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[d.jsx("button",{type:"submit",className:"inline-flex items-center gap-2 rounded-xl bg-emerald-600 px-4 py-2 text-sm font-medium text-white shadow-sm transition hover:bg-emerald-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-emerald-500 disabled:opacity-50",children:"Save Cookie 💾"}),d.jsx("button",{type:"button",onClick:o,className:"inline-flex items-center gap-2 rounded-xl border border-slate-300 px-4 py-2 text-sm font-medium text-slate-700 transition hover:border-slate-400 hover:bg-slate-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-slate-400 dark:border-slate-600 dark:text-slate-200 dark:hover:border-slate-500 dark:hover:bg-slate-800 dark:focus-visible:outline-slate-500",children:"Delete All Cookies 🧹"}),r?d.jsx("span",{role:"status",className:`text-sm ${r.type==="success"?"text-emerald-600 dark:text-emerald-300":"text-amber-600 dark:text-amber-300"}`,children:r.message}):null]})]})]})}const Ui="inline-flex items-center rounded-xl px-4 py-2 text-sm font-medium transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2";function Gi(){return d.jsxs("nav",{"aria-label":"AllergyFinder sections",className:"flex flex-wrap items-center gap-2",children:[d.jsx($e,{to:"/allergyfinder",end:!0,className:({isActive:t})=>`${Ui} ${t?"bg-emerald-600 text-white focus-visible:outline-emerald-400":"border border-transparent bg-white/80 text-emerald-700 hover:border-emerald-200 hover:bg-emerald-50 focus-visible:outline-emerald-300 dark:bg-slate-900/60 dark:text-emerald-200 dark:hover:bg-emerald-900/40"}`,children:"Chat Assistant"}),d.jsx($e,{to:"/allergyfinder/cookies",className:({isActive:t})=>`${Ui} ${t?"bg-emerald-600 text-white focus-visible:outline-emerald-400":"border border-transparent bg-white/80 text-emerald-700 hover:border-emerald-200 hover:bg-emerald-50 focus-visible:outline-emerald-300 dark:bg-slate-900/60 dark:text-emerald-200 dark:hover:bg-emerald-900/40"}`,children:"Allergy Cookie Editor"})]})}const Sa="objectmaker_zoo_v1";function ka(){try{return globalThis.localStorage||null}catch{return null}}function Ia(){const t=ka();if(!t)return[];try{const e=t.getItem(Sa);if(!e)return[];const r=JSON.parse(e);return Array.isArray(r)?r:[]}catch{return[]}}function Vi(){const t=Ia();return Array.isArray(t)?t.length:0}function Es(t){const e=ka();if(e)try{e.setItem(Sa,JSON.stringify(t||[]))}catch{}}function Fh(t){const e=Ia();e.unshift(t),Es(e)}function Ns(){const t=ka();if(t)try{t.removeItem(Sa)}catch{}}function Uh(t){const e=new Map;for(const r of t||[]){const n=(r?.type||"object").toString();e.has(n)||e.set(n,[]),e.get(n).push(r)}return e}const Oa="newsanalyzer_classification_count_v1";function Ta(){try{return globalThis.localStorage||null}catch{return null}}function Ss(){const t=Ta();if(!t)return 0;try{const e=t.getItem(Oa);if(!e)return 0;const r=Number.parseInt(e,10);return Number.isFinite(r)&&r>0?r:0}catch{return 0}}function $i(){return Ss()}function Gh(){const t=Ta();if(!t)return;const e=Ss()+1;try{t.setItem(Oa,String(e))}catch{}}function Vh(){const t=Ta();if(t)try{t.removeItem(Oa)}catch{}}const zr="allin_pizza_gallery",$h=3600*24*30,ja=40;function ks(){return typeof document>"u"?null:document}function Hh(t){const e=ks();if(!e||!e.cookie)return"";const n=e.cookie.split("; ").find(a=>a.startsWith(`${t}=`));return n?n.split("=").slice(1).join("="):""}function Kn(t,e,r=$h){const n=ks();if(!n)return;const a=encodeURIComponent(e),i=["path=/",`max-age=${r}`];n.cookie=`${t}=${a}; ${i.join("; ")}`}function Is(t){return!t||typeof t.url!="string"||!t.url.trim()?null:{prompt:typeof t.prompt=="string"?t.prompt:"",url:t.url,summary:typeof t.summary=="string"?t.summary:"",timestamp:typeof t.timestamp=="number"?t.timestamp:Date.now()}}function Os(){const t=Hh(zr);if(!t)return[];try{const e=JSON.parse(decodeURIComponent(t));return Array.isArray(e)?e.map(r=>Is(r)).filter(Boolean).slice(0,ja):[]}catch{return[]}}function zh(t){if(!Array.isArray(t)||t.length===0){Kn(zr,"[]");return}const e=t.map(r=>Is(r)).filter(Boolean).slice(0,ja);Kn(zr,JSON.stringify(e))}function Ts(){Kn(zr,"[]",0)}function Wh(){return Os().length}const Xh={allergyfinder:"AllergyFinder",stlviewer:"STL Studio",pokedex:"Pokédex"},Hi=["Curious","Vigilant","Bright","Calm","Resilient","Swift","Gentle","Lively","Mindful","Radiant"],zi=["Aviator","Guardian","Navigator","Trailblazer","Harvest","Aurora","Sentinel","Voyager","Caretaker","Beacon"],Yh=new Intl.NumberFormat("en-US");function Wi(){const t=Hi[Math.floor(Math.random()*Hi.length)],e=zi[Math.floor(Math.random()*zi.length)];return`${t} ${e}`}function Xi(t,e=12){return t?t.split(/\r?\n/).map(r=>r.replace(/^[-*+\s]+/,"").trim()).filter(Boolean).slice(0,e):[]}function Nt(t){return Yh.format(Math.max(0,Number(t)||0))}function qh(){const[t,e]=v.useState(""),[r,n]=v.useState(()=>Pi()),[a,i]=v.useState(()=>Di()),[o,s]=v.useState(()=>Xi(sr())),[l,c]=v.useState(()=>Vi()),[u,f]=v.useState(()=>$i()),[h,p]=v.useState(0);v.useEffect(()=>{let O=_h();O||(O=Wi(),Mi(O)),e(O),x()},[]);function x(){n(Pi()),i(Di()),s(Xi(sr())),c(Vi()),f($i()),p(Wh())}function m(){const O=Wi();Mi(O),e(O)}function g(){Ah(),e("")}function y(O){Zn(O),Ea(O),x()}function b(){wh(),Object.keys(Xh).forEach(O=>{Zn(O)}),x()}function w(){ys(""),bh(),x()}function C(){Ns(),x()}function A(){Vh(),x()}function N(){Ts(),x()}const E=Object.values(r??{}).reduce((O,j)=>O+(Number(j)||0),0),S=[{id:"total-chats",label:"Total Chats Logged",value:Nt(E),hint:"Combined across all experiences."},{id:"allergy-count",label:"Saved Allergies",value:Nt(a),hint:"Markdown items kept locally."},{id:"object-count",label:"Objects Created",value:Nt(l),hint:"Stored in your Object Zoo."},{id:"pizza-count",label:"Pizza Gallery Items",value:Nt(h),hint:"Saved designs on this device."}],I=[{id:"allergyfinder",label:"AllergyFinder",icon:"🩺",value:r.allergyfinder??0,description:"Chats started with the allergy assistant.",cta:{to:"/allergyfinder",label:"Open AllergyFinder"},onReset:()=>y("allergyfinder"),resetLabel:"Clear AllergyFinder history",footnote:"Removes the cookie that stores saved conversations and counters for this experience."},{id:"stlviewer",label:"STL Studio",icon:"🛠️",value:r.stlviewer??0,description:"Design and printing chats initiated in STL Studio.",cta:{to:"/stlviewer",label:"Open STL Studio"},onReset:()=>y("stlviewer"),resetLabel:"Clear STL Studio history",footnote:"Deletes the STL Studio chat cookie, including saved sessions and counters."},{id:"pokedex",label:"Pokédex",icon:"🔍",value:r.pokedex??0,description:"Quick Pokédex lookups launched from this browser.",cta:{to:"/pokedex",label:"Open Pokédex"},onReset:()=>y("pokedex"),resetLabel:"Clear Pokédex history",footnote:"Erases the Pokédex chat cookie and any stored conversations."},{id:"objectmaker",label:"Object Maker",icon:"🧱",value:l,description:"Objects saved to your local Object Zoo.",cta:{to:"/objectmaker/zoo",label:"Visit Object Zoo"},onReset:C,resetLabel:"Delete saved objects",footnote:"Removes every object stored in the Object Maker Zoo on this device."},{id:"pizzamaker",label:"Pizza Maker",icon:"🍕",value:h,description:"Pizzas saved to your cookie-backed gallery.",cta:{to:"/pizza-maker",label:"Open Pizza Maker"},onReset:N,resetLabel:"Clear pizza gallery",footnote:"Deletes every saved pizza render stored in browser cookies."},{id:"newsanalyzer",label:"News Analyzer",icon:"📰",value:u,description:"Articles classified locally with the news workflow.",cta:{to:"/newsanalyzer",label:"Open News Analyzer"},onReset:A,resetLabel:"Reset article counter",footnote:"Clears the local counter that tracks processed news articles."}];return d.jsxs("div",{className:"space-y-12",children:[d.jsx("section",{className:"rounded-4xl border border-slate-200 bg-white p-8 shadow-md dark:border-slate-800 dark:bg-slate-950",children:d.jsxs("div",{className:"flex flex-col gap-8 lg:flex-row lg:items-start",children:[d.jsxs("div",{className:"flex-1 space-y-6",children:[d.jsxs("div",{className:"space-y-3",children:[d.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-600 dark:bg-slate-800 dark:text-slate-200",children:"Profile"}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("h2",{className:"text-3xl font-semibold text-slate-900 sm:text-4xl dark:text-white",children:"User Preferences & Activity"}),d.jsx("p",{className:"max-w-2xl text-sm text-slate-600 dark:text-slate-300",children:"Generate a new alias, manage your local data, and see how often you revisit each tool. No information leaves this tab."})]})]}),d.jsxs("div",{className:"flex flex-col gap-3 rounded-2xl border border-slate-200 bg-slate-50 p-4 shadow-sm dark:border-slate-700 dark:bg-slate-900",children:[d.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[d.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Current alias"}),d.jsxs("div",{className:"inline-flex items-center gap-2",children:[d.jsx("button",{type:"button",onClick:m,className:"inline-flex items-center rounded-full bg-slate-900 px-3 py-1.5 text-xs font-medium text-white transition hover:bg-slate-700 dark:bg-slate-700 dark:hover:bg-slate-600",children:"Generate New Alias 🎲"}),d.jsx("button",{type:"button",onClick:g,className:"inline-flex items-center rounded-full border border-red-200 bg-white px-3 py-1.5 text-xs font-semibold text-red-600 transition hover:border-red-300 hover:bg-red-50 dark:border-red-600/60 dark:bg-slate-900 dark:text-red-200 dark:hover:bg-red-900/20",children:"Clear Alias 🗑️"})]})]}),d.jsx("div",{className:"rounded-xl bg-white px-4 py-3 text-lg font-semibold text-slate-900 shadow-inner dark:bg-slate-800 dark:text-slate-100",children:t||"No profile name stored"}),d.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Removing the alias resets the cookie immediately. A fresh name is generated next time you open this page."})]})]}),d.jsxs("div",{className:"flex-1 rounded-3xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900/60",children:[d.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-300",children:"Quick metrics"}),d.jsx("div",{className:"mt-4 grid gap-4 sm:grid-cols-2",children:S.map(O=>d.jsxs("div",{className:"space-y-1 rounded-2xl border border-slate-200 bg-slate-50 p-4 text-slate-700 shadow-sm dark:border-slate-700 dark:bg-slate-800 dark:text-slate-200",children:[d.jsx("div",{className:"text-2xl font-semibold text-slate-900 dark:text-white",children:O.value}),d.jsx("div",{className:"text-sm font-medium",children:O.label}),d.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:O.hint})]},O.id))})]})]})}),d.jsxs("section",{className:"rounded-4xl border border-slate-200 bg-white p-8 shadow-sm dark:border-slate-800 dark:bg-slate-950",children:[d.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsx("h3",{className:"text-2xl font-semibold text-slate-900 dark:text-white",children:"Saved Allergies 🗂️"}),d.jsx("p",{className:"max-w-xl text-sm text-slate-600 dark:text-slate-300",children:"Your allergy notes stay local. Use the editor to update or remove items at any time."})]}),d.jsx(we,{to:"/allergyfinder/cookies",className:"inline-flex items-center rounded-full border border-slate-300 px-4 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100 dark:border-slate-600 dark:text-slate-200 dark:hover:bg-slate-800/80",children:"Edit Allergy List ✍️"})]}),d.jsxs("div",{className:"mt-6 grid gap-6 lg:grid-cols-[minmax(0,280px)_1fr]",children:[d.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-slate-50 p-6 text-center text-slate-900 shadow-inner dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100",children:[d.jsx("div",{className:"text-sm uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Allergens tracked"}),d.jsx("div",{className:"mt-2 text-5xl font-bold",children:Nt(a)}),d.jsx("div",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:"Across saved markdown notes"})]}),d.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900/60",children:[o.length>0?d.jsxs("ul",{className:"grid grid-cols-1 gap-2 text-sm text-slate-700 dark:text-slate-200 sm:grid-cols-2",children:[o.map(O=>d.jsx("li",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-3 py-2 shadow-sm dark:border-slate-700 dark:bg-slate-800/70",children:O},O)),a>o.length?d.jsxs("li",{className:"rounded-2xl border border-dashed border-slate-300 px-3 py-2 text-slate-500 dark:border-slate-600 dark:text-slate-400",children:["…and ",Nt(a-o.length)," more saved locally."]}):null]}):d.jsx("div",{className:"flex h-full items-center justify-center rounded-2xl border border-dashed border-slate-300 bg-slate-50 p-6 text-sm italic text-slate-500 dark:border-slate-700 dark:bg-slate-800/50 dark:text-slate-400",children:"No allergy notes saved yet."}),d.jsxs("div",{className:"mt-6 flex flex-wrap items-center gap-3",children:[d.jsx("button",{type:"button",onClick:w,className:"inline-flex items-center rounded-full bg-red-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-red-500",children:"Delete Allergy Notes & Saved Chats 🧹"}),d.jsx("p",{className:"rounded-2xl border border-red-200 bg-red-50 px-4 py-2 text-xs text-red-600 shadow-inner dark:border-red-700 dark:bg-red-900/30 dark:text-red-200",children:"Removing allergy data clears both the notes cookie and any saved AllergyFinder conversations from this browser."})]})]})]})]}),d.jsxs("section",{className:"space-y-6 rounded-4xl border border-slate-200 bg-white p-8 shadow-sm dark:border-slate-800 dark:bg-slate-950",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("h3",{className:"text-2xl font-semibold text-slate-900 dark:text-white",children:"Experience Snapshot 📊"}),d.jsx("p",{className:"max-w-2xl text-sm text-slate-600 dark:text-slate-300",children:"Each card reflects what's stored locally for a specific section. Manage your history, saved objects, and news analytics without leaving the profile page."})]}),d.jsx("div",{className:"grid gap-5 md:grid-cols-2 xl:grid-cols-3",children:I.map(O=>d.jsx("div",{className:"group rounded-3xl border border-slate-200 bg-slate-50 p-6 shadow-sm transition hover:-translate-y-1 hover:shadow-md dark:border-slate-700 dark:bg-slate-900/70",children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-start justify-between gap-4",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-400",children:O.label}),d.jsx("p",{className:"mt-1 text-sm text-slate-600 dark:text-slate-400",children:O.description})]}),d.jsx("span",{className:"text-2xl","aria-hidden":"true",children:O.icon})]}),d.jsxs("div",{className:"flex items-baseline gap-2",children:[d.jsx("div",{className:"text-4xl font-bold text-slate-900 dark:text-slate-100",children:Nt(O.value)}),d.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Total"})]}),d.jsxs("div",{className:"flex flex-wrap gap-3",children:[d.jsx(we,{to:O.cta.to,className:"inline-flex items-center rounded-full border border-slate-300 px-4 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100 dark:border-slate-600 dark:text-slate-200 dark:hover:bg-slate-800/60",children:O.cta.label}),d.jsx("button",{type:"button",onClick:O.onReset,className:"inline-flex items-center rounded-full bg-red-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-red-500",children:O.resetLabel})]}),d.jsx("p",{className:"rounded-2xl border border-slate-200 bg-white px-4 py-2 text-xs text-slate-600 shadow-inner dark:border-slate-700 dark:bg-slate-900/60 dark:text-slate-300",children:O.footnote})]})},O.id))}),d.jsx("div",{className:"rounded-3xl border border-slate-200 bg-slate-50 p-6 shadow-sm dark:border-slate-700 dark:bg-slate-900/70",children:d.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[d.jsxs("div",{children:[d.jsx("h4",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Reset chat-based experiences"}),d.jsx("p",{className:"mt-1 text-sm text-slate-600 dark:text-slate-400",children:"This action clears every saved chat cookie for AllergyFinder, STL Studio, and the Pokédex in one click."})]}),d.jsx("button",{type:"button",onClick:b,className:"inline-flex items-center rounded-full bg-red-700 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-red-600",children:"Delete All Saved Chat History 🧽"})]})})]})]})}function Zh(){return d.jsxs("div",{className:"space-y-10",children:[d.jsx("header",{className:"rounded-4xl border border-slate-200 bg-white py-10 pl-10 pr-8 shadow-sm dark:border-slate-800 dark:bg-slate-950",children:d.jsxs("div",{className:"flex flex-col gap-6 lg:flex-row lg:items-center lg:justify-between",children:[d.jsxs("div",{className:"space-y-3",children:[d.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-900/90 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-100 dark:bg-slate-800 dark:text-slate-200",children:"Dashboard"}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("h1",{className:"text-3xl font-bold text-slate-900 sm:text-4xl dark:text-white",children:"Profile Control Center"}),d.jsx("p",{className:"max-w-xl text-sm text-slate-600 dark:text-slate-300",children:"Review your generated alias, local activity, and saved preferences. You own the data on this page—every action here updates information stored only in your browser."})]})]}),d.jsxs("div",{className:"rounded-3xl border border-slate-200/80 bg-slate-50 px-6 py-4 text-left text-sm text-slate-600 shadow-inner dark:border-slate-700 dark:bg-slate-900 dark:text-slate-300",children:[d.jsx("p",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"Privacy Snapshot"}),d.jsxs("ul",{className:"mt-2 space-y-1",children:[d.jsx("li",{children:"• No cloud sync or external storage."}),d.jsx("li",{children:"• Cookies stay on this device."}),d.jsx("li",{children:"• Reset tools clear data instantly."})]})]})]})}),d.jsx(qh,{})]})}function Yi({isActive:t}){return`inline-flex items-center rounded-full border px-3 py-1.5 text-sm font-medium transition border-slate-300 text-slate-700 hover:border-amber-500 hover:text-amber-600 dark:border-slate-700 dark:text-slate-200 ${t?"bg-gradient-to-r from-yellow-400 to-amber-600 text-white border-transparent shadow":""}`}function qi(){return d.jsxs("nav",{className:"flex flex-wrap items-center gap-2",children:[d.jsx($e,{to:"/objectmaker",className:Yi,end:!0,children:"Builder"}),d.jsx($e,{to:"/objectmaker/zoo",className:Yi,children:"Zoo"})]})}function Kh({baseUrl:t,setBaseUrl:e,model:r,setModel:n,experience:a}){function i(o){const s=(o||"").trim();return s?s.replace(/\/$/,""):""}return d.jsx("section",{className:"md:col-span-12",children:d.jsx("div",{className:"rounded-xl border border-slate-200 bg-white/80 p-3 dark:border-slate-800 dark:bg-slate-900/60",children:d.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Service settings"}),d.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Configure model and base URL for object creation."})]}),d.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row",children:[d.jsxs("label",{className:"block text-sm",children:[d.jsx("span",{className:"block text-[10px] uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Model"}),d.jsx("select",{className:"mt-1 block w-56 rounded-md border border-slate-300 bg-white px-2 py-2 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",value:r,onChange:o=>n(o.target.value),children:(a?.modelOptions||[]).map(o=>d.jsx("option",{value:o,children:o},o))})]}),d.jsxs("label",{className:"block text-sm",children:[d.jsx("span",{className:"block text-[10px] uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Service base URL"}),d.jsx("input",{type:"url",value:t,onChange:o=>e(o.target.value),onBlur:o=>e(i(o.target.value)),className:"mt-1 block w-72 rounded-md border border-slate-300 bg-white px-2 py-2 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",placeholder:"https://your-endpoint.example"})]})]})]})})})}function Jh({prompt:t,setPrompt:e,chatMessages:r,chatLoading:n,onSend:a,onAdopt:i}){const o=!!t.trim()&&!n,l=!![...r].reverse().find(f=>f.role==="assistant"),c=f=>{f.key==="Enter"&&!f.shiftKey&&(f.preventDefault(),o&&a())},u=f=>{f.preventDefault(),o&&a()};return d.jsxs("section",{className:"md:col-span-5 space-y-4",children:[d.jsx("div",{className:"rounded-xl border border-slate-200 bg-white/80 p-4 shadow-sm dark:border-slate-800 dark:bg-slate-900/60",children:d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Assistant Schema Builder"}),d.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Describe the object you want. The assistant will propose a single JSON schema."})]}),d.jsxs("form",{onSubmit:u,className:"flex flex-col gap-2",children:[d.jsx("textarea",{value:t,onChange:f=>e(f.target.value),onKeyDown:c,rows:3,spellCheck:!1,className:"block w-full rounded-lg border border-slate-300 bg-white/90 p-3 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-2 focus:ring-amber-500/60 dark:border-slate-700 dark:bg-slate-900/60 dark:text-slate-100",placeholder:"Ask for a schema idea…"}),d.jsx("div",{className:"flex flex-wrap items-center justify-end gap-2",children:d.jsx("button",{type:"submit",disabled:!o,className:"inline-flex items-center gap-1 rounded-md bg-amber-600 px-3 py-1.5 text-sm font-semibold text-white shadow transition-colors hover:bg-amber-500 disabled:opacity-50",children:n?"Sending…":d.jsxs(d.Fragment,{children:[d.jsx("span",{children:"Send to assistant"}),d.jsx(Oo,{className:"h-4 w-4","aria-hidden":"true"})]})})})]})]})}),d.jsxs("div",{className:"rounded-xl border border-amber-200 bg-amber-50/80 p-4 shadow-sm dark:border-amber-500/40 dark:bg-amber-500/10",children:[d.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[d.jsxs("div",{children:[d.jsx("h4",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Apply the assistant schema"}),d.jsx("p",{className:"text-xs text-amber-900/80 dark:text-amber-200/80",children:"Review the latest assistant reply below. When it looks good, send it to the Schema Setup card so you can validate and fine-tune it."})]}),d.jsxs("button",{type:"button",onClick:i,disabled:!l,className:"inline-flex items-center gap-1 rounded-md border border-amber-600 px-3 py-1.5 text-sm font-medium text-amber-700 transition-colors hover:bg-amber-100 disabled:opacity-50 dark:border-amber-400 dark:text-amber-200 dark:hover:bg-amber-500/20",children:[d.jsx(To,{className:"h-4 w-4","aria-hidden":"true"}),"Send to Schema Setup"]})]}),d.jsx("div",{className:"mt-3 max-h-64 space-y-2 overflow-auto",children:r.length?r.map((f,h)=>d.jsxs("div",{className:`rounded-md border p-2 text-sm ${f.role==="user"?"border-amber-200 bg-white text-slate-800 dark:border-amber-400/40 dark:bg-amber-500/10":"border-amber-300 bg-amber-100/80 text-amber-900 dark:border-amber-400/60 dark:bg-amber-500/20 dark:text-amber-50"}`,children:[d.jsx("div",{className:"mb-1 text-[10px] uppercase tracking-wide text-amber-600 dark:text-amber-200/80",children:f.role}),d.jsx("div",{className:"whitespace-pre-wrap break-words",children:f.content})]},h)):d.jsx("div",{className:"rounded-md border border-dashed border-amber-300 p-3 text-xs text-amber-700 dark:border-amber-400/50 dark:text-amber-200",children:"No assistant replies yet. Ask the assistant for a schema to get started."})}),l?null:d.jsx("p",{className:"mt-2 text-[11px] font-medium text-amber-800/80 dark:text-amber-200/70",children:"Send a prompt to the assistant first—then this button will push the suggested schema into the editor."})]})]})}function Qh({value:t,onChange:e,rows:r=10,placeholder:n}){return d.jsx("textarea",{value:t,onChange:a=>e(a.target.value),rows:r,spellCheck:!1,className:"mt-1 block w-full rounded-lg border border-slate-300 bg-white/90 p-2 font-mono text-[13px] text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-900/60 dark:text-slate-100",placeholder:n})}function e1({value:t}){const e=v.useMemo(()=>{try{return JSON.stringify(t,null,2)}catch{return""}},[t]);return d.jsx("pre",{className:"max-h-80 overflow-auto rounded-lg border border-slate-200 bg-slate-50 p-3 text-xs text-slate-800 dark:border-slate-700 dark:bg-slate-900/50 dark:text-slate-200",children:e})}function t1({structureText:t,setStructureText:e,onValidate:r,objectType:n,setObjectType:a,objectName:i,setObjectName:o,createPrompt:s,setCreatePrompt:l,systemText:c,setSystemText:u,temperature:f,setTemperature:h,strictMode:p,setStrictMode:x,onCreate:m,createLoading:g,error:y,resultObj:b,structureStatus:w}){const[C,A]=v.useState(""),N=v.useRef(null);v.useEffect(()=>()=>{N.current&&(clearTimeout(N.current),N.current=null)},[]);async function E(){if(b){try{const S=JSON.stringify(b,null,2);if(typeof navigator<"u"&&navigator.clipboard?.writeText)await navigator.clipboard.writeText(S);else{const I=document.createElement("textarea");I.value=S,I.setAttribute("readonly",""),I.style.position="absolute",I.style.left="-9999px",document.body.appendChild(I),I.select(),document.execCommand("copy"),document.body.removeChild(I)}A("Copied!")}catch(S){console.error("Copy failed",S),A("Copy failed")}N.current&&clearTimeout(N.current),N.current=setTimeout(()=>{A(""),N.current=null},2e3)}}return d.jsxs("section",{className:"md:col-span-7 space-y-4",children:[d.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white/80 p-4 shadow-sm dark:border-slate-800 dark:bg-slate-900/60",children:[d.jsxs("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-start sm:justify-between",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Schema Setup"}),d.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Define and validate the JSON Schema before attempting generation."})]}),w?d.jsxs("div",{className:"flex items-center gap-1 text-xs font-medium text-emerald-600 dark:text-emerald-400",children:[d.jsx(al,{className:"h-4 w-4","aria-hidden":"true"}),d.jsx("span",{children:w})]}):null]}),d.jsxs("div",{className:"mt-3 space-y-3",children:[d.jsx(Qh,{value:t,onChange:e,rows:16,placeholder:'{"type":"object","properties":{"name":{"type":"string"},"toppings":{"type":"array","items":{"type":"string"}}}}'}),d.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[d.jsx("button",{type:"button",onClick:r,className:"rounded-md bg-amber-600 px-3 py-1.5 text-sm font-medium text-white shadow hover:bg-amber-500",children:"Validate JSON"}),d.jsxs("label",{className:"text-sm text-slate-600 dark:text-slate-300",children:[d.jsx("span",{className:"mr-1",children:"Type"}),d.jsx("input",{value:n,onChange:S=>a(S.target.value),className:"rounded-md border border-slate-300 bg-white px-2 py-1 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",placeholder:"pizza | hot_sauce | car"})]}),d.jsxs("label",{className:"text-sm text-slate-600 dark:text-slate-300",children:[d.jsx("span",{className:"mr-1",children:"Object Name (optional)"}),d.jsx("input",{value:i,onChange:S=>o(S.target.value),className:"rounded-md border border-slate-300 bg-white px-2 py-1 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",placeholder:"diavola"})]})]}),d.jsxs("label",{className:"block text-sm",children:[d.jsx("span",{className:"mr-1 text-slate-600 dark:text-slate-300",children:"System Instruction"}),d.jsx("input",{value:c,onChange:S=>u(S.target.value),className:"mt-1 block w-full rounded-md border border-slate-300 bg-white px-2 py-2 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",placeholder:"You create a pizza object that conforms strictly to the provided JSON Schema; return only JSON."})]})]})]}),d.jsx("div",{className:"rounded-xl border border-slate-200 bg-white/80 p-4 shadow-sm dark:border-slate-800 dark:bg-slate-900/60",children:d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Generation Request"}),d.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Craft the prompt and run the request after your schema looks right."})]}),d.jsxs("label",{className:"block text-sm",children:[d.jsx("span",{className:"mr-1 text-slate-600 dark:text-slate-300",children:"User Prompt"}),d.jsx("input",{value:s,onChange:S=>l(S.target.value),className:"mt-1 block w-full rounded-md border border-slate-300 bg-white px-2 py-2 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",placeholder:"Describe the instance to create (e.g., 'A Margherita with basil and fresh mozzarella')"})]}),d.jsxs("div",{className:"flex flex-wrap gap-3",children:[d.jsxs("label",{className:"text-sm text-slate-600 dark:text-slate-300",children:[d.jsx("span",{className:"mr-1",children:"Temperature"}),d.jsx("input",{type:"number",value:f,onChange:S=>h(S.target.value),min:"0",max:"2",step:"0.1",className:"mt-1 block w-24 rounded-md border border-slate-300 bg-white px-2 py-1 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100"})]}),d.jsxs("label",{className:"text-sm text-slate-600 dark:text-slate-300",children:[d.jsx("span",{className:"mr-1",children:"Strict mode"}),d.jsxs("select",{value:p,onChange:S=>x(S.target.value),className:"mt-1 block rounded-md border border-slate-300 bg-white px-2 py-1 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",children:[d.jsx("option",{value:"auto",children:"Auto (service decides)"}),d.jsx("option",{value:"true",children:"Force strict validation"}),d.jsx("option",{value:"false",children:"Relaxed validation"})]})]}),d.jsx("div",{className:"ml-auto flex items-end",children:d.jsx("button",{type:"button",onClick:m,disabled:g,className:"rounded-md bg-amber-700 px-4 py-2 text-sm font-semibold text-white shadow hover:bg-amber-600 disabled:opacity-50",children:g?"Creating…":"Create Object"})})]}),y?d.jsx("div",{className:"rounded-md border border-red-300 bg-red-50 p-2 text-sm text-red-800 dark:border-red-800/60 dark:bg-red-900/40 dark:text-red-200",children:y}):null]})}),d.jsxs("section",{className:"rounded-xl border border-slate-200 bg-white/60 p-4 shadow-sm dark:border-slate-800 dark:bg-slate-900/50",children:[d.jsxs("div",{className:"flex items-center justify-between gap-2",children:[d.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Last Created Object"}),b?d.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 dark:text-slate-400",children:[C?d.jsx("span",{children:C}):null,d.jsxs("button",{type:"button",onClick:E,className:"inline-flex items-center gap-1 rounded-md border border-slate-300 px-2 py-1 text-xs font-medium text-slate-700 transition-colors hover:bg-slate-100 dark:border-slate-600 dark:text-slate-200 dark:hover:bg-slate-800",children:[d.jsx(To,{className:"h-4 w-4","aria-hidden":"true"}),"Copy JSON"]})]}):null]}),d.jsx("div",{className:"mt-3",children:b?d.jsx(e1,{value:b}):d.jsx("div",{className:"rounded-lg border border-dashed border-slate-300 bg-white/60 p-4 text-sm text-slate-500 dark:border-slate-700 dark:bg-slate-900/60 dark:text-slate-400",children:"No object created yet. The response from /obj will appear here."})})]})]})}function Ra(t){if(!t)return null;try{const e=JSON.parse(t);if(e&&typeof e=="object")return e}catch{return null}return null}function r1(t){if(!t)return null;const e=/```(?:json)?\s*([\s\S]*?)```/i,r=t.match(e);return!r||!r[1]?null:Ra(r[1].trim())}function n1(t){if(!t)return null;const e=String(t),r=e.indexOf("{");if(r<0)return null;let n=0;for(let a=r;a<e.length;a++){const i=e[a];if(i==="{")n++;else if(i==="}"&&(n--,n===0)){const o=e.slice(r,a+1),s=Ra(o);if(s)return s}}return null}function a1(t){return Ra(t)||r1(t)||n1(t)}const Zi={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var Ki={};const On=typeof import.meta<"u"&&Zi?Zi:void 0,Tn=typeof globalThis<"u"&&Ki?Ki:void 0;function js(t){if(t){if(On&&On[t]!==void 0)return On[t];if(Tn&&Tn[t]!==void 0)return Tn[t]}}const i1=(js("VITE_CHAT_BASE_URL")||"https://groq-endpoint.louispaulet13.workers.dev").replace(/\/$/,"");function o1(t="",e=160){const r=(t||"").toString().trim();return r.length<=e?r:`${r.slice(0,e)}...`}function s1(t){if(!t||typeof t!="object")return t;try{const e=JSON.parse(JSON.stringify(t)),r=n=>{if(!(!n||typeof n!="object")){if(n.type==="object"){n.additionalProperties!==!1&&(n.additionalProperties=!1);const a=n.properties&&typeof n.properties=="object"?n.properties:{},i=Object.keys(a);if(i.length){const l=Array.isArray(n.required)?n.required.filter(u=>typeof u=="string"):[],c=new Set([...l,...i]);n.required=Array.from(c)}Object.values(a).forEach(r);const o=n.patternProperties&&typeof n.patternProperties=="object"?n.patternProperties:{};Object.values(o).forEach(r);const s=n.dependencies&&typeof n.dependencies=="object"?n.dependencies:{};Object.values(s).forEach(l=>{l&&typeof l=="object"&&r(l)})}"format"in n&&delete n.format,n.items&&(Array.isArray(n.items)?n.items.forEach(r):r(n.items));for(const a of["allOf","anyOf","oneOf"])Array.isArray(n[a])&&n[a].forEach(r);for(const a of["not","if","then","else"])n[a]&&typeof n[a]=="object"&&r(n[a]);for(const a of["definitions","$defs"])n[a]&&typeof n[a]=="object"&&Object.values(n[a]).forEach(r)}};return r(e),e}catch{return t}}function l1(t){const e=(t||"").toString().trim();return e?e.replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_-]/g,"").toLowerCase():""}async function dn({baseUrl:t,structure:e,model:r,objectType:n,prompt:a,system:i,temperature:o,strict:s}={}){const l=(t||i1||"").replace(/\/$/,"");if(!l)throw new Error("Missing service base URL for /obj");const c=(js("VITE_OBJECTMAKER_OBJ_PATH")||"").trim(),u=l1(n||e&&e.type),f=A=>A?u?A.replace("{type}",u).replace(":type",u).replace("%s",u):A.includes("{type}")||A.includes(":type")||A.includes("%s")?null:A:null;let h=[];if(c){const A=f(c);A?h.push(A.startsWith("/")?A:`/${A}`):u&&h.push(c.replace(/\/?$/,"/")+u)}u&&h.push(`/obj/${u}`,`/object/${u}`,`/objects/${u}`),u||h.push("/obj","/object","/objects"),h=Array.from(new Set(h.filter(Boolean).map(A=>A.startsWith("/")?A:`/${A}`)));const p=(a||"").toString().trim();if(!p)throw new Error("Object prompt is required to call /obj");const x="You are an object maker. Produce a single JSON object that strictly conforms to the provided JSON Schema. Do not include commentary or markdown. Only return the JSON object.",m=(i||x).toString().trim()||x,y={schema:s1(e),system:m,user:p},b=typeof o=="number"?o:Number.parseFloat(o);Number.isFinite(b)&&(y.temperature=b),r&&(y.model=r),typeof s=="boolean"&&(y.strict=s);const w=[y];let C=null;for(const A of h){const N=`${l}${A}`;let E=null;for(const S of w)try{const I=await fetch(N,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)}),O=await I.text();if(!I.ok){const M=o1(O);if(I.status===404){E=null;break}E=new Error(`HTTP ${I.status}: ${M} (path ${N})`);continue}let j;try{j=JSON.parse(O)}catch{j=null}if(!j||typeof j!="object")throw new Error("Invalid JSON response from object endpoint");return{payload:j,status:I.status,baseUrl:l,path:A}}catch(I){E=I}if(E)throw E;C=C||new Error(`HTTP 404: endpoint not found at ${N}`)}throw C||new Error("Object creation failed")}const Ji="You are an object maker. Produce a single JSON object that strictly conforms to the provided JSON Schema. Do not include commentary or markdown. Only return the JSON object.",Rs={type:"object",additionalProperties:!1,properties:{name:{type:"string"},size:{type:"string",enum:["small","medium","large"]},crust:{type:"string"},cheese:{type:"string"},toppings:{type:"array",items:{type:"string"}}},required:["name","size","crust","cheese","toppings"]},d1=JSON.stringify(Rs,null,2),c1="make a delicious spicy pizza that respects this schema",u1="pizza",f1="";function h1(t,e){const r=e?[{role:"system",content:e}]:[],n=(t||[]).filter(a=>a&&(a.role==="user"||a.role==="assistant")).map(a=>({role:a.role,content:a.content}));return[...r,...n]}function Rr(t){const e=(t||"").trim();return e?e.replace(/\/$/,""):""}function Ds(t){if(!t||typeof t!="object")return{schema:t,changed:!1};let e=!1;const r=JSON.parse(JSON.stringify(t)),n=a=>{if(!(!a||typeof a!="object")){if(a.type==="object"){a.additionalProperties!==!1&&(a.additionalProperties=!1,e=!0);const i=a.properties&&typeof a.properties=="object"?a.properties:{},o=Object.keys(i);if(o.length){const c=Array.isArray(a.required)?a.required.filter(h=>typeof h=="string"):[],u=new Set(c),f=u.size;for(const h of o)u.add(h);(u.size!==f||c.length!==u.size)&&(a.required=Array.from(u),e=!0)}Object.values(i).forEach(n);const s=a.patternProperties&&typeof a.patternProperties=="object"?a.patternProperties:{};Object.values(s).forEach(n);const l=a.dependencies&&typeof a.dependencies=="object"?a.dependencies:{};Object.values(l).forEach(c=>{c&&typeof c=="object"&&n(c)})}"format"in a&&(delete a.format,e=!0),a.items&&(Array.isArray(a.items)?a.items.forEach(n):n(a.items));for(const i of["allOf","anyOf","oneOf"])Array.isArray(a[i])&&a[i].forEach(n);for(const i of["not","if","then","else"])a[i]&&typeof a[i]=="object"&&n(a[i]);for(const i of["definitions","$defs"])a[i]&&typeof a[i]=="object"&&Object.values(a[i]).forEach(n)}};return n(r),{schema:r,changed:e}}function p1(t,e,r){if(e)return e;const n=JSON.parse(t);if(!n||typeof n!="object")throw new Error("Structure must be a JSON object");if(n.type!=="object")throw new Error('Schema must declare "type":"object"');return r(n),n}function Qi(t,e,r,n,a){const i=Ds(t);return i.changed&&(e(i.schema),r(JSON.stringify(i.schema,null,2)),n(a)),i.schema}function x1(t){const[e,r]=v.useState(t?.defaultModel||t?.modelOptions?.[0]),[n,a]=v.useState(Rr(t?.defaultBaseUrl)),[i,o]=v.useState(""),[s,l]=v.useState(!1),[c,u]=v.useState([]),[f,h]=v.useState(d1),[p,x]=v.useState(Rs),[m,g]=v.useState(""),[y,b]=v.useState(!1),[w,C]=v.useState(null),[A,N]=v.useState(u1),[E,S]=v.useState(f1),[I,O]=v.useState(c1),[j,M]=v.useState(Ji),[G,F]=v.useState("0"),[V,Y]=v.useState("auto"),[Z,ne]=v.useState("");return{experience:t,model:e,setModel:r,baseUrl:n,setBaseUrl:H=>a(H),prompt:i,setPrompt:o,chatLoading:s,chatMessages:c,sendToChat:async()=>{const H=i.trim();if(!H||s)return;ne("");const ce=[...c,{role:"user",content:H,timestamp:Date.now()}];u(ce),o(""),l(!0);try{const R=h1(ce,t?.systemPrompt),te={role:"assistant",content:(await pr(t,R,{model:e,baseUrl:Rr(n)})).content,timestamp:Date.now()};u(J=>[...J,te])}catch(R){ne(R?.message||"Chat failed")}finally{l(!1)}},tryAdoptAssistantJson:()=>{const H=[...c].reverse().find(W=>W.role==="assistant");if(!H){ne("No assistant message to extract JSON from.");return}const ce=a1(H.content);if(!ce){ne("Could not extract JSON. Ensure the assistant returns a single JSON object.");return}if(ce?.type!=="object"){ne('Schema must declare "type":"object".');return}const R=Qi(ce,x,h,g,"Schema adopted from assistant");g("Schema adopted from assistant"),h(JSON.stringify(R,null,2)),x(R),ne("")},structureText:f,setStructureText:H=>{h(H),x(null),g("")},validateStructure:()=>{ne("");try{const H=JSON.parse(f);if(!H||typeof H!="object")throw new Error("Not an object");if(H.type!=="object")throw new Error('Schema must declare "type":"object"');const ce=Ds(H);x(ce.schema),ce.changed&&h(JSON.stringify(ce.schema,null,2)),g(ce.changed?"Schema valid (normalized unsupported keywords)":"Schema valid")}catch(H){x(null),ne(`Invalid JSON: ${H?.message||"parse error"}`),g("")}},structureStatus:m,objectType:A,setObjectType:N,objectName:E,setObjectName:S,createPrompt:I,setCreatePrompt:O,systemText:j,setSystemText:M,temperature:G,setTemperature:F,strictMode:V,setStrictMode:Y,handleCreate:async()=>{ne(""),C(null);let H;try{H=p1(f,p,x)}catch(te){ne(te.message);return}const ce=(A||H?.type||"").toString().trim();if(!ce){ne('Type is required to call /obj/{type}. Fill the Type field or include "type" in your structure.');return}const R=I.trim();if(!R){ne("Provide a user prompt for the object generation request.");return}const W=j.trim()||Ji;H=Qi(H,x,h,g,"Schema normalized before create (unsupported keywords removed)"),b(!0);try{const te=Rr(n),J=Number.parseFloat(G),Ae=V==="true"?!0:V==="false"?!1:void 0,{payload:lt}=await dn({baseUrl:te,structure:H,model:e,objectType:ce,prompt:R,system:W,temperature:Number.isFinite(J)?J:void 0,strict:Ae});C(lt);const vt=(ce||lt?.type||H?.type||"object").toString(),Pa=(lt?.name||E||lt?.title||vt).toString();Fh({id:`obj-${Date.now().toString(16)}`,type:vt,title:Pa,createdAt:Date.now(),structure:H,result:lt,conversation:c,prompt:R,system:W,temperature:Number.isFinite(J)?J:void 0,strict:Ae})}catch(te){ne(te?.message||"Object creation failed")}finally{b(!1)}},createLoading:y,error:Z,resultObj:w}}function m1(){const t=rn("objectmaker"),e=x1(t);return d.jsx("div",{className:"space-y-8",children:d.jsxs("div",{className:"grid gap-6 md:grid-cols-12",children:[d.jsx(Kh,{baseUrl:e.baseUrl,setBaseUrl:e.setBaseUrl,model:e.model,setModel:e.setModel,experience:t,objectType:e.objectType}),d.jsx(Jh,{prompt:e.prompt,setPrompt:e.setPrompt,chatMessages:e.chatMessages,chatLoading:e.chatLoading,onSend:e.sendToChat,onAdopt:e.tryAdoptAssistantJson}),d.jsx(t1,{structureText:e.structureText,setStructureText:e.setStructureText,onValidate:e.validateStructure,objectType:e.objectType,setObjectType:e.setObjectType,objectName:e.objectName,setObjectName:e.setObjectName,createPrompt:e.createPrompt,setCreatePrompt:e.setCreatePrompt,systemText:e.systemText,setSystemText:e.setSystemText,temperature:e.temperature,setTemperature:e.setTemperature,strictMode:e.strictMode,setStrictMode:e.setStrictMode,onCreate:e.handleCreate,createLoading:e.createLoading,error:e.error,resultObj:e.resultObj,structureStatus:e.structureStatus})]})})}function g1({entry:t,onDelete:e}){const[r,n]=v.useState(!1),a=new Date(t.createdAt);return d.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white/80 p-3 shadow-sm dark:border-slate-800 dark:bg-slate-900/60",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"space-y-0.5",children:[d.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-100",children:t.title}),d.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:a.toLocaleString()})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{className:"rounded-md border border-slate-300 px-2 py-1 text-xs text-slate-700 hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-800/60",onClick:()=>n(i=>!i),children:r?"Hide":"View"}),d.jsx("button",{className:"rounded-md border border-red-300 px-2 py-1 text-xs text-red-700 hover:bg-red-50 dark:border-red-800 dark:text-red-300 dark:hover:bg-red-900/30",onClick:e,children:"Delete"})]})]}),r?d.jsxs("div",{className:"mt-3 grid gap-3 lg:grid-cols-2",children:[d.jsxs("div",{children:[d.jsx("div",{className:"mb-1 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"Result"}),d.jsx("pre",{className:"max-h-72 overflow-auto rounded-md border border-slate-200 bg-slate-50 p-2 text-[12px] text-slate-800 dark:border-slate-700 dark:bg-slate-900/50 dark:text-slate-200",children:JSON.stringify(t.result,null,2)})]}),d.jsxs("div",{children:[d.jsx("div",{className:"mb-1 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"Structure"}),d.jsx("pre",{className:"max-h-72 overflow-auto rounded-md border border-slate-200 bg-slate-50 p-2 text-[12px] text-slate-800 dark:border-slate-700 dark:bg-slate-900/50 dark:text-slate-200",children:JSON.stringify(t.structure,null,2)})]}),d.jsxs("div",{className:"lg:col-span-2",children:[d.jsx("div",{className:"mb-1 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"Conversation"}),d.jsx("div",{className:"max-h-56 space-y-2 overflow-auto",children:(t.conversation||[]).map((i,o)=>d.jsxs("div",{className:`rounded-md p-2 text-[12px] ${i.role==="user"?"bg-yellow-50 text-slate-800 dark:bg-yellow-500/10":"bg-slate-50 text-slate-700 dark:bg-slate-800/50 dark:text-slate-200"}`,children:[d.jsx("div",{className:"mb-1 text-[10px] uppercase tracking-wide text-slate-500 dark:text-slate-400",children:i.role}),d.jsx("div",{className:"whitespace-pre-wrap break-words",children:i.content})]},o))})]})]}):null]})}function v1(){const[t,e]=v.useState(()=>Ia()),r=v.useMemo(()=>Uh(t),[t]);function n(i){const o=t.filter(s=>s!==i);e(o),Es(o)}function a(){Ns(),e([])}return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h3",{className:"text-base font-semibold text-slate-800 dark:text-slate-100",children:"Object Zoo 🦾"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(we,{to:"/objectmaker",className:"rounded-md border border-slate-300 px-3 py-1.5 text-sm text-slate-700 hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-800/60",children:"Back to Builder 🛠️"}),t.length>0?d.jsx("button",{onClick:a,className:"rounded-md border border-red-300 px-3 py-1.5 text-sm font-medium text-red-700 hover:bg-red-50 dark:border-red-800 dark:text-red-300 dark:hover:bg-red-900/30",children:"Delete all saved objects 🧹"}):null]})]}),t.length===0?d.jsx("div",{className:"rounded-xl border border-slate-200 bg-white/70 p-6 text-sm text-slate-500 dark:border-slate-800 dark:bg-slate-900/60 dark:text-slate-400",children:"No entries yet. Create objects in the Builder and they will appear here grouped by type. 📝"}):null,[...r.entries()].map(([i,o])=>d.jsxs("section",{className:"space-y-3",children:[d.jsx("div",{className:"flex items-center justify-between",children:d.jsxs("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:[i," — ",o.length," 📦"]})}),d.jsx("div",{className:"grid gap-3 md:grid-cols-2",children:o.map(s=>d.jsx(g1,{entry:s,onDelete:()=>n(s)},s.id))})]},i))]})}const b1={usa:[{date:"2024-01-01",name:"New Year's Day"},{date:"2024-01-15",name:"Martin Luther King Jr. Day"},{date:"2024-05-27",name:"Memorial Day"},{date:"2024-07-04",name:"Independence Day"},{date:"2024-09-02",name:"Labor Day"},{date:"2024-11-28",name:"Thanksgiving Day"}],uk:[{date:"2024-01-01",name:"New Year's Day"},{date:"2024-03-29",name:"Good Friday"},{date:"2024-04-01",name:"Easter Monday"},{date:"2024-05-06",name:"Early May Bank Holiday"},{date:"2024-08-26",name:"Summer Bank Holiday"},{date:"2024-12-25",name:"Christmas Day"}],fr:[{date:"2025-01-01",name:"Jour de l'An"},{date:"2025-04-18",name:"Vendredi saint (Alsace-Moselle)"},{date:"2025-04-21",name:"Lundi de Pâques"},{date:"2025-05-01",name:"Fête du Travail"},{date:"2025-05-08",name:"Victoire 1945"},{date:"2025-05-29",name:"Jeudi de l'Ascension"},{date:"2025-06-09",name:"Lundi de Pentecôte"},{date:"2025-07-14",name:"Fête nationale"},{date:"2025-08-15",name:"Assomption"},{date:"2025-11-01",name:"Toussaint"},{date:"2025-11-11",name:"Armistice 1918"},{date:"2025-12-25",name:"Noël"},{date:"2025-12-26",name:"Saint-Étienne (Alsace-Moselle)"},{date:"2026-01-01",name:"Jour de l'An"},{date:"2026-04-03",name:"Vendredi saint (Alsace-Moselle)"},{date:"2026-04-06",name:"Lundi de Pâques"},{date:"2026-05-01",name:"Fête du Travail"},{date:"2026-05-08",name:"Victoire 1945"},{date:"2026-05-14",name:"Jeudi de l'Ascension"},{date:"2026-05-25",name:"Lundi de Pentecôte"},{date:"2026-07-14",name:"Fête nationale"},{date:"2026-08-15",name:"Assomption"},{date:"2026-11-01",name:"Toussaint"},{date:"2026-11-11",name:"Armistice 1918"},{date:"2026-12-25",name:"Noël"},{date:"2026-12-26",name:"Saint-Étienne (Alsace-Moselle)"}],es:[{date:"2024-01-01",name:"Año Nuevo"},{date:"2024-03-29",name:"Viernes Santo"},{date:"2024-05-01",name:"Fiesta del Trabajo"},{date:"2024-08-15",name:"Asunción de la Virgen"},{date:"2024-11-01",name:"Día de Todos los Santos"},{date:"2024-12-06",name:"Día de la Constitución"}],it:[{date:"2024-01-01",name:"Capodanno"},{date:"2024-04-01",name:"Lunedì dell’Angelo"},{date:"2024-04-25",name:"Festa della Liberazione"},{date:"2024-05-01",name:"Festa del Lavoro"},{date:"2024-08-15",name:"Ferragosto"},{date:"2024-12-25",name:"Natale"}]},_r=[{id:"usa",label:"USA",locale:"en-US"},{id:"uk",label:"United Kingdom",locale:"en-GB"},{id:"fr",label:"France",locale:"fr-FR"},{id:"es",label:"Spain",locale:"es-ES"},{id:"it",label:"Italy",locale:"it-IT"}],rr=25,eo="bank_holiday_plan",y1={type:"object",additionalProperties:!1,properties:{requestSummary:{type:"object",additionalProperties:!1,properties:{country:{type:"string"},daysReservedForOtherPlans:{type:"number"},daysAvailableForOptimization:{type:"number"},totalBankHolidaysConsidered:{type:"number"}},required:["country","daysReservedForOtherPlans","daysAvailableForOptimization","totalBankHolidaysConsidered"]},recommendations:{type:"array",items:{type:"object",additionalProperties:!1,properties:{label:{type:"string"},startDate:{type:"string"},endDate:{type:"string"},leaveDates:{type:"array",items:{type:"string"}},leaveDaysUsed:{type:"number"},totalContinuousDaysOff:{type:"number"},bankHolidaysLeveraged:{type:"array",items:{type:"string"}},rationale:{type:"string"}},required:["label","startDate","endDate","leaveDates","leaveDaysUsed","totalContinuousDaysOff","bankHolidaysLeveraged","rationale"]}},comparison:{type:"object",additionalProperties:!1,properties:{optimizedLeaveDaysUsed:{type:"number"},optimizedTotalDaysOff:{type:"number"},randomAverageDaysOff:{type:"number"},efficiencyGainPercentage:{type:"number"},commentary:{type:"string"}},required:["optimizedLeaveDaysUsed","optimizedTotalDaysOff","randomAverageDaysOff","efficiencyGainPercentage","commentary"]}},required:["requestSummary","recommendations","comparison"]},Ps=new Intl.DateTimeFormat("en-US",{weekday:"long",timeZone:"UTC"}),w1=new Intl.DateTimeFormat("en-US",{dateStyle:"long",timeZone:"UTC"}),_1=new Intl.DateTimeFormat("en-US",{month:"short",timeZone:"UTC"});function Ms(t){switch(t.getUTCDay()){case 0:return"Falls on a Sunday — consider taking the preceding Friday or following Monday to benefit.";case 1:return"Monday holiday — a single Friday off yields a four-day weekend.";case 2:return"Tuesday holiday — taking Monday connects the prior weekend; consider extending into the week.";case 3:return"Wednesday holiday — stacking Monday/Tuesday or Thursday/Friday can unlock a full week off.";case 4:return"Thursday holiday — one Friday off secures a four-day getaway; add earlier days for more time.";case 5:return"Friday holiday — combine with Thursday (and perhaps Monday) for a long stretch.";case 6:return"Falls on a Saturday — request adjacent Friday or following Monday for impact.";default:return""}}function A1({countryLabel:t,daysToOptimize:e,holidays:r,locale:n}){const a=Math.max(rr-e,0),i=r.map(s=>{const l=new Date(`${s.date}T00:00:00Z`),c=Ps.format(l),u=new Intl.DateTimeFormat(n||"en-US",{dateStyle:"long",timeZone:"UTC"}).format(l),f=Ms(l);return`- ${s.name}: ${s.date} (${c}) — ${u}. ${f}`});return["You are BHP (Bank Holiday Planner), an assistant that designs optimal vacation plans using paid leave days and national bank holidays.",`Country: ${t}.`,`Total paid leave days available this year: ${rr}.`,`Days already committed to other plans: ${a}.`,`Days available for optimization: ${e}.`,"Use the following list of bank holidays (ISO date order preserved):",i.join(`
`),"","Goals:","- Maximize total uninterrupted days off while spending no more than the available optimization days.","- Suggest specific paid leave dates to bridge weekends and holidays.","- Provide a clear rationale for each proposed vacation block.","- Include a comparison that estimates the average days off someone would gain by randomly placing the same number of leave days.","- Respect the response JSON schema exactly.","","Ensure recommendations are in chronological order and avoid overlapping leave suggestions."].join(`
`)}function C1({holidays:t,locale:e}){return t.length?d.jsx("ol",{className:"grid gap-3 sm:grid-cols-2",children:t.map(r=>{const n=new Date(`${r.date}T00:00:00Z`),a=Ps.format(n),i=new Intl.DateTimeFormat(e||"en-US",{dateStyle:"long",timeZone:"UTC"}).format(n);return d.jsxs("li",{className:"rounded-3xl border border-emerald-200/70 bg-white/80 px-4 py-3 text-sm shadow-sm backdrop-blur dark:border-emerald-500/40 dark:bg-slate-900/60",children:[d.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:r.name}),d.jsx("div",{className:"text-slate-600 dark:text-slate-400",children:i}),d.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-500",children:a}),d.jsx("div",{className:"mt-2 text-xs text-emerald-700 dark:text-emerald-300",children:Ms(n)})]},r.date)})}):d.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No bank holidays configured for this country."})}function E1(t,e){if(!t||!e)return[];const r=new Date(`${t}T00:00:00Z`),n=new Date(`${e}T00:00:00Z`);if(Number.isNaN(r.getTime())||Number.isNaN(n.getTime()))return[];const a=[],i=new Date(r);for(;i<=n;)a.push(i.toISOString().slice(0,10)),i.setUTCDate(i.getUTCDate()+1);return a}function to({year:t,holidays:e,recommendations:r}){const n=v.useMemo(()=>new Set(e.map(f=>f.date)),[e]),a=v.useMemo(()=>{const f=new Set;return r?.flatMap(h=>Array.isArray(h.leaveDates)?h.leaveDates:[]).forEach(h=>{typeof h=="string"&&f.add(h)}),f},[r]),i=v.useMemo(()=>{const f=new Set;return r?.forEach(h=>{E1(h.startDate,h.endDate).forEach(p=>f.add(p))}),f},[r]),o=new Date(Date.UTC(t,0,1)),s=new Date(Date.UTC(t+1,0,1)),l=[];let c=new Array(o.getUTCDay()).fill(null);for(let f=new Date(o);f<s;f.setUTCDate(f.getUTCDate()+1))c.length===7&&(l.push(c),c=[]),c.push(new Date(f));if(c.length){for(;c.length<7;)c.push(null);l.push(c)}const u=[];return l.forEach((f,h)=>{const p=f.find(Boolean);if(!p)return;const x=p.getUTCMonth();u.some(m=>m.month===x)||u.push({month:x,weekIndex:h,label:_1.format(p)})}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("div",{className:"flex gap-4 text-xs text-emerald-50/90",children:u.map(f=>d.jsx("span",{style:{marginLeft:`${f.weekIndex*16}px`},children:f.label},f.month))}),d.jsxs("div",{className:"flex gap-[3px] rounded-3xl bg-emerald-900/40 p-3 ring-1 ring-emerald-500/40",children:[d.jsx("div",{className:"grid grid-rows-7 gap-[3px] pr-2 text-[10px] uppercase tracking-wide text-emerald-100/70",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(f=>d.jsx("span",{className:"flex h-3 items-center",children:f},f))}),d.jsx("div",{className:"flex gap-[3px] overflow-x-auto pb-1",children:l.map((f,h)=>d.jsx("div",{className:"grid grid-rows-7 gap-[3px]",children:f.map((p,x)=>{if(!p)return d.jsx("span",{className:"h-3 w-3 rounded-sm bg-transparent"},`empty-${h}-${x}`);const m=p.toISOString().slice(0,10),g=n.has(m),y=a.has(m),b=i.has(m),w=p.getUTCDay()===0||p.getUTCDay()===6;let C="bg-emerald-950/30";b&&(C="bg-teal-300"),g&&(C="bg-emerald-400"),y&&(C="bg-amber-300"),!g&&!y&&!b&&w&&(C="bg-emerald-950/50");const A=[w1.format(p)];return g&&A.push("Bank holiday"),y?A.push("Recommended leave day"):b?A.push("Included in suggested getaway"):w&&A.push("Weekend"),d.jsx("span",{className:`h-3 w-3 rounded-sm transition ${C}`,title:A.join(" • ")},m)})},h))})]}),d.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-emerald-100/80",children:[d.jsx(Ar,{className:"bg-amber-300",label:"Recommended leave"}),d.jsx(Ar,{className:"bg-emerald-400",label:"Bank holiday"}),d.jsx(Ar,{className:"bg-teal-300",label:"Vacation span"}),d.jsx(Ar,{className:"bg-emerald-950/50",label:"Weekends"})]})]})}function Ar({className:t,label:e}){return d.jsxs("span",{className:"inline-flex items-center gap-2",children:[d.jsx("span",{className:`h-3 w-3 rounded-sm ${t}`}),d.jsx("span",{children:e})]})}function N1({recommendations:t}){return t?.length?d.jsx("ol",{className:"space-y-4",children:t.map((e,r)=>{const n=Array.isArray(e.leaveDates)?e.leaveDates:[],a=Array.isArray(e.bankHolidaysLeveraged)?e.bankHolidaysLeveraged:[];return d.jsxs("li",{className:"rounded-3xl border border-emerald-400/30 bg-white/80 p-5 shadow-sm transition hover:-translate-y-0.5 hover:shadow-lg dark:border-emerald-500/40 dark:bg-slate-900/70",children:[d.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[d.jsx("span",{className:"inline-flex items-center rounded-full bg-emerald-500/10 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-200",children:e.label||"Vacation block"}),d.jsxs("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:[e.startDate," → ",e.endDate]})]}),d.jsxs("div",{className:"mt-3 grid gap-3 text-sm text-slate-600 dark:text-slate-300 sm:grid-cols-3",children:[d.jsx(ro,{title:"Leave days used",value:e.leaveDaysUsed}),d.jsx(ro,{title:"Total days off",value:e.totalContinuousDaysOff}),d.jsxs("div",{className:"rounded-2xl bg-emerald-500/5 px-3 py-2",children:[d.jsx("div",{className:"text-xs uppercase tracking-wide text-emerald-700 dark:text-emerald-200",children:"Holidays leveraged"}),d.jsx("div",{className:"text-xs font-medium text-slate-600 dark:text-slate-300",children:a.length?a.join(", "):"—"})]})]}),d.jsxs("div",{className:"mt-3 space-y-2 text-sm text-slate-600 dark:text-slate-300",children:[d.jsxs("div",{children:[d.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-200",children:"Paid leave dates:"})," ",n.length?n.join(", "):"None suggested"]}),d.jsx("p",{className:"leading-relaxed",children:e.rationale})]})]},`${e.startDate}-${e.endDate}-${r}`)})}):d.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No optimization suggestions were returned. Try adjusting the inputs and running the planner again."})}function ro({title:t,value:e}){return d.jsxs("div",{className:"rounded-2xl bg-emerald-500/5 px-3 py-2",children:[d.jsx("div",{className:"text-xs uppercase tracking-wide text-emerald-700 dark:text-emerald-200",children:t}),d.jsx("div",{className:"text-base font-semibold text-slate-900 dark:text-slate-100",children:e})]})}function S1({comparison:t}){return t?d.jsxs("div",{className:"grid gap-4 rounded-3xl border border-emerald-500/30 bg-white/80 p-5 shadow-sm dark:border-emerald-500/40 dark:bg-slate-900/70 sm:grid-cols-2",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-xs uppercase tracking-wide text-emerald-700 dark:text-emerald-200",children:"Optimized outcome"}),d.jsxs("div",{className:"mt-2 text-3xl font-semibold text-slate-900 dark:text-slate-100",children:[t.optimizedTotalDaysOff,d.jsx("span",{className:"ml-1 text-base font-medium text-slate-500 dark:text-slate-400",children:"days off"})]}),d.jsxs("div",{className:"mt-1 text-sm text-slate-600 dark:text-slate-300",children:["Using ",t.optimizedLeaveDaysUsed," paid leave days"]})]}),d.jsxs("div",{children:[d.jsx("div",{className:"text-xs uppercase tracking-wide text-emerald-700 dark:text-emerald-200",children:"Random placement baseline"}),d.jsxs("div",{className:"mt-2 text-3xl font-semibold text-slate-900 dark:text-slate-100",children:[t.randomAverageDaysOff,d.jsx("span",{className:"ml-1 text-base font-medium text-slate-500 dark:text-slate-400",children:"days off"})]}),d.jsxs("div",{className:"mt-1 text-sm text-slate-600 dark:text-slate-300",children:["Efficiency gain: ",t.efficiencyGainPercentage,"%"]})]}),d.jsx("div",{className:"sm:col-span-2 text-sm leading-relaxed text-slate-600 dark:text-slate-300",children:t.commentary})]}):null}function k1(){const t=rn("objectmaker"),[e,r]=v.useState(_r[0]?.id||"usa"),[n,a]=v.useState("10"),[i,o]=v.useState(!1),[s,l]=v.useState(""),[c,u]=v.useState(null),f=_r.find(w=>w.id===e)||_r[0],h=v.useMemo(()=>b1[f.id]||[],[f.id]),p=Rr(t?.defaultBaseUrl),x=t?.defaultModel||t?.modelOptions?.[0],m=Number.parseInt(n,10),g=v.useMemo(()=>{const w=h.length?new Date(`${h[0].date}T00:00:00Z`).getUTCFullYear():null;if(Number.isInteger(w))return w;if(c?.recommendations?.length){const C=c.recommendations.find(A=>A?.startDate);if(C){const A=new Date(`${C.startDate}T00:00:00Z`).getUTCFullYear();if(Number.isInteger(A))return A}}return new Date().getUTCFullYear()},[h,c?.recommendations]),y=Math.max(rr-(Number.isFinite(m)?m:0),0),b=async w=>{w.preventDefault();const C=Number.isFinite(m)&&m>0?m:0;if(!C){l("Enter how many paid leave days you can dedicate to optimization.");return}if(!h.length){l("No bank holidays configured for this country yet.");return}if(!p){l("Missing Object Maker base URL for /obj requests.");return}o(!0),l(""),u(null);try{const A=A1({countryLabel:f.label,daysToOptimize:C,holidays:h,locale:f.locale}),{payload:N}=await dn({baseUrl:p,structure:y1,objectType:eo,prompt:A,strict:!0,model:x});u(N)}catch(A){l(A?.message||"BHP request failed")}finally{o(!1)}};return d.jsxs("div",{className:"space-y-12",children:[d.jsxs("section",{className:"relative overflow-hidden rounded-[2.75rem] bg-gradient-to-br from-emerald-600 via-cyan-600 to-teal-600 px-8 py-10 text-emerald-50 shadow-xl",children:[d.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.18),_transparent_55%)]","aria-hidden":!0}),d.jsxs("div",{className:"relative z-10 grid gap-8 lg:grid-cols-[minmax(0,3fr)_minmax(0,2fr)] lg:items-center",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-emerald-100/80",children:"BHP · Bank Holiday Planner"}),d.jsx("h1",{className:"text-3xl font-semibold sm:text-4xl",children:"Turn bank holidays into maxed-out vacations."}),d.jsxs("p",{className:"text-base leading-relaxed text-emerald-50/90",children:["Choose a supported country, enter the paid leave you can flex, and BHP calls the",d.jsx("code",{className:"mx-1 rounded bg-emerald-950/60 px-1 py-0.5 text-[0.7rem] font-semibold text-emerald-100",children:"/obj"}),"route with a strict schema. The response maps out PTO requests that weave weekends and bank holidays into long, continuous breaks—and shows how that beats random scheduling."]}),d.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm text-emerald-100/90",children:[d.jsx("span",{className:"inline-flex items-center gap-2 rounded-full bg-emerald-950/30 px-3 py-1 text-xs font-semibold uppercase tracking-wide",children:"USA · UK · FR · ES · IT"}),d.jsx(we,{to:"/",className:"inline-flex items-center gap-2 rounded-full bg-emerald-50/10 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-emerald-50 transition hover:bg-emerald-50/20",children:"← Back to overview"})]})]}),d.jsxs("div",{className:"hidden relative min-h-[160px] overflow-hidden rounded-3xl border border-emerald-200/40 bg-white/10 p-4 shadow-lg backdrop-blur-sm lg:flex lg:items-center lg:justify-center",children:[d.jsx("div",{className:"pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.28),_transparent_65%)]","aria-hidden":!0}),d.jsx("div",{className:"relative z-10 w-full",children:d.jsx(to,{year:g,holidays:h,recommendations:c?.recommendations})})]})]})]}),d.jsxs("section",{className:"space-y-6",children:[d.jsxs("form",{onSubmit:b,className:"grid gap-6 rounded-3xl border border-emerald-500/30 bg-white/80 p-6 shadow-sm backdrop-blur dark:border-emerald-500/40 dark:bg-slate-900/70 md:grid-cols-2",children:[d.jsxs("label",{className:"flex flex-col gap-2",children:[d.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-emerald-700 dark:text-emerald-200",children:"Country"}),d.jsx("select",{value:e,onChange:w=>r(w.target.value),className:"rounded-2xl border border-emerald-400/60 bg-white px-3 py-2 text-sm text-slate-800 shadow-sm transition focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/40 dark:border-emerald-500/40 dark:bg-slate-950 dark:text-slate-100",children:_r.map(w=>d.jsx("option",{value:w.id,children:w.label},w.id))})]}),d.jsxs("label",{className:"flex flex-col gap-2",children:[d.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-emerald-700 dark:text-emerald-200",children:"Days to optimize"}),d.jsx("input",{type:"number",min:"1",max:rr,value:n,onChange:w=>a(w.target.value),className:"rounded-2xl border border-emerald-400/60 bg-white px-3 py-2 text-sm text-slate-800 shadow-sm transition focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/40 dark:border-emerald-500/40 dark:bg-slate-950 dark:text-slate-100"}),d.jsx("span",{className:"text-xs text-emerald-700/80 dark:text-emerald-200/80",children:y>0?`${y} of your ${rr} paid leave days are already reserved for other plans.`:"All paid leave days are available for optimization."})]}),d.jsxs("div",{className:"md:col-span-2 flex flex-wrap items-center justify-between gap-3 text-xs text-emerald-700 dark:text-emerald-200",children:[d.jsxs("span",{children:["BHP will request ",d.jsx("strong",{children:m||0})," paid leave days via the",d.jsx("code",{className:"mx-1 rounded bg-emerald-500/10 px-1 py-0.5 text-[0.65rem] font-semibold text-emerald-800 dark:bg-emerald-500/20 dark:text-emerald-100",children:"/obj"}),"endpoint using ",x?d.jsx("span",{className:"font-medium",children:x}):"the configured model","."]}),d.jsx("button",{type:"submit",disabled:i,className:"inline-flex items-center gap-2 rounded-full bg-gradient-to-r from-emerald-400 via-cyan-400 to-teal-400 px-5 py-2 text-sm font-semibold text-emerald-950 shadow transition hover:shadow-md focus:outline-none focus-visible:ring-2 focus-visible:ring-emerald-300 disabled:cursor-not-allowed disabled:opacity-60",children:i?"Planning…":"Run planner"})]})]}),s&&d.jsx("div",{className:"rounded-2xl border border-rose-300 bg-rose-50 px-4 py-3 text-sm text-rose-600 dark:border-rose-500/40 dark:bg-rose-500/10 dark:text-rose-200",children:s})]}),d.jsxs("section",{className:"space-y-4",children:[d.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Bank holidays considered"}),d.jsx(C1,{holidays:h,locale:f.locale})]}),d.jsxs("section",{className:"space-y-4",children:[d.jsxs("header",{className:"space-y-2",children:[d.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Optimization output"}),d.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:["Once the ",eo," response lands, you will see suggested PTO placements, the total days unlocked, and how that compares to random scheduling."]})]}),i&&d.jsx("div",{className:"rounded-3xl border border-emerald-500/30 bg-white/80 px-4 py-6 text-center text-sm text-emerald-800 shadow-sm dark:border-emerald-500/40 dark:bg-slate-900/70 dark:text-emerald-200",children:"Crunching possibilities with BHP…"}),!i&&c&&d.jsxs("div",{className:"space-y-6",children:[c.requestSummary&&d.jsxs("div",{className:"rounded-3xl border border-emerald-500/30 bg-white/80 p-5 shadow-sm dark:border-emerald-500/40 dark:bg-slate-900/70",children:[d.jsx("div",{className:"text-xs uppercase tracking-wide text-emerald-700 dark:text-emerald-200",children:"Request summary"}),d.jsxs("dl",{className:"mt-3 grid gap-3 text-sm text-slate-600 dark:text-slate-300 sm:grid-cols-2",children:[d.jsxs("div",{children:[d.jsx("dt",{className:"font-medium text-slate-700 dark:text-slate-200",children:"Country"}),d.jsx("dd",{children:c.requestSummary.country})]}),d.jsxs("div",{children:[d.jsx("dt",{className:"font-medium text-slate-700 dark:text-slate-200",children:"Days reserved elsewhere"}),d.jsx("dd",{children:c.requestSummary.daysReservedForOtherPlans})]}),d.jsxs("div",{children:[d.jsx("dt",{className:"font-medium text-slate-700 dark:text-slate-200",children:"Days to optimize"}),d.jsx("dd",{children:c.requestSummary.daysAvailableForOptimization})]}),d.jsxs("div",{children:[d.jsx("dt",{className:"font-medium text-slate-700 dark:text-slate-200",children:"Bank holidays considered"}),d.jsx("dd",{children:c.requestSummary.totalBankHolidaysConsidered})]})]})]}),d.jsx("div",{className:"lg:hidden",children:d.jsx(to,{year:g,holidays:h,recommendations:c.recommendations})}),d.jsx(N1,{recommendations:c.recommendations}),d.jsx(S1,{comparison:c.comparison})]}),!i&&!c&&!s&&d.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Provide your constraints above and run the planner to surface optimized vacation blocks."})]})]})}const I1=[{value:"all",label:"All news"},{value:"good",label:"Good only"},{value:"bad",label:"Bad only"}];function O1({filter:t,onFilterChange:e}){return d.jsxs("div",{className:"flex flex-col gap-3 p-4",children:[d.jsx("h2",{className:"text-lg font-semibold",children:"News Headlines by Category"}),d.jsx("div",{className:"flex flex-wrap gap-2",children:I1.map(r=>{const n=t===r.value;return d.jsx("button",{type:"button",onClick:()=>e(r.value),className:`rounded-full border px-3 py-1 text-sm transition-colors duration-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 ${n?"border-blue-500 bg-blue-500 text-white shadow-sm focus-visible:ring-blue-500":"border-slate-300 bg-white text-slate-600 hover:border-blue-400 hover:text-blue-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-200 dark:hover:border-blue-400"}`,children:r.label},r.value)})})]})}const Ls={top:"Top Stories",world:"World",us:"US",business:"Business",technology:"Technology",politics:"Politics",health:"Health",entertainment:"Entertainment",travel:"Travel"},nr=Object.keys(Ls),Wr=[{id:"openai/gpt-oss-20b",label:"GPT-OSS 20B",dotClass:"bg-emerald-500"},{id:"openai/gpt-oss-120b",label:"GPT-OSS 120B",dotClass:"bg-indigo-500"},{id:"moonshotai/kimi-k2-instruct-0905",label:"Kimi K2 Instruct",dotClass:"bg-amber-500"},{id:"meta-llama/llama-4-maverick-17b-128e-instruct",label:"Llama 4 Maverick",dotClass:"bg-rose-500"},{id:"meta-llama/llama-4-scout-17b-16e-instruct",label:"Llama 4 Scout",dotClass:"bg-cyan-500"}];function T1(t){return t&&Wr.find(e=>e.id===t)||null}function j1(t,e,r){return e.reduce((n,a,i)=>{const o=r?.[`${t}-${i}`];return o&&(o.status==="pending"&&(n.hasPending=!0),o.status==="complete"&&(n.hasComplete=!0),o.status==="error"&&(n.hasError=!0)),n},{hasPending:!1,hasComplete:!1,hasError:!1})}function R1(t,e){return t==="all"?!0:!e||!e.sentiment?!1:e.sentiment===t}function D1(t){return t==="good"?"bg-emerald-50 dark:bg-emerald-900/30 border border-emerald-200 dark:border-emerald-500/40":t==="bad"?"bg-rose-50 dark:bg-rose-900/30 border border-rose-200 dark:border-rose-500/40":"bg-white dark:bg-slate-800 border border-transparent"}function P1({news:t,loading:e,classifications:r,filter:n,activationCounts:a,onActivateCategory:i,onActivateAllCategories:o}){if(e)return d.jsx("div",{className:"p-4 text-center",children:"Loading news..."});const s=nr.filter(c=>(t[c]||[]).length>0),l=s.every(c=>(a?.[c]||0)>0);return d.jsxs("div",{className:"space-y-16",children:[d.jsx("section",{className:"rounded-3xl border border-slate-200 bg-white/80 p-6 shadow-sm backdrop-blur dark:border-slate-700 dark:bg-slate-900/60",children:d.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("h2",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100",children:"How classification unfolds"}),d.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:["The top news section autoloads so you get an instant pulse, while the rest wait for you to tap"," ",d.jsx("span",{className:"mx-1 rounded-full bg-slate-200 px-2 py-0.5 text-xs uppercase tracking-wide text-slate-700 dark:bg-slate-700 dark:text-slate-200",children:"Classify"})," ","when you're ready."]}),d.jsx("p",{className:"text-xs italic text-slate-500 dark:text-slate-400",children:"Curious note: our Groq API hummingbird spooks easily—hammering the auto-load can bump into rate limits."})]}),d.jsx("div",{className:"shrink-0",children:d.jsx("button",{type:"button",onClick:()=>{!l&&o&&o()},disabled:!s.length||l,className:`inline-flex items-center gap-2 rounded-full border border-blue-500 bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition-all hover:bg-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 dark:border-blue-400 dark:bg-blue-500 dark:hover:bg-blue-400 ${!s.length||l?"cursor-not-allowed opacity-60 hover:bg-blue-600 dark:hover:bg-blue-500":""}`,children:"Autoload everything"})})]})}),d.jsxs("section",{"aria-label":"Model legend",className:"space-y-3",children:[d.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-gray-500 dark:text-slate-400",children:"Model legend"}),d.jsx("div",{className:"flex flex-wrap items-center gap-4",children:Wr.map(c=>d.jsxs("span",{className:"inline-flex items-center gap-2 text-sm text-gray-600 dark:text-slate-300",children:[d.jsx("span",{className:`h-3 w-3 rounded-full ${c.dotClass}`,"aria-hidden":"true"}),d.jsx("span",{children:c.label})]},c.id))})]}),nr.map(c=>{const u=(t[c]||[]).slice(0,10);if(!u.length)return null;const{hasPending:f,hasComplete:h,hasError:p}=j1(c,u,r),m=(a?.[c]||0)>0;let g="Classify",y=!u.length;return m&&(f?(g="Classifying…",y=!0):p?(g="Retry classification",y=!1):h?(g="Classified",y=!0):(g="Classify",y=!u.length)),d.jsxs("section",{children:[d.jsxs("div",{className:"relative mb-8",children:[d.jsx("div",{className:"absolute inset-0 flex items-center","aria-hidden":"true",children:d.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),d.jsx("div",{className:"relative flex justify-center",children:d.jsx("span",{className:"bg-white dark:bg-slate-900 px-4 text-2xl font-serif text-gray-500 dark:text-gray-400",children:Ls[c]})})]}),d.jsx("div",{className:"mb-6 flex justify-end",children:d.jsx("button",{type:"button",onClick:()=>{!y&&i&&i(c)},disabled:y,className:`inline-flex items-center gap-2 rounded-full border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-600 shadow-sm transition-colors hover:border-slate-400 hover:text-slate-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:border-slate-600 dark:bg-slate-800 dark:text-slate-200 dark:hover:border-slate-500 dark:hover:text-white ${y?"cursor-not-allowed opacity-60 hover:border-slate-300 hover:text-slate-600 dark:hover:border-slate-600 dark:hover:text-slate-200":""}`,children:g})}),d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:u.map((b,w)=>{const C=`${c}-${w}`,A=r?.[C];if(!R1(n,A))return null;const N=D1(A?.sentiment),E=T1(A?.modelId);return d.jsx("article",{className:`rounded-lg shadow-lg overflow-hidden transform hover:-translate-y-1 transition-transform duration-300 ${N}`,children:d.jsxs("div",{className:"p-6",children:[d.jsx("a",{href:b.link,target:"_blank",rel:"noopener noreferrer",className:"text-2xl font-serif text-gray-800 dark:text-slate-100 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-300",children:b.title.replace(/Fixture:/g,"")}),d.jsxs("div",{className:"mt-3 text-sm text-gray-500 dark:text-slate-400",children:[new Date(b.publishedAt).toLocaleString()," • ",b.sourceTitle]}),d.jsxs("div",{className:"mt-3 flex items-center gap-3 text-sm",children:[d.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-100 px-2 py-1 text-xs font-medium uppercase tracking-wide text-slate-600 dark:bg-slate-700 dark:text-slate-200",children:A?.sentiment?`${A.sentiment} news`:A?.status==="pending"?"classifying…":"not classified"}),E&&d.jsxs("span",{className:"inline-flex items-center gap-2 text-xs text-gray-500 dark:text-slate-400",children:[d.jsx("span",{className:`h-2.5 w-2.5 rounded-full ${E.dotClass}`,"aria-hidden":"true"}),d.jsx("span",{children:E.label})]}),A?.status==="error"&&d.jsx("span",{className:"text-xs text-rose-500",children:"Classification failed"})]}),d.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[b.sourceTitle&&d.jsx("span",{className:"badge bg-gray-100 dark:bg-slate-700 text-gray-600 dark:text-slate-300 border-gray-200 dark:border-slate-600",children:b.sourceTitle}),b.link&&d.jsx("span",{className:"badge bg-gray-100 dark:bg-slate-700 text-gray-600 dark:text-slate-300 border-gray-200 dark:border-slate-600",children:new URL(b.link).hostname.replace(/^www\./,"")})]}),b.description&&d.jsx("p",{className:"mt-4 text-gray-600 dark:text-slate-300",dangerouslySetInnerHTML:{__html:b.description}})]})},w)})})]},c)})]})}const M1="https://groq-endpoint.louispaulet13.workers.dev/",L1={type:"object",additionalProperties:!1,properties:{sentiment:{type:"string",enum:["good","bad"]}},required:["sentiment"]};function B1(t){const e=["Please classify the following news article while adhering the schema:","",`Title: ${t.title||"N/A"}`];return t.description&&e.push(`Description: ${t.description}`),t.sourceTitle&&e.push(`Source: ${t.sourceTitle}`),t.publishedAt&&e.push(`Published At: ${t.publishedAt}`),t.content&&e.push(`Content: ${t.content}`),e.join(`
`)}function F1(){const t=rn("newsanalyzer"),[e,r]=v.useState({}),[n,a]=v.useState(!0),[i,o]=v.useState("all"),[s,l]=v.useState({}),[c,u]=v.useState({}),f=v.useRef(s),h=v.useRef([]),p=v.useRef(!1),x=v.useRef(0),m=v.useRef(!0),g=v.useRef(null);v.useEffect(()=>{f.current=s},[s]),v.useEffect(()=>(m.current=!0,()=>{m.current=!1,g.current&&(clearTimeout(g.current),g.current=null)}),[]);const y=v.useCallback(()=>{if(!m.current||p.current)return;const A=h.current.shift();if(!A)return;p.current=!0;const{category:N,index:E,item:S}=A,I=`${N}-${E}`,O=Wr.length,j=O?Wr[x.current%O]:null;O&&(x.current=(x.current+1)%O),(async()=>{try{const{payload:M}=await dn({structure:L1,prompt:B1(S),strict:!0,model:j?.id}),G=typeof M?.sentiment=="string"?M.sentiment.toLowerCase():null,F=G==="good"||G==="bad"?G:null;m.current&&l(V=>{const Y=V[I]?.status,Z=F?"complete":"error";return F&&Y!=="complete"&&Gh(),{...V,[I]:{...V[I]||{},sentiment:F,status:Z,modelId:j?.id||null,modelLabel:j?.label||null,error:F?null:V[I]?.error||null}}})}catch(M){console.error("Failed to classify article",M),m.current&&l(G=>({...G,[I]:{...G[I]||{},sentiment:null,status:"error",modelId:j?.id||null,modelLabel:j?.label||null,error:M?.message||"Classification failed"}}))}finally{p.current=!1,g.current&&clearTimeout(g.current),m.current&&(g.current=setTimeout(()=>{g.current=null,y()},1e3))}})()},[]);v.useEffect(()=>{let A=!1;return(async()=>{a(!0);const E={};if(await Promise.all(nr.map(async I=>{try{const O=`${M1}news/${I}`,M=await(await fetch(O,{headers:{Accept:"application/json"}})).json();E[I]=(M?.items||[]).slice(0,10)}catch(O){console.error(`Failed to fetch news for category: ${I}`,O),E[I]=[]}})),A||!m.current)return;h.current=[],p.current=!1,g.current&&(clearTimeout(g.current),g.current=null),l({}),f.current={};const S=nr[0];u(S?{[S]:1}:{}),r(E),a(!1)})(),()=>{A=!0}},[]);const b=v.useCallback(A=>{const N=e[A]||[];if(!N.length)return;const E=[],S={};N.forEach((I,O)=>{const j=`${A}-${O}`,M=f.current[j];M?.status==="complete"||M?.status==="pending"||(E.push({category:A,index:O,item:I}),S[j]={sentiment:null,status:"pending",modelId:null,modelLabel:null,error:null})}),E.length&&(l(I=>({...I,...S})),h.current.push(...E),y())},[e,y]);v.useEffect(()=>{n||Object.keys(e).length&&Object.entries(c).forEach(([A,N])=>{N>0&&b(A)})},[c,b,n,e]);const w=v.useCallback(A=>{u(N=>({...N,[A]:(N[A]||0)+1}))},[]),C=v.useCallback(()=>{u(A=>{const N={...A};return nr.forEach(E=>{(e[E]||[]).length&&(N[E]=(N[E]||0)+1)}),N})},[e]);return d.jsx(Ke,{experience:t,navigation:d.jsx(O1,{filter:i,onFilterChange:o}),children:d.jsx(P1,{news:e,loading:n,classifications:s,filter:i,activationCounts:c,onActivateCategory:w,onActivateAllCategories:C})})}const Dr=rn("sixdegrees"),U1=Dr?.systemPrompt||["You are a playful parody writer. When given any text you respond with a witty parody of it.","Keep responses concise (2-4 sentences) and ensure they clearly riff on the original idea.","Match the length of the original message as closely as possible—no more than about 20% longer than the user's input.","Avoid quoting the original verbatim; reshape it with humor and creative twists."].join(" ");function G1(t){return new Promise(e=>{setTimeout(e,t)})}function V1(){const[t,e]=v.useState(""),[r,n]=v.useState(""),[a,i]=v.useState([]),[o,s]=v.useState(0),[l,c]=v.useState(!1),u=v.useMemo(()=>t.trim().length>0&&!l,[t,l]);async function f(h){if(h.preventDefault(),!Dr){n("Unable to load the Six Degrees experience configuration.");return}const p=t.trim();if(!p){n("Please provide a sentence to parody.");return}c(!0),n(""),s(0),i([{label:"Original spark",content:p}]);let x=p;for(let m=1;m<=6;m+=1){s(m);try{x=(await pr(Dr,[{role:"system",content:U1},{role:"user",content:x}],{model:Dr.defaultModel})).content.trim(),i(y=>[...y,{label:`Degree ${m}`,content:x}])}catch(g){console.error(g),n(g?.message||"Something went wrong while generating the parody.");break}m<6&&await G1(1e3)}c(!1),s(0)}return d.jsxs("div",{className:"space-y-10",children:[d.jsx("header",{className:"space-y-4 rounded-3xl bg-gradient-to-br from-fuchsia-500 via-purple-500 to-purple-700 p-[1px]",children:d.jsxs("div",{className:"rounded-[calc(1.5rem-1px)] bg-white/95 p-8 shadow-sm dark:bg-slate-900/90",children:[d.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-fuchsia-500",children:"Remix Lab"}),d.jsx("h1",{className:"text-3xl font-semibold text-slate-900 dark:text-slate-100",children:"Six Degrees Of Parody"}),d.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Start with a sentence and watch Groq parody it six times in a row. Each degree only sees the previous punchline, so the humor evolves right in front of you."}),d.jsxs("form",{className:"mt-6 space-y-4",onSubmit:f,children:[d.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",htmlFor:"six-degree-input",children:"Enter your seed sentence"}),d.jsx("textarea",{id:"six-degree-input",className:"w-full rounded-2xl border border-slate-300 bg-white/90 p-4 text-sm text-slate-800 shadow-sm transition focus:border-fuchsia-500 focus:outline-none focus:ring-2 focus:ring-fuchsia-500/30 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-100",rows:3,value:t,onChange:h=>e(h.target.value),placeholder:"Example: Our office coffee machine just became self-aware.",disabled:l}),d.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[d.jsx("button",{type:"submit",disabled:!u,className:"inline-flex items-center gap-2 rounded-full bg-gradient-to-r from-fuchsia-500 to-purple-600 px-5 py-2 text-sm font-semibold text-white shadow transition disabled:cursor-not-allowed disabled:opacity-60",children:l?"Remixing…":"Run six degrees"}),d.jsx("button",{type:"button",onClick:()=>{e(""),i([]),n(""),s(0)},className:"inline-flex items-center rounded-full border border-slate-300 px-4 py-2 text-sm font-medium text-slate-600 transition hover:border-fuchsia-500 hover:text-fuchsia-600 dark:border-slate-700 dark:text-slate-300 dark:hover:border-fuchsia-500 dark:hover:text-fuchsia-400",disabled:l&&a.length<=1,children:"Reset"}),l&&d.jsxs("span",{className:"text-xs font-medium uppercase tracking-wide text-fuchsia-600 dark:text-fuchsia-400",children:["Generating degree ",o," of 6…"]})]}),r&&d.jsx("p",{className:"text-sm text-rose-600 dark:text-rose-400",children:r})]})]})}),!!a.length&&d.jsxs("section",{className:"space-y-6",children:[d.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Evolution timeline"}),d.jsx("ol",{className:"space-y-4",children:a.map((h,p)=>d.jsxs("li",{className:"relative overflow-hidden rounded-3xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900",children:[d.jsxs("div",{className:"flex items-start justify-between gap-3",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-xs uppercase tracking-wider text-fuchsia-500 dark:text-fuchsia-300",children:h.label}),d.jsx("p",{className:"mt-2 whitespace-pre-wrap text-sm text-slate-700 dark:text-slate-200",children:h.content})]}),d.jsx("span",{className:"text-xs font-semibold text-slate-400",children:String(p).padStart(2,"0")})]}),p===a.length-1&&l&&p<6&&d.jsx("div",{className:"absolute inset-x-0 bottom-0 h-1 bg-gradient-to-r from-fuchsia-400 via-purple-500 to-purple-700 animate-pulse"})]},`${h.label}-${p}`))})]})]})}const ar="allin_flux_image_history",$1=3600*24*30;function Bs(t){if(!t)return null;const e=typeof t.url=="string"?t.url.trim():"";if(!e)return null;const r=typeof t.prompt=="string"?t.prompt:"",n=typeof t.timestamp=="number"&&Number.isFinite(t.timestamp)?t.timestamp:Date.now();return{url:e,prompt:r,timestamp:n}}function Fs(){const t=ba(ar);if(!t)return[];try{const e=JSON.parse(t);return Array.isArray(e)?e.map(Bs).filter(Boolean):[]}catch{return[]}}function H1(t){if(!Array.isArray(t)||t.length===0){ft(ar);return}const e=t.map(Bs).filter(Boolean);if(e.length===0){ft(ar);return}ya(ar,e,{maxAgeSeconds:$1})}function Us(){ft(ar)}const z1=Number.POSITIVE_INFINITY;function W1(t){const e=new Date(t);return Number.isNaN(e.getTime())?"":e.toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"})}function X1({entry:t,onSelect:e}){return d.jsxs("button",{type:"button",onClick:()=>e(t),className:"flex flex-col items-start gap-1 rounded-xl border border-slate-200 bg-white/70 p-3 text-left shadow-sm transition hover:border-brand-400 hover:bg-brand-50/70 dark:border-slate-700 dark:bg-slate-900/60 dark:hover:border-brand-300",children:[d.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:t.prompt||"Saved image"}),t.timestamp?d.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:W1(t.timestamp)}):null]})}function Y1({experience:t}){const[e,r]=v.useState("train speeding through a neon cyberpunk tunnel"),[n,a]=v.useState(!1),[i,o]=v.useState(""),[s,l]=v.useState(null),[c,u]=v.useState([]);v.useEffect(()=>{u(Fs())},[]);const f=t?.imageApiBaseUrl||"https://groq-endpoint.louispaulet13.workers.dev";async function h(m){m.preventDefault();const g=e.trim();if(!g){o("Please provide a prompt before generating an image.");return}a(!0),o("");try{const y=new URL(`${f.replace(/\/$/,"")}/flux/${encodeURIComponent(g)}`),b=await fetch(y.toString());if(!b.ok)throw new Error(`Generation failed with status ${b.status}`);const w=await b.json(),C=Array.isArray(w?.images)?w.images:[];if(C.length===0||!C[0]?.url)throw new Error("The service did not return an image URL.");const A=typeof w.prompt=="string"&&w.prompt.trim()?w.prompt.trim():g,N={prompt:A,images:C.map((j,M)=>({url:j?.url||"",index:typeof j?.index=="number"?j.index:M})),raw:w};l(N);const E=Date.now(),S=N.images.filter(j=>j?.url).map((j,M)=>({prompt:A,url:j.url,timestamp:E+M})),I=c.filter(j=>!S.some(M=>M.url===j.url)),O=[...S,...I].slice(0,z1);u(O),H1(O)}catch(y){o(y instanceof Error?y.message:"Unexpected error during generation.")}finally{a(!1)}}function p(m){m?.url&&(r(m.prompt||""),l({prompt:m.prompt,images:[{url:m.url,index:0}],raw:null}))}function x(){Us(),u([])}return d.jsx("div",{className:"space-y-8",children:d.jsxs("section",{className:"grid gap-8 lg:grid-cols-[1.1fr_0.9fr]",children:[d.jsxs("form",{onSubmit:h,className:"space-y-6 rounded-2xl border border-slate-200 bg-white/80 p-6 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[d.jsxs("div",{children:[d.jsxs("label",{htmlFor:"imagegen-prompt",className:"flex items-center justify-between text-sm font-medium text-slate-700 dark:text-slate-200",children:["Image prompt",d.jsx("span",{className:"text-xs font-normal text-slate-400 dark:text-slate-500",children:"Flux @ Groq endpoint"})]}),d.jsx("textarea",{id:"imagegen-prompt",value:e,onChange:m=>r(m.target.value),rows:4,className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-3 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/50 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100",placeholder:"Describe the image you want to see..."}),d.jsxs("p",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:["The request is sent to ",d.jsx("code",{className:"rounded bg-slate-100 px-1 py-0.5 text-[0.7rem] text-slate-700 dark:bg-slate-800 dark:text-slate-200",children:`${f}/flux/<prompt>`}),". We'll display the first image from the response."]})]}),d.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[d.jsxs("button",{type:"submit",disabled:n,className:"inline-flex items-center gap-2 rounded-full bg-brand-600 px-5 py-2.5 text-sm font-medium text-white shadow transition hover:bg-brand-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500/40 focus-visible:ring-offset-2 focus-visible:ring-offset-white disabled:cursor-not-allowed disabled:bg-brand-400 dark:focus-visible:ring-offset-slate-900",children:[d.jsx(Qr,{className:`h-5 w-5 ${n?"animate-spin":""}`}),n?"Generating…":"Generate image"]}),d.jsx(we,{to:"/imagegen/gallery",className:"inline-flex items-center gap-2 rounded-full border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-600 shadow-sm transition hover:border-brand-400 hover:text-brand-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-400/40 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:border-slate-600 dark:bg-slate-900 dark:text-slate-200",children:"View gallery"}),c.length>0?d.jsxs("button",{type:"button",onClick:x,className:"inline-flex items-center gap-2 rounded-full border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-600 shadow-sm transition hover:border-red-400 hover:text-red-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-400/30 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:border-slate-600 dark:bg-slate-900 dark:text-slate-200 dark:hover:border-red-400 dark:hover:text-red-300 dark:focus-visible:ring-offset-slate-900",children:[d.jsx(dr,{className:"h-4 w-4"}),"Clear saved images"]}):null]}),i?d.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700 dark:border-red-800 dark:bg-red-900/40 dark:text-red-200",children:i}):null]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white/80 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[d.jsx("div",{className:"border-b border-slate-200 bg-slate-50 px-4 py-3 text-sm font-semibold text-slate-600 dark:border-slate-700 dark:bg-slate-900/80 dark:text-slate-200",children:"Latest result"}),d.jsx("div",{className:"flex flex-col gap-4 p-4",children:s?d.jsxs(d.Fragment,{children:[d.jsx("div",{children:d.jsx("h3",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:s.prompt})}),d.jsx("div",{className:"relative overflow-hidden rounded-xl border border-slate-200 bg-slate-100 dark:border-slate-700 dark:bg-slate-800",children:d.jsx("img",{src:s.images[0].url,alt:s.prompt,className:"h-full w-full object-cover",loading:"lazy"})}),d.jsx("a",{href:s.images[0].url,target:"_blank",rel:"noreferrer",className:"inline-flex w-fit items-center gap-2 rounded-full border border-slate-300 bg-white px-4 py-2 text-xs font-medium text-slate-600 transition hover:border-brand-400 hover:text-brand-600 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-200",children:"Open image in new tab"})]}):d.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Submit a prompt to generate your first image. Your results will appear here."})})]}),d.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white/80 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[d.jsx("div",{className:"border-b border-slate-200 bg-slate-50 px-4 py-3 text-sm font-semibold text-slate-600 dark:border-slate-700 dark:bg-slate-900/80 dark:text-slate-200",children:"Saved images (browser cookie)"}),d.jsx("div",{className:"grid gap-3 p-4 sm:grid-cols-2",children:c.length===0?d.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Generate an image to automatically store the image URL, prompt, and timestamp in a browser cookie for quick acce ss."}):c.map(m=>d.jsx(X1,{entry:m,onSelect:p},`${m.url}-${m.timestamp}`))})]})]})]})})}const Kt=12;function q1(){const[t,e]=v.useState([]),[r,n]=v.useState(Kt),a=v.useRef(null),i=v.useCallback(()=>{e(Fs())},[]);v.useEffect(()=>{i()},[i]),v.useEffect(()=>{n(u=>{if(t.length===0)return Kt;const f=Math.max(Kt,u);return Math.min(f,t.length)})},[t.length]),v.useEffect(()=>{if(typeof window>"u")return;const u=()=>i();window.addEventListener("focus",u);let f;return typeof document<"u"&&(f=()=>{document.visibilityState==="visible"&&i()},document.addEventListener("visibilitychange",f)),()=>{window.removeEventListener("focus",u),f&&typeof document<"u"&&document.removeEventListener("visibilitychange",f)}},[i]),v.useEffect(()=>{const u=a.current;if(!u)return;if(typeof window>"u"||!("IntersectionObserver"in window)){n(t.length);return}const f=new IntersectionObserver(h=>{h.forEach(p=>{p.isIntersecting&&n(x=>Math.min(x+Kt,t.length))})});return f.observe(u),()=>{f.disconnect()}},[t.length]);const o=v.useMemo(()=>t.slice(0,r),[t,r]),s=t.length>0,l=r<t.length;function c(){Us(),e([]),n(Kt)}return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-xl font-semibold text-slate-800 dark:text-slate-100",children:"Saved image gallery"}),d.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Browse every image saved to your browser cookie. Scroll to load more or refresh after generating new art."})]}),d.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[d.jsx(we,{to:"/imagegen",className:"inline-flex items-center gap-2 rounded-full border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-600 shadow-sm transition hover:border-brand-400 hover:text-brand-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-400/40 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:border-slate-600 dark:bg-slate-900 dark:text-slate-200",children:"Back to generator"}),d.jsx("button",{type:"button",onClick:i,className:"inline-flex items-center gap-2 rounded-full border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-600 shadow-sm transition hover:border-sky-400 hover:text-sky-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-400/40 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:border-slate-600 dark:bg-slate-900 dark:text-slate-200",children:"Refresh"}),s?d.jsx("button",{type:"button",onClick:c,className:"inline-flex items-center gap-2 rounded-full border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-600 shadow-sm transition hover:border-red-400 hover:text-red-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-400/30 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:border-slate-600 dark:bg-slate-900 dark:text-slate-200",children:"Clear all"}):null]})]}),s?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:o.map(u=>d.jsxs("article",{className:"flex flex-col overflow-hidden rounded-2xl border border-slate-200 bg-white/80 shadow-sm transition hover:-translate-y-0.5 hover:border-sky-300 dark:border-slate-700 dark:bg-slate-900/60",children:[d.jsx("div",{className:"relative aspect-square w-full overflow-hidden bg-slate-100 dark:bg-slate-800",children:d.jsx("img",{src:u.url,alt:u.prompt||"Generated image",className:"h-full w-full object-cover",loading:"lazy"})}),d.jsxs("div",{className:"space-y-2 p-4",children:[d.jsx("h2",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:u.prompt||"Saved image"}),u.timestamp?d.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:new Date(u.timestamp).toLocaleString()}):null,d.jsx("a",{href:u.url,target:"_blank",rel:"noreferrer",className:"inline-flex w-fit items-center gap-2 rounded-full border border-slate-300 bg-white px-4 py-1.5 text-xs font-medium text-slate-600 transition hover:border-sky-400 hover:text-sky-600 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-200",children:"Open original"})]})]},`${u.url}-${u.timestamp}`))}),d.jsx("div",{ref:a,className:"h-8 w-full","aria-hidden":!0}),l?null:d.jsx("p",{className:"text-center text-sm text-slate-500 dark:text-slate-400",children:"You've reached the end of your saved images."})]}):d.jsx("div",{className:"rounded-2xl border border-dashed border-slate-300 bg-white/60 p-10 text-center text-sm text-slate-500 dark:border-slate-700 dark:bg-slate-900/40 dark:text-slate-400",children:"No saved images yet. Generate something new and it will appear here automatically."})]})}const Cr=12,Er=70,no=30,ao=54,io=80,oo=1e3,Z1=260,K1=20;function jn(t,e,r){return Number.isFinite(t)?Math.min(Math.max(t,e),r):e}function J1(t){return Number.isFinite(t)?t<1e3?`${t} ms`:`${(t/1e3).toFixed(1)} s`:""}function Q1(){const[t,e]=v.useState(no),[r,n]=v.useState(ao),[a,i]=v.useState(Z1),[o,s]=v.useState(!0),[l,c]=v.useState(0),[u,f]=v.useState(()=>Lr(pt[0],no,ao)),[h,p]=v.useState(0);v.useEffect(()=>{f(Lr(pt[l],t,r)),p(0)},[r,l,t]),v.useEffect(()=>{if(!o)return;const E=window.setInterval(()=>{f(S=>Bn(S)),p(S=>S+1)},a);return()=>window.clearInterval(E)},[o,a]);const x=pt[l],m=v.useMemo(()=>zd(u),[u]),g=t*r,y=g>0?(m/g*100).toFixed(1):"0.0";function b(E){const S=jn(E.target.valueAsNumber,Cr,Er);e(S)}function w(E){const S=jn(E.target.valueAsNumber,Cr,Er);n(S)}function C(E){const S=jn(E.target.valueAsNumber,io,oo);i(S)}function A(){s(E=>!E)}function N(){f(E=>Bn(E)),p(E=>E+1)}return d.jsxs("div",{className:"space-y-10",children:[d.jsxs("header",{className:"relative overflow-hidden rounded-[2.75rem] border border-slate-200 bg-slate-950 px-6 py-10 text-white shadow-xl dark:border-slate-700 sm:px-10",children:[d.jsx("div",{className:"pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(56,189,248,0.28),_transparent_60%)]","aria-hidden":!0}),d.jsxs("div",{className:"relative z-10 space-y-5",children:[d.jsx("p",{className:"inline-flex items-center gap-2 rounded-full bg-white/10 px-4 py-1 text-xs font-semibold uppercase tracking-[0.35em] text-sky-200",children:"🧪 Game of Life Lab"}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h1",{className:"text-3xl font-semibold sm:text-4xl",children:"Design your own cellular automata experiments"}),d.jsx("p",{className:"max-w-2xl text-sm text-slate-200",children:"Conway's Game of Life unfolds on an infinite grid where simple rules generate surprising patterns. Dial in a preset, resize the toroidal stage, and control the simulation speed to watch oscillators, spaceships, and glider guns behave under different conditions."})]}),d.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs uppercase tracking-[0.35em] text-slate-300",children:[d.jsx("span",{className:"rounded-full border border-white/15 px-3 py-1 font-semibold",children:"Toroidal wrap"}),d.jsx("span",{className:"rounded-full border border-white/15 px-3 py-1 font-semibold",children:"Live controls"}),d.jsx("span",{className:"rounded-full border border-white/15 px-3 py-1 font-semibold",children:"Preset seeds"})]}),d.jsxs(we,{to:"/",className:"inline-flex items-center gap-2 rounded-full border border-white/20 bg-white/10 px-4 py-2 text-sm font-semibold text-white transition hover:border-white/30 hover:bg-white/20 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/40 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-900",children:["Back to landing page",d.jsx("span",{"aria-hidden":!0,children:"↺"})]})]})]}),d.jsxs("section",{className:"grid gap-8 lg:grid-cols-[minmax(0,1.2fr)_minmax(0,20rem)]",children:[d.jsxs("div",{className:"relative overflow-hidden rounded-[2.5rem] border border-slate-200 bg-gradient-to-br from-slate-950 via-slate-900 to-slate-800 p-6 text-slate-100 shadow-xl dark:border-slate-700",children:[d.jsx("div",{className:"pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_center,_rgba(14,116,144,0.22),_transparent_68%)]","aria-hidden":!0}),d.jsxs("div",{className:"relative z-10 flex flex-col gap-6",children:[d.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs uppercase tracking-[0.35em] text-slate-300",children:[d.jsxs("span",{className:"rounded-full border border-white/20 px-3 py-1 font-semibold",children:["Generation ",h.toLocaleString()]}),d.jsxs("span",{className:"rounded-full border border-white/20 px-3 py-1 font-semibold",children:["Alive ",m.toLocaleString()," (",y,"%)"]}),d.jsxs("span",{className:"rounded-full border border-white/20 px-3 py-1 font-semibold",children:["Grid ",t," × ",r]})]}),d.jsx("div",{className:"grid w-full gap-[2px] rounded-3xl border border-white/10 bg-slate-950/70 p-4 shadow-inner sm:p-6",style:{gridTemplateColumns:`repeat(${r}, minmax(0, 1fr))`},children:u.map((E,S)=>E.map((I,O)=>d.jsx("div",{className:`aspect-square rounded-md transition-all duration-300 ${I?"bg-sky-300 shadow-[0_0_6px_rgba(125,211,252,0.6)]":"bg-slate-800"}`},`${S}-${O}`)))}),d.jsxs("div",{className:"space-y-2 text-sm text-slate-300",children:[d.jsx("p",{className:"font-semibold text-slate-100",children:x.name}),d.jsx("p",{className:"text-slate-300/80",children:x.description})]})]})]}),d.jsxs("aside",{className:"space-y-6",children:[d.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white/80 p-6 shadow-sm backdrop-blur dark:border-slate-700 dark:bg-slate-900/70",children:[d.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Controls"}),d.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Tune the matrix, swap presets, and adjust the simulation clock. Changes reload the grid with a centered seed."}),d.jsxs("div",{className:"mt-5 space-y-5",children:[d.jsxs("label",{className:"block space-y-2",children:[d.jsx("span",{className:"text-xs font-semibold uppercase tracking-[0.35em] text-slate-500 dark:text-slate-400",children:"Starter pattern"}),d.jsx("select",{value:l,onChange:E=>c(Number.parseInt(E.target.value,10)||0),className:"w-full rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 shadow-sm transition hover:border-sky-400 focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-200 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100",children:pt.map((E,S)=>d.jsx("option",{value:S,children:E.name},E.name))})]}),d.jsxs("label",{className:"block space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between text-xs font-semibold uppercase tracking-[0.35em] text-slate-500 dark:text-slate-400",children:[d.jsx("span",{children:"Rows"}),d.jsx("span",{className:"rounded-full bg-slate-200 px-2 py-0.5 text-[0.65rem] font-bold text-slate-700 dark:bg-slate-700 dark:text-slate-100",children:t})]}),d.jsx("input",{type:"range",min:Cr,max:Er,step:1,value:t,onChange:b,className:"w-full accent-sky-400"})]}),d.jsxs("label",{className:"block space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between text-xs font-semibold uppercase tracking-[0.35em] text-slate-500 dark:text-slate-400",children:[d.jsx("span",{children:"Columns"}),d.jsx("span",{className:"rounded-full bg-slate-200 px-2 py-0.5 text-[0.65rem] font-bold text-slate-700 dark:bg-slate-700 dark:text-slate-100",children:r})]}),d.jsx("input",{type:"range",min:Cr,max:Er,step:1,value:r,onChange:w,className:"w-full accent-sky-400"})]}),d.jsxs("label",{className:"block space-y-3",children:[d.jsxs("div",{className:"flex items-center justify-between text-xs font-semibold uppercase tracking-[0.35em] text-slate-500 dark:text-slate-400",children:[d.jsx("span",{children:"Tick speed"}),d.jsx("span",{className:"rounded-full bg-slate-200 px-2 py-0.5 text-[0.65rem] font-bold text-slate-700 dark:bg-slate-700 dark:text-slate-100",children:J1(a)})]}),d.jsx("input",{type:"range",min:io,max:oo,step:K1,value:a,onChange:C,className:"w-full accent-sky-400"})]}),d.jsxs("div",{className:"flex flex-wrap gap-3",children:[d.jsx("button",{type:"button",onClick:A,className:"inline-flex flex-1 items-center justify-center gap-2 rounded-full bg-slate-900 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-slate-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-400 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:bg-slate-100 dark:text-slate-900 dark:hover:bg-slate-200",children:o?"Pause":"Resume"}),d.jsx("button",{type:"button",onClick:N,className:"inline-flex flex-1 items-center justify-center gap-2 rounded-full border border-slate-300 bg-white px-4 py-2 text-sm font-semibold text-slate-700 shadow-sm transition hover:border-sky-400 hover:text-sky-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-200 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100 dark:hover:border-sky-400 dark:hover:text-sky-300",disabled:o,children:"Step once"})]})]})]}),d.jsx("div",{className:"rounded-3xl border border-dashed border-slate-300 bg-white/70 p-5 text-sm text-slate-600 shadow-sm dark:border-slate-600 dark:bg-slate-900/60 dark:text-slate-300",children:d.jsx("p",{children:"Patterns are centered and wrapped on a toroidal grid, mirroring the ambient showcase. Increase the dimensions to give glider guns more room to breathe, or slow the clock to analyze oscillator cycles frame-by-frame."})})]})]})]})}function so({isActive:t}){return`inline-flex items-center rounded-full border px-3 py-1.5 text-sm font-medium transition border-slate-300 text-slate-700 hover:border-sky-500 hover:text-sky-600 dark:border-slate-700 dark:text-slate-200 ${t?"bg-gradient-to-r from-sky-500 to-cyan-600 text-white border-transparent shadow":""}`}function lo(){return d.jsxs("nav",{className:"flex flex-wrap items-center gap-2",children:[d.jsx($e,{to:"/imagegen",className:so,end:!0,children:"Generator"}),d.jsx($e,{to:"/imagegen/gallery",className:so,children:"Gallery"})]})}const ep=[{value:"personal",label:'Personal (8")'},{value:"medium",label:'Medium (12")'},{value:"large",label:'Large (16")'},{value:"xl",label:'Extra large (18")'}],tp=[{value:"thin and crispy",label:"Thin & crispy"},{value:"hand-tossed",label:"Hand-tossed"},{value:"sourdough",label:"Sourdough artisan"},{value:"deep dish",label:"Deep dish"}],co=[{value:"slow simmered San Marzano tomato sauce",label:"Tomato base"},{value:"creamy roasted garlic white sauce",label:"White base"},{value:"pesto infused olive oil",label:"Pesto base"}],rp=["fresh mozzarella","aged provolone","shaved parmesan","buffalo mozzarella","ricotta dollops","vegan cashew cheese"],Xr=[{id:"pepperoni",label:"Pepperoni"},{id:"wild-mushroom",label:"Wild mushrooms"},{id:"heirloom-tomato",label:"Heirloom tomato"},{id:"roasted-pepper",label:"Roasted peppers"},{id:"prosciutto",label:"Prosciutto"},{id:"basil",label:"Fresh basil"},{id:"arugula",label:"Baby arugula"},{id:"pineapple",label:"Golden pineapple"},{id:"olives",label:"Castelvetrano olives"}],np=[{value:"light",label:"Light"},{value:"regular",label:"Regular"},{value:"extra",label:"Extra"}],uo=[{value:"styled on a rustic wood board with fresh ingredients artfully scattered",label:"Rustic board styling"},{value:"served on a marble slab with elegant cutlery and a linen napkin",label:"Modern marble plating"},{value:"displayed inside a stone oven with glowing embers",label:"Stone oven reveal"},{value:"on a dark slate with overhead sprinkle of herbs and parmesan",label:"Moody slate backdrop"}],fo=[{value:"dramatic softbox studio lighting with controlled highlights",label:"Studio softbox"},{value:"warm golden hour lighting streaming through a window",label:"Golden hour"},{value:"crisp natural daylight with gentle shadows",label:"Natural daylight"},{value:"moody cinematic lighting with selective focus",label:"Cinematic"}];function ap({size:t,crust:e,sauce:r,cheeses:n,toppingSelections:a,finishingNotes:i,presentation:o,lighting:s}){const l=Xr.filter(c=>a[c.id]?.enabled).map(c=>`- ${c.label}: ${a[c.id].amount}`);return["Create an imaginative yet photorealistic AI image prompt for a pizza photo shoot.","Honor every detail from the configuration, emphasise gourmet styling, texture, and lighting.","Limit the response to a single paragraph under 75 words with no lists or line breaks.","Do not include camera brands or quotation marks.","","Pizza configuration:",`• Size: ${t}`,`• Crust: ${e}`,`• Sauce: ${r}`,`• Cheeses: ${n.length>0?n.join(", "):"none"}`,l.length>0?`• Toppings:
`+l.join(`
`):"• Toppings: none",`• Presentation: ${o}`,`• Lighting: ${s}`,i?`• Extra direction: ${i}`:"• Extra direction: none"].filter(Boolean).join(`
`)}function ip({size:t,crust:e,sauce:r,cheeses:n,toppingSelections:a,presentation:i,lighting:o,finishingNotes:s}){const l=Xr.filter(f=>a[f.id]?.enabled),c=l.length>0?l.map(f=>`${f.label.toLowerCase()} (${a[f.id].amount})`).join(", "):"no additional toppings",u=n.length>0?n.join(", "):"no cheese";return`A ${t} pizza on ${e} crust with ${r}, featuring ${u} and ${c}. Styled ${i} under ${o}${s?`, with extra direction: ${s}`:""}.`}function op({experience:t}){const[e,r]=v.useState("medium"),[n,a]=v.useState("hand-tossed"),[i,o]=v.useState(co[0].value),[s,l]=v.useState(["fresh mozzarella"]),[c,u]=v.useState(()=>Xr.reduce((D,$)=>({...D,[$.id]:{enabled:["pepperoni","basil"].includes($.id),amount:"regular"}}),{})),[f,h]=v.useState(uo[0].value),[p,x]=v.useState(fo[0].value),[m,g]=v.useState(""),[y,b]=v.useState(!1),[w,C]=v.useState(""),[A,N]=v.useState(""),[E,S]=v.useState(""),[I,O]=v.useState([]);v.useEffect(()=>{O(Os())},[]);const j=v.useMemo(()=>ip({size:e,crust:n,sauce:i,cheeses:s,toppingSelections:c,presentation:f,lighting:p,finishingNotes:m}),[e,n,i,s,c,f,p,m]),M=(t?.imageApiBaseUrl||"https://groq-endpoint.louispaulet13.workers.dev").replace(/\/$/,"");function G(D){const $=new Date(D);return Number.isNaN($.getTime())?"":$.toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"})}function F(D){l($=>$.includes(D)?$.filter(K=>K!==D):[...$,D])}function V(D){u($=>({...$,[D]:{...$[D],enabled:!$[D]?.enabled}}))}function Y(D,$){u(K=>({...K,[D]:{...K[D],amount:$}}))}async function Z(D){D.preventDefault(),C(""),b(!0);try{const $=ap({size:e,crust:n,sauce:i,cheeses:s,toppingSelections:c,presentation:f,lighting:p,finishingNotes:m}),q=await pr(t,[{role:"system",content:"You are a Michelin-level food stylist who writes elite image prompts for photorealistic pizza photography. Respond with one sentence under 75 words capturing texture, ingredients, setting, and lighting."},{role:"user",content:$}],{model:t?.defaultModel}),ee=typeof q?.content=="string"?q.content.trim():"";if(!ee)throw new Error("The prompt service returned an empty description.");N(ee);const qe=new URL(`${M}/flux/${encodeURIComponent(ee)}`),H=await fetch(qe.toString());if(!H.ok)throw new Error(`Image generation failed with status ${H.status}`);const R=(await H.json())?.images?.[0]?.url;if(!R)throw new Error("The image service did not return a usable URL.");S(R);const W=Date.now(),te={prompt:ee,url:R,summary:j,timestamp:W};O(J=>{const Ae=J.filter(vt=>vt.url!==te.url),lt=[te,...Ae].slice(0,ja);return zh(lt),lt})}catch($){S(""),N(""),C($ instanceof Error?$.message:"Unexpected error while generating your pizza image.")}finally{b(!1)}}function ne(){Ts(),O([])}return d.jsxs("section",{className:"grid gap-6 lg:grid-cols-[minmax(0,0.95fr)_minmax(0,1.05fr)]",children:[d.jsxs("form",{onSubmit:Z,className:"space-y-6 rounded-2xl border border-slate-200 bg-white/80 p-6 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[d.jsxs("header",{className:"space-y-1",children:[d.jsx("h2",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100",children:"Configure your pizza"}),d.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Dial in every detail, then let Groq draft a studio-grade prompt and render the pie on the right."})]}),d.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"pizza-size",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Size"}),d.jsx("select",{id:"pizza-size",value:e,onChange:D=>r(D.target.value),className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100",children:ep.map(D=>d.jsx("option",{value:D.value,children:D.label},D.value))})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"pizza-crust",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Crust style"}),d.jsx("select",{id:"pizza-crust",value:n,onChange:D=>a(D.target.value),className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100",children:tp.map(D=>d.jsx("option",{value:D.value,children:D.label},D.value))})]})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Sauce base"}),d.jsx("div",{className:"mt-3 grid gap-2 sm:grid-cols-3",children:co.map(D=>{const $=i===D.value;return d.jsx("button",{type:"button",onClick:()=>o(D.value),className:`rounded-xl border px-3 py-2 text-left text-sm font-medium transition ${$?"border-brand-500 bg-brand-50 text-brand-700 shadow-sm dark:border-brand-400 dark:bg-brand-500/10 dark:text-brand-200":"border-slate-300 bg-white text-slate-600 hover:border-brand-300 hover:text-brand-600 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-300"}`,children:D.label},D.value)})})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Cheeses"}),d.jsx("div",{className:"mt-3 grid gap-2 sm:grid-cols-2",children:rp.map(D=>{const $=s.includes(D);return d.jsxs("label",{className:`flex items-center gap-3 rounded-xl border px-3 py-2 text-sm font-medium transition ${$?"border-brand-500 bg-brand-50 text-brand-700 shadow-sm dark:border-brand-400 dark:bg-brand-500/10 dark:text-brand-200":"border-slate-300 bg-white text-slate-600 hover:border-brand-300 hover:text-brand-600 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-300"}`,children:[d.jsx("input",{type:"checkbox",checked:$,onChange:()=>F(D),className:"h-4 w-4 rounded border-slate-300 text-brand-600 focus:ring-brand-500"}),D]},D)})})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Toppings & intensity"}),d.jsx("div",{className:"space-y-2",children:Xr.map(D=>{const $=c[D.id],K=$?.enabled;return d.jsxs("div",{className:"flex flex-col gap-2 rounded-xl border border-slate-200 bg-white/70 p-3 shadow-sm sm:flex-row sm:items-center sm:justify-between dark:border-slate-700 dark:bg-slate-900/40",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("button",{type:"button",onClick:()=>V(D.id),className:`inline-flex items-center rounded-full px-3 py-1 text-sm font-medium transition ${K?"bg-brand-600 text-white shadow hover:bg-brand-500":"border border-slate-300 text-slate-600 hover:border-brand-300 hover:text-brand-600 dark:border-slate-600 dark:text-slate-300"}`,children:K?"Included":"Add"}),d.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:D.label})]}),d.jsxs("div",{className:"sm:w-40",children:[d.jsxs("label",{htmlFor:`${D.id}-amount`,className:"sr-only",children:[D.label," amount"]}),d.jsx("select",{id:`${D.id}-amount`,value:$?.amount||"regular",onChange:q=>Y(D.id,q.target.value),disabled:!K,className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-600 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 disabled:cursor-not-allowed disabled:opacity-60 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-300",children:np.map(q=>d.jsx("option",{value:q.value,children:q.label},q.value))})]})]},D.id)})})]}),d.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"pizza-presentation",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Presentation style"}),d.jsx("select",{id:"pizza-presentation",value:f,onChange:D=>h(D.target.value),className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100",children:uo.map(D=>d.jsx("option",{value:D.value,children:D.label},D.value))})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"pizza-lighting",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Lighting direction"}),d.jsx("select",{id:"pizza-lighting",value:p,onChange:D=>x(D.target.value),className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100",children:fo.map(D=>d.jsx("option",{value:D.value,children:D.label},D.value))})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"pizza-notes",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Final direction"}),d.jsx("textarea",{id:"pizza-notes",value:m,onChange:D=>g(D.target.value),rows:3,placeholder:"Any additional art direction or plating requests...",className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100"})]}),w?d.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700 dark:border-red-800 dark:bg-red-900/30 dark:text-red-200",children:w}):null,d.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[d.jsxs("button",{type:"submit",disabled:y,className:"inline-flex items-center gap-2 rounded-full bg-brand-600 px-5 py-2.5 text-sm font-medium text-white shadow transition hover:bg-brand-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500/40 focus-visible:ring-offset-2 focus-visible:ring-offset-white disabled:cursor-not-allowed disabled:bg-brand-400 dark:focus-visible:ring-offset-slate-900",children:[d.jsx(Qr,{className:`h-5 w-5 ${y?"animate-spin":""}`}),y?"Baking…":"Bake this pizza image"]}),d.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:j})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white/80 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[d.jsx("div",{className:"border-b border-slate-200 bg-slate-50 px-4 py-3 text-sm font-semibold text-slate-600 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-200",children:"Generated prompt"}),d.jsx("div",{className:"p-5",children:A?d.jsx("p",{className:"text-sm leading-relaxed text-slate-700 dark:text-slate-200",children:A}):d.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Configure your pie and click ",d.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-200",children:"Bake this pizza image"})," to see the LLM-crafted prompt."]})})]}),d.jsxs("div",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white/80 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[d.jsx("div",{className:"border-b border-slate-200 bg-slate-50 px-4 py-3 text-sm font-semibold text-slate-600 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-200",children:"Pizza render"}),d.jsx("div",{className:"flex min-h-[320px] items-center justify-center bg-slate-100 dark:bg-slate-800",children:E?d.jsx("img",{src:E,alt:A||"Generated pizza",className:"h-full w-full object-cover",loading:"lazy"}):y?d.jsxs("div",{className:"flex flex-col items-center gap-2 text-sm text-slate-500 dark:text-slate-400",children:[d.jsx("span",{className:"h-10 w-10 animate-spin rounded-full border-2 border-slate-300 border-t-brand-500","aria-hidden":!0}),"Baking your pizza photo…"]}):d.jsx("p",{className:"px-6 text-center text-sm text-slate-500 dark:text-slate-400",children:"Your pizza masterpiece will appear here once the image service finishes rendering."})})]}),d.jsxs("div",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white/80 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[d.jsxs("div",{className:"flex items-center justify-between gap-3 border-b border-slate-200 bg-slate-50 px-4 py-3 text-sm font-semibold text-slate-600 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-200",children:[d.jsx("span",{children:"Saved pizza gallery"}),I.length>0?d.jsxs("button",{type:"button",onClick:ne,className:"inline-flex items-center gap-2 rounded-full border border-slate-300 bg-white px-3 py-1.5 text-xs font-medium text-slate-600 shadow-sm transition hover:border-red-400 hover:text-red-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-400/40 focus-visible:ring-offset-1 focus-visible:ring-offset-white dark:border-slate-600 dark:bg-slate-900 dark:text-slate-200 dark:hover:border-red-400 dark:hover:text-red-300",children:[d.jsx(dr,{className:"h-4 w-4"}),"Clear gallery"]}):null]}),d.jsx("div",{className:"p-5",children:I.length>0?d.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:I.map(D=>d.jsxs("article",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white/80 shadow-sm transition hover:-translate-y-0.5 hover:shadow-lg dark:border-slate-700 dark:bg-slate-900/70",children:[d.jsx("div",{className:"relative h-40 w-full overflow-hidden border-b border-slate-200 bg-slate-100 dark:border-slate-700 dark:bg-slate-800",children:d.jsx("img",{src:D.url,alt:D.prompt||"Saved pizza render",className:"h-full w-full object-cover",loading:"lazy"})}),d.jsxs("div",{className:"space-y-2 p-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-100",children:D.prompt||"Saved pizza prompt"}),D.summary?d.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:D.summary}):null,d.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-[0.7rem] text-slate-400 dark:text-slate-500",children:[d.jsx("span",{children:G(D.timestamp)}),d.jsx("a",{href:D.url,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1 rounded-full border border-slate-300 px-2 py-1 text-[0.7rem] font-medium text-slate-600 transition hover:border-brand-400 hover:text-brand-600 dark:border-slate-600 dark:text-slate-200",children:"Open ↗"})]})]})]},`${D.url}-${D.timestamp}`))}):d.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Every generated pizza is saved to a browser cookie so you can revisit it later. Bake a pie to see it here."})})]})]})]})}const Yr="allin_car_gallery",sp=3600*24*30,qr=40;function Gs(){return typeof document>"u"?null:document}function lp(t){const e=Gs();if(!e||!e.cookie)return"";const n=e.cookie.split("; ").find(a=>a.startsWith(`${t}=`));return n?n.split("=").slice(1).join("="):""}function Jn(t,e,r=sp){const n=Gs();if(!n)return;const a=encodeURIComponent(e),i=["path=/",`max-age=${r}`];n.cookie=`${t}=${a}; ${i.join("; ")}`}function Vs(t){return!t||typeof t.url!="string"||!t.url.trim()?null:{prompt:typeof t.prompt=="string"?t.prompt:"",url:t.url,summary:typeof t.summary=="string"?t.summary:"",timestamp:typeof t.timestamp=="number"?t.timestamp:Date.now()}}function dp(){const t=lp(Yr);if(!t)return[];try{const e=JSON.parse(decodeURIComponent(t));return Array.isArray(e)?e.map(r=>Vs(r)).filter(Boolean).slice(0,qr):[]}catch{return[]}}function cp(t){if(!Array.isArray(t)||t.length===0){Jn(Yr,"[]");return}const e=t.map(r=>Vs(r)).filter(Boolean).slice(0,qr);Jn(Yr,JSON.stringify(e))}function up(){Jn(Yr,"[]",0)}const Qn="__custom__",ho=[{value:"Tesla",label:"Tesla"},{value:"Lamborghini",label:"Lamborghini"},{value:"Porsche",label:"Porsche"},{value:"Mercedes-Benz",label:"Mercedes-Benz"},{value:"Bugatti",label:"Bugatti"},{value:"Aston Martin",label:"Aston Martin"},{value:"Pagani",label:"Pagani"},{value:Qn,label:"Custom (follow your prompt)"}],po=[{value:"sleek two-door coupe",label:"Coupe"},{value:"low-slung roadster",label:"Roadster"},{value:"wide-body hypercar",label:"Hypercar"},{value:"muscular grand tourer",label:"Grand tourer"},{value:"futuristic concept car",label:"Concept"},{value:"lifted adventure rig",label:"Adventure rig"}],xo=[{value:"production supercar",label:"Production supercar"},{value:"bespoke concept car",label:"Concept showpiece"},{value:"vintage-inspired restomod",label:"Restomod classic"},{value:"electric performance car",label:"Electric performance"},{value:"off-road performance build",label:"Off-road performance"}],mo=[{value:"mirror-gloss paint with crisp reflections",label:"Mirror gloss"},{value:"satin paint with velvety highlights",label:"Satin finish"},{value:"matte paint with soft diffused reflections",label:"Matte finish"},{value:"color-shifting pearlescent paint",label:"Pearlescent"}],go=[{value:"dramatic three-quarter front view",label:"3/4 front"},{value:"side profile stance shot",label:"Side profile"},{value:"low angle hero shot",label:"Low angle hero"},{value:"rear three-quarter tracking shot",label:"3/4 rear"},{value:"top-down showcase of the silhouette",label:"Top-down"}],vo=[{value:"set against a misty mountain landscape",label:"Mountain landscape"},{value:"coasting beside a neon-lit city center",label:"City center"},{value:"parked on a coastal seascape overlook",label:"Seascape overlook"},{value:"charging within a futuristic studio environment",label:"Futuristic studio"},{value:"sprinting across a desert salt flat",label:"Desert salt flat"}],bo=[{value:"glowing golden hour lighting with long highlights",label:"Golden hour"},{value:"moody cinematic lighting with crisp rim lights",label:"Cinematic"},{value:"soft diffused studio lighting with controlled reflections",label:"Soft studio"},{value:"nocturnal lighting with neon accents and reflections",label:"Neon night"},{value:"clear daylight with sharp contrast and defined shadows",label:"Clear daylight"}],fp=[{value:"subtle",label:"Subtle"},{value:"balanced",label:"Balanced"},{value:"bold",label:"Bold"}],Zr=[{id:"aero-kit",label:"Aerodynamic body kit",description:"splitters, diffusers, and side skirts"},{id:"light-trail",label:"Motion light trails",description:"streaks implying speed"},{id:"door-style",label:"Signature doors open",description:"gullwing or scissor doors raised"},{id:"wheel-glow",label:"Illuminated wheel accents",description:"glowing rims or brake calipers"},{id:"graphic",label:"Custom livery graphics",description:"stripes, numbers, or sponsor decals"},{id:"environmental-effects",label:"Environmental effects",description:"mist, dust, or water spray"}];function hp({brand:t,color:e,wheelCount:r,bodyStyle:n,carType:a,finish:i,viewpoint:o,scenery:s,lighting:l,detailSelections:c,finishingNotes:u}){const f=Zr.filter(h=>c[h.id]?.enabled).map(h=>`- ${h.label}: ${c[h.id].intensity}`);return["Craft a vivid yet concise AI image prompt for an automotive exterior photoshoot.","Describe only the visible design, stance, setting, and lighting—avoid mechanical specifications or interior commentary.","Respond with one paragraph under 80 words and do not use lists or line breaks.","","Car configuration:",`• Brand: ${t}`,`• Exterior color: ${e||"unspecified"}`,`• Wheel count: ${r||"unspecified"}`,`• Body style: ${n}`,`• Car type: ${a}`,`• Finish: ${i}`,f.length>0?`• Distinctive details:
`+f.join(`
`):"• Distinctive details: none",`• Viewpoint: ${o}`,`• Scenery: ${s}`,`• Lighting: ${l}`,u?`• Extra direction: ${u}`:"• Extra direction: none"].filter(Boolean).join(`
`)}function pp({brand:t,color:e,wheelCount:r,bodyStyle:n,carType:a,finish:i,viewpoint:o,scenery:s,lighting:l,detailSelections:c,finishingNotes:u}){const f=Zr.filter(x=>c[x.id]?.enabled),h=f.length>0?f.map(x=>`${x.label.toLowerCase()} (${c[x.id].intensity})`).join(", "):"no extra flourishes",p=(()=>{if(typeof r=="number")return Number.isFinite(r)?`${r}-wheel`:"custom-wheel";const x=typeof r=="string"?r.trim():"";return x?`${x}-wheel`:"custom-wheel"})();return[`A ${t} ${n} portrayed as a ${a}`,`finished in ${e||"a custom hue"} with ${i}`,`shown from a ${o} in ${s}`,`under ${l}, featuring ${h}`,u?`extra direction: ${u}`:null,`wheel setup: ${p}`].filter(Boolean).join(", ")}function xp({experience:t}){const[e,r]=v.useState(ho[0].value),[n,a]=v.useState(""),[i,o]=v.useState("candy apple red"),[s,l]=v.useState("4"),[c,u]=v.useState(po[0].value),[f,h]=v.useState(xo[0].value),[p,x]=v.useState(mo[0].value),[m,g]=v.useState(go[0].value),[y,b]=v.useState(vo[0].value),[w,C]=v.useState(bo[0].value),[A,N]=v.useState(()=>Zr.reduce((R,W)=>({...R,[W.id]:{enabled:["aero-kit","graphic"].includes(W.id),intensity:"balanced"}}),{})),[E,S]=v.useState(""),[I,O]=v.useState(!1),[j,M]=v.useState(""),[G,F]=v.useState(""),[V,Y]=v.useState(""),[Z,ne]=v.useState([]),D=e===Qn?n.trim()||"bespoke concept car brand guided by the prompt":e;v.useEffect(()=>{ne(dp())},[]);const $=v.useMemo(()=>pp({brand:D,color:i,wheelCount:s,bodyStyle:c,carType:f,finish:p,viewpoint:m,scenery:y,lighting:w,detailSelections:A,finishingNotes:E}),[D,i,s,c,f,p,m,y,w,A,E]),K=(t?.imageApiBaseUrl||"https://groq-endpoint.louispaulet13.workers.dev").replace(/\/$/,"");function q(R){const W=new Date(R);return Number.isNaN(W.getTime())?"":W.toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"})}function ee(R){N(W=>({...W,[R]:{...W[R],enabled:!W[R]?.enabled}}))}function qe(R,W){N(te=>({...te,[R]:{...te[R],intensity:W}}))}async function H(R){R.preventDefault(),M(""),O(!0);try{const W=hp({brand:D,color:i,wheelCount:s.trim(),bodyStyle:c,carType:f,finish:p,viewpoint:m,scenery:y,lighting:w,detailSelections:A,finishingNotes:E}),J=await pr(t,[{role:"system",content:"You are an automotive exterior stylist who writes high-end image prompts for hero car photography. Focus on what is visible and cinematic without mentioning internal mechanics."},{role:"user",content:W}],{model:t?.defaultModel}),Ae=typeof J?.content=="string"?J.content.trim():"";if(!Ae)throw new Error("The prompt service returned an empty description.");F(Ae);const lt=new URL(`${K}/flux/${encodeURIComponent(Ae)}`),vt=await fetch(lt.toString());if(!vt.ok)throw new Error(`Image generation failed with status ${vt.status}`);const cn=(await vt.json())?.images?.[0]?.url;if(!cn)throw new Error("The image service did not return a usable URL.");Y(cn);const Ws=Date.now(),Ma={prompt:Ae,url:cn,summary:$,timestamp:Ws};ne(Xs=>{const Ys=Xs.filter(qs=>qs.url!==Ma.url),La=[Ma,...Ys].slice(0,qr);return cp(La),La})}catch(W){Y(""),F(""),M(W instanceof Error?W.message:"Unexpected error while generating your car image.")}finally{O(!1)}}function ce(){up(),ne([])}return d.jsxs("section",{className:"grid gap-6 lg:grid-cols-[minmax(0,0.95fr)_minmax(0,1.05fr)]",children:[d.jsxs("form",{onSubmit:H,className:"space-y-6 rounded-2xl border border-slate-200 bg-white/80 p-6 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[d.jsxs("header",{className:"space-y-1",children:[d.jsx("h2",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100",children:"Configure your hero car"}),d.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Shape every visible detail, then let Groq author a cinematic prompt and render the shot on the right."})]}),d.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"car-brand",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Brand"}),d.jsx("select",{id:"car-brand",value:e,onChange:R=>r(R.target.value),className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100",children:ho.map(R=>d.jsx("option",{value:R.value,children:R.label},R.value))}),e===Qn?d.jsxs("div",{className:"mt-3 space-y-2",children:[d.jsx("label",{htmlFor:"car-brand-custom",className:"text-xs font-medium uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Custom brand direction"}),d.jsx("input",{id:"car-brand-custom",type:"text",value:n,onChange:R=>a(R.target.value),placeholder:"e.g. art-deco inspired electric marque",className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100"}),d.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Leave blank to let Groq invent a marque that matches your prompt."})]}):null]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"car-color",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Exterior color"}),d.jsx("input",{id:"car-color",type:"text",value:i,onChange:R=>o(R.target.value),placeholder:"e.g. deep sapphire blue",className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100"})]})]}),d.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"car-body-style",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Body style"}),d.jsx("select",{id:"car-body-style",value:c,onChange:R=>u(R.target.value),className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100",children:po.map(R=>d.jsx("option",{value:R.value,children:R.label},R.value))})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"car-type",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Car type"}),d.jsx("select",{id:"car-type",value:f,onChange:R=>h(R.target.value),className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100",children:xo.map(R=>d.jsx("option",{value:R.value,children:R.label},R.value))})]})]}),d.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"car-wheels",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Number of wheels"}),d.jsx("input",{id:"car-wheels",type:"number",min:"0",value:s,onChange:R=>l(R.target.value),className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100"}),d.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:"Enter any wheel count—even unconventional ones."})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Paint finish"}),d.jsx("div",{className:"mt-3 grid gap-2",children:mo.map(R=>{const W=p===R.value;return d.jsx("button",{type:"button",onClick:()=>x(R.value),className:`rounded-xl border px-3 py-2 text-left text-sm font-medium transition ${W?"border-brand-500 bg-brand-50 text-brand-700 shadow-sm dark:border-brand-400 dark:bg-brand-500/10 dark:text-brand-200":"border-slate-300 bg-white text-slate-600 hover:border-brand-300 hover:text-brand-600 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-300"}`,children:R.label},R.value)})})]})]}),d.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"car-viewpoint",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Viewpoint"}),d.jsx("select",{id:"car-viewpoint",value:m,onChange:R=>g(R.target.value),className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100",children:go.map(R=>d.jsx("option",{value:R.value,children:R.label},R.value))})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"car-scenery",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Scenery"}),d.jsx("select",{id:"car-scenery",value:y,onChange:R=>b(R.target.value),className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100",children:vo.map(R=>d.jsx("option",{value:R.value,children:R.label},R.value))})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"car-lighting",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Lighting"}),d.jsx("select",{id:"car-lighting",value:w,onChange:R=>C(R.target.value),className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100",children:bo.map(R=>d.jsx("option",{value:R.value,children:R.label},R.value))})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Signature details"}),d.jsx("div",{className:"space-y-2",children:Zr.map(R=>{const W=A[R.id],te=W?.enabled;return d.jsxs("div",{className:"flex flex-col gap-2 rounded-xl border border-slate-200 bg-white/70 p-3 shadow-sm sm:flex-row sm:items-center sm:justify-between dark:border-slate-700 dark:bg-slate-900/40",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("button",{type:"button",onClick:()=>ee(R.id),className:`inline-flex items-center rounded-full px-3 py-1 text-sm font-medium transition ${te?"bg-brand-600 text-white shadow hover:bg-brand-500":"border border-slate-300 text-slate-600 hover:border-brand-300 hover:text-brand-600 dark:border-slate-600 dark:text-slate-300"}`,children:te?"Included":"Add"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:R.label}),d.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:R.description})]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("label",{className:"text-xs font-medium uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Intensity"}),d.jsx("select",{value:W?.intensity||"balanced",onChange:J=>qe(R.id,J.target.value),className:"rounded-lg border border-slate-300 bg-white px-2 py-1 text-xs text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100",children:fp.map(J=>d.jsx("option",{value:J.value,children:J.label},J.value))})]})]},R.id)})})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"car-notes",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Extra direction"}),d.jsx("textarea",{id:"car-notes",value:E,onChange:R=>S(R.target.value),rows:3,placeholder:"Optional styling notes visible from the exterior...",className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100"})]}),d.jsxs("div",{className:"flex items-center justify-between gap-3",children:[d.jsx("button",{type:"submit",disabled:I,className:"inline-flex items-center gap-2 rounded-xl bg-brand-600 px-4 py-2 text-sm font-semibold text-white shadow transition hover:bg-brand-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-400/60 disabled:cursor-not-allowed disabled:bg-brand-400",children:I?d.jsxs(d.Fragment,{children:[d.jsx(Qr,{className:"h-4 w-4 animate-spin","aria-hidden":"true"}),"Generating…"]}):"Generate car image"}),d.jsxs("button",{type:"button",onClick:ce,className:"inline-flex items-center gap-2 rounded-xl border border-slate-300 px-3 py-2 text-xs font-semibold uppercase tracking-wide text-slate-500 transition hover:border-red-400 hover:text-red-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-400/50 dark:border-slate-600 dark:text-slate-300",children:[d.jsx(dr,{className:"h-4 w-4","aria-hidden":"true"}),"Clear gallery"]})]}),j?d.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:j}):null,d.jsxs("div",{className:"rounded-xl bg-slate-50 p-4 text-sm text-slate-600 shadow-inner dark:bg-slate-900/40 dark:text-slate-300",children:[d.jsx("p",{className:"font-medium text-slate-700 dark:text-slate-100",children:"Quick summary"}),d.jsx("p",{className:"mt-1 leading-relaxed",children:$})]})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("section",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white/70 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[d.jsx("header",{className:"border-b border-slate-200 bg-slate-50/80 px-5 py-4 dark:border-slate-700 dark:bg-slate-900/40",children:d.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-300",children:"Prompt & render"})}),d.jsx("div",{className:"space-y-4 p-5",children:G?d.jsxs("article",{className:"space-y-3",children:[d.jsx("div",{className:"rounded-lg border border-slate-200 bg-white/90 p-3 text-sm leading-relaxed text-slate-700 shadow-sm dark:border-slate-700 dark:bg-slate-900/60 dark:text-slate-200",children:G}),V?d.jsx("img",{src:V,alt:"Generated hero car",className:"w-full rounded-xl border border-slate-200 bg-slate-100 object-cover shadow-sm dark:border-slate-700 dark:bg-slate-900"}):null]}):d.jsx("div",{className:"rounded-lg border border-dashed border-slate-300 bg-white/40 p-6 text-center text-sm text-slate-400 dark:border-slate-700 dark:bg-slate-900/20 dark:text-slate-500",children:"Configure the ride and generate to see your prompt and render here."})})]}),d.jsxs("section",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white/70 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[d.jsxs("header",{className:"flex items-center justify-between border-b border-slate-200 bg-slate-50/80 px-5 py-4 dark:border-slate-700 dark:bg-slate-900/40",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-300",children:"Car gallery"}),d.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:"Recent renders are stored in a cookie on this device."})]}),d.jsxs("span",{className:"rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-600 dark:bg-slate-800 dark:text-slate-300",children:[Z.length,"/",qr]})]}),Z.length>0?d.jsx("ul",{className:"divide-y divide-slate-200 dark:divide-slate-800",children:Z.map(R=>d.jsxs("li",{className:"flex flex-col gap-4 p-5 sm:flex-row sm:items-start",children:[d.jsx("img",{src:R.url,alt:"Saved hero car render",className:"h-32 w-full rounded-xl border border-slate-200 object-cover shadow-sm sm:h-24 sm:w-40 dark:border-slate-700"}),d.jsxs("div",{className:"flex-1 space-y-2",children:[d.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-100",children:R.summary}),d.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:R.prompt}),d.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:["Saved ",q(R.timestamp)]})]})]},R.url))}):d.jsx("p",{className:"p-5 text-sm text-slate-500 dark:text-slate-400",children:"Generate a car to begin filling your gallery."})]})]})]})}const ir="allin_svg_prompt_history",mp=3600*24*30,ea=8;function $s(t){if(typeof t!="string")return"";const e=t.trim();return e||""}function gp({dataUrl:t,svgMarkup:e}){if(typeof t=="string"&&t.startsWith("data:image/svg+xml"))return t;const r=$s(e);return r?`data:image/svg+xml;utf8,${encodeURIComponent(r)}`:""}function Hs(t){if(!t)return null;const e=typeof t.prompt=="string"?t.prompt.trim():"",r=$s(t.svgMarkup),n=typeof t.dataUrl=="string"?t.dataUrl.trim():"";if(!r&&!n)return null;const a=typeof t.timestamp=="number"&&Number.isFinite(t.timestamp)?t.timestamp:Date.now();return{prompt:e,svgMarkup:r,dataUrl:gp({dataUrl:n,svgMarkup:r}),timestamp:a}}function vp(){const t=ba(ir);if(!t)return[];try{const e=JSON.parse(t);return Array.isArray(e)?e.map(Hs).filter(Boolean):[]}catch{return[]}}function bp(t){if(!Array.isArray(t)||t.length===0){ft(ir);return}const e=t.map(r=>{const n=Hs(r);if(!n)return null;const{dataUrl:a,...i}=n;return i}).filter(Boolean).slice(0,ea);if(e.length===0){ft(ir);return}ya(ir,e,{maxAgeSeconds:mp})}function yp(){ft(ir)}function ta({dataUrl:t,svgMarkup:e}){return typeof t=="string"&&t.startsWith("data:image/svg+xml")?t:typeof e=="string"&&e.trim()?`data:image/svg+xml;utf8,${encodeURIComponent(e.trim())}`:""}const wp={USE_PROFILES:{svg:!0,svgFilters:!0},ADD_TAGS:["animate","animateMotion","animateTransform","mpath"],ADD_ATTR:["attributeName","attributeType","begin","by","calcMode","dur","href","keySplines","keyTimes","repeatCount","to","values","xlink:href"]};function yo(t){if(typeof t!="string")return null;const e=t.trim();if(!e||e.endsWith("%"))return null;const r=Number.parseFloat(e);return!Number.isFinite(r)||r<=0?null:r}function _p(t){if(typeof window>"u"||typeof t!="string"||!t.trim())return null;try{const n=new DOMParser().parseFromString(t,"image/svg+xml").querySelector("svg");if(!n)return null;const a=yo(n.getAttribute("width")),i=yo(n.getAttribute("height"));if(a&&i)return a/i;const o=n.getAttribute("viewBox")||n.getAttribute("viewbox");if(o){const s=o.split(/[\s,]+/).map(l=>Number.parseFloat(l)).filter(l=>Number.isFinite(l));if(s.length===4){const[,,l,c]=s;if(l>0&&c>0)return l/c}}return null}catch{return null}}function Ap(t){const e=new Date(t);return Number.isNaN(e.getTime())?"":e.toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"})}function Cp({entry:t,onSelect:e}){const r=ta(t);return d.jsxs("button",{type:"button",onClick:()=>e(t),className:"group flex flex-col gap-2 overflow-hidden rounded-xl border border-slate-200 bg-white/80 p-3 text-left shadow-sm transition hover:border-brand-400 hover:bg-brand-50/70 dark:border-slate-700 dark:bg-slate-900/60 dark:hover:border-brand-300",children:[d.jsx("div",{className:"relative overflow-hidden rounded-lg border border-slate-200 bg-slate-100 dark:border-slate-700 dark:bg-slate-800",children:r?d.jsx("img",{src:r,alt:t.prompt||"Saved SVG preview",className:"h-24 w-full object-contain",loading:"lazy"}):d.jsx("div",{className:"flex h-24 items-center justify-center text-xs text-slate-400 dark:text-slate-500",children:"No preview"})}),d.jsxs("div",{children:[d.jsx("p",{className:"line-clamp-2 text-sm font-medium text-slate-700 dark:text-slate-200",children:t.prompt||"Saved request"}),t.route?d.jsx("p",{className:"text-[0.65rem] uppercase tracking-wide text-slate-400 dark:text-slate-500",children:t.route==="svg_deluxe"?"Deluxe /svg_deluxe (oss-120B)":"Standard /svg (Llama 3 70B)"}):null,t.timestamp?d.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:Ap(t.timestamp)}):null]})]})}function Ep({experience:t}){const[e,r]=v.useState("A cheerful robot painting geometric trees"),[n,a]=v.useState(!1),[i,o]=v.useState(""),[s,l]=v.useState(null),[c,u]=v.useState([]),[f,h]=v.useState(!1),[p,x]=v.useState(!1),m=v.useMemo(()=>typeof window>"u"||!s?.svgMarkup?"":Lo.sanitize(s.svgMarkup,wp),[s?.svgMarkup]),g=v.useMemo(()=>_p(m),[m]),y=v.useMemo(()=>m?`<!DOCTYPE html><html lang="en"><head><meta charset="utf-8" /><style>
      :root { color-scheme: light dark; }
      html, body {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
        background: transparent;
      }
      body {
        display: flex;
        align-items: center;
        justify-content: center;
      }
      svg {
        width: 100%;
        height: auto;
        max-width: 100%;
        max-height: 100%;
      }
    </style></head><body>${m}</body></html>`:"",[m]);v.useEffect(()=>{u(vp())},[]),v.useEffect(()=>{if(!f)return;const S=setTimeout(()=>h(!1),1500);return()=>clearTimeout(S)},[f]);const b=t?.svgApiBaseUrl||t?.defaultBaseUrl||"https://groq-endpoint.louispaulet13.workers.dev",w=p?"svg_deluxe":"svg";async function C(S){S.preventDefault();const I=e.trim();if(!I){o("Please enter a prompt for the SVG generator.");return}a(!0),o("");try{const O=new URL(`${b.replace(/\/$/,"")}/${w}/${encodeURIComponent(I)}`),j=await fetch(O.toString());if(!j.ok){let K=`Generation failed with status ${j.status}`;try{const q=await j.json();q?.error&&(K=q.error)}catch{}throw new Error(K)}const M=await j.json(),G=typeof M?.svg=="string"?M.svg.trim():"",F=ta({dataUrl:typeof M?.dataUrl=="string"?M.dataUrl.trim():"",svgMarkup:G});if(!F)throw new Error("The SVG response did not include renderable markup.");const V=typeof M?.prompt=="string"&&M.prompt.trim()?M.prompt.trim():I;l({prompt:V,dataUrl:F,svgMarkup:G,raw:M,route:w});const Z=Date.now(),ne={prompt:V,dataUrl:F,svgMarkup:G,timestamp:Z,route:w},D=c.filter(K=>K.dataUrl!==ne.dataUrl||K.prompt!==ne.prompt),$=[ne,...D].slice(0,ea);u($),bp($)}catch(O){o(O instanceof Error?O.message:"Unexpected error during SVG generation.")}finally{a(!1)}}function A(S){S&&(r(S.prompt||""),x(S.route==="svg_deluxe"),l({prompt:S.prompt,dataUrl:ta(S),svgMarkup:S.svgMarkup||"",raw:null,route:S.route||"svg"}))}function N(){yp(),u([])}async function E(){if(s?.svgMarkup)try{await navigator.clipboard.writeText(s.svgMarkup),h(!0)}catch(S){console.error("Failed to copy SVG markup",S)}}return d.jsx("div",{className:"space-y-8",children:d.jsxs("section",{className:"grid gap-8 lg:grid-cols-[1.1fr_0.9fr]",children:[d.jsxs("form",{onSubmit:C,className:"space-y-6 rounded-2xl border border-slate-200 bg-white/80 p-6 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[d.jsxs("div",{children:[d.jsxs("label",{htmlFor:"svglab-prompt",className:"flex items-center justify-between text-sm font-medium text-slate-700 dark:text-slate-200",children:["SVG prompt",d.jsx("span",{className:"text-xs font-normal text-slate-400 dark:text-slate-500",children:"/svg worker endpoint"})]}),d.jsx("textarea",{id:"svglab-prompt",value:e,onChange:S=>r(S.target.value),rows:4,className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-3 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/50 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100",placeholder:"Describe what the SVG should contain..."}),d.jsxs("p",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:["Requests are sent to"," ",d.jsx("code",{className:"rounded bg-slate-100 px-1 py-0.5 text-[0.7rem] text-slate-700 dark:bg-slate-800 dark:text-slate-200",children:`${b}/${w}/<prompt>`}),". We encode the prompt so spaces and punctuation are preserved."]}),d.jsxs("label",{htmlFor:"svglab-deluxe",className:"mt-3 flex cursor-pointer items-start gap-3 rounded-xl border border-slate-200 bg-slate-50/70 px-3 py-3 text-sm text-slate-600 shadow-sm transition hover:border-brand-300 dark:border-slate-700 dark:bg-slate-800/60 dark:text-slate-300",children:[d.jsx("input",{id:"svglab-deluxe",type:"checkbox",checked:p,onChange:S=>x(S.target.checked),className:"mt-1 h-4 w-4 rounded border-slate-300 text-brand-600 focus:ring-brand-500 dark:border-slate-600 dark:bg-slate-900"}),d.jsxs("span",{children:["Use the ",d.jsx("code",{className:"rounded bg-slate-200 px-1 py-0.5 text-[0.7rem] text-slate-700 dark:bg-slate-900 dark:text-slate-200",children:"/svg_deluxe"})," route for"," ","oss-120B generations with an 8,192-token canvas suitable for animated SVGs."]})]})]}),d.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[d.jsxs("button",{type:"submit",disabled:n,className:"inline-flex items-center gap-2 rounded-full bg-brand-600 px-5 py-2.5 text-sm font-medium text-white shadow transition hover:bg-brand-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500/40 focus-visible:ring-offset-2 focus-visible:ring-offset-white disabled:cursor-not-allowed disabled:bg-brand-400 dark:focus-visible:ring-offset-slate-900",children:[d.jsx(Qr,{className:`h-5 w-5 ${n?"animate-spin":""}`}),n?"Generating…":"Generate SVG"]}),c.length>0?d.jsxs("button",{type:"button",onClick:N,className:"inline-flex items-center gap-2 rounded-full border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-600 shadow-sm transition hover:border-red-400 hover:text-red-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-400/30 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:border-slate-600 dark:bg-slate-900 dark:text-slate-200 dark:hover:border-red-400 dark:hover:text-red-300 dark:focus-visible:ring-offset-slate-900",children:[d.jsx(dr,{className:"h-4 w-4"}),"Clear saved prompts"]}):null]}),i?d.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700 dark:border-red-800 dark:bg-red-900/40 dark:text-red-200",children:i}):null]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white/80 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[d.jsx("div",{className:"border-b border-slate-200 bg-slate-50 px-4 py-3 text-sm font-semibold text-slate-600 dark:border-slate-700 dark:bg-slate-900/80 dark:text-slate-200",children:"Latest result"}),d.jsx("div",{className:"flex flex-col gap-4 p-4",children:s?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-start justify-between gap-4",children:[d.jsx("h3",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:s.prompt}),s.svgMarkup?d.jsxs("button",{type:"button",onClick:E,className:"inline-flex items-center gap-2 rounded-full border border-slate-300 bg-white px-3 py-1 text-xs font-medium text-slate-600 transition hover:border-brand-400 hover:text-brand-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-400/40 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:border-slate-600 dark:bg-slate-900 dark:text-slate-200",children:[d.jsx(il,{className:"h-4 w-4"}),f?"Copied!":"Copy SVG"]}):null]}),d.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Served via ",s.route==="svg_deluxe"?"oss-120B":"Llama 3 70B"," on the"," ",d.jsxs("code",{className:"rounded bg-slate-100 px-1 py-0.5 text-[0.65rem] text-slate-700 dark:bg-slate-800 dark:text-slate-200",children:["/",s.route||"svg"]})," ","endpoint."]}),d.jsx("div",{className:"relative w-full overflow-hidden rounded-xl border border-slate-200 bg-slate-100 dark:border-slate-700 dark:bg-slate-800",style:{aspectRatio:g||1},children:m?d.jsx("iframe",{title:s.prompt,srcDoc:y,sandbox:"",className:"h-full w-full bg-white/40 dark:bg-slate-900/40",scrolling:"no",loading:"lazy",style:{border:"none"}},s.svgMarkup):d.jsx("img",{src:s.dataUrl,alt:s.prompt,className:"h-full w-full object-contain",loading:"lazy"})}),s.raw?d.jsxs("details",{className:"rounded-xl border border-slate-200 bg-slate-50 px-4 py-3 text-xs text-slate-600 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-300",children:[d.jsx("summary",{className:"cursor-pointer text-sm font-semibold",children:"View raw response"}),d.jsx("pre",{className:"mt-2 whitespace-pre-wrap break-all text-[0.7rem] leading-relaxed",children:JSON.stringify(s.raw,null,2)})]}):null]}):d.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Submit a prompt to generate your first SVG. The rendered artwork will appear here."})})]}),d.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white/80 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[d.jsx("div",{className:"border-b border-slate-200 bg-slate-50 px-4 py-3 text-sm font-semibold text-slate-600 dark:border-slate-700 dark:bg-slate-900/80 dark:text-slate-200",children:"Saved prompts (cookie-based gallery)"}),d.jsx("div",{className:"grid gap-3 p-4 sm:grid-cols-2",children:c.length===0?d.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Generate an SVG to store the prompt and markup in a browser cookie. Up to ",ea," recent entries are saved for quick recall."]}):c.map(S=>d.jsx(Cp,{entry:S,onSelect:A},`${S.timestamp}-${S.prompt}`))})]})]})]})})}function Kr(){return Kr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Kr.apply(this,arguments)}function Np(t,e){if(t==null)return{};var r={},n=Object.keys(t),a,i;for(i=0;i<n.length;i++)a=n[i],!(e.indexOf(a)>=0)&&(r[a]=t[a]);return r}var Sp=["cdnSuffix","cdnUrl","countryCode","style","svg"],kp="https://cdn.jsdelivr.net/gh/lipis/flag-icons/flags/4x3/",Ip="svg",Op=127397,wo=function(e){var r=e.cdnSuffix,n=r===void 0?Ip:r,a=e.cdnUrl,i=a===void 0?kp:a,o=e.countryCode,s=e.style,l=e.svg,c=l===void 0?!1:l,u=Np(e,Sp);if(typeof o!="string")return null;if(c){var f=""+i+o.toLowerCase()+"."+n;return v.createElement("img",Object.assign({},u,{src:f,style:Kr({display:"inline-block",width:"1em",height:"1em",verticalAlign:"middle"},s)}))}var h=o.toUpperCase().replace(/./g,function(p){return String.fromCodePoint(p.charCodeAt(0)+Op)});return v.createElement("span",Object.assign({role:"img"},u,{style:Kr({display:"inline-block",fontSize:"1em",lineHeight:"1em",verticalAlign:"middle"},s)}),h)};const Tp=2e3,zs=t=>({country:t,status:"idle",prompt:"",dataUrl:"",error:""}),jp=t=>{const e=typeof t?.dataUrl=="string"?t.dataUrl.trim():"";if(e.startsWith("data:image/svg+xml"))return e;const r=typeof t?.svg=="string"?t.svg.trim():"";return r?`data:image/svg+xml;utf8,${encodeURIComponent(r)}`:""},Rp=new Intl.NumberFormat("en-US"),lr=[{id:"europe",name:"Europe",description:"Auto-queues every European flag so you can watch the continent populate without lifting a finger.",countries:[{name:"Russia",code:"RU",population:143997393},{name:"Germany",code:"DE",population:84075075},{name:"United Kingdom",code:"GB",population:69551332},{name:"France",code:"FR",population:66650804},{name:"Italy",code:"IT",population:59146260},{name:"Spain",code:"ES",population:47889958},{name:"Ukraine",code:"UA",population:38980376},{name:"Poland",code:"PL",population:38140910},{name:"Romania",code:"RO",population:18908650},{name:"Netherlands",code:"NL",population:18346819},{name:"Belgium",code:"BE",population:11779946},{name:"Sweden",code:"SE",population:11055959},{name:"Czechia",code:"CZ",population:10678744},{name:"Portugal",code:"PT",population:10519018},{name:"Greece",code:"GR",population:10423054},{name:"Hungary",code:"HU",population:9668149},{name:"Belarus",code:"BY",population:9443211},{name:"Austria",code:"AT",population:9131761},{name:"Switzerland",code:"CH",population:8767849},{name:"Serbia",code:"RS",population:6911019},{name:"Bulgaria",code:"BG",population:6446596},{name:"Denmark",code:"DK",population:5866324},{name:"Norway",code:"NO",population:5735040},{name:"Finland",code:"FI",population:5528859},{name:"Slovakia",code:"SK",population:5458e3},{name:"Ireland",code:"IE",population:5274e3},{name:"Croatia",code:"HR",population:3856431},{name:"Bosnia and Herzegovina",code:"BA",population:3500295},{name:"Albania",code:"AL",population:2891085},{name:"Moldova",code:"MD",population:2681536},{name:"Lithuania",code:"LT",population:2599928},{name:"Slovenia",code:"SI",population:2146844},{name:"North Macedonia",code:"MK",population:2064183},{name:"Latvia",code:"LV",population:1849843},{name:"Estonia",code:"EE",population:1357728},{name:"Cyprus",code:"CY",population:1313959},{name:"Luxembourg",code:"LU",population:669132},{name:"Montenegro",code:"ME",population:630219},{name:"Malta",code:"MT",population:574300},{name:"Iceland",code:"IS",population:381552},{name:"Andorra",code:"AD",population:77287},{name:"Monaco",code:"MC",population:39244},{name:"Liechtenstein",code:"LI",population:39010},{name:"San Marino",code:"SM",population:32700},{name:"Vatican City",code:"VA",population:801}]},{id:"africa",name:"Africa",description:"Queue the full suite of African nations when you are ready to tour the continent.",countries:[{name:"Algeria",code:"DZ"},{name:"Angola",code:"AO"},{name:"Benin",code:"BJ"},{name:"Botswana",code:"BW"},{name:"Burkina Faso",code:"BF"},{name:"Burundi",code:"BI"},{name:"Cabo Verde",code:"CV"},{name:"Cameroon",code:"CM"},{name:"Central African Republic",code:"CF"},{name:"Chad",code:"TD"},{name:"Comoros",code:"KM"},{name:"Democratic Republic of the Congo",code:"CD"},{name:"Republic of the Congo",code:"CG"},{name:"Côte d'Ivoire",code:"CI"},{name:"Djibouti",code:"DJ"},{name:"Egypt",code:"EG"},{name:"Equatorial Guinea",code:"GQ"},{name:"Eritrea",code:"ER"},{name:"Eswatini",code:"SZ"},{name:"Ethiopia",code:"ET"},{name:"Gabon",code:"GA"},{name:"Gambia",code:"GM"},{name:"Ghana",code:"GH"},{name:"Guinea",code:"GN"},{name:"Guinea-Bissau",code:"GW"},{name:"Kenya",code:"KE"},{name:"Lesotho",code:"LS"},{name:"Liberia",code:"LR"},{name:"Libya",code:"LY"},{name:"Madagascar",code:"MG"},{name:"Malawi",code:"MW"},{name:"Mali",code:"ML"},{name:"Mauritania",code:"MR"},{name:"Mauritius",code:"MU"},{name:"Morocco",code:"MA"},{name:"Mozambique",code:"MZ"},{name:"Namibia",code:"NA"},{name:"Niger",code:"NE"},{name:"Nigeria",code:"NG"},{name:"Rwanda",code:"RW"},{name:"São Tomé and Príncipe",code:"ST"},{name:"Senegal",code:"SN"},{name:"Seychelles",code:"SC"},{name:"Sierra Leone",code:"SL"},{name:"Somalia",code:"SO"},{name:"South Africa",code:"ZA"},{name:"South Sudan",code:"SS"},{name:"Sudan",code:"SD"},{name:"Tanzania",code:"TZ"},{name:"Togo",code:"TG"},{name:"Tunisia",code:"TN"},{name:"Uganda",code:"UG"},{name:"Zambia",code:"ZM"},{name:"Zimbabwe",code:"ZW"}]},{id:"asia",name:"Asia",description:"From the Middle East to the Pacific Rim, queue every Asian flag on demand.",countries:[{name:"Afghanistan",code:"AF"},{name:"Armenia",code:"AM"},{name:"Azerbaijan",code:"AZ"},{name:"Bahrain",code:"BH"},{name:"Bangladesh",code:"BD"},{name:"Bhutan",code:"BT"},{name:"Brunei",code:"BN"},{name:"Cambodia",code:"KH"},{name:"China",code:"CN"},{name:"Georgia",code:"GE"},{name:"India",code:"IN"},{name:"Indonesia",code:"ID"},{name:"Iran",code:"IR"},{name:"Iraq",code:"IQ"},{name:"Israel",code:"IL"},{name:"Japan",code:"JP"},{name:"Jordan",code:"JO"},{name:"Kazakhstan",code:"KZ"},{name:"Kuwait",code:"KW"},{name:"Kyrgyzstan",code:"KG"},{name:"Laos",code:"LA"},{name:"Lebanon",code:"LB"},{name:"Malaysia",code:"MY"},{name:"Maldives",code:"MV"},{name:"Mongolia",code:"MN"},{name:"Myanmar",code:"MM"},{name:"Nepal",code:"NP"},{name:"North Korea",code:"KP"},{name:"Oman",code:"OM"},{name:"Pakistan",code:"PK"},{name:"Palestine",code:"PS"},{name:"Philippines",code:"PH"},{name:"Qatar",code:"QA"},{name:"Saudi Arabia",code:"SA"},{name:"Singapore",code:"SG"},{name:"South Korea",code:"KR"},{name:"Sri Lanka",code:"LK"},{name:"Syria",code:"SY"},{name:"Taiwan",code:"TW"},{name:"Tajikistan",code:"TJ"},{name:"Thailand",code:"TH"},{name:"Timor-Leste",code:"TL"},{name:"Turkey",code:"TR"},{name:"Turkmenistan",code:"TM"},{name:"United Arab Emirates",code:"AE"},{name:"Uzbekistan",code:"UZ"},{name:"Vietnam",code:"VN"},{name:"Yemen",code:"YE"}]},{id:"north-america",name:"North America",description:"Includes Canada, the United States, Mexico, Central America, and the Caribbean.",countries:[{name:"Antigua and Barbuda",code:"AG"},{name:"Bahamas",code:"BS"},{name:"Barbados",code:"BB"},{name:"Belize",code:"BZ"},{name:"Canada",code:"CA"},{name:"Costa Rica",code:"CR"},{name:"Cuba",code:"CU"},{name:"Dominica",code:"DM"},{name:"Dominican Republic",code:"DO"},{name:"El Salvador",code:"SV"},{name:"Grenada",code:"GD"},{name:"Guatemala",code:"GT"},{name:"Haiti",code:"HT"},{name:"Honduras",code:"HN"},{name:"Jamaica",code:"JM"},{name:"Mexico",code:"MX"},{name:"Nicaragua",code:"NI"},{name:"Panama",code:"PA"},{name:"Saint Kitts and Nevis",code:"KN"},{name:"Saint Lucia",code:"LC"},{name:"Saint Vincent and the Grenadines",code:"VC"},{name:"Trinidad and Tobago",code:"TT"},{name:"United States",code:"US"}]},{id:"south-america",name:"South America",description:"Follow the southern hemisphere with a guided tour through every national flag.",countries:[{name:"Argentina",code:"AR"},{name:"Bolivia",code:"BO"},{name:"Brazil",code:"BR"},{name:"Chile",code:"CL"},{name:"Colombia",code:"CO"},{name:"Ecuador",code:"EC"},{name:"Guyana",code:"GY"},{name:"Paraguay",code:"PY"},{name:"Peru",code:"PE"},{name:"Suriname",code:"SR"},{name:"Uruguay",code:"UY"},{name:"Venezuela",code:"VE"}]},{id:"oceania",name:"Oceania",description:"Island-hop across the Pacific by generating every sovereign flag in Oceania.",countries:[{name:"Australia",code:"AU"},{name:"Fiji",code:"FJ"},{name:"Kiribati",code:"KI"},{name:"Marshall Islands",code:"MH"},{name:"Micronesia",code:"FM"},{name:"Nauru",code:"NR"},{name:"New Zealand",code:"NZ"},{name:"Palau",code:"PW"},{name:"Papua New Guinea",code:"PG"},{name:"Samoa",code:"WS"},{name:"Solomon Islands",code:"SB"},{name:"Tonga",code:"TO"},{name:"Tuvalu",code:"TV"},{name:"Vanuatu",code:"VU"}]}],_o=lr.reduce((t,e)=>(t[e.id]=e,t),{}),Dp=()=>lr.reduce((t,e)=>(t[e.id]=e.countries.map(zs),t),{}),Pp=()=>lr.reduce((t,e)=>(t[e.id]={running:!1,completed:!1},t),{});function Mp({entry:t}){const{country:e,dataUrl:r,error:n,prompt:a,status:i}=t,o=typeof e.population=="number"&&Number.isFinite(e.population)?`2025 est. population: ${Rp.format(e.population)}`:null;return d.jsxs("article",{className:"space-y-3 rounded-2xl border border-slate-200 bg-white/80 p-5 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[d.jsxs("header",{className:"space-y-3 text-center",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsxs("div",{className:"inline-flex items-center gap-2 text-lg font-semibold text-slate-800 dark:text-slate-100",children:[d.jsx(wo,{countryCode:e.code,svg:!0,title:`${e.name} reference flag`,className:"text-2xl"}),d.jsx("span",{children:e.name})]}),o?d.jsx("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:o}):null]}),d.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Unicode reference flag for quick color checks."})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("div",{className:"overflow-hidden rounded-xl border border-slate-200 bg-slate-50 p-2 dark:border-slate-700 dark:bg-slate-800",children:d.jsx(wo,{countryCode:e.code,svg:!0,title:`${e.name} official flag`,className:"block h-24 w-full"})}),d.jsx("div",{className:"overflow-hidden rounded-xl border border-brand-200 bg-white p-2 text-center dark:border-brand-500/60 dark:bg-slate-900",children:r?d.jsx("img",{src:r,alt:`Generated ${e.name} flag`,className:"h-24 w-full object-contain",loading:"lazy"}):d.jsx("div",{className:"flex h-24 items-center justify-center text-xs font-medium text-slate-400 dark:text-slate-500",children:i==="error"?"Generation failed":i==="loading"?"Loading flag…":"Pending request"})})]}),d.jsxs("footer",{className:"space-y-2 text-xs text-slate-500 dark:text-slate-400",children:[d.jsx("p",{className:"rounded-lg bg-slate-100 px-3 py-2 font-medium text-slate-600 dark:bg-slate-800/70 dark:text-slate-300",children:a||`Waiting to request the ${e.name} flag…`}),n?d.jsx("p",{className:"text-red-500 dark:text-red-400",children:n}):null]})]})}function Lp({experience:t}){const[e,r]=v.useState(Dp),[n,a]=v.useState(Pp),i=v.useMemo(()=>(t?.svgApiBaseUrl||t?.defaultBaseUrl||"https://groq-endpoint.louispaulet13.workers.dev").replace(/\/$/,""),[t]),o=v.useRef({}),s=v.useRef(!1),l=v.useRef(n),c=v.useCallback(x=>{a(m=>{const g=typeof x=="function"?x(m):x;return l.current=g,g})},[]);v.useEffect(()=>{s.current=!1;const x=o.current;return()=>{s.current=!0,Object.values(x).forEach(m=>{m&&clearTimeout(m)})}},[]);const u=v.useCallback((x,m,g)=>{r(y=>{const w=(y[x]||[]).map((C,A)=>A===m?{...C,...g}:C);return{...y,[x]:w}})},[]),f=v.useCallback((x,m)=>{const g=_o[x];if(!g||s.current)return;if(m>=g.countries.length){c(w=>({...w,[x]:{running:!1,completed:!0}})),o.current[x]=void 0;return}const b=`Generate an accurate flat SVG of the national flag of ${g.countries[m].name}. Respect the official proportions and palette.`;u(x,m,{status:"loading",prompt:b,error:"",dataUrl:""}),(async()=>{try{const w=new URL(`${i}/svg/${encodeURIComponent(b)}`),C=await fetch(w.toString());if(!C.ok)throw new Error(`Request failed with status ${C.status}`);const A=await C.json(),N=jp(A);if(!N)throw new Error("The response did not include SVG markup.");u(x,m,{status:"done",dataUrl:N,prompt:typeof A?.prompt=="string"&&A.prompt.trim()?A.prompt.trim():b})}catch(w){u(x,m,{status:"error",error:w instanceof Error?w.message:"Unexpected error while generating the flag."})}finally{s.current||(o.current[x]=setTimeout(()=>f(x,m+1),Tp))}})()},[i,c,u]),h=v.useCallback((x,{force:m=!1}={})=>{const g=_o[x];!g||l.current[x]?.running&&!m||(r(b=>({...b,[x]:g.countries.map(zs)})),c(b=>({...b,[x]:{running:!0,completed:!1}})),o.current[x]&&clearTimeout(o.current[x]),o.current[x]=setTimeout(()=>f(x,0),200))},[f,c]);v.useEffect(()=>{h("europe")},[h]);const p=v.useCallback(()=>{lr.forEach(x=>{h(x.id,{force:!0})})},[h]);return d.jsxs("div",{className:"space-y-8",children:[d.jsx("section",{className:"rounded-2xl border border-slate-200 bg-white/80 p-6 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:d.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[d.jsx("button",{type:"button",onClick:p,className:"inline-flex items-center justify-center rounded-full border border-brand-500/20 bg-brand-500/10 px-5 py-2 text-sm font-semibold text-brand-700 transition hover:bg-brand-500/20 focus:outline-none focus-visible:ring-2 focus-visible:ring-brand-500/40 dark:border-brand-400/30 dark:bg-brand-400/10 dark:text-brand-200 dark:hover:bg-brand-400/20",children:"Generate every flag"}),d.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 sm:max-w-xs",children:"Please remember API rate limits — this triggers hundreds of sequential calls, so let the queue finish before retrying."})]})}),lr.map(x=>{const m=e[x.id]||[],g=n[x.id]||{running:!1,completed:!1},y=g.running?"Generating…":g.completed?"Regenerate flags":x.id==="europe"?"Regenerate Europe":`Generate ${x.name}`;return d.jsxs("section",{className:"space-y-4 rounded-2xl border border-slate-200 bg-white/80 p-6 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[d.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("h3",{className:"text-base font-semibold text-slate-800 dark:text-slate-100",children:x.name}),d.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:x.description})]}),d.jsx("button",{type:"button",onClick:()=>h(x.id),disabled:g.running,className:"inline-flex items-center justify-center rounded-full border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100 focus:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 disabled:cursor-not-allowed disabled:border-slate-200 disabled:bg-slate-100 disabled:text-slate-400 dark:border-slate-600 dark:bg-slate-800 dark:text-slate-200 dark:hover:bg-slate-700 dark:disabled:border-slate-700 dark:disabled:bg-slate-900/60 dark:disabled:text-slate-500",children:y})]}),d.jsx("div",{className:"grid gap-6 md:grid-cols-2 xl:grid-cols-3",children:m.map(b=>d.jsx(Mp,{entry:b},b.country.code))})]},x.id)})]})}const Rn=[{id:"dirty-hands-hot-dog",title:"Dirty Hands Hot Dog",description:"Classic street food experience enhanced by authentic grime and possible tetanus. Hand flavor included.",price:"€2.50",image:"/secondhand_food_market/hot_dog_dirty_hands.png",curse:"Seasoned with axle grease memories and unverified relish.",category:"food"},{id:"bath-water-vial",title:"Bath Water Vial",description:"Artisanal bottled bath water. Collected fresh after a long, reflective soak. Slightly soapy undertones.",price:"€9.99",image:"/secondhand_food_market/bath_water_vial.png",curse:"Infused with existential dread and three stray eyelashes.",category:"spells-and-potions"},{id:"influencer-tears",title:"Influencer Tears",description:"A concentrated vial of algorithm-approved despair, perfect for potions requiring boosted engagement or dramatic flair.",price:"€14.40",image:"/secondhand_food_market/influencer_tears.png",curse:"May summon parasocial hauntings and the faint echo of sponsored apologies.",category:"spells-and-potions"},{id:"liquid-serenity-potion",title:"Liquid Serenity Potion",description:"A luminous tonic that jolts your ambition while smoothing out every frayed nerve, ideal for nights requiring sharp focus and soft edges.",price:"€11.11",image:"/secondhand_food_market/liquid_serenity_potion.png",curse:"Grants tranquil alertness until the witching hour, then insists on karaoke with unexpected confidence.",category:"spells-and-potions"},{id:"lipstick-starbucks-drink",title:"Lipstick Starbucks Drink",description:"Half-finished caramel latte featuring a bold lipstick accent. A kiss of mystery and backwash.",price:"€4.00",image:"/secondhand_food_market/didnt_use_the_straw.png",curse:"Guaranteed to share secrets you never wanted to overhear.",category:"food"},{id:"sushi-minus-fish",title:"Sushi Minus Fish",description:"A minimalist sushi experience. Eight perfect rice ovals, all the fish gone to a better place.",price:"€5.50",image:"/secondhand_food_market/oops_i_ate_all_the_fish.png",curse:"Haunted by the ghosts of sashimi past.",category:"food"},{id:"foot-stomped-pizza",title:"Foot-Stomped Pizza",description:"Freshly stepped-on pepperoni pizza. Notes of human warmth and crushed dignity.",price:"€6.66",image:"/secondhand_food_market/pizza_stomp.png",curse:"Pairs well with toe jam and despair.",category:"food"},{id:"single-bite-burger",title:"Single Bite Burger",description:"Perfectly intact except for one large bite. Comes with existential regret and saliva residue.",price:"€3.20",image:"/secondhand_food_market/single_bite_burger.png",curse:"Whispers “you should have been faster” with every chew.",category:"food"},{id:"pizza-missing-slice",title:"Pizza Missing a Slice",description:"Generous seven-slice offering, ideal for those who love paying full price for less.",price:"€7.00",image:"/secondhand_food_market/pizza_missing_slice.png",curse:"Forever incomplete; every slice tastes like absence.",category:"food"},{id:"butter-without-packaging",title:"Butter Without Packaging",description:"Naked butter bar, hand-temperature. Comes with a faint scent of palm sweat and trust issues.",price:"€1.80",image:"/secondhand_food_market/butter_without_packaging.png",curse:"Melts faster when you start asking questions.",category:"food"},{id:"forgotten-office-coffee",title:"Forgotten Office Coffee",description:"Corporate relic in a branded mug, brewed last week and abandoned during the big move.",price:"€1.10",image:"/secondhand_food_market/forgotten_coffee.png",curse:"Tastes like burnout and three rescheduled meetings.",category:"food"},{id:"microwaved-yesterday-fries",title:"Reheated Fries Offer",description:"Yesterday's fast food fries revived by microwave - soggy, lukewarm, and surprisingly affordable.",price:"€0.80",image:"/secondhand_food_market/reheated_fries.png",curse:"Forever haunted by the crunch they once had.",category:"food"}];function Bp(){const t=Rn.filter(r=>r.category!=="spells-and-potions"),e=Rn.filter(r=>r.category==="spells-and-potions");return d.jsxs("div",{className:"space-y-12",children:[d.jsxs("section",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-amber-500 via-rose-500 to-brand-600 px-8 py-14 text-white shadow-xl",children:[d.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.2),_transparent_55%)]","aria-hidden":!0}),d.jsxs("div",{className:"relative z-10 grid gap-10 lg:grid-cols-[minmax(0,1.2fr)_minmax(0,1fr)] lg:items-center",children:[d.jsxs("div",{className:"space-y-5",children:[d.jsxs("p",{className:"inline-flex items-center gap-2 rounded-full bg-white/15 px-4 py-1 text-xs font-semibold uppercase tracking-[0.35em] text-white/80",children:[d.jsx(Io,{className:"h-4 w-4","aria-hidden":!0}),"Pop-Up Market"]}),d.jsx("h1",{className:"text-3xl font-semibold sm:text-4xl",children:"Second-Hand Food Market"}),d.jsx("p",{className:"max-w-2xl text-sm leading-relaxed text-white/85",children:"Welcome to the dystopian deli counter where hygiene laws dare not tread. Each pre-loved delicacy arrives with a bespoke curse, a suspicious backstory, and a non-refundable price tag. Shop fast—before the health inspector finds us."}),d.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[d.jsxs(we,{to:"/",className:"inline-flex items-center gap-2 rounded-full bg-white px-4 py-2 text-sm font-semibold text-brand-700 shadow transition hover:bg-brand-50",children:["Back to overview",d.jsx("span",{"aria-hidden":!0,children:"→"})]}),d.jsx("span",{className:"inline-flex items-center gap-2 rounded-full bg-white/20 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-white/80",children:"Curses complimentary"})]})]}),d.jsx("div",{className:"relative hidden h-full lg:flex",children:d.jsxs("div",{className:"relative w-full max-w-md rounded-3xl border border-white/30 bg-white/10 p-6 shadow-lg backdrop-blur",children:[d.jsx("div",{className:"absolute -top-10 right-4 h-20 w-20 rounded-full bg-white/10 blur-2xl","aria-hidden":!0}),d.jsxs("div",{className:"space-y-4 text-sm text-white/90",children:[d.jsxs("div",{className:"flex items-center gap-2 text-xs uppercase tracking-[0.3em] text-white/70",children:[d.jsx(ol,{className:"h-4 w-4","aria-hidden":!0}),"Certified Questionable"]}),d.jsx("p",{children:"Groq’s procurement goblins scoured back-alley buffets and underground potlucks to curate this ethically dubious tasting menu. Each item ships in a suspicious paper bag alongside a legal waiver scented with despair."}),d.jsx("p",{children:"Pro tip: pair with a tetanus shot and a strong stomach. Returns politely redirected to the nearest void."})]})]})})]})]}),d.jsxs("section",{className:"space-y-8",children:[d.jsxs("header",{className:"space-y-3",children:[d.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Tonight’s questionable specials 🛒"}),d.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Every listing comes with the seller’s original fingerprints, unresolved drama, and an enthusiastic “Buy Now” button that doesn’t actually do anything. Please enjoy responsibly—or at least ironically."})]}),d.jsx("div",{className:"grid gap-6 md:grid-cols-2 xl:grid-cols-3",children:t.map(r=>d.jsxs("article",{className:"group relative flex flex-col overflow-hidden rounded-3xl border border-slate-200 bg-white/95 shadow-sm transition hover:border-brand-400/60 hover:shadow-xl dark:border-slate-800 dark:bg-slate-900/95",children:[d.jsxs("div",{className:"relative aspect-square w-full overflow-hidden bg-slate-900/80",children:[d.jsx("img",{src:r.image,alt:r.title,className:"h-full w-full object-cover transition duration-500 group-hover:scale-105",loading:"lazy"}),d.jsx("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-slate-900/80 to-transparent p-4 text-xs uppercase tracking-[0.3em] text-white/75",children:r.curse})]}),d.jsxs("div",{className:"flex flex-1 flex-col space-y-4 p-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:r.title}),d.jsx("p",{className:"text-sm leading-relaxed text-slate-600 dark:text-slate-300",children:r.description})]}),d.jsxs("div",{className:"mt-auto flex items-center justify-between pt-2",children:[d.jsx("span",{className:"text-sm font-semibold text-brand-600 dark:text-brand-400",children:r.price}),d.jsxs("button",{type:"button",className:"inline-flex items-center gap-2 rounded-full border border-brand-500/40 bg-brand-500/10 px-4 py-1.5 text-xs font-semibold uppercase tracking-wide text-brand-700 transition hover:border-brand-500 hover:bg-brand-500/20 dark:text-brand-300",children:["Buy Now",d.jsx("span",{"aria-hidden":!0,children:"→"})]})]})]})]},r.id))})]}),e.length>0&&d.jsxs("section",{className:"space-y-8",children:[d.jsxs("header",{className:"space-y-3",children:[d.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Spells & Potions Annex 🔮"}),d.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"For patrons seeking something more arcane than reheated leftovers, we stashed the enchanted liquids and curious brews down here. Ingredients may include moonlight, discarded wishes, and probably soap."})]}),d.jsx("div",{className:"grid gap-6 md:grid-cols-2 xl:grid-cols-3",children:e.map(r=>d.jsxs("article",{className:"group relative flex flex-col overflow-hidden rounded-3xl border border-slate-200 bg-white/95 shadow-sm transition hover:border-brand-400/60 hover:shadow-xl dark:border-slate-800 dark:bg-slate-900/95",children:[d.jsxs("div",{className:"relative aspect-square w-full overflow-hidden bg-slate-900/80",children:[d.jsx("img",{src:r.image,alt:r.title,className:"h-full w-full object-cover transition duration-500 group-hover:scale-105",loading:"lazy"}),d.jsx("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-slate-900/80 to-transparent p-4 text-xs uppercase tracking-[0.3em] text-white/75",children:r.curse})]}),d.jsxs("div",{className:"flex flex-1 flex-col space-y-4 p-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:r.title}),d.jsx("p",{className:"text-sm leading-relaxed text-slate-600 dark:text-slate-300",children:r.description})]}),d.jsxs("div",{className:"mt-auto flex items-center justify-between pt-2",children:[d.jsx("span",{className:"text-sm font-semibold text-brand-600 dark:text-brand-400",children:r.price}),d.jsxs("button",{type:"button",className:"inline-flex items-center gap-2 rounded-full border border-brand-500/40 bg-brand-500/10 px-4 py-1.5 text-xs font-semibold uppercase tracking-wide text-brand-700 transition hover:border-brand-500 hover:bg-brand-500/20 dark:text-brand-300",children:["Buy Now",d.jsx("span",{"aria-hidden":!0,children:"→"})]})]})]})]},r.id))})]}),d.jsx("section",{className:"overflow-hidden rounded-3xl border border-slate-200 bg-white/80 p-8 shadow-sm dark:border-slate-800 dark:bg-slate-900/80",children:d.jsxs("div",{className:"grid gap-8 lg:grid-cols-[minmax(0,1fr)_minmax(0,0.9fr)] lg:items-center",children:[d.jsxs("div",{className:"space-y-3 text-sm leading-relaxed text-slate-600 dark:text-slate-300",children:[d.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Satisfaction not guaranteed"}),d.jsx("p",{children:"By tapping any button above, you agree to our 48-page End-Of-Taste waiver, accept that flavor timelines are non-linear, and acknowledge that cursed calories still count. Remember: if it looks haunted, it probably is."}),d.jsx("p",{children:"Need palate cleanser recommendations after this experience? Swing by AllergyFinder or Pizza Maker for something less contaminated. Maybe."})]}),d.jsxs("div",{className:"rounded-2xl border border-dashed border-brand-500/50 bg-brand-50/60 p-6 text-brand-700 dark:border-brand-400/50 dark:bg-brand-500/10 dark:text-brand-200",children:[d.jsx("h3",{className:"text-sm font-semibold uppercase tracking-[0.3em]",children:"Menu JSON"}),d.jsx("p",{className:"mt-2 text-sm",children:"Import this cursed catalogue into Object Maker at your own risk. Side effects include laughter, discomfort, and sudden urges to disinfect your soul."}),d.jsx("pre",{className:"mt-4 max-h-52 overflow-auto rounded-xl bg-slate-900/90 p-4 text-xs text-emerald-200",children:JSON.stringify(Rn.map(({title:r,description:n,price:a,image:i})=>({title:r,description:n,price:a,image:i})),null,2)})]})]})})]})}const dt=720,nt=420,St=12,We=96,Rt=32,Xe=10,Nr=300,Sr=90,Ao=4,Co=.12,Fp="pong_theme",Up="meta-llama/llama-4-maverick-17b-128e-instruct",Eo=15e3,No=45e3,Gp={type:"object",additionalProperties:!1,properties:{styleName:{type:"string"},stylePrompt:{type:"string"},colors:{type:"array",items:{type:"object",additionalProperties:!1,properties:{role:{type:"string",enum:["background","leftPaddle","rightPaddle","ball","accent","scoreText"]},hex:{type:"string"},prompt:{type:"string"}},required:["role","hex","prompt"]}}},required:["styleName","stylePrompt","colors"]},Pr={styleName:"Neon Baseline",stylePrompt:"Default neon training wheels for the first serve.",colors:[{role:"background",hex:"#0f172a",prompt:"Deep navy void so the rest of the palette glows."},{role:"leftPaddle",hex:"#f87171",prompt:"Cherry paddle for Player One swagger."},{role:"rightPaddle",hex:"#34d399",prompt:"Mint paddle for Player Two chill."},{role:"ball",hex:"#facc15",prompt:"Electric canary ball to track the volley."},{role:"accent",hex:"#38bdf8",prompt:"Icy cyan grid lines and HUD glints."},{role:"scoreText",hex:"#e2e8f0",prompt:"Frosted typography keeps the score readable."}]},Da={background:"#0f172a",leftPaddle:"#ef4444",rightPaddle:"#22d3ee",ball:"#facc15",accent:"#38bdf8",scoreText:"#f8fafc"},Vp={background:"Background",leftPaddle:"Left Paddle",rightPaddle:"Right Paddle",ball:"Ball",accent:"Accent & Lines",scoreText:"Score Text"};function ra(t,e,r){return Math.min(Math.max(t,e),r)}function Jr(t){if(typeof t!="string")return null;const e=t.trim();if(!e)return null;const r=e.match(/#?[0-9a-fA-F]{6}/);return r?r[0].startsWith("#")?r[0].toUpperCase():`#${r[0].toUpperCase()}`:null}function Dn(t,e){const r=Jr(t);if(!r)return`rgba(15, 23, 42, ${e})`;const n=r.slice(1),a=Number.parseInt(n,16),i=a>>16&255,o=a>>8&255,s=a&255;return`rgba(${i}, ${o}, ${s}, ${ra(e,0,1)})`}function $p(t){const e=typeof t?.styleName=="string"?t.styleName.trim():"",r=typeof t?.stylePrompt=="string"?t.stylePrompt.trim():"";let a=(Array.isArray(t?.colors)?t.colors:[]).map(i=>{const o=typeof i?.role=="string"?i.role:"",s=Jr(i?.hex),l=typeof i?.prompt=="string"?i.prompt.trim():"";return!o||!s||!l||!Object.prototype.hasOwnProperty.call(Da,o)?null:{role:o,hex:s,prompt:l}}).filter(Boolean);return a.length>6&&(a=a.slice(0,6)),a.length<4?Pr:{styleName:e||"Untitled Theme",stylePrompt:r||"A surprise volley of color from the model.",colors:a}}function Hp({reason:t,scores:e,previousStyle:r}){const n=t==="left-paddle"?"Left paddle just made contact—reward the defense with a fresh look.":t==="right-paddle"?"Right paddle returned the shot—give the offense a new flair.":t==="score-left"?"Left side scored. Celebrate with a confident palette shift.":t==="score-right"?"Right side scored. Cue a comeback-ready palette.":"Opening serve deserves a stylish stage.",a=r?`Avoid reusing the exact style name "${r}".`:"";return["You design vivid, legible themes for a web-based Pong arena.","Return JSON that satisfies the provided schema. Provide between four and six colors.","Each color entry must have a role from the allowed enum, a #RRGGBB hex value, and a prompt sentence describing how the color looks in the scene.","Ensure the background contrasts strongly with paddles and ball for accessibility.","Let the accent color cover center line, particle sparks, and UI chrome.",`Current score: Left ${e.left} · Right ${e.right}.`,n,"Keep styleName to 2-4 words, and let stylePrompt be one energetic sentence about the vibe.","Make each palette feel distinct from the previous round and embrace playful arcade moods.",a].filter(Boolean).join(`
`)}function zp(t){const e={...Da};return t?.colors&&t.colors.forEach(r=>{r?.role&&Jr(r?.hex)&&(e[r.role]=Jr(r.hex))}),e}function Wp(){const[t,e]=v.useState(Pr),[r,n]=v.useState(!1),[a,i]=v.useState(""),[o,s]=v.useState([{theme:Pr,reason:"Opening serve",timestamp:Date.now()}]),l=v.useRef(!1),c=v.useRef(Pr),u=v.useRef("initial"),f=v.useRef(0),h=v.useRef(0),p=v.useRef(null),x=v.useRef({left:0,right:0});v.useEffect(()=>{c.current=t},[t]),v.useEffect(()=>()=>{p.current&&(clearTimeout(p.current),p.current=null)},[]);const m=v.useCallback(({reason:g,scores:y})=>{x.current=y;const b=(N,E)=>{if(typeof window>"u")return;const S=Math.max(0,Number.isFinite(N)?N:0);p.current&&(clearTimeout(p.current),p.current=null),p.current=window.setTimeout(()=>{p.current=null,m({reason:E,scores:x.current})},S)};if(l.current)return u.current=g,{status:"queued"};const w=Date.now();if(h.current&&w<h.current)return i("Rate limit hit. Cooling down before the next theme."),b(h.current-w,g),{status:"rate-limited"};const C=w-f.current;return C<Eo?(b(Eo-C,g),{status:"delayed"}):(p.current&&(clearTimeout(p.current),p.current=null),l.current=!0,u.current="initial",n(!0),i(""),f.current=w,(async()=>{try{const N=Hp({reason:g,scores:y,previousStyle:c.current?.styleName}),{payload:E}=await dn({structure:Gp,objectType:Fp,prompt:N,strict:!0,model:Up}),S=$p(E);e(S),s(I=>[{theme:S,reason:g,timestamp:Date.now(),prompt:N},...I].slice(0,8)),h.current=0}catch(N){console.error("Theme request failed",N),N?.message?.includes("HTTP 429")?(i("Rate limit hit. Cooling down before the next theme."),h.current=Date.now()+No,b(No,g)):i(N?.message||"Theme request failed")}finally{if(n(!1),l.current=!1,u.current!=="initial"){const N=u.current;u.current="initial",m({reason:N,scores:x.current})}}})(),{status:"started"})},[]);return{theme:t,loading:r,error:a,history:o,requestTheme:m}}function Xp(){const t=v.useRef(null),e=v.useRef(null),r=v.useRef(null),n=v.useRef({x:dt/2,y:nt/2,vx:Sr,vy:Sr*.6,cooldown:0}),a=v.useRef({y:nt/2-We/2}),i=v.useRef({y:nt/2-We/2}),o=v.useRef({left:0,right:0}),[s,l]=v.useState({left:0,right:0}),[c,u]=v.useState("Spooling up the arena…"),{theme:f,loading:h,error:p,history:x,requestTheme:m}=Wp(),g=v.useMemo(()=>zp(f),[f]),y=v.useRef(g);v.useEffect(()=>{y.current=g},[g]);const b=v.useCallback(N=>{n.current={x:dt/2,y:nt/2,vx:(N==="left"?-1:1)*Sr,vy:(Math.random()>.5?1:-1)*(Sr*(.4+Math.random()*.4)),cooldown:Co}},[]),w=v.useCallback(N=>{const E=N,S={"left-paddle":"Left paddle deflects the rally—palette remix unlocked.","right-paddle":"Right paddle counters in style—new colors inbound.","score-left":"Left side banks a point and claims a fresh vibe.","score-right":"Right side scores and the court reinvents itself.",initial:"Opening serve ignites the palette generator."},I=m({reason:E,scores:o.current}),O=S[E]||"New theme charging up…",j=I?.status==="rate-limited"?"Rate limit reached. Cooling down before new colors.":I?.status==="delayed"?"Cooling down the palette generator…":I?.status==="queued"?"Palette update queued…":O;u(j)},[m]);v.useEffect(()=>{w("initial")},[w]),v.useEffect(()=>{const N=t.current;if(!N)return;const E=N.getContext("2d");r.current=null;const S=I=>{r.current||(r.current=I);const O=(I-r.current)/1e3;r.current=I;const j=n.current,M=a.current,G=i.current;j.cooldown=Math.max(0,j.cooldown-O);const F=M.y+We/2,V=G.y+We/2,Y=.6,Z=j.y-We*.25,ne=j.y+We*.25;F<Z?M.y+=Nr*Y*O:F>Z&&(M.y-=Nr*Y*O),V<ne?G.y+=Nr*Y*O:V>ne&&(G.y-=Nr*Y*O),M.y=ra(M.y,0,nt-We),G.y=ra(G.y,0,nt-We),j.x+=j.vx*O,j.y+=j.vy*O,j.y-Xe<=0&&j.vy<0?(j.y=Xe,j.vy=Math.abs(j.vy)):j.y+Xe>=nt&&j.vy>0&&(j.y=nt-Xe,j.vy=-Math.abs(j.vy));const D=(ee,qe)=>{if(j.cooldown>0)return!1;const H=ee.y,ce=ee.y+We;if(j.y+Xe<H||j.y-Xe>ce)return!1;if(qe==="left")if(j.x-Xe<=Rt+St&&j.vx<0)j.x=Rt+St+Xe,j.vx=Math.abs(j.vx)+Ao;else return!1;else if(j.x+Xe>=dt-Rt-St&&j.vx>0)j.x=dt-Rt-St-Xe,j.vx=-(Math.abs(j.vx)+Ao);else return!1;const R=(j.y-(ee.y+We/2))/(We/2);return j.vy+=R*120,j.cooldown=Co,!0},$=D(M,"left"),K=D(G,"right");if($?w("left-paddle"):K&&w("right-paddle"),j.x+Xe<0){const ee={left:o.current.left,right:o.current.right+1};o.current=ee,l({...ee}),w("score-right"),b("right")}else if(j.x-Xe>dt){const ee={left:o.current.left+1,right:o.current.right};o.current=ee,l({...ee}),w("score-left"),b("left")}const q=y.current;E.fillStyle=q.background,E.fillRect(0,0,dt,nt),E.strokeStyle=Dn(q.accent,.6),E.setLineDash([10,14]),E.lineWidth=4,E.beginPath(),E.moveTo(dt/2,16),E.lineTo(dt/2,nt-16),E.stroke(),E.setLineDash([]),E.fillStyle=q.leftPaddle,E.fillRect(Rt,M.y,St,We),E.fillStyle=q.rightPaddle,E.fillRect(dt-Rt-St,G.y,St,We),E.fillStyle=q.ball,E.beginPath(),E.arc(j.x,j.y,Xe,0,Math.PI*2),E.fill(),e.current=requestAnimationFrame(S)};return e.current=requestAnimationFrame(S),()=>{e.current&&cancelAnimationFrame(e.current)}},[b,w]);const C=v.useMemo(()=>Dn(g.accent,.35),[g.accent]),A=v.useMemo(()=>Dn(g.accent,.18),[g.accent]);return d.jsxs("div",{className:"space-y-10",children:[d.jsxs("section",{className:"relative overflow-hidden rounded-[2.75rem] border border-slate-200/40 bg-slate-900 text-slate-50 shadow-xl",children:[d.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(148,163,184,0.35),_transparent_55%)]","aria-hidden":!0}),d.jsxs("div",{className:"relative z-10 grid gap-8 p-8 lg:grid-cols-[minmax(0,2fr)_minmax(0,3fr)] lg:items-center",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-200/70",children:"Groq Arcade · Auto Pong"}),d.jsx("h1",{className:"text-3xl font-semibold sm:text-4xl",children:"Pong Showdown"}),d.jsxs("p",{className:"text-base leading-relaxed text-slate-200/90",children:["Watch two AI paddles volley while Groq LLAMA 4 models remix the arena's palette on every clutch play. Each collision or score fires a structured ",d.jsx("code",{className:"mx-1 rounded bg-slate-50/10 px-1 py-0.5 text-[0.7rem] font-semibold",children:"/obj"})," call that returns fresh colors, usage prompts, and a vibe-forward style name."]}),d.jsx("p",{className:"text-sm text-slate-300/80",children:c})]}),d.jsxs("div",{className:"relative flex flex-col gap-4",children:[d.jsxs("div",{className:"flex items-center justify-between rounded-2xl px-5 py-4 shadow-lg",style:{backgroundColor:A,border:`1px solid ${C}`,color:g.scoreText},children:[d.jsxs("div",{className:"text-left",children:[d.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-100/70",children:"Current Theme"}),d.jsx("p",{className:"text-2xl font-semibold text-slate-50",children:f?.styleName}),d.jsx("p",{className:"text-sm text-slate-100/80",children:f?.stylePrompt})]}),d.jsxs("div",{className:"flex flex-col items-end text-right text-sm text-slate-100/90",children:[d.jsxs("div",{className:"flex items-center gap-3 text-lg font-semibold",children:[d.jsx("span",{children:"Left"}),d.jsx("span",{children:s.left})]}),d.jsxs("div",{className:"flex items-center gap-3 text-lg font-semibold",children:[d.jsx("span",{children:"Right"}),d.jsx("span",{children:s.right})]}),h?d.jsx("span",{className:"mt-2 text-xs uppercase tracking-wide text-slate-100/60",children:"Updating theme…"}):null,p?d.jsx("span",{className:"mt-2 text-xs text-rose-200",children:p}):null]})]}),d.jsxs("div",{className:"rounded-2xl border border-slate-200/30 bg-slate-950/60 p-4 text-xs text-slate-300/80 backdrop-blur",children:[d.jsx("p",{className:"text-[0.65rem] uppercase tracking-[0.35em] text-slate-400",children:"How the palette arrives"}),d.jsxs("p",{children:["Themes are minted via ",d.jsx("span",{className:"font-semibold",children:"meta-llama/llama-4-maverick-17b-128e-instruct"})," on the Groq endpoint with a schema demanding named roles and prompts. The paddle AI sticks to classic Pong so the colors steal the show."]})]})]})]})]}),d.jsxs("section",{className:"grid gap-8 lg:grid-cols-[minmax(0,3fr)_minmax(0,2fr)]",children:[d.jsx("div",{className:"space-y-4",children:d.jsx("div",{className:"relative overflow-hidden rounded-3xl border border-slate-200/40 bg-slate-950 shadow-inner",children:d.jsx("canvas",{ref:t,width:dt,height:nt,className:"h-full w-full object-contain",style:{backgroundColor:g.background}})})}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"rounded-3xl border border-slate-200/40 bg-white/80 p-5 shadow-sm backdrop-blur dark:border-slate-700 dark:bg-slate-900/70",children:[d.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-500 dark:text-slate-400",children:"Palette roles"}),d.jsx("ul",{className:"mt-4 space-y-3 text-sm",children:Object.keys(Da).map(N=>{const E=f?.colors?.find(I=>I.role===N),S=g[N];return d.jsxs("li",{className:"flex gap-3",children:[d.jsx("span",{className:"mt-1 inline-flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-full border border-slate-200 text-xs font-semibold",style:{backgroundColor:S,color:N==="background"?"#0f172a":"#020617"},children:N.slice(0,1).toUpperCase()}),d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-100",children:Vp[N]}),d.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400",children:S}),d.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:E?.prompt||"Default prompt applied."})]})]},N)})})]}),d.jsxs("div",{className:"rounded-3xl border border-slate-200/40 bg-white/70 p-5 text-sm shadow-sm backdrop-blur dark:border-slate-700 dark:bg-slate-900/60",children:[d.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-500 dark:text-slate-400",children:"Recent volleys"}),d.jsx("ul",{className:"mt-3 space-y-3",children:x.map(N=>d.jsxs("li",{className:"rounded-2xl border border-slate-200/40 bg-white/60 p-3 text-xs shadow-sm dark:border-slate-700 dark:bg-slate-900/50",children:[d.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-100",children:N.theme.styleName}),d.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:N.theme.stylePrompt}),d.jsxs("p",{className:"mt-1 text-[0.65rem] uppercase tracking-wide text-slate-400",children:["Trigger: ",N.reason.replace("-"," ")," · ",new Date(N.timestamp).toLocaleTimeString()]})]},N.timestamp))})]})]})]})]})}const So=10,Pn="/",Yp=`${Pn.endsWith("/")?Pn:`${Pn}/`}data/dalle-flux-comparison.csv`;function qp(t){const e=[];let r="",n=[],a=!1;for(let i=0;i<t.length;i+=1){const o=t[i];if(a){o==='"'?t[i+1]==='"'?(r+='"',i+=1):a=!1:r+=o;continue}if(o==='"'){a=!0;continue}if(o===","){n.push(r),r="";continue}if(o!=="\r"){if(o===`
`){n.push(r),n.some(s=>s!=="")&&e.push(n),n=[],r="";continue}r+=o}}if(a)throw new Error("CSV parse error: unmatched quote");return n.push(r),n.some(i=>i!=="")&&e.push(n),e}function Zp(t){const e=qp(t);if(!e.length)return[];const r=e[0].map(c=>c.trim().toLowerCase()),n=r.indexOf("prompt"),a=r.indexOf("file_flux_url"),i=r.indexOf("file_dalle_url"),o=r.indexOf("category");if(n===-1||a===-1||i===-1)throw new Error("CSV header missing required columns");const s=[n,a,i];o!==-1&&s.push(o);const l=Math.max(...s);return e.slice(1).filter(c=>c.length>l).map(c=>({prompt:c[n]?.trim()||"",fluxUrl:c[a]?.trim()||"",dalleUrl:c[i]?.trim()||"",category:o===-1?"Uncategorized":c[o]?.trim()||"Uncategorized"})).filter(c=>c.prompt&&c.fluxUrl&&c.dalleUrl)}function Kp(t,e){const[r,n]=v.useState(1),a=Math.max(1,Math.ceil(t.length/e)),i=Math.min(r,a),o=(i-1)*e,s=v.useMemo(()=>t.slice(o,o+e),[t,o,e]),l=f=>{if(Number.isNaN(f))return;const h=Math.min(Math.max(f,1),a);n(h)};return{page:i,totalPages:a,pageItems:s,goToPage:l,goToPrevious:()=>l(i-1),goToNext:()=>l(i+1)}}function Jp(){const[t,e]=v.useState([]),[r,n]=v.useState("loading"),[a,i]=v.useState(""),[o,s]=v.useState("all");v.useEffect(()=>{let E=!1;async function S(){n("loading"),i("");try{const I=await fetch(Yp,{headers:{Accept:"text/csv"}});if(!I.ok)throw new Error(`Failed to load CSV (status ${I.status})`);const O=await I.text(),j=Zp(O);E||(e(j),n("ready"))}catch(I){E||(n("error"),i(I instanceof Error?I.message:"Unknown error"))}}return S(),()=>{E=!0}},[]);const l=v.useMemo(()=>{const E=new Set;return t.forEach(({category:S})=>{const I=(S||"").trim();I&&E.add(I)}),Array.from(E).sort((S,I)=>S.localeCompare(I))},[t]);v.useEffect(()=>{o!=="all"&&!l.includes(o)&&s("all")},[l,o]);const c=v.useMemo(()=>o==="all"?t:t.filter(({category:E})=>E===o),[t,o]),{page:u,totalPages:f,pageItems:h,goToPage:p,goToNext:x,goToPrevious:m}=Kp(c,So),g=E=>{const S=E.target.value;s(S),p(1),typeof window<"u"&&window.scrollTo({top:0,behavior:"smooth"})},y=()=>{x(),typeof window<"u"&&window.scrollTo({top:0,behavior:"smooth"})},b=c.length,w=r==="loading",C=r==="error",A=t.length>0,N=b>0;return d.jsxs("div",{className:"space-y-12",children:[d.jsxs("section",{className:"relative overflow-hidden rounded-3xl border border-slate-200 bg-white/90 px-8 py-10 shadow-sm dark:border-slate-800 dark:bg-slate-900",children:[d.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(99,102,241,0.08),_transparent_60%)] dark:bg-[radial-gradient(circle_at_top,_rgba(99,102,241,0.18),_transparent_65%)]","aria-hidden":!0}),d.jsxs("div",{className:"relative z-10 space-y-5",children:[d.jsx("p",{className:"inline-flex items-center gap-2 rounded-full bg-brand-500/10 px-4 py-1 text-xs font-semibold uppercase tracking-[0.35em] text-brand-600 dark:text-brand-300",children:"Side-by-side study"}),d.jsx("h1",{className:"text-3xl font-semibold text-slate-900 dark:text-slate-100",children:"DALL·E 3 vs Flux Schnell"}),d.jsx("p",{className:"text-sm leading-relaxed text-slate-600 dark:text-slate-300",children:"We captured a like-for-like benchmark using 186 prompts. Flux Schnell ran on GroqCloud’s free endpoint while DALL·E 3 used $30 of OpenAI credits. Explore the prompts, visuals, and stylistic differences below — each page streams ten comparisons for quick scanning."}),d.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-slate-500 dark:text-slate-400",children:[d.jsx("span",{className:"inline-flex items-center gap-2 rounded-full border border-brand-500/30 px-3 py-1 font-semibold uppercase tracking-wide text-brand-600 dark:text-brand-300",children:"Flux Schnell · GroqCloud"}),d.jsx("span",{className:"inline-flex items-center gap-2 rounded-full border border-slate-300 px-3 py-1 font-semibold uppercase tracking-wide text-slate-500 dark:border-slate-700 dark:text-slate-300",children:"DALL·E 3 · OpenAI"}),d.jsxs(we,{to:"/",className:"inline-flex items-center gap-2 rounded-full border border-slate-300 px-3 py-1 font-semibold text-slate-600 transition hover:border-brand-500 hover:bg-brand-500/10 hover:text-brand-600 dark:border-slate-700 dark:text-slate-200 dark:hover:border-brand-400/60 dark:hover:bg-brand-500/10",children:["Back to overview",d.jsx("span",{"aria-hidden":!0,children:"↗"})]})]})]})]}),d.jsxs("section",{className:"space-y-6",children:[d.jsxs("header",{className:"flex flex-col gap-4 lg:flex-row lg:items-end lg:justify-between",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Prompt gallery"}),d.jsx("p",{className:"max-w-xl text-sm text-slate-600 dark:text-slate-400",children:"Each prompt renders Flux Schnell (left) beside DALL·E 3 (right). Click an image to open the original export."})]}),d.jsxs("div",{className:"flex flex-col items-stretch gap-3 sm:flex-row sm:items-center sm:gap-4",children:[d.jsxs("div",{className:"flex items-center gap-2 rounded-full border border-slate-200 bg-white/90 px-3 py-2 text-sm text-slate-600 shadow-sm dark:border-slate-700 dark:bg-slate-800/60 dark:text-slate-200",children:[d.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400 dark:text-slate-500",children:"Category"}),d.jsxs("select",{"aria-label":"Filter by category",value:o,onChange:g,className:"min-w-[12rem] rounded-full border border-transparent bg-white/80 px-3 py-1 text-sm font-medium text-slate-700 transition focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-500/40 dark:bg-slate-900/60 dark:text-slate-100 dark:focus:border-brand-400",children:[d.jsx("option",{value:"all",children:"All categories"}),l.map(E=>d.jsx("option",{value:E,children:E},E))]})]}),d.jsxs("div",{className:"inline-flex flex-nowrap items-center gap-2 rounded-full border border-slate-200 bg-white/90 px-4 py-2 text-sm font-medium text-slate-600 shadow-sm dark:border-slate-700 dark:bg-slate-800/60 dark:text-slate-200",children:[d.jsxs("span",{className:"whitespace-nowrap",children:["Page ",u," of ",f]}),d.jsx("span",{"aria-hidden":!0,children:"•"}),d.jsxs("span",{className:"whitespace-nowrap",children:[b," prompts"]})]})]})]}),d.jsxs("div",{className:"space-y-8",children:[w&&d.jsx("article",{className:"space-y-4 rounded-3xl border border-slate-200 bg-white/90 p-6 text-sm text-slate-600 shadow-sm dark:border-slate-800 dark:bg-slate-900 dark:text-slate-300",children:"Loading comparison dataset…"}),C&&!w&&d.jsxs("article",{className:"space-y-3 rounded-3xl border border-rose-200/80 bg-rose-50/80 p-6 text-sm text-rose-700 shadow-sm dark:border-rose-700/60 dark:bg-rose-900/30 dark:text-rose-200",children:[d.jsx("p",{className:"font-semibold",children:"We couldn’t load the CSV file."}),d.jsx("p",{children:a})]}),!w&&!C&&!A&&d.jsx("article",{className:"space-y-3 rounded-3xl border border-slate-200 bg-white/90 p-6 text-sm text-slate-600 shadow-sm dark:border-slate-800 dark:bg-slate-900 dark:text-slate-300",children:"No comparisons are available yet. Check back soon."}),!w&&!C&&A&&!N&&d.jsxs("article",{className:"space-y-3 rounded-3xl border border-amber-200 bg-amber-50 p-6 text-sm text-amber-700 shadow-sm dark:border-amber-600/60 dark:bg-amber-900/30 dark:text-amber-200",children:[d.jsx("p",{className:"font-semibold",children:"No prompts match this category."}),d.jsx("p",{children:"Try selecting a different category to continue exploring the comparison set."})]}),h.map(({prompt:E,fluxUrl:S,dalleUrl:I,category:O},j)=>d.jsxs("article",{className:"space-y-6 rounded-3xl border border-slate-200 bg-white/90 p-6 shadow-sm transition hover:shadow-lg dark:border-slate-800 dark:bg-slate-900",children:[d.jsxs("header",{className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center gap-3 text-xs font-semibold uppercase tracking-wider text-slate-400 dark:text-slate-500",children:[d.jsxs("span",{children:["Prompt ",j+1+(u-1)*So]}),d.jsx("span",{"aria-hidden":!0,children:"•"}),d.jsxs("span",{children:[E.length," characters"]})]}),d.jsx("span",{className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-slate-100 px-3 py-1 text-[0.65rem] font-semibold uppercase tracking-wide text-slate-600 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-200",children:O}),d.jsx("p",{className:"text-sm leading-relaxed text-slate-700 dark:text-slate-200",children:E})]}),d.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[d.jsxs("figure",{className:"space-y-3",children:[d.jsx("div",{className:"overflow-hidden rounded-2xl border border-emerald-500/40 bg-slate-100/60 dark:border-emerald-400/30 dark:bg-slate-800/70",children:d.jsx("a",{href:S,target:"_blank",rel:"noreferrer",children:d.jsx("img",{src:S,alt:`Flux Schnell render for prompt: ${E}`,loading:"lazy",className:"h-full w-full object-cover"})})}),d.jsx("figcaption",{className:"text-xs uppercase tracking-wide text-emerald-600 dark:text-emerald-300",children:"Flux Schnell — GroqCloud (free endpoint)"})]}),d.jsxs("figure",{className:"space-y-3",children:[d.jsx("div",{className:"overflow-hidden rounded-2xl border border-indigo-500/40 bg-slate-100/60 dark:border-indigo-400/30 dark:bg-slate-800/70",children:d.jsx("a",{href:I,target:"_blank",rel:"noreferrer",children:d.jsx("img",{src:I,alt:`DALL·E 3 render for prompt: ${E}`,loading:"lazy",className:"h-full w-full object-cover"})})}),d.jsx("figcaption",{className:"text-xs uppercase tracking-wide text-indigo-600 dark:text-indigo-300",children:"DALL·E 3 — OpenAI (paid usage)"})]})]})]},`${E}-${S}`))]}),d.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 rounded-3xl border border-slate-200 bg-white/90 px-4 py-3 text-sm shadow-sm dark:border-slate-800 dark:bg-slate-900/80",children:[d.jsx("button",{type:"button",onClick:m,disabled:u===1||w||!N,className:"inline-flex items-center gap-2 rounded-full border border-slate-300 px-4 py-2 font-medium text-slate-600 transition enabled:hover:border-brand-500 enabled:hover:bg-brand-500/10 enabled:hover:text-brand-600 disabled:opacity-50 dark:border-slate-700 dark:text-slate-200 dark:enabled:hover:border-brand-400/60 dark:enabled:hover:bg-brand-500/10",children:"← Previous"}),d.jsx("button",{type:"button",onClick:y,disabled:u===f||w||!N,className:"inline-flex items-center gap-2 rounded-full border border-slate-300 px-4 py-2 font-medium text-slate-600 transition enabled:hover:border-brand-500 enabled:hover:bg-brand-500/10 enabled:hover:text-brand-600 disabled:opacity-50 dark:border-slate-700 dark:text-slate-200 dark:enabled:hover:border-brand-400/60 dark:enabled:hover:bg-brand-500/10",children:"Next →"})]})]})]})}function Qp(){const{pathname:t}=gt();return v.useEffect(()=>{window.scrollTo(0,0)},[t]),null}function ex(){return d.jsx(Md,{children:d.jsxs(Ed,{children:[d.jsx(Qp,{}),d.jsx(Gd,{children:d.jsxs(rd,{children:[d.jsx(be,{path:"/",element:d.jsx(ec,{})}),d.jsx(be,{path:"/bank-holiday-planner",element:d.jsx(k1,{})}),d.jsx(be,{path:"/second-hand-food-market",element:d.jsx(Bp,{})}),d.jsx(be,{path:"/game-of-life-lab",element:d.jsx(Q1,{})}),d.jsx(be,{path:"/dalle-vs-flux",element:d.jsx(Jp,{})}),$t.map(t=>t.id==="allergyfinder"?d.jsxs(v.Fragment,{children:[d.jsx(be,{path:t.path,element:d.jsx(Ke,{experience:t,navigation:d.jsx(Gi,{}),children:d.jsx(Fi,{experience:t})})}),d.jsx(be,{path:`${t.path}/cookies`,element:d.jsx(Ke,{experience:t,navigation:d.jsx(Gi,{}),children:d.jsx(Bh,{})})})]},t.id):t.id==="objectmaker"?d.jsxs(v.Fragment,{children:[d.jsx(be,{path:t.path,element:d.jsx(Ke,{experience:t,navigation:d.jsx(qi,{}),children:d.jsx(m1,{})})}),d.jsx(be,{path:`${t.path}/zoo`,element:d.jsx(Ke,{experience:t,navigation:d.jsx(qi,{}),children:d.jsx(v1,{})})})]},t.id):t.id==="imagegen"?d.jsxs(v.Fragment,{children:[d.jsx(be,{path:t.path,element:d.jsx(Ke,{experience:t,navigation:d.jsx(lo,{}),children:d.jsx(Y1,{experience:t})})}),d.jsx(be,{path:`${t.path}/gallery`,element:d.jsx(Ke,{experience:t,navigation:d.jsx(lo,{}),children:d.jsx(q1,{})})})]},t.id):t.id==="svglab"?d.jsx(be,{path:t.path,element:d.jsx(Ke,{experience:t,children:d.jsx(Ep,{experience:t})})},t.id):t.id==="flagfoundry"?d.jsx(be,{path:t.path,element:d.jsx(Ke,{experience:t,children:d.jsx(Lp,{experience:t})})},t.id):t.id==="pizzamaker"?d.jsx(be,{path:t.path,element:d.jsx(Ke,{experience:t,children:d.jsx(op,{experience:t})})},t.id):t.id==="carmaker"?d.jsx(be,{path:t.path,element:d.jsx(Ke,{experience:t,children:d.jsx(xp,{experience:t})})},t.id):t.id==="newsanalyzer"?d.jsx(be,{path:t.path,element:d.jsx(F1,{})},t.id):t.id==="sixdegrees"?d.jsx(be,{path:t.path,element:d.jsx(V1,{})},t.id):t.id==="pongshowdown"?d.jsx(be,{path:t.path,element:d.jsx(Xp,{})},t.id):d.jsx(be,{path:t.path,element:d.jsx(Ke,{experience:t,children:d.jsx(Fi,{experience:t})})},t.id)),d.jsx(be,{path:"/profile",element:d.jsx(Zh,{})}),d.jsx(be,{path:"/about",element:d.jsx(rc,{})}),d.jsx(be,{path:"*",element:d.jsx(ed,{to:"/",replace:!0})})]})})]})})}sl.createRoot(document.getElementById("root")).render(d.jsx(ll.StrictMode,{children:d.jsx(ex,{})}));
