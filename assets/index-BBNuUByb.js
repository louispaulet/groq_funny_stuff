const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/STLViewer-BQJe-Naq.js","assets/stl-Ddf9yeEV.js","assets/react-z8DcLR_X.js","assets/markdown-BoWTVge5.js"])))=>i.map(i=>d[i]);
import{a as i,j as r,F as Ht,b as Cr,c as Er,d as Rr,e as Ar,f as Or,g as Pr,h as Tr,i as Lr,k as zt,l as Vt,m as $r,n as _r,R as Fr}from"./react-z8DcLR_X.js";import{_ as Mr}from"./stl-Ddf9yeEV.js";import{H as I,j as Wt,t as qt,p as Gt,a as Dr,b as Kt,m as Br,d as Yt,c as Ur}from"./markdown-BoWTVge5.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}})();/**
 * react-router v7.9.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var xt="popstate";function Ir(e={}){function t(n,o){let{pathname:l="/",search:d="",hash:c=""}=ne(n.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),Ge("",{pathname:l,search:d,hash:c},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function s(n,o){let l=n.document.querySelector("base"),d="";if(l&&l.getAttribute("href")){let c=n.location.href,u=c.indexOf("#");d=u===-1?c:c.slice(0,u)}return d+"#"+(typeof o=="string"?o:pe(o))}function a(n,o){z(n.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return Hr(t,s,a,e)}function A(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function z(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Jr(){return Math.random().toString(36).substring(2,10)}function bt(e,t){return{usr:e.state,key:e.key,idx:t}}function Ge(e,t,s=null,a){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?ne(t):t,state:s,key:t&&t.key||a||Jr()}}function pe({pathname:e="/",search:t="",hash:s=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function ne(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substring(s),e=e.substring(0,s));let a=e.indexOf("?");a>=0&&(t.search=e.substring(a),e=e.substring(0,a)),e&&(t.pathname=e)}return t}function Hr(e,t,s,a={}){let{window:n=document.defaultView,v5Compat:o=!1}=a,l=n.history,d="POP",c=null,u=m();u==null&&(u=0,l.replaceState({...l.state,idx:u},""));function m(){return(l.state||{idx:null}).idx}function h(){d="POP";let x=m(),y=x==null?null:x-u;u=x,c&&c({action:d,location:v.location,delta:y})}function f(x,y){d="PUSH";let b=Ge(v.location,x,y);s&&s(b,x),u=m()+1;let N=bt(b,u),E=v.createHref(b);try{l.pushState(N,"",E)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;n.location.assign(E)}o&&c&&c({action:d,location:v.location,delta:1})}function g(x,y){d="REPLACE";let b=Ge(v.location,x,y);s&&s(b,x),u=m();let N=bt(b,u),E=v.createHref(b);l.replaceState(N,"",E),o&&c&&c({action:d,location:v.location,delta:0})}function p(x){return zr(x)}let v={get action(){return d},get location(){return e(n,l)},listen(x){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(xt,h),c=x,()=>{n.removeEventListener(xt,h),c=null}},createHref(x){return t(n,x)},createURL:p,encodeLocation(x){let y=p(x);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:g,go(x){return l.go(x)}};return v}function zr(e,t=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),A(s,"No window.location.(origin|href) available to create URL");let a=typeof e=="string"?e:pe(e);return a=a.replace(/ $/,"%20"),!t&&a.startsWith("//")&&(a=s+a),new URL(a,s)}function Xt(e,t,s="/"){return Vr(e,t,s,!1)}function Vr(e,t,s,a){let n=typeof t=="string"?ne(t):t,o=Z(n.pathname||"/",s);if(o==null)return null;let l=Zt(e);Wr(l);let d=null;for(let c=0;d==null&&c<l.length;++c){let u=ss(o);d=ts(l[c],u,a)}return d}function Zt(e,t=[],s=[],a="",n=!1){let o=(l,d,c=n,u)=>{let m={relativePath:u===void 0?l.path||"":u,caseSensitive:l.caseSensitive===!0,childrenIndex:d,route:l};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(a)&&c)return;A(m.relativePath.startsWith(a),`Absolute route path "${m.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(a.length)}let h=Y([a,m.relativePath]),f=s.concat(m);l.children&&l.children.length>0&&(A(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),Zt(l.children,t,f,h,c)),!(l.path==null&&!l.index)&&t.push({path:h,score:Qr(h,l.index),routesMeta:f})};return e.forEach((l,d)=>{if(l.path===""||!l.path?.includes("?"))o(l,d);else for(let c of Qt(l.path))o(l,d,!0,c)}),t}function Qt(e){let t=e.split("/");if(t.length===0)return[];let[s,...a]=t,n=s.endsWith("?"),o=s.replace(/\?$/,"");if(a.length===0)return n?[o,""]:[o];let l=Qt(a.join("/")),d=[];return d.push(...l.map(c=>c===""?o:[o,c].join("/"))),n&&d.push(...l),d.map(c=>e.startsWith("/")&&c===""?"/":c)}function Wr(e){e.sort((t,s)=>t.score!==s.score?s.score-t.score:es(t.routesMeta.map(a=>a.childrenIndex),s.routesMeta.map(a=>a.childrenIndex)))}var qr=/^:[\w-]+$/,Gr=3,Kr=2,Yr=1,Xr=10,Zr=-2,gt=e=>e==="*";function Qr(e,t){let s=e.split("/"),a=s.length;return s.some(gt)&&(a+=Zr),t&&(a+=Kr),s.filter(n=>!gt(n)).reduce((n,o)=>n+(qr.test(o)?Gr:o===""?Yr:Xr),a)}function es(e,t){return e.length===t.length&&e.slice(0,-1).every((a,n)=>a===t[n])?e[e.length-1]-t[t.length-1]:0}function ts(e,t,s=!1){let{routesMeta:a}=e,n={},o="/",l=[];for(let d=0;d<a.length;++d){let c=a[d],u=d===a.length-1,m=o==="/"?t:t.slice(o.length)||"/",h=Ce({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},m),f=c.route;if(!h&&u&&s&&!a[a.length-1].route.index&&(h=Ce({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},m)),!h)return null;Object.assign(n,h.params),l.push({params:n,pathname:Y([o,h.pathname]),pathnameBase:ls(Y([o,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(o=Y([o,h.pathnameBase]))}return l}function Ce(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,a]=rs(e.path,e.caseSensitive,e.end),n=t.match(s);if(!n)return null;let o=n[0],l=o.replace(/(.)\/+$/,"$1"),d=n.slice(1);return{params:a.reduce((u,{paramName:m,isOptional:h},f)=>{if(m==="*"){let p=d[f]||"";l=o.slice(0,o.length-p.length).replace(/(.)\/+$/,"$1")}const g=d[f];return h&&!g?u[m]=void 0:u[m]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:l,pattern:e}}function rs(e,t=!1,s=!0){z(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let a=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,d,c)=>(a.push({paramName:d,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(a.push({paramName:"*"}),n+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?n+="\\/*$":e!==""&&e!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),a]}function ss(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return z(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Z(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,a=e.charAt(s);return a&&a!=="/"?null:e.slice(s)||"/"}function as(e,t="/"){let{pathname:s,search:a="",hash:n=""}=typeof e=="string"?ne(e):e;return{pathname:s?s.startsWith("/")?s:ns(s,t):t,search:is(a),hash:ds(n)}}function ns(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(n=>{n===".."?s.length>1&&s.pop():n!=="."&&s.push(n)}),s.length>1?s.join("/"):"/"}function _e(e,t,s,a){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function os(e){return e.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function Ze(e){let t=os(e);return t.map((s,a)=>a===t.length-1?s.pathname:s.pathnameBase)}function Qe(e,t,s,a=!1){let n;typeof e=="string"?n=ne(e):(n={...e},A(!n.pathname||!n.pathname.includes("?"),_e("?","pathname","search",n)),A(!n.pathname||!n.pathname.includes("#"),_e("#","pathname","hash",n)),A(!n.search||!n.search.includes("#"),_e("#","search","hash",n)));let o=e===""||n.pathname==="",l=o?"/":n.pathname,d;if(l==null)d=s;else{let h=t.length-1;if(!a&&l.startsWith("..")){let f=l.split("/");for(;f[0]==="..";)f.shift(),h-=1;n.pathname=f.join("/")}d=h>=0?t[h]:"/"}let c=as(n,d),u=l&&l!=="/"&&l.endsWith("/"),m=(o||l===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(u||m)&&(c.pathname+="/"),c}var Y=e=>e.join("/").replace(/\/\/+/g,"/"),ls=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),is=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,ds=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function cs(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var er=["POST","PUT","PATCH","DELETE"];new Set(er);var us=["GET",...er];new Set(us);var de=i.createContext(null);de.displayName="DataRouter";var Re=i.createContext(null);Re.displayName="DataRouterState";i.createContext(!1);var tr=i.createContext({isTransitioning:!1});tr.displayName="ViewTransition";var ms=i.createContext(new Map);ms.displayName="Fetchers";var hs=i.createContext(null);hs.displayName="Await";var V=i.createContext(null);V.displayName="Navigation";var ge=i.createContext(null);ge.displayName="Location";var G=i.createContext({outlet:null,matches:[],isDataRoute:!1});G.displayName="Route";var et=i.createContext(null);et.displayName="RouteError";function fs(e,{relative:t}={}){A(ce(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:a}=i.useContext(V),{hash:n,pathname:o,search:l}=ye(e,{relative:t}),d=o;return s!=="/"&&(d=o==="/"?s:Y([s,o])),a.createHref({pathname:d,search:l,hash:n})}function ce(){return i.useContext(ge)!=null}function re(){return A(ce(),"useLocation() may be used only in the context of a <Router> component."),i.useContext(ge).location}var rr="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function sr(e){i.useContext(V).static||i.useLayoutEffect(e)}function ar(){let{isDataRoute:e}=i.useContext(G);return e?Es():ps()}function ps(){A(ce(),"useNavigate() may be used only in the context of a <Router> component.");let e=i.useContext(de),{basename:t,navigator:s}=i.useContext(V),{matches:a}=i.useContext(G),{pathname:n}=re(),o=JSON.stringify(Ze(a)),l=i.useRef(!1);return sr(()=>{l.current=!0}),i.useCallback((c,u={})=>{if(z(l.current,rr),!l.current)return;if(typeof c=="number"){s.go(c);return}let m=Qe(c,JSON.parse(o),n,u.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:Y([t,m.pathname])),(u.replace?s.replace:s.push)(m,u.state,u)},[t,s,o,n,e])}i.createContext(null);function ye(e,{relative:t}={}){let{matches:s}=i.useContext(G),{pathname:a}=re(),n=JSON.stringify(Ze(s));return i.useMemo(()=>Qe(e,JSON.parse(n),a,t==="path"),[e,n,a,t])}function xs(e,t){return nr(e,t)}function nr(e,t,s,a,n){A(ce(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=i.useContext(V),{matches:l}=i.useContext(G),d=l[l.length-1],c=d?d.params:{},u=d?d.pathname:"/",m=d?d.pathnameBase:"/",h=d&&d.route;{let b=h&&h.path||"";or(u,!h||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let f=re(),g;if(t){let b=typeof t=="string"?ne(t):t;A(m==="/"||b.pathname?.startsWith(m),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${b.pathname}" was given in the \`location\` prop.`),g=b}else g=f;let p=g.pathname||"/",v=p;if(m!=="/"){let b=m.replace(/^\//,"").split("/");v="/"+p.replace(/^\//,"").split("/").slice(b.length).join("/")}let x=Xt(e,{pathname:v});z(h||x!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),z(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=ws(x&&x.map(b=>Object.assign({},b,{params:Object.assign({},c,b.params),pathname:Y([m,o.encodeLocation?o.encodeLocation(b.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?m:Y([m,o.encodeLocation?o.encodeLocation(b.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathnameBase])})),l,s,a,n);return t&&y?i.createElement(ge.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},y):y}function bs(){let e=Cs(),t=cs(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:a},o={padding:"2px 4px",backgroundColor:a},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=i.createElement(i.Fragment,null,i.createElement("p",null,"💿 Hey developer 👋"),i.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",i.createElement("code",{style:o},"ErrorBoundary")," or"," ",i.createElement("code",{style:o},"errorElement")," prop on your route.")),i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),s?i.createElement("pre",{style:n},s):null,l)}var gs=i.createElement(bs,null),ys=class extends i.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?i.createElement(G.Provider,{value:this.props.routeContext},i.createElement(et.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function vs({routeContext:e,match:t,children:s}){let a=i.useContext(de);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),i.createElement(G.Provider,{value:e},s)}function ws(e,t=[],s=null,a=null,n=null){if(e==null){if(!s)return null;if(s.errors)e=s.matches;else if(t.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let o=e,l=s?.errors;if(l!=null){let u=o.findIndex(m=>m.route.id&&l?.[m.route.id]!==void 0);A(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,u+1))}let d=!1,c=-1;if(s)for(let u=0;u<o.length;u++){let m=o[u];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(c=u),m.route.id){let{loaderData:h,errors:f}=s,g=m.route.loader&&!h.hasOwnProperty(m.route.id)&&(!f||f[m.route.id]===void 0);if(m.route.lazy||g){d=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,m,h)=>{let f,g=!1,p=null,v=null;s&&(f=l&&m.route.id?l[m.route.id]:void 0,p=m.route.errorElement||gs,d&&(c<0&&h===0?(or("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,v=null):c===h&&(g=!0,v=m.route.hydrateFallbackElement||null)));let x=t.concat(o.slice(0,h+1)),y=()=>{let b;return f?b=p:g?b=v:m.route.Component?b=i.createElement(m.route.Component,null):m.route.element?b=m.route.element:b=u,i.createElement(vs,{match:m,routeContext:{outlet:u,matches:x,isDataRoute:s!=null},children:b})};return s&&(m.route.ErrorBoundary||m.route.errorElement||h===0)?i.createElement(ys,{location:s.location,revalidation:s.revalidation,component:p,error:f,children:y(),routeContext:{outlet:null,matches:x,isDataRoute:!0},unstable_onError:a}):y()},null)}function tt(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ks(e){let t=i.useContext(de);return A(t,tt(e)),t}function js(e){let t=i.useContext(Re);return A(t,tt(e)),t}function Ns(e){let t=i.useContext(G);return A(t,tt(e)),t}function rt(e){let t=Ns(e),s=t.matches[t.matches.length-1];return A(s.route.id,`${e} can only be used on routes that contain a unique "id"`),s.route.id}function Ss(){return rt("useRouteId")}function Cs(){let e=i.useContext(et),t=js("useRouteError"),s=rt("useRouteError");return e!==void 0?e:t.errors?.[s]}function Es(){let{router:e}=ks("useNavigate"),t=rt("useNavigate"),s=i.useRef(!1);return sr(()=>{s.current=!0}),i.useCallback(async(n,o={})=>{z(s.current,rr),s.current&&(typeof n=="number"?e.navigate(n):await e.navigate(n,{fromRouteId:t,...o}))},[e,t])}var yt={};function or(e,t,s){!t&&!yt[e]&&(yt[e]=!0,z(!1,s))}i.memo(Rs);function Rs({routes:e,future:t,state:s,unstable_onError:a}){return nr(e,void 0,s,a,t)}function As({to:e,replace:t,state:s,relative:a}){A(ce(),"<Navigate> may be used only in the context of a <Router> component.");let{static:n}=i.useContext(V);z(!n,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=i.useContext(G),{pathname:l}=re(),d=ar(),c=Qe(e,Ze(o),l,a==="path"),u=JSON.stringify(c);return i.useEffect(()=>{d(JSON.parse(u),{replace:t,state:s,relative:a})},[d,u,a,t,s]),null}function q(e){A(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Os({basename:e="/",children:t=null,location:s,navigationType:a="POP",navigator:n,static:o=!1}){A(!ce(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),d=i.useMemo(()=>({basename:l,navigator:n,static:o,future:{}}),[l,n,o]);typeof s=="string"&&(s=ne(s));let{pathname:c="/",search:u="",hash:m="",state:h=null,key:f="default"}=s,g=i.useMemo(()=>{let p=Z(c,l);return p==null?null:{location:{pathname:p,search:u,hash:m,state:h,key:f},navigationType:a}},[l,c,u,m,h,f,a]);return z(g!=null,`<Router basename="${l}"> is not able to match the URL "${c}${u}${m}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:i.createElement(V.Provider,{value:d},i.createElement(ge.Provider,{children:t,value:g}))}function Ps({children:e,location:t}){return xs(Ke(e),t)}function Ke(e,t=[]){let s=[];return i.Children.forEach(e,(a,n)=>{if(!i.isValidElement(a))return;let o=[...t,n];if(a.type===i.Fragment){s.push.apply(s,Ke(a.props.children,o));return}A(a.type===q,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),A(!a.props.index||!a.props.children,"An index route cannot have child routes.");let l={id:a.props.id||o.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(l.children=Ke(a.props.children,o)),s.push(l)}),s}var Ne="get",Se="application/x-www-form-urlencoded";function Ae(e){return e!=null&&typeof e.tagName=="string"}function Ts(e){return Ae(e)&&e.tagName.toLowerCase()==="button"}function Ls(e){return Ae(e)&&e.tagName.toLowerCase()==="form"}function $s(e){return Ae(e)&&e.tagName.toLowerCase()==="input"}function _s(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Fs(e,t){return e.button===0&&(!t||t==="_self")&&!_s(e)}var we=null;function Ms(){if(we===null)try{new FormData(document.createElement("form"),0),we=!1}catch{we=!0}return we}var Ds=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Fe(e){return e!=null&&!Ds.has(e)?(z(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Se}"`),null):e}function Bs(e,t){let s,a,n,o,l;if(Ls(e)){let d=e.getAttribute("action");a=d?Z(d,t):null,s=e.getAttribute("method")||Ne,n=Fe(e.getAttribute("enctype"))||Se,o=new FormData(e)}else if(Ts(e)||$s(e)&&(e.type==="submit"||e.type==="image")){let d=e.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||d.getAttribute("action");if(a=c?Z(c,t):null,s=e.getAttribute("formmethod")||d.getAttribute("method")||Ne,n=Fe(e.getAttribute("formenctype"))||Fe(d.getAttribute("enctype"))||Se,o=new FormData(d,e),!Ms()){let{name:u,type:m,value:h}=e;if(m==="image"){let f=u?`${u}.`:"";o.append(`${f}x`,"0"),o.append(`${f}y`,"0")}else u&&o.append(u,h)}}else{if(Ae(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=Ne,a=null,n=Se,l=e}return o&&n==="text/plain"&&(l=o,o=void 0),{action:a,method:s.toLowerCase(),encType:n,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function st(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Us(e,t,s){let a=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return a.pathname==="/"?a.pathname=`_root.${s}`:t&&Z(a.pathname,t)==="/"?a.pathname=`${t.replace(/\/$/,"")}/_root.${s}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${s}`,a}async function Is(e,t){if(e.id in t)return t[e.id];try{let s=await import(e.module);return t[e.id]=s,s}catch(s){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Js(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Hs(e,t,s){let a=await Promise.all(e.map(async n=>{let o=t.routes[n.route.id];if(o){let l=await Is(o,s);return l.links?l.links():[]}return[]}));return qs(a.flat(1).filter(Js).filter(n=>n.rel==="stylesheet"||n.rel==="preload").map(n=>n.rel==="stylesheet"?{...n,rel:"prefetch",as:"style"}:{...n,rel:"prefetch"}))}function vt(e,t,s,a,n,o){let l=(c,u)=>s[u]?c.route.id!==s[u].route.id:!0,d=(c,u)=>s[u].pathname!==c.pathname||s[u].route.path?.endsWith("*")&&s[u].params["*"]!==c.params["*"];return o==="assets"?t.filter((c,u)=>l(c,u)||d(c,u)):o==="data"?t.filter((c,u)=>{let m=a.routes[c.route.id];if(!m||!m.hasLoader)return!1;if(l(c,u)||d(c,u))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(n.pathname+n.search+n.hash,window.origin),currentParams:s[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function zs(e,t,{includeHydrateFallback:s}={}){return Vs(e.map(a=>{let n=t.routes[a.route.id];if(!n)return[];let o=[n.module];return n.clientActionModule&&(o=o.concat(n.clientActionModule)),n.clientLoaderModule&&(o=o.concat(n.clientLoaderModule)),s&&n.hydrateFallbackModule&&(o=o.concat(n.hydrateFallbackModule)),n.imports&&(o=o.concat(n.imports)),o}).flat(1))}function Vs(e){return[...new Set(e)]}function Ws(e){let t={},s=Object.keys(e).sort();for(let a of s)t[a]=e[a];return t}function qs(e,t){let s=new Set;return new Set(t),e.reduce((a,n)=>{let o=JSON.stringify(Ws(n));return s.has(o)||(s.add(o),a.push({key:o,link:n})),a},[])}function lr(){let e=i.useContext(de);return st(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Gs(){let e=i.useContext(Re);return st(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var at=i.createContext(void 0);at.displayName="FrameworkContext";function ir(){let e=i.useContext(at);return st(e,"You must render this element inside a <HydratedRouter> element"),e}function Ks(e,t){let s=i.useContext(at),[a,n]=i.useState(!1),[o,l]=i.useState(!1),{onFocus:d,onBlur:c,onMouseEnter:u,onMouseLeave:m,onTouchStart:h}=t,f=i.useRef(null);i.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let v=y=>{y.forEach(b=>{l(b.isIntersecting)})},x=new IntersectionObserver(v,{threshold:.5});return f.current&&x.observe(f.current),()=>{x.disconnect()}}},[e]),i.useEffect(()=>{if(a){let v=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(v)}}},[a]);let g=()=>{n(!0)},p=()=>{n(!1),l(!1)};return s?e!=="intent"?[o,f,{}]:[o,f,{onFocus:me(d,g),onBlur:me(c,p),onMouseEnter:me(u,g),onMouseLeave:me(m,p),onTouchStart:me(h,g)}]:[!1,f,{}]}function me(e,t){return s=>{e&&e(s),s.defaultPrevented||t(s)}}function Ys({page:e,...t}){let{router:s}=lr(),a=i.useMemo(()=>Xt(s.routes,e,s.basename),[s.routes,e,s.basename]);return a?i.createElement(Zs,{page:e,matches:a,...t}):null}function Xs(e){let{manifest:t,routeModules:s}=ir(),[a,n]=i.useState([]);return i.useEffect(()=>{let o=!1;return Hs(e,t,s).then(l=>{o||n(l)}),()=>{o=!0}},[e,t,s]),a}function Zs({page:e,matches:t,...s}){let a=re(),{manifest:n,routeModules:o}=ir(),{basename:l}=lr(),{loaderData:d,matches:c}=Gs(),u=i.useMemo(()=>vt(e,t,c,n,a,"data"),[e,t,c,n,a]),m=i.useMemo(()=>vt(e,t,c,n,a,"assets"),[e,t,c,n,a]),h=i.useMemo(()=>{if(e===a.pathname+a.search+a.hash)return[];let p=new Set,v=!1;if(t.forEach(y=>{let b=n.routes[y.route.id];!b||!b.hasLoader||(!u.some(N=>N.route.id===y.route.id)&&y.route.id in d&&o[y.route.id]?.shouldRevalidate||b.hasClientLoader?v=!0:p.add(y.route.id))}),p.size===0)return[];let x=Us(e,l,"data");return v&&p.size>0&&x.searchParams.set("_routes",t.filter(y=>p.has(y.route.id)).map(y=>y.route.id).join(",")),[x.pathname+x.search]},[l,d,a,n,u,t,e,o]),f=i.useMemo(()=>zs(m,n),[m,n]),g=Xs(m);return i.createElement(i.Fragment,null,h.map(p=>i.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...s})),f.map(p=>i.createElement("link",{key:p,rel:"modulepreload",href:p,...s})),g.map(({key:p,link:v})=>i.createElement("link",{key:p,nonce:s.nonce,...v})))}function Qs(...e){return t=>{e.forEach(s=>{typeof s=="function"?s(t):s!=null&&(s.current=t)})}}var dr=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{dr&&(window.__reactRouterVersion="7.9.3")}catch{}function ea({basename:e,children:t,window:s}){let a=i.useRef();a.current==null&&(a.current=Ir({window:s,v5Compat:!0}));let n=a.current,[o,l]=i.useState({action:n.action,location:n.location}),d=i.useCallback(c=>{i.startTransition(()=>l(c))},[l]);return i.useLayoutEffect(()=>n.listen(d),[n,d]),i.createElement(Os,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:n})}var cr=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ae=i.forwardRef(function({onClick:t,discover:s="render",prefetch:a="none",relative:n,reloadDocument:o,replace:l,state:d,target:c,to:u,preventScrollReset:m,viewTransition:h,...f},g){let{basename:p}=i.useContext(V),v=typeof u=="string"&&cr.test(u),x,y=!1;if(typeof u=="string"&&v&&(x=u,dr))try{let S=new URL(window.location.href),B=u.startsWith("//")?new URL(S.protocol+u):new URL(u),U=Z(B.pathname,p);B.origin===S.origin&&U!=null?u=U+B.search+B.hash:y=!0}catch{z(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let b=fs(u,{relative:n}),[N,E,k]=Ks(a,f),O=sa(u,{replace:l,state:d,target:c,preventScrollReset:m,relative:n,viewTransition:h});function T(S){t&&t(S),S.defaultPrevented||O(S)}let C=i.createElement("a",{...f,...k,href:x||b,onClick:y||o?t:T,ref:Qs(g,E),target:c,"data-discover":!v&&s==="render"?"true":void 0});return N&&!v?i.createElement(i.Fragment,null,C,i.createElement(Ys,{page:b})):C});ae.displayName="Link";var H=i.forwardRef(function({"aria-current":t="page",caseSensitive:s=!1,className:a="",end:n=!1,style:o,to:l,viewTransition:d,children:c,...u},m){let h=ye(l,{relative:u.relative}),f=re(),g=i.useContext(Re),{navigator:p,basename:v}=i.useContext(V),x=g!=null&&ia(h)&&d===!0,y=p.encodeLocation?p.encodeLocation(h).pathname:h.pathname,b=f.pathname,N=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;s||(b=b.toLowerCase(),N=N?N.toLowerCase():null,y=y.toLowerCase()),N&&v&&(N=Z(N,v)||N);const E=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let k=b===y||!n&&b.startsWith(y)&&b.charAt(E)==="/",O=N!=null&&(N===y||!n&&N.startsWith(y)&&N.charAt(y.length)==="/"),T={isActive:k,isPending:O,isTransitioning:x},C=k?t:void 0,S;typeof a=="function"?S=a(T):S=[a,k?"active":null,O?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let B=typeof o=="function"?o(T):o;return i.createElement(ae,{...u,"aria-current":C,className:S,ref:m,style:B,to:l,viewTransition:d},typeof c=="function"?c(T):c)});H.displayName="NavLink";var ta=i.forwardRef(({discover:e="render",fetcherKey:t,navigate:s,reloadDocument:a,replace:n,state:o,method:l=Ne,action:d,onSubmit:c,relative:u,preventScrollReset:m,viewTransition:h,...f},g)=>{let p=oa(),v=la(d,{relative:u}),x=l.toLowerCase()==="get"?"get":"post",y=typeof d=="string"&&cr.test(d),b=N=>{if(c&&c(N),N.defaultPrevented)return;N.preventDefault();let E=N.nativeEvent.submitter,k=E?.getAttribute("formmethod")||l;p(E||N.currentTarget,{fetcherKey:t,method:k,navigate:s,replace:n,state:o,relative:u,preventScrollReset:m,viewTransition:h})};return i.createElement("form",{ref:g,method:x,action:v,onSubmit:a?c:b,...f,"data-discover":!y&&e==="render"?"true":void 0})});ta.displayName="Form";function ra(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ur(e){let t=i.useContext(de);return A(t,ra(e)),t}function sa(e,{target:t,replace:s,state:a,preventScrollReset:n,relative:o,viewTransition:l}={}){let d=ar(),c=re(),u=ye(e,{relative:o});return i.useCallback(m=>{if(Fs(m,t)){m.preventDefault();let h=s!==void 0?s:pe(c)===pe(u);d(e,{replace:h,state:a,preventScrollReset:n,relative:o,viewTransition:l})}},[c,d,u,s,a,t,e,n,o,l])}var aa=0,na=()=>`__${String(++aa)}__`;function oa(){let{router:e}=ur("useSubmit"),{basename:t}=i.useContext(V),s=Ss();return i.useCallback(async(a,n={})=>{let{action:o,method:l,encType:d,formData:c,body:u}=Bs(a,t);if(n.navigate===!1){let m=n.fetcherKey||na();await e.fetch(m,s,n.action||o,{preventScrollReset:n.preventScrollReset,formData:c,body:u,formMethod:n.method||l,formEncType:n.encType||d,flushSync:n.flushSync})}else await e.navigate(n.action||o,{preventScrollReset:n.preventScrollReset,formData:c,body:u,formMethod:n.method||l,formEncType:n.encType||d,replace:n.replace,state:n.state,fromRouteId:s,flushSync:n.flushSync,viewTransition:n.viewTransition})},[e,t,s])}function la(e,{relative:t}={}){let{basename:s}=i.useContext(V),a=i.useContext(G);A(a,"useFormAction must be used inside a RouteContext");let[n]=a.matches.slice(-1),o={...ye(e||".",{relative:t})},l=re();if(e==null){o.search=l.search;let d=new URLSearchParams(o.search),c=d.getAll("index");if(c.some(m=>m==="")){d.delete("index"),c.filter(h=>h).forEach(h=>d.append("index",h));let m=d.toString();o.search=m?`?${m}`:""}}return(!e||e===".")&&n.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(o.pathname=o.pathname==="/"?s:Y([s,o.pathname])),pe(o)}function ia(e,{relative:t}={}){let s=i.useContext(tr);A(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=ur("useViewTransitionState"),n=ye(e,{relative:t});if(!s.isTransitioning)return!1;let o=Z(s.currentLocation.pathname,a)||s.currentLocation.pathname,l=Z(s.nextLocation.pathname,a)||s.nextLocation.pathname;return Ce(n.pathname,l)!=null||Ce(n.pathname,o)!=null}const wt={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var kt={};const Me=typeof import.meta<"u"&&wt?wt:void 0,De=typeof globalThis<"u"&&kt?kt:void 0;function fe(e){if(e){if(Me&&Me[e]!==void 0)return Me[e];if(De&&De[e]!==void 0)return De[e]}}const ke=(fe("VITE_CHAT_BASE_URL")||"https://groq-endpoint.louispaulet13.workers.dev").replace(/\/$/,""),xe=[{id:"allergyfinder",path:"/allergyfinder",name:"AllergyFinder",headline:"OpenFoodFacts Allergy Assistant",description:"Use Groq to explore ingredient lists, highlight allergens, and triage food questions with OpenFoodFacts context.",badge:"Nutrition",heroGradient:"from-emerald-500 to-teal-500",panelAccent:"bg-emerald-100 text-emerald-900 dark:bg-emerald-500/20 dark:text-emerald-200",navAccent:{gradient:"from-emerald-500 to-teal-500",hover:"hover:bg-emerald-500/10 hover:text-emerald-600 hover:border-emerald-400/60 dark:hover:bg-emerald-500/20 dark:hover:text-emerald-200 dark:hover:border-emerald-400/60",focus:"focus-visible:ring-emerald-500/40"},defaultModel:"openai/gpt-oss-20b",modelOptions:["openai/gpt-oss-20b","openai/gpt-oss-120b"],greeting:"Hi! Ask me about allergens in any food and I'll look at OpenFoodFacts.",promptPlaceholder:"Ask about allergens in a recipe or packaged food...",systemPrompt:["You are an allergy assistant that uses OpenFoodFacts data to answer questions about food allergens.","Use the provided context when it is relevant and be transparent about any gaps.","Encourage users to double-check packaging for medical decisions.","When allergy notes from the Allergy Cookie Editor are supplied, treat them as authoritative user-provided context and surface relevant reminders proactively."].join(" "),allowBaseUrlOverride:!1,enableStlViewer:!1,logLabel:"AllergyFinder",defaultBaseUrl:(fe("VITE_ALLERGY_CHAT_BASE_URL")||ke).replace(/\/$/,"")},{id:"objectmaker",path:"/objectmaker",name:"Object Maker",headline:"Design JSON → Create Objects",description:"Handcraft a JSON structure or ask the assistant to propose one, then call the /obj endpoint to instantiate concrete objects. Save results and browse them in the Zoo.",badge:"Builder",heroGradient:"from-yellow-400 to-amber-600",panelAccent:"bg-yellow-100 text-yellow-900 dark:bg-yellow-500/20 dark:text-yellow-200",navAccent:{gradient:"from-yellow-400 to-amber-600",hover:"hover:bg-yellow-500/10 hover:text-amber-600 hover:border-amber-400/60 dark:hover:bg-yellow-500/20 dark:hover:text-yellow-200 dark:hover:border-amber-400/60",focus:"focus-visible:ring-yellow-500/40"},defaultModel:"openai/gpt-oss-20b",modelOptions:["openai/gpt-oss-20b","openai/gpt-oss-120b"],greeting:'Describe an object you want (e.g., pizza, hot sauce, car). I will propose a JSON Schema with type "object" and useful properties.',promptPlaceholder:"Describe the JSON Schema you want…",systemPrompt:["You help design concise JSON Schema definitions (draft-agnostic) for a single object.",'Always return exactly one JSON object that is a JSON Schema with top-level "type":"object" and a "properties" map.','Prefer simple types (string, number, integer, boolean, array, object). Include "items" for arrays. Avoid examples or prose.','Avoid unsupported JSON Schema keywords such as "format", "$ref", or vendor-specific extensions. Express constraints with enums or descriptions instead.',"Do not include markdown fences or backticks. Return only the JSON Schema object."].join(" "),allowBaseUrlOverride:!1,enableStlViewer:!1,logLabel:"Object Maker",defaultBaseUrl:(fe("VITE_OBJECTMAKER_CHAT_BASE_URL")||ke).replace(/\/$/,"")},{id:"stlviewer",path:"/stlviewer",name:"STL Studio",headline:"3D Printing Copilot",description:"Chat about STL files, design tweaks, and 3D printing tips while previewing models inline.",badge:"3D",heroGradient:"from-indigo-500 to-slate-700",panelAccent:"bg-indigo-100 text-indigo-900 dark:bg-indigo-500/20 dark:text-indigo-200",navAccent:{gradient:"from-indigo-500 to-slate-700",hover:"hover:bg-indigo-500/10 hover:text-indigo-400 hover:border-indigo-400/60 dark:hover:bg-indigo-500/20 dark:hover:text-indigo-200 dark:hover:border-indigo-400/60",focus:"focus-visible:ring-indigo-500/40"},defaultModel:"openai/gpt-oss-20b",modelOptions:["openai/gpt-oss-20b","openai/gpt-oss-120b"],greeting:"Hi! Ask me anything about STL models or 3D printing workflows.",promptPlaceholder:"Need help with an STL? Ask about fixes, slicing, or design tweaks...",systemPrompt:["You are a helpful AI assistant who understands STL files and 3D printing workflows.","Provide concise, practical answers and include tips for viewing or tweaking STL content when relevant."].join(" "),allowBaseUrlOverride:!1,enableStlViewer:!0,logLabel:"STL Studio",defaultBaseUrl:(fe("VITE_STL_CHAT_BASE_URL")||ke).replace(/\/$/,"")},{id:"pokedex",path:"/pokedex",name:"Pokedex",headline:"Concise Pokemon Companion",description:"Ask for typings, strengths, weaknesses, and quick lore delivered by a remote Pokedex service.",badge:"Pokemon",heroGradient:"from-rose-500 to-orange-500",panelAccent:"bg-rose-100 text-rose-900 dark:bg-rose-500/20 dark:text-rose-200",navAccent:{gradient:"from-rose-500 to-orange-500",hover:"hover:bg-rose-500/10 hover:text-rose-500 hover:border-rose-400/60 dark:hover:bg-rose-500/20 dark:hover:text-rose-200 dark:hover:border-rose-400/60",focus:"focus-visible:ring-rose-500/40"},defaultModel:"openai/gpt-oss-20b",modelOptions:["openai/gpt-oss-20b","openai/gpt-oss-120b"],greeting:"Hi! Ask me about any Pokemon and I will fetch quick Pokedex facts.",promptPlaceholder:"Example: What are Gengar strengths and weaknesses?",systemPrompt:["You are a remote Pokedex assistant. Answer questions about Pokemon in two or three sentences.","Highlight typings, notable strengths or weaknesses, and other concise Pokedex facts.","If the question falls outside Pokemon, politely redirect the user."].join(" "),allowBaseUrlOverride:!0,enableStlViewer:!1,logLabel:"Pokedex",defaultBaseUrl:(fe("VITE_POKEDEX_CHAT_BASE_URL")||ke).replace(/\/$/,"")}];function da(e){return xe.find(t=>t.id===e)}const mr=i.createContext({theme:"light",setTheme:()=>{}});function ca(){if(typeof window>"u")return"light";try{return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}catch{return"light"}}function ua({children:e}){const[t,s]=i.useState(()=>{try{const n=localStorage.getItem("theme");if(n==="light"||n==="dark")return n}catch{}return ca()});i.useEffect(()=>{try{localStorage.setItem("theme",t)}catch{}const n=document.documentElement;t==="dark"?n.classList.add("dark"):n.classList.remove("dark")},[t]);const a=i.useMemo(()=>({theme:t,setTheme:s}),[t]);return r.jsx(mr.Provider,{value:a,children:e})}function ma(){return i.useContext(mr)}function ha(){const{theme:e,setTheme:t}=ma(),s=e==="dark";return r.jsxs("button",{type:"button",onClick:()=>t(s?"light":"dark"),className:"inline-flex items-center gap-2 rounded-md border border-slate-300 bg-white/80 px-3 py-2 text-sm font-medium text-slate-700 shadow-sm hover:bg-slate-50 dark:border-slate-700 dark:bg-slate-800/70 dark:text-slate-100",title:"Toggle theme",children:[s?r.jsx(Cr,{className:"h-5 w-5"}):r.jsx(Er,{className:"h-5 w-5"}),r.jsx("span",{className:"hidden sm:inline",children:s?"Light mode":"Dark mode"})]})}function jt({isActive:e}){const t="inline-flex items-center rounded-full border px-4 py-2 text-sm font-medium transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-slate-900",s="focus-visible:ring-brand-500/40";return e?`${t} border-transparent bg-brand-600 text-white shadow ${s}`:`${t} border-slate-300 bg-white/70 text-slate-600 hover:border-brand-500/60 hover:bg-brand-500/10 hover:text-brand-600 dark:border-slate-700 dark:bg-slate-900/60 dark:text-slate-300 dark:hover:text-white ${s}`}function fa(e){const t=e?.gradient||"from-brand-500 to-brand-600",s=e?.hover||"hover:bg-brand-500/10 hover:text-brand-600 hover:border-brand-400/60",a=e?.focus||"focus-visible:ring-brand-500/40";return({isActive:n})=>{const o="inline-flex items-center rounded-full border px-4 py-2 text-sm font-medium transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-slate-900";return n?`${o} border-transparent bg-gradient-to-r ${t} text-white shadow ${a}`:`${o} border-slate-300 bg-white/70 text-slate-600 ${s} dark:border-slate-700 dark:bg-slate-900/60 dark:text-slate-300 dark:hover:text-white ${a}`}}function Nt({isActive:e}){return`inline-flex items-center rounded-full border border-slate-300 px-3 py-1 text-xs font-medium text-slate-600 transition hover:border-brand-500 hover:text-brand-600 dark:border-slate-600 dark:text-slate-300 ${e?"bg-brand-600 text-white border-brand-600 shadow-sm":""}`}function pa({isActive:e}){const t="inline-flex h-11 w-11 items-center justify-center rounded-full border text-slate-600 transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500/40 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:text-slate-200 dark:focus-visible:ring-offset-slate-900";return e?`${t} border-brand-500 bg-brand-600 text-white shadow`:`${t} border-slate-300 bg-white/80 hover:border-brand-500/60 hover:bg-brand-500/10 hover:text-brand-600 dark:border-slate-700 dark:bg-slate-800/70`}function xa({children:e}){return r.jsxs("div",{className:"min-h-screen flex flex-col",children:[r.jsx("header",{className:"sticky top-0 z-20 border-b border-slate-200 bg-white/80 backdrop-blur supports-[backdrop-filter]:bg-white/70 dark:border-slate-800 dark:bg-slate-900/70",children:r.jsxs("div",{className:"mx-auto flex max-w-6xl items-center justify-between gap-4 px-4 py-4",children:[r.jsxs(H,{to:"/",className:"flex items-center gap-3",children:[r.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-xl bg-brand-600 text-white text-lg font-semibold",children:"llI"}),r.jsxs("div",{className:"leading-tight",children:[r.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Groq"}),r.jsx("div",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"AllIn Studio"})]})]}),r.jsxs("nav",{className:"hidden items-center gap-2 md:flex",children:[r.jsx(H,{to:"/",className:jt,end:!0,children:"Overview"}),xe.map(t=>r.jsx(H,{to:t.path,className:fa(t.navAccent),children:t.name},t.id)),r.jsx(H,{to:"/about",className:jt,children:"About"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(H,{to:"/profile",className:pa,title:"Profile options",children:[r.jsx(Ht,{className:"h-5 w-5"}),r.jsx("span",{className:"sr-only",children:"Profile options"})]}),r.jsx(ha,{})]})]})}),r.jsx("main",{className:"mx-auto w-full max-w-6xl flex-1 px-4 py-8",children:e}),r.jsx("footer",{className:"mt-auto border-t border-slate-200 bg-white/80 py-6 text-sm text-slate-600 backdrop-blur supports-[backdrop-filter]:bg-white/70 dark:border-slate-800 dark:bg-slate-900/70 dark:text-slate-300",children:r.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-2 px-4 text-center sm:flex-row sm:items-center sm:justify-between sm:text-left",children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-x-3 gap-y-2 sm:justify-start",children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-x-2 gap-y-1 sm:justify-start",children:[r.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:"Groq AllIn Studio"}),r.jsx("span",{className:"text-xs uppercase tracking-wide text-slate-400 dark:text-slate-500",children:"Unified Playground"})]}),r.jsx(H,{to:"/",className:Nt,end:!0,children:"Overview"}),r.jsx(H,{to:"/about",className:Nt,children:"About"})]}),r.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Fast chats powered by Groq’s API · Built with React, Vite, and Tailwind CSS"})]})})]})}const ba={allergyfinder:r.jsxs(r.Fragment,{children:[r.jsx("p",{children:"AllergyFinder taps into Open Food Facts so it can examine ingredient panels in context. Bring your saved allergen profile into the conversation and the assistant highlights risky ingredients, suggests safe alternatives, and drafts grocery lists that respect your preferences. Transparency comes first: responses call out when product data is missing or when you should double-check real-world packaging."}),r.jsx("p",{children:"Use it for meal planning, quick label triage, or inspiration when you are cooking for friends with different dietary needs. Because it runs on Groq-accelerated LLMs, you get near-instant summaries even for lengthy ingredient lists."})]}),objectmaker:r.jsxs(r.Fragment,{children:[r.jsxs("p",{children:["Object Maker is our playground for structured creativity. Start with a conversational brief and the assistant drafts JSON schemas that describe imaginative artifacts—anything from a pizza, to a track-ready car, to a whimsical ice cream flight. Once the schema looks right, you can call the",r.jsx("code",{className:"rounded bg-slate-900/80 px-1 py-0.5 text-[0.7rem] text-white",children:"/obj"})," endpoint to spin up dozens of variants that adhere to the structure. The workflow is grounded in Groq hosted",r.jsx("span",{className:"font-medium",children:" openai/gpt-oss-20b"})," and ",r.jsx("span",{className:"font-medium",children:"openai/gpt-oss-120b"}),"models, keeping generation fast while your schema evolves."]}),r.jsx("p",{children:"Every session also curates a “Zoo” of finished creations so you can revisit, remix, and compare outputs. The goal is to explore how reliable JSON scaffolding unlocks downstream tooling: the tighter the schema, the more adventurous the generated objects. Image generation hooks are on the roadmap, but today is all about perfecting the structured prompt."})]}),stlviewer:r.jsxs(r.Fragment,{children:[r.jsx("p",{children:"STL Studio keeps the original 3D printing experiment alive. The assistant can draft STL snippets, explain mesh edits, and, thanks to the embedded viewer, render models directly inside the chat transcript. Share a design tweak, paste an STL file, and see the preview update without leaving the conversation."}),r.jsx("p",{children:"It is ideal for rapid iteration on printable parts, offering slicing tips, material suggestions, and context-aware troubleshooting. Whether you are validating overhangs or collaborating on a new gadget, the mix of text guidance and inline visuals keeps the feedback loop tight."})]}),pokedex:r.jsxs(r.Fragment,{children:[r.jsx("p",{children:"The Pokédex workspace is a focused encyclopedia for trainers. Ask about any Pokémon and you will get typings, strengths, weaknesses, and a bite-sized lore blurb sourced from our remote service. It is tuned to stay in-universe: off-topic questions politely steer you back to the Pokédex."}),r.jsx("p",{children:"Combine it with team-building sessions or quick reminders before a battle. Because the base URL is configurable, you can point the workspace at experimental datasets or community-maintained entries while keeping the same interface."})]})};function ga(){return r.jsxs("div",{className:"space-y-12",children:[r.jsxs("section",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-brand-600 to-indigo-700 px-8 py-12 text-white shadow-xl",children:[r.jsxs("div",{className:"max-w-3xl space-y-4",children:[r.jsx("p",{className:"text-sm uppercase tracking-[0.3em] text-white/80",children:"Groq Playground"}),r.jsx("h1",{className:"text-3xl font-semibold sm:text-4xl",children:"All experiences under one roof."}),r.jsx("p",{className:"text-base text-white/90",children:"Explore specialized assistants for nutrition, 3D printing, and Pokemon knowledge with a unified design and faster workflow."}),r.jsx("div",{className:"flex flex-wrap gap-3 pt-2",children:xe.map(e=>r.jsx(ae,{to:e.path,className:"inline-flex items-center rounded-full bg-white/90 px-4 py-2 text-sm font-medium text-slate-900 transition hover:bg-white",children:e.name},e.id))})]}),r.jsx("div",{className:"absolute -right-24 -top-24 h-56 w-56 rounded-full bg-white/10 blur-3xl","aria-hidden":!0})]}),r.jsxs("section",{className:"space-y-10",children:[r.jsxs("header",{className:"space-y-2",children:[r.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Explore the workspaces"}),r.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Each experience shares the same chat shell yet brings its own data sources, inline tools, and best practices. Dive in to see how focused assistants feel when they are tuned for a specific workflow."})]}),r.jsx("div",{className:"space-y-8",children:xe.map(e=>{const t=ba[e.id]??r.jsx("p",{children:e.description});return r.jsxs("article",{className:"space-y-4 rounded-3xl border border-slate-200 bg-white p-8 shadow-sm transition hover:shadow-lg dark:border-slate-800 dark:bg-slate-900",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[r.jsx("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold ${e.panelAccent}`,children:e.badge}),r.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:e.name}),r.jsxs(ae,{to:e.path,className:"inline-flex items-center gap-2 rounded-full border border-slate-300 px-3 py-1 text-sm font-medium text-slate-700 transition hover:border-brand-500 hover:text-brand-600 dark:border-slate-700 dark:text-slate-200",children:["Enter workspace",r.jsx("span",{"aria-hidden":!0,children:"→"})]})]}),r.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:e.headline}),r.jsx("div",{className:"space-y-3 text-sm text-slate-600 dark:text-slate-300",children:t}),r.jsx("div",{className:"text-xs uppercase tracking-wider text-slate-400 dark:text-slate-500",children:e.modelOptions.join(" • ")})]},e.id)})})]})]})}function he({experience:e,children:t,navigation:s}){return e?r.jsxs("div",{className:"space-y-8",children:[r.jsxs("section",{className:`relative overflow-hidden rounded-3xl bg-gradient-to-br px-8 py-10 text-white shadow-lg ${e.heroGradient}`,children:[r.jsxs("div",{className:"max-w-3xl space-y-4",children:[r.jsx("span",{className:"inline-flex items-center rounded-full bg-black/20 px-3 py-1 text-xs uppercase tracking-wide",children:e.badge}),r.jsx("h1",{className:"text-3xl font-semibold sm:text-4xl",children:e.name}),r.jsx("p",{className:"text-base text-white/90",children:e.headline}),r.jsx("p",{className:"text-sm text-white/80",children:e.description})]}),r.jsx("div",{className:"absolute -right-20 bottom-0 top-0 w-64 bg-white/10 blur-3xl","aria-hidden":!0})]}),s?r.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white/80 px-4 py-3 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:s}):null,r.jsx("div",{children:t})]}):r.jsx("div",{className:"rounded-2xl border border-red-200 bg-red-50 p-6 text-red-700 dark:border-red-800 dark:bg-red-900/40 dark:text-red-200",children:"Experience not found."})}function ya(){return r.jsxs("div",{className:"space-y-12",children:[r.jsx("section",{className:"rounded-3xl bg-gradient-to-br from-slate-900 via-brand-700 to-indigo-600 px-8 py-12 text-white shadow-xl",children:r.jsxs("div",{className:"max-w-3xl space-y-4",children:[r.jsx("p",{className:"text-sm uppercase tracking-[0.3em] text-white/70",children:"About Groq AllIn Studio"}),r.jsx("h1",{className:"text-3xl font-semibold sm:text-4xl",children:"Crafting a playful control room for every Groq chat 🤝"}),r.jsx("p",{className:"text-base text-white/90",children:"Groq AllIn Studio bundles our favorite assistants into one friendly workspace so you can hop between allergy lookups, STL previews, and Pokédex lore without losing your flow."}),r.jsx(ae,{to:"/",className:"inline-flex items-center rounded-full bg-white/90 px-4 py-2 text-sm font-medium text-slate-900 transition hover:bg-white",children:"Back to Overview"})]})}),r.jsxs("section",{className:"grid gap-8 md:grid-cols-2",children:[r.jsxs("article",{className:"space-y-4 rounded-2xl border border-slate-200 bg-white/80 p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900/70",children:[r.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Why a studio? 🚀"}),r.jsx("p",{className:"text-sm leading-relaxed text-slate-600 dark:text-slate-400",children:"Each demo started as a standalone sandbox. Merging them into Groq AllIn Studio lets us reuse the snappy chat shell, keep credentials in one place, and move faster when we tweak prompts or models."}),r.jsx("p",{className:"text-sm leading-relaxed text-slate-600 dark:text-slate-400",children:"You still have access to the individual projects for deep debugging, but the studio is our north star for daily work and deployment."})]}),r.jsxs("article",{className:"space-y-4 rounded-2xl border border-slate-200 bg-white/80 p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900/70",children:[r.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Team workflow 🛠️"}),r.jsx("p",{className:"text-sm leading-relaxed text-slate-600 dark:text-slate-400",children:"With a single Vite workspace, we share design tokens, testing helpers, and chat plumbing. Shipping updates means touching one code path, one deployment pipeline, and one set of docs."}),r.jsx("p",{className:"text-sm leading-relaxed text-slate-600 dark:text-slate-400",children:"Need to debug? Drop to the legacy folders, then bubble the fix back up. Need to demo? Run the studio and the experience is ready in seconds ⚡️."})]})]}),r.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900/70",children:[r.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Design vibes 🎨"}),r.jsx("p",{className:"mt-3 text-sm leading-relaxed text-slate-600 dark:text-slate-400",children:"We wanted the studio to feel like a familiar cockpit with a little wink. That means cozy gradients, rounded surfaces, and intentional whitespace so conversations never feel cramped."}),r.jsxs("ul",{className:"mt-4 space-y-2 text-sm text-slate-600 dark:text-slate-400",children:[r.jsx("li",{children:"🌈 Shared color tokens keep AllergyFinder, STL Viewer, and the Pokédex distinct without jarring swaps."}),r.jsx("li",{children:"🧭 Navigation hugs the top so you can jump tabs muscle-memory style, no matter the screen size."}),r.jsx("li",{children:'😄 The logo spells "llI" because that trio of lines makes us grin every time—playful branding on a serious engine.'}),r.jsx("li",{children:"⚡️ Micro-interactions (hover lifts, quick fades) help you sense responsiveness even before the model replies."})]}),r.jsx("p",{className:"mt-4 text-sm leading-relaxed text-slate-600 dark:text-slate-400",children:"The goal: helpful, fast, and just whimsical enough that you remember which tab you were in when inspiration hit ✨."})]})]})}function va({conversations:e,activeId:t,onSelect:s,onNew:a,onRename:n,onFlushHistory:o,disableNew:l=!1,disableFlush:d=!1}){const[c,u]=i.useState(null),[m,h]=i.useState("");return r.jsxs("div",{className:"h-full rounded-2xl border border-slate-200 bg-white/80 p-3 shadow-sm dark:border-slate-800 dark:bg-slate-900/60",children:[r.jsxs("button",{type:"button",onClick:a,disabled:l,className:"mb-3 inline-flex w-full items-center justify-center gap-2 rounded-xl bg-brand-600 px-3 py-2 text-sm font-medium text-white transition hover:bg-brand-700 disabled:cursor-not-allowed disabled:bg-brand-600/60",children:[r.jsx(Rr,{className:"h-5 w-5"})," New chat"]}),o?r.jsxs("button",{type:"button",onClick:o,disabled:d,className:"mb-4 inline-flex w-full items-center justify-center gap-2 rounded-xl border border-slate-300 px-3 py-2 text-sm font-medium text-slate-600 transition hover:border-slate-400 hover:bg-slate-50 disabled:cursor-not-allowed disabled:text-slate-400 dark:border-slate-700 dark:text-slate-300 dark:hover:border-slate-600 dark:hover:bg-slate-800",children:[r.jsx(Ar,{className:"h-5 w-5"})," Flush saved chats"]}):null,r.jsx("div",{className:"space-y-1",children:e.map(f=>r.jsxs("div",{className:`group flex items-center justify-between rounded-xl border px-3 py-2 text-sm transition ${f.id===t?"border-brand-600 bg-brand-50 text-brand-700 dark:border-brand-500 dark:bg-slate-800 dark:text-brand-300":"border-slate-200 text-slate-600 hover:bg-slate-50 dark:border-slate-700 dark:text-slate-300 dark:hover:bg-slate-800"}`,onClick:()=>s?.(f.id),children:[c===f.id?r.jsx("form",{onSubmit:g=>{g.preventDefault(),n?.(f.id,m||f.title),u(null)},className:"flex grow items-center gap-2",children:r.jsx("input",{autoFocus:!0,className:"w-full rounded-md border border-slate-300 px-2 py-1 text-sm text-slate-700 focus:border-brand-500 focus:outline-none focus:ring-1 focus:ring-brand-500 dark:border-slate-600 dark:bg-slate-800 dark:text-slate-100",defaultValue:f.title,onChange:g=>h(g.target.value),onBlur:()=>u(null)})}):r.jsx("div",{className:"truncate pr-2 text-sm font-medium",children:f.title}),r.jsx("button",{type:"button",onClick:g=>{g.stopPropagation(),u(f.id),h(f.title)},className:"invisible rounded-md p-1 text-slate-500 transition group-hover:visible hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-700",title:"Rename",children:r.jsx(Or,{className:"h-4 w-4"})})]},f.id))})]})}I.registerLanguage("javascript",Wt);I.registerLanguage("js",Wt);I.registerLanguage("typescript",qt);I.registerLanguage("ts",qt);I.registerLanguage("python",Gt);I.registerLanguage("py",Gt);I.registerLanguage("json",Dr);I.registerLanguage("bash",Kt);I.registerLanguage("sh",Kt);I.registerLanguage("markdown",Br);Yt.setOptions({breaks:!0,highlight(e,t){try{return t&&I.getLanguage(t)?I.highlight(e,{language:t}).value:I.highlightAuto(e).value}catch{return e}}});function wa(e){const t=Yt.parse(e||"");return Ur.sanitize(t)}function ka(e){return(typeof e=="number"?new Date(e):e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}class ja extends i.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,s){console.error("ErrorBoundary caught",t,s)}render(){return this.state.hasError?r.jsx("div",{className:"h-64 grid place-items-center text-sm text-red-600 dark:text-red-400",children:"Failed to render 3D preview."}):this.props.children}}const Na=i.lazy(()=>Mr(()=>import("./STLViewer-BQJe-Naq.js"),__vite__mapDeps([0,1,2,3])));function Sa(e){if(!e)return[];const t=[],s=/(https?:\/\/\S+?\.stl)\b/gi,a=new Set;let n;for(;(n=s.exec(e))!==null;)a.add(n[1]);for(const m of a)t.push({type:"url",url:m});const o=e.toLowerCase(),l=/```([^\n`]*)\n([\s\S]*?)```/g;let d;for(;(d=l.exec(e))!==null;){const m=(d[1]||"").trim().toLowerCase(),h=d[2]||"",f=h.toLowerCase(),g=(f.match(/facet normal/g)||[]).length;(m==="stl"||f.startsWith("solid")||g>=4&&f.includes("vertex"))&&t.push({type:"text",text:h.trim()})}const c=(o.match(/facet normal/g)||[]).length;return(/(\n|^)\s*solid\b/.test(o)&&c>=1||c>=4&&o.includes("vertex"))&&(t.some(m=>m.type==="text")||t.push({type:"text",text:e.trim()})),t}function Ca({experience:e,role:t,content:s,name:a,timestamp:n,streaming:o=!1,showAvatar:l=!0,showName:d=!0}){const c=t==="user",u=!!e?.enableStlViewer,m=i.useMemo(()=>u?Sa(s):[],[s,u]),h=i.useMemo(()=>{if(!u)return!1;const f=(s||"").toLowerCase();return[f.includes(".stl"),f.includes("facet normal"),f.includes("vertex "),f.includes("outer loop")].filter(Boolean).length>=2},[s,u]);return r.jsxs("div",{className:`flex ${c?"justify-end":"justify-start"}`,children:[!c&&l&&r.jsx("div",{className:"mr-2 mt-1 h-7 w-7 shrink-0 rounded-full bg-brand-600 text-white",children:r.jsx("div",{className:"grid h-full w-full place-items-center",children:r.jsx(Pr,{className:"h-4 w-4"})})}),r.jsxs("div",{className:c?"max-w-[80%] rounded-2xl bg-indigo-600 px-4 py-2 text-sm text-white shadow":"max-w-[80%] rounded-2xl border border-slate-200 bg-white px-4 py-2 text-sm text-slate-800 shadow-sm dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",children:[d&&r.jsxs("div",{className:`mb-1 text-xs ${c?"text-indigo-100/80":"text-slate-500 dark:text-slate-400"}`,children:[a," • ",ka(n)]}),c?r.jsx("div",{className:"whitespace-pre-wrap",children:s}):r.jsx("div",{className:"prose",dangerouslySetInnerHTML:{__html:wa(s)}}),u&&m.length>0&&!o&&r.jsx("div",{className:"mt-2",children:r.jsx(ja,{children:r.jsx(i.Suspense,{fallback:r.jsx("div",{className:"h-64 grid place-items-center text-slate-500",children:"Loading 3D viewer..."}),children:r.jsx(Na,{source:m[0]})})})}),u&&m.length>0&&o&&r.jsx("div",{className:"mt-2 text-xs text-slate-500",children:"3D preview will appear when the response finishes..."}),u&&m.length===0&&!o&&h&&r.jsx("div",{className:"mt-2 text-xs text-amber-600 dark:text-amber-400",children:"Looks like STL text, but it may be incomplete. Wrap it in a fenced block (```stl ... ```), or include full facets."})]}),c&&l&&r.jsx("div",{className:"ml-2 mt-1 h-7 w-7 shrink-0 rounded-full bg-slate-200 text-slate-600",children:r.jsx("div",{className:"grid h-full w-full place-items-center",children:r.jsx(Ht,{className:"h-4 w-4"})})})]})}function Ea(e){return e.map((t,s,a)=>{const n=s>0?a[s-1]:null,o=s<a.length-1?a[s+1]:null,l=!n||n.role!==t.role,d=!o||o.role!==t.role;return{...t,isFirstOfGroup:l,isLastOfGroup:d}})}function Ra({experience:e,messages:t}){const s=i.useRef(null);return i.useEffect(()=>{s.current?.scrollIntoView({behavior:"smooth",block:"end"})},[t]),r.jsx("div",{className:"h-[65vh] overflow-y-auto rounded-2xl border border-slate-200 bg-white/80 p-4 shadow-sm thin-scrollbar dark:border-slate-800 dark:bg-slate-900/60",children:r.jsxs("div",{className:"flex flex-col gap-3",children:[Ea(t).map((a,n)=>r.jsx(Ca,{experience:e,role:a.role,content:a.content,name:a.name,timestamp:a.timestamp,streaming:a.streaming,showAvatar:a.isFirstOfGroup,showName:a.isFirstOfGroup,sources:a.sources},n)),r.jsx("div",{ref:s})]})})}function Aa({value:e,onChange:t,onSend:s,onStop:a,loading:n,onClear:o,placeholder:l}){return r.jsx("form",{onSubmit:d=>{d.preventDefault(),n||s?.()},className:"sticky bottom-0 w-full",children:r.jsxs("div",{className:"flex items-end gap-2 rounded-2xl border border-slate-200 bg-white/90 p-2 shadow-sm backdrop-blur dark:border-slate-700 dark:bg-slate-900/60",children:[r.jsx("textarea",{className:"block w-full resize-none rounded-xl border-none bg-transparent p-3 text-sm text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-brand-600/60 dark:bg-slate-800/70 dark:text-slate-100 dark:placeholder-slate-400",rows:2,value:e,onChange:d=>t?.(d.target.value),placeholder:l||"Ask anything... (Shift+Enter for newline)",onKeyDown:d=>{d.key==="Enter"&&!d.shiftKey&&(d.preventDefault(),n||s?.())}}),r.jsx("div",{className:"flex items-center gap-2 pr-1",children:n?r.jsx("button",{type:"button",onClick:a,className:"inline-flex items-center rounded-xl bg-slate-200 px-3 py-2 text-slate-700 hover:bg-slate-300 dark:bg-slate-800 dark:text-slate-100 dark:hover:bg-slate-700",title:"Stop",children:r.jsx(Tr,{className:"h-5 w-5"})}):r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",onClick:o,className:"inline-flex items-center rounded-xl bg-slate-100 px-3 py-2 text-slate-700 hover:bg-slate-200 dark:bg-slate-800/80 dark:text-slate-200 dark:hover:bg-slate-700",title:"Clear",children:r.jsx(Lr,{className:"h-5 w-5"})}),r.jsx("button",{type:"submit",disabled:!e.trim(),className:"inline-flex items-center rounded-xl bg-brand-600 px-4 py-2 text-white shadow hover:bg-brand-700 disabled:opacity-60",title:"Send",children:r.jsx(zt,{className:"h-5 w-5"})})]})})]})})}function Oa({value:e,onChange:t,options:s=[]}){const a=s.length>0?s:[e];return r.jsxs("label",{className:"block text-sm",children:[r.jsx("span",{className:"block text-xs font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Model"}),r.jsx("select",{className:"mt-1 block w-56 rounded-md border border-slate-300 bg-white px-2 py-2 text-sm text-slate-800 focus:border-brand-500 focus:outline-none focus:ring-1 focus:ring-brand-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",value:e,onChange:n=>t?.(n.target.value),children:a.map(n=>r.jsx("option",{value:n,children:n},n))})]})}const St={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var Ct={};const Be=typeof import.meta<"u"&&St?St:void 0,Ue=typeof globalThis<"u"&&Ct?Ct:void 0;function Pa(e){if(Be&&Be[e]!==void 0)return Be[e];if(Ue&&Ue[e]!==void 0)return Ue[e]}const Ta=(Pa("VITE_CHAT_BASE_URL")||"https://groq-endpoint.louispaulet13.workers.dev").replace(/\/$/,"");function Ie(e="",t=180){if(!e)return"";const s=String(e).trim();return s.length<=t?s:`${s.slice(0,t)}...`}async function hr(e,t,{signal:s,model:a,baseUrl:n}={}){const o=e?.logLabel||"Chat",l=(n||e?.defaultBaseUrl||Ta||"").replace(/\/$/,"");if(!l)throw new Error("Missing chat service base URL. Set VITE_CHAT_BASE_URL or provide an override.");const d=`${l}/chat`,c=typeof performance<"u"&&typeof performance.now=="function"?performance.now():Date.now(),m=t?.[t.length-1]?.content||"";console.log(`[${o}] → POST %s — model: %s — prompt: %s`,d,a||"default",Ie(m,160));const h=a?{model:a,messages:t}:{messages:t};let f;try{f=await fetch(d,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h),signal:s})}catch(b){throw new Error(`Request to ${o} service failed: ${b?.message||b}`)}const g=typeof performance<"u"&&typeof performance.now=="function"?performance.now():Date.now(),p=Math.round(g-c);let v="",x;if(typeof f.text=="function"){v=await f.text();try{x=JSON.parse(v)}catch{x=void 0}}else if(typeof f.json=="function"){x=await f.json();try{v=JSON.stringify(x)}catch{v="[object Object]"}}if(!f.ok){const b=f.statusText||"Unknown error",N=Ie(v||b,200);throw new Error(`Remote chat service returned ${f.status}: ${N}`)}if(!x)try{x=JSON.parse(v)}catch{throw new Error("Remote chat service returned invalid JSON")}let y=x?.choices?.[0]?.message?.content;if(!y&&typeof x?.output_text=="string"&&(y=x.output_text),y=typeof y=="string"?y.trim():"",!y)throw new Error("Remote chat service returned an empty message");return console.log(`[${o}] ← %s %d in %dms — response: %s`,d,f.status,p,Ie(y,160)),{content:y,payload:x,status:f.status,duration:p,baseUrl:l}}const nt="allergy_notes",La="allergyfinder_conversations",Ee="allin_profile_name",ie="allin_chat_counts",fr="allergyfinder",$a="allin_conversations_",_a=["allergyfinder","stlviewer","pokedex"],ot=3600*24*365,pr=2,Fa=220,Ye=3500;function Oe(){return typeof document>"u"?null:document}function Pe(e){const t=Oe();if(!t||!t.cookie)return"";const a=t.cookie.split("; ").find(n=>n.startsWith(`${e}=`));return a?a.split("=").slice(1).join("="):""}function Te(e,t,s=ot){const a=Oe();if(!a)return;const n=encodeURIComponent(t),o=["path=/",`max-age=${s}`];a.cookie=`${e}=${n}; ${o.join("; ")}`}function X(e){const t=Oe();t&&(t.cookie=`${e}=; path=/; max-age=0`)}function be(){try{return decodeURIComponent(Pe(nt))}catch{return""}}function xr(e,t=ot){Te(nt,e,t)}function Et(){const e=be();return e?e.split(/\r?\n/).map(t=>t.replace(/^[-*+\s]+/,"").trim()).filter(t=>t.length>0).length:0}function Ma(e){const t=e?.role==="assistant"?"assistant":"user",a=(typeof e?.content=="string"?e.content:"").slice(0,Fa);if(!a)return null;const n=typeof e?.timestamp=="number"&&Number.isFinite(e.timestamp)?Math.round(e.timestamp):Date.now(),o={role:t,content:a,timestamp:n};return e?.sources&&Array.isArray(e.sources)&&e.sources.length>0&&(o.sources=e.sources.slice(0,2)),e?.error&&(o.error=!0),o}function Da(e){if(!e)return null;const s=(Array.isArray(e.messages)?e.messages:[]).slice(-6).map(Ma).filter(Boolean);if(s.length===0)return null;const a=typeof e.title=="string"&&e.title.trim()?e.title.trim().slice(0,60):"Saved chat",n={id:typeof e.id=="string"?e.id:void 0,title:a,messages:s};return e?.createdAt&&(n.createdAt=e.createdAt),n}function br(e){return(Array.isArray(e)?e:[]).filter(Boolean).slice(0,pr).map(Da).filter(Boolean)}function lt(e){return!e||e===fr?La:`${$a}${e}`}function gr(e){const t=lt(e),s=Pe(t);if(!s)return[];try{const a=JSON.parse(decodeURIComponent(s));return br(a)}catch{return[]}}function Je(e,t){const s=lt(e),a=br(t);if(a.length===0){X(s),dt(e);return}let n=JSON.stringify(a);if(n.length>Ye){const o=a.slice(0,1);if(n=JSON.stringify(o),n.length>Ye){X(s);return}}Te(s,n),yr(e,a.length)}function Xe(e){const t=lt(e);X(t),dt(e)}function Ba(){Xe(fr)}function Le(){const e=Pe(ie);if(!e)return{};try{const t=decodeURIComponent(e),s=JSON.parse(t);if(s&&typeof s=="object")return s}catch{}return{}}function it(e){if(!e||Object.keys(e).length===0){X(ie);return}try{const t=JSON.stringify(e);if(t.length>Ye){X(ie);return}Te(ie,t)}catch{X(ie)}}function Rt(){const e=Le(),t={allergyfinder:Number.parseInt(e.allergyfinder,10)||0,stlviewer:Number.parseInt(e.stlviewer,10)||0,pokedex:Number.parseInt(e.pokedex,10)||0};return _a.forEach(s=>{if(t[s]===0){const a=gr(s);a.length>0&&(t[s]=a.length)}}),t}function Ua(e){if(!e)return;const t=Le();t[e]=(Number.parseInt(t[e],10)||0)+1,it(t)}function yr(e,t){if(!e)return;const s=Math.max(0,Number(t)||0),a=Le(),n=Number.parseInt(a[e],10)||0;s===0&&n===0||s<=n||(a[e]=s,it(a))}function dt(e){const t=Le();!e||!(e in t)||(delete t[e],it(t))}function Ia(){X(ie)}function Ja(){const e=Pe(Ee);if(!e)return"";try{return decodeURIComponent(e)}catch{return""}}function At(e,t=ot){if(!e){X(Ee);return}Te(Ee,e,t)}function Ha(){X(Ee)}function za(){const e=Oe();!e||!e.cookie||e.cookie.split(";").forEach(t=>{const s=t.indexOf("="),a=s>-1?t.slice(0,s).trim():t.trim();a&&(e.cookie=`${a}=; path=/; max-age=0`)})}const Va="https://world.openfoodfacts.org/product/",Wa=/【[^】]+】/g;function qa(e){const t=String(e||"").replace(/[^0-9]/g,"");return t?`${Va}${t}`:null}function Ga(e){if(!e)return e;const t=/(Open[\s\u00a0\u202f-]*Food[\s\u00a0\u202f-]*Facts[^()]*?\(code[\s\u00a0\u202f]*(\d{6,})\))/gi;return e.replace(t,(s,a,n)=>{const o=qa(n);return!o||s.includes("](")?s:`[${a}](${o})`})}function Ka(e){return e&&e.replace(Wa,"")}function Ya(e,t){let s=t||"";return s&&(e?.id==="allergyfinder"&&(s=Ga(s),s=Ka(s)),s.trim())}function Ot(e){const t=(e||"").trim();if(!t)throw new Error("Service base URL is required.");return t.replace(/\/$/,"")}function Xa(e,t){const s=e?[{role:"system",content:e}]:[],a=(t||[]).filter(n=>n.role==="user"||n.role==="assistant").map(n=>({role:n.role,content:n.content}));return[...s,...a]}function vr(){return`conv-${Math.random().toString(16).slice(2,6)}-${Date.now()}`}function ct(e,t){return{role:"assistant",name:t,timestamp:Date.now(),content:e?.greeting||`Hello from ${t}`}}function je(e,t){return{id:vr(),title:"New chat",messages:[ct(e,t)]}}const Za=new Set(["allergyfinder","stlviewer","pokedex"]);function Qa(e,t,s){return!Array.isArray(e)||e.length===0?[]:e.map((a,n)=>{const o=typeof a?.id=="string"?a.id:vr(),l=typeof a?.title=="string"&&a.title.trim()?a.title.trim():`Saved chat ${n+1}`,d=Array.isArray(a?.messages)?a.messages:[],c=d.length>0?d.map(u=>{const m=u?.role==="assistant"?"assistant":"user",h=typeof u?.content=="string"?u.content:"";return{role:m,content:h,name:m==="assistant"?s:"You",timestamp:typeof u?.timestamp=="number"&&Number.isFinite(u.timestamp)?u.timestamp:Date.now(),streaming:!1,error:!!u?.error,sources:Array.isArray(u?.sources)?u.sources:void 0}}):[ct(t,s)];return{id:o,title:l,messages:c}}).filter(a=>Array.isArray(a.messages)&&a.messages.length>0)}function Pt({experience:e}){const t=e?.name||"Groq Assistant",s=e?.defaultModel||e?.modelOptions?.[0]||"openai/gpt-oss-20b",a=i.useMemo(()=>{const j=e?.defaultBaseUrl||"";return j?j.replace(/\/$/,""):""},[e]),[n,o]=i.useState(s),[l,d]=i.useState(a),[c,u]=i.useState(()=>[je(e,t)]),[m,h]=i.useState(()=>c[0]?.id),[f,g]=i.useState(""),[p,v]=i.useState(!1),x=i.useRef(null),y=i.useRef(!1),b=e?.id&&Za.has(e.id);i.useEffect(()=>{let j=[],$=!1;if(b){const R=gr(e.id),_=Qa(R,e,t);_.length>0&&(j=_,$=!0,yr(e?.id,_.length))}if(j.length===0&&(j=[je(e,t)],b&&Je(e.id,j)),u(j),h(j[0]?.id),g(""),o(e?.defaultModel||e?.modelOptions?.[0]||"openai/gpt-oss-20b"),d((e?.defaultBaseUrl||"").replace(/\/$/,"")),x.current){try{x.current.abort()}catch{}x.current=null}v(!1),y.current=$},[e,t,b]);const E=i.useMemo(()=>c.find(j=>j.id===m)||c[0],[c,m])?.messages||[],k=e?.promptPlaceholder||"Ask anything...";i.useEffect(()=>{if(b){if(y.current){y.current=!1;return}Je(e.id,c)}},[c,e?.id,b]);function O(j,$){u(R=>R.map(_=>_.id===j?{..._,title:$?.trim()?$.trim():_.title}:_))}function T(){if(p)return;const j=je(e,t);u($=>{const R=[j,...$];return b?R.slice(0,pr):R}),h(j.id),g("")}function C(){if(p)return;const j=ct(e,t);u($=>$.map(R=>R.id===m?{...R,title:"New chat",messages:[j]}:R))}function S(){if(p)return;const j=je(e,t);u([j]),h(j.id),g(""),b&&(Je(e.id,[j]),y.current=!0)}function B(){if(p){try{x.current?.abort()}catch{}x.current=null,v(!1),u(j=>j.map($=>{if($.id!==m)return $;const R=[...$.messages],_=R.length-1;return _>=0&&R[_].role==="assistant"&&(R[_]={...R[_],content:"Request cancelled.",streaming:!1,error:!0}),{...$,messages:R}}))}}async function U(){const j=f.trim();if(!j||p)return;const R={role:"user",name:"You",timestamp:Date.now(),content:j},_=!!e?.id&&!E.some(M=>M.role==="user");let ve;try{const M=e?.allowBaseUrlOverride?l:e?.defaultBaseUrl||l;ve=Ot(M)}catch(M){u(L=>L.map(D=>{if(D.id!==m)return D;const Q=D.title==="New chat"&&j.slice(0,30)||D.title;return{...D,title:Q,messages:[...D.messages,R,{role:"assistant",name:t,timestamp:Date.now(),content:`Warning: ${M.message}`,error:!0}]}})),g("");return}u(M=>M.map(L=>{if(L.id!==m)return L;const D=L.title==="New chat"&&j.slice(0,30)||L.title;return{...L,title:D,messages:[...L.messages,R,{role:"assistant",name:t,timestamp:Date.now(),content:"",streaming:!0}]}})),g(""),v(!0);const F=new AbortController;x.current=F;try{_&&Ua(e.id);const M=[...E,R];let L=e?.systemPrompt;if(e?.id==="allergyfinder"){const J=be();J&&(L=[L,"User allergy notes saved via the Allergy Cookie Editor (markdown format):",J].filter(Boolean).join(`

`))}const D=Xa(L,M),Q=await hr(e,D,{signal:F.signal,model:n,baseUrl:ve});d(Q.baseUrl);const ee=Ya(e,Q.content);u(J=>J.map(W=>{if(W.id!==m)return W;const w=[...W.messages],P=w.length-1;return P>=0&&w[P].role==="assistant"&&(w[P]={...w[P],content:ee,streaming:!1,error:!1}),{...W,messages:w}}))}catch(M){const L=M?.name==="AbortError",D=L?"Request cancelled.":`Unable to reach the service. ${M?.message||"Please try again."}`;L||console.error(`[${e?.logLabel||"Chat"}] request failed`,M),u(Q=>Q.map(ee=>{if(ee.id!==m)return ee;const J=[...ee.messages],W=J.length-1;return W>=0&&J[W].role==="assistant"&&(J[W]={...J[W],content:D,streaming:!1,error:!0}),{...ee,messages:J}}))}finally{x.current=null,v(!1)}}const oe=e?.allowBaseUrlOverride?null:l||e?.defaultBaseUrl||"";return r.jsxs("div",{className:"grid gap-6 md:grid-cols-12",children:[r.jsx("aside",{className:"md:col-span-4 lg:col-span-3",children:r.jsx(va,{conversations:c,activeId:m,onSelect:h,onNew:T,onRename:O,onFlushHistory:b?S:void 0,disableNew:p,disableFlush:p})}),r.jsxs("section",{className:"md:col-span-8 lg:col-span-9 flex flex-col gap-4",children:[r.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white/80 p-4 shadow-sm dark:border-slate-800 dark:bg-slate-900/60",children:[r.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-end lg:justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Session settings"}),r.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Select a model and endpoint for this workspace."})]}),r.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end",children:[r.jsx(Oa,{value:n,onChange:o,options:e?.modelOptions||[]}),e?.allowBaseUrlOverride?r.jsxs("label",{className:"block text-sm",children:[r.jsx("span",{className:"block text-xs font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Service base URL"}),r.jsx("input",{type:"url",value:l,onChange:j=>d(j.target.value),onBlur:j=>{try{d(Ot(j.target.value))}catch{}},className:"mt-1 block w-64 rounded-md border border-slate-300 bg-white px-2 py-2 text-sm text-slate-800 focus:border-brand-500 focus:outline-none focus:ring-1 focus:ring-brand-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",placeholder:"https://your-endpoint.example",disabled:p})]}):r.jsxs("div",{className:"min-w-[16rem] rounded-md border border-slate-200 bg-white px-3 py-2 text-xs text-slate-600 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-300",children:[r.jsx("div",{className:"uppercase tracking-wide text-[10px] text-slate-500 dark:text-slate-400",children:"Service base URL"}),r.jsx("code",{className:"break-all text-[12px]",children:oe||"Not configured"})]})]})]}),r.jsxs("div",{className:"mt-3 grid gap-2 text-xs text-slate-500 dark:text-slate-400 sm:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-300",children:"Assistant"}),": ",t]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-300",children:"Endpoint"}),": ",oe||l||"Not configured"]})]})]}),r.jsx(Ra,{experience:e,messages:E}),r.jsx(Aa,{value:f,onChange:g,onSend:U,onStop:B,onClear:C,loading:p,placeholder:k})]})]})}const en=`- Peanuts
- Shellfish
- Dairy
- Eggs
- Sesame
- Tree nuts`;function tn(){const[e,t]=i.useState(""),[s,a]=i.useState(null),n=i.useMemo(()=>en,[]);i.useEffect(()=>{const d=be();t(d)},[]);function o(d){d.preventDefault(),xr(e||""),a({type:"success",message:"Allergy notes saved to cookie."})}function l(){za(),t(""),a({type:"warning",message:"All cookies cleared for this site."})}return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"rounded-2xl border border-emerald-100 bg-emerald-50/60 p-6 text-emerald-900 dark:border-emerald-500/40 dark:bg-emerald-900/30 dark:text-emerald-100",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Allergy Cookie Editor"}),r.jsx("p",{className:"mt-2 text-sm text-emerald-900/80 dark:text-emerald-100/80",children:"Save a markdown list of allergens you or your household need to watch out for. We will store it as a browser cookie so you can quickly reference or reuse it when chatting with the assistant."})]}),r.jsxs("form",{className:"space-y-4",onSubmit:o,children:[r.jsxs("label",{className:"block space-y-2",htmlFor:"allergy-cookie-textarea",children:[r.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Allergy list"}),r.jsx("textarea",{id:"allergy-cookie-textarea",name:"allergy-notes",value:e,onChange:d=>t(d.target.value),placeholder:n,rows:10,className:"w-full rounded-2xl border border-slate-300 bg-white/80 p-4 font-mono text-sm text-slate-800 placeholder:text-slate-400 focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-400 dark:border-slate-700 dark:bg-slate-900/60 dark:text-slate-100 dark:placeholder:text-slate-500 dark:focus:border-emerald-300 dark:focus:ring-emerald-300","aria-describedby":"allergy-cookie-helper"})]}),r.jsx("p",{id:"allergy-cookie-helper",className:"text-xs text-slate-500 dark:text-slate-400",children:`Tip: We'll store this in the "${nt}" browser cookie. Use markdown lists, headings, or bold text to organise allergens by family members.`}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[r.jsx("button",{type:"submit",className:"inline-flex items-center gap-2 rounded-xl bg-emerald-600 px-4 py-2 text-sm font-medium text-white shadow-sm transition hover:bg-emerald-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-emerald-500 disabled:opacity-50",children:"Save Cookie"}),r.jsx("button",{type:"button",onClick:l,className:"inline-flex items-center gap-2 rounded-xl border border-slate-300 px-4 py-2 text-sm font-medium text-slate-700 transition hover:border-slate-400 hover:bg-slate-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-slate-400 dark:border-slate-600 dark:text-slate-200 dark:hover:border-slate-500 dark:hover:bg-slate-800 dark:focus-visible:outline-slate-500",children:"Flush All Cookies"}),s?r.jsx("span",{role:"status",className:`text-sm ${s.type==="success"?"text-emerald-600 dark:text-emerald-300":"text-amber-600 dark:text-amber-300"}`,children:s.message}):null]})]})]})}const Tt="inline-flex items-center rounded-xl px-4 py-2 text-sm font-medium transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2";function Lt(){return r.jsxs("nav",{"aria-label":"AllergyFinder sections",className:"flex flex-wrap items-center gap-2",children:[r.jsx(H,{to:"/allergyfinder",end:!0,className:({isActive:e})=>`${Tt} ${e?"bg-emerald-600 text-white focus-visible:outline-emerald-400":"border border-transparent bg-white/80 text-emerald-700 hover:border-emerald-200 hover:bg-emerald-50 focus-visible:outline-emerald-300 dark:bg-slate-900/60 dark:text-emerald-200 dark:hover:bg-emerald-900/40"}`,children:"Chat Assistant"}),r.jsx(H,{to:"/allergyfinder/cookies",className:({isActive:e})=>`${Tt} ${e?"bg-emerald-600 text-white focus-visible:outline-emerald-400":"border border-transparent bg-white/80 text-emerald-700 hover:border-emerald-200 hover:bg-emerald-50 focus-visible:outline-emerald-300 dark:bg-slate-900/60 dark:text-emerald-200 dark:hover:bg-emerald-900/40"}`,children:"Allergy Cookie Editor"})]})}const He={allergyfinder:"AllergyFinder",stlviewer:"STL Studio",pokedex:"Pokédex"},$t=["Curious","Vigilant","Bright","Calm","Resilient","Swift","Gentle","Lively","Mindful","Radiant"],_t=["Aviator","Guardian","Navigator","Trailblazer","Harvest","Aurora","Sentinel","Voyager","Caretaker","Beacon"];function Ft(){const e=$t[Math.floor(Math.random()*$t.length)],t=_t[Math.floor(Math.random()*_t.length)];return`${e} ${t}`}function Mt(e,t=12){return e?e.split(/\r?\n/).map(s=>s.replace(/^[-*+\s]+/,"").trim()).filter(Boolean).slice(0,t):[]}function rn(){const[e,t]=i.useState(""),[s,a]=i.useState(()=>Rt()),[n,o]=i.useState(()=>Et()),[l,d]=i.useState(()=>Mt(be()));i.useEffect(()=>{let p=Ja();p||(p=Ft(),At(p)),t(p),c()},[]);function c(){a(Rt()),o(Et()),d(Mt(be()))}function u(){const p=Ft();At(p),t(p)}function m(){Ha(),t("")}function h(p){Xe(p),dt(p),c()}function f(){Ia(),Object.keys(He).forEach(p=>{Xe(p)}),c()}function g(){xr(""),Ba(),c()}return r.jsxs("div",{className:"space-y-10",children:[r.jsxs("section",{className:"rounded-3xl border border-emerald-200 bg-emerald-50/70 p-6 text-emerald-900 dark:border-emerald-500/40 dark:bg-emerald-900/30 dark:text-emerald-100",children:[r.jsx("h2",{className:"text-2xl font-semibold",children:"User Profile"}),r.jsx("p",{className:"mt-2 text-sm text-emerald-900/80 dark:text-emerald-100/80",children:"We generate a friendly alias so you can save notes without revealing personal details. Your profile name lives in a browser cookie on this device."}),r.jsxs("div",{className:"mt-6 flex flex-wrap items-center gap-4",children:[r.jsx("div",{className:"rounded-2xl bg-white/80 px-5 py-4 text-lg font-semibold text-emerald-700 shadow-sm dark:bg-slate-900/40 dark:text-emerald-200",children:e||"No profile name stored"}),r.jsx("button",{type:"button",onClick:u,className:"inline-flex items-center rounded-xl bg-emerald-600 px-4 py-2 text-sm font-medium text-white shadow-sm transition hover:bg-emerald-500",children:"Generate New Alias"}),r.jsx("button",{type:"button",onClick:m,className:"inline-flex items-center rounded-xl bg-red-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-red-500",children:"Delete Profile Cookie"})]}),r.jsx("p",{className:"mt-3 rounded-2xl border border-red-300 bg-red-50/80 p-3 text-sm text-red-700 dark:border-red-700 dark:bg-red-900/30 dark:text-red-200",children:"Warning: Deleting the profile cookie removes your saved alias immediately. The next time you open this page a new random name will be generated."})]}),r.jsxs("section",{className:"space-y-4",children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[r.jsx("h3",{className:"text-xl font-semibold text-slate-800 dark:text-slate-100",children:"Saved Allergies"}),r.jsx(ae,{to:"/allergyfinder/cookies",className:"inline-flex items-center rounded-xl bg-emerald-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-emerald-500",children:"Edit Allergy List"})]}),r.jsxs("div",{className:"rounded-3xl border border-emerald-200 bg-white/85 p-5 shadow-sm dark:border-emerald-500/40 dark:bg-emerald-900/20",children:[r.jsx("div",{className:"text-3xl font-bold text-emerald-700 dark:text-emerald-200",children:n}),r.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Allergens listed across your saved markdown notes."}),r.jsx("div",{className:"mt-4 rounded-2xl border border-emerald-200 bg-emerald-50/60 p-4 text-sm text-emerald-900 dark:border-emerald-500/30 dark:bg-emerald-900/40 dark:text-emerald-100",children:l.length>0?r.jsxs("ul",{className:"list-disc space-y-1 pl-5",children:[l.map(p=>r.jsx("li",{children:p},p)),n>l.length?r.jsxs("li",{className:"italic text-emerald-700/80 dark:text-emerald-200/80",children:["…and ",n-l.length," more allergens saved."]}):null]}):r.jsx("div",{className:"italic text-emerald-700/80 dark:text-emerald-200/80",children:"No allergy notes saved yet."})}),r.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-3",children:[r.jsx("button",{type:"button",onClick:g,className:"inline-flex items-center rounded-xl bg-red-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-red-500",children:"Delete Allergy Notes & Saved Chats"}),r.jsx("p",{className:"rounded-xl border border-red-300 bg-red-50/80 px-4 py-2 text-xs text-red-700 dark:border-red-700 dark:bg-red-900/30 dark:text-red-200",children:"Critical warning: This removes the allergy notes cookie and any saved AllergyFinder conversations from this browser."})]})]})]}),r.jsxs("section",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-semibold text-slate-800 dark:text-slate-100",children:"Chat Activity"}),r.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"We snapshot how many conversations you have started in each demo. Counts are stored locally in a cookie."})]}),r.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:Object.entries(s).map(([p,v])=>r.jsxs("div",{className:"space-y-3 rounded-3xl border border-slate-200 bg-white/85 p-5 shadow-sm transition hover:border-slate-300 dark:border-slate-700 dark:bg-slate-900/60 dark:hover:border-slate-600",children:[r.jsx("div",{className:"text-sm font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-400",children:He[p]||p}),r.jsx("div",{className:"text-4xl font-bold text-slate-900 dark:text-slate-100",children:v}),r.jsxs("button",{type:"button",onClick:()=>h(p),className:"inline-flex items-center rounded-xl bg-red-600 px-3 py-2 text-xs font-semibold uppercase tracking-wide text-white shadow-sm transition hover:bg-red-500",children:["Delete ",He[p]||p," History"]}),r.jsx("p",{className:"rounded-lg border border-red-200 bg-red-50/80 p-2 text-xs text-red-700 dark:border-red-700 dark:bg-red-900/30 dark:text-red-200",children:"Warning: This deletes the saved cookie for this experience. Any stored conversations and counters are permanently removed from this browser."})]},p))}),r.jsxs("div",{className:"flex flex-wrap gap-3",children:[r.jsx("button",{type:"button",onClick:f,className:"inline-flex items-center rounded-xl bg-red-700 px-4 py-2 text-sm font-semibold uppercase tracking-wide text-white shadow-sm transition hover:bg-red-600",children:"Delete All Saved Chat History"}),r.jsx("p",{className:"rounded-xl border border-red-300 bg-red-50/90 px-4 py-2 text-xs text-red-700 dark:border-red-700 dark:bg-red-900/40 dark:text-red-200",children:"Warning: This deletes every saved chat cookie across AllergyFinder, STL Studio, and the Pokédex on this device."})]})]})]})}function sn(){return r.jsxs("div",{className:"space-y-8",children:[r.jsx("section",{className:"rounded-3xl border border-brand-200 bg-gradient-to-r from-brand-500/10 to-brand-600/10 px-8 py-10 text-slate-900 shadow-lg dark:border-brand-500/30 dark:from-brand-500/20 dark:to-brand-700/20 dark:text-slate-100",children:r.jsxs("div",{className:"space-y-3",children:[r.jsx("span",{className:"inline-flex items-center rounded-full bg-white/70 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-brand-700 dark:bg-slate-900/60 dark:text-brand-200",children:"Profile"}),r.jsx("h1",{className:"text-3xl font-semibold sm:text-4xl",children:"User Preferences & Stats"}),r.jsx("p",{className:"max-w-2xl text-sm text-slate-700 dark:text-slate-300",children:"Manage your generated alias, review chat counters across experiences, and clear local cookies for allergy notes and saved conversations. Everything shown here lives only in your browser — we do not store personal health information, we keep no server-side logs, and this workspace is operated with GDPR compliance in mind."})]})}),r.jsx(rn,{})]})}function Dt({isActive:e}){return`inline-flex items-center rounded-full border px-3 py-1.5 text-sm font-medium transition border-slate-300 text-slate-700 hover:border-amber-500 hover:text-amber-600 dark:border-slate-700 dark:text-slate-200 ${e?"bg-gradient-to-r from-yellow-400 to-amber-600 text-white border-transparent shadow":""}`}function Bt(){return r.jsxs("nav",{className:"flex flex-wrap items-center gap-2",children:[r.jsx(H,{to:"/objectmaker",className:Dt,end:!0,children:"Builder"}),r.jsx(H,{to:"/objectmaker/zoo",className:Dt,children:"Zoo"})]})}function an({baseUrl:e,setBaseUrl:t,model:s,setModel:a,experience:n,objectType:o}){function l(d){const c=(d||"").trim();return c?c.replace(/\/$/,""):""}return r.jsx("section",{className:"md:col-span-12",children:r.jsx("div",{className:"rounded-xl border border-slate-200 bg-white/80 p-3 dark:border-slate-800 dark:bg-slate-900/60",children:r.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Service settings"}),r.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Configure model and base URL for object creation."})]}),r.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row",children:[r.jsxs("label",{className:"block text-sm",children:[r.jsx("span",{className:"block text-[10px] uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Model"}),r.jsx("select",{className:"mt-1 block w-56 rounded-md border border-slate-300 bg-white px-2 py-2 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",value:s,onChange:d=>a(d.target.value),children:(n?.modelOptions||[]).map(d=>r.jsx("option",{value:d,children:d},d))})]}),r.jsxs("label",{className:"block text-sm",children:[r.jsx("span",{className:"block text-[10px] uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Service base URL"}),r.jsx("input",{type:"url",value:e,onChange:d=>t(d.target.value),onBlur:d=>t(l(d.target.value)),className:"mt-1 block w-72 rounded-md border border-slate-300 bg-white px-2 py-2 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",placeholder:"https://your-endpoint.example"})]})]})]})})})}function nn({prompt:e,setPrompt:t,chatMessages:s,chatLoading:a,onSend:n,onAdopt:o}){const l=!!e.trim()&&!a,c=!![...s].reverse().find(h=>h.role==="assistant"),u=h=>{h.key==="Enter"&&!h.shiftKey&&(h.preventDefault(),l&&n())},m=h=>{h.preventDefault(),l&&n()};return r.jsxs("section",{className:"md:col-span-5 space-y-4",children:[r.jsx("div",{className:"rounded-xl border border-slate-200 bg-white/80 p-4 shadow-sm dark:border-slate-800 dark:bg-slate-900/60",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Assistant Schema Builder"}),r.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Describe the object you want. The assistant will propose a single JSON schema."})]}),r.jsxs("form",{onSubmit:m,className:"flex flex-col gap-2",children:[r.jsx("textarea",{value:e,onChange:h=>t(h.target.value),onKeyDown:u,rows:3,spellCheck:!1,className:"block w-full rounded-lg border border-slate-300 bg-white/90 p-3 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-2 focus:ring-amber-500/60 dark:border-slate-700 dark:bg-slate-900/60 dark:text-slate-100",placeholder:"Ask for a schema idea…"}),r.jsx("div",{className:"flex flex-wrap items-center justify-end gap-2",children:r.jsx("button",{type:"submit",disabled:!l,className:"inline-flex items-center gap-1 rounded-md bg-amber-600 px-3 py-1.5 text-sm font-semibold text-white shadow transition-colors hover:bg-amber-500 disabled:opacity-50",children:a?"Sending…":r.jsxs(r.Fragment,{children:[r.jsx("span",{children:"Send to assistant"}),r.jsx(zt,{className:"h-4 w-4","aria-hidden":"true"})]})})})]})]})}),r.jsxs("div",{className:"rounded-xl border border-amber-200 bg-amber-50/80 p-4 shadow-sm dark:border-amber-500/40 dark:bg-amber-500/10",children:[r.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Apply the assistant schema"}),r.jsx("p",{className:"text-xs text-amber-900/80 dark:text-amber-200/80",children:"Review the latest assistant reply below. When it looks good, send it to the Schema Setup card so you can validate and fine-tune it."})]}),r.jsxs("button",{type:"button",onClick:o,disabled:!c,className:"inline-flex items-center gap-1 rounded-md border border-amber-600 px-3 py-1.5 text-sm font-medium text-amber-700 transition-colors hover:bg-amber-100 disabled:opacity-50 dark:border-amber-400 dark:text-amber-200 dark:hover:bg-amber-500/20",children:[r.jsx(Vt,{className:"h-4 w-4","aria-hidden":"true"}),"Send to Schema Setup"]})]}),r.jsx("div",{className:"mt-3 max-h-64 space-y-2 overflow-auto",children:s.length?s.map((h,f)=>r.jsxs("div",{className:`rounded-md border p-2 text-sm ${h.role==="user"?"border-amber-200 bg-white text-slate-800 dark:border-amber-400/40 dark:bg-amber-500/10":"border-amber-300 bg-amber-100/80 text-amber-900 dark:border-amber-400/60 dark:bg-amber-500/20 dark:text-amber-50"}`,children:[r.jsx("div",{className:"mb-1 text-[10px] uppercase tracking-wide text-amber-600 dark:text-amber-200/80",children:h.role}),r.jsx("div",{className:"whitespace-pre-wrap break-words",children:h.content})]},f)):r.jsx("div",{className:"rounded-md border border-dashed border-amber-300 p-3 text-xs text-amber-700 dark:border-amber-400/50 dark:text-amber-200",children:"No assistant replies yet. Ask the assistant for a schema to get started."})}),c?null:r.jsx("p",{className:"mt-2 text-[11px] font-medium text-amber-800/80 dark:text-amber-200/70",children:"Send a prompt to the assistant first—then this button will push the suggested schema into the editor."})]})]})}function on({value:e,onChange:t,rows:s=10,placeholder:a}){return r.jsx("textarea",{value:e,onChange:n=>t(n.target.value),rows:s,spellCheck:!1,className:"mt-1 block w-full rounded-lg border border-slate-300 bg-white/90 p-2 font-mono text-[13px] text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-900/60 dark:text-slate-100",placeholder:a})}function ln({value:e}){const t=i.useMemo(()=>{try{return JSON.stringify(e,null,2)}catch{return""}},[e]);return r.jsx("pre",{className:"max-h-80 overflow-auto rounded-lg border border-slate-200 bg-slate-50 p-3 text-xs text-slate-800 dark:border-slate-700 dark:bg-slate-900/50 dark:text-slate-200",children:t})}function dn({structureText:e,setStructureText:t,onValidate:s,objectType:a,setObjectType:n,objectName:o,setObjectName:l,createPrompt:d,setCreatePrompt:c,systemText:u,setSystemText:m,temperature:h,setTemperature:f,strictMode:g,setStrictMode:p,onCreate:v,createLoading:x,error:y,resultObj:b,structureStatus:N}){const[E,k]=i.useState(""),O=i.useRef(null);i.useEffect(()=>()=>{O.current&&(clearTimeout(O.current),O.current=null)},[]);async function T(){if(b){try{const C=JSON.stringify(b,null,2);if(typeof navigator<"u"&&navigator.clipboard?.writeText)await navigator.clipboard.writeText(C);else{const S=document.createElement("textarea");S.value=C,S.setAttribute("readonly",""),S.style.position="absolute",S.style.left="-9999px",document.body.appendChild(S),S.select(),document.execCommand("copy"),document.body.removeChild(S)}k("Copied!")}catch(C){console.error("Copy failed",C),k("Copy failed")}O.current&&clearTimeout(O.current),O.current=setTimeout(()=>{k(""),O.current=null},2e3)}}return r.jsxs("section",{className:"md:col-span-7 space-y-4",children:[r.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white/80 p-4 shadow-sm dark:border-slate-800 dark:bg-slate-900/60",children:[r.jsxs("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-start sm:justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Schema Setup"}),r.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Define and validate the JSON Schema before attempting generation."})]}),N?r.jsxs("div",{className:"flex items-center gap-1 text-xs font-medium text-emerald-600 dark:text-emerald-400",children:[r.jsx($r,{className:"h-4 w-4","aria-hidden":"true"}),r.jsx("span",{children:N})]}):null]}),r.jsxs("div",{className:"mt-3 space-y-3",children:[r.jsx(on,{value:e,onChange:t,rows:16,placeholder:'{"type":"object","properties":{"name":{"type":"string"},"toppings":{"type":"array","items":{"type":"string"}}}}'}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[r.jsx("button",{type:"button",onClick:s,className:"rounded-md bg-amber-600 px-3 py-1.5 text-sm font-medium text-white shadow hover:bg-amber-500",children:"Validate JSON"}),r.jsxs("label",{className:"text-sm text-slate-600 dark:text-slate-300",children:[r.jsx("span",{className:"mr-1",children:"Type"}),r.jsx("input",{value:a,onChange:C=>n(C.target.value),className:"rounded-md border border-slate-300 bg-white px-2 py-1 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",placeholder:"pizza | hot_sauce | car"})]}),r.jsxs("label",{className:"text-sm text-slate-600 dark:text-slate-300",children:[r.jsx("span",{className:"mr-1",children:"Object Name (optional)"}),r.jsx("input",{value:o,onChange:C=>l(C.target.value),className:"rounded-md border border-slate-300 bg-white px-2 py-1 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",placeholder:"diavola"})]})]}),r.jsxs("label",{className:"block text-sm",children:[r.jsx("span",{className:"mr-1 text-slate-600 dark:text-slate-300",children:"System Instruction"}),r.jsx("input",{value:u,onChange:C=>m(C.target.value),className:"mt-1 block w-full rounded-md border border-slate-300 bg-white px-2 py-2 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",placeholder:"You create a pizza object that conforms strictly to the provided JSON Schema; return only JSON."})]})]})]}),r.jsx("div",{className:"rounded-xl border border-slate-200 bg-white/80 p-4 shadow-sm dark:border-slate-800 dark:bg-slate-900/60",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Generation Request"}),r.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Craft the prompt and run the request after your schema looks right."})]}),r.jsxs("label",{className:"block text-sm",children:[r.jsx("span",{className:"mr-1 text-slate-600 dark:text-slate-300",children:"User Prompt"}),r.jsx("input",{value:d,onChange:C=>c(C.target.value),className:"mt-1 block w-full rounded-md border border-slate-300 bg-white px-2 py-2 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",placeholder:"Describe the instance to create (e.g., 'A Margherita with basil and fresh mozzarella')"})]}),r.jsxs("div",{className:"flex flex-wrap gap-3",children:[r.jsxs("label",{className:"text-sm text-slate-600 dark:text-slate-300",children:[r.jsx("span",{className:"mr-1",children:"Temperature"}),r.jsx("input",{type:"number",value:h,onChange:C=>f(C.target.value),min:"0",max:"2",step:"0.1",className:"mt-1 block w-24 rounded-md border border-slate-300 bg-white px-2 py-1 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100"})]}),r.jsxs("label",{className:"text-sm text-slate-600 dark:text-slate-300",children:[r.jsx("span",{className:"mr-1",children:"Strict mode"}),r.jsxs("select",{value:g,onChange:C=>p(C.target.value),className:"mt-1 block rounded-md border border-slate-300 bg-white px-2 py-1 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",children:[r.jsx("option",{value:"auto",children:"Auto (service decides)"}),r.jsx("option",{value:"true",children:"Force strict validation"}),r.jsx("option",{value:"false",children:"Relaxed validation"})]})]}),r.jsx("div",{className:"ml-auto flex items-end",children:r.jsx("button",{type:"button",onClick:v,disabled:x,className:"rounded-md bg-amber-700 px-4 py-2 text-sm font-semibold text-white shadow hover:bg-amber-600 disabled:opacity-50",children:x?"Creating…":"Create Object"})})]}),y?r.jsx("div",{className:"rounded-md border border-red-300 bg-red-50 p-2 text-sm text-red-800 dark:border-red-800/60 dark:bg-red-900/40 dark:text-red-200",children:y}):null]})}),r.jsxs("section",{className:"rounded-xl border border-slate-200 bg-white/60 p-4 shadow-sm dark:border-slate-800 dark:bg-slate-900/50",children:[r.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Last Created Object"}),b?r.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 dark:text-slate-400",children:[E?r.jsx("span",{children:E}):null,r.jsxs("button",{type:"button",onClick:T,className:"inline-flex items-center gap-1 rounded-md border border-slate-300 px-2 py-1 text-xs font-medium text-slate-700 transition-colors hover:bg-slate-100 dark:border-slate-600 dark:text-slate-200 dark:hover:bg-slate-800",children:[r.jsx(Vt,{className:"h-4 w-4","aria-hidden":"true"}),"Copy JSON"]})]}):null]}),r.jsx("div",{className:"mt-3",children:b?r.jsx(ln,{value:b}):r.jsx("div",{className:"rounded-lg border border-dashed border-slate-300 bg-white/60 p-4 text-sm text-slate-500 dark:border-slate-700 dark:bg-slate-900/60 dark:text-slate-400",children:"No object created yet. The response from /obj will appear here."})})]})]})}function ut(e){if(!e)return null;try{const t=JSON.parse(e);if(t&&typeof t=="object")return t}catch{}return null}function cn(e){if(!e)return null;const t=/```(?:json)?\s*([\s\S]*?)```/i,s=e.match(t);return!s||!s[1]?null:ut(s[1].trim())}function un(e){if(!e)return null;const t=String(e),s=t.indexOf("{");if(s<0)return null;let a=0;for(let n=s;n<t.length;n++){const o=t[n];if(o==="{")a++;else if(o==="}"&&(a--,a===0)){const l=t.slice(s,n+1),d=ut(l);if(d)return d}}return null}function mn(e){return ut(e)||cn(e)||un(e)}const mt="objectmaker_zoo_v1";function ht(){try{return globalThis.localStorage||null}catch{return null}}function wr(){const e=ht();if(!e)return[];try{const t=e.getItem(mt);if(!t)return[];const s=JSON.parse(t);return Array.isArray(s)?s:[]}catch{return[]}}function kr(e){const t=ht();if(t)try{t.setItem(mt,JSON.stringify(e||[]))}catch{}}function hn(e){const t=wr();t.unshift(e),kr(t)}function fn(){const e=ht();if(e)try{e.removeItem(mt)}catch{}}function pn(e){const t=new Map;for(const s of e||[]){const a=(s?.type||"object").toString();t.has(a)||t.set(a,[]),t.get(a).push(s)}return t}const Ut={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var It={};const ze=typeof import.meta<"u"&&Ut?Ut:void 0,Ve=typeof globalThis<"u"&&It?It:void 0;function jr(e){if(e){if(ze&&ze[e]!==void 0)return ze[e];if(Ve&&Ve[e]!==void 0)return Ve[e]}}const xn=(jr("VITE_CHAT_BASE_URL")||"https://groq-endpoint.louispaulet13.workers.dev").replace(/\/$/,"");function bn(e="",t=160){const s=(e||"").toString().trim();return s.length<=t?s:`${s.slice(0,t)}...`}function gn(e){if(!e||typeof e!="object")return e;try{const t=JSON.parse(JSON.stringify(e)),s=a=>{if(!(!a||typeof a!="object")){if(a.type==="object"){a.additionalProperties!==!1&&(a.additionalProperties=!1);const n=a.properties&&typeof a.properties=="object"?a.properties:{},o=Object.keys(n);if(o.length){const c=Array.isArray(a.required)?a.required.filter(m=>typeof m=="string"):[],u=new Set([...c,...o]);a.required=Array.from(u)}Object.values(n).forEach(s);const l=a.patternProperties&&typeof a.patternProperties=="object"?a.patternProperties:{};Object.values(l).forEach(s);const d=a.dependencies&&typeof a.dependencies=="object"?a.dependencies:{};Object.values(d).forEach(c=>{c&&typeof c=="object"&&s(c)})}"format"in a&&delete a.format,a.items&&(Array.isArray(a.items)?a.items.forEach(s):s(a.items));for(const n of["allOf","anyOf","oneOf"])Array.isArray(a[n])&&a[n].forEach(s);for(const n of["not","if","then","else"])a[n]&&typeof a[n]=="object"&&s(a[n]);for(const n of["definitions","$defs"])a[n]&&typeof a[n]=="object"&&Object.values(a[n]).forEach(s)}};return s(t),t}catch{return e}}function yn(e){const t=(e||"").toString().trim();return t?t.replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_-]/g,"").toLowerCase():""}async function vn({baseUrl:e,structure:t,model:s,objectType:a,prompt:n,system:o,temperature:l,strict:d}={}){const c=(e||xn||"").replace(/\/$/,"");if(!c)throw new Error("Missing service base URL for /obj");const u=(jr("VITE_OBJECTMAKER_OBJ_PATH")||"").trim(),m=yn(a||t&&t.type),h=k=>k?m?k.replace("{type}",m).replace(":type",m).replace("%s",m):k.includes("{type}")||k.includes(":type")||k.includes("%s")?null:k:null;let f=[];if(u){const k=h(u);k?f.push(k.startsWith("/")?k:`/${k}`):m&&f.push(u.replace(/\/?$/,"/")+m)}m&&f.push(`/obj/${m}`,`/object/${m}`,`/objects/${m}`),m||f.push("/obj","/object","/objects"),f=Array.from(new Set(f.filter(Boolean).map(k=>k.startsWith("/")?k:`/${k}`)));const g=(n||"").toString().trim();if(!g)throw new Error("Object prompt is required to call /obj");const p="You are an object maker. Produce a single JSON object that strictly conforms to the provided JSON Schema. Do not include commentary or markdown. Only return the JSON object.",v=(o||p).toString().trim()||p,y={schema:gn(t),system:v,user:g},b=typeof l=="number"?l:Number.parseFloat(l);Number.isFinite(b)&&(y.temperature=b),s&&(y.model=s),typeof d=="boolean"&&(y.strict=d);const N=[y];let E=null;for(const k of f){const O=`${c}${k}`;let T=null;for(const C of N)try{const S=await fetch(O,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)}),B=await S.text();if(!S.ok){const oe=bn(B);if(S.status===404){T=null;break}T=new Error(`HTTP ${S.status}: ${oe} (path ${O})`);continue}let U;try{U=JSON.parse(B)}catch{U=null}if(!U||typeof U!="object")throw new Error("Invalid JSON response from object endpoint");return{payload:U,status:S.status,baseUrl:c,path:k}}catch(S){T=S}if(T)throw T;E=E||new Error(`HTTP 404: endpoint not found at ${O}`)}throw E||new Error("Object creation failed")}const Jt="You are an object maker. Produce a single JSON object that strictly conforms to the provided JSON Schema. Do not include commentary or markdown. Only return the JSON object.",Nr={type:"object",additionalProperties:!1,properties:{name:{type:"string"},size:{type:"string",enum:["small","medium","large"]},crust:{type:"string"},cheese:{type:"string"},toppings:{type:"array",items:{type:"string"}}},required:["name","size","crust","cheese","toppings"]},wn=JSON.stringify(Nr,null,2),kn="make a delicious spicy pizza that respects this schema",jn="pizza",Nn="";function Sn(e,t){const s=t?[{role:"system",content:t}]:[],a=(e||[]).filter(n=>n&&(n.role==="user"||n.role==="assistant")).map(n=>({role:n.role,content:n.content}));return[...s,...a]}function We(e){const t=(e||"").trim();return t?t.replace(/\/$/,""):""}function qe(e){if(!e||typeof e!="object")return{schema:e,changed:!1};let t=!1;const s=JSON.parse(JSON.stringify(e)),a=n=>{if(!(!n||typeof n!="object")){if(n.type==="object"){n.additionalProperties!==!1&&(n.additionalProperties=!1,t=!0);const o=n.properties&&typeof n.properties=="object"?n.properties:{},l=Object.keys(o);if(l.length){const u=Array.isArray(n.required)?n.required.filter(f=>typeof f=="string"):[],m=new Set(u),h=m.size;for(const f of l)m.add(f);(m.size!==h||u.length!==m.size)&&(n.required=Array.from(m),t=!0)}Object.values(o).forEach(a);const d=n.patternProperties&&typeof n.patternProperties=="object"?n.patternProperties:{};Object.values(d).forEach(a);const c=n.dependencies&&typeof n.dependencies=="object"?n.dependencies:{};Object.values(c).forEach(u=>{u&&typeof u=="object"&&a(u)})}"format"in n&&(delete n.format,t=!0),n.items&&(Array.isArray(n.items)?n.items.forEach(a):a(n.items));for(const o of["allOf","anyOf","oneOf"])Array.isArray(n[o])&&n[o].forEach(a);for(const o of["not","if","then","else"])n[o]&&typeof n[o]=="object"&&a(n[o]);for(const o of["definitions","$defs"])n[o]&&typeof n[o]=="object"&&Object.values(n[o]).forEach(a)}};return a(s),{schema:s,changed:t}}function Cn(e){const[t,s]=i.useState(e?.defaultModel||e?.modelOptions?.[0]),[a,n]=i.useState(We(e?.defaultBaseUrl)),[o,l]=i.useState(""),[d,c]=i.useState(!1),[u,m]=i.useState([]),[h,f]=i.useState(wn),[g,p]=i.useState(Nr),[v,x]=i.useState(""),[y,b]=i.useState(!1),[N,E]=i.useState(null),[k,O]=i.useState(jn),[T,C]=i.useState(Nn),[S,B]=i.useState(kn),[U,oe]=i.useState(Jt),[j,$]=i.useState("0"),[R,_]=i.useState("auto"),[ve,F]=i.useState(""),M=w=>{f(w),p(null),x("")},L=w=>n(w),D=async()=>{const w=o.trim();if(!w||d)return;F("");const P={role:"user",content:w,timestamp:Date.now()},K=[...u,P];m(K),l(""),c(!0);try{const te=Sn(K,e?.systemPrompt),se={role:"assistant",content:(await hr(e,te,{model:t,baseUrl:We(a)})).content,timestamp:Date.now()};m(le=>[...le,se])}catch(te){F(te?.message||"Chat failed")}finally{c(!1)}},Q=()=>{const w=[...u].reverse().find(te=>te.role==="assistant");if(!w){F("No assistant message to extract JSON from.");return}const P=mn(w.content);if(!P){F("Could not extract JSON. Ensure the assistant returns a single JSON object.");return}if(P?.type!=="object"){F('Schema must declare "type":"object".');return}const{schema:K}=qe(P);f(JSON.stringify(K,null,2)),p(K),x("Schema adopted from assistant"),F("")},ee=()=>{F("");try{const w=JSON.parse(h);if(!w||typeof w!="object")throw new Error("Not an object");if(w.type!=="object")throw new Error('Schema must declare "type":"object"');const P=qe(w);p(P.schema),P.changed&&f(JSON.stringify(P.schema,null,2)),x(P.changed?"Schema valid (normalized unsupported keywords)":"Schema valid")}catch(w){p(null),F(`Invalid JSON: ${w?.message||"parse error"}`),x("")}},J=()=>{if(g)return g;try{const w=JSON.parse(h);if(!w||typeof w!="object")throw new Error("Structure must be a JSON object");if(w.type!=="object")throw new Error('Schema must declare "type":"object"');return p(w),w}catch(w){throw new Error(`Invalid structure: ${w?.message||"parse error"}`)}};return{experience:e,model:t,setModel:s,baseUrl:a,setBaseUrl:L,prompt:o,setPrompt:l,chatLoading:d,chatMessages:u,sendToChat:D,tryAdoptAssistantJson:Q,structureText:h,setStructureText:M,validateStructure:ee,structureStatus:v,objectType:k,setObjectType:O,objectName:T,setObjectName:C,createPrompt:S,setCreatePrompt:B,systemText:U,setSystemText:oe,temperature:j,setTemperature:$,strictMode:R,setStrictMode:_,handleCreate:async()=>{F(""),E(null);let w;try{w=J()}catch(se){F(se.message);return}const P=(k||w?.type||"").toString().trim();if(!P){F('Type is required to call /obj/{type}. Fill the Type field or include "type" in your structure.');return}const K=S.trim();if(!K){F("Provide a user prompt for the object generation request.");return}const te=U.trim()||Jt,$e=qe(w);w=$e.schema,$e.changed&&(p(w),f(JSON.stringify(w,null,2)),x("Schema normalized before create (unsupported keywords removed)")),b(!0);try{const se=We(a),le=Number.parseFloat(j),ft=R==="true"?!0:R==="false"?!1:void 0,{payload:ue}=await vn({baseUrl:se,structure:w,model:t,objectType:P,prompt:K,system:te,temperature:Number.isFinite(le)?le:void 0,strict:ft});E(ue);const pt=(P||ue?.type||w?.type||"object").toString(),Sr=(ue?.name||T||ue?.title||pt).toString();hn({id:`obj-${Date.now().toString(16)}`,type:pt,title:Sr,createdAt:Date.now(),structure:w,result:ue,conversation:u,prompt:K,system:te,temperature:Number.isFinite(le)?le:void 0,strict:ft})}catch(se){F(se?.message||"Object creation failed")}finally{b(!1)}},createLoading:y,error:ve,resultObj:N}}function En(){const e=da("objectmaker"),t=Cn(e);return r.jsx("div",{className:"space-y-8",children:r.jsxs("div",{className:"grid gap-6 md:grid-cols-12",children:[r.jsx(an,{baseUrl:t.baseUrl,setBaseUrl:t.setBaseUrl,model:t.model,setModel:t.setModel,experience:e,objectType:t.objectType}),r.jsx(nn,{prompt:t.prompt,setPrompt:t.setPrompt,chatMessages:t.chatMessages,chatLoading:t.chatLoading,onSend:t.sendToChat,onAdopt:t.tryAdoptAssistantJson}),r.jsx(dn,{structureText:t.structureText,setStructureText:t.setStructureText,onValidate:t.validateStructure,objectType:t.objectType,setObjectType:t.setObjectType,objectName:t.objectName,setObjectName:t.setObjectName,createPrompt:t.createPrompt,setCreatePrompt:t.setCreatePrompt,systemText:t.systemText,setSystemText:t.setSystemText,temperature:t.temperature,setTemperature:t.setTemperature,strictMode:t.strictMode,setStrictMode:t.setStrictMode,onCreate:t.handleCreate,createLoading:t.createLoading,error:t.error,resultObj:t.resultObj,structureStatus:t.structureStatus})]})})}function Rn({entry:e,onDelete:t}){const[s,a]=i.useState(!1),n=new Date(e.createdAt);return r.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white/80 p-3 shadow-sm dark:border-slate-800 dark:bg-slate-900/60",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-100",children:e.title}),r.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:n.toLocaleString()})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{className:"rounded-md border border-slate-300 px-2 py-1 text-xs text-slate-700 hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-800/60",onClick:()=>a(o=>!o),children:s?"Hide":"View"}),r.jsx("button",{className:"rounded-md border border-red-300 px-2 py-1 text-xs text-red-700 hover:bg-red-50 dark:border-red-800 dark:text-red-300 dark:hover:bg-red-900/30",onClick:t,children:"Delete"})]})]}),s?r.jsxs("div",{className:"mt-3 grid gap-3 lg:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx("div",{className:"mb-1 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"Result"}),r.jsx("pre",{className:"max-h-72 overflow-auto rounded-md border border-slate-200 bg-slate-50 p-2 text-[12px] text-slate-800 dark:border-slate-700 dark:bg-slate-900/50 dark:text-slate-200",children:JSON.stringify(e.result,null,2)})]}),r.jsxs("div",{children:[r.jsx("div",{className:"mb-1 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"Structure"}),r.jsx("pre",{className:"max-h-72 overflow-auto rounded-md border border-slate-200 bg-slate-50 p-2 text-[12px] text-slate-800 dark:border-slate-700 dark:bg-slate-900/50 dark:text-slate-200",children:JSON.stringify(e.structure,null,2)})]}),r.jsxs("div",{className:"lg:col-span-2",children:[r.jsx("div",{className:"mb-1 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"Conversation"}),r.jsx("div",{className:"max-h-56 space-y-2 overflow-auto",children:(e.conversation||[]).map((o,l)=>r.jsxs("div",{className:`rounded-md p-2 text-[12px] ${o.role==="user"?"bg-yellow-50 text-slate-800 dark:bg-yellow-500/10":"bg-slate-50 text-slate-700 dark:bg-slate-800/50 dark:text-slate-200"}`,children:[r.jsx("div",{className:"mb-1 text-[10px] uppercase tracking-wide text-slate-500 dark:text-slate-400",children:o.role}),r.jsx("div",{className:"whitespace-pre-wrap break-words",children:o.content})]},l))})]})]}):null]})}function An(){const[e,t]=i.useState(()=>wr()),s=i.useMemo(()=>pn(e),[e]);function a(o){const l=e.filter(d=>d!==o);t(l),kr(l)}function n(){fn(),t([])}return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-base font-semibold text-slate-800 dark:text-slate-100",children:"Object Zoo"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ae,{to:"/objectmaker",className:"rounded-md border border-slate-300 px-3 py-1.5 text-sm text-slate-700 hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-800/60",children:"Back to Builder"}),e.length>0?r.jsx("button",{onClick:n,className:"rounded-md border border-red-300 px-3 py-1.5 text-sm font-medium text-red-700 hover:bg-red-50 dark:border-red-800 dark:text-red-300 dark:hover:bg-red-900/30",children:"Clear Zoo"}):null]})]}),e.length===0?r.jsx("div",{className:"rounded-xl border border-slate-200 bg-white/70 p-6 text-sm text-slate-500 dark:border-slate-800 dark:bg-slate-900/60 dark:text-slate-400",children:"No entries yet. Create objects in the Builder, and they will appear here grouped by type."}):null,[...s.entries()].map(([o,l])=>r.jsxs("section",{className:"space-y-3",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:[o," — ",l.length]})}),r.jsx("div",{className:"grid gap-3 md:grid-cols-2",children:l.map(d=>r.jsx(Rn,{entry:d,onDelete:()=>a(d)},d.id))})]},o))]})}function On(){return r.jsx(ua,{children:r.jsx(ea,{children:r.jsx(xa,{children:r.jsxs(Ps,{children:[r.jsx(q,{path:"/",element:r.jsx(ga,{})}),xe.map(e=>e.id==="allergyfinder"?r.jsxs(i.Fragment,{children:[r.jsx(q,{path:e.path,element:r.jsx(he,{experience:e,navigation:r.jsx(Lt,{}),children:r.jsx(Pt,{experience:e})})}),r.jsx(q,{path:`${e.path}/cookies`,element:r.jsx(he,{experience:e,navigation:r.jsx(Lt,{}),children:r.jsx(tn,{})})})]},e.id):e.id==="objectmaker"?r.jsxs(i.Fragment,{children:[r.jsx(q,{path:e.path,element:r.jsx(he,{experience:e,navigation:r.jsx(Bt,{}),children:r.jsx(En,{})})}),r.jsx(q,{path:`${e.path}/zoo`,element:r.jsx(he,{experience:e,navigation:r.jsx(Bt,{}),children:r.jsx(An,{})})})]},e.id):r.jsx(q,{path:e.path,element:r.jsx(he,{experience:e,children:r.jsx(Pt,{experience:e})})},e.id)),r.jsx(q,{path:"/profile",element:r.jsx(sn,{})}),r.jsx(q,{path:"/about",element:r.jsx(ya,{})}),r.jsx(q,{path:"*",element:r.jsx(As,{to:"/",replace:!0})})]})})})})}_r.createRoot(document.getElementById("root")).render(r.jsx(Fr.StrictMode,{children:r.jsx(On,{})}));
