const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/STLViewer-7Ro9CFwD.js","assets/stl-CLert5F8.js","assets/react-CdawliiU.js","assets/markdown-BoWTVge5.js"])))=>i.map(i=>d[i]);
import{a as w,j as d,F as Fi,b as as,c as is,d as os,e as Qt,f as ss,g as ls,h as cs,i as us,k as ds,l as Ui,m as fs,n as Vi,o as hs,p as Dr,q as ps,s as xs,R as vs}from"./react-CdawliiU.js";import{_ as gs}from"./stl-CLert5F8.js";import{H as ze,j as Gi,t as $i,p as Hi,a as ms,b as zi,m as ys,d as Wi,c as bs}from"./markdown-BoWTVge5.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}})();/**
 * react-router v7.9.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var fa="popstate";function ws(r={}){function e(a,i){let{pathname:o="/",search:s="",hash:l=""}=Ct(a.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),fn("",{pathname:o,search:s,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(a,i){let o=a.document.querySelector("base"),s="";if(o&&o.getAttribute("href")){let l=a.location.href,c=l.indexOf("#");s=c===-1?l:l.slice(0,c)}return s+"#"+(typeof i=="string"?i:qt(i))}function n(a,i){qe(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(i)})`)}return As(e,t,n,r)}function xe(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function qe(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function _s(){return Math.random().toString(36).substring(2,10)}function ha(r,e){return{usr:r.state,key:r.key,idx:e}}function fn(r,e,t=null,n){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Ct(e):e,state:t,key:e&&e.key||n||_s()}}function qt({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function Ct(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substring(n),r=r.substring(0,n)),r&&(e.pathname=r)}return e}function As(r,e,t,n={}){let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,s="POP",l=null,c=u();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function u(){return(o.state||{idx:null}).idx}function f(){s="POP";let m=u(),y=m==null?null:m-c;c=m,l&&l({action:s,location:v.location,delta:y})}function h(m,y){s="PUSH";let g=fn(v.location,m,y);t&&t(g,m),c=u()+1;let _=ha(g,c),C=v.createHref(g);try{o.pushState(_,"",C)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;a.location.assign(C)}i&&l&&l({action:s,location:v.location,delta:1})}function p(m,y){s="REPLACE";let g=fn(v.location,m,y);t&&t(g,m),c=u();let _=ha(g,c),C=v.createHref(g);o.replaceState(_,"",C),i&&l&&l({action:s,location:v.location,delta:0})}function x(m){return Cs(m)}let v={get action(){return s},get location(){return r(a,o)},listen(m){if(l)throw new Error("A history only accepts one active listener");return a.addEventListener(fa,f),l=m,()=>{a.removeEventListener(fa,f),l=null}},createHref(m){return e(a,m)},createURL:x,encodeLocation(m){let y=x(m);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:p,go(m){return o.go(m)}};return v}function Cs(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),xe(t,"No window.location.(origin|href) available to create URL");let n=typeof r=="string"?r:qt(r);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function Xi(r,e,t="/"){return Es(r,e,t,!1)}function Es(r,e,t,n){let a=typeof e=="string"?Ct(e):e,i=dt(a.pathname||"/",t);if(i==null)return null;let o=Yi(r);Ss(o);let s=null;for(let l=0;s==null&&l<o.length;++l){let c=Bs(i);s=Ms(o[l],c,n)}return s}function Yi(r,e=[],t=[],n="",a=!1){let i=(o,s,l=a,c)=>{let u={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(n)&&l)return;xe(u.relativePath.startsWith(n),`Absolute route path "${u.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(n.length)}let f=ut([n,u.relativePath]),h=t.concat(u);o.children&&o.children.length>0&&(xe(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),Yi(o.children,e,h,f,l)),!(o.path==null&&!o.index)&&e.push({path:f,score:Ds(f,o.index),routesMeta:h})};return r.forEach((o,s)=>{if(o.path===""||!o.path?.includes("?"))i(o,s);else for(let l of Zi(o.path))i(o,s,!0,l)}),e}function Zi(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,a=t.endsWith("?"),i=t.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=Zi(n.join("/")),s=[];return s.push(...o.map(l=>l===""?i:[i,l].join("/"))),a&&s.push(...o),s.map(l=>r.startsWith("/")&&l===""?"/":l)}function Ss(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:Ps(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var Ns=/^:[\w-]+$/,Is=3,Os=2,ks=1,Ts=10,Rs=-2,pa=r=>r==="*";function Ds(r,e){let t=r.split("/"),n=t.length;return t.some(pa)&&(n+=Rs),e&&(n+=Os),t.filter(a=>!pa(a)).reduce((a,i)=>a+(Ns.test(i)?Is:i===""?ks:Ts),n)}function Ps(r,e){return r.length===e.length&&r.slice(0,-1).every((n,a)=>n===e[a])?r[r.length-1]-e[e.length-1]:0}function Ms(r,e,t=!1){let{routesMeta:n}=r,a={},i="/",o=[];for(let s=0;s<n.length;++s){let l=n[s],c=s===n.length-1,u=i==="/"?e:e.slice(i.length)||"/",f=mr({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),h=l.route;if(!f&&c&&t&&!n[n.length-1].route.index&&(f=mr({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!f)return null;Object.assign(a,f.params),o.push({params:a,pathname:ut([i,f.pathname]),pathnameBase:Vs(ut([i,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(i=ut([i,f.pathnameBase]))}return o}function mr(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=js(r.path,r.caseSensitive,r.end),a=e.match(t);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),s=a.slice(1);return{params:n.reduce((c,{paramName:u,isOptional:f},h)=>{if(u==="*"){let x=s[h]||"";o=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const p=s[h];return f&&!p?c[u]=void 0:c[u]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:r}}function js(r,e=!1,t=!0){qe(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let n=[],a="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,s,l)=>(n.push({paramName:s,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(n.push({paramName:"*"}),a+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":r!==""&&r!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),n]}function Bs(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return qe(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function dt(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}function Ls(r,e="/"){let{pathname:t,search:n="",hash:a=""}=typeof r=="string"?Ct(r):r;return{pathname:t?t.startsWith("/")?t:Fs(t,e):e,search:Gs(n),hash:$s(a)}}function Fs(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Gr(r,e,t,n){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Us(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Tn(r){let e=Us(r);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function Rn(r,e,t,n=!1){let a;typeof r=="string"?a=Ct(r):(a={...r},xe(!a.pathname||!a.pathname.includes("?"),Gr("?","pathname","search",a)),xe(!a.pathname||!a.pathname.includes("#"),Gr("#","pathname","hash",a)),xe(!a.search||!a.search.includes("#"),Gr("#","search","hash",a)));let i=r===""||a.pathname==="",o=i?"/":a.pathname,s;if(o==null)s=t;else{let f=e.length-1;if(!n&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),f-=1;a.pathname=h.join("/")}s=f>=0?e[f]:"/"}let l=Ls(a,s),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var ut=r=>r.join("/").replace(/\/\/+/g,"/"),Vs=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),Gs=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,$s=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function Hs(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var Ki=["POST","PUT","PATCH","DELETE"];new Set(Ki);var zs=["GET",...Ki];new Set(zs);var Dt=w.createContext(null);Dt.displayName="DataRouter";var Pr=w.createContext(null);Pr.displayName="DataRouterState";w.createContext(!1);var qi=w.createContext({isTransitioning:!1});qi.displayName="ViewTransition";var Ws=w.createContext(new Map);Ws.displayName="Fetchers";var Xs=w.createContext(null);Xs.displayName="Await";var rt=w.createContext(null);rt.displayName="Navigation";var er=w.createContext(null);er.displayName="Location";var ct=w.createContext({outlet:null,matches:[],isDataRoute:!1});ct.displayName="Route";var Dn=w.createContext(null);Dn.displayName="RouteError";function Ys(r,{relative:e}={}){xe(Pt(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=w.useContext(rt),{hash:a,pathname:i,search:o}=tr(r,{relative:e}),s=i;return t!=="/"&&(s=i==="/"?t:ut([t,i])),n.createHref({pathname:s,search:o,hash:a})}function Pt(){return w.useContext(er)!=null}function mt(){return xe(Pt(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(er).location}var Ji="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Qi(r){w.useContext(rt).static||w.useLayoutEffect(r)}function eo(){let{isDataRoute:r}=w.useContext(ct);return r?sl():Zs()}function Zs(){xe(Pt(),"useNavigate() may be used only in the context of a <Router> component.");let r=w.useContext(Dt),{basename:e,navigator:t}=w.useContext(rt),{matches:n}=w.useContext(ct),{pathname:a}=mt(),i=JSON.stringify(Tn(n)),o=w.useRef(!1);return Qi(()=>{o.current=!0}),w.useCallback((l,c={})=>{if(qe(o.current,Ji),!o.current)return;if(typeof l=="number"){t.go(l);return}let u=Rn(l,JSON.parse(i),a,c.relative==="path");r==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:ut([e,u.pathname])),(c.replace?t.replace:t.push)(u,c.state,c)},[e,t,i,a,r])}w.createContext(null);function tr(r,{relative:e}={}){let{matches:t}=w.useContext(ct),{pathname:n}=mt(),a=JSON.stringify(Tn(t));return w.useMemo(()=>Rn(r,JSON.parse(a),n,e==="path"),[r,a,n,e])}function Ks(r,e){return to(r,e)}function to(r,e,t,n,a){xe(Pt(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=w.useContext(rt),{matches:o}=w.useContext(ct),s=o[o.length-1],l=s?s.params:{},c=s?s.pathname:"/",u=s?s.pathnameBase:"/",f=s&&s.route;{let g=f&&f.path||"";ro(c,!f||g.endsWith("*")||g.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${g}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${g}"> to <Route path="${g==="/"?"*":`${g}/*`}">.`)}let h=mt(),p;if(e){let g=typeof e=="string"?Ct(e):e;xe(u==="/"||g.pathname?.startsWith(u),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${g.pathname}" was given in the \`location\` prop.`),p=g}else p=h;let x=p.pathname||"/",v=x;if(u!=="/"){let g=u.replace(/^\//,"").split("/");v="/"+x.replace(/^\//,"").split("/").slice(g.length).join("/")}let m=Xi(r,{pathname:v});qe(f||m!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),qe(m==null||m[m.length-1].route.element!==void 0||m[m.length-1].route.Component!==void 0||m[m.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=tl(m&&m.map(g=>Object.assign({},g,{params:Object.assign({},l,g.params),pathname:ut([u,i.encodeLocation?i.encodeLocation(g.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:ut([u,i.encodeLocation?i.encodeLocation(g.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:g.pathnameBase])})),o,t,n,a);return e&&y?w.createElement(er.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},y):y}function qs(){let r=ol(),e=Hs(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",r),o=w.createElement(w.Fragment,null,w.createElement("p",null,"💿 Hey developer 👋"),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:i},"ErrorBoundary")," or"," ",w.createElement("code",{style:i},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),t?w.createElement("pre",{style:a},t):null,o)}var Js=w.createElement(qs,null),Qs=class extends w.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.unstable_onError?this.props.unstable_onError(r,e):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?w.createElement(ct.Provider,{value:this.props.routeContext},w.createElement(Dn.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function el({routeContext:r,match:e,children:t}){let n=w.useContext(Dt);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),w.createElement(ct.Provider,{value:r},t)}function tl(r,e=[],t=null,n=null,a=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let i=r,o=t?.errors;if(o!=null){let c=i.findIndex(u=>u.route.id&&o?.[u.route.id]!==void 0);xe(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let s=!1,l=-1;if(t)for(let c=0;c<i.length;c++){let u=i[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=c),u.route.id){let{loaderData:f,errors:h}=t,p=u.route.loader&&!f.hasOwnProperty(u.route.id)&&(!h||h[u.route.id]===void 0);if(u.route.lazy||p){s=!0,l>=0?i=i.slice(0,l+1):i=[i[0]];break}}}return i.reduceRight((c,u,f)=>{let h,p=!1,x=null,v=null;t&&(h=o&&u.route.id?o[u.route.id]:void 0,x=u.route.errorElement||Js,s&&(l<0&&f===0?(ro("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,v=null):l===f&&(p=!0,v=u.route.hydrateFallbackElement||null)));let m=e.concat(i.slice(0,f+1)),y=()=>{let g;return h?g=x:p?g=v:u.route.Component?g=w.createElement(u.route.Component,null):u.route.element?g=u.route.element:g=c,w.createElement(el,{match:u,routeContext:{outlet:c,matches:m,isDataRoute:t!=null},children:g})};return t&&(u.route.ErrorBoundary||u.route.errorElement||f===0)?w.createElement(Qs,{location:t.location,revalidation:t.revalidation,component:x,error:h,children:y(),routeContext:{outlet:null,matches:m,isDataRoute:!0},unstable_onError:n}):y()},null)}function Pn(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function rl(r){let e=w.useContext(Dt);return xe(e,Pn(r)),e}function nl(r){let e=w.useContext(Pr);return xe(e,Pn(r)),e}function al(r){let e=w.useContext(ct);return xe(e,Pn(r)),e}function Mn(r){let e=al(r),t=e.matches[e.matches.length-1];return xe(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function il(){return Mn("useRouteId")}function ol(){let r=w.useContext(Dn),e=nl("useRouteError"),t=Mn("useRouteError");return r!==void 0?r:e.errors?.[t]}function sl(){let{router:r}=rl("useNavigate"),e=Mn("useNavigate"),t=w.useRef(!1);return Qi(()=>{t.current=!0}),w.useCallback(async(a,i={})=>{qe(t.current,Ji),t.current&&(typeof a=="number"?r.navigate(a):await r.navigate(a,{fromRouteId:e,...i}))},[r,e])}var xa={};function ro(r,e,t){!e&&!xa[r]&&(xa[r]=!0,qe(!1,t))}w.memo(ll);function ll({routes:r,future:e,state:t,unstable_onError:n}){return to(r,void 0,t,n,e)}function cl({to:r,replace:e,state:t,relative:n}){xe(Pt(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=w.useContext(rt);qe(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=w.useContext(ct),{pathname:o}=mt(),s=eo(),l=Rn(r,Tn(i),o,n==="path"),c=JSON.stringify(l);return w.useEffect(()=>{s(JSON.parse(c),{replace:e,state:t,relative:n})},[s,c,n,e,t]),null}function Ie(r){xe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ul({basename:r="/",children:e=null,location:t,navigationType:n="POP",navigator:a,static:i=!1}){xe(!Pt(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=r.replace(/^\/*/,"/"),s=w.useMemo(()=>({basename:o,navigator:a,static:i,future:{}}),[o,a,i]);typeof t=="string"&&(t=Ct(t));let{pathname:l="/",search:c="",hash:u="",state:f=null,key:h="default"}=t,p=w.useMemo(()=>{let x=dt(l,o);return x==null?null:{location:{pathname:x,search:c,hash:u,state:f,key:h},navigationType:n}},[o,l,c,u,f,h,n]);return qe(p!=null,`<Router basename="${o}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:w.createElement(rt.Provider,{value:s},w.createElement(er.Provider,{children:e,value:p}))}function dl({children:r,location:e}){return Ks(hn(r),e)}function hn(r,e=[]){let t=[];return w.Children.forEach(r,(n,a)=>{if(!w.isValidElement(n))return;let i=[...e,a];if(n.type===w.Fragment){t.push.apply(t,hn(n.props.children,i));return}xe(n.type===Ie,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),xe(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=hn(n.props.children,i)),t.push(o)}),t}var fr="get",hr="application/x-www-form-urlencoded";function Mr(r){return r!=null&&typeof r.tagName=="string"}function fl(r){return Mr(r)&&r.tagName.toLowerCase()==="button"}function hl(r){return Mr(r)&&r.tagName.toLowerCase()==="form"}function pl(r){return Mr(r)&&r.tagName.toLowerCase()==="input"}function xl(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function vl(r,e){return r.button===0&&(!e||e==="_self")&&!xl(r)}var ir=null;function gl(){if(ir===null)try{new FormData(document.createElement("form"),0),ir=!1}catch{ir=!0}return ir}var ml=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function $r(r){return r!=null&&!ml.has(r)?(qe(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${hr}"`),null):r}function yl(r,e){let t,n,a,i,o;if(hl(r)){let s=r.getAttribute("action");n=s?dt(s,e):null,t=r.getAttribute("method")||fr,a=$r(r.getAttribute("enctype"))||hr,i=new FormData(r)}else if(fl(r)||pl(r)&&(r.type==="submit"||r.type==="image")){let s=r.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=r.getAttribute("formaction")||s.getAttribute("action");if(n=l?dt(l,e):null,t=r.getAttribute("formmethod")||s.getAttribute("method")||fr,a=$r(r.getAttribute("formenctype"))||$r(s.getAttribute("enctype"))||hr,i=new FormData(s,r),!gl()){let{name:c,type:u,value:f}=r;if(u==="image"){let h=c?`${c}.`:"";i.append(`${h}x`,"0"),i.append(`${h}y`,"0")}else c&&i.append(c,f)}}else{if(Mr(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=fr,n=null,a=hr,o=r}return i&&a==="text/plain"&&(o=i,i=void 0),{action:n,method:t.toLowerCase(),encType:a,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function jn(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function bl(r,e,t){let n=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return n.pathname==="/"?n.pathname=`_root.${t}`:e&&dt(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${t}`,n}async function wl(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function _l(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function Al(r,e,t){let n=await Promise.all(r.map(async a=>{let i=e.routes[a.route.id];if(i){let o=await wl(i,t);return o.links?o.links():[]}return[]}));return Nl(n.flat(1).filter(_l).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function va(r,e,t,n,a,i){let o=(l,c)=>t[c]?l.route.id!==t[c].route.id:!0,s=(l,c)=>t[c].pathname!==l.pathname||t[c].route.path?.endsWith("*")&&t[c].params["*"]!==l.params["*"];return i==="assets"?e.filter((l,c)=>o(l,c)||s(l,c)):i==="data"?e.filter((l,c)=>{let u=n.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(o(l,c)||s(l,c))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function Cl(r,e,{includeHydrateFallback:t}={}){return El(r.map(n=>{let a=e.routes[n.route.id];if(!a)return[];let i=[a.module];return a.clientActionModule&&(i=i.concat(a.clientActionModule)),a.clientLoaderModule&&(i=i.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(i=i.concat(a.hydrateFallbackModule)),a.imports&&(i=i.concat(a.imports)),i}).flat(1))}function El(r){return[...new Set(r)]}function Sl(r){let e={},t=Object.keys(r).sort();for(let n of t)e[n]=r[n];return e}function Nl(r,e){let t=new Set;return new Set(e),r.reduce((n,a)=>{let i=JSON.stringify(Sl(a));return t.has(i)||(t.add(i),n.push({key:i,link:a})),n},[])}function no(){let r=w.useContext(Dt);return jn(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function Il(){let r=w.useContext(Pr);return jn(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Bn=w.createContext(void 0);Bn.displayName="FrameworkContext";function ao(){let r=w.useContext(Bn);return jn(r,"You must render this element inside a <HydratedRouter> element"),r}function Ol(r,e){let t=w.useContext(Bn),[n,a]=w.useState(!1),[i,o]=w.useState(!1),{onFocus:s,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:f}=e,h=w.useRef(null);w.useEffect(()=>{if(r==="render"&&o(!0),r==="viewport"){let v=y=>{y.forEach(g=>{o(g.isIntersecting)})},m=new IntersectionObserver(v,{threshold:.5});return h.current&&m.observe(h.current),()=>{m.disconnect()}}},[r]),w.useEffect(()=>{if(n){let v=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(v)}}},[n]);let p=()=>{a(!0)},x=()=>{a(!1),o(!1)};return t?r!=="intent"?[i,h,{}]:[i,h,{onFocus:Ft(s,p),onBlur:Ft(l,x),onMouseEnter:Ft(c,p),onMouseLeave:Ft(u,x),onTouchStart:Ft(f,p)}]:[!1,h,{}]}function Ft(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function kl({page:r,...e}){let{router:t}=no(),n=w.useMemo(()=>Xi(t.routes,r,t.basename),[t.routes,r,t.basename]);return n?w.createElement(Rl,{page:r,matches:n,...e}):null}function Tl(r){let{manifest:e,routeModules:t}=ao(),[n,a]=w.useState([]);return w.useEffect(()=>{let i=!1;return Al(r,e,t).then(o=>{i||a(o)}),()=>{i=!0}},[r,e,t]),n}function Rl({page:r,matches:e,...t}){let n=mt(),{manifest:a,routeModules:i}=ao(),{basename:o}=no(),{loaderData:s,matches:l}=Il(),c=w.useMemo(()=>va(r,e,l,a,n,"data"),[r,e,l,a,n]),u=w.useMemo(()=>va(r,e,l,a,n,"assets"),[r,e,l,a,n]),f=w.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let x=new Set,v=!1;if(e.forEach(y=>{let g=a.routes[y.route.id];!g||!g.hasLoader||(!c.some(_=>_.route.id===y.route.id)&&y.route.id in s&&i[y.route.id]?.shouldRevalidate||g.hasClientLoader?v=!0:x.add(y.route.id))}),x.size===0)return[];let m=bl(r,o,"data");return v&&x.size>0&&m.searchParams.set("_routes",e.filter(y=>x.has(y.route.id)).map(y=>y.route.id).join(",")),[m.pathname+m.search]},[o,s,n,a,c,e,r,i]),h=w.useMemo(()=>Cl(u,a),[u,a]),p=Tl(u);return w.createElement(w.Fragment,null,f.map(x=>w.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...t})),h.map(x=>w.createElement("link",{key:x,rel:"modulepreload",href:x,...t})),p.map(({key:x,link:v})=>w.createElement("link",{key:x,nonce:t.nonce,...v})))}function Dl(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var io=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{io&&(window.__reactRouterVersion="7.9.3")}catch{}function Pl({basename:r,children:e,window:t}){let n=w.useRef();n.current==null&&(n.current=ws({window:t,v5Compat:!0}));let a=n.current,[i,o]=w.useState({action:a.action,location:a.location}),s=w.useCallback(l=>{w.startTransition(()=>o(l))},[o]);return w.useLayoutEffect(()=>a.listen(s),[a,s]),w.createElement(ul,{basename:r,children:e,location:i.location,navigationType:i.action,navigator:a})}var oo=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ot=w.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:a,reloadDocument:i,replace:o,state:s,target:l,to:c,preventScrollReset:u,viewTransition:f,...h},p){let{basename:x}=w.useContext(rt),v=typeof c=="string"&&oo.test(c),m,y=!1;if(typeof c=="string"&&v&&(m=c,io))try{let k=new URL(window.location.href),R=c.startsWith("//")?new URL(k.protocol+c):new URL(c),M=dt(R.pathname,x);R.origin===k.origin&&M!=null?c=M+R.search+R.hash:y=!0}catch{qe(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let g=Ys(c,{relative:a}),[_,C,A]=Ol(n,h),E=Bl(c,{replace:o,state:s,target:l,preventScrollReset:u,relative:a,viewTransition:f});function N(k){e&&e(k),k.defaultPrevented||E(k)}let I=w.createElement("a",{...h,...A,href:m||g,onClick:y||i?e:N,ref:Dl(p,C),target:l,"data-discover":!v&&t==="render"?"true":void 0});return _&&!v?w.createElement(w.Fragment,null,I,w.createElement(kl,{page:g})):I});ot.displayName="Link";var Ve=w.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:a=!1,style:i,to:o,viewTransition:s,children:l,...c},u){let f=tr(o,{relative:c.relative}),h=mt(),p=w.useContext(Pr),{navigator:x,basename:v}=w.useContext(rt),m=p!=null&&Gl(f)&&s===!0,y=x.encodeLocation?x.encodeLocation(f).pathname:f.pathname,g=h.pathname,_=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;t||(g=g.toLowerCase(),_=_?_.toLowerCase():null,y=y.toLowerCase()),_&&v&&(_=dt(_,v)||_);const C=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let A=g===y||!a&&g.startsWith(y)&&g.charAt(C)==="/",E=_!=null&&(_===y||!a&&_.startsWith(y)&&_.charAt(y.length)==="/"),N={isActive:A,isPending:E,isTransitioning:m},I=A?e:void 0,k;typeof n=="function"?k=n(N):k=[n,A?"active":null,E?"pending":null,m?"transitioning":null].filter(Boolean).join(" ");let R=typeof i=="function"?i(N):i;return w.createElement(ot,{...c,"aria-current":I,className:k,ref:u,style:R,to:o,viewTransition:s},typeof l=="function"?l(N):l)});Ve.displayName="NavLink";var Ml=w.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:a,state:i,method:o=fr,action:s,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:f,...h},p)=>{let x=Ul(),v=Vl(s,{relative:c}),m=o.toLowerCase()==="get"?"get":"post",y=typeof s=="string"&&oo.test(s),g=_=>{if(l&&l(_),_.defaultPrevented)return;_.preventDefault();let C=_.nativeEvent.submitter,A=C?.getAttribute("formmethod")||o;x(C||_.currentTarget,{fetcherKey:e,method:A,navigate:t,replace:a,state:i,relative:c,preventScrollReset:u,viewTransition:f})};return w.createElement("form",{ref:p,method:m,action:v,onSubmit:n?l:g,...h,"data-discover":!y&&r==="render"?"true":void 0})});Ml.displayName="Form";function jl(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function so(r){let e=w.useContext(Dt);return xe(e,jl(r)),e}function Bl(r,{target:e,replace:t,state:n,preventScrollReset:a,relative:i,viewTransition:o}={}){let s=eo(),l=mt(),c=tr(r,{relative:i});return w.useCallback(u=>{if(vl(u,e)){u.preventDefault();let f=t!==void 0?t:qt(l)===qt(c);s(r,{replace:f,state:n,preventScrollReset:a,relative:i,viewTransition:o})}},[l,s,c,t,n,e,r,a,i,o])}var Ll=0,Fl=()=>`__${String(++Ll)}__`;function Ul(){let{router:r}=so("useSubmit"),{basename:e}=w.useContext(rt),t=il();return w.useCallback(async(n,a={})=>{let{action:i,method:o,encType:s,formData:l,body:c}=yl(n,e);if(a.navigate===!1){let u=a.fetcherKey||Fl();await r.fetch(u,t,a.action||i,{preventScrollReset:a.preventScrollReset,formData:l,body:c,formMethod:a.method||o,formEncType:a.encType||s,flushSync:a.flushSync})}else await r.navigate(a.action||i,{preventScrollReset:a.preventScrollReset,formData:l,body:c,formMethod:a.method||o,formEncType:a.encType||s,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[r,e,t])}function Vl(r,{relative:e}={}){let{basename:t}=w.useContext(rt),n=w.useContext(ct);xe(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),i={...tr(r||".",{relative:e})},o=mt();if(r==null){i.search=o.search;let s=new URLSearchParams(i.search),l=s.getAll("index");if(l.some(u=>u==="")){s.delete("index"),l.filter(f=>f).forEach(f=>s.append("index",f));let u=s.toString();i.search=u?`?${u}`:""}}return(!r||r===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(i.pathname=i.pathname==="/"?t:ut([t,i.pathname])),qt(i)}function Gl(r,{relative:e}={}){let t=w.useContext(qi);xe(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=so("useViewTransitionState"),a=tr(r,{relative:e});if(!t.isTransitioning)return!1;let i=dt(t.currentLocation.pathname,n)||t.currentLocation.pathname,o=dt(t.nextLocation.pathname,n)||t.nextLocation.pathname;return mr(a.pathname,o)!=null||mr(a.pathname,i)!=null}var ga={};const Hr=typeof globalThis<"u"&&ga?ga:void 0;function Qe(r){if(r&&Hr&&Hr[r]!==void 0)return Hr[r]}const He=(Qe("VITE_CHAT_BASE_URL")||"https://groq-endpoint.louispaulet13.workers.dev").replace(/\/$/,""),Mt=[{id:"allergyfinder",path:"/allergyfinder",name:"AllergyFinder",headline:"Allergy Assistant",description:"Use Groq to explore ingredient lists, highlight allergens, and triage food questions with product context.",badge:"Nutrition",heroGradient:"from-emerald-500 to-teal-500",panelAccent:"bg-emerald-100 text-emerald-900 dark:bg-emerald-500/20 dark:text-emerald-200",navAccent:{gradient:"from-emerald-500 to-teal-500",hover:"hover:bg-emerald-500/10 hover:text-emerald-600 hover:border-emerald-400/60 dark:hover:bg-emerald-500/20 dark:hover:text-emerald-200 dark:hover:border-emerald-400/60",focus:"focus-visible:ring-emerald-500/40"},defaultModel:"openai/gpt-oss-20b",modelOptions:["openai/gpt-oss-20b","openai/gpt-oss-120b"],greeting:"Hi! Ask me about allergens in any food and I'll look it up for you.",promptPlaceholder:"Ask about allergens in a recipe or packaged food...",systemPrompt:["You are an allergy assistant that uses product data to answer questions about food allergens.","Use the provided context when it is relevant and be transparent about any gaps.","When a barcode is available, share the product page URL.","Encourage users to double-check packaging for medical decisions.","When allergy notes from the Allergy Cookie Editor are supplied, treat them as authoritative user-provided context and surface relevant reminders proactively."].join(" "),allowBaseUrlOverride:!1,enableStlViewer:!1,enableBarcodeScanner:!0,logLabel:"AllergyFinder",defaultBaseUrl:(Qe("VITE_ALLERGY_CHAT_BASE_URL")||He).replace(/\/$/,"")},{id:"objectmaker",path:"/objectmaker",name:"Object Maker",headline:"Design JSON → Create Objects",description:"Handcraft a JSON structure or ask the assistant to propose one, then call the /obj endpoint to instantiate concrete objects. Save results and browse them in the Zoo.",badge:"Builder",heroGradient:"from-yellow-400 to-amber-600",panelAccent:"bg-yellow-100 text-yellow-900 dark:bg-yellow-500/20 dark:text-yellow-200",navAccent:{gradient:"from-yellow-400 to-amber-600",hover:"hover:bg-yellow-500/10 hover:text-amber-600 hover:border-amber-400/60 dark:hover:bg-yellow-500/20 dark:hover:text-yellow-200 dark:hover:border-amber-400/60",focus:"focus-visible:ring-yellow-500/40"},defaultModel:"openai/gpt-oss-20b",modelOptions:["openai/gpt-oss-20b","openai/gpt-oss-120b"],greeting:'Describe an object you want (e.g., pizza, hot sauce, car). I will propose a JSON Schema with type "object" and useful properties.',promptPlaceholder:"Describe the JSON Schema you want…",systemPrompt:["You help design concise JSON Schema definitions (draft-agnostic) for a single object.",'Always return exactly one JSON object that is a JSON Schema with top-level "type":"object" and a "properties" map.','Prefer simple types (string, number, integer, boolean, array, object). Include "items" for arrays. Avoid examples or prose.','Avoid unsupported JSON Schema keywords such as "format", "$ref", or vendor-specific extensions. Express constraints with enums or descriptions instead.',"Do not include markdown fences or backticks. Return only the JSON Schema object."].join(" "),allowBaseUrlOverride:!1,enableStlViewer:!1,logLabel:"Object Maker",defaultBaseUrl:(Qe("VITE_OBJECTMAKER_CHAT_BASE_URL")||He).replace(/\/$/,"")},{id:"stlviewer",path:"/stlviewer",name:"STL Studio",headline:"3D Printing Copilot",description:"Chat about STL files, design tweaks, and 3D printing tips while previewing models inline.",badge:"3D",heroGradient:"from-indigo-500 to-slate-700",panelAccent:"bg-indigo-100 text-indigo-900 dark:bg-indigo-500/20 dark:text-indigo-200",navAccent:{gradient:"from-indigo-500 to-slate-700",hover:"hover:bg-indigo-500/10 hover:text-indigo-400 hover:border-indigo-400/60 dark:hover:bg-indigo-500/20 dark:hover:text-indigo-200 dark:hover:border-indigo-400/60",focus:"focus-visible:ring-indigo-500/40"},defaultModel:"openai/gpt-oss-20b",modelOptions:["openai/gpt-oss-20b","openai/gpt-oss-120b"],greeting:"Hi! Ask me anything about STL models or 3D printing workflows.",promptPlaceholder:"Need help with an STL? Ask about fixes, slicing, or design tweaks...",systemPrompt:["You are a helpful AI assistant who understands STL files and 3D printing workflows.","Provide concise, practical answers and include tips for viewing or tweaking STL content when relevant."].join(" "),allowBaseUrlOverride:!1,enableStlViewer:!0,logLabel:"STL Studio",defaultBaseUrl:(Qe("VITE_STL_CHAT_BASE_URL")||He).replace(/\/$/,"")},{id:"pokedex",path:"/pokedex",name:"Pokedex",headline:"Concise Pokemon Companion",description:"Ask for typings, strengths, weaknesses, and quick lore delivered by a remote Pokedex service.",badge:"Pokemon",heroGradient:"from-rose-500 to-orange-500",panelAccent:"bg-rose-100 text-rose-900 dark:bg-rose-500/20 dark:text-rose-200",navAccent:{gradient:"from-rose-500 to-orange-500",hover:"hover:bg-rose-500/10 hover:text-rose-500 hover:border-rose-400/60 dark:hover:bg-rose-500/20 dark:hover:text-rose-200 dark:hover:border-rose-400/60",focus:"focus-visible:ring-rose-500/40"},defaultModel:"openai/gpt-oss-20b",modelOptions:["openai/gpt-oss-20b","openai/gpt-oss-120b"],greeting:"Hi! Ask me about any Pokemon and I will fetch quick Pokedex facts.",promptPlaceholder:"Example: What are Gengar strengths and weaknesses?",systemPrompt:["You are a remote Pokedex assistant. Answer questions about Pokemon in two or three sentences.","Highlight typings, notable strengths or weaknesses, and other concise Pokedex facts.","If the question falls outside Pokemon, politely redirect the user."].join(" "),allowBaseUrlOverride:!0,enableStlViewer:!1,logLabel:"Pokedex",defaultBaseUrl:(Qe("VITE_POKEDEX_CHAT_BASE_URL")||He).replace(/\/$/,"")},{id:"imagegen",path:"/imagegen",name:"Flux Image Lab",headline:"Prompt → Flux image in seconds",description:"Send prompts to the Groq-hosted Flux endpoint, preview the returned image, and keep a cookie-backed gallery of recent hits.",badge:"Images",heroGradient:"from-sky-500 to-cyan-600",panelAccent:"bg-sky-100 text-sky-900 dark:bg-sky-500/20 dark:text-sky-200",navAccent:{gradient:"from-sky-500 to-cyan-600",hover:"hover:bg-sky-500/10 hover:text-sky-600 hover:border-sky-400/60 dark:hover:bg-sky-500/20 dark:hover:text-sky-200 dark:hover:border-sky-400/60",focus:"focus-visible:ring-sky-500/40"},defaultModel:"flux-image-endpoint",modelOptions:["Flux image endpoint"],imageApiBaseUrl:(Qe("VITE_IMAGE_API_BASE_URL")||He).replace(/\/$/,""),allowBaseUrlOverride:!1,enableStlViewer:!1,enableBarcodeScanner:!1,logLabel:"ImageGen"},{id:"svglab",path:"/svg-lab",name:"SVG Prompt Lab",headline:"Sketch vector art from pure text instructions.",description:"Feed prompts into the /svg worker endpoint, preview the returned artwork inline, and keep a cookie-backed gallery of your favorite prompts.",badge:"Vector",heroGradient:"from-violet-500 to-purple-600",panelAccent:"bg-violet-100 text-violet-900 dark:bg-violet-500/20 dark:text-violet-200",navAccent:{gradient:"from-violet-500 to-purple-600",hover:"hover:bg-violet-500/10 hover:text-violet-600 hover:border-violet-400/60 dark:hover:bg-violet-500/20 dark:hover:text-violet-200 dark:hover:border-violet-400/60",focus:"focus-visible:ring-violet-500/40"},defaultModel:"svg-route",modelOptions:["SVG worker route"],allowBaseUrlOverride:!1,enableStlViewer:!1,enableBarcodeScanner:!1,logLabel:"SVGLab",svgApiBaseUrl:(Qe("VITE_SVG_API_BASE_URL")||He).replace(/\/$/,"")},{id:"flagfoundry",path:"/flag-foundry",name:"Flag Foundry",headline:"Throttle /svg calls to rebuild national flags.",description:"Queue flag prompts for the SVG worker, loading a new European flag every second with a Unicode reference for accuracy checks.",badge:"Atlas",heroGradient:"from-sky-500 to-blue-600",panelAccent:"bg-sky-100 text-sky-900 dark:bg-sky-500/20 dark:text-sky-200",navAccent:{gradient:"from-sky-500 to-blue-600",hover:"hover:bg-sky-500/10 hover:text-sky-600 hover:border-sky-400/60 dark:hover:bg-sky-500/20 dark:hover:text-sky-200 dark:hover:border-sky-400/60",focus:"focus-visible:ring-sky-500/40"},defaultModel:"svg-route",modelOptions:["SVG worker route"],allowBaseUrlOverride:!1,enableStlViewer:!1,enableBarcodeScanner:!1,logLabel:"FlagFoundry",svgApiBaseUrl:(Qe("VITE_SVG_API_BASE_URL")||He).replace(/\/$/,"")},{id:"pizzamaker",path:"/pizza-maker",name:"Pizza Maker",headline:"Design your dream pie, then let Groq plate it.",description:"Select sauces, cheeses, toppings, and art direction. Groq converts your build into a luxe image prompt and renders the pie.",badge:"Culinary",heroGradient:"from-orange-500 to-red-500",panelAccent:"bg-orange-100 text-orange-900 dark:bg-orange-500/20 dark:text-orange-200",navAccent:{gradient:"from-orange-500 to-red-500",hover:"hover:bg-orange-500/10 hover:text-orange-600 hover:border-orange-400/60 dark:hover:bg-orange-500/20 dark:hover:text-orange-200 dark:hover:border-orange-400/60",focus:"focus-visible:ring-orange-500/40"},defaultModel:"openai/gpt-oss-20b",modelOptions:["openai/gpt-oss-20b","openai/gpt-oss-120b"],greeting:"Craving something specific? Dial in your toppings and we will stage the perfect pizza photo.",promptPlaceholder:"Describe the pizza mood you want to capture…",systemPrompt:["You are a culinary art director who helps users plan photorealistic pizza imagery.","Reference the provided configuration faithfully and suggest plating or styling ideas when asked."].join(" "),allowBaseUrlOverride:!1,enableStlViewer:!1,enableBarcodeScanner:!1,logLabel:"PizzaMaker",imageApiBaseUrl:(Qe("VITE_IMAGE_API_BASE_URL")||He).replace(/\/$/,""),defaultBaseUrl:He},{id:"carmaker",path:"/car-maker",name:"Car Maker",headline:"Style a hero car and Groq will stage the scene.",description:"Select the brand, finish, camera angle, and cinematic backdrop. Groq transforms it into a luxe prompt and renders the ride.",badge:"Automotive",heroGradient:"from-slate-900 via-sky-800 to-cyan-600",panelAccent:"bg-slate-900 text-white dark:bg-slate-900 dark:text-slate-100",navAccent:{gradient:"from-slate-900 via-sky-800 to-cyan-600",hover:"hover:bg-slate-900/10 hover:text-slate-900 hover:border-slate-700/60 dark:hover:bg-slate-900/30 dark:hover:text-slate-100 dark:hover:border-slate-500/60",focus:"focus-visible:ring-slate-900/40"},defaultModel:"openai/gpt-oss-20b",modelOptions:["openai/gpt-oss-20b","openai/gpt-oss-120b"],greeting:"Ready to spec a show-stopping hero car? Tune the exterior and I will help stage it.",promptPlaceholder:"Describe the vibe you want for this hero car shot…",systemPrompt:["You are an automotive concept stylist who helps users craft photorealistic hero car imagery.","Only discuss visible exterior design, stance, lighting, and setting."].join(" "),allowBaseUrlOverride:!1,enableStlViewer:!1,enableBarcodeScanner:!1,logLabel:"CarMaker",imageApiBaseUrl:(Qe("VITE_IMAGE_API_BASE_URL")||He).replace(/\/$/,""),defaultBaseUrl:He},{id:"newsanalyzer",path:"/newsanalyzer",name:"News Analyzer",headline:"Real-time News Analysis",description:"Explore and analyze real-time news feeds from various sources, powered by a Cloudflare Worker.",badge:"News",heroGradient:"from-blue-500 to-sky-600",panelAccent:"bg-blue-100 text-blue-900 dark:bg-blue-500/20 dark:text-blue-200",navAccent:{gradient:"from-blue-500 to-sky-600",hover:"hover:bg-blue-500/10 hover:text-blue-600 hover:border-blue-400/60 dark:hover:bg-blue-500/20 dark:hover:text-blue-200 dark:hover:border-blue-400/60",focus:"focus-visible:ring-blue-500/40"},defaultModel:"openai/gpt-oss-20b",modelOptions:["openai/gpt-oss-20b","openai/gpt-oss-120b"],greeting:"Welcome to the News Analyzer. Select your topics and let's see what's happening.",promptPlaceholder:"Ask a question about the news...",systemPrompt:["You are a news analysis assistant.","Use the provided news articles to answer questions and provide summaries.","Be neutral and objective in your analysis."].join(" "),allowBaseUrlOverride:!0,enableStlViewer:!1,enableBarcodeScanner:!1,logLabel:"NewsAnalyzer",defaultBaseUrl:(Qe("VITE_NEWS_BASE_URL")||He).replace(/\/$/,"")},{id:"sixdegrees",path:"/six-degrees",name:"Six Degrees Of",headline:"Watch a message morph through six parody passes.",description:"Start with any sentence and see how Groq remixes it into six escalating parodies, delivered one beat at a time.",badge:"Remix",heroGradient:"from-fuchsia-500 to-purple-600",panelAccent:"bg-fuchsia-100 text-fuchsia-900 dark:bg-fuchsia-500/20 dark:text-fuchsia-200",navAccent:{gradient:"from-fuchsia-500 to-purple-600",hover:"hover:bg-fuchsia-500/10 hover:text-fuchsia-600 hover:border-fuchsia-400/60 dark:hover:bg-fuchsia-500/20 dark:hover:text-fuchsia-200 dark:hover:border-fuchsia-400/60",focus:"focus-visible:ring-fuchsia-500/40"},defaultModel:"openai/gpt-oss-20b",modelOptions:["openai/gpt-oss-20b","openai/gpt-oss-120b"],systemPrompt:["You are a playful parody writer. When given any text you respond with a witty parody of it.","Keep responses concise (2-4 sentences) and ensure they clearly riff on the original idea.","Match the length of the original message as closely as possible—no more than about 20% longer than the user's input.","Avoid quoting the original verbatim; reshape it with humor and creative twists."].join(" "),allowBaseUrlOverride:!1,enableStlViewer:!1,enableBarcodeScanner:!1,logLabel:"SixDegrees",defaultBaseUrl:He}];function Ln(r){return Mt.find(e=>e.id===r)}const lo=w.createContext({theme:"light",setTheme:()=>{}});function $l(){if(typeof window>"u")return"light";try{return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}catch{return"light"}}function Hl({children:r}){const[e,t]=w.useState(()=>{try{const a=localStorage.getItem("theme");if(a==="light"||a==="dark")return a}catch{}return $l()});w.useEffect(()=>{try{localStorage.setItem("theme",e)}catch{}const a=document.documentElement;e==="dark"?a.classList.add("dark"):a.classList.remove("dark")},[e]);const n=w.useMemo(()=>({theme:e,setTheme:t}),[e]);return d.jsx(lo.Provider,{value:n,children:r})}function zl(){return w.useContext(lo)}function Wl(){const{theme:r,setTheme:e}=zl(),t=r==="dark";return d.jsxs("button",{type:"button",onClick:()=>e(t?"light":"dark"),className:"inline-flex items-center gap-2 rounded-md border border-slate-300 bg-white/80 px-3 py-2 text-sm font-medium text-slate-700 shadow-sm hover:bg-slate-50 dark:border-slate-700 dark:bg-slate-800/70 dark:text-slate-100",title:"Toggle theme",children:[t?d.jsx(as,{className:"h-5 w-5"}):d.jsx(is,{className:"h-5 w-5"}),d.jsx("span",{className:"hidden sm:inline",children:t?"Light mode":"Dark mode"})]})}function ma({isActive:r}){const e="inline-flex items-center rounded-full border px-4 py-2 text-sm font-medium transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-slate-900",t="focus-visible:ring-brand-500/40";return r?`${e} border-transparent bg-brand-600 text-white shadow ${t}`:`${e} border-slate-300 bg-white/70 text-slate-600 hover:border-brand-500/60 hover:bg-brand-500/10 hover:text-brand-600 dark:border-slate-700 dark:bg-slate-900/60 dark:text-slate-300 dark:hover:text-white ${t}`}function Xl(r){const e=r?.gradient||"from-brand-500 to-brand-600",t=r?.hover||"hover:bg-brand-500/10 hover:text-brand-600 hover:border-brand-400/60",n=r?.focus||"focus-visible:ring-brand-500/40";return({isActive:a})=>{const i="inline-flex items-center rounded-full border px-4 py-2 text-sm font-medium transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-slate-900";return a?`${i} border-transparent bg-gradient-to-r ${e} text-white shadow ${n}`:`${i} border-slate-300 bg-white/70 text-slate-600 ${t} dark:border-slate-700 dark:bg-slate-900/60 dark:text-slate-300 dark:hover:text-white ${n}`}}function ya({isActive:r}){return`inline-flex items-center rounded-full border border-slate-300 px-3 py-1 text-xs font-medium text-slate-600 transition hover:border-brand-500 hover:text-brand-600 dark:border-slate-600 dark:text-slate-300 ${r?"bg-brand-600 text-white border-brand-600 shadow-sm":""}`}function Yl({isActive:r}){const e="inline-flex h-11 w-11 items-center justify-center rounded-full border text-slate-600 transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500/40 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:text-slate-200 dark:focus-visible:ring-offset-slate-900";return r?`${e} border-brand-500 bg-brand-600 text-white shadow`:`${e} border-slate-300 bg-white/80 hover:border-brand-500/60 hover:bg-brand-500/10 hover:text-brand-600 dark:border-slate-700 dark:bg-slate-800/70`}function Zl({children:r}){return d.jsxs("div",{className:"min-h-screen flex flex-col",children:[d.jsx("header",{className:"sticky top-0 z-20 border-b border-slate-200 bg-white/80 backdrop-blur supports-[backdrop-filter]:bg-white/70 dark:border-slate-800 dark:bg-slate-900/70",children:d.jsxs("div",{className:"mx-auto flex max-w-6xl items-center justify-between gap-4 px-4 py-4",children:[d.jsxs(Ve,{to:"/",className:"flex items-center gap-3",children:[d.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-xl bg-brand-600 text-white text-lg font-semibold",children:"llI"}),d.jsxs("div",{className:"leading-tight",children:[d.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Groq"}),d.jsx("div",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"AllIn Studio"})]})]}),d.jsxs("nav",{className:"hidden items-center gap-2 md:flex",children:[d.jsx(Ve,{to:"/",className:ma,end:!0,children:"Overview"}),Mt.filter(e=>e.id!=="objectmaker"&&e.id!=="stlviewer"&&e.id!=="sixdegrees"&&e.id!=="imagegen"&&e.id!=="svglab"&&e.id!=="flagfoundry"&&e.id!=="pizzamaker"&&e.id!=="carmaker").map(e=>d.jsx(Ve,{to:e.path,className:Xl(e.navAccent),children:e.name},e.id)),d.jsx(Ve,{to:"/about",className:ma,children:"About"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs(Ve,{to:"/profile",className:Yl,title:"Profile options",children:[d.jsx(Fi,{className:"h-5 w-5"}),d.jsx("span",{className:"sr-only",children:"Profile options"})]}),d.jsx(Wl,{})]})]})}),d.jsx("main",{className:"mx-auto w-full max-w-6xl flex-1 px-4 py-8",children:r}),d.jsx("footer",{className:"mt-auto border-t border-slate-200 bg-white/80 py-6 text-sm text-slate-600 backdrop-blur supports-[backdrop-filter]:bg-white/70 dark:border-slate-800 dark:bg-slate-900/70 dark:text-slate-300",children:d.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-2 px-4 text-center sm:flex-row sm:items-center sm:justify-between sm:text-left",children:[d.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-x-3 gap-y-2 sm:justify-start",children:[d.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-x-2 gap-y-1 sm:justify-start",children:[d.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:"Groq AllIn Studio"}),d.jsx("span",{className:"text-xs uppercase tracking-wide text-slate-400 dark:text-slate-500",children:"Unified Workspace ⚙️"})]}),d.jsx(Ve,{to:"/",className:ya,end:!0,children:"Overview"}),d.jsx(Ve,{to:"/about",className:ya,children:"About"})]}),d.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Fast chats powered by Groq’s API · Built with React, Vite, and Tailwind CSS ⚡️"})]})})]})}const Kl={allergyfinder:d.jsxs(d.Fragment,{children:[d.jsx("p",{children:"🛡️ AllergyFinder taps into Open Food Facts so it can examine ingredient panels in context. Bring your saved allergen profile into the conversation and the assistant highlights risky ingredients, suggests safe alternatives, and drafts grocery lists that respect your preferences. Transparency comes first: responses call out when product data is missing or when you should double-check real-world packaging. 🧾"}),d.jsx("p",{children:"Use it for meal planning, quick label triage, or inspiration when you are cooking for friends with different dietary needs. Because it runs on Groq-accelerated LLMs, you get near-instant summaries even for lengthy ingredient lists. 🚀"})]}),objectmaker:d.jsxs(d.Fragment,{children:[d.jsxs("p",{children:["🧠 Object Maker is a workspace for structured creativity. Start with a conversational brief and the assistant drafts JSON schemas that describe imaginative artifacts—anything from a pizza, to a track-ready car, to a curated ice cream flight. Once the schema looks right, you can call the",d.jsx("code",{className:"rounded bg-slate-900/80 px-1 py-0.5 text-[0.7rem] text-white",children:"/obj"})," endpoint to spin up dozens of variants that adhere to the structure. The workflow is grounded in Groq hosted",d.jsx("span",{className:"font-medium",children:" openai/gpt-oss-20b"})," and ",d.jsx("span",{className:"font-medium",children:"openai/gpt-oss-120b"}),"models, keeping generation fast while your schema evolves. ⚙️"]}),d.jsx("p",{children:"Each session curates a “Zoo” of finished creations so you can revisit, iterate, and compare outputs. The aim is to demonstrate how reliable JSON scaffolding unlocks downstream tooling: the sharper the schema, the more dependable the generated objects. Image generation integrations are planned, but today is about perfecting the structured prompt. 🗂️"})]}),stlviewer:d.jsxs(d.Fragment,{children:[d.jsx("p",{children:"🧩 STL Studio preserves the original 3D printing workflow. The assistant can draft STL snippets, explain mesh edits, and, thanks to the embedded viewer, render models directly inside the chat transcript. Share a design tweak, paste an STL file, and see the preview update without leaving the conversation. 🖥️"}),d.jsx("p",{children:"It is ideal for rapid iteration on printable parts, offering slicing tips, material suggestions, and context-aware troubleshooting. Whether you are validating overhangs or collaborating on a new gadget, the mix of text guidance and inline visuals keeps the feedback loop tight. 🔁"})]}),pokedex:d.jsxs(d.Fragment,{children:[d.jsx("p",{children:"📘 The Pokédex workspace is a focused encyclopedia for trainers. Ask about any Pokémon and you will get typings, strengths, weaknesses, and a bite-sized lore blurb sourced from our remote service. It is tuned to stay in-universe: off-topic questions politely steer you back to the Pokédex. 🎓"}),d.jsx("p",{children:"Combine it with team-building sessions or quick reminders before a battle. Because the base URL is configurable, you can point the workspace at experimental datasets or community-maintained entries while keeping the same interface. 🔄"})]}),svglab:d.jsxs(d.Fragment,{children:[d.jsxs("p",{children:["🎨 SVG Prompt Lab turns the paint-by-text demo into a polished studio. Type instructions (“draw a rocket in a frame, make the stars sparkle”) and the UI relays them to the ",d.jsx("code",{className:"rounded bg-slate-900/80 px-1 py-0.5 text-[0.7rem] text-white",children:"/svg"}),"worker route. The JSON response includes the raw markup and a ready-to-use data URL so you can preview the artwork in seconds."]}),d.jsx("p",{children:"Every generation automatically lands in a cookie-backed gallery. Tap a tile to reload its markup, copy the SVG source, and remix the prompt. It is a fast way to prototype iconography or onboarding illustrations while the LLM does the coordinate math for you. ✍️"})]}),flagfoundry:d.jsxs(d.Fragment,{children:[d.jsxs("p",{children:["🚩 Flag Foundry adapts the SVG Prompt Lab flow for vexillology fans. It queues precise prompts for the ",d.jsx("code",{className:"rounded bg-slate-900/80 px-1 py-0.5 text-[0.7rem] text-white",children:"/svg"})," route and waits one second between calls so you can watch European flags appear one by one."]}),d.jsxs("p",{children:["Each card pairs the AI generated SVG with a Unicode-rendered reference flag using ",d.jsx("code",{className:"rounded bg-slate-900/80 px-1 py-0.5 text-[0.7rem] text-white",children:"react-country-flag"}),", making it easy to compare palettes and ratios while the gallery fills in real time. 🌍"]})]}),sixdegrees:d.jsxs(d.Fragment,{children:[d.jsx("p",{children:"🎭 Six Degrees Of is a parody escalator. Drop in any sentence and we will send it through six rapid-fire parodies, each one riffing only on what came immediately before it. The responses show up one-by-one so you can watch the humor mutate in real time. ⏱️"}),d.jsx("p",{children:"Under the hood it taps the same Groq-accelerated chat endpoint, but with a playful system prompt that keeps each remix short, witty, and distinct from the original. Use it for creative warm-ups, writing prompts, or just a quick laugh between tasks. 😄"})]})},ql=Object.fromEntries(Mt.map(r=>[r.id,r])),pn=[{id:"specialists",title:"Specialist Assistants",description:"Domain experts that deliver answers with context, transparency, and speed.",experienceIds:["allergyfinder","newsanalyzer"]},{id:"makers",title:"Makers & Builders",description:"Structured creativity labs for schemas, meshes, and programmable visuals.",experienceIds:["objectmaker","stlviewer","svglab"]},{id:"visuals",title:"Visual Launchpads",description:"Image-first workflows that stage cinematic scenes and product-ready art.",experienceIds:["imagegen","pizzamaker","carmaker"]},{id:"play",title:"Play & Discovery",description:"Lighthearted sandboxes for fandoms, remixing, and storytelling breaks.",experienceIds:["pokedex","sixdegrees"]}],Jl=new Set(pn.flatMap(r=>r.experienceIds)),ba=Mt.map(r=>r.id).filter(r=>!Jl.has(r)),Ql=ba.length?[...pn,{id:"fresh",title:"Fresh Drops",description:"New experiments and utilities that just landed in the studio.",experienceIds:ba}]:pn;function ec(){return d.jsxs("div",{className:"space-y-12",children:[d.jsxs("section",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-brand-600 to-indigo-700 px-8 py-12 text-white shadow-xl",children:[d.jsxs("div",{className:"max-w-5xl space-y-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("p",{className:"text-sm uppercase tracking-[0.3em] text-white/80",children:"Groq Studio"}),d.jsx("h1",{className:"text-3xl font-semibold sm:text-4xl",children:"All experiences in one workspace."}),d.jsx("p",{className:"text-base text-white/90",children:"Launch the assistants that fit your workflow—whether you are prototyping JSON schemas, staging cinematic imagery, or diving into trusted domain research. ⚡️"})]}),d.jsx("div",{className:"grid gap-4 pt-2 sm:grid-cols-2",children:Ql.map(r=>d.jsxs("div",{className:"group relative overflow-hidden rounded-2xl border border-white/10 bg-white/10 p-5 shadow-sm backdrop-blur transition hover:border-white/20 hover:bg-white/15",children:[d.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-br from-white/5 via-white/0 to-white/10 opacity-0 transition group-hover:opacity-100","aria-hidden":!0}),d.jsxs("div",{className:"relative space-y-3",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-semibold text-white",children:r.title}),d.jsx("p",{className:"text-sm text-white/80",children:r.description})]}),d.jsx("div",{className:"flex flex-wrap gap-2 pt-1",children:r.experienceIds.map(e=>ql[e]).filter(Boolean).map(e=>d.jsxs(ot,{to:e.path,className:"inline-flex items-center gap-1 rounded-full bg-white/90 px-3 py-1.5 text-xs font-semibold text-slate-900 transition hover:bg-white",children:[d.jsx("span",{children:e.name}),d.jsx("span",{"aria-hidden":!0,children:"↗"})]},e.id))})]})]},r.id))})]}),d.jsx("div",{className:"absolute -right-24 -top-24 h-56 w-56 rounded-full bg-white/10 blur-3xl","aria-hidden":!0})]}),d.jsxs("section",{className:"space-y-10",children:[d.jsxs("header",{className:"space-y-3",children:[d.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Deep dive into each workspace ✨"}),d.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Every experience shares the core Groq Studio shell, but the long-form briefs below highlight their data sources, inline tools, and standout workflows so you can choose the right copilot for the moment. 🎯"})]}),d.jsx("div",{className:"space-y-8",children:Mt.map(r=>{const e=Kl[r.id]??d.jsx("p",{children:r.description});return d.jsxs("article",{className:"group relative overflow-hidden rounded-3xl border border-slate-200 bg-white/90 p-8 shadow-sm transition-all hover:-translate-y-1 hover:shadow-xl dark:border-slate-800 dark:bg-slate-900",children:[d.jsxs("div",{className:"pointer-events-none absolute inset-0 opacity-0 transition-opacity group-hover:opacity-100","aria-hidden":!0,children:[d.jsx("div",{className:"absolute -top-20 right-0 h-40 w-40 rounded-full bg-brand-500/10 blur-3xl"}),d.jsx("div",{className:"absolute -bottom-24 left-6 h-36 w-36 rounded-full bg-slate-400/10 blur-3xl"})]}),d.jsxs("div",{className:"relative space-y-5",children:[d.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[d.jsxs("div",{className:"flex flex-col gap-2",children:[d.jsx("div",{className:`h-1 w-16 rounded-full bg-gradient-to-r ${r.heroGradient}`,"aria-hidden":!0}),d.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:r.name})]}),d.jsx("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold ${r.panelAccent}`,children:r.badge}),d.jsxs(ot,{to:r.path,className:"ml-auto inline-flex items-center gap-2 rounded-full border border-slate-300 px-3 py-1 text-sm font-medium text-slate-700 transition hover:border-brand-500 hover:bg-brand-50 hover:text-brand-600 dark:border-slate-700 dark:text-slate-200 dark:hover:border-brand-400/60 dark:hover:bg-brand-500/10",children:["Enter workspace",d.jsx("span",{"aria-hidden":!0,children:"→"})]})]}),d.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:r.headline}),d.jsx("div",{className:"space-y-3 text-sm leading-relaxed text-slate-600 dark:text-slate-300",children:e}),d.jsx("div",{className:"text-xs uppercase tracking-wider text-slate-400 dark:text-slate-500",children:r.modelOptions.join(" • ")})]})]},r.id)})})]})]})}function Xe({experience:r,children:e,navigation:t}){return r?d.jsxs("div",{className:"space-y-8",children:[d.jsxs("section",{className:`relative overflow-hidden rounded-3xl bg-gradient-to-br px-8 py-10 text-white shadow-lg ${r.heroGradient}`,children:[d.jsxs("div",{className:"max-w-3xl space-y-4",children:[d.jsx("span",{className:"inline-flex items-center rounded-full bg-black/20 px-3 py-1 text-xs uppercase tracking-wide",children:r.badge}),d.jsx("h1",{className:"text-3xl font-semibold sm:text-4xl",children:r.name}),d.jsx("p",{className:"text-base text-white/90",children:r.headline}),d.jsx("p",{className:"text-sm text-white/80",children:r.description})]}),d.jsx("div",{className:"absolute -right-20 bottom-0 top-0 w-64 bg-white/10 blur-3xl","aria-hidden":!0})]}),t?d.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white/80 px-4 py-3 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:t}):null,d.jsx("div",{children:e})]}):d.jsx("div",{className:"rounded-2xl border border-red-200 bg-red-50 p-6 text-red-700 dark:border-red-800 dark:bg-red-900/40 dark:text-red-200",children:"Experience not found."})}function tc(){return d.jsxs("div",{className:"space-y-12",children:[d.jsx("section",{className:"rounded-3xl bg-gradient-to-br from-slate-900 via-brand-700 to-indigo-600 px-8 py-12 text-white shadow-xl",children:d.jsxs("div",{className:"max-w-3xl space-y-4",children:[d.jsx("p",{className:"text-sm uppercase tracking-[0.3em] text-white/70",children:"About Groq AllIn Studio"}),d.jsx("h1",{className:"text-3xl font-semibold sm:text-4xl",children:"Louis Paulet's Groq AllIn Studio 🤝"}),d.jsx("p",{className:"text-base text-white/90",children:"Groq AllIn Studio is a personal initiative by Louis Paulet, Data Scientist at Checkout.com. The project explores how GroqCloud services can support focused conversational tools while complementing his production work. Each module tests practical applications, latency-sensitive interfaces, and the supporting infrastructure required to run them responsibly. 🔍"}),d.jsx(ot,{to:"/",className:"inline-flex items-center rounded-full bg-white/90 px-4 py-2 text-sm font-medium text-slate-900 transition hover:bg-white",children:"Back to Overview"})]})}),d.jsxs("section",{className:"grid gap-8 md:grid-cols-3",children:[d.jsxs("article",{className:"space-y-3 rounded-2xl border border-slate-200 bg-white/80 p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900/70",children:[d.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"1. Frontend studio 🖥️"}),d.jsxs("p",{className:"text-sm leading-relaxed text-slate-600 dark:text-slate-400",children:["The ",d.jsx("code",{children:"all_in/"})," workspace is the production React shell that unifies the Pokédex, AllergyFinder, STL Viewer, and Object Maker experiences for deployment. It is the only project that ships live, while reusing shared chat and UI components across each tab."]})]}),d.jsxs("article",{className:"space-y-3 rounded-2xl border border-slate-200 bg-white/80 p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900/70",children:[d.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"2. Cloudflare worker backend ☁️"}),d.jsx("p",{className:"text-sm leading-relaxed text-slate-600 dark:text-slate-400",children:"☁️ A dedicated Cloudflare Worker powers the Groq backend. Every chat in the studio tunnels through this worker, which enriches prompts with tools like product lookups before relaying Groq responses."})]}),d.jsxs("article",{className:"space-y-3 rounded-2xl border border-slate-200 bg-white/80 p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900/70",children:[d.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"3. Applied research space 🧪"}),d.jsx("p",{className:"text-sm leading-relaxed text-slate-600 dark:text-slate-400",children:"🔬 The studio hosts a rotating set of exploratory prompts and prototypes that examine new interaction patterns. It is the venue for trying emerging Groq capabilities, refining responsible guardrails, and translating lessons back into production-quality solutions."})]})]}),d.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900/70",children:[d.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Why the worker matters 🛠️"}),d.jsx("p",{className:"mt-3 text-sm leading-relaxed text-slate-600 dark:text-slate-400",children:"Louis designed the worker to carry its own intelligence. Beyond proxying Groq models, it can query product data when a chat session asks about allergens, providing the same product evidence that powers the dedicated AllergyFinder experience. 🧠"}),d.jsx("p",{className:"mt-3 text-sm leading-relaxed text-slate-600 dark:text-slate-400",children:"The Object Maker tooling leans on the worker too: schema brainstorming happens through the chat endpoint, then the structured output endpoint turns those schemas into real JSON objects. 🧾"})]}),d.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900/70",children:[d.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Supported worker routes 🚦"}),d.jsxs("ul",{className:"mt-4 space-y-3 text-sm text-slate-600 dark:text-slate-400",children:[d.jsxs("li",{children:[d.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"POST /chat"})," — primary endpoint used by every experience. The frontend appends ",d.jsx("code",{children:"/chat"})," to the configured base URL and sends OpenAI-style chat payloads; the worker can augment requests with product lookups before returning Groq responses. 💬"]}),d.jsxs("li",{children:[d.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"GET /flavor-finder/<food>"})," — helper route that fetches product entries directly, useful for debugging the worker's ingredient sourcing without spinning up the UI. 🔎"]}),d.jsxs("li",{children:[d.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"GET /news/<category>"})," — curated news feed powering the News Analyzer experience. The worker aggregates trusted sources per category and returns normalized JSON so the UI can render headlines instantly. 🗞️"]}),d.jsxs("li",{children:[d.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"POST /obj/<type> (and /object*/ variants)"})," — structured generation endpoint consumed by Object Maker. It accepts a JSON schema, user prompt, and optional model parameters, then returns a compliant object. 🧩"]})]}),d.jsx("p",{className:"mt-4 text-sm leading-relaxed text-slate-600 dark:text-slate-400",children:"The worker keeps each experiment consistent, ensuring the studio remains reliable even as new ideas are introduced. 📈"})]})]})}function rc({conversations:r,activeId:e,onSelect:t,onNew:n,onRename:a,onFlushHistory:i,disableNew:o=!1,disableFlush:s=!1}){const[l,c]=w.useState(null),[u,f]=w.useState("");return d.jsxs("div",{className:"h-full rounded-2xl border border-slate-200 bg-white/80 p-3 shadow-sm dark:border-slate-800 dark:bg-slate-900/60",children:[d.jsxs("button",{type:"button",onClick:n,disabled:o,className:"mb-3 inline-flex w-full items-center justify-center gap-2 rounded-xl bg-brand-600 px-3 py-2 text-sm font-medium text-white transition hover:bg-brand-700 disabled:cursor-not-allowed disabled:bg-brand-600/60",children:[d.jsx(os,{className:"h-5 w-5"})," New chat"]}),i?d.jsxs("button",{type:"button",onClick:i,disabled:s,className:"mb-4 inline-flex w-full items-center justify-center gap-2 rounded-xl border border-slate-300 px-3 py-2 text-sm font-medium text-slate-600 transition hover:border-slate-400 hover:bg-slate-50 disabled:cursor-not-allowed disabled:text-slate-400 dark:border-slate-700 dark:text-slate-300 dark:hover:border-slate-600 dark:hover:bg-slate-800",children:[d.jsx(Qt,{className:"h-5 w-5"})," Delete saved chats"]}):null,d.jsx("div",{className:"space-y-1",children:r.map(h=>d.jsxs("div",{className:`group flex items-center justify-between rounded-xl border px-3 py-2 text-sm transition ${h.id===e?"border-brand-600 bg-brand-50 text-brand-700 dark:border-brand-500 dark:bg-slate-800 dark:text-brand-300":"border-slate-200 text-slate-600 hover:bg-slate-50 dark:border-slate-700 dark:text-slate-300 dark:hover:bg-slate-800"}`,onClick:()=>t?.(h.id),children:[l===h.id?d.jsx("form",{onSubmit:p=>{p.preventDefault(),a?.(h.id,u||h.title),c(null)},className:"flex grow items-center gap-2",children:d.jsx("input",{autoFocus:!0,className:"w-full rounded-md border border-slate-300 px-2 py-1 text-sm text-slate-700 focus:border-brand-500 focus:outline-none focus:ring-1 focus:ring-brand-500 dark:border-slate-600 dark:bg-slate-800 dark:text-slate-100",defaultValue:h.title,onChange:p=>f(p.target.value),onBlur:()=>c(null)})}):d.jsx("div",{className:"truncate pr-2 text-sm font-medium",children:h.title}),d.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),c(h.id),f(h.title)},className:"invisible rounded-md p-1 text-slate-500 transition group-hover:visible hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-700",title:"Rename",children:d.jsx(ss,{className:"h-4 w-4"})})]},h.id))})]})}ze.registerLanguage("javascript",Gi);ze.registerLanguage("js",Gi);ze.registerLanguage("typescript",$i);ze.registerLanguage("ts",$i);ze.registerLanguage("python",Hi);ze.registerLanguage("py",Hi);ze.registerLanguage("json",ms);ze.registerLanguage("bash",zi);ze.registerLanguage("sh",zi);ze.registerLanguage("markdown",ys);Wi.setOptions({breaks:!0,highlight(r,e){try{return e&&ze.getLanguage(e)?ze.highlight(r,{language:e}).value:ze.highlightAuto(r).value}catch{return r}}});function nc(r){const e=Wi.parse(r||"");return bs.sanitize(e)}function ac(r){return(typeof r=="number"?new Date(r):r).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}class ic extends w.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught",e,t)}render(){return this.state.hasError?d.jsx("div",{className:"h-64 grid place-items-center text-sm text-red-600 dark:text-red-400",children:"Failed to render 3D preview."}):this.props.children}}const oc=w.lazy(()=>gs(()=>import("./STLViewer-7Ro9CFwD.js"),__vite__mapDeps([0,1,2,3])));function sc(r){if(!r)return[];const e=[],t=/(https?:\/\/\S+?\.stl)\b/gi,n=new Set;let a;for(;(a=t.exec(r))!==null;)n.add(a[1]);for(const u of n)e.push({type:"url",url:u});const i=r.toLowerCase(),o=/```([^\n`]*)\n([\s\S]*?)```/g;let s;for(;(s=o.exec(r))!==null;){const u=(s[1]||"").trim().toLowerCase(),f=s[2]||"",h=f.toLowerCase(),p=(h.match(/facet normal/g)||[]).length;(u==="stl"||h.startsWith("solid")||p>=4&&h.includes("vertex"))&&e.push({type:"text",text:f.trim()})}const l=(i.match(/facet normal/g)||[]).length;return(/(\n|^)\s*solid\b/.test(i)&&l>=1||l>=4&&i.includes("vertex"))&&(e.some(u=>u.type==="text")||e.push({type:"text",text:r.trim()})),e}function lc({experience:r,role:e,content:t,name:n,timestamp:a,streaming:i=!1,showAvatar:o=!0,showName:s=!0}){const l=e==="user",c=!!r?.enableStlViewer,u=w.useMemo(()=>c?sc(t):[],[t,c]),f=w.useMemo(()=>{if(!c)return!1;const h=(t||"").toLowerCase();return[h.includes(".stl"),h.includes("facet normal"),h.includes("vertex "),h.includes("outer loop")].filter(Boolean).length>=2},[t,c]);return d.jsxs("div",{className:`flex ${l?"justify-end":"justify-start"}`,children:[!l&&o&&d.jsx("div",{className:"mr-2 mt-1 h-7 w-7 shrink-0 rounded-full bg-brand-600 text-white",children:d.jsx("div",{className:"grid h-full w-full place-items-center",children:d.jsx(ls,{className:"h-4 w-4"})})}),d.jsxs("div",{className:l?"max-w-[80%] rounded-2xl bg-indigo-600 px-4 py-2 text-sm text-white shadow":"max-w-[80%] rounded-2xl border border-slate-200 bg-white px-4 py-2 text-sm text-slate-800 shadow-sm dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",children:[s&&d.jsxs("div",{className:`mb-1 text-xs ${l?"text-indigo-100/80":"text-slate-500 dark:text-slate-400"}`,children:[n," • ",ac(a)]}),l?d.jsx("div",{className:"whitespace-pre-wrap",children:t}):d.jsx("div",{className:"prose",dangerouslySetInnerHTML:{__html:nc(t)}}),c&&u.length>0&&!i&&d.jsx("div",{className:"mt-2",children:d.jsx(ic,{children:d.jsx(w.Suspense,{fallback:d.jsx("div",{className:"h-64 grid place-items-center text-slate-500",children:"Loading 3D viewer… ⏳"}),children:d.jsx(oc,{source:u[0]})})})}),c&&u.length>0&&i&&d.jsx("div",{className:"mt-2 text-xs text-slate-500",children:"3D preview will appear when the response finishes… 🛰️"}),c&&u.length===0&&!i&&f&&d.jsx("div",{className:"mt-2 text-xs text-amber-600 dark:text-amber-400",children:"The response looks like STL content but may be incomplete. Wrap it in a fenced block (```stl … ```), or include full facets so the preview can render correctly. 🧱"})]}),l&&o&&d.jsx("div",{className:"ml-2 mt-1 h-7 w-7 shrink-0 rounded-full bg-slate-200 text-slate-600",children:d.jsx("div",{className:"grid h-full w-full place-items-center",children:d.jsx(Fi,{className:"h-4 w-4"})})})]})}function cc(r){return r.map((e,t,n)=>{const a=t>0?n[t-1]:null,i=t<n.length-1?n[t+1]:null,o=!a||a.role!==e.role,s=!i||i.role!==e.role;return{...e,isFirstOfGroup:o,isLastOfGroup:s}})}function uc({experience:r,messages:e}){const t=w.useRef(null);return w.useEffect(()=>{t.current?.scrollIntoView({behavior:"smooth",block:"end"})},[e]),d.jsx("div",{className:"h-[65vh] overflow-y-auto rounded-2xl border border-slate-200 bg-white/80 p-4 shadow-sm thin-scrollbar dark:border-slate-800 dark:bg-slate-900/60",children:d.jsxs("div",{className:"flex flex-col gap-3",children:[cc(e).map((n,a)=>d.jsx(lc,{experience:r,role:n.role,content:n.content,name:n.name,timestamp:n.timestamp,streaming:n.streaming,showAvatar:n.isFirstOfGroup,showName:n.isFirstOfGroup,sources:n.sources},a)),d.jsx("div",{ref:t})]})})}function dc({value:r,onChange:e,onSend:t,onStop:n,loading:a,onClear:i,placeholder:o,onOpenScanner:s}){return d.jsx("form",{onSubmit:l=>{l.preventDefault(),a||t?.(r)},className:"sticky bottom-0 w-full",children:d.jsxs("div",{className:"flex items-end gap-2 rounded-2xl border border-slate-200 bg-white/90 p-2 shadow-sm backdrop-blur dark:border-slate-700 dark:bg-slate-900/60",children:[d.jsx("textarea",{className:"block w-full resize-none rounded-xl border-none bg-transparent p-3 text-sm text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-brand-600/60 dark:bg-slate-800/70 dark:text-slate-100 dark:placeholder-slate-400",rows:2,value:r,onChange:l=>e?.(l.target.value),placeholder:o||"Ask anything... (Shift+Enter for newline)",onKeyDown:l=>{l.key==="Enter"&&!l.shiftKey&&(l.preventDefault(),a||t?.(r))}}),d.jsx("div",{className:"flex items-center gap-2 pr-1",children:a?d.jsx("button",{type:"button",onClick:n,className:"inline-flex items-center rounded-xl bg-slate-200 px-3 py-2 text-slate-700 hover:bg-slate-300 dark:bg-slate-800 dark:text-slate-100 dark:hover:bg-slate-700",title:"Stop",children:d.jsx(cs,{className:"h-5 w-5"})}):d.jsxs(d.Fragment,{children:[s&&d.jsx("button",{type:"button",onClick:()=>s?.(),className:"inline-flex items-center rounded-xl bg-slate-100 px-3 py-2 text-slate-700 hover:bg-slate-200 dark:bg-slate-800/80 dark:text-slate-200 dark:hover:bg-slate-700",title:"Scan barcode",children:d.jsx(us,{className:"h-5 w-5"})}),d.jsx("button",{type:"button",onClick:i,className:"inline-flex items-center rounded-xl bg-slate-100 px-3 py-2 text-slate-700 hover:bg-slate-200 dark:bg-slate-800/80 dark:text-slate-200 dark:hover:bg-slate-700",title:"Clear",children:d.jsx(ds,{className:"h-5 w-5"})}),d.jsx("button",{type:"submit",disabled:!r.trim(),className:"inline-flex items-center rounded-xl bg-brand-600 px-4 py-2 text-white shadow hover:bg-brand-700 disabled:opacity-60",title:"Send",children:d.jsx(Ui,{className:"h-5 w-5"})})]})})]})})}function fc({value:r,onChange:e,options:t=[]}){const n=t.length>0?t:[r];return d.jsxs("label",{className:"block text-sm",children:[d.jsx("span",{className:"block text-xs font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Model"}),d.jsx("select",{className:"mt-1 block w-56 rounded-md border border-slate-300 bg-white px-2 py-2 text-sm text-slate-800 focus:border-brand-500 focus:outline-none focus:ring-1 focus:ring-brand-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",value:r,onChange:a=>e?.(a.target.value),children:n.map(a=>d.jsx("option",{value:a,children:a},a))})]})}function hc(r,e){var t=Object.setPrototypeOf;t?t(r,e):r.__proto__=e}function pc(r,e){e===void 0&&(e=r.constructor);var t=Error.captureStackTrace;t&&t(r,e)}var xc=(function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(a[o]=i[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),vc=(function(r){xc(e,r);function e(t,n){var a=this.constructor,i=r.call(this,t,n)||this;return Object.defineProperty(i,"name",{value:a.name,enumerable:!1,configurable:!0}),hc(i,a.prototype),pc(i),i}return e})(Error),gc=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),$e=(function(r){gc(e,r);function e(t){t===void 0&&(t=void 0);var n=r.call(this,t)||this;return n.message=t,n}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e})(vc),mc=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),ye=(function(r){mc(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ArgumentException",e})($e),yc=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),U=(function(r){yc(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e})($e),co=(function(){function r(e){if(this.binarizer=e,e===null)throw new U("Binarizer must be non-null.")}return r.prototype.getWidth=function(){return this.binarizer.getWidth()},r.prototype.getHeight=function(){return this.binarizer.getHeight()},r.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},r.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},r.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},r.prototype.crop=function(e,t,n,a){var i=this.binarizer.getLuminanceSource().crop(e,t,n,a);return new r(this.binarizer.createBinarizer(i))},r.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},r.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new r(this.binarizer.createBinarizer(e))},r.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new r(this.binarizer.createBinarizer(e))},r.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},r})(),bc=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),be=(function(r){bc(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e})($e),wc=(function(){function r(e){this.source=e}return r.prototype.getLuminanceSource=function(){return this.source},r.prototype.getWidth=function(){return this.source.getWidth()},r.prototype.getHeight=function(){return this.source.getHeight()},r})(),de=(function(){function r(){}return r.arraycopy=function(e,t,n,a,i){for(;i--;)n[a++]=e[t++]},r.currentTimeMillis=function(){return Date.now()},r})(),_c=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Fn=(function(r){_c(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e})($e),Ac=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),wa=(function(r){Ac(e,r);function e(t,n){t===void 0&&(t=void 0),n===void 0&&(n=void 0);var a=r.call(this,n)||this;return a.index=t,a.message=n,a}return e.kind="ArrayIndexOutOfBoundsException",e})(Fn),Cc=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Se=(function(){function r(){}return r.fill=function(e,t){for(var n=0,a=e.length;n<a;n++)e[n]=t},r.fillWithin=function(e,t,n,a){r.rangeCheck(e.length,t,n);for(var i=t;i<n;i++)e[i]=a},r.rangeCheck=function(e,t,n){if(t>n)throw new U("fromIndex("+t+") > toIndex("+n+")");if(t<0)throw new wa(t);if(n>e)throw new wa(n)},r.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},r.create=function(e,t,n){var a=Array.from({length:e});return a.map(function(i){return Array.from({length:t}).fill(n)})},r.createInt32Array=function(e,t,n){var a=Array.from({length:e});return a.map(function(i){return Int32Array.from({length:t}).fill(n)})},r.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var n=0,a=e.length;n<a;n++)if(e[n]!==t[n])return!1;return!0},r.hashCode=function(e){var t,n;if(e===null)return 0;var a=1;try{for(var i=Cc(e),o=i.next();!o.done;o=i.next()){var s=o.value;a=31*a+s}}catch(l){t={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return a},r.fillUint8Array=function(e,t){for(var n=0;n!==e.length;n++)e[n]=t},r.copyOf=function(e,t){return e.slice(0,t)},r.copyOfUint8Array=function(e,t){if(e.length<=t){var n=new Uint8Array(t);return n.set(e),n}return e.slice(0,t)},r.copyOfRange=function(e,t,n){var a=n-t,i=new Int32Array(a);return de.arraycopy(e,t,i,0,a),i},r.binarySearch=function(e,t,n){n===void 0&&(n=r.numberComparator);for(var a=0,i=e.length-1;a<=i;){var o=i+a>>1,s=n(t,e[o]);if(s>0)a=o+1;else if(s<0)i=o-1;else return o}return-a-1},r.numberComparator=function(e,t){return e-t},r})(),W=(function(){function r(){}return r.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var n=31;return t=e<<16,t!==0&&(n-=16,e=t),t=e<<8,t!==0&&(n-=8,e=t),t=e<<4,t!==0&&(n-=4,e=t),t=e<<2,t!==0&&(n-=2,e=t),n-(e<<1>>>31)},r.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},r.toHexString=function(e){return e.toString(16)},r.toBinaryString=function(e){return String(parseInt(String(e),2))},r.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},r.truncDivision=function(e,t){return Math.trunc(e/t)},r.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},r.MIN_VALUE_32_BITS=-2147483648,r.MAX_VALUE=Number.MAX_SAFE_INTEGER,r})(),Te=(function(){function r(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=r.makeArray(e):this.bits=t)}return r.prototype.getSize=function(){return this.size},r.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},r.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=r.makeArray(e);de.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},r.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},r.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},r.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},r.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var n=this.bits,a=Math.floor(e/32),i=n[a];i&=~((1<<(e&31))-1);for(var o=n.length;i===0;){if(++a===o)return t;i=n[a]}var s=a*32+W.numberOfTrailingZeros(i);return s>t?t:s},r.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var n=this.bits,a=Math.floor(e/32),i=~n[a];i&=~((1<<(e&31))-1);for(var o=n.length;i===0;){if(++a===o)return t;i=~n[a]}var s=a*32+W.numberOfTrailingZeros(i);return s>t?t:s},r.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},r.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new U;if(t!==e){t--;for(var n=Math.floor(e/32),a=Math.floor(t/32),i=this.bits,o=n;o<=a;o++){var s=o>n?0:e&31,l=o<a?31:t&31,c=(2<<l)-(1<<s);i[o]|=c}}},r.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,n=0;n<e;n++)t[n]=0},r.prototype.isRange=function(e,t,n){if(t<e||e<0||t>this.size)throw new U;if(t===e)return!0;t--;for(var a=Math.floor(e/32),i=Math.floor(t/32),o=this.bits,s=a;s<=i;s++){var l=s>a?0:e&31,c=s<i?31:t&31,u=(2<<c)-(1<<l)&4294967295;if((o[s]&u)!==(n?u:0))return!1}return!0},r.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},r.prototype.appendBits=function(e,t){if(t<0||t>32)throw new U("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var n=t;n>0;n--)this.appendBit((e>>n-1&1)===1)},r.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var n=0;n<t;n++)this.appendBit(e.get(n))},r.prototype.xor=function(e){if(this.size!==e.size)throw new U("Sizes don't match");for(var t=this.bits,n=0,a=t.length;n<a;n++)t[n]^=e.bits[n]},r.prototype.toBytes=function(e,t,n,a){for(var i=0;i<a;i++){for(var o=0,s=0;s<8;s++)this.get(e)&&(o|=1<<7-s),e++;t[n+i]=o}},r.prototype.getBitArray=function(){return this.bits},r.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),n=t+1,a=this.bits,i=0;i<n;i++){var o=a[i];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[t-i]=o}if(this.size!==n*32){for(var s=n*32-this.size,l=e[0]>>>s,i=1;i<n;i++){var c=e[i];l|=c<<32-s,e[i-1]=l,l=c>>>s}e[n-1]=l}this.bits=e},r.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.size===t.size&&Se.equals(this.bits,t.bits)},r.prototype.hashCode=function(){return 31*this.size+Se.hashCode(this.bits)},r.prototype.toString=function(){for(var e="",t=0,n=this.size;t<n;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e},r.prototype.clone=function(){return new r(this.size,this.bits.slice())},r.prototype.toArray=function(){for(var e=[],t=0,n=this.size;t<n;t++)e.push(this.get(t));return e},r})(),xn;(function(r){r[r.OTHER=0]="OTHER",r[r.PURE_BARCODE=1]="PURE_BARCODE",r[r.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",r[r.TRY_HARDER=3]="TRY_HARDER",r[r.CHARACTER_SET=4]="CHARACTER_SET",r[r.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",r[r.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",r[r.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",r[r.ASSUME_GS1=8]="ASSUME_GS1",r[r.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",r[r.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",r[r.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(xn||(xn={}));const le=xn;var Ec=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),D=(function(r){Ec(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e})($e),Sc=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ae;(function(r){r[r.Cp437=0]="Cp437",r[r.ISO8859_1=1]="ISO8859_1",r[r.ISO8859_2=2]="ISO8859_2",r[r.ISO8859_3=3]="ISO8859_3",r[r.ISO8859_4=4]="ISO8859_4",r[r.ISO8859_5=5]="ISO8859_5",r[r.ISO8859_6=6]="ISO8859_6",r[r.ISO8859_7=7]="ISO8859_7",r[r.ISO8859_8=8]="ISO8859_8",r[r.ISO8859_9=9]="ISO8859_9",r[r.ISO8859_10=10]="ISO8859_10",r[r.ISO8859_11=11]="ISO8859_11",r[r.ISO8859_13=12]="ISO8859_13",r[r.ISO8859_14=13]="ISO8859_14",r[r.ISO8859_15=14]="ISO8859_15",r[r.ISO8859_16=15]="ISO8859_16",r[r.SJIS=16]="SJIS",r[r.Cp1250=17]="Cp1250",r[r.Cp1251=18]="Cp1251",r[r.Cp1252=19]="Cp1252",r[r.Cp1256=20]="Cp1256",r[r.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",r[r.UTF8=22]="UTF8",r[r.ASCII=23]="ASCII",r[r.Big5=24]="Big5",r[r.GB18030=25]="GB18030",r[r.EUC_KR=26]="EUC_KR"})(ae||(ae={}));var Ee=(function(){function r(e,t,n){for(var a,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];this.valueIdentifier=e,this.name=n,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=o,r.VALUE_IDENTIFIER_TO_ECI.set(e,this),r.NAME_TO_ECI.set(n,this);for(var l=this.values,c=0,u=l.length;c!==u;c++){var f=l[c];r.VALUES_TO_ECI.set(f,this)}try{for(var h=Sc(o),p=h.next();!p.done;p=h.next()){var x=p.value;r.NAME_TO_ECI.set(x,this)}}catch(v){a={error:v}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(a)throw a.error}}}return r.prototype.getValueIdentifier=function(){return this.valueIdentifier},r.prototype.getName=function(){return this.name},r.prototype.getValue=function(){return this.values[0]},r.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new D("incorect value");var t=r.VALUES_TO_ECI.get(e);if(t===void 0)throw new D("incorect value");return t},r.getCharacterSetECIByName=function(e){var t=r.NAME_TO_ECI.get(e);if(t===void 0)throw new D("incorect value");return t},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.getName()===t.getName()},r.VALUE_IDENTIFIER_TO_ECI=new Map,r.VALUES_TO_ECI=new Map,r.NAME_TO_ECI=new Map,r.Cp437=new r(ae.Cp437,Int32Array.from([0,2]),"Cp437"),r.ISO8859_1=new r(ae.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),r.ISO8859_2=new r(ae.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),r.ISO8859_3=new r(ae.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),r.ISO8859_4=new r(ae.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),r.ISO8859_5=new r(ae.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),r.ISO8859_6=new r(ae.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),r.ISO8859_7=new r(ae.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),r.ISO8859_8=new r(ae.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),r.ISO8859_9=new r(ae.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),r.ISO8859_10=new r(ae.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),r.ISO8859_11=new r(ae.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),r.ISO8859_13=new r(ae.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),r.ISO8859_14=new r(ae.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),r.ISO8859_15=new r(ae.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),r.ISO8859_16=new r(ae.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),r.SJIS=new r(ae.SJIS,20,"SJIS","Shift_JIS"),r.Cp1250=new r(ae.Cp1250,21,"Cp1250","windows-1250"),r.Cp1251=new r(ae.Cp1251,22,"Cp1251","windows-1251"),r.Cp1252=new r(ae.Cp1252,23,"Cp1252","windows-1252"),r.Cp1256=new r(ae.Cp1256,24,"Cp1256","windows-1256"),r.UnicodeBigUnmarked=new r(ae.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),r.UTF8=new r(ae.UTF8,26,"UTF8","UTF-8"),r.ASCII=new r(ae.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),r.Big5=new r(ae.Big5,28,"Big5"),r.GB18030=new r(ae.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),r.EUC_KR=new r(ae.EUC_KR,30,"EUC_KR","EUC-KR"),r})(),Nc=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),pr=(function(r){Nc(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e})($e),Ke=(function(){function r(){}return r.decode=function(e,t){var n=this.encodingName(t);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},r.shouldDecodeOnFallback=function(e){return!r.isBrowser()&&e==="ISO-8859-1"},r.encode=function(e,t){var n=this.encodingName(t);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},r.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},r.encodingName=function(e){return typeof e=="string"?e:e.getName()},r.encodingCharacterSet=function(e){return e instanceof Ee?e:Ee.getCharacterSetECIByName(e)},r.decodeFallback=function(e,t){var n=this.encodingCharacterSet(t);if(r.isDecodeFallbackSupported(n)){for(var a="",i=0,o=e.length;i<o;i++){var s=e[i].toString(16);s.length<2&&(s="0"+s),a+="%"+s}return decodeURIComponent(a)}if(n.equals(Ee.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new pr("Encoding "+this.encodingName(t)+" not supported by fallback.")},r.isDecodeFallbackSupported=function(e){return e.equals(Ee.UTF8)||e.equals(Ee.ISO8859_1)||e.equals(Ee.ASCII)},r.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),n=t.split(""),a=[],i=0;i<n.length;i++)a.push(n[i].charCodeAt(0));return new Uint8Array(a)},r})(),K=(function(){function r(){}return r.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var n=t?t.getName():this.ISO88591;return Ke.decode(new Uint8Array([e]),n)},r.guessEncoding=function(e,t){if(t!=null&&t.get(le.CHARACTER_SET)!==void 0)return t.get(le.CHARACTER_SET).toString();for(var n=e.length,a=!0,i=!0,o=!0,s=0,l=0,c=0,u=0,f=0,h=0,p=0,x=0,v=0,m=0,y=0,g=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,_=0;_<n&&(a||i||o);_++){var C=e[_]&255;o&&(s>0?(C&128)===0?o=!1:s--:(C&128)!==0&&((C&64)===0?o=!1:(s++,(C&32)===0?l++:(s++,(C&16)===0?c++:(s++,(C&8)===0?u++:o=!1))))),a&&(C>127&&C<160?a=!1:C>159&&(C<192||C===215||C===247)&&y++),i&&(f>0?C<64||C===127||C>252?i=!1:f--:C===128||C===160||C>239?i=!1:C>160&&C<224?(h++,x=0,p++,p>v&&(v=p)):C>127?(f++,p=0,x++,x>m&&(m=x)):(p=0,x=0))}return o&&s>0&&(o=!1),i&&f>0&&(i=!1),o&&(g||l+c+u>0)?r.UTF8:i&&(r.ASSUME_SHIFT_JIS||v>=3||m>=3)?r.SHIFT_JIS:a&&i?v===2&&h===2||y*10>=n?r.SHIFT_JIS:r.ISO88591:a?r.ISO88591:i?r.SHIFT_JIS:o?r.UTF8:r.PLATFORM_DEFAULT_ENCODING},r.format=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var a=-1;function i(s,l,c,u,f,h){if(s==="%%")return"%";if(t[++a]!==void 0){s=u?parseInt(u.substr(1)):void 0;var p=f?parseInt(f.substr(1)):void 0,x;switch(h){case"s":x=t[a];break;case"c":x=t[a][0];break;case"f":x=parseFloat(t[a]).toFixed(s);break;case"p":x=parseFloat(t[a]).toPrecision(s);break;case"e":x=parseFloat(t[a]).toExponential(s);break;case"x":x=parseInt(t[a]).toString(p||16);break;case"d":x=parseFloat(parseInt(t[a],p||10).toPrecision(s)).toFixed(0);break}x=typeof x=="object"?JSON.stringify(x):(+x).toString(p);for(var v=parseInt(c),m=c&&c[0]+""=="0"?"0":" ";x.length<v;)x=l!==void 0?x+m:m+x;return x}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,i)},r.getBytes=function(e,t){return Ke.encode(e,t)},r.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},r.getCharAt=function(e){return String.fromCharCode(e)},r.SHIFT_JIS=Ee.SJIS.getName(),r.GB2312="GB2312",r.ISO88591=Ee.ISO8859_1.getName(),r.EUC_JP="EUC_JP",r.UTF8=Ee.UTF8.getName(),r.PLATFORM_DEFAULT_ENCODING=r.UTF8,r.ASSUME_SHIFT_JIS=!1,r})(),$=(function(){function r(e){e===void 0&&(e=""),this.value=e}return r.prototype.enableDecoding=function(e){return this.encoding=e,this},r.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=K.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},r.prototype.appendChars=function(e,t,n){for(var a=t;t<t+n;a++)this.append(e[a]);return this},r.prototype.length=function(){return this.value.length},r.prototype.charAt=function(e){return this.value.charAt(e)},r.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},r.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},r.prototype.substring=function(e,t){return this.value.substring(e,t)},r.prototype.setLengthToZero=function(){this.value=""},r.prototype.toString=function(){return this.value},r.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},r})(),st=(function(){function r(e,t,n,a){if(this.width=e,this.height=t,this.rowSize=n,this.bits=a,t==null&&(t=e),this.height=t,e<1||t<1)throw new U("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,a==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return r.parseFromBooleanArray=function(e){for(var t=e.length,n=e[0].length,a=new r(n,t),i=0;i<t;i++)for(var o=e[i],s=0;s<n;s++)o[s]&&a.set(s,i);return a},r.parseFromString=function(e,t,n){if(e===null)throw new U("stringRepresentation cannot be null");for(var a=new Array(e.length),i=0,o=0,s=-1,l=0,c=0;c<e.length;)if(e.charAt(c)===`
`||e.charAt(c)==="\r"){if(i>o){if(s===-1)s=i-o;else if(i-o!==s)throw new U("row lengths do not match");o=i,l++}c++}else if(e.substring(c,c+t.length)===t)c+=t.length,a[i]=!0,i++;else if(e.substring(c,c+n.length)===n)c+=n.length,a[i]=!1,i++;else throw new U("illegal character encountered: "+e.substring(c));if(i>o){if(s===-1)s=i-o;else if(i-o!==s)throw new U("row lengths do not match");l++}for(var u=new r(s,l),f=0;f<i;f++)a[f]&&u.set(Math.floor(f%s),Math.floor(f/s));return u},r.prototype.get=function(e,t){var n=t*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0},r.prototype.set=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295},r.prototype.unset=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)},r.prototype.flip=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295},r.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new U("input matrix dimensions do not match");for(var t=new Te(Math.floor(this.width/32)+1),n=this.rowSize,a=this.bits,i=0,o=this.height;i<o;i++)for(var s=i*n,l=e.getRow(i,t).getBitArray(),c=0;c<n;c++)a[s+c]^=l[c]},r.prototype.clear=function(){for(var e=this.bits,t=e.length,n=0;n<t;n++)e[n]=0},r.prototype.setRegion=function(e,t,n,a){if(t<0||e<0)throw new U("Left and top must be nonnegative");if(a<1||n<1)throw new U("Height and width must be at least 1");var i=e+n,o=t+a;if(o>this.height||i>this.width)throw new U("The region must fit inside the matrix");for(var s=this.rowSize,l=this.bits,c=t;c<o;c++)for(var u=c*s,f=e;f<i;f++)l[u+Math.floor(f/32)]|=1<<(f&31)&4294967295},r.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new Te(this.width):t.clear();for(var n=this.rowSize,a=this.bits,i=e*n,o=0;o<n;o++)t.setBulk(o*32,a[i+o]);return t},r.prototype.setRow=function(e,t){de.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},r.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),n=new Te(e),a=new Te(e),i=0,o=Math.floor((t+1)/2);i<o;i++)n=this.getRow(i,n),a=this.getRow(t-1-i,a),n.reverse(),a.reverse(),this.setRow(i,a),this.setRow(t-1-i,n)},r.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,n=this.rowSize,a=this.bits,i=e,o=t,s=-1,l=-1,c=0;c<t;c++)for(var u=0;u<n;u++){var f=a[c*n+u];if(f!==0){if(c<o&&(o=c),c>l&&(l=c),u*32<i){for(var h=0;(f<<31-h&4294967295)===0;)h++;u*32+h<i&&(i=u*32+h)}if(u*32+31>s){for(var h=31;!(f>>>h);)h--;u*32+h>s&&(s=u*32+h)}}}return s<i||l<o?null:Int32Array.from([i,o,s-i+1,l-o+1])},r.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,n=0;n<t.length&&t[n]===0;)n++;if(n===t.length)return null;for(var a=n/e,i=n%e*32,o=t[n],s=0;(o<<31-s&4294967295)===0;)s++;return i+=s,Int32Array.from([i,a])},r.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,n=t.length-1;n>=0&&t[n]===0;)n--;if(n<0)return null;for(var a=Math.floor(n/e),i=Math.floor(n%e)*32,o=t[n],s=31;!(o>>>s);)s--;return i+=s,Int32Array.from([i,a])},r.prototype.getWidth=function(){return this.width},r.prototype.getHeight=function(){return this.height},r.prototype.getRowSize=function(){return this.rowSize},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&Se.equals(this.bits,t.bits)},r.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Se.hashCode(this.bits),e},r.prototype.toString=function(e,t,n){return e===void 0&&(e="X "),t===void 0&&(t="  "),n===void 0&&(n=`
`),this.buildToString(e,t,n)},r.prototype.buildToString=function(e,t,n){for(var a=new $,i=0,o=this.height;i<o;i++){for(var s=0,l=this.width;s<l;s++)a.append(this.get(s,i)?e:t);a.append(n)}return a.toString()},r.prototype.clone=function(){return new r(this.width,this.height,this.rowSize,this.bits.slice())},r})(),Ic=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),O=(function(r){Ic(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e})($e),Oc=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),kc=(function(r){Oc(e,r);function e(t){var n=r.call(this,t)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return e.prototype.getBlackRow=function(t,n){var a=this.getLuminanceSource(),i=a.getWidth();n==null||n.getSize()<i?n=new Te(i):n.clear(),this.initArrays(i);for(var o=a.getRow(t,this.luminances),s=this.buckets,l=0;l<i;l++)s[(o[l]&255)>>e.LUMINANCE_SHIFT]++;var c=e.estimateBlackPoint(s);if(i<3)for(var l=0;l<i;l++)(o[l]&255)<c&&n.set(l);else for(var u=o[0]&255,f=o[1]&255,l=1;l<i-1;l++){var h=o[l+1]&255;(f*4-u-h)/2<c&&n.set(l),u=f,f=h}return n},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),n=t.getWidth(),a=t.getHeight(),i=new st(n,a);this.initArrays(n);for(var o=this.buckets,s=1;s<5;s++)for(var l=Math.floor(a*s/5),c=t.getRow(l,this.luminances),u=Math.floor(n*4/5),f=Math.floor(n/5);f<u;f++){var h=c[f]&255;o[h>>e.LUMINANCE_SHIFT]++}for(var p=e.estimateBlackPoint(o),x=t.getMatrix(),s=0;s<a;s++)for(var v=s*n,f=0;f<n;f++){var h=x[v+f]&255;h<p&&i.set(f,s)}return i},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var n=this.buckets,a=0;a<e.LUMINANCE_BUCKETS;a++)n[a]=0},e.estimateBlackPoint=function(t){for(var n=t.length,a=0,i=0,o=0,s=0;s<n;s++)t[s]>o&&(i=s,o=t[s]),t[s]>a&&(a=t[s]);for(var l=0,c=0,s=0;s<n;s++){var u=s-i,f=t[s]*u*u;f>c&&(l=s,c=f)}if(i>l){var h=i;i=l,l=h}if(l-i<=n/16)throw new O;for(var p=l-1,x=-1,s=l-1;s>i;s--){var v=s-i,f=v*v*(l-s)*(a-t[s]);f>x&&(p=s,x=f)}return p<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e})(wc),Tc=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),uo=(function(r){Tc(e,r);function e(t){var n=r.call(this,t)||this;return n.matrix=null,n}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),n=t.getWidth(),a=t.getHeight();if(n>=e.MINIMUM_DIMENSION&&a>=e.MINIMUM_DIMENSION){var i=t.getMatrix(),o=n>>e.BLOCK_SIZE_POWER;(n&e.BLOCK_SIZE_MASK)!==0&&o++;var s=a>>e.BLOCK_SIZE_POWER;(a&e.BLOCK_SIZE_MASK)!==0&&s++;var l=e.calculateBlackPoints(i,o,s,n,a),c=new st(n,a);e.calculateThresholdForBlock(i,o,s,n,a,l,c),this.matrix=c}else this.matrix=r.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,n,a,i,o,s,l){for(var c=o-e.BLOCK_SIZE,u=i-e.BLOCK_SIZE,f=0;f<a;f++){var h=f<<e.BLOCK_SIZE_POWER;h>c&&(h=c);for(var p=e.cap(f,2,a-3),x=0;x<n;x++){var v=x<<e.BLOCK_SIZE_POWER;v>u&&(v=u);for(var m=e.cap(x,2,n-3),y=0,g=-2;g<=2;g++){var _=s[p+g];y+=_[m-2]+_[m-1]+_[m]+_[m+1]+_[m+2]}var C=y/25;e.thresholdBlock(t,v,h,C,i,l)}}},e.cap=function(t,n,a){return t<n?n:t>a?a:t},e.thresholdBlock=function(t,n,a,i,o,s){for(var l=0,c=a*o+n;l<e.BLOCK_SIZE;l++,c+=o)for(var u=0;u<e.BLOCK_SIZE;u++)(t[c+u]&255)<=i&&s.set(n+u,a+l)},e.calculateBlackPoints=function(t,n,a,i,o){for(var s=o-e.BLOCK_SIZE,l=i-e.BLOCK_SIZE,c=new Array(a),u=0;u<a;u++){c[u]=new Int32Array(n);var f=u<<e.BLOCK_SIZE_POWER;f>s&&(f=s);for(var h=0;h<n;h++){var p=h<<e.BLOCK_SIZE_POWER;p>l&&(p=l);for(var x=0,v=255,m=0,y=0,g=f*i+p;y<e.BLOCK_SIZE;y++,g+=i){for(var _=0;_<e.BLOCK_SIZE;_++){var C=t[g+_]&255;x+=C,C<v&&(v=C),C>m&&(m=C)}if(m-v>e.MIN_DYNAMIC_RANGE)for(y++,g+=i;y<e.BLOCK_SIZE;y++,g+=i)for(var _=0;_<e.BLOCK_SIZE;_++)x+=t[g+_]&255}var A=x>>e.BLOCK_SIZE_POWER*2;if(m-v<=e.MIN_DYNAMIC_RANGE&&(A=v/2,u>0&&h>0)){var E=(c[u-1][h]+2*c[u][h-1]+c[u-1][h-1])/4;v<E&&(A=E)}c[u][h]=A}}return c},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e})(kc),rr=(function(){function r(e,t){this.width=e,this.height=t}return r.prototype.getWidth=function(){return this.width},r.prototype.getHeight=function(){return this.height},r.prototype.isCropSupported=function(){return!1},r.prototype.crop=function(e,t,n,a){throw new pr("This luminance source does not support cropping.")},r.prototype.isRotateSupported=function(){return!1},r.prototype.rotateCounterClockwise=function(){throw new pr("This luminance source does not support rotation by 90 degrees.")},r.prototype.rotateCounterClockwise45=function(){throw new pr("This luminance source does not support rotation by 45 degrees.")},r.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new $,n=0;n<this.height;n++){for(var a=this.getRow(n,e),i=0;i<this.width;i++){var o=a[i]&255,s=void 0;o<64?s="#":o<128?s="+":o<192?s=".":s=" ",t.append(s)}t.append(`
`)}return t.toString()},r})(),Rc=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),jr=(function(r){Rc(e,r);function e(t){var n=r.call(this,t.getWidth(),t.getHeight())||this;return n.delegate=t,n}return e.prototype.getRow=function(t,n){for(var a=this.delegate.getRow(t,n),i=this.getWidth(),o=0;o<i;o++)a[o]=255-(a[o]&255);return a},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(n),i=0;i<n;i++)a[i]=255-(t[i]&255);return a},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,n,a,i){return new e(this.delegate.crop(t,n,a,i))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e})(rr),Dc=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Pc=(function(r){Dc(e,r);function e(t,n){n===void 0&&(n=!1);var a=r.call(this,t.width,t.height)||this;return a.canvas=t,a.tempCanvasElement=null,a.buffer=e.makeBufferFromCanvasImageData(t,n),a}return e.makeBufferFromCanvasImageData=function(t,n){n===void 0&&(n=!1);var a=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(a.data,t.width,t.height,n)},e.toGrayscaleBuffer=function(t,n,a,i){i===void 0&&(i=!1);var o=new Uint8ClampedArray(n*a);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!i)for(var s=0,l=0,c=t.length;s<c;s+=4,l++){var u=void 0,f=t[s+3];if(f===0)u=255;else{var h=t[s],p=t[s+1],x=t[s+2];u=306*h+601*p+117*x+512>>10}o[l]=u}else for(var s=0,l=0,v=t.length;s<v;s+=4,l++){var u=void 0,f=t[s+3];if(f===0)u=255;else{var h=t[s],p=t[s+1],x=t[s+2];u=306*h+601*p+117*x+512>>10}o[l]=255-u}return o},e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new U("Requested row is outside the image: "+t);var a=this.getWidth(),i=t*a;return n===null?n=this.buffer.slice(i,i+a):(n.length<a&&(n=new Uint8ClampedArray(a)),n.set(this.buffer.slice(i,i+a))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,a,i){return r.prototype.crop.call(this,t,n,a,i),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var n=this.getTempCanvasElement(),a=n.getContext("2d"),i=t*e.DEGREE_TO_RADIANS,o=this.canvas.width,s=this.canvas.height,l=Math.ceil(Math.abs(Math.cos(i))*o+Math.abs(Math.sin(i))*s),c=Math.ceil(Math.abs(Math.sin(i))*o+Math.abs(Math.cos(i))*s);return n.width=l,n.height=c,a.translate(l/2,c/2),a.rotate(i),a.drawImage(this.canvas,o/-2,s/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.prototype.invert=function(){return new jr(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e})(rr),Mc=(function(){function r(e,t,n){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=n||void 0}return r.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},r})(),Be=function(r,e,t,n){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function s(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):a(u.value).then(s,l)}c((n=n.apply(r,e||[])).next())})},Le=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,a&&(i=c[0]&2?a.return:c[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,c[1])).done)return i;switch(a=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,a=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){t.label=c[1];break}if(c[0]===6&&t.label<i[1]){t.label=i[1],i=c;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(c);break}i[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(u){c=[6,u],a=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},jc=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jt=(function(){function r(e,t,n){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(r.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),r.prototype.listVideoInputDevices=function(){return Be(this,void 0,void 0,function(){var e,t,n,a,i,o,s,l,c,u,f,h;return Le(this,function(p){switch(p.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=p.sent(),t=[];try{for(n=jc(e),a=n.next();!a.done;a=n.next())i=a.value,o=i.kind==="video"?"videoinput":i.kind,o==="videoinput"&&(s=i.deviceId||i.id,l=i.label||"Video device "+(t.length+1),c=i.groupId,u={deviceId:s,label:l,kind:o,groupId:c},t.push(u))}catch(x){f={error:x}}finally{try{a&&!a.done&&(h=n.return)&&h.call(n)}finally{if(f)throw f.error}}return[2,t]}})})},r.prototype.getVideoInputDevices=function(){return Be(this,void 0,void 0,function(){var e;return Le(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(n){return new Mc(n.deviceId,n.label)})]}})})},r.prototype.findDeviceById=function(e){return Be(this,void 0,void 0,function(){var t;return Le(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=n.sent(),t?[2,t.find(function(a){return a.deviceId===e})]:[2,null]}})})},r.prototype.decodeFromInputVideoDevice=function(e,t){return Be(this,void 0,void 0,function(){return Le(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,n.sent()]}})})},r.prototype.decodeOnceFromVideoDevice=function(e,t){return Be(this,void 0,void 0,function(){var n,a;return Le(this,function(i){switch(i.label){case 0:return this.reset(),e?n={deviceId:{exact:e}}:n={facingMode:"environment"},a={video:n},[4,this.decodeOnceFromConstraints(a,t)];case 1:return[2,i.sent()]}})})},r.prototype.decodeOnceFromConstraints=function(e,t){return Be(this,void 0,void 0,function(){var n;return Le(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=a.sent(),[4,this.decodeOnceFromStream(n,t)];case 2:return[2,a.sent()]}})})},r.prototype.decodeOnceFromStream=function(e,t){return Be(this,void 0,void 0,function(){var n,a;return Le(this,function(i){switch(i.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return n=i.sent(),[4,this.decodeOnce(n)];case 2:return a=i.sent(),[2,a]}})})},r.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,n){return Be(this,void 0,void 0,function(){return Le(this,function(a){switch(a.label){case 0:return[4,this.decodeFromVideoDevice(e,t,n)];case 1:return[2,a.sent()]}})})},r.prototype.decodeFromVideoDevice=function(e,t,n){return Be(this,void 0,void 0,function(){var a,i;return Le(this,function(o){switch(o.label){case 0:return e?a={deviceId:{exact:e}}:a={facingMode:"environment"},i={video:a},[4,this.decodeFromConstraints(i,t,n)];case 1:return[2,o.sent()]}})})},r.prototype.decodeFromConstraints=function(e,t,n){return Be(this,void 0,void 0,function(){var a;return Le(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return a=i.sent(),[4,this.decodeFromStream(a,t,n)];case 2:return[2,i.sent()]}})})},r.prototype.decodeFromStream=function(e,t,n){return Be(this,void 0,void 0,function(){var a;return Le(this,function(i){switch(i.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return a=i.sent(),[4,this.decodeContinuously(a,n)];case 2:return[2,i.sent()]}})})},r.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},r.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},r.prototype.attachStreamToVideo=function(e,t){return Be(this,void 0,void 0,function(){var n;return Le(this,function(a){switch(a.label){case 0:return n=this.prepareVideoElement(t),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return a.sent(),[2,n]}})})},r.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(n,a){return t.playVideoOnLoad(e,function(){return n()})})},r.prototype.playVideoOnLoad=function(e,t){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},r.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},r.prototype.tryPlayVideo=function(e){return Be(this,void 0,void 0,function(){return Le(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},r.prototype.getMediaElement=function(e,t){var n=document.getElementById(e);if(!n)throw new ye("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new ye("element with id '"+e+"' must be an "+t+" element");return n},r.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new ye("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},r.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new ye("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},r.prototype.decodeFromVideoContinuously=function(e,t,n){if(e===void 0&&t===void 0)throw new ye("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,n):this.decodeFromVideoElementContinuously(e,n)},r.prototype.decodeFromImageElement=function(e){if(!e)throw new ye("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var n;return this.isImageLoaded(t)?n=this.decodeOnce(t,!1,!0):n=this._decodeOnLoadImage(t),n},r.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},r.prototype.decodeFromVideoElementContinuously=function(e,t){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,t)},r.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new ye("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},r.prototype.decodeFromImageUrl=function(e){if(!e)throw new ye("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var n=this._decodeOnLoadImage(t);return t.src=e,n},r.prototype.decodeFromVideoUrl=function(e){if(!e)throw new ye("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),n=this.decodeFromVideoElement(t);return t.src=e,n},r.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new ye("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),a=this.decodeFromVideoElementContinuously(n,t);return n.src=e,a},r.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(n,a){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(n,a)},e.addEventListener("load",t.imageLoadedListener)})},r.prototype._decodeOnLoadVideo=function(e){return Be(this,void 0,void 0,function(){return Le(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},r.prototype._decodeOnLoadVideoContinuously=function(e,t){return Be(this,void 0,void 0,function(){return Le(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,t),[2]}})})},r.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},r.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},r.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},r.prototype.decodeOnce=function(e,t,n){var a=this;t===void 0&&(t=!0),n===void 0&&(n=!0),this._stopAsyncDecode=!1;var i=function(o,s){if(a._stopAsyncDecode){s(new O("Video stream has ended before any code could be detected.")),a._stopAsyncDecode=void 0;return}try{var l=a.decode(e);o(l)}catch(h){var c=t&&h instanceof O,u=h instanceof be||h instanceof D,f=u&&n;if(c||f)return setTimeout(i,a._timeBetweenDecodingAttempts,o,s);s(h)}};return new Promise(function(o,s){return i(o,s)})},r.prototype.decodeContinuously=function(e,t){var n=this;this._stopContinuousDecode=!1;var a=function(){if(n._stopContinuousDecode){n._stopContinuousDecode=void 0;return}try{var i=n.decode(e);t(i,null),setTimeout(a,n.timeBetweenScansMillis)}catch(l){t(null,l);var o=l instanceof be||l instanceof D,s=l instanceof O;(o||s)&&setTimeout(a,n._timeBetweenDecodingAttempts)}};a()},r.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},r.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var t=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),t=!0):this.drawImageOnCanvas(e);var n=this.getCaptureCanvas(e),a=new Pc(n,t),i=new uo(a);return new co(i)},r.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),n=void 0;try{n=t.getContext("2d",{willReadFrequently:!0})}catch{n=t.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},r.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},r.prototype.drawFrameOnCanvas=function(e,t,n){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},r.prototype.drawImageOnCanvas=function(e,t,n){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},r.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},r.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),n,a;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,a=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,a=e.naturalHeight||e.height)),t.style.width=n+"px",t.style.height=a+"px",t.width=n,t.height=a,t},r.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},r.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},r.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},r.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},r.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},r.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},r.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},r})(),je=(function(){function r(e,t,n,a,i,o){n===void 0&&(n=t==null?0:8*t.length),o===void 0&&(o=de.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=n,this.resultPoints=a,this.format=i,this.timestamp=o,this.text=e,this.rawBytes=t,n==null?this.numBits=t==null?0:8*t.length:this.numBits=n,this.resultPoints=a,this.format=i,this.resultMetadata=null,o==null?this.timestamp=de.currentTimeMillis():this.timestamp=o}return r.prototype.getText=function(){return this.text},r.prototype.getRawBytes=function(){return this.rawBytes},r.prototype.getNumBits=function(){return this.numBits},r.prototype.getResultPoints=function(){return this.resultPoints},r.prototype.getBarcodeFormat=function(){return this.format},r.prototype.getResultMetadata=function(){return this.resultMetadata},r.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},r.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},r.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var n=new Array(t.length+e.length);de.arraycopy(t,0,n,0,t.length),de.arraycopy(e,0,n,t.length,e.length),this.resultPoints=n}},r.prototype.getTimestamp=function(){return this.timestamp},r.prototype.toString=function(){return this.text},r})(),vn;(function(r){r[r.AZTEC=0]="AZTEC",r[r.CODABAR=1]="CODABAR",r[r.CODE_39=2]="CODE_39",r[r.CODE_93=3]="CODE_93",r[r.CODE_128=4]="CODE_128",r[r.DATA_MATRIX=5]="DATA_MATRIX",r[r.EAN_8=6]="EAN_8",r[r.EAN_13=7]="EAN_13",r[r.ITF=8]="ITF",r[r.MAXICODE=9]="MAXICODE",r[r.PDF_417=10]="PDF_417",r[r.QR_CODE=11]="QR_CODE",r[r.RSS_14=12]="RSS_14",r[r.RSS_EXPANDED=13]="RSS_EXPANDED",r[r.UPC_A=14]="UPC_A",r[r.UPC_E=15]="UPC_E",r[r.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(vn||(vn={}));const B=vn;var gn;(function(r){r[r.OTHER=0]="OTHER",r[r.ORIENTATION=1]="ORIENTATION",r[r.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",r[r.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",r[r.ISSUE_NUMBER=4]="ISSUE_NUMBER",r[r.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",r[r.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",r[r.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",r[r.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",r[r.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",r[r.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(gn||(gn={}));const Pe=gn;var Br=(function(){function r(e,t,n,a,i,o){i===void 0&&(i=-1),o===void 0&&(o=-1),this.rawBytes=e,this.text=t,this.byteSegments=n,this.ecLevel=a,this.structuredAppendSequenceNumber=i,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}return r.prototype.getRawBytes=function(){return this.rawBytes},r.prototype.getNumBits=function(){return this.numBits},r.prototype.setNumBits=function(e){this.numBits=e},r.prototype.getText=function(){return this.text},r.prototype.getByteSegments=function(){return this.byteSegments},r.prototype.getECLevel=function(){return this.ecLevel},r.prototype.getErrorsCorrected=function(){return this.errorsCorrected},r.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},r.prototype.getErasures=function(){return this.erasures},r.prototype.setErasures=function(e){this.erasures=e},r.prototype.getOther=function(){return this.other},r.prototype.setOther=function(e){this.other=e},r.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},r.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},r.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},r})(),Ht=(function(){function r(){}return r.prototype.exp=function(e){return this.expTable[e]},r.prototype.log=function(e){if(e===0)throw new U;return this.logTable[e]},r.addOrSubtract=function(e,t){return e^t},r})(),vt=(function(){function r(e,t){if(t.length===0)throw new U;this.field=e;var n=t.length;if(n>1&&t[0]===0){for(var a=1;a<n&&t[a]===0;)a++;a===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-a),de.arraycopy(t,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return r.prototype.getCoefficients=function(){return this.coefficients},r.prototype.getDegree=function(){return this.coefficients.length-1},r.prototype.isZero=function(){return this.coefficients[0]===0},r.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},r.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,n;if(e===1){n=0;for(var a=0,i=t.length;a!==i;a++){var o=t[a];n=Ht.addOrSubtract(n,o)}return n}n=t[0];for(var s=t.length,l=this.field,a=1;a<s;a++)n=Ht.addOrSubtract(l.multiply(e,n),t[a]);return n},r.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new U("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,n=e.coefficients;if(t.length>n.length){var a=t;t=n,n=a}var i=new Int32Array(n.length),o=n.length-t.length;de.arraycopy(n,0,i,0,o);for(var s=o;s<n.length;s++)i[s]=Ht.addOrSubtract(t[s-o],n[s]);return new r(this.field,i)},r.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new U("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,n=t.length,a=e.coefficients,i=a.length,o=new Int32Array(n+i-1),s=this.field,l=0;l<n;l++)for(var c=t[l],u=0;u<i;u++)o[l+u]=Ht.addOrSubtract(o[l+u],s.multiply(c,a[u]));return new r(s,o)},r.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,n=this.field,a=new Int32Array(t),i=this.coefficients,o=0;o<t;o++)a[o]=n.multiply(i[o],e);return new r(n,a)},r.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new U;if(t===0)return this.field.getZero();for(var n=this.coefficients,a=n.length,i=new Int32Array(a+e),o=this.field,s=0;s<a;s++)i[s]=o.multiply(n[s],t);return new r(o,i)},r.prototype.divide=function(e){if(!this.field.equals(e.field))throw new U("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new U("Divide by 0");for(var t=this.field,n=t.getZero(),a=this,i=e.getCoefficient(e.getDegree()),o=t.inverse(i);a.getDegree()>=e.getDegree()&&!a.isZero();){var s=a.getDegree()-e.getDegree(),l=t.multiply(a.getCoefficient(a.getDegree()),o),c=e.multiplyByMonomial(s,l),u=t.buildMonomial(s,l);n=n.addOrSubtract(u),a=a.addOrSubtract(c)}return[n,a]},r.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var n=this.getCoefficient(t);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),t===0||n!==1){var a=this.field.log(n);a===0?e+="1":a===1?e+="a":(e+="a^",e+=a)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},r})(),Bc=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),fo=(function(r){Bc(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ArithmeticException",e})($e),Lc=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Ge=(function(r){Lc(e,r);function e(t,n,a){var i=r.call(this)||this;i.primitive=t,i.size=n,i.generatorBase=a;for(var o=new Int32Array(n),s=1,l=0;l<n;l++)o[l]=s,s*=2,s>=n&&(s^=t,s&=n-1);i.expTable=o;for(var c=new Int32Array(n),l=0;l<n-1;l++)c[o[l]]=l;return i.logTable=c,i.zero=new vt(i,Int32Array.from([0])),i.one=new vt(i,Int32Array.from([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,n){if(t<0)throw new U;if(n===0)return this.zero;var a=new Int32Array(t+1);return a[0]=n,new vt(this,a)},e.prototype.inverse=function(t){if(t===0)throw new fo;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,n){return t===0||n===0?0:this.expTable[(this.logTable[t]+this.logTable[n])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+W.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e})(Ht),Fc=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),or=(function(r){Fc(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ReedSolomonException",e})($e),Uc=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),nr=(function(r){Uc(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="IllegalStateException",e})($e),Lr=(function(){function r(e){this.field=e}return r.prototype.decode=function(e,t){for(var n=this.field,a=new vt(n,e),i=new Int32Array(t),o=!0,s=0;s<t;s++){var l=a.evaluateAt(n.exp(s+n.getGeneratorBase()));i[i.length-1-s]=l,l!==0&&(o=!1)}if(!o)for(var c=new vt(n,i),u=this.runEuclideanAlgorithm(n.buildMonomial(t,1),c,t),f=u[0],h=u[1],p=this.findErrorLocations(f),x=this.findErrorMagnitudes(h,p),s=0;s<p.length;s++){var v=e.length-1-n.log(p[s]);if(v<0)throw new or("Bad error location");e[v]=Ge.addOrSubtract(e[v],x[s])}},r.prototype.runEuclideanAlgorithm=function(e,t,n){if(e.getDegree()<t.getDegree()){var a=e;e=t,t=a}for(var i=this.field,o=e,s=t,l=i.getZero(),c=i.getOne();s.getDegree()>=(n/2|0);){var u=o,f=l;if(o=s,l=c,o.isZero())throw new or("r_{i-1} was zero");s=u;for(var h=i.getZero(),p=o.getCoefficient(o.getDegree()),x=i.inverse(p);s.getDegree()>=o.getDegree()&&!s.isZero();){var v=s.getDegree()-o.getDegree(),m=i.multiply(s.getCoefficient(s.getDegree()),x);h=h.addOrSubtract(i.buildMonomial(v,m)),s=s.addOrSubtract(o.multiplyByMonomial(v,m))}if(c=h.multiply(l).addOrSubtract(f),s.getDegree()>=o.getDegree())throw new nr("Division algorithm failed to reduce polynomial?")}var y=c.getCoefficient(0);if(y===0)throw new or("sigmaTilde(0) was zero");var g=i.inverse(y),_=c.multiplyScalar(g),C=s.multiplyScalar(g);return[_,C]},r.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(t),a=0,i=this.field,o=1;o<i.getSize()&&a<t;o++)e.evaluateAt(o)===0&&(n[a]=i.inverse(o),a++);if(a!==t)throw new or("Error locator degree does not match number of roots");return n},r.prototype.findErrorMagnitudes=function(e,t){for(var n=t.length,a=new Int32Array(n),i=this.field,o=0;o<n;o++){for(var s=i.inverse(t[o]),l=1,c=0;c<n;c++)if(o!==c){var u=i.multiply(t[c],s),f=(u&1)===0?u|1:u&-2;l=i.multiply(l,f)}a[o]=i.multiply(e.evaluateAt(s),i.inverse(l)),i.getGeneratorBase()!==0&&(a[o]=i.multiply(a[o],s))}return a},r})(),Re;(function(r){r[r.UPPER=0]="UPPER",r[r.LOWER=1]="LOWER",r[r.MIXED=2]="MIXED",r[r.DIGIT=3]="DIGIT",r[r.PUNCT=4]="PUNCT",r[r.BINARY=5]="BINARY"})(Re||(Re={}));var _a=(function(){function r(){}return r.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),n=this.extractBits(t),a=this.correctBits(n),i=r.convertBoolArrayToByteArray(a),o=r.getEncodedData(a),s=new Br(i,o,null,null);return s.setNumBits(a.length),s},r.highLevelDecode=function(e){return this.getEncodedData(e)},r.getEncodedData=function(e){for(var t=e.length,n=Re.UPPER,a=Re.UPPER,i="",o=0;o<t;)if(a===Re.BINARY){if(t-o<5)break;var s=r.readCode(e,o,5);if(o+=5,s===0){if(t-o<11)break;s=r.readCode(e,o,11)+31,o+=11}for(var l=0;l<s;l++){if(t-o<8){o=t;break}var c=r.readCode(e,o,8);i+=K.castAsNonUtf8Char(c),o+=8}a=n}else{var u=a===Re.DIGIT?4:5;if(t-o<u)break;var c=r.readCode(e,o,u);o+=u;var f=r.getCharacter(a,c);f.startsWith("CTRL_")?(n=a,a=r.getTable(f.charAt(5)),f.charAt(6)==="L"&&(n=a)):(i+=f,a=n)}return i},r.getTable=function(e){switch(e){case"L":return Re.LOWER;case"P":return Re.PUNCT;case"M":return Re.MIXED;case"D":return Re.DIGIT;case"B":return Re.BINARY;case"U":default:return Re.UPPER}},r.getCharacter=function(e,t){switch(e){case Re.UPPER:return r.UPPER_TABLE[t];case Re.LOWER:return r.LOWER_TABLE[t];case Re.MIXED:return r.MIXED_TABLE[t];case Re.PUNCT:return r.PUNCT_TABLE[t];case Re.DIGIT:return r.DIGIT_TABLE[t];default:throw new nr("Bad table")}},r.prototype.correctBits=function(e){var t,n;this.ddata.getNbLayers()<=2?(n=6,t=Ge.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,t=Ge.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,t=Ge.AZTEC_DATA_10):(n=12,t=Ge.AZTEC_DATA_12);var a=this.ddata.getNbDatablocks(),i=e.length/n;if(i<a)throw new D;for(var o=e.length%n,s=new Int32Array(i),l=0;l<i;l++,o+=n)s[l]=r.readCode(e,o,n);try{var c=new Lr(t);c.decode(s,i-a)}catch(m){throw new D(m)}for(var u=(1<<n)-1,f=0,l=0;l<a;l++){var h=s[l];if(h===0||h===u)throw new D;(h===1||h===u-1)&&f++}for(var p=new Array(a*n-f),x=0,l=0;l<a;l++){var h=s[l];if(h===1||h===u-1)p.fill(h>1,x,x+n-1),x+=n-1;else for(var v=n-1;v>=0;--v)p[x++]=(h&1<<v)!==0}return p},r.prototype.extractBits=function(e){var t=this.ddata.isCompact(),n=this.ddata.getNbLayers(),a=(t?11:14)+n*4,i=new Int32Array(a),o=new Array(this.totalBitsInLayer(n,t));if(t)for(var s=0;s<i.length;s++)i[s]=s;else for(var l=a+1+2*W.truncDivision(W.truncDivision(a,2)-1,15),c=a/2,u=W.truncDivision(l,2),s=0;s<c;s++){var f=s+W.truncDivision(s,15);i[c-s-1]=u-f-1,i[c+s]=u+f+1}for(var s=0,h=0;s<n;s++){for(var p=(n-s)*4+(t?9:12),x=s*2,v=a-1-x,m=0;m<p;m++)for(var y=m*2,g=0;g<2;g++)o[h+y+g]=e.get(i[x+g],i[x+m]),o[h+2*p+y+g]=e.get(i[x+m],i[v-g]),o[h+4*p+y+g]=e.get(i[v-g],i[v-m]),o[h+6*p+y+g]=e.get(i[v-m],i[x+g]);h+=p*8}return o},r.readCode=function(e,t,n){for(var a=0,i=t;i<t+n;i++)a<<=1,e[i]&&(a|=1);return a},r.readByte=function(e,t){var n=e.length-t;return n>=8?r.readCode(e,t,8):r.readCode(e,t,n)<<8-n},r.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),n=0;n<t.length;n++)t[n]=r.readByte(e,8*n);return t},r.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},r.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],r.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],r.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],r.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],r.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],r})(),Q=(function(){function r(){}return r.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},r.distance=function(e,t,n,a){var i=e-n,o=t-a;return Math.sqrt(i*i+o*o)},r.sum=function(e){for(var t=0,n=0,a=e.length;n!==a;n++){var i=e[n];t+=i}return t},r})(),mn=(function(){function r(){}return r.floatToIntBits=function(e){return e},r.MAX_VALUE=Number.MAX_SAFE_INTEGER,r})(),L=(function(){function r(e,t){this.x=e,this.y=t}return r.prototype.getX=function(){return this.x},r.prototype.getY=function(){return this.y},r.prototype.equals=function(e){if(e instanceof r){var t=e;return this.x===t.x&&this.y===t.y}return!1},r.prototype.hashCode=function(){return 31*mn.floatToIntBits(this.x)+mn.floatToIntBits(this.y)},r.prototype.toString=function(){return"("+this.x+","+this.y+")"},r.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),a=this.distance(e[0],e[2]),i,o,s;if(n>=t&&n>=a?(o=e[0],i=e[1],s=e[2]):a>=n&&a>=t?(o=e[1],i=e[0],s=e[2]):(o=e[2],i=e[0],s=e[1]),this.crossProductZ(i,o,s)<0){var l=i;i=s,s=l}e[0]=i,e[1]=o,e[2]=s},r.distance=function(e,t){return Q.distance(e.x,e.y,t.x,t.y)},r.crossProductZ=function(e,t,n){var a=t.x,i=t.y;return(n.x-a)*(e.y-i)-(n.y-i)*(e.x-a)},r})(),Un=(function(){function r(e,t){this.bits=e,this.points=t}return r.prototype.getBits=function(){return this.bits},r.prototype.getPoints=function(){return this.points},r})(),Vc=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Gc=(function(r){Vc(e,r);function e(t,n,a,i,o){var s=r.call(this,t,n)||this;return s.compact=a,s.nbDatablocks=i,s.nbLayers=o,s}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e})(Un),yn=(function(){function r(e,t,n,a){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=r.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),a==null&&(a=e.getHeight()/2|0);var i=t/2|0;if(this.leftInit=n-i,this.rightInit=n+i,this.upInit=a-i,this.downInit=a+i,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new O}return r.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,n=this.upInit,a=this.downInit,i=!1,o=!0,s=!1,l=!1,c=!1,u=!1,f=!1,h=this.width,p=this.height;o;){o=!1;for(var x=!0;(x||!l)&&t<h;)x=this.containsBlackPoint(n,a,t,!1),x?(t++,o=!0,l=!0):l||t++;if(t>=h){i=!0;break}for(var v=!0;(v||!c)&&a<p;)v=this.containsBlackPoint(e,t,a,!0),v?(a++,o=!0,c=!0):c||a++;if(a>=p){i=!0;break}for(var m=!0;(m||!u)&&e>=0;)m=this.containsBlackPoint(n,a,e,!1),m?(e--,o=!0,u=!0):u||e--;if(e<0){i=!0;break}for(var y=!0;(y||!f)&&n>=0;)y=this.containsBlackPoint(e,t,n,!0),y?(n--,o=!0,f=!0):f||n--;if(n<0){i=!0;break}o&&(s=!0)}if(!i&&s){for(var g=t-e,_=null,C=1;_===null&&C<g;C++)_=this.getBlackPointOnSegment(e,a-C,e+C,a);if(_==null)throw new O;for(var A=null,C=1;A===null&&C<g;C++)A=this.getBlackPointOnSegment(e,n+C,e+C,n);if(A==null)throw new O;for(var E=null,C=1;E===null&&C<g;C++)E=this.getBlackPointOnSegment(t,n+C,t-C,n);if(E==null)throw new O;for(var N=null,C=1;N===null&&C<g;C++)N=this.getBlackPointOnSegment(t,a-C,t-C,a);if(N==null)throw new O;return this.centerEdges(N,_,E,A)}else throw new O},r.prototype.getBlackPointOnSegment=function(e,t,n,a){for(var i=Q.round(Q.distance(e,t,n,a)),o=(n-e)/i,s=(a-t)/i,l=this.image,c=0;c<i;c++){var u=Q.round(e+c*o),f=Q.round(t+c*s);if(l.get(u,f))return new L(u,f)}return null},r.prototype.centerEdges=function(e,t,n,a){var i=e.getX(),o=e.getY(),s=t.getX(),l=t.getY(),c=n.getX(),u=n.getY(),f=a.getX(),h=a.getY(),p=r.CORR;return i<this.width/2?[new L(f-p,h+p),new L(s+p,l+p),new L(c-p,u-p),new L(i+p,o-p)]:[new L(f+p,h+p),new L(s+p,l-p),new L(c-p,u+p),new L(i-p,o-p)]},r.prototype.containsBlackPoint=function(e,t,n,a){var i=this.image;if(a){for(var o=e;o<=t;o++)if(i.get(o,n))return!0}else for(var s=e;s<=t;s++)if(i.get(n,s))return!0;return!1},r.INIT_SIZE=10,r.CORR=1,r})(),Aa=(function(){function r(){}return r.checkAndNudgePoints=function(e,t){for(var n=e.getWidth(),a=e.getHeight(),i=!0,o=0;o<t.length&&i;o+=2){var s=Math.floor(t[o]),l=Math.floor(t[o+1]);if(s<-1||s>n||l<-1||l>a)throw new O;i=!1,s===-1?(t[o]=0,i=!0):s===n&&(t[o]=n-1,i=!0),l===-1?(t[o+1]=0,i=!0):l===a&&(t[o+1]=a-1,i=!0)}i=!0;for(var o=t.length-2;o>=0&&i;o-=2){var s=Math.floor(t[o]),l=Math.floor(t[o+1]);if(s<-1||s>n||l<-1||l>a)throw new O;i=!1,s===-1?(t[o]=0,i=!0):s===n&&(t[o]=n-1,i=!0),l===-1?(t[o+1]=0,i=!0):l===a&&(t[o+1]=a-1,i=!0)}},r})(),ho=(function(){function r(e,t,n,a,i,o,s,l,c){this.a11=e,this.a21=t,this.a31=n,this.a12=a,this.a22=i,this.a32=o,this.a13=s,this.a23=l,this.a33=c}return r.quadrilateralToQuadrilateral=function(e,t,n,a,i,o,s,l,c,u,f,h,p,x,v,m){var y=r.quadrilateralToSquare(e,t,n,a,i,o,s,l),g=r.squareToQuadrilateral(c,u,f,h,p,x,v,m);return g.times(y)},r.prototype.transformPoints=function(e){for(var t=e.length,n=this.a11,a=this.a12,i=this.a13,o=this.a21,s=this.a22,l=this.a23,c=this.a31,u=this.a32,f=this.a33,h=0;h<t;h+=2){var p=e[h],x=e[h+1],v=i*p+l*x+f;e[h]=(n*p+o*x+c)/v,e[h+1]=(a*p+s*x+u)/v}},r.prototype.transformPointsWithValues=function(e,t){for(var n=this.a11,a=this.a12,i=this.a13,o=this.a21,s=this.a22,l=this.a23,c=this.a31,u=this.a32,f=this.a33,h=e.length,p=0;p<h;p++){var x=e[p],v=t[p],m=i*x+l*v+f;e[p]=(n*x+o*v+c)/m,t[p]=(a*x+s*v+u)/m}},r.squareToQuadrilateral=function(e,t,n,a,i,o,s,l){var c=e-n+i-s,u=t-a+o-l;if(c===0&&u===0)return new r(n-e,i-n,e,a-t,o-a,t,0,0,1);var f=n-i,h=s-i,p=a-o,x=l-o,v=f*x-h*p,m=(c*x-h*u)/v,y=(f*u-c*p)/v;return new r(n-e+m*n,s-e+y*s,e,a-t+m*a,l-t+y*l,t,m,y,1)},r.quadrilateralToSquare=function(e,t,n,a,i,o,s,l){return r.squareToQuadrilateral(e,t,n,a,i,o,s,l).buildAdjoint()},r.prototype.buildAdjoint=function(){return new r(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},r.prototype.times=function(e){return new r(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},r})(),$c=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Hc=(function(r){$c(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,n,a,i,o,s,l,c,u,f,h,p,x,v,m,y,g,_,C){var A=ho.quadrilateralToQuadrilateral(i,o,s,l,c,u,f,h,p,x,v,m,y,g,_,C);return this.sampleGridWithTransform(t,n,a,A)},e.prototype.sampleGridWithTransform=function(t,n,a,i){if(n<=0||a<=0)throw new O;for(var o=new st(n,a),s=new Float32Array(2*n),l=0;l<a;l++){for(var c=s.length,u=l+.5,f=0;f<c;f+=2)s[f]=f/2+.5,s[f+1]=u;i.transformPoints(s),Aa.checkAndNudgePoints(t,s);try{for(var f=0;f<c;f+=2)t.get(Math.floor(s[f]),Math.floor(s[f+1]))&&o.set(f/2,l)}catch{throw new O}}return o},e})(Aa),Vn=(function(){function r(){}return r.setGridSampler=function(e){r.gridSampler=e},r.getInstance=function(){return r.gridSampler},r.gridSampler=new Hc,r})(),Ue=(function(){function r(e,t){this.x=e,this.y=t}return r.prototype.toResultPoint=function(){return new L(this.getX(),this.getY())},r.prototype.getX=function(){return this.x},r.prototype.getY=function(){return this.y},r})(),zc=(function(){function r(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return r.prototype.detect=function(){return this.detectMirror(!1)},r.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),n=this.getBullsEyeCorners(t);if(e){var a=n[0];n[0]=n[2],n[2]=a}this.extractParameters(n);var i=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),o=this.getMatrixCornerPoints(n);return new Gc(i,o,this.compact,this.nbDataBlocks,this.nbLayers)},r.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new O;var t=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(n,t);for(var a=0,i=0;i<4;i++){var o=n[(this.shift+i)%4];this.compact?(a<<=7,a+=o>>1&127):(a<<=10,a+=(o>>2&992)+(o>>1&31))}var s=this.getCorrectedParameterData(a,this.compact);this.compact?(this.nbLayers=(s>>6)+1,this.nbDataBlocks=(s&63)+1):(this.nbLayers=(s>>11)+1,this.nbDataBlocks=(s&2047)+1)},r.prototype.getRotation=function(e,t){var n=0;e.forEach(function(i,o,s){var l=(i>>t-2<<1)+(i&1);n=(n<<3)+l}),n=((n&1)<<11)+(n>>1);for(var a=0;a<4;a++)if(W.bitCount(n^this.EXPECTED_CORNER_BITS[a])<=2)return a;throw new O},r.prototype.getCorrectedParameterData=function(e,t){var n,a;t?(n=7,a=2):(n=10,a=4);for(var i=n-a,o=new Int32Array(n),s=n-1;s>=0;--s)o[s]=e&15,e>>=4;try{var l=new Lr(Ge.AZTEC_PARAM);l.decode(o,i)}catch{throw new O}for(var c=0,s=0;s<a;s++)c=(c<<4)+o[s];return c},r.prototype.getBullsEyeCorners=function(e){var t=e,n=e,a=e,i=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var s=this.getFirstDifferent(t,o,1,-1),l=this.getFirstDifferent(n,o,1,1),c=this.getFirstDifferent(a,o,-1,1),u=this.getFirstDifferent(i,o,-1,-1);if(this.nbCenterLayers>2){var f=this.distancePoint(u,s)*this.nbCenterLayers/(this.distancePoint(i,t)*(this.nbCenterLayers+2));if(f<.75||f>1.25||!this.isWhiteOrBlackRectangle(s,l,c,u))break}t=s,n=l,a=c,i=u,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new O;this.compact=this.nbCenterLayers===5;var h=new L(t.getX()+.5,t.getY()-.5),p=new L(n.getX()+.5,n.getY()+.5),x=new L(a.getX()-.5,a.getY()+.5),v=new L(i.getX()-.5,i.getY()-.5);return this.expandSquare([h,p,x,v],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},r.prototype.getMatrixCenter=function(){var e,t,n,a;try{var i=new yn(this.image).detect();e=i[0],t=i[1],n=i[2],a=i[3]}catch{var o=this.image.getWidth()/2,s=this.image.getHeight()/2;e=this.getFirstDifferent(new Ue(o+7,s-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Ue(o+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Ue(o-7,s+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new Ue(o-7,s-7),!1,-1,-1).toResultPoint()}var l=Q.round((e.getX()+a.getX()+t.getX()+n.getX())/4),c=Q.round((e.getY()+a.getY()+t.getY()+n.getY())/4);try{var i=new yn(this.image,15,l,c).detect();e=i[0],t=i[1],n=i[2],a=i[3]}catch{e=this.getFirstDifferent(new Ue(l+7,c-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Ue(l+7,c+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Ue(l-7,c+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new Ue(l-7,c-7),!1,-1,-1).toResultPoint()}return l=Q.round((e.getX()+a.getX()+t.getX()+n.getX())/4),c=Q.round((e.getY()+a.getY()+t.getY()+n.getY())/4),new Ue(l,c)},r.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},r.prototype.sampleGrid=function(e,t,n,a,i){var o=Vn.getInstance(),s=this.getDimension(),l=s/2-this.nbCenterLayers,c=s/2+this.nbCenterLayers;return o.sampleGrid(e,s,s,l,l,c,l,c,c,l,c,t.getX(),t.getY(),n.getX(),n.getY(),a.getX(),a.getY(),i.getX(),i.getY())},r.prototype.sampleLine=function(e,t,n){for(var a=0,i=this.distanceResultPoint(e,t),o=i/n,s=e.getX(),l=e.getY(),c=o*(t.getX()-e.getX())/i,u=o*(t.getY()-e.getY())/i,f=0;f<n;f++)this.image.get(Q.round(s+f*c),Q.round(l+f*u))&&(a|=1<<n-f-1);return a},r.prototype.isWhiteOrBlackRectangle=function(e,t,n,a){var i=3;e=new Ue(e.getX()-i,e.getY()+i),t=new Ue(t.getX()-i,t.getY()-i),n=new Ue(n.getX()+i,n.getY()-i),a=new Ue(a.getX()+i,a.getY()+i);var o=this.getColor(a,e);if(o===0)return!1;var s=this.getColor(e,t);return s!==o||(s=this.getColor(t,n),s!==o)?!1:(s=this.getColor(n,a),s===o)},r.prototype.getColor=function(e,t){for(var n=this.distancePoint(e,t),a=(t.getX()-e.getX())/n,i=(t.getY()-e.getY())/n,o=0,s=e.getX(),l=e.getY(),c=this.image.get(e.getX(),e.getY()),u=Math.ceil(n),f=0;f<u;f++)s+=a,l+=i,this.image.get(Q.round(s),Q.round(l))!==c&&o++;var h=o/n;return h>.1&&h<.9?0:h<=.1===c?1:-1},r.prototype.getFirstDifferent=function(e,t,n,a){for(var i=e.getX()+n,o=e.getY()+a;this.isValid(i,o)&&this.image.get(i,o)===t;)i+=n,o+=a;for(i-=n,o-=a;this.isValid(i,o)&&this.image.get(i,o)===t;)i+=n;for(i-=n;this.isValid(i,o)&&this.image.get(i,o)===t;)o+=a;return o-=a,new Ue(i,o)},r.prototype.expandSquare=function(e,t,n){var a=n/(2*t),i=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),s=(e[0].getX()+e[2].getX())/2,l=(e[0].getY()+e[2].getY())/2,c=new L(s+a*i,l+a*o),u=new L(s-a*i,l-a*o);i=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),s=(e[1].getX()+e[3].getX())/2,l=(e[1].getY()+e[3].getY())/2;var f=new L(s+a*i,l+a*o),h=new L(s-a*i,l-a*o),p=[c,f,u,h];return p},r.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},r.prototype.isValidPoint=function(e){var t=Q.round(e.getX()),n=Q.round(e.getY());return this.isValid(t,n)},r.prototype.distancePoint=function(e,t){return Q.distance(e.getX(),e.getY(),t.getX(),t.getY())},r.prototype.distanceResultPoint=function(e,t){return Q.distance(e.getX(),e.getY(),t.getX(),t.getY())},r.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(W.truncDivision(this.nbLayers-4,8)+1)+15},r})(),yr=(function(){function r(){}return r.prototype.decode=function(e,t){t===void 0&&(t=null);var n=null,a=new zc(e.getBlackMatrix()),i=null,o=null;try{var s=a.detectMirror(!1);i=s.getPoints(),this.reportFoundResultPoints(t,i),o=new _a().decode(s)}catch(f){n=f}if(o==null)try{var s=a.detectMirror(!0);i=s.getPoints(),this.reportFoundResultPoints(t,i),o=new _a().decode(s)}catch(f){throw n??f}var l=new je(o.getText(),o.getRawBytes(),o.getNumBits(),i,B.AZTEC,de.currentTimeMillis()),c=o.getByteSegments();c!=null&&l.putMetadata(Pe.BYTE_SEGMENTS,c);var u=o.getECLevel();return u!=null&&l.putMetadata(Pe.ERROR_CORRECTION_LEVEL,u),l},r.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var n=e.get(le.NEED_RESULT_POINT_CALLBACK);n!=null&&t.forEach(function(a,i,o){n.foundPossibleResultPoint(a)})}},r.prototype.reset=function(){},r})(),Wc=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){Wc(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new yr,t)||this}return e})(jt);var Ne=(function(){function r(){}return r.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var n=t&&t.get(le.TRY_HARDER)===!0;if(n&&e.isRotateSupported()){var a=e.rotateCounterClockwise(),i=this.doDecode(a,t),o=i.getResultMetadata(),s=270;o!==null&&o.get(Pe.ORIENTATION)===!0&&(s=s+o.get(Pe.ORIENTATION)%360),i.putMetadata(Pe.ORIENTATION,s);var l=i.getResultPoints();if(l!==null)for(var c=a.getHeight(),u=0;u<l.length;u++)l[u]=new L(c-l[u].getY()-1,l[u].getX());return i}else throw new O}},r.prototype.reset=function(){},r.prototype.doDecode=function(e,t){var n=e.getWidth(),a=e.getHeight(),i=new Te(n),o=t&&t.get(le.TRY_HARDER)===!0,s=Math.max(1,a>>(o?8:5)),l;o?l=a:l=15;for(var c=Math.trunc(a/2),u=0;u<l;u++){var f=Math.trunc((u+1)/2),h=(u&1)===0,p=c+s*(h?f:-f);if(p<0||p>=a)break;try{i=e.getBlackRow(p,i)}catch{continue}for(var x=function(g){if(g===1&&(i.reverse(),t&&t.get(le.NEED_RESULT_POINT_CALLBACK)===!0)){var _=new Map;t.forEach(function(E,N){return _.set(N,E)}),_.delete(le.NEED_RESULT_POINT_CALLBACK),t=_}try{var C=v.decodeRow(p,i,t);if(g===1){C.putMetadata(Pe.ORIENTATION,180);var A=C.getResultPoints();A!==null&&(A[0]=new L(n-A[0].getX()-1,A[0].getY()),A[1]=new L(n-A[1].getX()-1,A[1].getY()))}return{value:C}}catch{}},v=this,m=0;m<2;m++){var y=x(m);if(typeof y=="object")return y.value}}throw new O},r.recordPattern=function(e,t,n){for(var a=n.length,i=0;i<a;i++)n[i]=0;var o=e.getSize();if(t>=o)throw new O;for(var s=!e.get(t),l=0,c=t;c<o;){if(e.get(c)!==s)n[l]++;else{if(++l===a)break;n[l]=1,s=!s}c++}if(!(l===a||l===a-1&&c===o))throw new O},r.recordPatternInReverse=function(e,t,n){for(var a=n.length,i=e.get(t);t>0&&a>=0;)e.get(--t)!==i&&(a--,i=!i);if(a>=0)throw new O;r.recordPattern(e,t+1,n)},r.patternMatchVariance=function(e,t,n){for(var a=e.length,i=0,o=0,s=0;s<a;s++)i+=e[s],o+=t[s];if(i<o)return Number.POSITIVE_INFINITY;var l=i/o;n*=l;for(var c=0,u=0;u<a;u++){var f=e[u],h=t[u]*l,p=f>h?f-h:h-f;if(p>n)return Number.POSITIVE_INFINITY;c+=p}return c/i},r})(),Xc=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Ca=(function(r){Xc(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var n=t.getSize(),a=t.getNextSet(0),i=0,o=Int32Array.from([0,0,0,0,0,0]),s=a,l=!1,c=6,u=a;u<n;u++)if(t.get(u)!==l)o[i]++;else{if(i===c-1){for(var f=e.MAX_AVG_VARIANCE,h=-1,p=e.CODE_START_A;p<=e.CODE_START_C;p++){var x=Ne.patternMatchVariance(o,e.CODE_PATTERNS[p],e.MAX_INDIVIDUAL_VARIANCE);x<f&&(f=x,h=p)}if(h>=0&&t.isRange(Math.max(0,s-(u-s)/2),s,!1))return Int32Array.from([s,u,h]);s+=o[0]+o[1],o=o.slice(2,o.length),o[i-1]=0,o[i]=0,i--}else i++;o[i]=1,l=!l}throw new O},e.decodeCode=function(t,n,a){Ne.recordPattern(t,a,n);for(var i=e.MAX_AVG_VARIANCE,o=-1,s=0;s<e.CODE_PATTERNS.length;s++){var l=e.CODE_PATTERNS[s],c=this.patternMatchVariance(n,l,e.MAX_INDIVIDUAL_VARIANCE);c<i&&(i=c,o=s)}if(o>=0)return o;throw new O},e.prototype.decodeRow=function(t,n,a){var i=a&&a.get(le.ASSUME_GS1)===!0,o=e.findStartPattern(n),s=o[2],l=0,c=new Uint8Array(20);c[l++]=s;var u;switch(s){case e.CODE_START_A:u=e.CODE_CODE_A;break;case e.CODE_START_B:u=e.CODE_CODE_B;break;case e.CODE_START_C:u=e.CODE_CODE_C;break;default:throw new D}for(var f=!1,h=!1,p="",x=o[0],v=o[1],m=Int32Array.from([0,0,0,0,0,0]),y=0,g=0,_=s,C=0,A=!0,E=!1,N=!1;!f;){var I=h;switch(h=!1,y=g,g=e.decodeCode(n,m,v),c[l++]=g,g!==e.CODE_STOP&&(A=!0),g!==e.CODE_STOP&&(C++,_+=C*g),x=v,v+=m.reduce(function(ee,fe){return ee+fe},0),g){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new D}switch(u){case e.CODE_CODE_A:if(g<64)N===E?p+=String.fromCharCode(32+g):p+=String.fromCharCode(32+g+128),N=!1;else if(g<96)N===E?p+=String.fromCharCode(g-64):p+=String.fromCharCode(g+64),N=!1;else switch(g!==e.CODE_STOP&&(A=!1),g){case e.CODE_FNC_1:i&&(p.length===0?p+="]C1":p+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!E&&N?(E=!0,N=!1):E&&N?(E=!1,N=!1):N=!0;break;case e.CODE_SHIFT:h=!0,u=e.CODE_CODE_B;break;case e.CODE_CODE_B:u=e.CODE_CODE_B;break;case e.CODE_CODE_C:u=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_B:if(g<96)N===E?p+=String.fromCharCode(32+g):p+=String.fromCharCode(32+g+128),N=!1;else switch(g!==e.CODE_STOP&&(A=!1),g){case e.CODE_FNC_1:i&&(p.length===0?p+="]C1":p+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!E&&N?(E=!0,N=!1):E&&N?(E=!1,N=!1):N=!0;break;case e.CODE_SHIFT:h=!0,u=e.CODE_CODE_A;break;case e.CODE_CODE_A:u=e.CODE_CODE_A;break;case e.CODE_CODE_C:u=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_C:if(g<100)g<10&&(p+="0"),p+=g;else switch(g!==e.CODE_STOP&&(A=!1),g){case e.CODE_FNC_1:i&&(p.length===0?p+="]C1":p+="");break;case e.CODE_CODE_A:u=e.CODE_CODE_A;break;case e.CODE_CODE_B:u=e.CODE_CODE_B;break;case e.CODE_STOP:f=!0;break}break}I&&(u=u===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var k=v-x;if(v=n.getNextUnset(v),!n.isRange(v,Math.min(n.getSize(),v+(v-x)/2),!1))throw new O;if(_-=C*y,_%103!==y)throw new be;var R=p.length;if(R===0)throw new O;R>0&&A&&(u===e.CODE_CODE_C?p=p.substring(0,R-2):p=p.substring(0,R-1));for(var M=(o[1]+o[0])/2,j=x+k/2,G=c.length,F=new Uint8Array(G),V=0;V<G;V++)F[V]=c[V];var Y=[new L(M,t),new L(j,t)];return new je(p,F,0,Y,B.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e})(Ne),Yc=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),zr=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ea=(function(r){Yc(e,r);function e(t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var a=r.call(this)||this;return a.usingCheckDigit=t,a.extendedMode=n,a.decodeRowResult="",a.counters=new Int32Array(9),a}return e.prototype.decodeRow=function(t,n,a){var i,o,s,l,c=this.counters;c.fill(0),this.decodeRowResult="";var u=e.findAsteriskPattern(n,c),f=n.getNextSet(u[1]),h=n.getSize(),p,x;do{e.recordPattern(n,f,c);var v=e.toNarrowWidePattern(c);if(v<0)throw new O;p=e.patternToChar(v),this.decodeRowResult+=p,x=f;try{for(var m=(i=void 0,zr(c)),y=m.next();!y.done;y=m.next()){var g=y.value;f+=g}}catch(G){i={error:G}}finally{try{y&&!y.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}f=n.getNextSet(f)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var _=0;try{for(var C=zr(c),A=C.next();!A.done;A=C.next()){var g=A.value;_+=g}}catch(G){s={error:G}}finally{try{A&&!A.done&&(l=C.return)&&l.call(C)}finally{if(s)throw s.error}}var E=f-x-_;if(f!==h&&E*2<_)throw new O;if(this.usingCheckDigit){for(var N=this.decodeRowResult.length-1,I=0,k=0;k<N;k++)I+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(k));if(this.decodeRowResult.charAt(N)!==e.ALPHABET_STRING.charAt(I%43))throw new be;this.decodeRowResult=this.decodeRowResult.substring(0,N)}if(this.decodeRowResult.length===0)throw new O;var R;this.extendedMode?R=e.decodeExtended(this.decodeRowResult):R=this.decodeRowResult;var M=(u[1]+u[0])/2,j=x+_/2;return new je(R,null,0,[new L(M,t),new L(j,t)],B.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,n){for(var a=t.getSize(),i=t.getNextSet(0),o=0,s=i,l=!1,c=n.length,u=i;u<a;u++)if(t.get(u)!==l)n[o]++;else{if(o===c-1){if(this.toNarrowWidePattern(n)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,s-Math.floor((u-s)/2)),s,!1))return[s,u];s+=n[0]+n[1],n.copyWithin(0,2,2+o-1),n[o-1]=0,n[o]=0,o--}else o++;n[o]=1,l=!l}throw new O},e.toNarrowWidePattern=function(t){var n,a,i=t.length,o=0,s;do{var l=2147483647;try{for(var c=(n=void 0,zr(t)),u=c.next();!u.done;u=c.next()){var f=u.value;f<l&&f>o&&(l=f)}}catch(v){n={error:v}}finally{try{u&&!u.done&&(a=c.return)&&a.call(c)}finally{if(n)throw n.error}}o=l,s=0;for(var h=0,p=0,x=0;x<i;x++){var f=t[x];f>o&&(p|=1<<i-1-x,s++,h+=f)}if(s===3){for(var x=0;x<i&&s>0;x++){var f=t[x];if(f>o&&(s--,f*2>=h))return-1}return p}}while(s>3);return-1},e.patternToChar=function(t){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===t)return e.ALPHABET_STRING.charAt(n);if(t===e.ASTERISK_ENCODING)return"*";throw new O},e.decodeExtended=function(t){for(var n=t.length,a="",i=0;i<n;i++){var o=t.charAt(i);if(o==="+"||o==="$"||o==="%"||o==="/"){var s=t.charAt(i+1),l="\0";switch(o){case"+":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)+32);else throw new D;break;case"$":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)-64);else throw new D;break;case"%":if(s>="A"&&s<="E")l=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")l=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")l=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")l="\0";else if(s==="V")l="@";else if(s==="W")l="`";else if(s==="X"||s==="Y"||s==="Z")l="";else throw new D;break;case"/":if(s>="A"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")l=":";else throw new D;break}a+=l,i++}else a+=o}return a},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e})(Ne),Zc=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Wr=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Sa=(function(r){Zc(e,r);function e(){var t=r.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,n,a){var i,o,s,l,c=this.findAsteriskPattern(n),u=n.getNextSet(c[1]),f=n.getSize(),h=this.counters;h.fill(0),this.decodeRowResult="";var p,x;do{e.recordPattern(n,u,h);var v=this.toPattern(h);if(v<0)throw new O;p=this.patternToChar(v),this.decodeRowResult+=p,x=u;try{for(var m=(i=void 0,Wr(h)),y=m.next();!y.done;y=m.next()){var g=y.value;u+=g}}catch(k){i={error:k}}finally{try{y&&!y.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}u=n.getNextSet(u)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var _=0;try{for(var C=Wr(h),A=C.next();!A.done;A=C.next()){var g=A.value;_+=g}}catch(k){s={error:k}}finally{try{A&&!A.done&&(l=C.return)&&l.call(C)}finally{if(s)throw s.error}}if(u===f||!n.get(u))throw new O;if(this.decodeRowResult.length<2)throw new O;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var E=this.decodeExtended(this.decodeRowResult),N=(c[1]+c[0])/2,I=x+_/2;return new je(E,null,0,[new L(N,t),new L(I,t)],B.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var n=t.getSize(),a=t.getNextSet(0);this.counters.fill(0);for(var i=this.counters,o=a,s=!1,l=i.length,c=0,u=a;u<n;u++)if(t.get(u)!==s)i[c]++;else{if(c===l-1){if(this.toPattern(i)===e.ASTERISK_ENCODING)return new Int32Array([o,u]);o+=i[0]+i[1],i.copyWithin(0,2,2+c-1),i[c-1]=0,i[c]=0,c--}else c++;i[c]=1,s=!s}throw new O},e.prototype.toPattern=function(t){var n,a,i=0;try{for(var o=Wr(t),s=o.next();!s.done;s=o.next()){var l=s.value;i+=l}}catch(x){n={error:x}}finally{try{s&&!s.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}for(var c=0,u=t.length,f=0;f<u;f++){var h=Math.round(t[f]*9/i);if(h<1||h>4)return-1;if((f&1)===0)for(var p=0;p<h;p++)c=c<<1|1;else c<<=h}return c},e.prototype.patternToChar=function(t){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===t)return e.ALPHABET_STRING.charAt(n);throw new O},e.prototype.decodeExtended=function(t){for(var n=t.length,a="",i=0;i<n;i++){var o=t.charAt(i);if(o>="a"&&o<="d"){if(i>=n-1)throw new D;var s=t.charAt(i+1),l="\0";switch(o){case"d":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)+32);else throw new D;break;case"a":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)-64);else throw new D;break;case"b":if(s>="A"&&s<="E")l=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")l=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")l=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")l="\0";else if(s==="V")l="@";else if(s==="W")l="`";else if(s>="X"&&s<="Z")l="";else throw new D;break;case"c":if(s>="A"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")l=":";else throw new D;break}a+=l,i++}else a+=o}return a},e.prototype.checkChecksums=function(t){var n=t.length;this.checkOneChecksum(t,n-2,20),this.checkOneChecksum(t,n-1,15)},e.prototype.checkOneChecksum=function(t,n,a){for(var i=1,o=0,s=n-1;s>=0;s--)o+=i*e.ALPHABET_STRING.indexOf(t.charAt(s)),++i>a&&(i=1);if(t.charAt(n)!==e.ALPHABET_STRING[o%47])throw new be},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e})(Ne),Kc=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),qc=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Na=(function(r){Kc(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,n,a){var i,o,s=this.decodeStart(n),l=this.decodeEnd(n),c=new $;e.decodeMiddle(n,s[1],l[0],c);var u=c.toString(),f=null;a!=null&&(f=a.get(le.ALLOWED_LENGTHS)),f==null&&(f=e.DEFAULT_ALLOWED_LENGTHS);var h=u.length,p=!1,x=0;try{for(var v=qc(f),m=v.next();!m.done;m=v.next()){var y=m.value;if(h===y){p=!0;break}y>x&&(x=y)}}catch(C){i={error:C}}finally{try{m&&!m.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}if(!p&&h>x&&(p=!0),!p)throw new D;var g=[new L(s[1],t),new L(l[0],t)],_=new je(u,null,0,g,B.ITF,new Date().getTime());return _},e.decodeMiddle=function(t,n,a,i){var o=new Int32Array(10),s=new Int32Array(5),l=new Int32Array(5);for(o.fill(0),s.fill(0),l.fill(0);n<a;){Ne.recordPattern(t,n,o);for(var c=0;c<5;c++){var u=2*c;s[c]=o[u],l[c]=o[u+1]}var f=e.decodeDigit(s);i.append(f.toString()),f=this.decodeDigit(l),i.append(f.toString()),o.forEach(function(h){n+=h})}},e.prototype.decodeStart=function(t){var n=e.skipWhiteSpace(t),a=e.findGuardPattern(t,n,e.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(t,a[0]),a},e.prototype.validateQuietZone=function(t,n){var a=this.narrowLineWidth*10;a=a<n?a:n;for(var i=n-1;a>0&&i>=0&&!t.get(i);i--)a--;if(a!==0)throw new O},e.skipWhiteSpace=function(t){var n=t.getSize(),a=t.getNextSet(0);if(a===n)throw new O;return a},e.prototype.decodeEnd=function(t){t.reverse();try{var n=e.skipWhiteSpace(t),a=void 0;try{a=e.findGuardPattern(t,n,e.END_PATTERN_REVERSED[0])}catch(o){o instanceof O&&(a=e.findGuardPattern(t,n,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,a[0]);var i=a[0];return a[0]=t.getSize()-a[1],a[1]=t.getSize()-i,a}finally{t.reverse()}},e.findGuardPattern=function(t,n,a){var i=a.length,o=new Int32Array(i),s=t.getSize(),l=!1,c=0,u=n;o.fill(0);for(var f=n;f<s;f++)if(t.get(f)!==l)o[c]++;else{if(c===i-1){if(Ne.patternMatchVariance(o,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[u,f];u+=o[0]+o[1],de.arraycopy(o,2,o,0,c-1),o[c-1]=0,o[c]=0,c--}else c++;o[c]=1,l=!l}throw new O},e.decodeDigit=function(t){for(var n=e.MAX_AVG_VARIANCE,a=-1,i=e.PATTERNS.length,o=0;o<i;o++){var s=e.PATTERNS[o],l=Ne.patternMatchVariance(t,s,e.MAX_INDIVIDUAL_VARIANCE);l<n?(n=l,a=o):l===n&&(a=-1)}if(a>=0)return a%10;throw new O},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e})(Ne),Jc=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Rt=(function(r){Jc(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var n=!1,a,i=0,o=Int32Array.from([0,0,0]);!n;){o=Int32Array.from([0,0,0]),a=e.findGuardPattern(t,i,!1,this.START_END_PATTERN,o);var s=a[0];i=a[1];var l=s-(i-s);l>=0&&(n=t.isRange(l,s,!1))}return a},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var n=t.length;if(n===0)return!1;var a=parseInt(t.charAt(n-1),10);return e.getStandardUPCEANChecksum(t.substring(0,n-1))===a},e.getStandardUPCEANChecksum=function(t){for(var n=t.length,a=0,i=n-1;i>=0;i-=2){var o=t.charAt(i).charCodeAt(0)-48;if(o<0||o>9)throw new D;a+=o}a*=3;for(var i=n-2;i>=0;i-=2){var o=t.charAt(i).charCodeAt(0)-48;if(o<0||o>9)throw new D;a+=o}return(1e3-a)%10},e.decodeEnd=function(t,n){return e.findGuardPattern(t,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,n,a,i){return this.findGuardPattern(t,n,a,i,new Int32Array(i.length))},e.findGuardPattern=function(t,n,a,i,o){var s=t.getSize();n=a?t.getNextUnset(n):t.getNextSet(n);for(var l=0,c=n,u=i.length,f=a,h=n;h<s;h++)if(t.get(h)!==f)o[l]++;else{if(l===u-1){if(Ne.patternMatchVariance(o,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([c,h]);c+=o[0]+o[1];for(var p=o.slice(2,o.length),x=0;x<l-1;x++)o[x]=p[x];o[l-1]=0,o[l]=0,l--}else l++;o[l]=1,f=!f}throw new O},e.decodeDigit=function(t,n,a,i){this.recordPattern(t,a,n);for(var o=this.MAX_AVG_VARIANCE,s=-1,l=i.length,c=0;c<l;c++){var u=i[c],f=Ne.patternMatchVariance(n,u,e.MAX_INDIVIDUAL_VARIANCE);f<o&&(o=f,s=c)}if(s>=0)return s;throw new O},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e})(Ne),Qc=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eu=(function(){function r(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return r.prototype.decodeRow=function(e,t,n){var a=this.decodeRowStringBuffer,i=this.decodeMiddle(t,n,a),o=a.toString(),s=r.parseExtensionString(o),l=[new L((n[0]+n[1])/2,e),new L(i,e)],c=new je(o,null,0,l,B.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&c.putAllMetadata(s),c},r.prototype.decodeMiddle=function(e,t,n){var a,i,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var s=e.getSize(),l=t[1],c=0,u=0;u<5&&l<s;u++){var f=Rt.decodeDigit(e,o,l,Rt.L_AND_G_PATTERNS);n+=String.fromCharCode(48+f%10);try{for(var h=(a=void 0,Qc(o)),p=h.next();!p.done;p=h.next()){var x=p.value;l+=x}}catch(m){a={error:m}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(a)throw a.error}}f>=10&&(c|=1<<4-u),u!==4&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(n.length!==5)throw new O;var v=this.determineCheckDigit(c);if(r.extensionChecksum(n.toString())!==v)throw new O;return l},r.extensionChecksum=function(e){for(var t=e.length,n=0,a=t-2;a>=0;a-=2)n+=e.charAt(a).charCodeAt(0)-48;n*=3;for(var a=t-1;a>=0;a-=2)n+=e.charAt(a).charCodeAt(0)-48;return n*=3,n%10},r.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new O},r.parseExtensionString=function(e){if(e.length!==5)return null;var t=r.parseExtension5String(e);return t==null?null:new Map([[Pe.SUGGESTED_PRICE,t]])},r.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="£";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var n=parseInt(e.substring(1)),a=(n/100).toString(),i=n%100,o=i<10?"0"+i:i.toString();return t+a+"."+o},r})(),tu=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ru=(function(){function r(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return r.prototype.decodeRow=function(e,t,n){var a=this.decodeRowStringBuffer,i=this.decodeMiddle(t,n,a),o=a.toString(),s=r.parseExtensionString(o),l=[new L((n[0]+n[1])/2,e),new L(i,e)],c=new je(o,null,0,l,B.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&c.putAllMetadata(s),c},r.prototype.decodeMiddle=function(e,t,n){var a,i,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var s=e.getSize(),l=t[1],c=0,u=0;u<2&&l<s;u++){var f=Rt.decodeDigit(e,o,l,Rt.L_AND_G_PATTERNS);n+=String.fromCharCode(48+f%10);try{for(var h=(a=void 0,tu(o)),p=h.next();!p.done;p=h.next()){var x=p.value;l+=x}}catch(v){a={error:v}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(a)throw a.error}}f>=10&&(c|=1<<1-u),u!==1&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(n.length!==2)throw new O;if(parseInt(n.toString())%4!==c)throw new O;return l},r.parseExtensionString=function(e){return e.length!==2?null:new Map([[Pe.ISSUE_NUMBER,parseInt(e)]])},r})(),nu=(function(){function r(){}return r.decodeRow=function(e,t,n){var a=Rt.findGuardPattern(t,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var i=new eu;return i.decodeRow(e,t,a)}catch{var o=new ru;return o.decodeRow(e,t,a)}},r.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),r})(),au=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Ce=(function(r){au(e,r);function e(){var t=r.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(s){return Int32Array.from(s)});for(var n=10;n<20;n++){for(var a=e.L_PATTERNS[n-10],i=new Int32Array(a.length),o=0;o<a.length;o++)i[o]=a[a.length-o-1];e.L_AND_G_PATTERNS[n]=i}return t}return e.prototype.decodeRow=function(t,n,a){var i=e.findStartGuardPattern(n),o=a==null?null:a.get(le.NEED_RESULT_POINT_CALLBACK);if(o!=null){var s=new L((i[0]+i[1])/2,t);o.foundPossibleResultPoint(s)}var l=this.decodeMiddle(n,i,this.decodeRowStringBuffer),c=l.rowOffset,u=l.resultString;if(o!=null){var f=new L(c,t);o.foundPossibleResultPoint(f)}var h=e.decodeEnd(n,c);if(o!=null){var p=new L((h[0]+h[1])/2,t);o.foundPossibleResultPoint(p)}var x=h[1],v=x+(x-h[0]);if(v>=n.getSize()||!n.isRange(x,v,!1))throw new O;var m=u.toString();if(m.length<8)throw new D;if(!e.checkChecksum(m))throw new be;var y=(i[1]+i[0])/2,g=(h[1]+h[0])/2,_=this.getBarcodeFormat(),C=[new L(y,t),new L(g,t)],A=new je(m,null,0,C,_,new Date().getTime()),E=0;try{var N=nu.decodeRow(t,n,h[1]);A.putMetadata(Pe.UPC_EAN_EXTENSION,N.getText()),A.putAllMetadata(N.getResultMetadata()),A.addResultPoints(N.getResultPoints()),E=N.getText().length}catch{}var I=a==null?null:a.get(le.ALLOWED_EAN_EXTENSIONS);if(I!=null){var k=!1;for(var R in I)if(E.toString()===R){k=!0;break}if(!k)throw new O}return _===B.EAN_13||B.UPC_A,A},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var n=t.length;if(n===0)return!1;var a=parseInt(t.charAt(n-1),10);return e.getStandardUPCEANChecksum(t.substring(0,n-1))===a},e.getStandardUPCEANChecksum=function(t){for(var n=t.length,a=0,i=n-1;i>=0;i-=2){var o=t.charAt(i).charCodeAt(0)-48;if(o<0||o>9)throw new D;a+=o}a*=3;for(var i=n-2;i>=0;i-=2){var o=t.charAt(i).charCodeAt(0)-48;if(o<0||o>9)throw new D;a+=o}return(1e3-a)%10},e.decodeEnd=function(t,n){return e.findGuardPattern(t,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e})(Rt),iu=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Ia=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bn=(function(r){iu(e,r);function e(){var t=r.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,n,a){var i,o,s,l,c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;for(var u=t.getSize(),f=n[1],h=0,p=0;p<6&&f<u;p++){var x=Ce.decodeDigit(t,c,f,Ce.L_AND_G_PATTERNS);a+=String.fromCharCode(48+x%10);try{for(var v=(i=void 0,Ia(c)),m=v.next();!m.done;m=v.next()){var y=m.value;f+=y}}catch(A){i={error:A}}finally{try{m&&!m.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}x>=10&&(h|=1<<5-p)}a=e.determineFirstDigit(a,h);var g=Ce.findGuardPattern(t,f,!0,Ce.MIDDLE_PATTERN,new Int32Array(Ce.MIDDLE_PATTERN.length).fill(0));f=g[1];for(var p=0;p<6&&f<u;p++){var x=Ce.decodeDigit(t,c,f,Ce.L_PATTERNS);a+=String.fromCharCode(48+x);try{for(var _=(s=void 0,Ia(c)),C=_.next();!C.done;C=_.next()){var y=C.value;f+=y}}catch(N){s={error:N}}finally{try{C&&!C.done&&(l=_.return)&&l.call(_)}finally{if(s)throw s.error}}}return{rowOffset:f,resultString:a}},e.prototype.getBarcodeFormat=function(){return B.EAN_13},e.determineFirstDigit=function(t,n){for(var a=0;a<10;a++)if(n===this.FIRST_DIGIT_ENCODINGS[a])return t=String.fromCharCode(48+a)+t,t;throw new O},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e})(Ce),ou=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Oa=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ka=(function(r){ou(e,r);function e(){var t=r.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,n,a){var i,o,s,l,c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;for(var u=t.getSize(),f=n[1],h=0;h<4&&f<u;h++){var p=Ce.decodeDigit(t,c,f,Ce.L_PATTERNS);a+=String.fromCharCode(48+p);try{for(var x=(i=void 0,Oa(c)),v=x.next();!v.done;v=x.next()){var m=v.value;f+=m}}catch(C){i={error:C}}finally{try{v&&!v.done&&(o=x.return)&&o.call(x)}finally{if(i)throw i.error}}}var y=Ce.findGuardPattern(t,f,!0,Ce.MIDDLE_PATTERN,new Int32Array(Ce.MIDDLE_PATTERN.length).fill(0));f=y[1];for(var h=0;h<4&&f<u;h++){var p=Ce.decodeDigit(t,c,f,Ce.L_PATTERNS);a+=String.fromCharCode(48+p);try{for(var g=(s=void 0,Oa(c)),_=g.next();!_.done;_=g.next()){var m=_.value;f+=m}}catch(E){s={error:E}}finally{try{_&&!_.done&&(l=g.return)&&l.call(g)}finally{if(s)throw s.error}}}return{rowOffset:f,resultString:a}},e.prototype.getBarcodeFormat=function(){return B.EAN_8},e})(Ce),su=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Ta=(function(r){su(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.ean13Reader=new bn,t}return e.prototype.getBarcodeFormat=function(){return B.UPC_A},e.prototype.decode=function(t,n){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,n,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,n,a))},e.prototype.decodeMiddle=function(t,n,a){return this.ean13Reader.decodeMiddle(t,n,a)},e.prototype.maybeReturnResult=function(t){var n=t.getText();if(n.charAt(0)==="0"){var a=new je(n.substring(1),null,null,t.getResultPoints(),B.UPC_A);return t.getResultMetadata()!=null&&a.putAllMetadata(t.getResultMetadata()),a}else throw new O},e.prototype.reset=function(){this.ean13Reader.reset()},e})(Ce),lu=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),cu=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ra=(function(r){lu(e,r);function e(){var t=r.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,n,a){var i,o,s=this.decodeMiddleCounters.map(function(m){return m});s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var l=t.getSize(),c=n[1],u=0,f=0;f<6&&c<l;f++){var h=e.decodeDigit(t,s,c,e.L_AND_G_PATTERNS);a+=String.fromCharCode(48+h%10);try{for(var p=(i=void 0,cu(s)),x=p.next();!x.done;x=p.next()){var v=x.value;c+=v}}catch(m){i={error:m}}finally{try{x&&!x.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}h>=10&&(u|=1<<5-f)}return e.determineNumSysAndCheckDigit(new $(a),u),c},e.prototype.decodeEnd=function(t,n){return e.findGuardPatternWithoutCounters(t,n,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return Ce.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,n){for(var a=0;a<=1;a++)for(var i=0;i<10;i++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][i]){t.insert(0,"0"+a),t.append("0"+i);return}throw O.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return B.UPC_E},e.convertUPCEtoUPCA=function(t){var n=t.slice(1,7).split("").map(function(o){return o.charCodeAt(0)}),a=new $;a.append(t.charAt(0));var i=n[5];switch(i){case 0:case 1:case 2:a.appendChars(n,0,2),a.append(i),a.append("0000"),a.appendChars(n,2,3);break;case 3:a.appendChars(n,0,3),a.append("00000"),a.appendChars(n,3,2);break;case 4:a.appendChars(n,0,4),a.append("00000"),a.append(n[4]);break;default:a.appendChars(n,0,5),a.append("0000"),a.append(i);break}return t.length>=8&&a.append(t.charAt(7)),a.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e})(Ce),uu=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Da=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xr=(function(r){uu(e,r);function e(t){var n=r.call(this)||this,a=t==null?null:t.get(le.POSSIBLE_FORMATS),i=[];return a!=null&&(a.indexOf(B.EAN_13)>-1&&i.push(new bn),a.indexOf(B.UPC_A)>-1&&i.push(new Ta),a.indexOf(B.EAN_8)>-1&&i.push(new ka),a.indexOf(B.UPC_E)>-1&&i.push(new Ra)),i.length===0&&(i.push(new bn),i.push(new Ta),i.push(new ka),i.push(new Ra)),n.readers=i,n}return e.prototype.decodeRow=function(t,n,a){var i,o;try{for(var s=Da(this.readers),l=s.next();!l.done;l=s.next()){var c=l.value;try{var u=c.decodeRow(t,n,a),f=u.getBarcodeFormat()===B.EAN_13&&u.getText().charAt(0)==="0",h=a==null?null:a.get(le.POSSIBLE_FORMATS),p=h==null||h.includes(B.UPC_A);if(f&&p){var x=u.getRawBytes(),v=new je(u.getText().substring(1),x,x?x.length:null,u.getResultPoints(),B.UPC_A);return v.putAllMetadata(u.getResultMetadata()),v}return u}catch{}}}catch(m){i={error:m}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}throw new O},e.prototype.reset=function(){var t,n;try{for(var a=Da(this.readers),i=a.next();!i.done;i=a.next()){var o=i.value;o.reset()}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}},e})(Ne),du=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),fu=(function(r){du(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,n,a){var i=this.getValidRowData(n);if(!i)throw new O;var o=this.codaBarDecodeRow(i.row);if(!o)throw new O;return new je(o,null,0,[new L(i.left,t),new L(i.right,t)],B.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var n=t.toArray(),a=n.indexOf(!0);if(a===-1)return null;var i=n.lastIndexOf(!0);if(i<=a)return null;n=n.slice(a,i+1);for(var o=[],s=n[0],l=1,c=1;c<n.length;c++)n[c]===s?l++:(s=n[c],o.push(l),l=1);return o.push(l),o.length<23&&(o.length+1)%8!==0?null:{row:o,left:a,right:i}},e.prototype.codaBarDecodeRow=function(t){for(var n=[],a=Math.ceil(t.reduce(function(l,c){return(l+c)/2},0));t.length>0;){var i=t.splice(0,8).splice(0,7),o=i.map(function(l){return l<a?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[o]===void 0)return null;n.push(this.CODA_BAR_CHAR_SET[o])}var s=n.join("");return this.validCodaBarString(s)?s:null},e.prototype.validCodaBarString=function(t){var n=/^[A-D].{1,}[A-D]$/;return n.test(t)},e})(Ne),hu=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),pu=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wt=(function(r){hu(e,r);function e(){var t=r.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,n){for(var a=0;a<n.length;a++)if(Ne.patternMatchVariance(t,n[a],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return a;throw new O},e.count=function(t){return Q.sum(new Int32Array(t))},e.increment=function(t,n){for(var a=0,i=n[0],o=1;o<t.length;o++)n[o]>i&&(i=n[o],a=o);t[a]++},e.decrement=function(t,n){for(var a=0,i=n[0],o=1;o<t.length;o++)n[o]<i&&(i=n[o],a=o);t[a]--},e.isFinderPattern=function(t){var n,a,i=t[0]+t[1],o=i+t[2]+t[3],s=i/o;if(s>=e.MIN_FINDER_PATTERN_RATIO&&s<=e.MAX_FINDER_PATTERN_RATIO){var l=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER;try{for(var u=pu(t),f=u.next();!f.done;f=u.next()){var h=f.value;h>c&&(c=h),h<l&&(l=h)}}catch(p){n={error:p}}finally{try{f&&!f.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}return c<10*l}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e})(Ne),br=(function(){function r(e,t){this.value=e,this.checksumPortion=t}return r.prototype.getValue=function(){return this.value},r.prototype.getChecksumPortion=function(){return this.checksumPortion},r.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},r.prototype.hashCode=function(){return this.value^this.checksumPortion},r})(),po=(function(){function r(e,t,n,a,i){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new L(n,i)),this.resultPoints.push(new L(a,i))}return r.prototype.getValue=function(){return this.value},r.prototype.getStartEnd=function(){return this.startEnd},r.prototype.getResultPoints=function(){return this.resultPoints},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value},r.prototype.hashCode=function(){return this.value},r})(),xu=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},St=(function(){function r(){}return r.getRSSvalue=function(e,t,n){var a,i,o=0;try{for(var s=xu(e),l=s.next();!l.done;l=s.next()){var c=l.value;o+=c}}catch(g){a={error:g}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(a)throw a.error}}for(var u=0,f=0,h=e.length,p=0;p<h-1;p++){var x=void 0;for(x=1,f|=1<<p;x<e[p];x++,f&=~(1<<p)){var v=r.combins(o-x-1,h-p-2);if(n&&f===0&&o-x-(h-p-1)>=h-p-1&&(v-=r.combins(o-x-(h-p),h-p-2)),h-p-1>1){for(var m=0,y=o-x-(h-p-2);y>t;y--)m+=r.combins(o-x-y-1,h-p-3);v-=m*(h-1-p)}else o-x>t&&v--;u+=v}o-=x}return u},r.combins=function(e,t){var n,a;e-t>t?(a=t,n=e-t):(a=e-t,n=t);for(var i=1,o=1,s=e;s>n;s--)i*=s,o<=a&&(i/=o,o++);for(;o<=a;)i/=o,o++;return i},r})(),vu=(function(){function r(){}return r.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var n=12*t,a=new Te(n),i=0,o=e[0],s=o.getRightChar().getValue(),l=11;l>=0;--l)(s&1<<l)!==0&&a.set(i),i++;for(var l=1;l<e.length;++l){for(var c=e[l],u=c.getLeftChar().getValue(),f=11;f>=0;--f)(u&1<<f)!==0&&a.set(i),i++;if(c.getRightChar()!==null)for(var h=c.getRightChar().getValue(),f=11;f>=0;--f)(h&1<<f)!==0&&a.set(i),i++}return a},r})(),yt=(function(){function r(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return r.prototype.getDecodedInformation=function(){return this.decodedInformation},r.prototype.isFinished=function(){return this.finished},r})(),Gn=(function(){function r(e){this.newPosition=e}return r.prototype.getNewPosition=function(){return this.newPosition},r})(),gu=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Je=(function(r){gu(e,r);function e(t,n){var a=r.call(this,t)||this;return a.value=n,a}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e})(Gn),mu=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),bt=(function(r){mu(e,r);function e(t,n,a){var i=r.call(this,t)||this;return a?(i.remaining=!0,i.remainingValue=i.remainingValue):(i.remaining=!1,i.remainingValue=0),i.newString=n,i}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e})(Gn),yu=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Et=(function(r){yu(e,r);function e(t,n,a){var i=r.call(this,t)||this;if(n<0||n>10||a<0||a>10)throw new D;return i.firstDigit=n,i.secondDigit=a,i}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e})(Gn),sr=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bu=(function(){function r(){}return r.parseFieldsInGeneralPurpose=function(e){var t,n,a,i,o,s,l,c;if(!e)return null;if(e.length<2)throw new O;var u=e.substring(0,2);try{for(var f=sr(r.TWO_DIGIT_DATA_LENGTH),h=f.next();!h.done;h=f.next()){var p=h.value;if(p[0]===u)return p[1]===r.VARIABLE_LENGTH?r.processVariableAI(2,p[2],e):r.processFixedAI(2,p[1],e)}}catch(E){t={error:E}}finally{try{h&&!h.done&&(n=f.return)&&n.call(f)}finally{if(t)throw t.error}}if(e.length<3)throw new O;var x=e.substring(0,3);try{for(var v=sr(r.THREE_DIGIT_DATA_LENGTH),m=v.next();!m.done;m=v.next()){var p=m.value;if(p[0]===x)return p[1]===r.VARIABLE_LENGTH?r.processVariableAI(3,p[2],e):r.processFixedAI(3,p[1],e)}}catch(E){a={error:E}}finally{try{m&&!m.done&&(i=v.return)&&i.call(v)}finally{if(a)throw a.error}}try{for(var y=sr(r.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),g=y.next();!g.done;g=y.next()){var p=g.value;if(p[0]===x)return p[1]===r.VARIABLE_LENGTH?r.processVariableAI(4,p[2],e):r.processFixedAI(4,p[1],e)}}catch(E){o={error:E}}finally{try{g&&!g.done&&(s=y.return)&&s.call(y)}finally{if(o)throw o.error}}if(e.length<4)throw new O;var _=e.substring(0,4);try{for(var C=sr(r.FOUR_DIGIT_DATA_LENGTH),A=C.next();!A.done;A=C.next()){var p=A.value;if(p[0]===_)return p[1]===r.VARIABLE_LENGTH?r.processVariableAI(4,p[2],e):r.processFixedAI(4,p[1],e)}}catch(E){l={error:E}}finally{try{A&&!A.done&&(c=C.return)&&c.call(C)}finally{if(l)throw l.error}}throw new O},r.processFixedAI=function(e,t,n){if(n.length<e)throw new O;var a=n.substring(0,e);if(n.length<e+t)throw new O;var i=n.substring(e,e+t),o=n.substring(e+t),s="("+a+")"+i,l=r.parseFieldsInGeneralPurpose(o);return l==null?s:s+l},r.processVariableAI=function(e,t,n){var a=n.substring(0,e),i;n.length<e+t?i=n.length:i=e+t;var o=n.substring(e,i),s=n.substring(i),l="("+a+")"+o,c=r.parseFieldsInGeneralPurpose(s);return c==null?l:l+c},r.VARIABLE_LENGTH=[],r.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",r.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",r.VARIABLE_LENGTH,20],["22",r.VARIABLE_LENGTH,29],["30",r.VARIABLE_LENGTH,8],["37",r.VARIABLE_LENGTH,8],["90",r.VARIABLE_LENGTH,30],["91",r.VARIABLE_LENGTH,30],["92",r.VARIABLE_LENGTH,30],["93",r.VARIABLE_LENGTH,30],["94",r.VARIABLE_LENGTH,30],["95",r.VARIABLE_LENGTH,30],["96",r.VARIABLE_LENGTH,30],["97",r.VARIABLE_LENGTH,3],["98",r.VARIABLE_LENGTH,30],["99",r.VARIABLE_LENGTH,30]],r.THREE_DIGIT_DATA_LENGTH=[["240",r.VARIABLE_LENGTH,30],["241",r.VARIABLE_LENGTH,30],["242",r.VARIABLE_LENGTH,6],["250",r.VARIABLE_LENGTH,30],["251",r.VARIABLE_LENGTH,30],["253",r.VARIABLE_LENGTH,17],["254",r.VARIABLE_LENGTH,20],["400",r.VARIABLE_LENGTH,30],["401",r.VARIABLE_LENGTH,30],["402",17],["403",r.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",r.VARIABLE_LENGTH,20],["421",r.VARIABLE_LENGTH,15],["422",3],["423",r.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],r.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",r.VARIABLE_LENGTH,15],["391",r.VARIABLE_LENGTH,18],["392",r.VARIABLE_LENGTH,15],["393",r.VARIABLE_LENGTH,18],["703",r.VARIABLE_LENGTH,30]],r.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",r.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",r.VARIABLE_LENGTH,20],["8003",r.VARIABLE_LENGTH,30],["8004",r.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",r.VARIABLE_LENGTH,30],["8008",r.VARIABLE_LENGTH,12],["8018",18],["8020",r.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",r.VARIABLE_LENGTH,70],["8200",r.VARIABLE_LENGTH,70]],r})(),xr=(function(){function r(e){this.buffer=new $,this.information=e}return r.prototype.decodeAllCodes=function(e,t){var n=t,a=null;do{var i=this.decodeGeneralPurposeField(n,a),o=bu.parseFieldsInGeneralPurpose(i.getNewString());if(o!=null&&e.append(o),i.isRemaining()?a=""+i.getRemainingValue():a=null,n===i.getNewPosition())break;n=i.getNewPosition()}while(!0);return e.toString()},r.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},r.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new Et(this.information.getSize(),Et.FNC1,Et.FNC1):new Et(this.information.getSize(),t-1,Et.FNC1)}var n=this.extractNumericValueFromBitArray(e,7),a=(n-8)/11,i=(n-8)%11;return new Et(e+7,a,i)},r.prototype.extractNumericValueFromBitArray=function(e,t){return r.extractNumericValueFromBitArray(this.information,e,t)},r.extractNumericValueFromBitArray=function(e,t,n){for(var a=0,i=0;i<n;++i)e.get(t+i)&&(a|=1<<n-i-1);return a},r.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var n=this.parseBlocks();return n!=null&&n.isRemaining()?new bt(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new bt(this.current.getPosition(),this.buffer.toString())},r.prototype.parseBlocks=function(){var e,t;do{var n=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var a=n!==this.current.getPosition();if(!a&&!e)break}while(!e);return t.getDecodedInformation()},r.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new bt(this.current.getPosition(),this.buffer.toString()):t=new bt(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new yt(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new bt(this.current.getPosition(),this.buffer.toString());return new yt(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new yt(!1)},r.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new bt(this.current.getPosition(),this.buffer.toString());return new yt(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new yt(!1)},r.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new bt(this.current.getPosition(),this.buffer.toString());return new yt(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new yt(!1)},r.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var a=this.extractNumericValueFromBitArray(e,8);return a>=232&&a<253},r.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Je(e+5,Je.FNC1);if(t>=5&&t<15)return new Je(e+5,"0"+(t-5));var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new Je(e+7,""+(n+1));if(n>=90&&n<116)return new Je(e+7,""+(n+7));var a=this.extractNumericValueFromBitArray(e,8),i;switch(a){case 232:i="!";break;case 233:i='"';break;case 234:i="%";break;case 235:i="&";break;case 236:i="'";break;case 237:i="(";break;case 238:i=")";break;case 239:i="*";break;case 240:i="+";break;case 241:i=",";break;case 242:i="-";break;case 243:i=".";break;case 244:i="/";break;case 245:i=":";break;case 246:i=";";break;case 247:i="<";break;case 248:i="=";break;case 249:i=">";break;case 250:i="?";break;case 251:i="_";break;case 252:i=" ";break;default:throw new D}return new Je(e+8,i)},r.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},r.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Je(e+5,Je.FNC1);if(t>=5&&t<15)return new Je(e+5,"0"+(t-5));var n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new Je(e+6,""+(n+33));var a;switch(n){case 58:a="*";break;case 59:a=",";break;case 60:a="-";break;case 61:a=".";break;case 62:a="/";break;default:throw new nr("Decoding invalid alphanumeric value: "+n)}return new Je(e+6,a)},r.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},r.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},r.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},r})(),xo=(function(){function r(e){this.information=e,this.generalDecoder=new xr(e)}return r.prototype.getInformation=function(){return this.information},r.prototype.getGeneralDecoder=function(){return this.generalDecoder},r})(),wu=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),et=(function(r){wu(e,r);function e(t){return r.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,n){t.append("(01)");var a=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,n,a)},e.prototype.encodeCompressedGtinWithoutAI=function(t,n,a){for(var i=0;i<4;++i){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*i,10);o/100===0&&t.append("0"),o/10===0&&t.append("0"),t.append(o)}e.appendCheckDigit(t,a)},e.appendCheckDigit=function(t,n){for(var a=0,i=0;i<13;i++){var o=t.charAt(i+n).charCodeAt(0)-48;a+=(i&1)===0?3*o:o}a=10-a%10,a===10&&(a=0),t.append(a)},e.GTIN_SIZE=40,e})(xo),_u=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Au=(function(r){_u(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new $;t.append("(01)");var n=t.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(a),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e})(et),Cu=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Eu=(function(r){Cu(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new $;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e})(xo),Su=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),vr=(function(r){Su(e,r);function e(t){return r.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,n,a){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,a);this.addWeightCode(t,i);for(var o=this.checkWeight(i),s=1e5,l=0;l<5;++l)o/s===0&&t.append("0"),s/=10;t.append(o)},e})(et),Nu=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),vo=(function(r){Nu(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+vr.GTIN_SIZE+e.WEIGHT_SIZE)throw new O;var t=new $;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+vr.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e})(vr),Iu=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Ou=(function(r){Iu(e,r);function e(t){return r.call(this,t)||this}return e.prototype.addWeightCode=function(t,n){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e})(vo),ku=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Tu=(function(r){ku(e,r);function e(t){return r.call(this,t)||this}return e.prototype.addWeightCode=function(t,n){n<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e})(vo),Ru=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Du=(function(r){Ru(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+et.GTIN_SIZE)throw new O;var t=new $;this.encodeCompressedGtin(t,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+et.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(n),t.append(")");var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+et.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(a.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e})(et),Pu=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Mu=(function(r){Pu(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+et.GTIN_SIZE)throw new O;var t=new $;this.encodeCompressedGtin(t,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+et.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(n),t.append(")");var a=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+et.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);a/100===0&&t.append("0"),a/10===0&&t.append("0"),t.append(a);var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+et.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e})(et),ju=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),ht=(function(r){ju(e,r);function e(t,n,a){var i=r.call(this,t)||this;return i.dateCode=a,i.firstAIdigits=n,i}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new O;var t=new $;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,n){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(n,e.DATE_SIZE);if(a!==38400){t.append("("),t.append(this.dateCode),t.append(")");var i=a%32;a/=32;var o=a%12+1;a/=12;var s=a;s/10===0&&t.append("0"),t.append(s),o/10===0&&t.append("0"),t.append(o),i/10===0&&t.append("0"),t.append(i)}},e.prototype.addWeightCode=function(t,n){t.append("("),t.append(this.firstAIdigits),t.append(n/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e})(vr);function Bu(r){try{if(r.get(1))return new Au(r);if(!r.get(2))return new Eu(r);var e=xr.extractNumericValueFromBitArray(r,1,4);switch(e){case 4:return new Ou(r);case 5:return new Tu(r)}var t=xr.extractNumericValueFromBitArray(r,1,5);switch(t){case 12:return new Du(r);case 13:return new Mu(r)}var n=xr.extractNumericValueFromBitArray(r,1,7);switch(n){case 56:return new ht(r,"310","11");case 57:return new ht(r,"320","11");case 58:return new ht(r,"310","13");case 59:return new ht(r,"320","13");case 60:return new ht(r,"310","15");case 61:return new ht(r,"320","15");case 62:return new ht(r,"310","17");case 63:return new ht(r,"320","17")}}catch(a){throw console.log(a),new nr("unknown decoder: "+r)}}var Pa=(function(){function r(e,t,n,a){this.leftchar=e,this.rightchar=t,this.finderpattern=n,this.maybeLast=a}return r.prototype.mayBeLast=function(){return this.maybeLast},r.prototype.getLeftChar=function(){return this.leftchar},r.prototype.getRightChar=function(){return this.rightchar},r.prototype.getFinderPattern=function(){return this.finderpattern},r.prototype.mustBeLast=function(){return this.rightchar==null},r.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},r.equals=function(e,t){return e instanceof r?r.equalsOrNull(e.leftchar,t.leftchar)&&r.equalsOrNull(e.rightchar,t.rightchar)&&r.equalsOrNull(e.finderpattern,t.finderpattern):!1},r.equalsOrNull=function(e,t){return e===null?t===null:r.equals(e,t)},r.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},r})(),Lu=(function(){function r(e,t,n){this.pairs=e,this.rowNumber=t,this.wasReversed=n}return r.prototype.getPairs=function(){return this.pairs},r.prototype.getRowNumber=function(){return this.rowNumber},r.prototype.isReversed=function(){return this.wasReversed},r.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},r.prototype.toString=function(){return"{ "+this.pairs+" }"},r.prototype.equals=function(e,t){return e instanceof r?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},r.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var n;return e.forEach(function(a,i){t.forEach(function(o){a.getLeftChar().getValue()===o.getLeftChar().getValue()&&a.getRightChar().getValue()===o.getRightChar().getValue()&&a.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(n=!0)})}),n}},r})(),Fu=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),pt=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Uu=(function(r){Fu(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,n,a){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,n))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,n))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,n){for(var a=!1;!a;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,t))}catch(s){if(s instanceof O){if(!this.pairs.length)throw new O;a=!0}}if(this.checkChecksum())return this.pairs;var i;if(this.rows.length?i=!0:i=!1,this.storeRow(t,!1),i){var o=this.checkRowsBoolean(!1);if(o!=null||(o=this.checkRowsBoolean(!0),o!=null))return o}throw new O},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var n=null;try{n=this.checkRows(new Array,0)}catch(a){console.log(a)}return t&&(this.rows=this.rows.reverse()),n},e.prototype.checkRows=function(t,n){for(var a,i,o=n;o<this.rows.length;o++){var s=this.rows[o];this.pairs.length=0;try{for(var l=(a=void 0,pt(t)),c=l.next();!c.done;c=l.next()){var u=c.value;this.pairs.push(u.getPairs())}}catch(h){a={error:h}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(a)throw a.error}}if(this.pairs.push(s.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var f=new Array(t);f.push(s);try{return this.checkRows(f,o+1)}catch(h){console.log(h)}}}throw new O},e.isValidSequence=function(t){var n,a;try{for(var i=pt(e.FINDER_PATTERN_SEQUENCES),o=i.next();!o.done;o=i.next()){var s=o.value;if(!(t.length>s.length)){for(var l=!0,c=0;c<t.length;c++)if(t[c].getFinderPattern().getValue()!==s[c]){l=!1;break}if(l)return!0}}}catch(u){n={error:u}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}return!1},e.prototype.storeRow=function(t,n){for(var a=0,i=!1,o=!1;a<this.rows.length;){var s=this.rows[a];if(s.getRowNumber()>t){o=s.isEquivalent(this.pairs);break}i=s.isEquivalent(this.pairs),a++}o||i||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new Lu(this.pairs,t,n)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,n){var a,i,o,s,l,c;try{for(var u=pt(n),f=u.next();!f.done;f=u.next()){var h=f.value;if(h.getPairs().length!==t.length){var p=!0;try{for(var x=(o=void 0,pt(h.getPairs())),v=x.next();!v.done;v=x.next()){var m=v.value,y=!1;try{for(var g=(l=void 0,pt(t)),_=g.next();!_.done;_=g.next()){var C=_.value;if(Pa.equals(m,C)){y=!0;break}}}catch(A){l={error:A}}finally{try{_&&!_.done&&(c=g.return)&&c.call(g)}finally{if(l)throw l.error}}y||(p=!1)}}catch(A){o={error:A}}finally{try{v&&!v.done&&(s=x.return)&&s.call(x)}finally{if(o)throw o.error}}}}}catch(A){a={error:A}}finally{try{f&&!f.done&&(i=u.return)&&i.call(u)}finally{if(a)throw a.error}}},e.isPartialRow=function(t,n){var a,i,o,s,l,c;try{for(var u=pt(n),f=u.next();!f.done;f=u.next()){var h=f.value,p=!0;try{for(var x=(o=void 0,pt(t)),v=x.next();!v.done;v=x.next()){var m=v.value,y=!1;try{for(var g=(l=void 0,pt(h.getPairs())),_=g.next();!_.done;_=g.next()){var C=_.value;if(m.equals(C)){y=!0;break}}}catch(A){l={error:A}}finally{try{_&&!_.done&&(c=g.return)&&c.call(g)}finally{if(l)throw l.error}}if(!y){p=!1;break}}}catch(A){o={error:A}}finally{try{v&&!v.done&&(s=x.return)&&s.call(x)}finally{if(o)throw o.error}}if(p)return!0}}catch(A){a={error:A}}finally{try{f&&!f.done&&(i=u.return)&&i.call(u)}finally{if(a)throw a.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var n=vu.buildBitArray(t),a=Bu(n),i=a.parseInformation(),o=t[0].getFinderPattern().getResultPoints(),s=t[t.length-1].getFinderPattern().getResultPoints(),l=[o[0],o[1],s[0],s[1]];return new je(i,null,null,l,B.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),n=t.getLeftChar(),a=t.getRightChar();if(a===null)return!1;for(var i=a.getChecksumPortion(),o=2,s=1;s<this.pairs.size();++s){var l=this.pairs.get(s);i+=l.getLeftChar().getChecksumPortion(),o++;var c=l.getRightChar();c!=null&&(i+=c.getChecksumPortion(),o++)}i%=211;var u=211*(o-4)+i;return u===n.getValue()},e.getNextSecondBar=function(t,n){var a;return t.get(n)?(a=t.getNextUnset(n),a=t.getNextSet(a)):(a=t.getNextSet(n),a=t.getNextUnset(a)),a},e.prototype.retrieveNextPair=function(t,n,a){var i=n.length%2===0;this.startFromEven&&(i=!i);var o,s=!0,l=-1;do this.findNextPair(t,n,l),o=this.parseFoundFinderPattern(t,a,i),o===null?l=e.getNextSecondBar(t,this.startEnd[0]):s=!1;while(s);var c=this.decodeDataCharacter(t,o,i,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new O;var u;try{u=this.decodeDataCharacter(t,o,i,!1)}catch(f){u=null,console.log(f)}return new Pa(c,u,o,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,n,a){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;var o=t.getSize(),s;if(a>=0)s=a;else if(this.isEmptyPair(n))s=0;else{var l=n[n.length-1];s=l.getFinderPattern().getStartEnd()[1]}var c=n.length%2!==0;this.startFromEven&&(c=!c);for(var u=!1;s<o&&(u=!t.get(s),!!u);)s++;for(var f=0,h=s,p=s;p<o;p++)if(t.get(p)!==u)i[f]++;else{if(f===3){if(c&&e.reverseCounters(i),e.isFinderPattern(i)){this.startEnd[0]=h,this.startEnd[1]=p;return}c&&e.reverseCounters(i),h+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,f--}else f++;i[f]=1,u=!u}throw new O},e.reverseCounters=function(t){for(var n=t.length,a=0;a<n/2;++a){var i=t[a];t[a]=t[n-a-1],t[n-a-1]=i}},e.prototype.parseFoundFinderPattern=function(t,n,a){var i,o,s;if(a){for(var l=this.startEnd[0]-1;l>=0&&!t.get(l);)l--;l++,i=this.startEnd[0]-l,o=l,s=this.startEnd[1]}else o=this.startEnd[0],s=t.getNextUnset(this.startEnd[1]+1),i=s-this.startEnd[1];var c=this.getDecodeFinderCounters();de.arraycopy(c,0,c,1,c.length-1),c[0]=i;var u;try{u=this.parseFinderValue(c,e.FINDER_PATTERNS)}catch{return null}return new po(u,[o,s],o,s,n)},e.prototype.decodeDataCharacter=function(t,n,a,i){for(var o=this.getDataCharacterCounters(),s=0;s<o.length;s++)o[s]=0;if(i)e.recordPatternInReverse(t,n.getStartEnd()[0],o);else{e.recordPattern(t,n.getStartEnd()[1],o);for(var l=0,c=o.length-1;l<c;l++,c--){var u=o[l];o[l]=o[c],o[c]=u}}var f=17,h=Q.sum(new Int32Array(o))/f,p=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(h-p)/p>.3)throw new O;for(var x=this.getOddCounts(),v=this.getEvenCounts(),m=this.getOddRoundingErrors(),y=this.getEvenRoundingErrors(),l=0;l<o.length;l++){var g=1*o[l]/h,_=g+.5;if(_<1){if(g<.3)throw new O;_=1}else if(_>8){if(g>8.7)throw new O;_=8}var C=l/2;(l&1)===0?(x[C]=_,m[C]=g-_):(v[C]=_,y[C]=g-_)}this.adjustOddEvenCounts(f);for(var A=4*n.getValue()+(a?0:2)+(i?0:1)-1,E=0,N=0,l=x.length-1;l>=0;l--){if(e.isNotA1left(n,a,i)){var I=e.WEIGHTS[A][2*l];N+=x[l]*I}E+=x[l]}for(var k=0,l=v.length-1;l>=0;l--)if(e.isNotA1left(n,a,i)){var I=e.WEIGHTS[A][2*l+1];k+=v[l]*I}var R=N+k;if((E&1)!==0||E>13||E<4)throw new O;var M=(13-E)/2,j=e.SYMBOL_WIDEST[M],G=9-j,F=St.getRSSvalue(x,j,!0),V=St.getRSSvalue(v,G,!1),Y=e.EVEN_TOTAL_SUBSET[M],ee=e.GSUM[M],fe=F*Y+V+ee;return new br(fe,R)},e.isNotA1left=function(t,n,a){return!(t.getValue()===0&&n&&a)},e.prototype.adjustOddEvenCounts=function(t){var n=Q.sum(new Int32Array(this.getOddCounts())),a=Q.sum(new Int32Array(this.getEvenCounts())),i=!1,o=!1;n>13?o=!0:n<4&&(i=!0);var s=!1,l=!1;a>13?l=!0:a<4&&(s=!0);var c=n+a-t,u=(n&1)===1,f=(a&1)===0;if(c===1)if(u){if(f)throw new O;o=!0}else{if(!f)throw new O;l=!0}else if(c===-1)if(u){if(f)throw new O;i=!0}else{if(!f)throw new O;s=!0}else if(c===0){if(u){if(!f)throw new O;n<a?(i=!0,l=!0):(o=!0,s=!0)}else if(f)throw new O}else throw new O;if(i){if(o)throw new O;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(l)throw new O;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}l&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e})(wt),Vu=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Gu=(function(r){Vu(e,r);function e(t,n,a){var i=r.call(this,t,n)||this;return i.count=0,i.finderPattern=a,i}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e})(br),$u=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Yr=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ma=(function(r){$u(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,n,a){var i,o,s,l,c=this.decodePair(n,!1,t,a);e.addOrTally(this.possibleLeftPairs,c),n.reverse();var u=this.decodePair(n,!0,t,a);e.addOrTally(this.possibleRightPairs,u),n.reverse();try{for(var f=Yr(this.possibleLeftPairs),h=f.next();!h.done;h=f.next()){var p=h.value;if(p.getCount()>1)try{for(var x=(s=void 0,Yr(this.possibleRightPairs)),v=x.next();!v.done;v=x.next()){var m=v.value;if(m.getCount()>1&&e.checkChecksum(p,m))return e.constructResult(p,m)}}catch(y){s={error:y}}finally{try{v&&!v.done&&(l=x.return)&&l.call(x)}finally{if(s)throw s.error}}}}catch(y){i={error:y}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}throw new O},e.addOrTally=function(t,n){var a,i;if(n!=null){var o=!1;try{for(var s=Yr(t),l=s.next();!l.done;l=s.next()){var c=l.value;if(c.getValue()===n.getValue()){c.incrementCount(),o=!0;break}}}catch(u){a={error:u}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(a)throw a.error}}o||t.push(n)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,n){for(var a=4537077*t.getValue()+n.getValue(),i=new String(a).toString(),o=new $,s=13-i.length;s>0;s--)o.append("0");o.append(i);for(var l=0,s=0;s<13;s++){var c=o.charAt(s).charCodeAt(0)-48;l+=(s&1)===0?3*c:c}l=10-l%10,l===10&&(l=0),o.append(l.toString());var u=t.getFinderPattern().getResultPoints(),f=n.getFinderPattern().getResultPoints();return new je(o.toString(),null,0,[u[0],u[1],f[0],f[1]],B.RSS_14,new Date().getTime())},e.checkChecksum=function(t,n){var a=(t.getChecksumPortion()+16*n.getChecksumPortion())%79,i=9*t.getFinderPattern().getValue()+n.getFinderPattern().getValue();return i>72&&i--,i>8&&i--,a===i},e.prototype.decodePair=function(t,n,a,i){try{var o=this.findFinderPattern(t,n),s=this.parseFoundFinderPattern(t,a,n,o),l=i==null?null:i.get(le.NEED_RESULT_POINT_CALLBACK);if(l!=null){var c=(o[0]+o[1])/2;n&&(c=t.getSize()-1-c),l.foundPossibleResultPoint(new L(c,a))}var u=this.decodeDataCharacter(t,s,!0),f=this.decodeDataCharacter(t,s,!1);return new Gu(1597*u.getValue()+f.getValue(),u.getChecksumPortion()+4*f.getChecksumPortion(),s)}catch{return null}},e.prototype.decodeDataCharacter=function(t,n,a){for(var i=this.getDataCharacterCounters(),o=0;o<i.length;o++)i[o]=0;if(a)Ne.recordPatternInReverse(t,n.getStartEnd()[0],i);else{Ne.recordPattern(t,n.getStartEnd()[1]+1,i);for(var s=0,l=i.length-1;s<l;s++,l--){var c=i[s];i[s]=i[l],i[l]=c}}for(var u=a?16:15,f=Q.sum(new Int32Array(i))/u,h=this.getOddCounts(),p=this.getEvenCounts(),x=this.getOddRoundingErrors(),v=this.getEvenRoundingErrors(),s=0;s<i.length;s++){var m=i[s]/f,y=Math.floor(m+.5);y<1?y=1:y>8&&(y=8);var g=Math.floor(s/2);(s&1)===0?(h[g]=y,x[g]=m-y):(p[g]=y,v[g]=m-y)}this.adjustOddEvenCounts(a,u);for(var _=0,C=0,s=h.length-1;s>=0;s--)C*=9,C+=h[s],_+=h[s];for(var A=0,E=0,s=p.length-1;s>=0;s--)A*=9,A+=p[s],E+=p[s];var N=C+3*A;if(a){if((_&1)!==0||_>12||_<4)throw new O;var I=(12-_)/2,k=e.OUTSIDE_ODD_WIDEST[I],R=9-k,M=St.getRSSvalue(h,k,!1),j=St.getRSSvalue(p,R,!0),G=e.OUTSIDE_EVEN_TOTAL_SUBSET[I],F=e.OUTSIDE_GSUM[I];return new br(M*G+j+F,N)}else{if((E&1)!==0||E>10||E<4)throw new O;var I=(10-E)/2,k=e.INSIDE_ODD_WIDEST[I],R=9-k,M=St.getRSSvalue(h,k,!0),j=St.getRSSvalue(p,R,!1),V=e.INSIDE_ODD_TOTAL_SUBSET[I],F=e.INSIDE_GSUM[I];return new br(j*V+M+F,N)}},e.prototype.findFinderPattern=function(t,n){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var i=t.getSize(),o=!1,s=0;s<i&&(o=!t.get(s),n!==o);)s++;for(var l=0,c=s,u=s;u<i;u++)if(t.get(u)!==o)a[l]++;else{if(l===3){if(wt.isFinderPattern(a))return[c,u];c+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,l--}else l++;a[l]=1,o=!o}throw new O},e.prototype.parseFoundFinderPattern=function(t,n,a,i){for(var o=t.get(i[0]),s=i[0]-1;s>=0&&o!==t.get(s);)s--;s++;var l=i[0]-s,c=this.getDecodeFinderCounters(),u=new Int32Array(c.length);de.arraycopy(c,0,u,1,c.length-1),u[0]=l;var f=this.parseFinderValue(u,e.FINDER_PATTERNS),h=s,p=i[1];return a&&(h=t.getSize()-1-h,p=t.getSize()-1-p),new po(f,[s,i[1]],h,p,n)},e.prototype.adjustOddEvenCounts=function(t,n){var a=Q.sum(new Int32Array(this.getOddCounts())),i=Q.sum(new Int32Array(this.getEvenCounts())),o=!1,s=!1,l=!1,c=!1;t?(a>12?s=!0:a<4&&(o=!0),i>12?c=!0:i<4&&(l=!0)):(a>11?s=!0:a<5&&(o=!0),i>10?c=!0:i<4&&(l=!0));var u=a+i-n,f=(a&1)===(t?1:0),h=(i&1)===1;if(u===1)if(f){if(h)throw new O;s=!0}else{if(!h)throw new O;c=!0}else if(u===-1)if(f){if(h)throw new O;o=!0}else{if(!h)throw new O;l=!0}else if(u===0){if(f){if(!h)throw new O;a<i?(o=!0,c=!0):(s=!0,l=!0)}else if(h)throw new O}else throw new O;if(o){if(s)throw new O;wt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&wt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(c)throw new O;wt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&wt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e})(wt),Hu=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Nt=(function(r){Hu(e,r);function e(t){var n=r.call(this)||this;n.readers=[];var a=t?t.get(le.POSSIBLE_FORMATS):null,i=t&&t.get(le.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,o=t&&t.get(le.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return a&&((a.includes(B.EAN_13)||a.includes(B.UPC_A)||a.includes(B.EAN_8)||a.includes(B.UPC_E))&&n.readers.push(new Xr(t)),a.includes(B.CODE_39)&&n.readers.push(new Ea(i,o)),a.includes(B.CODE_93)&&n.readers.push(new Sa),a.includes(B.CODE_128)&&n.readers.push(new Ca),a.includes(B.ITF)&&n.readers.push(new Na),a.includes(B.CODABAR)&&n.readers.push(new fu),a.includes(B.RSS_14)&&n.readers.push(new Ma),a.includes(B.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new Uu))),n.readers.length===0&&(n.readers.push(new Xr(t)),n.readers.push(new Ea),n.readers.push(new Sa),n.readers.push(new Xr(t)),n.readers.push(new Ca),n.readers.push(new Na),n.readers.push(new Ma)),n}return e.prototype.decodeRow=function(t,n,a){for(var i=0;i<this.readers.length;i++)try{return this.readers[i].decodeRow(t,n,a)}catch{}throw new O},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e})(Ne),zu=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){zu(e,r);function e(t,n){return t===void 0&&(t=500),r.call(this,new Nt(n),t,n)||this}return e})(jt);var ja=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ne=(function(){function r(e,t,n){this.ecCodewords=e,this.ecBlocks=[t],n&&this.ecBlocks.push(n)}return r.prototype.getECCodewords=function(){return this.ecCodewords},r.prototype.getECBlocks=function(){return this.ecBlocks},r})(),te=(function(){function r(e,t){this.count=e,this.dataCodewords=t}return r.prototype.getCount=function(){return this.count},r.prototype.getDataCodewords=function(){return this.dataCodewords},r})(),Wu=(function(){function r(e,t,n,a,i,o){var s,l;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=n,this.dataRegionSizeRows=a,this.dataRegionSizeColumns=i,this.ecBlocks=o;var c=0,u=o.getECCodewords(),f=o.getECBlocks();try{for(var h=ja(f),p=h.next();!p.done;p=h.next()){var x=p.value;c+=x.getCount()*(x.getDataCodewords()+u)}}catch(v){s={error:v}}finally{try{p&&!p.done&&(l=h.return)&&l.call(h)}finally{if(s)throw s.error}}this.totalCodewords=c}return r.prototype.getVersionNumber=function(){return this.versionNumber},r.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},r.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},r.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},r.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},r.prototype.getTotalCodewords=function(){return this.totalCodewords},r.prototype.getECBlocks=function(){return this.ecBlocks},r.getVersionForDimensions=function(e,t){var n,a;if((e&1)!==0||(t&1)!==0)throw new D;try{for(var i=ja(r.VERSIONS),o=i.next();!o.done;o=i.next()){var s=o.value;if(s.symbolSizeRows===e&&s.symbolSizeColumns===t)return s}}catch(l){n={error:l}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}throw new D},r.prototype.toString=function(){return""+this.versionNumber},r.buildVersions=function(){return[new r(1,10,10,8,8,new ne(5,new te(1,3))),new r(2,12,12,10,10,new ne(7,new te(1,5))),new r(3,14,14,12,12,new ne(10,new te(1,8))),new r(4,16,16,14,14,new ne(12,new te(1,12))),new r(5,18,18,16,16,new ne(14,new te(1,18))),new r(6,20,20,18,18,new ne(18,new te(1,22))),new r(7,22,22,20,20,new ne(20,new te(1,30))),new r(8,24,24,22,22,new ne(24,new te(1,36))),new r(9,26,26,24,24,new ne(28,new te(1,44))),new r(10,32,32,14,14,new ne(36,new te(1,62))),new r(11,36,36,16,16,new ne(42,new te(1,86))),new r(12,40,40,18,18,new ne(48,new te(1,114))),new r(13,44,44,20,20,new ne(56,new te(1,144))),new r(14,48,48,22,22,new ne(68,new te(1,174))),new r(15,52,52,24,24,new ne(42,new te(2,102))),new r(16,64,64,14,14,new ne(56,new te(2,140))),new r(17,72,72,16,16,new ne(36,new te(4,92))),new r(18,80,80,18,18,new ne(48,new te(4,114))),new r(19,88,88,20,20,new ne(56,new te(4,144))),new r(20,96,96,22,22,new ne(68,new te(4,174))),new r(21,104,104,24,24,new ne(56,new te(6,136))),new r(22,120,120,18,18,new ne(68,new te(6,175))),new r(23,132,132,20,20,new ne(62,new te(8,163))),new r(24,144,144,22,22,new ne(62,new te(8,156),new te(2,155))),new r(25,8,18,6,16,new ne(7,new te(1,5))),new r(26,8,32,6,14,new ne(11,new te(1,10))),new r(27,12,26,10,24,new ne(14,new te(1,16))),new r(28,12,36,10,16,new ne(18,new te(1,22))),new r(29,16,36,14,16,new ne(24,new te(1,32))),new r(30,16,48,14,22,new ne(28,new te(1,49)))]},r.VERSIONS=r.buildVersions(),r})(),Xu=(function(){function r(e){var t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new D;this.version=r.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new st(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return r.prototype.getVersion=function(){return this.version},r.readVersion=function(e){var t=e.getHeight(),n=e.getWidth();return Wu.getVersionForDimensions(t,n)},r.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,n=4,a=0,i=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth(),s=!1,l=!1,c=!1,u=!1;do if(n===i&&a===0&&!s)e[t++]=this.readCorner1(i,o)&255,n-=2,a+=2,s=!0;else if(n===i-2&&a===0&&(o&3)!==0&&!l)e[t++]=this.readCorner2(i,o)&255,n-=2,a+=2,l=!0;else if(n===i+4&&a===2&&(o&7)===0&&!c)e[t++]=this.readCorner3(i,o)&255,n-=2,a+=2,c=!0;else if(n===i-2&&a===0&&(o&7)===4&&!u)e[t++]=this.readCorner4(i,o)&255,n-=2,a+=2,u=!0;else{do n<i&&a>=0&&!this.readMappingMatrix.get(a,n)&&(e[t++]=this.readUtah(n,a,i,o)&255),n-=2,a+=2;while(n>=0&&a<o);n+=1,a+=3;do n>=0&&a<o&&!this.readMappingMatrix.get(a,n)&&(e[t++]=this.readUtah(n,a,i,o)&255),n+=2,a-=2;while(n<i&&a>=0);n+=3,a+=1}while(n<i||a<o);if(t!==this.version.getTotalCodewords())throw new D;return e},r.prototype.readModule=function(e,t,n,a){return e<0&&(e+=n,t+=4-(n+4&7)),t<0&&(t+=a,e+=4-(a+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},r.prototype.readUtah=function(e,t,n,a){var i=0;return this.readModule(e-2,t-2,n,a)&&(i|=1),i<<=1,this.readModule(e-2,t-1,n,a)&&(i|=1),i<<=1,this.readModule(e-1,t-2,n,a)&&(i|=1),i<<=1,this.readModule(e-1,t-1,n,a)&&(i|=1),i<<=1,this.readModule(e-1,t,n,a)&&(i|=1),i<<=1,this.readModule(e,t-2,n,a)&&(i|=1),i<<=1,this.readModule(e,t-1,n,a)&&(i|=1),i<<=1,this.readModule(e,t,n,a)&&(i|=1),i},r.prototype.readCorner1=function(e,t){var n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,1,e,t)&&(n|=1),n<<=1,this.readModule(e-1,2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n},r.prototype.readCorner2=function(e,t){var n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-4,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n},r.prototype.readCorner3=function(e,t){var n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-3,e,t)&&(n|=1),n<<=1,this.readModule(1,t-2,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n},r.prototype.readCorner4=function(e,t){var n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n},r.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new U("Dimension of bitMatrix must match the version size");for(var a=this.version.getDataRegionSizeRows(),i=this.version.getDataRegionSizeColumns(),o=t/a|0,s=n/i|0,l=o*a,c=s*i,u=new st(c,l),f=0;f<o;++f)for(var h=f*a,p=0;p<s;++p)for(var x=p*i,v=0;v<a;++v)for(var m=f*(a+2)+1+v,y=h+v,g=0;g<i;++g){var _=p*(i+2)+1+g;if(e.get(_,m)){var C=x+g;u.set(C,y)}}return u},r})(),Ba=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Yu=(function(){function r(e,t){this.numDataCodewords=e,this.codewords=t}return r.getDataBlocks=function(e,t){var n,a,i,o,s=t.getECBlocks(),l=0,c=s.getECBlocks();try{for(var u=Ba(c),f=u.next();!f.done;f=u.next()){var h=f.value;l+=h.getCount()}}catch(F){n={error:F}}finally{try{f&&!f.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}var p=new Array(l),x=0;try{for(var v=Ba(c),m=v.next();!m.done;m=v.next())for(var h=m.value,y=0;y<h.getCount();y++){var g=h.getDataCodewords(),_=s.getECCodewords()+g;p[x++]=new r(g,new Uint8Array(_))}}catch(F){i={error:F}}finally{try{m&&!m.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}for(var C=p[0].codewords.length,A=C-s.getECCodewords(),E=A-1,N=0,y=0;y<E;y++)for(var I=0;I<x;I++)p[I].codewords[y]=e[N++];for(var k=t.getVersionNumber()===24,R=k?8:x,I=0;I<R;I++)p[I].codewords[A-1]=e[N++];for(var M=p[0].codewords.length,y=A;y<M;y++)for(var I=0;I<x;I++){var j=k?(I+8)%x:I,G=k&&j>7?y-1:y;p[j].codewords[G]=e[N++]}if(N!==e.length)throw new U;return p},r.prototype.getNumDataCodewords=function(){return this.numDataCodewords},r.prototype.getCodewords=function(){return this.codewords},r})(),go=(function(){function r(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return r.prototype.getBitOffset=function(){return this.bitOffset},r.prototype.getByteOffset=function(){return this.byteOffset},r.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new U(""+e);var t=0,n=this.bitOffset,a=this.byteOffset,i=this.bytes;if(n>0){var o=8-n,s=e<o?e:o,l=o-s,c=255>>8-s<<l;t=(i[a]&c)>>l,e-=s,n+=s,n===8&&(n=0,a++)}if(e>0){for(;e>=8;)t=t<<8|i[a]&255,a++,e-=8;if(e>0){var l=8-e,c=255>>l<<l;t=t<<e|(i[a]&c)>>l,n+=e}}return this.bitOffset=n,this.byteOffset=a,t},r.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},r})(),_e;(function(r){r[r.PAD_ENCODE=0]="PAD_ENCODE",r[r.ASCII_ENCODE=1]="ASCII_ENCODE",r[r.C40_ENCODE=2]="C40_ENCODE",r[r.TEXT_ENCODE=3]="TEXT_ENCODE",r[r.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",r[r.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",r[r.BASE256_ENCODE=6]="BASE256_ENCODE"})(_e||(_e={}));var Zu=(function(){function r(){}return r.decode=function(e){var t=new go(e),n=new $,a=new $,i=new Array,o=_e.ASCII_ENCODE;do if(o===_e.ASCII_ENCODE)o=this.decodeAsciiSegment(t,n,a);else{switch(o){case _e.C40_ENCODE:this.decodeC40Segment(t,n);break;case _e.TEXT_ENCODE:this.decodeTextSegment(t,n);break;case _e.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,n);break;case _e.EDIFACT_ENCODE:this.decodeEdifactSegment(t,n);break;case _e.BASE256_ENCODE:this.decodeBase256Segment(t,n,i);break;default:throw new D}o=_e.ASCII_ENCODE}while(o!==_e.PAD_ENCODE&&t.available()>0);return a.length()>0&&n.append(a.toString()),new Br(e,n.toString(),i.length===0?null:i,null)},r.decodeAsciiSegment=function(e,t,n){var a=!1;do{var i=e.readBits(8);if(i===0)throw new D;if(i<=128)return a&&(i+=128),t.append(String.fromCharCode(i-1)),_e.ASCII_ENCODE;if(i===129)return _e.PAD_ENCODE;if(i<=229){var o=i-130;o<10&&t.append("0"),t.append(""+o)}else switch(i){case 230:return _e.C40_ENCODE;case 231:return _e.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:a=!0;break;case 236:t.append("[)>05"),n.insert(0,"");break;case 237:t.append("[)>06"),n.insert(0,"");break;case 238:return _e.ANSIX12_ENCODE;case 239:return _e.TEXT_ENCODE;case 240:return _e.EDIFACT_ENCODE;case 241:break;default:if(i!==254||e.available()!==0)throw new D;break}}while(e.available()>0);return _e.ASCII_ENCODE},r.decodeC40Segment=function(e,t){var n=!1,a=[],i=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),a);for(var s=0;s<3;s++){var l=a[s];switch(i){case 0:if(l<3)i=l+1;else if(l<this.C40_BASIC_SET_CHARS.length){var c=this.C40_BASIC_SET_CHARS[l];n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c)}else throw new D;break;case 1:n?(t.append(String.fromCharCode(l+128)),n=!1):t.append(String.fromCharCode(l)),i=0;break;case 2:if(l<this.C40_SHIFT2_SET_CHARS.length){var c=this.C40_SHIFT2_SET_CHARS[l];n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c)}else switch(l){case 27:t.append("");break;case 30:n=!0;break;default:throw new D}i=0;break;case 3:n?(t.append(String.fromCharCode(l+224)),n=!1):t.append(String.fromCharCode(l+96)),i=0;break;default:throw new D}}}while(e.available()>0)},r.decodeTextSegment=function(e,t){var n=!1,a=[],i=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),a);for(var s=0;s<3;s++){var l=a[s];switch(i){case 0:if(l<3)i=l+1;else if(l<this.TEXT_BASIC_SET_CHARS.length){var c=this.TEXT_BASIC_SET_CHARS[l];n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c)}else throw new D;break;case 1:n?(t.append(String.fromCharCode(l+128)),n=!1):t.append(String.fromCharCode(l)),i=0;break;case 2:if(l<this.TEXT_SHIFT2_SET_CHARS.length){var c=this.TEXT_SHIFT2_SET_CHARS[l];n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c)}else switch(l){case 27:t.append("");break;case 30:n=!0;break;default:throw new D}i=0;break;case 3:if(l<this.TEXT_SHIFT3_SET_CHARS.length){var c=this.TEXT_SHIFT3_SET_CHARS[l];n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c),i=0}else throw new D;break;default:throw new D}}}while(e.available()>0)},r.decodeAnsiX12Segment=function(e,t){var n=[];do{if(e.available()===8)return;var a=e.readBits(8);if(a===254)return;this.parseTwoBytes(a,e.readBits(8),n);for(var i=0;i<3;i++){var o=n[i];switch(o){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(o<14)t.append(String.fromCharCode(o+44));else if(o<40)t.append(String.fromCharCode(o+51));else throw new D;break}}}while(e.available()>0)},r.parseTwoBytes=function(e,t,n){var a=(e<<8)+t-1,i=Math.floor(a/1600);n[0]=i,a-=i*1600,i=Math.floor(a/40),n[1]=i,n[2]=a-i*40},r.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var a=e.readBits(6);if(a===31){var i=8-e.getBitOffset();i!==8&&e.readBits(i);return}(a&32)===0&&(a|=64),t.append(String.fromCharCode(a))}}while(e.available()>0)},r.decodeBase256Segment=function(e,t,n){var a=1+e.getByteOffset(),i=this.unrandomize255State(e.readBits(8),a++),o;if(i===0?o=e.available()/8|0:i<250?o=i:o=250*(i-249)+this.unrandomize255State(e.readBits(8),a++),o<0)throw new D;for(var s=new Uint8Array(o),l=0;l<o;l++){if(e.available()<8)throw new D;s[l]=this.unrandomize255State(e.readBits(8),a++)}n.push(s);try{t.append(Ke.decode(s,K.ISO88591))}catch(c){throw new nr("Platform does not support required encoding: "+c.message)}},r.unrandomize255State=function(e,t){var n=149*t%255+1,a=e-n;return a>=0?a:a+256},r.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],r.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],r.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],r.TEXT_SHIFT2_SET_CHARS=r.C40_SHIFT2_SET_CHARS,r.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],r})(),Ku=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qu=(function(){function r(){this.rsDecoder=new Lr(Ge.DATA_MATRIX_FIELD_256)}return r.prototype.decode=function(e){var t,n,a=new Xu(e),i=a.getVersion(),o=a.readCodewords(),s=Yu.getDataBlocks(o,i),l=0;try{for(var c=Ku(s),u=c.next();!u.done;u=c.next()){var f=u.value;l+=f.getNumDataCodewords()}}catch(_){t={error:_}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}for(var h=new Uint8Array(l),p=s.length,x=0;x<p;x++){var v=s[x],m=v.getCodewords(),y=v.getNumDataCodewords();this.correctErrors(m,y);for(var g=0;g<y;g++)h[g*p+x]=m[g]}return Zu.decode(h)},r.prototype.correctErrors=function(e,t){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new be}for(var a=0;a<t;a++)e[a]=n[a]},r})(),Ju=(function(){function r(e){this.image=e,this.rectangleDetector=new yn(this.image)}return r.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new O;t=this.shiftToModuleCenter(t);var n=t[0],a=t[1],i=t[2],o=t[3],s=this.transitionsBetween(n,o)+1,l=this.transitionsBetween(i,o)+1;(s&1)===1&&(s+=1),(l&1)===1&&(l+=1),4*s<7*l&&4*l<7*s&&(s=l=Math.max(s,l));var c=r.sampleGrid(this.image,n,a,i,o,s,l);return new Un(c,[n,a,i,o])},r.shiftPoint=function(e,t,n){var a=(t.getX()-e.getX())/(n+1),i=(t.getY()-e.getY())/(n+1);return new L(e.getX()+a,e.getY()+i)},r.moveAway=function(e,t,n){var a=e.getX(),i=e.getY();return a<t?a-=1:a+=1,i<n?i-=1:i+=1,new L(a,i)},r.prototype.detectSolid1=function(e){var t=e[0],n=e[1],a=e[3],i=e[2],o=this.transitionsBetween(t,n),s=this.transitionsBetween(n,a),l=this.transitionsBetween(a,i),c=this.transitionsBetween(i,t),u=o,f=[i,t,n,a];return u>s&&(u=s,f[0]=t,f[1]=n,f[2]=a,f[3]=i),u>l&&(u=l,f[0]=n,f[1]=a,f[2]=i,f[3]=t),u>c&&(f[0]=a,f[1]=i,f[2]=t,f[3]=n),f},r.prototype.detectSolid2=function(e){var t=e[0],n=e[1],a=e[2],i=e[3],o=this.transitionsBetween(t,i),s=r.shiftPoint(n,a,(o+1)*4),l=r.shiftPoint(a,n,(o+1)*4),c=this.transitionsBetween(s,t),u=this.transitionsBetween(l,i);return c<u?(e[0]=t,e[1]=n,e[2]=a,e[3]=i):(e[0]=n,e[1]=a,e[2]=i,e[3]=t),e},r.prototype.correctTopRight=function(e){var t=e[0],n=e[1],a=e[2],i=e[3],o=this.transitionsBetween(t,i),s=this.transitionsBetween(n,i),l=r.shiftPoint(t,n,(s+1)*4),c=r.shiftPoint(a,n,(o+1)*4);o=this.transitionsBetween(l,i),s=this.transitionsBetween(c,i);var u=new L(i.getX()+(a.getX()-n.getX())/(o+1),i.getY()+(a.getY()-n.getY())/(o+1)),f=new L(i.getX()+(t.getX()-n.getX())/(s+1),i.getY()+(t.getY()-n.getY())/(s+1));if(!this.isValid(u))return this.isValid(f)?f:null;if(!this.isValid(f))return u;var h=this.transitionsBetween(l,u)+this.transitionsBetween(c,u),p=this.transitionsBetween(l,f)+this.transitionsBetween(c,f);return h>p?u:f},r.prototype.shiftToModuleCenter=function(e){var t=e[0],n=e[1],a=e[2],i=e[3],o=this.transitionsBetween(t,i)+1,s=this.transitionsBetween(a,i)+1,l=r.shiftPoint(t,n,s*4),c=r.shiftPoint(a,n,o*4);o=this.transitionsBetween(l,i)+1,s=this.transitionsBetween(c,i)+1,(o&1)===1&&(o+=1),(s&1)===1&&(s+=1);var u=(t.getX()+n.getX()+a.getX()+i.getX())/4,f=(t.getY()+n.getY()+a.getY()+i.getY())/4;t=r.moveAway(t,u,f),n=r.moveAway(n,u,f),a=r.moveAway(a,u,f),i=r.moveAway(i,u,f);var h,p;return l=r.shiftPoint(t,n,s*4),l=r.shiftPoint(l,i,o*4),h=r.shiftPoint(n,t,s*4),h=r.shiftPoint(h,a,o*4),c=r.shiftPoint(a,i,s*4),c=r.shiftPoint(c,n,o*4),p=r.shiftPoint(i,a,s*4),p=r.shiftPoint(p,t,o*4),[l,h,c,p]},r.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},r.sampleGrid=function(e,t,n,a,i,o,s){var l=Vn.getInstance();return l.sampleGrid(e,o,s,.5,.5,o-.5,.5,o-.5,s-.5,.5,s-.5,t.getX(),t.getY(),i.getX(),i.getY(),a.getX(),a.getY(),n.getX(),n.getY())},r.prototype.transitionsBetween=function(e,t){var n=Math.trunc(e.getX()),a=Math.trunc(e.getY()),i=Math.trunc(t.getX()),o=Math.trunc(t.getY()),s=Math.abs(o-a)>Math.abs(i-n);if(s){var l=n;n=a,a=l,l=i,i=o,o=l}for(var c=Math.abs(i-n),u=Math.abs(o-a),f=-c/2,h=a<o?1:-1,p=n<i?1:-1,x=0,v=this.image.get(s?a:n,s?n:a),m=n,y=a;m!==i;m+=p){var g=this.image.get(s?y:m,s?m:y);if(g!==v&&(x++,v=g),f+=u,f>0){if(y===o)break;y+=h,f-=c}}return x},r})(),wr=(function(){function r(){this.decoder=new qu}return r.prototype.decode=function(e,t){t===void 0&&(t=null);var n,a;if(t!=null&&t.has(le.PURE_BARCODE)){var i=r.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(i),a=r.NO_POINTS}else{var o=new Ju(e.getBlackMatrix()).detect();n=this.decoder.decode(o.getBits()),a=o.getPoints()}var s=n.getRawBytes(),l=new je(n.getText(),s,8*s.length,a,B.DATA_MATRIX,de.currentTimeMillis()),c=n.getByteSegments();c!=null&&l.putMetadata(Pe.BYTE_SEGMENTS,c);var u=n.getECLevel();return u!=null&&l.putMetadata(Pe.ERROR_CORRECTION_LEVEL,u),l},r.prototype.reset=function(){},r.extractPureBits=function(e){var t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t==null||n==null)throw new O;var a=this.moduleSize(t,e),i=t[1],o=n[1],s=t[0],l=n[0],c=(l-s+1)/a,u=(o-i+1)/a;if(c<=0||u<=0)throw new O;var f=a/2;i+=f,s+=f;for(var h=new st(c,u),p=0;p<u;p++)for(var x=i+p*a,v=0;v<c;v++)e.get(s+v*a,x)&&h.set(v,p);return h},r.moduleSize=function(e,t){for(var n=t.getWidth(),a=e[0],i=e[1];a<n&&t.get(a,i);)a++;if(a===n)throw new O;var o=a-e[0];if(o===0)throw new O;return o},r.NO_POINTS=[],r})(),Qu=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){Qu(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new wr,t)||this}return e})(jt);var It;(function(r){r[r.L=0]="L",r[r.M=1]="M",r[r.Q=2]="Q",r[r.H=3]="H"})(It||(It={}));var e0=(function(){function r(e,t,n){this.value=e,this.stringValue=t,this.bits=n,r.FOR_BITS.set(n,this),r.FOR_VALUE.set(e,this)}return r.prototype.getValue=function(){return this.value},r.prototype.getBits=function(){return this.bits},r.fromString=function(e){switch(e){case"L":return r.L;case"M":return r.M;case"Q":return r.Q;case"H":return r.H;default:throw new ye(e+"not available")}},r.prototype.toString=function(){return this.stringValue},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value},r.forBits=function(e){if(e<0||e>=r.FOR_BITS.size)throw new U;return r.FOR_BITS.get(e)},r.FOR_BITS=new Map,r.FOR_VALUE=new Map,r.L=new r(It.L,"L",1),r.M=new r(It.M,"M",0),r.Q=new r(It.Q,"Q",3),r.H=new r(It.H,"H",2),r})(),t0=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mo=(function(){function r(e){this.errorCorrectionLevel=e0.forBits(e>>3&3),this.dataMask=e&7}return r.numBitsDiffering=function(e,t){return W.bitCount(e^t)},r.decodeFormatInformation=function(e,t){var n=r.doDecodeFormatInformation(e,t);return n!==null?n:r.doDecodeFormatInformation(e^r.FORMAT_INFO_MASK_QR,t^r.FORMAT_INFO_MASK_QR)},r.doDecodeFormatInformation=function(e,t){var n,a,i=Number.MAX_SAFE_INTEGER,o=0;try{for(var s=t0(r.FORMAT_INFO_DECODE_LOOKUP),l=s.next();!l.done;l=s.next()){var c=l.value,u=c[0];if(u===e||u===t)return new r(c[1]);var f=r.numBitsDiffering(e,u);f<i&&(o=c[1],i=f),e!==t&&(f=r.numBitsDiffering(t,u),f<i&&(o=c[1],i=f))}}catch(h){n={error:h}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}return i<=3?new r(o):null},r.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},r.prototype.getDataMask=function(){return this.dataMask},r.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},r.FORMAT_INFO_MASK_QR=21522,r.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],r})(),r0=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},S=(function(){function r(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return r.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},r.prototype.getNumBlocks=function(){var e,t,n=0,a=this.ecBlocks;try{for(var i=r0(a),o=i.next();!o.done;o=i.next()){var s=o.value;n+=s.getCount()}}catch(l){e={error:l}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n},r.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},r.prototype.getECBlocks=function(){return this.ecBlocks},r})(),b=(function(){function r(e,t){this.count=e,this.dataCodewords=t}return r.prototype.getCount=function(){return this.count},r.prototype.getDataCodewords=function(){return this.dataCodewords},r})(),n0=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},At=(function(){function r(e,t){for(var n,a,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=i;var s=0,l=i[0].getECCodewordsPerBlock(),c=i[0].getECBlocks();try{for(var u=n0(c),f=u.next();!f.done;f=u.next()){var h=f.value;s+=h.getCount()*(h.getDataCodewords()+l)}}catch(p){n={error:p}}finally{try{f&&!f.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}this.totalCodewords=s}return r.prototype.getVersionNumber=function(){return this.versionNumber},r.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},r.prototype.getTotalCodewords=function(){return this.totalCodewords},r.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},r.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},r.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new D;try{return this.getVersionForNumber((e-17)/4)}catch{throw new D}},r.getVersionForNumber=function(e){if(e<1||e>40)throw new U;return r.VERSIONS[e-1]},r.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,n=0,a=0;a<r.VERSION_DECODE_INFO.length;a++){var i=r.VERSION_DECODE_INFO[a];if(i===e)return r.getVersionForNumber(a+7);var o=mo.numBitsDiffering(e,i);o<t&&(n=a+7,t=o)}return t<=3?r.getVersionForNumber(n):null},r.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new st(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,a=0;a<n;a++)for(var i=this.alignmentPatternCenters[a]-2,o=0;o<n;o++)a===0&&(o===0||o===n-1)||a===n-1&&o===0||t.setRegion(this.alignmentPatternCenters[o]-2,i,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},r.prototype.toString=function(){return""+this.versionNumber},r.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),r.VERSIONS=[new r(1,new Int32Array(0),new S(7,new b(1,19)),new S(10,new b(1,16)),new S(13,new b(1,13)),new S(17,new b(1,9))),new r(2,Int32Array.from([6,18]),new S(10,new b(1,34)),new S(16,new b(1,28)),new S(22,new b(1,22)),new S(28,new b(1,16))),new r(3,Int32Array.from([6,22]),new S(15,new b(1,55)),new S(26,new b(1,44)),new S(18,new b(2,17)),new S(22,new b(2,13))),new r(4,Int32Array.from([6,26]),new S(20,new b(1,80)),new S(18,new b(2,32)),new S(26,new b(2,24)),new S(16,new b(4,9))),new r(5,Int32Array.from([6,30]),new S(26,new b(1,108)),new S(24,new b(2,43)),new S(18,new b(2,15),new b(2,16)),new S(22,new b(2,11),new b(2,12))),new r(6,Int32Array.from([6,34]),new S(18,new b(2,68)),new S(16,new b(4,27)),new S(24,new b(4,19)),new S(28,new b(4,15))),new r(7,Int32Array.from([6,22,38]),new S(20,new b(2,78)),new S(18,new b(4,31)),new S(18,new b(2,14),new b(4,15)),new S(26,new b(4,13),new b(1,14))),new r(8,Int32Array.from([6,24,42]),new S(24,new b(2,97)),new S(22,new b(2,38),new b(2,39)),new S(22,new b(4,18),new b(2,19)),new S(26,new b(4,14),new b(2,15))),new r(9,Int32Array.from([6,26,46]),new S(30,new b(2,116)),new S(22,new b(3,36),new b(2,37)),new S(20,new b(4,16),new b(4,17)),new S(24,new b(4,12),new b(4,13))),new r(10,Int32Array.from([6,28,50]),new S(18,new b(2,68),new b(2,69)),new S(26,new b(4,43),new b(1,44)),new S(24,new b(6,19),new b(2,20)),new S(28,new b(6,15),new b(2,16))),new r(11,Int32Array.from([6,30,54]),new S(20,new b(4,81)),new S(30,new b(1,50),new b(4,51)),new S(28,new b(4,22),new b(4,23)),new S(24,new b(3,12),new b(8,13))),new r(12,Int32Array.from([6,32,58]),new S(24,new b(2,92),new b(2,93)),new S(22,new b(6,36),new b(2,37)),new S(26,new b(4,20),new b(6,21)),new S(28,new b(7,14),new b(4,15))),new r(13,Int32Array.from([6,34,62]),new S(26,new b(4,107)),new S(22,new b(8,37),new b(1,38)),new S(24,new b(8,20),new b(4,21)),new S(22,new b(12,11),new b(4,12))),new r(14,Int32Array.from([6,26,46,66]),new S(30,new b(3,115),new b(1,116)),new S(24,new b(4,40),new b(5,41)),new S(20,new b(11,16),new b(5,17)),new S(24,new b(11,12),new b(5,13))),new r(15,Int32Array.from([6,26,48,70]),new S(22,new b(5,87),new b(1,88)),new S(24,new b(5,41),new b(5,42)),new S(30,new b(5,24),new b(7,25)),new S(24,new b(11,12),new b(7,13))),new r(16,Int32Array.from([6,26,50,74]),new S(24,new b(5,98),new b(1,99)),new S(28,new b(7,45),new b(3,46)),new S(24,new b(15,19),new b(2,20)),new S(30,new b(3,15),new b(13,16))),new r(17,Int32Array.from([6,30,54,78]),new S(28,new b(1,107),new b(5,108)),new S(28,new b(10,46),new b(1,47)),new S(28,new b(1,22),new b(15,23)),new S(28,new b(2,14),new b(17,15))),new r(18,Int32Array.from([6,30,56,82]),new S(30,new b(5,120),new b(1,121)),new S(26,new b(9,43),new b(4,44)),new S(28,new b(17,22),new b(1,23)),new S(28,new b(2,14),new b(19,15))),new r(19,Int32Array.from([6,30,58,86]),new S(28,new b(3,113),new b(4,114)),new S(26,new b(3,44),new b(11,45)),new S(26,new b(17,21),new b(4,22)),new S(26,new b(9,13),new b(16,14))),new r(20,Int32Array.from([6,34,62,90]),new S(28,new b(3,107),new b(5,108)),new S(26,new b(3,41),new b(13,42)),new S(30,new b(15,24),new b(5,25)),new S(28,new b(15,15),new b(10,16))),new r(21,Int32Array.from([6,28,50,72,94]),new S(28,new b(4,116),new b(4,117)),new S(26,new b(17,42)),new S(28,new b(17,22),new b(6,23)),new S(30,new b(19,16),new b(6,17))),new r(22,Int32Array.from([6,26,50,74,98]),new S(28,new b(2,111),new b(7,112)),new S(28,new b(17,46)),new S(30,new b(7,24),new b(16,25)),new S(24,new b(34,13))),new r(23,Int32Array.from([6,30,54,78,102]),new S(30,new b(4,121),new b(5,122)),new S(28,new b(4,47),new b(14,48)),new S(30,new b(11,24),new b(14,25)),new S(30,new b(16,15),new b(14,16))),new r(24,Int32Array.from([6,28,54,80,106]),new S(30,new b(6,117),new b(4,118)),new S(28,new b(6,45),new b(14,46)),new S(30,new b(11,24),new b(16,25)),new S(30,new b(30,16),new b(2,17))),new r(25,Int32Array.from([6,32,58,84,110]),new S(26,new b(8,106),new b(4,107)),new S(28,new b(8,47),new b(13,48)),new S(30,new b(7,24),new b(22,25)),new S(30,new b(22,15),new b(13,16))),new r(26,Int32Array.from([6,30,58,86,114]),new S(28,new b(10,114),new b(2,115)),new S(28,new b(19,46),new b(4,47)),new S(28,new b(28,22),new b(6,23)),new S(30,new b(33,16),new b(4,17))),new r(27,Int32Array.from([6,34,62,90,118]),new S(30,new b(8,122),new b(4,123)),new S(28,new b(22,45),new b(3,46)),new S(30,new b(8,23),new b(26,24)),new S(30,new b(12,15),new b(28,16))),new r(28,Int32Array.from([6,26,50,74,98,122]),new S(30,new b(3,117),new b(10,118)),new S(28,new b(3,45),new b(23,46)),new S(30,new b(4,24),new b(31,25)),new S(30,new b(11,15),new b(31,16))),new r(29,Int32Array.from([6,30,54,78,102,126]),new S(30,new b(7,116),new b(7,117)),new S(28,new b(21,45),new b(7,46)),new S(30,new b(1,23),new b(37,24)),new S(30,new b(19,15),new b(26,16))),new r(30,Int32Array.from([6,26,52,78,104,130]),new S(30,new b(5,115),new b(10,116)),new S(28,new b(19,47),new b(10,48)),new S(30,new b(15,24),new b(25,25)),new S(30,new b(23,15),new b(25,16))),new r(31,Int32Array.from([6,30,56,82,108,134]),new S(30,new b(13,115),new b(3,116)),new S(28,new b(2,46),new b(29,47)),new S(30,new b(42,24),new b(1,25)),new S(30,new b(23,15),new b(28,16))),new r(32,Int32Array.from([6,34,60,86,112,138]),new S(30,new b(17,115)),new S(28,new b(10,46),new b(23,47)),new S(30,new b(10,24),new b(35,25)),new S(30,new b(19,15),new b(35,16))),new r(33,Int32Array.from([6,30,58,86,114,142]),new S(30,new b(17,115),new b(1,116)),new S(28,new b(14,46),new b(21,47)),new S(30,new b(29,24),new b(19,25)),new S(30,new b(11,15),new b(46,16))),new r(34,Int32Array.from([6,34,62,90,118,146]),new S(30,new b(13,115),new b(6,116)),new S(28,new b(14,46),new b(23,47)),new S(30,new b(44,24),new b(7,25)),new S(30,new b(59,16),new b(1,17))),new r(35,Int32Array.from([6,30,54,78,102,126,150]),new S(30,new b(12,121),new b(7,122)),new S(28,new b(12,47),new b(26,48)),new S(30,new b(39,24),new b(14,25)),new S(30,new b(22,15),new b(41,16))),new r(36,Int32Array.from([6,24,50,76,102,128,154]),new S(30,new b(6,121),new b(14,122)),new S(28,new b(6,47),new b(34,48)),new S(30,new b(46,24),new b(10,25)),new S(30,new b(2,15),new b(64,16))),new r(37,Int32Array.from([6,28,54,80,106,132,158]),new S(30,new b(17,122),new b(4,123)),new S(28,new b(29,46),new b(14,47)),new S(30,new b(49,24),new b(10,25)),new S(30,new b(24,15),new b(46,16))),new r(38,Int32Array.from([6,32,58,84,110,136,162]),new S(30,new b(4,122),new b(18,123)),new S(28,new b(13,46),new b(32,47)),new S(30,new b(48,24),new b(14,25)),new S(30,new b(42,15),new b(32,16))),new r(39,Int32Array.from([6,26,54,82,110,138,166]),new S(30,new b(20,117),new b(4,118)),new S(28,new b(40,47),new b(7,48)),new S(30,new b(43,24),new b(22,25)),new S(30,new b(10,15),new b(67,16))),new r(40,Int32Array.from([6,30,58,86,114,142,170]),new S(30,new b(19,118),new b(6,119)),new S(28,new b(18,47),new b(31,48)),new S(30,new b(34,24),new b(34,25)),new S(30,new b(20,15),new b(61,16)))],r})(),Oe;(function(r){r[r.DATA_MASK_000=0]="DATA_MASK_000",r[r.DATA_MASK_001=1]="DATA_MASK_001",r[r.DATA_MASK_010=2]="DATA_MASK_010",r[r.DATA_MASK_011=3]="DATA_MASK_011",r[r.DATA_MASK_100=4]="DATA_MASK_100",r[r.DATA_MASK_101=5]="DATA_MASK_101",r[r.DATA_MASK_110=6]="DATA_MASK_110",r[r.DATA_MASK_111=7]="DATA_MASK_111"})(Oe||(Oe={}));var La=(function(){function r(e,t){this.value=e,this.isMasked=t}return r.prototype.unmaskBitMatrix=function(e,t){for(var n=0;n<t;n++)for(var a=0;a<t;a++)this.isMasked(n,a)&&e.flip(a,n)},r.values=new Map([[Oe.DATA_MASK_000,new r(Oe.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[Oe.DATA_MASK_001,new r(Oe.DATA_MASK_001,function(e,t){return(e&1)===0})],[Oe.DATA_MASK_010,new r(Oe.DATA_MASK_010,function(e,t){return t%3===0})],[Oe.DATA_MASK_011,new r(Oe.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[Oe.DATA_MASK_100,new r(Oe.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[Oe.DATA_MASK_101,new r(Oe.DATA_MASK_101,function(e,t){return e*t%6===0})],[Oe.DATA_MASK_110,new r(Oe.DATA_MASK_110,function(e,t){return e*t%6<3})],[Oe.DATA_MASK_111,new r(Oe.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),r})(),a0=(function(){function r(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new D;this.bitMatrix=e}return r.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);for(var a=this.bitMatrix.getHeight(),i=0,o=a-7,n=a-1;n>=o;n--)i=this.copyBit(8,n,i);for(var t=a-8;t<a;t++)i=this.copyBit(t,8,i);if(this.parsedFormatInfo=mo.decodeFormatInformation(e,i),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new D},r.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return At.getVersionForNumber(t);for(var n=0,a=e-11,i=5;i>=0;i--)for(var o=e-9;o>=a;o--)n=this.copyBit(o,i,n);var s=At.decodeVersionInformation(n);if(s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;n=0;for(var o=5;o>=0;o--)for(var i=e-9;i>=a;i--)n=this.copyBit(o,i,n);if(s=At.decodeVersionInformation(n),s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;throw new D},r.prototype.copyBit=function(e,t,n){var a=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return a?n<<1|1:n<<1},r.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),n=La.values.get(e.getDataMask()),a=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,a);for(var i=t.buildFunctionPattern(),o=!0,s=new Uint8Array(t.getTotalCodewords()),l=0,c=0,u=0,f=a-1;f>0;f-=2){f===6&&f--;for(var h=0;h<a;h++)for(var p=o?a-1-h:h,x=0;x<2;x++)i.get(f-x,p)||(u++,c<<=1,this.bitMatrix.get(f-x,p)&&(c|=1),u===8&&(s[l++]=c,u=0,c=0));o=!o}if(l!==t.getTotalCodewords())throw new D;return s},r.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=La.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},r.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},r.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,n=e.getWidth();t<n;t++)for(var a=t+1,i=e.getHeight();a<i;a++)e.get(t,a)!==e.get(a,t)&&(e.flip(a,t),e.flip(t,a))},r})(),Fa=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},i0=(function(){function r(e,t){this.numDataCodewords=e,this.codewords=t}return r.getDataBlocks=function(e,t,n){var a,i,o,s;if(e.length!==t.getTotalCodewords())throw new U;var l=t.getECBlocksForLevel(n),c=0,u=l.getECBlocks();try{for(var f=Fa(u),h=f.next();!h.done;h=f.next()){var p=h.value;c+=p.getCount()}}catch(G){a={error:G}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(a)throw a.error}}var x=new Array(c),v=0;try{for(var m=Fa(u),y=m.next();!y.done;y=m.next())for(var p=y.value,g=0;g<p.getCount();g++){var _=p.getDataCodewords(),C=l.getECCodewordsPerBlock()+_;x[v++]=new r(_,new Uint8Array(C))}}catch(G){o={error:G}}finally{try{y&&!y.done&&(s=m.return)&&s.call(m)}finally{if(o)throw o.error}}for(var A=x[0].codewords.length,E=x.length-1;E>=0;){var N=x[E].codewords.length;if(N===A)break;E--}E++;for(var I=A-l.getECCodewordsPerBlock(),k=0,g=0;g<I;g++)for(var R=0;R<v;R++)x[R].codewords[g]=e[k++];for(var R=E;R<v;R++)x[R].codewords[I]=e[k++];for(var M=x[0].codewords.length,g=I;g<M;g++)for(var R=0;R<v;R++){var j=R<E?g:g+1;x[R].codewords[j]=e[k++]}return x},r.prototype.getNumDataCodewords=function(){return this.numDataCodewords},r.prototype.getCodewords=function(){return this.codewords},r})(),Ye;(function(r){r[r.TERMINATOR=0]="TERMINATOR",r[r.NUMERIC=1]="NUMERIC",r[r.ALPHANUMERIC=2]="ALPHANUMERIC",r[r.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",r[r.BYTE=4]="BYTE",r[r.ECI=5]="ECI",r[r.KANJI=6]="KANJI",r[r.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",r[r.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",r[r.HANZI=9]="HANZI"})(Ye||(Ye={}));var pe=(function(){function r(e,t,n,a){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=n,this.bits=a,r.FOR_BITS.set(a,this),r.FOR_VALUE.set(e,this)}return r.forBits=function(e){var t=r.FOR_BITS.get(e);if(t===void 0)throw new U;return t},r.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),n;return t<=9?n=0:t<=26?n=1:n=2,this.characterCountBitsForVersions[n]},r.prototype.getValue=function(){return this.value},r.prototype.getBits=function(){return this.bits},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value},r.prototype.toString=function(){return this.stringValue},r.FOR_BITS=new Map,r.FOR_VALUE=new Map,r.TERMINATOR=new r(Ye.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),r.NUMERIC=new r(Ye.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),r.ALPHANUMERIC=new r(Ye.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),r.STRUCTURED_APPEND=new r(Ye.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),r.BYTE=new r(Ye.BYTE,"BYTE",Int32Array.from([8,16,16]),4),r.ECI=new r(Ye.ECI,"ECI",Int32Array.from([0,0,0]),7),r.KANJI=new r(Ye.KANJI,"KANJI",Int32Array.from([8,10,12]),8),r.FNC1_FIRST_POSITION=new r(Ye.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),r.FNC1_SECOND_POSITION=new r(Ye.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),r.HANZI=new r(Ye.HANZI,"HANZI",Int32Array.from([8,10,12]),13),r})(),o0=(function(){function r(){}return r.decode=function(e,t,n,a){var i=new go(e),o=new $,s=new Array,l=-1,c=-1;try{var u=null,f=!1,h=void 0;do{if(i.available()<4)h=pe.TERMINATOR;else{var p=i.readBits(4);h=pe.forBits(p)}switch(h){case pe.TERMINATOR:break;case pe.FNC1_FIRST_POSITION:case pe.FNC1_SECOND_POSITION:f=!0;break;case pe.STRUCTURED_APPEND:if(i.available()<16)throw new D;l=i.readBits(8),c=i.readBits(8);break;case pe.ECI:var x=r.parseECIValue(i);if(u=Ee.getCharacterSetECIByValue(x),u===null)throw new D;break;case pe.HANZI:var v=i.readBits(4),m=i.readBits(h.getCharacterCountBits(t));v===r.GB2312_SUBSET&&r.decodeHanziSegment(i,o,m);break;default:var y=i.readBits(h.getCharacterCountBits(t));switch(h){case pe.NUMERIC:r.decodeNumericSegment(i,o,y);break;case pe.ALPHANUMERIC:r.decodeAlphanumericSegment(i,o,y,f);break;case pe.BYTE:r.decodeByteSegment(i,o,y,u,s,a);break;case pe.KANJI:r.decodeKanjiSegment(i,o,y);break;default:throw new D}break}}while(h!==pe.TERMINATOR)}catch{throw new D}return new Br(e,o.toString(),s.length===0?null:s,n===null?null:n.toString(),l,c)},r.decodeHanziSegment=function(e,t,n){if(n*13>e.available())throw new D;for(var a=new Uint8Array(2*n),i=0;n>0;){var o=e.readBits(13),s=o/96<<8&4294967295|o%96;s<959?s+=41377:s+=42657,a[i]=s>>8&255,a[i+1]=s&255,i+=2,n--}try{t.append(Ke.decode(a,K.GB2312))}catch(l){throw new D(l)}},r.decodeKanjiSegment=function(e,t,n){if(n*13>e.available())throw new D;for(var a=new Uint8Array(2*n),i=0;n>0;){var o=e.readBits(13),s=o/192<<8&4294967295|o%192;s<7936?s+=33088:s+=49472,a[i]=s>>8,a[i+1]=s,i+=2,n--}try{t.append(Ke.decode(a,K.SHIFT_JIS))}catch(l){throw new D(l)}},r.decodeByteSegment=function(e,t,n,a,i,o){if(8*n>e.available())throw new D;for(var s=new Uint8Array(n),l=0;l<n;l++)s[l]=e.readBits(8);var c;a===null?c=K.guessEncoding(s,o):c=a.getName();try{t.append(Ke.decode(s,c))}catch(u){throw new D(u)}i.push(s)},r.toAlphaNumericChar=function(e){if(e>=r.ALPHANUMERIC_CHARS.length)throw new D;return r.ALPHANUMERIC_CHARS[e]},r.decodeAlphanumericSegment=function(e,t,n,a){for(var i=t.length();n>1;){if(e.available()<11)throw new D;var o=e.readBits(11);t.append(r.toAlphaNumericChar(Math.floor(o/45))),t.append(r.toAlphaNumericChar(o%45)),n-=2}if(n===1){if(e.available()<6)throw new D;t.append(r.toAlphaNumericChar(e.readBits(6)))}if(a)for(var s=i;s<t.length();s++)t.charAt(s)==="%"&&(s<t.length()-1&&t.charAt(s+1)==="%"?t.deleteCharAt(s+1):t.setCharAt(s,""))},r.decodeNumericSegment=function(e,t,n){for(;n>=3;){if(e.available()<10)throw new D;var a=e.readBits(10);if(a>=1e3)throw new D;t.append(r.toAlphaNumericChar(Math.floor(a/100))),t.append(r.toAlphaNumericChar(Math.floor(a/10)%10)),t.append(r.toAlphaNumericChar(a%10)),n-=3}if(n===2){if(e.available()<7)throw new D;var i=e.readBits(7);if(i>=100)throw new D;t.append(r.toAlphaNumericChar(Math.floor(i/10))),t.append(r.toAlphaNumericChar(i%10))}else if(n===1){if(e.available()<4)throw new D;var o=e.readBits(4);if(o>=10)throw new D;t.append(r.toAlphaNumericChar(o))}},r.parseECIValue=function(e){var t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){var n=e.readBits(8);return(t&63)<<8&4294967295|n}if((t&224)===192){var a=e.readBits(16);return(t&31)<<16&4294967295|a}throw new D},r.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",r.GB2312_SUBSET=1,r})(),yo=(function(){function r(e){this.mirrored=e}return r.prototype.isMirrored=function(){return this.mirrored},r.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},r})(),Ua=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s0=(function(){function r(){this.rsDecoder=new Lr(Ge.QR_CODE_FIELD_256)}return r.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(st.parseFromBooleanArray(e),t)},r.prototype.decodeBitMatrix=function(e,t){var n=new a0(e),a=null;try{return this.decodeBitMatrixParser(n,t)}catch(o){a=o}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var i=this.decodeBitMatrixParser(n,t);return i.setOther(new yo(!0)),i}catch(o){throw a!==null?a:o}},r.prototype.decodeBitMatrixParser=function(e,t){var n,a,i,o,s=e.readVersion(),l=e.readFormatInformation().getErrorCorrectionLevel(),c=e.readCodewords(),u=i0.getDataBlocks(c,s,l),f=0;try{for(var h=Ua(u),p=h.next();!p.done;p=h.next()){var x=p.value;f+=x.getNumDataCodewords()}}catch(E){n={error:E}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(n)throw n.error}}var v=new Uint8Array(f),m=0;try{for(var y=Ua(u),g=y.next();!g.done;g=y.next()){var x=g.value,_=x.getCodewords(),C=x.getNumDataCodewords();this.correctErrors(_,C);for(var A=0;A<C;A++)v[m++]=_[A]}}catch(E){i={error:E}}finally{try{g&&!g.done&&(o=y.return)&&o.call(y)}finally{if(i)throw i.error}}return o0.decode(v,s,l,t)},r.prototype.correctErrors=function(e,t){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new be}for(var a=0;a<t;a++)e[a]=n[a]},r})(),l0=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),c0=(function(r){l0(e,r);function e(t,n,a){var i=r.call(this,t,n)||this;return i.estimatedModuleSize=a,i}return e.prototype.aboutEquals=function(t,n,a){if(Math.abs(n-this.getY())<=t&&Math.abs(a-this.getX())<=t){var i=Math.abs(t-this.estimatedModuleSize);return i<=1||i<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,n,a){var i=(this.getX()+n)/2,o=(this.getY()+t)/2,s=(this.estimatedModuleSize+a)/2;return new e(i,o,s)},e})(L),u0=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},d0=(function(){function r(e,t,n,a,i,o,s){this.image=e,this.startX=t,this.startY=n,this.width=a,this.height=i,this.moduleSize=o,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return r.prototype.find=function(){for(var e=this.startX,t=this.height,n=this.width,a=e+n,i=this.startY+t/2,o=new Int32Array(3),s=this.image,l=0;l<t;l++){var c=i+((l&1)===0?Math.floor((l+1)/2):-Math.floor((l+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var u=e;u<a&&!s.get(u,c);)u++;for(var f=0;u<a;){if(s.get(u,c))if(f===1)o[1]++;else if(f===2){if(this.foundPatternCross(o)){var h=this.handlePossibleCenter(o,c,u);if(h!==null)return h}o[0]=o[2],o[1]=1,o[2]=0,f=1}else o[++f]++;else f===1&&f++,o[f]++;u++}if(this.foundPatternCross(o)){var h=this.handlePossibleCenter(o,c,a);if(h!==null)return h}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new O},r.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},r.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,n=t/2,a=0;a<3;a++)if(Math.abs(t-e[a])>=n)return!1;return!0},r.prototype.crossCheckVertical=function(e,t,n,a){var i=this.image,o=i.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var l=e;l>=0&&i.get(t,l)&&s[1]<=n;)s[1]++,l--;if(l<0||s[1]>n)return NaN;for(;l>=0&&!i.get(t,l)&&s[0]<=n;)s[0]++,l--;if(s[0]>n)return NaN;for(l=e+1;l<o&&i.get(t,l)&&s[1]<=n;)s[1]++,l++;if(l===o||s[1]>n)return NaN;for(;l<o&&!i.get(t,l)&&s[2]<=n;)s[2]++,l++;if(s[2]>n)return NaN;var c=s[0]+s[1]+s[2];return 5*Math.abs(c-a)>=2*a?NaN:this.foundPatternCross(s)?r.centerFromEnd(s,l):NaN},r.prototype.handlePossibleCenter=function(e,t,n){var a,i,o=e[0]+e[1]+e[2],s=r.centerFromEnd(e,n),l=this.crossCheckVertical(t,s,2*e[1],o);if(!isNaN(l)){var c=(e[0]+e[1]+e[2])/3;try{for(var u=u0(this.possibleCenters),f=u.next();!f.done;f=u.next()){var h=f.value;if(h.aboutEquals(c,l,s))return h.combineEstimate(l,s,c)}}catch(x){a={error:x}}finally{try{f&&!f.done&&(i=u.return)&&i.call(u)}finally{if(a)throw a.error}}var p=new c0(s,l,c);this.possibleCenters.push(p),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(p)}return null},r})(),f0=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),h0=(function(r){f0(e,r);function e(t,n,a,i){var o=r.call(this,t,n)||this;return o.estimatedModuleSize=a,o.count=i,i===void 0&&(o.count=1),o}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,n,a){if(Math.abs(n-this.getY())<=t&&Math.abs(a-this.getX())<=t){var i=Math.abs(t-this.estimatedModuleSize);return i<=1||i<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,n,a){var i=this.count+1,o=(this.count*this.getX()+n)/i,s=(this.count*this.getY()+t)/i,l=(this.count*this.estimatedModuleSize+a)/i;return new e(o,s,l,i)},e})(L),p0=(function(){function r(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return r.prototype.getBottomLeft=function(){return this.bottomLeft},r.prototype.getTopLeft=function(){return this.topLeft},r.prototype.getTopRight=function(){return this.topRight},r})(),Ut=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},x0=(function(){function r(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return r.prototype.getImage=function(){return this.image},r.prototype.getPossibleCenters=function(){return this.possibleCenters},r.prototype.find=function(e){var t=e!=null&&e.get(le.TRY_HARDER)!==void 0,n=e!=null&&e.get(le.PURE_BARCODE)!==void 0,a=this.image,i=a.getHeight(),o=a.getWidth(),s=Math.floor(3*i/(4*r.MAX_MODULES));(s<r.MIN_SKIP||t)&&(s=r.MIN_SKIP);for(var l=!1,c=new Int32Array(5),u=s-1;u<i&&!l;u+=s){c[0]=0,c[1]=0,c[2]=0,c[3]=0,c[4]=0;for(var f=0,h=0;h<o;h++)if(a.get(h,u))(f&1)===1&&f++,c[f]++;else if((f&1)===0)if(f===4)if(r.foundPatternCross(c)){var p=this.handlePossibleCenter(c,u,h,n);if(p===!0)if(s=2,this.hasSkipped===!0)l=this.haveMultiplyConfirmedCenters();else{var x=this.findRowSkip();x>c[2]&&(u+=x-c[2]-s,h=o-1)}else{c[0]=c[2],c[1]=c[3],c[2]=c[4],c[3]=1,c[4]=0,f=3;continue}f=0,c[0]=0,c[1]=0,c[2]=0,c[3]=0,c[4]=0}else c[0]=c[2],c[1]=c[3],c[2]=c[4],c[3]=1,c[4]=0,f=3;else c[++f]++;else c[f]++;if(r.foundPatternCross(c)){var p=this.handlePossibleCenter(c,u,o,n);p===!0&&(s=c[0],this.hasSkipped&&(l=this.haveMultiplyConfirmedCenters()))}}var v=this.selectBestPatterns();return L.orderBestPatterns(v),new p0(v)},r.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},r.foundPatternCross=function(e){for(var t=0,n=0;n<5;n++){var a=e[n];if(a===0)return!1;t+=a}if(t<7)return!1;var i=t/7,o=i/2;return Math.abs(i-e[0])<o&&Math.abs(i-e[1])<o&&Math.abs(3*i-e[2])<3*o&&Math.abs(i-e[3])<o&&Math.abs(i-e[4])<o},r.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},r.prototype.crossCheckDiagonal=function(e,t,n,a){for(var i=this.getCrossCheckStateCount(),o=0,s=this.image;e>=o&&t>=o&&s.get(t-o,e-o);)i[2]++,o++;if(e<o||t<o)return!1;for(;e>=o&&t>=o&&!s.get(t-o,e-o)&&i[1]<=n;)i[1]++,o++;if(e<o||t<o||i[1]>n)return!1;for(;e>=o&&t>=o&&s.get(t-o,e-o)&&i[0]<=n;)i[0]++,o++;if(i[0]>n)return!1;var l=s.getHeight(),c=s.getWidth();for(o=1;e+o<l&&t+o<c&&s.get(t+o,e+o);)i[2]++,o++;if(e+o>=l||t+o>=c)return!1;for(;e+o<l&&t+o<c&&!s.get(t+o,e+o)&&i[3]<n;)i[3]++,o++;if(e+o>=l||t+o>=c||i[3]>=n)return!1;for(;e+o<l&&t+o<c&&s.get(t+o,e+o)&&i[4]<n;)i[4]++,o++;if(i[4]>=n)return!1;var u=i[0]+i[1]+i[2]+i[3]+i[4];return Math.abs(u-a)<2*a&&r.foundPatternCross(i)},r.prototype.crossCheckVertical=function(e,t,n,a){for(var i=this.image,o=i.getHeight(),s=this.getCrossCheckStateCount(),l=e;l>=0&&i.get(t,l);)s[2]++,l--;if(l<0)return NaN;for(;l>=0&&!i.get(t,l)&&s[1]<=n;)s[1]++,l--;if(l<0||s[1]>n)return NaN;for(;l>=0&&i.get(t,l)&&s[0]<=n;)s[0]++,l--;if(s[0]>n)return NaN;for(l=e+1;l<o&&i.get(t,l);)s[2]++,l++;if(l===o)return NaN;for(;l<o&&!i.get(t,l)&&s[3]<n;)s[3]++,l++;if(l===o||s[3]>=n)return NaN;for(;l<o&&i.get(t,l)&&s[4]<n;)s[4]++,l++;if(s[4]>=n)return NaN;var c=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(c-a)>=2*a?NaN:r.foundPatternCross(s)?r.centerFromEnd(s,l):NaN},r.prototype.crossCheckHorizontal=function(e,t,n,a){for(var i=this.image,o=i.getWidth(),s=this.getCrossCheckStateCount(),l=e;l>=0&&i.get(l,t);)s[2]++,l--;if(l<0)return NaN;for(;l>=0&&!i.get(l,t)&&s[1]<=n;)s[1]++,l--;if(l<0||s[1]>n)return NaN;for(;l>=0&&i.get(l,t)&&s[0]<=n;)s[0]++,l--;if(s[0]>n)return NaN;for(l=e+1;l<o&&i.get(l,t);)s[2]++,l++;if(l===o)return NaN;for(;l<o&&!i.get(l,t)&&s[3]<n;)s[3]++,l++;if(l===o||s[3]>=n)return NaN;for(;l<o&&i.get(l,t)&&s[4]<n;)s[4]++,l++;if(s[4]>=n)return NaN;var c=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(c-a)>=a?NaN:r.foundPatternCross(s)?r.centerFromEnd(s,l):NaN},r.prototype.handlePossibleCenter=function(e,t,n,a){var i=e[0]+e[1]+e[2]+e[3]+e[4],o=r.centerFromEnd(e,n),s=this.crossCheckVertical(t,Math.floor(o),e[2],i);if(!isNaN(s)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(s),e[2],i),!isNaN(o)&&(!a||this.crossCheckDiagonal(Math.floor(s),Math.floor(o),e[2],i)))){for(var l=i/7,c=!1,u=this.possibleCenters,f=0,h=u.length;f<h;f++){var p=u[f];if(p.aboutEquals(l,s,o)){u[f]=p.combineEstimate(s,o,l),c=!0;break}}if(!c){var x=new h0(o,s,l);u.push(x),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(x)}return!0}return!1},r.prototype.findRowSkip=function(){var e,t,n=this.possibleCenters.length;if(n<=1)return 0;var a=null;try{for(var i=Ut(this.possibleCenters),o=i.next();!o.done;o=i.next()){var s=o.value;if(s.getCount()>=r.CENTER_QUORUM)if(a==null)a=s;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-s.getX())-Math.abs(a.getY()-s.getY()))/2)}}catch(l){e={error:l}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return 0},r.prototype.haveMultiplyConfirmedCenters=function(){var e,t,n,a,i=0,o=0,s=this.possibleCenters.length;try{for(var l=Ut(this.possibleCenters),c=l.next();!c.done;c=l.next()){var u=c.value;u.getCount()>=r.CENTER_QUORUM&&(i++,o+=u.getEstimatedModuleSize())}}catch(v){e={error:v}}finally{try{c&&!c.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}if(i<3)return!1;var f=o/s,h=0;try{for(var p=Ut(this.possibleCenters),x=p.next();!x.done;x=p.next()){var u=x.value;h+=Math.abs(u.getEstimatedModuleSize()-f)}}catch(v){n={error:v}}finally{try{x&&!x.done&&(a=p.return)&&a.call(p)}finally{if(n)throw n.error}}return h<=.05*o},r.prototype.selectBestPatterns=function(){var e,t,n,a,i=this.possibleCenters.length;if(i<3)throw new O;var o=this.possibleCenters,s;if(i>3){var l=0,c=0;try{for(var u=Ut(this.possibleCenters),f=u.next();!f.done;f=u.next()){var h=f.value,p=h.getEstimatedModuleSize();l+=p,c+=p*p}}catch(A){e={error:A}}finally{try{f&&!f.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}s=l/i;var x=Math.sqrt(c/i-s*s);o.sort(function(A,E){var N=Math.abs(E.getEstimatedModuleSize()-s),I=Math.abs(A.getEstimatedModuleSize()-s);return N<I?-1:N>I?1:0});for(var v=Math.max(.2*s,x),m=0;m<o.length&&o.length>3;m++){var y=o[m];Math.abs(y.getEstimatedModuleSize()-s)>v&&(o.splice(m,1),m--)}}if(o.length>3){var l=0;try{for(var g=Ut(o),_=g.next();!_.done;_=g.next()){var C=_.value;l+=C.getEstimatedModuleSize()}}catch(E){n={error:E}}finally{try{_&&!_.done&&(a=g.return)&&a.call(g)}finally{if(n)throw n.error}}s=l/o.length,o.sort(function(E,N){if(N.getCount()===E.getCount()){var I=Math.abs(N.getEstimatedModuleSize()-s),k=Math.abs(E.getEstimatedModuleSize()-s);return I<k?1:I>k?-1:0}else return N.getCount()-E.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]},r.CENTER_QUORUM=2,r.MIN_SKIP=3,r.MAX_MODULES=57,r})(),v0=(function(){function r(e){this.image=e}return r.prototype.getImage=function(){return this.image},r.prototype.getResultPointCallback=function(){return this.resultPointCallback},r.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(le.NEED_RESULT_POINT_CALLBACK);var t=new x0(this.image,this.resultPointCallback),n=t.find(e);return this.processFinderPatternInfo(n)},r.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),n=e.getTopRight(),a=e.getBottomLeft(),i=this.calculateModuleSize(t,n,a);if(i<1)throw new O("No pattern found in proccess finder.");var o=r.computeDimension(t,n,a,i),s=At.getProvisionalVersionForDimension(o),l=s.getDimensionForVersion()-7,c=null;if(s.getAlignmentPatternCenters().length>0)for(var u=n.getX()-t.getX()+a.getX(),f=n.getY()-t.getY()+a.getY(),h=1-3/l,p=Math.floor(t.getX()+h*(u-t.getX())),x=Math.floor(t.getY()+h*(f-t.getY())),v=4;v<=16;v<<=1)try{c=this.findAlignmentInRegion(i,p,x,v);break}catch(_){if(!(_ instanceof O))throw _}var m=r.createTransform(t,n,a,c,o),y=r.sampleGrid(this.image,m,o),g;return c===null?g=[a,t,n]:g=[a,t,n,c],new Un(y,g)},r.createTransform=function(e,t,n,a,i){var o=i-3.5,s,l,c,u;return a!==null?(s=a.getX(),l=a.getY(),c=o-3,u=c):(s=t.getX()-e.getX()+n.getX(),l=t.getY()-e.getY()+n.getY(),c=o,u=o),ho.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,c,u,3.5,o,e.getX(),e.getY(),t.getX(),t.getY(),s,l,n.getX(),n.getY())},r.sampleGrid=function(e,t,n){var a=Vn.getInstance();return a.sampleGridWithTransform(e,n,n,t)},r.computeDimension=function(e,t,n,a){var i=Q.round(L.distance(e,t)/a),o=Q.round(L.distance(e,n)/a),s=Math.floor((i+o)/2)+7;switch(s&3){case 0:s++;break;case 2:s--;break;case 3:throw new O("Dimensions could be not found.")}return s},r.prototype.calculateModuleSize=function(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2},r.prototype.calculateModuleSizeOneWay=function(e,t){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?a/7:isNaN(a)?n/7:(n+a)/14},r.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,n,a){var i=this.sizeOfBlackWhiteBlackRun(e,t,n,a),o=1,s=e-(n-e);s<0?(o=e/(e-s),s=0):s>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(s-e),s=this.image.getWidth()-1);var l=Math.floor(t-(a-t)*o);return o=1,l<0?(o=t/(t-l),l=0):l>=this.image.getHeight()&&(o=(this.image.getHeight()-1-t)/(l-t),l=this.image.getHeight()-1),s=Math.floor(e+(s-e)*o),i+=this.sizeOfBlackWhiteBlackRun(e,t,s,l),i-1},r.prototype.sizeOfBlackWhiteBlackRun=function(e,t,n,a){var i=Math.abs(a-t)>Math.abs(n-e);if(i){var o=e;e=t,t=o,o=n,n=a,a=o}for(var s=Math.abs(n-e),l=Math.abs(a-t),c=-s/2,u=e<n?1:-1,f=t<a?1:-1,h=0,p=n+u,x=e,v=t;x!==p;x+=u){var m=i?v:x,y=i?x:v;if(h===1===this.image.get(m,y)){if(h===2)return Q.distance(x,v,e,t);h++}if(c+=l,c>0){if(v===a)break;v+=f,c-=s}}return h===2?Q.distance(n+u,a,e,t):NaN},r.prototype.findAlignmentInRegion=function(e,t,n,a){var i=Math.floor(a*e),o=Math.max(0,t-i),s=Math.min(this.image.getWidth()-1,t+i);if(s-o<e*3)throw new O("Alignment top exceeds estimated module size.");var l=Math.max(0,n-i),c=Math.min(this.image.getHeight()-1,n+i);if(c-l<e*3)throw new O("Alignment bottom exceeds estimated module size.");var u=new d0(this.image,o,l,s-o,c-l,e,this.resultPointCallback);return u.find()},r})(),_r=(function(){function r(){this.decoder=new s0}return r.prototype.getDecoder=function(){return this.decoder},r.prototype.decode=function(e,t){var n,a;if(t!=null&&t.get(le.PURE_BARCODE)!==void 0){var i=r.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(i,t),a=r.NO_POINTS}else{var o=new v0(e.getBlackMatrix()).detect(t);n=this.decoder.decodeBitMatrix(o.getBits(),t),a=o.getPoints()}n.getOther()instanceof yo&&n.getOther().applyMirroredCorrection(a);var s=new je(n.getText(),n.getRawBytes(),void 0,a,B.QR_CODE,void 0),l=n.getByteSegments();l!==null&&s.putMetadata(Pe.BYTE_SEGMENTS,l);var c=n.getECLevel();return c!==null&&s.putMetadata(Pe.ERROR_CORRECTION_LEVEL,c),n.hasStructuredAppend()&&(s.putMetadata(Pe.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),s.putMetadata(Pe.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),s},r.prototype.reset=function(){},r.extractPureBits=function(e){var t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t===null||n===null)throw new O;var a=this.moduleSize(t,e),i=t[1],o=n[1],s=t[0],l=n[0];if(s>=l||i>=o)throw new O;if(o-i!==l-s&&(l=s+(o-i),l>=e.getWidth()))throw new O;var c=Math.round((l-s+1)/a),u=Math.round((o-i+1)/a);if(c<=0||u<=0)throw new O;if(u!==c)throw new O;var f=Math.floor(a/2);i+=f,s+=f;var h=s+Math.floor((c-1)*a)-l;if(h>0){if(h>f)throw new O;s-=h}var p=i+Math.floor((u-1)*a)-o;if(p>0){if(p>f)throw new O;i-=p}for(var x=new st(c,u),v=0;v<u;v++)for(var m=i+Math.floor(v*a),y=0;y<c;y++)e.get(s+Math.floor(y*a),m)&&x.set(y,v);return x},r.moduleSize=function(e,t){for(var n=t.getHeight(),a=t.getWidth(),i=e[0],o=e[1],s=!0,l=0;i<a&&o<n;){if(s!==t.get(i,o)){if(++l===5)break;s=!s}i++,o++}if(i===a||o===n)throw new O;return(i-e[0])/7},r.NO_POINTS=new Array,r})(),g0=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},J=(function(){function r(){}return r.prototype.PDF417Common=function(){},r.getBitCountSum=function(e){return Q.sum(e)},r.toIntArray=function(e){var t,n;if(e==null||!e.length)return r.EMPTY_INT_ARRAY;var a=new Int32Array(e.length),i=0;try{for(var o=g0(e),s=o.next();!s.done;s=o.next()){var l=s.value;a[i++]=l}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return a},r.getCodeword=function(e){var t=Se.binarySearch(r.SYMBOL_TABLE,e&262143);return t<0?-1:(r.CODEWORD_TABLE[t]-1)%r.NUMBER_OF_CODEWORDS},r.NUMBER_OF_CODEWORDS=929,r.MAX_CODEWORDS_IN_BARCODE=r.NUMBER_OF_CODEWORDS-1,r.MIN_ROWS_IN_BARCODE=3,r.MAX_ROWS_IN_BARCODE=90,r.MODULES_IN_CODEWORD=17,r.MODULES_IN_STOP_PATTERN=18,r.BARS_IN_MODULE=8,r.EMPTY_INT_ARRAY=new Int32Array([]),r.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),r.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),r})(),m0=(function(){function r(e,t){this.bits=e,this.points=t}return r.prototype.getBits=function(){return this.bits},r.prototype.getPoints=function(){return this.points},r})(),y0=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},b0=(function(){function r(){}return r.detectMultiple=function(e,t,n){var a=e.getBlackMatrix(),i=r.detect(n,a);return i.length||(a=a.clone(),a.rotate180(),i=r.detect(n,a)),new m0(a,i)},r.detect=function(e,t){for(var n,a,i=new Array,o=0,s=0,l=!1;o<t.getHeight();){var c=r.findVertices(t,o,s);if(c[0]==null&&c[3]==null){if(!l)break;l=!1,s=0;try{for(var u=(n=void 0,y0(i)),f=u.next();!f.done;f=u.next()){var h=f.value;h[1]!=null&&(o=Math.trunc(Math.max(o,h[1].getY()))),h[3]!=null&&(o=Math.max(o,Math.trunc(h[3].getY())))}}catch(p){n={error:p}}finally{try{f&&!f.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}o+=r.ROW_STEP;continue}if(l=!0,i.push(c),!e)break;c[2]!=null?(s=Math.trunc(c[2].getX()),o=Math.trunc(c[2].getY())):(s=Math.trunc(c[4].getX()),o=Math.trunc(c[4].getY()))}return i},r.findVertices=function(e,t,n){var a=e.getHeight(),i=e.getWidth(),o=new Array(8);return r.copyToResult(o,r.findRowsWithPattern(e,a,i,t,n,r.START_PATTERN),r.INDEXES_START_PATTERN),o[4]!=null&&(n=Math.trunc(o[4].getX()),t=Math.trunc(o[4].getY())),r.copyToResult(o,r.findRowsWithPattern(e,a,i,t,n,r.STOP_PATTERN),r.INDEXES_STOP_PATTERN),o},r.copyToResult=function(e,t,n){for(var a=0;a<n.length;a++)e[n[a]]=t[a]},r.findRowsWithPattern=function(e,t,n,a,i,o){for(var s=new Array(4),l=!1,c=new Int32Array(o.length);a<t;a+=r.ROW_STEP){var u=r.findGuardPattern(e,i,a,n,!1,o,c);if(u!=null){for(;a>0;){var f=r.findGuardPattern(e,i,--a,n,!1,o,c);if(f!=null)u=f;else{a++;break}}s[0]=new L(u[0],a),s[1]=new L(u[1],a),l=!0;break}}var h=a+1;if(l){for(var p=0,f=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);h<t;h++){var u=r.findGuardPattern(e,f[0],h,n,!1,o,c);if(u!=null&&Math.abs(f[0]-u[0])<r.MAX_PATTERN_DRIFT&&Math.abs(f[1]-u[1])<r.MAX_PATTERN_DRIFT)f=u,p=0;else{if(p>r.SKIPPED_ROW_COUNT_MAX)break;p++}}h-=p+1,s[2]=new L(f[0],h),s[3]=new L(f[1],h)}return h-a<r.BARCODE_MIN_HEIGHT&&Se.fill(s,null),s},r.findGuardPattern=function(e,t,n,a,i,o,s){Se.fillWithin(s,0,s.length,0);for(var l=t,c=0;e.get(l,n)&&l>0&&c++<r.MAX_PIXEL_DRIFT;)l--;for(var u=l,f=0,h=o.length,p=i;u<a;u++){var x=e.get(u,n);if(x!==p)s[f]++;else{if(f===h-1){if(r.patternMatchVariance(s,o,r.MAX_INDIVIDUAL_VARIANCE)<r.MAX_AVG_VARIANCE)return new Int32Array([l,u]);l+=s[0]+s[1],de.arraycopy(s,2,s,0,f-1),s[f-1]=0,s[f]=0,f--}else f++;s[f]=1,p=!p}}return f===h-1&&r.patternMatchVariance(s,o,r.MAX_INDIVIDUAL_VARIANCE)<r.MAX_AVG_VARIANCE?new Int32Array([l,u-1]):null},r.patternMatchVariance=function(e,t,n){for(var a=e.length,i=0,o=0,s=0;s<a;s++)i+=e[s],o+=t[s];if(i<o)return 1/0;var l=i/o;n*=l;for(var c=0,u=0;u<a;u++){var f=e[u],h=t[u]*l,p=f>h?f-h:h-f;if(p>n)return 1/0;c+=p}return c/i},r.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),r.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),r.MAX_AVG_VARIANCE=.42,r.MAX_INDIVIDUAL_VARIANCE=.8,r.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),r.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),r.MAX_PIXEL_DRIFT=3,r.MAX_PATTERN_DRIFT=5,r.SKIPPED_ROW_COUNT_MAX=25,r.ROW_STEP=5,r.BARCODE_MIN_HEIGHT=10,r})(),w0=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_t=(function(){function r(e,t){if(t.length===0)throw new U;this.field=e;var n=t.length;if(n>1&&t[0]===0){for(var a=1;a<n&&t[a]===0;)a++;a===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-a),de.arraycopy(t,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return r.prototype.getCoefficients=function(){return this.coefficients},r.prototype.getDegree=function(){return this.coefficients.length-1},r.prototype.isZero=function(){return this.coefficients[0]===0},r.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},r.prototype.evaluateAt=function(e){var t,n;if(e===0)return this.getCoefficient(0);if(e===1){var a=0;try{for(var i=w0(this.coefficients),o=i.next();!o.done;o=i.next()){var s=o.value;a=this.field.add(a,s)}}catch(f){t={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return a}for(var l=this.coefficients[0],c=this.coefficients.length,u=1;u<c;u++)l=this.field.add(this.field.multiply(e,l),this.coefficients[u]);return l},r.prototype.add=function(e){if(!this.field.equals(e.field))throw new U("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,n=e.coefficients;if(t.length>n.length){var a=t;t=n,n=a}var i=new Int32Array(n.length),o=n.length-t.length;de.arraycopy(n,0,i,0,o);for(var s=o;s<n.length;s++)i[s]=this.field.add(t[s-o],n[s]);return new r(this.field,i)},r.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new U("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},r.prototype.multiply=function(e){return e instanceof r?this.multiplyOther(e):this.multiplyScalar(e)},r.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new U("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new r(this.field,new Int32Array([0]));for(var t=this.coefficients,n=t.length,a=e.coefficients,i=a.length,o=new Int32Array(n+i-1),s=0;s<n;s++)for(var l=t[s],c=0;c<i;c++)o[s+c]=this.field.add(o[s+c],this.field.multiply(l,a[c]));return new r(this.field,o)},r.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),n=0;n<e;n++)t[n]=this.field.subtract(0,this.coefficients[n]);return new r(this.field,t)},r.prototype.multiplyScalar=function(e){if(e===0)return new r(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,n=new Int32Array(t),a=0;a<t;a++)n[a]=this.field.multiply(this.coefficients[a],e);return new r(this.field,n)},r.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new U;if(t===0)return new r(this.field,new Int32Array([0]));for(var n=this.coefficients.length,a=new Int32Array(n+e),i=0;i<n;i++)a[i]=this.field.multiply(this.coefficients[i],t);return new r(this.field,a)},r.prototype.toString=function(){for(var e=new $,t=this.getDegree();t>=0;t--){var n=this.getCoefficient(t);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(t===0||n!==1)&&e.append(n),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},r})(),_0=(function(){function r(){}return r.prototype.add=function(e,t){return(e+t)%this.modulus},r.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},r.prototype.exp=function(e){return this.expTable[e]},r.prototype.log=function(e){if(e===0)throw new U;return this.logTable[e]},r.prototype.inverse=function(e){if(e===0)throw new fo;return this.expTable[this.modulus-this.logTable[e]-1]},r.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},r.prototype.getSize=function(){return this.modulus},r.prototype.equals=function(e){return e===this},r})(),A0=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),C0=(function(r){A0(e,r);function e(t,n){var a=r.call(this)||this;a.modulus=t,a.expTable=new Int32Array(t),a.logTable=new Int32Array(t);for(var i=1,o=0;o<t;o++)a.expTable[o]=i,i=i*n%t;for(var o=0;o<t-1;o++)a.logTable[a.expTable[o]]=o;return a.zero=new _t(a,new Int32Array([0])),a.one=new _t(a,new Int32Array([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,n){if(t<0)throw new U;if(n===0)return this.zero;var a=new Int32Array(t+1);return a[0]=n,new _t(this,a)},e.PDF417_GF=new e(J.NUMBER_OF_CODEWORDS,3),e})(_0),E0=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},S0=(function(){function r(){this.field=C0.PDF417_GF}return r.prototype.decode=function(e,t,n){for(var a,i,o=new _t(this.field,e),s=new Int32Array(t),l=!1,c=t;c>0;c--){var u=o.evaluateAt(this.field.exp(c));s[t-c]=u,u!==0&&(l=!0)}if(!l)return 0;var f=this.field.getOne();if(n!=null)try{for(var h=E0(n),p=h.next();!p.done;p=h.next()){var x=p.value,v=this.field.exp(e.length-1-x),m=new _t(this.field,new Int32Array([this.field.subtract(0,v),1]));f=f.multiply(m)}}catch(I){a={error:I}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(a)throw a.error}}for(var y=new _t(this.field,s),g=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),y,t),_=g[0],C=g[1],A=this.findErrorLocations(_),E=this.findErrorMagnitudes(C,_,A),c=0;c<A.length;c++){var N=e.length-1-this.field.log(A[c]);if(N<0)throw be.getChecksumInstance();e[N]=this.field.subtract(e[N],E[c])}return A.length},r.prototype.runEuclideanAlgorithm=function(e,t,n){if(e.getDegree()<t.getDegree()){var a=e;e=t,t=a}for(var i=e,o=t,s=this.field.getZero(),l=this.field.getOne();o.getDegree()>=Math.round(n/2);){var c=i,u=s;if(i=o,s=l,i.isZero())throw be.getChecksumInstance();o=c;for(var f=this.field.getZero(),h=i.getCoefficient(i.getDegree()),p=this.field.inverse(h);o.getDegree()>=i.getDegree()&&!o.isZero();){var x=o.getDegree()-i.getDegree(),v=this.field.multiply(o.getCoefficient(o.getDegree()),p);f=f.add(this.field.buildMonomial(x,v)),o=o.subtract(i.multiplyByMonomial(x,v))}l=f.multiply(s).subtract(u).negative()}var m=l.getCoefficient(0);if(m===0)throw be.getChecksumInstance();var y=this.field.inverse(m),g=l.multiply(y),_=o.multiply(y);return[g,_]},r.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),n=new Int32Array(t),a=0,i=1;i<this.field.getSize()&&a<t;i++)e.evaluateAt(i)===0&&(n[a]=this.field.inverse(i),a++);if(a!==t)throw be.getChecksumInstance();return n},r.prototype.findErrorMagnitudes=function(e,t,n){for(var a=t.getDegree(),i=new Int32Array(a),o=1;o<=a;o++)i[a-o]=this.field.multiply(o,t.getCoefficient(o));for(var s=new _t(this.field,i),l=n.length,c=new Int32Array(l),o=0;o<l;o++){var u=this.field.inverse(n[o]),f=this.field.subtract(0,e.evaluateAt(u)),h=this.field.inverse(s.evaluateAt(u));c[o]=this.field.multiply(f,h)}return c},r})(),wn=(function(){function r(e,t,n,a,i){e instanceof r?this.constructor_2(e):this.constructor_1(e,t,n,a,i)}return r.prototype.constructor_1=function(e,t,n,a,i){var o=t==null||n==null,s=a==null||i==null;if(o&&s)throw new O;o?(t=new L(0,a.getY()),n=new L(0,i.getY())):s&&(a=new L(e.getWidth()-1,t.getY()),i=new L(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=t,this.bottomLeft=n,this.topRight=a,this.bottomRight=i,this.minX=Math.trunc(Math.min(t.getX(),n.getX())),this.maxX=Math.trunc(Math.max(a.getX(),i.getX())),this.minY=Math.trunc(Math.min(t.getY(),a.getY())),this.maxY=Math.trunc(Math.max(n.getY(),i.getY()))},r.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},r.merge=function(e,t){return e==null?t:t==null?e:new r(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},r.prototype.addMissingRows=function(e,t,n){var a=this.topLeft,i=this.bottomLeft,o=this.topRight,s=this.bottomRight;if(e>0){var l=n?this.topLeft:this.topRight,c=Math.trunc(l.getY()-e);c<0&&(c=0);var u=new L(l.getX(),c);n?a=u:o=u}if(t>0){var f=n?this.bottomLeft:this.bottomRight,h=Math.trunc(f.getY()+t);h>=this.image.getHeight()&&(h=this.image.getHeight()-1);var p=new L(f.getX(),h);n?i=p:s=p}return new r(this.image,a,i,o,s)},r.prototype.getMinX=function(){return this.minX},r.prototype.getMaxX=function(){return this.maxX},r.prototype.getMinY=function(){return this.minY},r.prototype.getMaxY=function(){return this.maxY},r.prototype.getTopLeft=function(){return this.topLeft},r.prototype.getTopRight=function(){return this.topRight},r.prototype.getBottomLeft=function(){return this.bottomLeft},r.prototype.getBottomRight=function(){return this.bottomRight},r})(),N0=(function(){function r(e,t,n,a){this.columnCount=e,this.errorCorrectionLevel=a,this.rowCountUpperPart=t,this.rowCountLowerPart=n,this.rowCount=t+n}return r.prototype.getColumnCount=function(){return this.columnCount},r.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},r.prototype.getRowCount=function(){return this.rowCount},r.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},r.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},r})(),$n=(function(){function r(){this.buffer=""}return r.form=function(e,t){var n=-1;function a(o,s,l,c,u,f){if(o==="%%")return"%";if(t[++n]!==void 0){o=c?parseInt(c.substr(1)):void 0;var h=u?parseInt(u.substr(1)):void 0,p;switch(f){case"s":p=t[n];break;case"c":p=t[n][0];break;case"f":p=parseFloat(t[n]).toFixed(o);break;case"p":p=parseFloat(t[n]).toPrecision(o);break;case"e":p=parseFloat(t[n]).toExponential(o);break;case"x":p=parseInt(t[n]).toString(h||16);break;case"d":p=parseFloat(parseInt(t[n],h||10).toPrecision(o)).toFixed(0);break}p=typeof p=="object"?JSON.stringify(p):(+p).toString(h);for(var x=parseInt(l),v=l&&l[0]+""=="0"?"0":" ";p.length<x;)p=s!==void 0?p+v:v+p;return p}}var i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,a)},r.prototype.format=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.buffer+=r.form(e,t)},r.prototype.toString=function(){return this.buffer},r})(),I0=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bo=(function(){function r(e){this.boundingBox=new wn(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return r.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var n=1;n<r.MAX_NEARBY_DISTANCE;n++){var a=this.imageRowToCodewordIndex(e)-n;if(a>=0&&(t=this.codewords[a],t!=null)||(a=this.imageRowToCodewordIndex(e)+n,a<this.codewords.length&&(t=this.codewords[a],t!=null)))return t}return null},r.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},r.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},r.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},r.prototype.getBoundingBox=function(){return this.boundingBox},r.prototype.getCodewords=function(){return this.codewords},r.prototype.toString=function(){var e,t,n=new $n,a=0;try{for(var i=I0(this.codewords),o=i.next();!o.done;o=i.next()){var s=o.value;if(s==null){n.format("%3d:    |   %n",a++);continue}n.format("%3d: %3d|%3d%n",a++,s.getRowNumber(),s.getValue())}}catch(l){e={error:l}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n.toString()},r.MAX_NEARBY_DISTANCE=5,r})(),O0=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},k0=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),a,i=[],o;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return i},zt=(function(){function r(){this.values=new Map}return r.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},r.prototype.getValue=function(){var e,t,n=-1,a=new Array,i=function(f,h){var p={getKey:function(){return f},getValue:function(){return h}};p.getValue()>n?(n=p.getValue(),a=[],a.push(p.getKey())):p.getValue()===n&&a.push(p.getKey())};try{for(var o=O0(this.values.entries()),s=o.next();!s.done;s=o.next()){var l=k0(s.value,2),c=l[0],u=l[1];i(c,u)}}catch(f){e={error:f}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return J.toIntArray(a)},r.prototype.getConfidence=function(e){return this.values.get(e)},r})(),T0=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Zr=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Va=(function(r){T0(e,r);function e(t,n){var a=r.call(this,t)||this;return a._isLeft=n,a}return e.prototype.setRowNumbers=function(){var t,n;try{for(var a=Zr(this.getCodewords()),i=a.next();!i.done;i=a.next()){var o=i.value;o?.setRowNumberAsRowIndicatorColumn()}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,t);for(var a=this.getBoundingBox(),i=this._isLeft?a.getTopLeft():a.getTopRight(),o=this._isLeft?a.getBottomLeft():a.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),l=this.imageRowToCodewordIndex(Math.trunc(o.getY())),c=-1,u=1,f=0,h=s;h<l;h++)if(n[h]!=null){var p=n[h],x=p.getRowNumber()-c;if(x===0)f++;else if(x===1)u=Math.max(u,f),f=1,c=p.getRowNumber();else if(x<0||p.getRowNumber()>=t.getRowCount()||x>h)n[h]=null;else{var v=void 0;u>2?v=(u-2)*x:v=x;for(var m=v>=h,y=1;y<=v&&!m;y++)m=n[h-y]!=null;m?n[h]=null:(c=p.getRowNumber(),f=1)}}},e.prototype.getRowHeights=function(){var t,n,a=this.getBarcodeMetadata();if(a==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(a);var i=new Int32Array(a.getRowCount());try{for(var o=Zr(this.getCodewords()),s=o.next();!s.done;s=o.next()){var l=s.value;if(l!=null){var c=l.getRowNumber();if(c>=i.length)continue;i[c]++}}}catch(u){t={error:u}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var n=this.getBoundingBox(),a=this._isLeft?n.getTopLeft():n.getTopRight(),i=this._isLeft?n.getBottomLeft():n.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(a.getY())),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),l=this.getCodewords(),c=-1,u=o;u<s;u++)if(l[u]!=null){var f=l[u];f.setRowNumberAsRowIndicatorColumn();var h=f.getRowNumber()-c;h===0||(h===1?c=f.getRowNumber():f.getRowNumber()>=t.getRowCount()?l[u]=null:c=f.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,n,a=this.getCodewords(),i=new zt,o=new zt,s=new zt,l=new zt;try{for(var c=Zr(a),u=c.next();!u.done;u=c.next()){var f=u.value;if(f!=null){f.setRowNumberAsRowIndicatorColumn();var h=f.getValue()%30,p=f.getRowNumber();switch(this._isLeft||(p+=2),p%3){case 0:o.setValue(h*3+1);break;case 1:l.setValue(h/3),s.setValue(h%3);break;case 2:i.setValue(h+1);break}}}}catch(v){t={error:v}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}if(i.getValue().length===0||o.getValue().length===0||s.getValue().length===0||l.getValue().length===0||i.getValue()[0]<1||o.getValue()[0]+s.getValue()[0]<J.MIN_ROWS_IN_BARCODE||o.getValue()[0]+s.getValue()[0]>J.MAX_ROWS_IN_BARCODE)return null;var x=new N0(i.getValue()[0],o.getValue()[0],s.getValue()[0],l.getValue()[0]);return this.removeIncorrectCodewords(a,x),x},e.prototype.removeIncorrectCodewords=function(t,n){for(var a=0;a<t.length;a++){var i=t[a];if(t[a]!=null){var o=i.getValue()%30,s=i.getRowNumber();if(s>n.getRowCount()){t[a]=null;continue}switch(this._isLeft||(s+=2),s%3){case 0:o*3+1!==n.getRowCountUpperPart()&&(t[a]=null);break;case 1:(Math.trunc(o/3)!==n.getErrorCorrectionLevel()||o%3!==n.getRowCountLowerPart())&&(t[a]=null);break;case 2:o+1!==n.getColumnCount()&&(t[a]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+r.prototype.toString.call(this)},e})(bo),R0=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},D0=(function(){function r(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return r.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=J.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},r.prototype.adjustIndicatorColumnRowNumbers=function(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},r.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var n=this.detectionResultColumns[t].getCodewords(),a=0;a<n.length;a++)n[a]!=null&&(n[a].hasValidRowNumber()||this.adjustRowNumbers(t,a,n));return e},r.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},r.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(e[n]!=null&&t[n]!=null&&e[n].getRowNumber()===t[n].getRowNumber())for(var a=1;a<=this.barcodeColumnCount;a++){var i=this.detectionResultColumns[a].getCodewords()[n];i!=null&&(i.setRowNumber(e[n].getRowNumber()),i.hasValidRowNumber()||(this.detectionResultColumns[a].getCodewords()[n]=null))}}},r.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<t.length;n++)if(t[n]!=null)for(var a=t[n].getRowNumber(),i=0,o=this.barcodeColumnCount+1;o>0&&i<this.ADJUST_ROW_NUMBER_SKIP;o--){var s=this.detectionResultColumns[o].getCodewords()[n];s!=null&&(i=r.adjustRowNumberIfValid(a,i,s),s.hasValidRowNumber()||e++)}return e},r.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),n=0;n<t.length;n++)if(t[n]!=null)for(var a=t[n].getRowNumber(),i=0,o=1;o<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;o++){var s=this.detectionResultColumns[o].getCodewords()[n];s!=null&&(i=r.adjustRowNumberIfValid(a,i,s),s.hasValidRowNumber()||e++)}return e},r.adjustRowNumberIfValid=function(e,t,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),t=0):++t),t},r.prototype.adjustRowNumbers=function(e,t,n){var a,i;if(this.detectionResultColumns[e-1]!=null){var o=n[t],s=this.detectionResultColumns[e-1].getCodewords(),l=s;this.detectionResultColumns[e+1]!=null&&(l=this.detectionResultColumns[e+1].getCodewords());var c=new Array(14);c[2]=s[t],c[3]=l[t],t>0&&(c[0]=n[t-1],c[4]=s[t-1],c[5]=l[t-1]),t>1&&(c[8]=n[t-2],c[10]=s[t-2],c[11]=l[t-2]),t<n.length-1&&(c[1]=n[t+1],c[6]=s[t+1],c[7]=l[t+1]),t<n.length-2&&(c[9]=n[t+2],c[12]=s[t+2],c[13]=l[t+2]);try{for(var u=R0(c),f=u.next();!f.done;f=u.next()){var h=f.value;if(r.adjustRowNumber(o,h))return}}catch(p){a={error:p}}finally{try{f&&!f.done&&(i=u.return)&&i.call(u)}finally{if(a)throw a.error}}}},r.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},r.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},r.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},r.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},r.prototype.setBoundingBox=function(e){this.boundingBox=e},r.prototype.getBoundingBox=function(){return this.boundingBox},r.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},r.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},r.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new $n,n=0;n<e.getCodewords().length;n++){t.format("CW %3d:",n);for(var a=0;a<this.barcodeColumnCount+2;a++){if(this.detectionResultColumns[a]==null){t.format("    |   ");continue}var i=this.detectionResultColumns[a].getCodewords()[n];if(i==null){t.format("    |   ");continue}t.format(" %3d|%3d",i.getRowNumber(),i.getValue())}t.format("%n")}return t.toString()},r})(),P0=(function(){function r(e,t,n,a){this.rowNumber=r.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(n),this.value=Math.trunc(a)}return r.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},r.prototype.isValidRowNumber=function(e){return e!==r.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},r.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},r.prototype.getWidth=function(){return this.endX-this.startX},r.prototype.getStartX=function(){return this.startX},r.prototype.getEndX=function(){return this.endX},r.prototype.getBucket=function(){return this.bucket},r.prototype.getValue=function(){return this.value},r.prototype.getRowNumber=function(){return this.rowNumber},r.prototype.setRowNumber=function(e){this.rowNumber=e},r.prototype.toString=function(){return this.rowNumber+"|"+this.value},r.BARCODE_ROW_UNKNOWN=-1,r})(),M0=(function(){function r(){}return r.initialize=function(){for(var e=0;e<J.SYMBOL_TABLE.length;e++)for(var t=J.SYMBOL_TABLE[e],n=t&1,a=0;a<J.BARS_IN_MODULE;a++){for(var i=0;(t&1)===n;)i+=1,t>>=1;n=t&1,r.RATIOS_TABLE[e]||(r.RATIOS_TABLE[e]=new Array(J.BARS_IN_MODULE)),r.RATIOS_TABLE[e][J.BARS_IN_MODULE-a-1]=Math.fround(i/J.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},r.getDecodedValue=function(e){var t=r.getDecodedCodewordValue(r.sampleBitCounts(e));return t!==-1?t:r.getClosestDecodedValue(e)},r.sampleBitCounts=function(e){for(var t=Q.sum(e),n=new Int32Array(J.BARS_IN_MODULE),a=0,i=0,o=0;o<J.MODULES_IN_CODEWORD;o++){var s=t/(2*J.MODULES_IN_CODEWORD)+o*t/J.MODULES_IN_CODEWORD;i+e[a]<=s&&(i+=e[a],a++),n[a]++}return n},r.getDecodedCodewordValue=function(e){var t=r.getBitValue(e);return J.getCodeword(t)===-1?-1:t},r.getBitValue=function(e){for(var t=0,n=0;n<e.length;n++)for(var a=0;a<e[n];a++)t=t<<1|(n%2===0?1:0);return Math.trunc(t)},r.getClosestDecodedValue=function(e){var t=Q.sum(e),n=new Array(J.BARS_IN_MODULE);if(t>1)for(var a=0;a<n.length;a++)n[a]=Math.fround(e[a]/t);var i=mn.MAX_VALUE,o=-1;this.bSymbolTableReady||r.initialize();for(var s=0;s<r.RATIOS_TABLE.length;s++){for(var l=0,c=r.RATIOS_TABLE[s],u=0;u<J.BARS_IN_MODULE;u++){var f=Math.fround(c[u]-n[u]);if(l+=Math.fround(f*f),l>=i)break}l<i&&(i=l,o=J.SYMBOL_TABLE[s])}return o},r.bSymbolTableReady=!1,r.RATIOS_TABLE=new Array(J.SYMBOL_TABLE.length).map(function(e){return new Array(J.BARS_IN_MODULE)}),r})(),j0=(function(){function r(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return r.prototype.getSegmentIndex=function(){return this.segmentIndex},r.prototype.setSegmentIndex=function(e){this.segmentIndex=e},r.prototype.getFileId=function(){return this.fileId},r.prototype.setFileId=function(e){this.fileId=e},r.prototype.getOptionalData=function(){return this.optionalData},r.prototype.setOptionalData=function(e){this.optionalData=e},r.prototype.isLastSegment=function(){return this.lastSegment},r.prototype.setLastSegment=function(e){this.lastSegment=e},r.prototype.getSegmentCount=function(){return this.segmentCount},r.prototype.setSegmentCount=function(e){this.segmentCount=e},r.prototype.getSender=function(){return this.sender||null},r.prototype.setSender=function(e){this.sender=e},r.prototype.getAddressee=function(){return this.addressee||null},r.prototype.setAddressee=function(e){this.addressee=e},r.prototype.getFileName=function(){return this.fileName},r.prototype.setFileName=function(e){this.fileName=e},r.prototype.getFileSize=function(){return this.fileSize},r.prototype.setFileSize=function(e){this.fileSize=e},r.prototype.getChecksum=function(){return this.checksum},r.prototype.setChecksum=function(e){this.checksum=e},r.prototype.getTimestamp=function(){return this.timestamp},r.prototype.setTimestamp=function(e){this.timestamp=e},r})(),Ga=(function(){function r(){}return r.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},r})(),B0=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),L0=(function(r){B0(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="NullPointerException",e})($e),F0=(function(){function r(){}return r.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},r.prototype.writeBytesOffset=function(e,t,n){if(e==null)throw new L0;if(t<0||t>e.length||n<0||t+n>e.length||t+n<0)throw new Fn;if(n===0)return;for(var a=0;a<n;a++)this.write(e[t+a])},r.prototype.flush=function(){},r.prototype.close=function(){},r})(),U0=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),V0=(function(r){U0(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e})($e),G0=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),$0=(function(r){G0(e,r);function e(t){t===void 0&&(t=32);var n=r.call(this)||this;if(n.count=0,t<0)throw new U("Negative initial size: "+t);return n.buf=new Uint8Array(t),n}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var n=this.buf.length,a=n<<1;if(a-t<0&&(a=t),a<0){if(t<0)throw new V0;a=W.MAX_VALUE}this.buf=Se.copyOfUint8Array(this.buf,a)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,n,a){if(n<0||n>t.length||a<0||n+a-t.length>0)throw new Fn;this.ensureCapacity(this.count+a),de.arraycopy(t,n,this.buf,this.count,a),this.count+=a},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Se.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e})(F0),se;(function(r){r[r.ALPHA=0]="ALPHA",r[r.LOWER=1]="LOWER",r[r.MIXED=2]="MIXED",r[r.PUNCT=3]="PUNCT",r[r.ALPHA_SHIFT=4]="ALPHA_SHIFT",r[r.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(se||(se={}));function wo(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var lr;function xt(r){if(typeof lr>"u"&&(lr=wo()),lr===null)throw new Error("BigInt is not supported!");return lr(r)}function H0(){var r=[];r[0]=xt(1);var e=xt(900);r[1]=e;for(var t=2;t<16;t++)r[t]=r[t-1]*e;return r}var z0=(function(){function r(){}return r.decode=function(e,t){var n=new $(""),a=Ee.ISO8859_1;n.enableDecoding(a);for(var i=1,o=e[i++],s=new j0;i<e[0];){switch(o){case r.TEXT_COMPACTION_MODE_LATCH:i=r.textCompaction(e,i,n);break;case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:i=r.byteCompaction(o,e,a,i,n);break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[i++]);break;case r.NUMERIC_COMPACTION_MODE_LATCH:i=r.numericCompaction(e,i,n);break;case r.ECI_CHARSET:Ee.getCharacterSetECIByValue(e[i++]);break;case r.ECI_GENERAL_PURPOSE:i+=2;break;case r.ECI_USER_DEFINED:i++;break;case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=r.decodeMacroBlock(e,i,s);break;case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:throw new D;default:i--,i=r.textCompaction(e,i,n);break}if(i<e.length)o=e[i++];else throw D.getFormatInstance()}if(n.length()===0)throw D.getFormatInstance();var l=new Br(null,n.toString(),null,t);return l.setOther(s),l},r.decodeMacroBlock=function(e,t,n){if(t+r.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw D.getFormatInstance();for(var a=new Int32Array(r.NUMBER_OF_SEQUENCE_CODEWORDS),i=0;i<r.NUMBER_OF_SEQUENCE_CODEWORDS;i++,t++)a[i]=e[t];n.setSegmentIndex(W.parseInt(r.decodeBase900toBase10(a,r.NUMBER_OF_SEQUENCE_CODEWORDS)));var o=new $;t=r.textCompaction(e,t,o),n.setFileId(o.toString());var s=-1;for(e[t]===r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=t+1);t<e[0];)switch(e[t]){case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case r.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var l=new $;t=r.textCompaction(e,t+1,l),n.setFileName(l.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var c=new $;t=r.textCompaction(e,t+1,c),n.setSender(c.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var u=new $;t=r.textCompaction(e,t+1,u),n.setAddressee(u.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var f=new $;t=r.numericCompaction(e,t+1,f),n.setSegmentCount(W.parseInt(f.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var h=new $;t=r.numericCompaction(e,t+1,h),n.setTimestamp(Ga.parseLong(h.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var p=new $;t=r.numericCompaction(e,t+1,p),n.setChecksum(W.parseInt(p.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var x=new $;t=r.numericCompaction(e,t+1,x),n.setFileSize(Ga.parseLong(x.toString()));break;default:throw D.getFormatInstance()}break;case r.MACRO_PDF417_TERMINATOR:t++,n.setLastSegment(!0);break;default:throw D.getFormatInstance()}if(s!==-1){var v=t-s;n.isLastSegment()&&v--,n.setOptionalData(Se.copyOfRange(e,s,s+v))}return t},r.textCompaction=function(e,t,n){for(var a=new Int32Array((e[0]-t)*2),i=new Int32Array((e[0]-t)*2),o=0,s=!1;t<e[0]&&!s;){var l=e[t++];if(l<r.TEXT_COMPACTION_MODE_LATCH)a[o]=l/30,a[o+1]=l%30,o+=2;else switch(l){case r.TEXT_COMPACTION_MODE_LATCH:a[o++]=r.TEXT_COMPACTION_MODE_LATCH;break;case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:t--,s=!0;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a[o]=r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,l=e[t++],i[o]=l,o++;break}}return r.decodeTextCompaction(a,i,o,n),t},r.decodeTextCompaction=function(e,t,n,a){for(var i=se.ALPHA,o=se.ALPHA,s=0;s<n;){var l=e[s],c="";switch(i){case se.ALPHA:if(l<26)c=String.fromCharCode(65+l);else switch(l){case 26:c=" ";break;case r.LL:i=se.LOWER;break;case r.ML:i=se.MIXED;break;case r.PS:o=i,i=se.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(t[s]);break;case r.TEXT_COMPACTION_MODE_LATCH:i=se.ALPHA;break}break;case se.LOWER:if(l<26)c=String.fromCharCode(97+l);else switch(l){case 26:c=" ";break;case r.AS:o=i,i=se.ALPHA_SHIFT;break;case r.ML:i=se.MIXED;break;case r.PS:o=i,i=se.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(t[s]);break;case r.TEXT_COMPACTION_MODE_LATCH:i=se.ALPHA;break}break;case se.MIXED:if(l<r.PL)c=r.MIXED_CHARS[l];else switch(l){case r.PL:i=se.PUNCT;break;case 26:c=" ";break;case r.LL:i=se.LOWER;break;case r.AL:i=se.ALPHA;break;case r.PS:o=i,i=se.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(t[s]);break;case r.TEXT_COMPACTION_MODE_LATCH:i=se.ALPHA;break}break;case se.PUNCT:if(l<r.PAL)c=r.PUNCT_CHARS[l];else switch(l){case r.PAL:i=se.ALPHA;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(t[s]);break;case r.TEXT_COMPACTION_MODE_LATCH:i=se.ALPHA;break}break;case se.ALPHA_SHIFT:if(i=o,l<26)c=String.fromCharCode(65+l);else switch(l){case 26:c=" ";break;case r.TEXT_COMPACTION_MODE_LATCH:i=se.ALPHA;break}break;case se.PUNCT_SHIFT:if(i=o,l<r.PAL)c=r.PUNCT_CHARS[l];else switch(l){case r.PAL:i=se.ALPHA;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(t[s]);break;case r.TEXT_COMPACTION_MODE_LATCH:i=se.ALPHA;break}break}c!==""&&a.append(c),s++}},r.byteCompaction=function(e,t,n,a,i){var o=new $0,s=0,l=0,c=!1;switch(e){case r.BYTE_COMPACTION_MODE_LATCH:for(var u=new Int32Array(6),f=t[a++];a<t[0]&&!c;)switch(u[s++]=f,l=900*l+f,f=t[a++],f){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:a--,c=!0;break;default:if(s%5===0&&s>0){for(var h=0;h<6;++h)o.write(Number(xt(l)>>xt(8*(5-h))));l=0,s=0}break}a===t[0]&&f<r.TEXT_COMPACTION_MODE_LATCH&&(u[s++]=f);for(var p=0;p<s;p++)o.write(u[p]);break;case r.BYTE_COMPACTION_MODE_LATCH_6:for(;a<t[0]&&!c;){var x=t[a++];if(x<r.TEXT_COMPACTION_MODE_LATCH)s++,l=900*l+x;else switch(x){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:a--,c=!0;break}if(s%5===0&&s>0){for(var h=0;h<6;++h)o.write(Number(xt(l)>>xt(8*(5-h))));l=0,s=0}}break}return i.append(Ke.decode(o.toByteArray(),n)),a},r.numericCompaction=function(e,t,n){for(var a=0,i=!1,o=new Int32Array(r.MAX_NUMERIC_CODEWORDS);t<e[0]&&!i;){var s=e[t++];if(t===e[0]&&(i=!0),s<r.TEXT_COMPACTION_MODE_LATCH)o[a]=s,a++;else switch(s){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:t--,i=!0;break}(a%r.MAX_NUMERIC_CODEWORDS===0||s===r.NUMERIC_COMPACTION_MODE_LATCH||i)&&a>0&&(n.append(r.decodeBase900toBase10(o,a)),a=0)}return t},r.decodeBase900toBase10=function(e,t){for(var n=xt(0),a=0;a<t;a++)n+=r.EXP900[t-a-1]*xt(e[a]);var i=n.toString();if(i.charAt(0)!=="1")throw new D;return i.substring(1)},r.TEXT_COMPACTION_MODE_LATCH=900,r.BYTE_COMPACTION_MODE_LATCH=901,r.NUMERIC_COMPACTION_MODE_LATCH=902,r.BYTE_COMPACTION_MODE_LATCH_6=924,r.ECI_USER_DEFINED=925,r.ECI_GENERAL_PURPOSE=926,r.ECI_CHARSET=927,r.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,r.MACRO_PDF417_TERMINATOR=922,r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,r.MAX_NUMERIC_CODEWORDS=15,r.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,r.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,r.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,r.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,r.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,r.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,r.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,r.PL=25,r.LL=27,r.AS=27,r.ML=28,r.AL=28,r.PS=29,r.PAL=29,r.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,r.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",r.EXP900=wo()?H0():[],r.NUMBER_OF_SEQUENCE_CODEWORDS=2,r})(),Vt=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},W0=(function(){function r(){}return r.decode=function(e,t,n,a,i,o,s){for(var l=new wn(e,t,n,a,i),c=null,u=null,f,h=!0;;h=!1){if(t!=null&&(c=r.getRowIndicatorColumn(e,l,t,!0,o,s)),a!=null&&(u=r.getRowIndicatorColumn(e,l,a,!1,o,s)),f=r.merge(c,u),f==null)throw O.getNotFoundInstance();var p=f.getBoundingBox();if(h&&p!=null&&(p.getMinY()<l.getMinY()||p.getMaxY()>l.getMaxY()))l=p;else break}f.setBoundingBox(l);var x=f.getBarcodeColumnCount()+1;f.setDetectionResultColumn(0,c),f.setDetectionResultColumn(x,u);for(var v=c!=null,m=1;m<=x;m++){var y=v?m:x-m;if(f.getDetectionResultColumn(y)===void 0){var g=void 0;y===0||y===x?g=new Va(l,y===0):g=new bo(l),f.setDetectionResultColumn(y,g);for(var _=-1,C=_,A=l.getMinY();A<=l.getMaxY();A++){if(_=r.getStartColumn(f,y,A,v),_<0||_>l.getMaxX()){if(C===-1)continue;_=C}var E=r.detectCodeword(e,l.getMinX(),l.getMaxX(),v,_,A,o,s);E!=null&&(g.setCodeword(A,E),C=_,o=Math.min(o,E.getWidth()),s=Math.max(s,E.getWidth()))}}}return r.createDecoderResult(f)},r.merge=function(e,t){if(e==null&&t==null)return null;var n=r.getBarcodeMetadata(e,t);if(n==null)return null;var a=wn.merge(r.adjustBoundingBox(e),r.adjustBoundingBox(t));return new D0(n,a)},r.adjustBoundingBox=function(e){var t,n;if(e==null)return null;var a=e.getRowHeights();if(a==null)return null;var i=r.getMax(a),o=0;try{for(var s=Vt(a),l=s.next();!l.done;l=s.next()){var c=l.value;if(o+=i-c,c>0)break}}catch(p){t={error:p}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}for(var u=e.getCodewords(),f=0;o>0&&u[f]==null;f++)o--;for(var h=0,f=a.length-1;f>=0&&(h+=i-a[f],!(a[f]>0));f--);for(var f=u.length-1;h>0&&u[f]==null;f--)h--;return e.getBoundingBox().addMissingRows(o,h,e.isLeft())},r.getMax=function(e){var t,n,a=-1;try{for(var i=Vt(e),o=i.next();!o.done;o=i.next()){var s=o.value;a=Math.max(a,s)}}catch(l){t={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return a},r.getBarcodeMetadata=function(e,t){var n;if(e==null||(n=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var a;return t==null||(a=t.getBarcodeMetadata())==null?n:n.getColumnCount()!==a.getColumnCount()&&n.getErrorCorrectionLevel()!==a.getErrorCorrectionLevel()&&n.getRowCount()!==a.getRowCount()?null:n},r.getRowIndicatorColumn=function(e,t,n,a,i,o){for(var s=new Va(t,a),l=0;l<2;l++)for(var c=l===0?1:-1,u=Math.trunc(Math.trunc(n.getX())),f=Math.trunc(Math.trunc(n.getY()));f<=t.getMaxY()&&f>=t.getMinY();f+=c){var h=r.detectCodeword(e,0,e.getWidth(),a,u,f,i,o);h!=null&&(s.setCodeword(f,h),a?u=h.getStartX():u=h.getEndX())}return s},r.adjustCodewordCount=function(e,t){var n=t[0][1],a=n.getValue(),i=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-r.getNumberOfECCodeWords(e.getBarcodeECLevel());if(a.length===0){if(i<1||i>J.MAX_CODEWORDS_IN_BARCODE)throw O.getNotFoundInstance();n.setValue(i)}else a[0]!==i&&n.setValue(i)},r.createDecoderResult=function(e){var t=r.createBarcodeMatrix(e);r.adjustCodewordCount(e,t);for(var n=new Array,a=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),i=[],o=new Array,s=0;s<e.getBarcodeRowCount();s++)for(var l=0;l<e.getBarcodeColumnCount();l++){var c=t[s][l+1].getValue(),u=s*e.getBarcodeColumnCount()+l;c.length===0?n.push(u):c.length===1?a[u]=c[0]:(o.push(u),i.push(c))}for(var f=new Array(i.length),h=0;h<f.length;h++)f[h]=i[h];return r.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),a,J.toIntArray(n),J.toIntArray(o),f)},r.createDecoderResultFromAmbiguousValues=function(e,t,n,a,i){for(var o=new Int32Array(a.length),s=100;s-- >0;){for(var l=0;l<o.length;l++)t[a[l]]=i[l][o[l]];try{return r.decodeCodewords(t,e,n)}catch(u){var c=u instanceof be;if(!c)throw u}if(o.length===0)throw be.getChecksumInstance();for(var l=0;l<o.length;l++)if(o[l]<i[l].length-1){o[l]++;break}else if(o[l]=0,l===o.length-1)throw be.getChecksumInstance()}throw be.getChecksumInstance()},r.createBarcodeMatrix=function(e){for(var t,n,a,i,o=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),s=0;s<o.length;s++)for(var l=0;l<o[s].length;l++)o[s][l]=new zt;var c=0;try{for(var u=Vt(e.getDetectionResultColumns()),f=u.next();!f.done;f=u.next()){var h=f.value;if(h!=null)try{for(var p=(a=void 0,Vt(h.getCodewords())),x=p.next();!x.done;x=p.next()){var v=x.value;if(v!=null){var m=v.getRowNumber();if(m>=0){if(m>=o.length)continue;o[m][c].setValue(v.getValue())}}}}catch(y){a={error:y}}finally{try{x&&!x.done&&(i=p.return)&&i.call(p)}finally{if(a)throw a.error}}c++}}catch(y){t={error:y}}finally{try{f&&!f.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return o},r.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},r.getStartColumn=function(e,t,n,a){var i,o,s=a?1:-1,l=null;if(r.isValidBarcodeColumn(e,t-s)&&(l=e.getDetectionResultColumn(t-s).getCodeword(n)),l!=null)return a?l.getEndX():l.getStartX();if(l=e.getDetectionResultColumn(t).getCodewordNearby(n),l!=null)return a?l.getStartX():l.getEndX();if(r.isValidBarcodeColumn(e,t-s)&&(l=e.getDetectionResultColumn(t-s).getCodewordNearby(n)),l!=null)return a?l.getEndX():l.getStartX();for(var c=0;r.isValidBarcodeColumn(e,t-s);){t-=s;try{for(var u=(i=void 0,Vt(e.getDetectionResultColumn(t).getCodewords())),f=u.next();!f.done;f=u.next()){var h=f.value;if(h!=null)return(a?h.getEndX():h.getStartX())+s*c*(h.getEndX()-h.getStartX())}}catch(p){i={error:p}}finally{try{f&&!f.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}c++}return a?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},r.detectCodeword=function(e,t,n,a,i,o,s,l){i=r.adjustCodewordStartColumn(e,t,n,a,i,o);var c=r.getModuleBitCount(e,t,n,a,i,o);if(c==null)return null;var u,f=Q.sum(c);if(a)u=i+f;else{for(var h=0;h<c.length/2;h++){var p=c[h];c[h]=c[c.length-1-h],c[c.length-1-h]=p}u=i,i=u-f}if(!r.checkCodewordSkew(f,s,l))return null;var x=M0.getDecodedValue(c),v=J.getCodeword(x);return v===-1?null:new P0(i,u,r.getCodewordBucketNumber(x),v)},r.getModuleBitCount=function(e,t,n,a,i,o){for(var s=i,l=new Int32Array(8),c=0,u=a?1:-1,f=a;(a?s<n:s>=t)&&c<l.length;)e.get(s,o)===f?(l[c]++,s+=u):(c++,f=!f);return c===l.length||s===(a?n:t)&&c===l.length-1?l:null},r.getNumberOfECCodeWords=function(e){return 2<<e},r.adjustCodewordStartColumn=function(e,t,n,a,i,o){for(var s=i,l=a?-1:1,c=0;c<2;c++){for(;(a?s>=t:s<n)&&a===e.get(s,o);){if(Math.abs(i-s)>r.CODEWORD_SKEW_SIZE)return i;s+=l}l=-l,a=!a}return s},r.checkCodewordSkew=function(e,t,n){return t-r.CODEWORD_SKEW_SIZE<=e&&e<=n+r.CODEWORD_SKEW_SIZE},r.decodeCodewords=function(e,t,n){if(e.length===0)throw D.getFormatInstance();var a=1<<t+1,i=r.correctErrors(e,n,a);r.verifyCodewordCount(e,a);var o=z0.decode(e,""+t);return o.setErrorsCorrected(i),o.setErasures(n.length),o},r.correctErrors=function(e,t,n){if(t!=null&&t.length>n/2+r.MAX_ERRORS||n<0||n>r.MAX_EC_CODEWORDS)throw be.getChecksumInstance();return r.errorCorrection.decode(e,n,t)},r.verifyCodewordCount=function(e,t){if(e.length<4)throw D.getFormatInstance();var n=e[0];if(n>e.length)throw D.getFormatInstance();if(n===0)if(t<e.length)e[0]=e.length-t;else throw D.getFormatInstance()},r.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),n=0,a=t.length-1;!((e&1)!==n&&(n=e&1,a--,a<0));)t[a]++,e>>=1;return t},r.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},r.getCodewordBucketNumber_number=function(e){return r.getCodewordBucketNumber(r.getBitCountForCodeword(e))},r.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},r.toString=function(e){for(var t=new $n,n=0;n<e.length;n++){t.format("Row %2d: ",n);for(var a=0;a<e[n].length;a++){var i=e[n][a];i.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",i.getValue()[0],i.getConfidence(i.getValue()[0]))}t.format("%n")}return t.toString()},r.CODEWORD_SKEW_SIZE=2,r.MAX_ERRORS=3,r.MAX_EC_CODEWORDS=512,r.errorCorrection=new S0,r})(),X0=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ar=(function(){function r(){}return r.prototype.decode=function(e,t){t===void 0&&(t=null);var n=r.decode(e,t,!1);if(n==null||n.length===0||n[0]==null)throw O.getNotFoundInstance();return n[0]},r.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return r.decode(e,t,!0)}catch(n){throw n instanceof D||n instanceof be?O.getNotFoundInstance():n}},r.decode=function(e,t,n){var a,i,o=new Array,s=b0.detectMultiple(e,t,n);try{for(var l=X0(s.getPoints()),c=l.next();!c.done;c=l.next()){var u=c.value,f=W0.decode(s.getBits(),u[4],u[5],u[6],u[7],r.getMinCodewordWidth(u),r.getMaxCodewordWidth(u)),h=new je(f.getText(),f.getRawBytes(),void 0,u,B.PDF_417);h.putMetadata(Pe.ERROR_CORRECTION_LEVEL,f.getECLevel());var p=f.getOther();p!=null&&h.putMetadata(Pe.PDF417_EXTRA_METADATA,p),o.push(h)}}catch(x){a={error:x}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(a)throw a.error}}return o.map(function(x){return x})},r.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},r.getMinWidth=function(e,t){return e==null||t==null?W.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},r.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(r.getMaxWidth(e[0],e[4]),r.getMaxWidth(e[6],e[2])*J.MODULES_IN_CODEWORD/J.MODULES_IN_STOP_PATTERN),Math.max(r.getMaxWidth(e[1],e[5]),r.getMaxWidth(e[7],e[3])*J.MODULES_IN_CODEWORD/J.MODULES_IN_STOP_PATTERN)))},r.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(r.getMinWidth(e[0],e[4]),r.getMinWidth(e[6],e[2])*J.MODULES_IN_CODEWORD/J.MODULES_IN_STOP_PATTERN),Math.min(r.getMinWidth(e[1],e[5]),r.getMinWidth(e[7],e[3])*J.MODULES_IN_CODEWORD/J.MODULES_IN_STOP_PATTERN)))},r.prototype.reset=function(){},r})(),Y0=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),$a=(function(r){Y0(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ReaderException",e})($e),Ha=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_o=(function(){function r(){}return r.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},r.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},r.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(le.TRY_HARDER)!==void 0,n=e==null?null:e.get(le.POSSIBLE_FORMATS),a=new Array;if(n!=null){var i=n.some(function(o){return o===B.UPC_A||o===B.UPC_E||o===B.EAN_13||o===B.EAN_8||o===B.CODABAR||o===B.CODE_39||o===B.CODE_93||o===B.CODE_128||o===B.ITF||o===B.RSS_14||o===B.RSS_EXPANDED});i&&!t&&a.push(new Nt(e)),n.includes(B.QR_CODE)&&a.push(new _r),n.includes(B.DATA_MATRIX)&&a.push(new wr),n.includes(B.AZTEC)&&a.push(new yr),n.includes(B.PDF_417)&&a.push(new Ar),i&&t&&a.push(new Nt(e))}a.length===0&&(t||a.push(new Nt(e)),a.push(new _r),a.push(new wr),a.push(new yr),a.push(new Ar),t&&a.push(new Nt(e))),this.readers=a},r.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var n=Ha(this.readers),a=n.next();!a.done;a=n.next()){var i=a.value;i.reset()}}catch(o){e={error:o}}finally{try{a&&!a.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},r.prototype.decodeInternal=function(e){var t,n;if(this.readers===null)throw new $a("No readers where selected, nothing can be read.");try{for(var a=Ha(this.readers),i=a.next();!i.done;i=a.next()){var o=i.value;try{return o.decode(e,this.hints)}catch(s){if(s instanceof $a)continue}}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}throw new O("No MultiFormat Readers were able to detect the code.")},r})(),Z0=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){Z0(e,r);function e(t,n){t===void 0&&(t=null),n===void 0&&(n=500);var a=this,i=new _o;return i.setHints(t),a=r.call(this,i,n)||this,a}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e})(jt);var K0=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){K0(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new Ar,t)||this}return e})(jt);var q0=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){q0(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new _r,t)||this}return e})(jt);var _n;(function(r){r[r.ERROR_CORRECTION=0]="ERROR_CORRECTION",r[r.CHARACTER_SET=1]="CHARACTER_SET",r[r.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",r[r.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",r[r.MIN_SIZE=4]="MIN_SIZE",r[r.MAX_SIZE=5]="MAX_SIZE",r[r.MARGIN=6]="MARGIN",r[r.PDF417_COMPACT=7]="PDF417_COMPACT",r[r.PDF417_COMPACTION=8]="PDF417_COMPACTION",r[r.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",r[r.AZTEC_LAYERS=10]="AZTEC_LAYERS",r[r.QR_VERSION=11]="QR_VERSION",r[r.GS1_FORMAT=12]="GS1_FORMAT",r[r.FORCE_C40=13]="FORCE_C40"})(_n||(_n={}));const cr=_n;var Ao=(function(){function r(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new vt(e,Int32Array.from([1])))}return r.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var n=t[t.length-1],a=this.field,i=t.length;i<=e;i++){var o=n.multiply(new vt(a,Int32Array.from([1,a.exp(i-1+a.getGeneratorBase())])));t.push(o),n=o}return t[e]},r.prototype.encode=function(e,t){if(t===0)throw new U("No error correction bytes");var n=e.length-t;if(n<=0)throw new U("No data bytes provided");var a=this.buildGenerator(t),i=new Int32Array(n);de.arraycopy(e,0,i,0,n);var o=new vt(this.field,i);o=o.multiplyByMonomial(t,1);for(var s=o.divide(a)[1],l=s.getCoefficients(),c=t-l.length,u=0;u<c;u++)e[n+u]=0;de.arraycopy(l,0,e,n+c,l.length)},r})(),Wt=(function(){function r(){}return r.applyMaskPenaltyRule1=function(e){return r.applyMaskPenaltyRule1Internal(e,!0)+r.applyMaskPenaltyRule1Internal(e,!1)},r.applyMaskPenaltyRule2=function(e){for(var t=0,n=e.getArray(),a=e.getWidth(),i=e.getHeight(),o=0;o<i-1;o++)for(var s=n[o],l=0;l<a-1;l++){var c=s[l];c===s[l+1]&&c===n[o+1][l]&&c===n[o+1][l+1]&&t++}return r.N2*t},r.applyMaskPenaltyRule3=function(e){for(var t=0,n=e.getArray(),a=e.getWidth(),i=e.getHeight(),o=0;o<i;o++)for(var s=0;s<a;s++){var l=n[o];s+6<a&&l[s]===1&&l[s+1]===0&&l[s+2]===1&&l[s+3]===1&&l[s+4]===1&&l[s+5]===0&&l[s+6]===1&&(r.isWhiteHorizontal(l,s-4,s)||r.isWhiteHorizontal(l,s+7,s+11))&&t++,o+6<i&&n[o][s]===1&&n[o+1][s]===0&&n[o+2][s]===1&&n[o+3][s]===1&&n[o+4][s]===1&&n[o+5][s]===0&&n[o+6][s]===1&&(r.isWhiteVertical(n,s,o-4,o)||r.isWhiteVertical(n,s,o+7,o+11))&&t++}return t*r.N3},r.isWhiteHorizontal=function(e,t,n){t=Math.max(t,0),n=Math.min(n,e.length);for(var a=t;a<n;a++)if(e[a]===1)return!1;return!0},r.isWhiteVertical=function(e,t,n,a){n=Math.max(n,0),a=Math.min(a,e.length);for(var i=n;i<a;i++)if(e[i][t]===1)return!1;return!0},r.applyMaskPenaltyRule4=function(e){for(var t=0,n=e.getArray(),a=e.getWidth(),i=e.getHeight(),o=0;o<i;o++)for(var s=n[o],l=0;l<a;l++)s[l]===1&&t++;var c=e.getHeight()*e.getWidth(),u=Math.floor(Math.abs(t*2-c)*10/c);return u*r.N4},r.getDataMaskBit=function(e,t,n){var a,i;switch(e){case 0:a=n+t&1;break;case 1:a=n&1;break;case 2:a=t%3;break;case 3:a=(n+t)%3;break;case 4:a=Math.floor(n/2)+Math.floor(t/3)&1;break;case 5:i=n*t,a=(i&1)+i%3;break;case 6:i=n*t,a=(i&1)+i%3&1;break;case 7:i=n*t,a=i%3+(n+t&1)&1;break;default:throw new U("Invalid mask pattern: "+e)}return a===0},r.applyMaskPenaltyRule1Internal=function(e,t){for(var n=0,a=t?e.getHeight():e.getWidth(),i=t?e.getWidth():e.getHeight(),o=e.getArray(),s=0;s<a;s++){for(var l=0,c=-1,u=0;u<i;u++){var f=t?o[s][u]:o[u][s];f===c?l++:(l>=5&&(n+=r.N1+(l-5)),l=1,c=f)}l>=5&&(n+=r.N1+(l-5))}return n},r.N1=3,r.N2=3,r.N3=40,r.N4=10,r})(),J0=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Q0=(function(){function r(e,t){this.width=e,this.height=t;for(var n=new Array(t),a=0;a!==t;a++)n[a]=new Uint8Array(e);this.bytes=n}return r.prototype.getHeight=function(){return this.height},r.prototype.getWidth=function(){return this.width},r.prototype.get=function(e,t){return this.bytes[t][e]},r.prototype.getArray=function(){return this.bytes},r.prototype.setNumber=function(e,t,n){this.bytes[t][e]=n},r.prototype.setBoolean=function(e,t,n){this.bytes[t][e]=n?1:0},r.prototype.clear=function(e){var t,n;try{for(var a=J0(this.bytes),i=a.next();!i.done;i=a.next()){var o=i.value;Se.fill(o,e)}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var n=0,a=this.height;n<a;++n)for(var i=this.bytes[n],o=t.bytes[n],s=0,l=this.width;s<l;++s)if(i[s]!==o[s])return!1;return!0},r.prototype.toString=function(){for(var e=new $,t=0,n=this.height;t<n;++t){for(var a=this.bytes[t],i=0,o=this.width;i<o;++i)switch(a[i]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},r})(),An=(function(){function r(){this.maskPattern=-1}return r.prototype.getMode=function(){return this.mode},r.prototype.getECLevel=function(){return this.ecLevel},r.prototype.getVersion=function(){return this.version},r.prototype.getMaskPattern=function(){return this.maskPattern},r.prototype.getMatrix=function(){return this.matrix},r.prototype.toString=function(){var e=new $;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},r.prototype.setMode=function(e){this.mode=e},r.prototype.setECLevel=function(e){this.ecLevel=e},r.prototype.setVersion=function(e){this.version=e},r.prototype.setMaskPattern=function(e){this.maskPattern=e},r.prototype.setMatrix=function(e){this.matrix=e},r.isValidMaskPattern=function(e){return e>=0&&e<r.NUM_MASK_PATTERNS},r.NUM_MASK_PATTERNS=8,r})(),ed=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),he=(function(r){ed(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="WriterException",e})($e),za=(function(){function r(){}return r.clearMatrix=function(e){e.clear(255)},r.buildMatrix=function(e,t,n,a,i){r.clearMatrix(i),r.embedBasicPatterns(n,i),r.embedTypeInfo(t,a,i),r.maybeEmbedVersionInfo(n,i),r.embedDataBits(e,a,i)},r.embedBasicPatterns=function(e,t){r.embedPositionDetectionPatternsAndSeparators(t),r.embedDarkDotAtLeftBottomCorner(t),r.maybeEmbedPositionAdjustmentPatterns(e,t),r.embedTimingPatterns(t)},r.embedTypeInfo=function(e,t,n){var a=new Te;r.makeTypeInfoBits(e,t,a);for(var i=0,o=a.getSize();i<o;++i){var s=a.get(a.getSize()-1-i),l=r.TYPE_INFO_COORDINATES[i],c=l[0],u=l[1];if(n.setBoolean(c,u,s),i<8){var f=n.getWidth()-i-1,h=8;n.setBoolean(f,h,s)}else{var f=8,h=n.getHeight()-7+(i-8);n.setBoolean(f,h,s)}}},r.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var n=new Te;r.makeVersionInfoBits(e,n);for(var a=17,i=0;i<6;++i)for(var o=0;o<3;++o){var s=n.get(a);a--,t.setBoolean(i,t.getHeight()-11+o,s),t.setBoolean(t.getHeight()-11+o,i,s)}}},r.embedDataBits=function(e,t,n){for(var a=0,i=-1,o=n.getWidth()-1,s=n.getHeight()-1;o>0;){for(o===6&&(o-=1);s>=0&&s<n.getHeight();){for(var l=0;l<2;++l){var c=o-l;if(r.isEmpty(n.get(c,s))){var u=void 0;a<e.getSize()?(u=e.get(a),++a):u=!1,t!==255&&Wt.getDataMaskBit(t,c,s)&&(u=!u),n.setBoolean(c,s,u)}}s+=i}i=-i,s+=i,o-=2}if(a!==e.getSize())throw new he("Not all bits consumed: "+a+"/"+e.getSize())},r.findMSBSet=function(e){return 32-W.numberOfLeadingZeros(e)},r.calculateBCHCode=function(e,t){if(t===0)throw new U("0 polynomial");var n=r.findMSBSet(t);for(e<<=n-1;r.findMSBSet(e)>=n;)e^=t<<r.findMSBSet(e)-n;return e},r.makeTypeInfoBits=function(e,t,n){if(!An.isValidMaskPattern(t))throw new he("Invalid mask pattern");var a=e.getBits()<<3|t;n.appendBits(a,5);var i=r.calculateBCHCode(a,r.TYPE_INFO_POLY);n.appendBits(i,10);var o=new Te;if(o.appendBits(r.TYPE_INFO_MASK_PATTERN,15),n.xor(o),n.getSize()!==15)throw new he("should not happen but we got: "+n.getSize())},r.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var n=r.calculateBCHCode(e.getVersionNumber(),r.VERSION_INFO_POLY);if(t.appendBits(n,12),t.getSize()!==18)throw new he("should not happen but we got: "+t.getSize())},r.isEmpty=function(e){return e===255},r.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var n=(t+1)%2;r.isEmpty(e.get(t,6))&&e.setNumber(t,6,n),r.isEmpty(e.get(6,t))&&e.setNumber(6,t,n)}},r.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new he;e.setNumber(8,e.getHeight()-8,1)},r.embedHorizontalSeparationPattern=function(e,t,n){for(var a=0;a<8;++a){if(!r.isEmpty(n.get(e+a,t)))throw new he;n.setNumber(e+a,t,0)}},r.embedVerticalSeparationPattern=function(e,t,n){for(var a=0;a<7;++a){if(!r.isEmpty(n.get(e,t+a)))throw new he;n.setNumber(e,t+a,0)}},r.embedPositionAdjustmentPattern=function(e,t,n){for(var a=0;a<5;++a)for(var i=r.POSITION_ADJUSTMENT_PATTERN[a],o=0;o<5;++o)n.setNumber(e+o,t+a,i[o])},r.embedPositionDetectionPattern=function(e,t,n){for(var a=0;a<7;++a)for(var i=r.POSITION_DETECTION_PATTERN[a],o=0;o<7;++o)n.setNumber(e+o,t+a,i[o])},r.embedPositionDetectionPatternsAndSeparators=function(e){var t=r.POSITION_DETECTION_PATTERN[0].length;r.embedPositionDetectionPattern(0,0,e),r.embedPositionDetectionPattern(e.getWidth()-t,0,e),r.embedPositionDetectionPattern(0,e.getWidth()-t,e);var n=8;r.embedHorizontalSeparationPattern(0,n-1,e),r.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),r.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);var a=7;r.embedVerticalSeparationPattern(a,0,e),r.embedVerticalSeparationPattern(e.getHeight()-a-1,0,e),r.embedVerticalSeparationPattern(a,e.getHeight()-a,e)},r.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,a=r.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],i=0,o=a.length;i!==o;i++){var s=a[i];if(s>=0)for(var l=0;l!==o;l++){var c=a[l];c>=0&&r.isEmpty(t.get(c,s))&&r.embedPositionAdjustmentPattern(c-2,s-2,t)}}},r.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),r.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),r.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),r.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),r.VERSION_INFO_POLY=7973,r.TYPE_INFO_POLY=1335,r.TYPE_INFO_MASK_PATTERN=21522,r})(),td=(function(){function r(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return r.prototype.getDataBytes=function(){return this.dataBytes},r.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},r})(),Wa=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function r(){}return r.calculateMaskPenalty=function(e){return Wt.applyMaskPenaltyRule1(e)+Wt.applyMaskPenaltyRule2(e)+Wt.applyMaskPenaltyRule3(e)+Wt.applyMaskPenaltyRule4(e)},r.encode=function(e,t,n){n===void 0&&(n=null);var a=r.DEFAULT_BYTE_MODE_ENCODING,i=n!==null&&n.get(cr.CHARACTER_SET)!==void 0;i&&(a=n.get(cr.CHARACTER_SET).toString());var o=this.chooseMode(e,a),s=new Te;if(o===pe.BYTE&&(i||r.DEFAULT_BYTE_MODE_ENCODING!==a)){var l=Ee.getCharacterSetECIByName(a);l!==void 0&&this.appendECI(l,s)}this.appendModeInfo(o,s);var c=new Te;this.appendBytes(e,o,c,a);var u;if(n!==null&&n.get(cr.QR_VERSION)!==void 0){var f=Number.parseInt(n.get(cr.QR_VERSION).toString(),10);u=At.getVersionForNumber(f);var h=this.calculateBitsNeeded(o,s,c,u);if(!this.willFit(h,u,t))throw new he("Data too big for requested version")}else u=this.recommendVersion(t,o,s,c);var p=new Te;p.appendBitArray(s);var x=o===pe.BYTE?c.getSizeInBytes():e.length;this.appendLengthInfo(x,u,o,p),p.appendBitArray(c);var v=u.getECBlocksForLevel(t),m=u.getTotalCodewords()-v.getTotalECCodewords();this.terminateBits(m,p);var y=this.interleaveWithECBytes(p,u.getTotalCodewords(),m,v.getNumBlocks()),g=new An;g.setECLevel(t),g.setMode(o),g.setVersion(u);var _=u.getDimensionForVersion(),C=new Q0(_,_),A=this.chooseMaskPattern(y,t,u,C);return g.setMaskPattern(A),za.buildMatrix(y,t,u,A,C),g.setMatrix(C),g},r.recommendVersion=function(e,t,n,a){var i=this.calculateBitsNeeded(t,n,a,At.getVersionForNumber(1)),o=this.chooseVersion(i,e),s=this.calculateBitsNeeded(t,n,a,o);return this.chooseVersion(s,e)},r.calculateBitsNeeded=function(e,t,n,a){return t.getSize()+e.getCharacterCountBits(a)+n.getSize()},r.getAlphanumericCode=function(e){return e<r.ALPHANUMERIC_TABLE.length?r.ALPHANUMERIC_TABLE[e]:-1},r.chooseMode=function(e,t){if(t===void 0&&(t=null),Ee.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return pe.KANJI;for(var n=!1,a=!1,i=0,o=e.length;i<o;++i){var s=e.charAt(i);if(r.isDigit(s))n=!0;else if(this.getAlphanumericCode(s.charCodeAt(0))!==-1)a=!0;else return pe.BYTE}return a?pe.ALPHANUMERIC:n?pe.NUMERIC:pe.BYTE},r.isOnlyDoubleByteKanji=function(e){var t;try{t=Ke.encode(e,Ee.SJIS)}catch{return!1}var n=t.length;if(n%2!==0)return!1;for(var a=0;a<n;a+=2){var i=t[a]&255;if((i<129||i>159)&&(i<224||i>235))return!1}return!0},r.chooseMaskPattern=function(e,t,n,a){for(var i=Number.MAX_SAFE_INTEGER,o=-1,s=0;s<An.NUM_MASK_PATTERNS;s++){za.buildMatrix(e,t,n,s,a);var l=this.calculateMaskPenalty(a);l<i&&(i=l,o=s)}return o},r.chooseVersion=function(e,t){for(var n=1;n<=40;n++){var a=At.getVersionForNumber(n);if(r.willFit(e,a,t))return a}throw new he("Data too big")},r.willFit=function(e,t,n){var a=t.getTotalCodewords(),i=t.getECBlocksForLevel(n),o=i.getTotalECCodewords(),s=a-o,l=(e+7)/8;return s>=l},r.terminateBits=function(e,t){var n=e*8;if(t.getSize()>n)throw new he("data bits cannot fit in the QR Code"+t.getSize()+" > "+n);for(var a=0;a<4&&t.getSize()<n;++a)t.appendBit(!1);var i=t.getSize()&7;if(i>0)for(var a=i;a<8;a++)t.appendBit(!1);for(var o=e-t.getSizeInBytes(),a=0;a<o;++a)t.appendBits((a&1)===0?236:17,8);if(t.getSize()!==n)throw new he("Bits size does not equal capacity")},r.getNumDataBytesAndNumECBytesForBlockID=function(e,t,n,a,i,o){if(a>=n)throw new he("Block ID too large");var s=e%n,l=n-s,c=Math.floor(e/n),u=c+1,f=Math.floor(t/n),h=f+1,p=c-f,x=u-h;if(p!==x)throw new he("EC bytes mismatch");if(n!==l+s)throw new he("RS blocks mismatch");if(e!==(f+p)*l+(h+x)*s)throw new he("Total bytes mismatch");a<l?(i[0]=f,o[0]=p):(i[0]=h,o[0]=x)},r.interleaveWithECBytes=function(e,t,n,a){var i,o,s,l;if(e.getSizeInBytes()!==n)throw new he("Number of bits and data bytes does not match");for(var c=0,u=0,f=0,h=new Array,p=0;p<a;++p){var x=new Int32Array(1),v=new Int32Array(1);r.getNumDataBytesAndNumECBytesForBlockID(t,n,a,p,x,v);var m=x[0],y=new Uint8Array(m);e.toBytes(8*c,y,0,m);var g=r.generateECBytes(y,v[0]);h.push(new td(y,g)),u=Math.max(u,m),f=Math.max(f,g.length),c+=x[0]}if(n!==c)throw new he("Data bytes does not match offset");for(var _=new Te,p=0;p<u;++p)try{for(var C=(i=void 0,Wa(h)),A=C.next();!A.done;A=C.next()){var E=A.value,y=E.getDataBytes();p<y.length&&_.appendBits(y[p],8)}}catch(R){i={error:R}}finally{try{A&&!A.done&&(o=C.return)&&o.call(C)}finally{if(i)throw i.error}}for(var p=0;p<f;++p)try{for(var N=(s=void 0,Wa(h)),I=N.next();!I.done;I=N.next()){var E=I.value,g=E.getErrorCorrectionBytes();p<g.length&&_.appendBits(g[p],8)}}catch(R){s={error:R}}finally{try{I&&!I.done&&(l=N.return)&&l.call(N)}finally{if(s)throw s.error}}if(t!==_.getSizeInBytes())throw new he("Interleaving error: "+t+" and "+_.getSizeInBytes()+" differ.");return _},r.generateECBytes=function(e,t){for(var n=e.length,a=new Int32Array(n+t),i=0;i<n;i++)a[i]=e[i]&255;new Ao(Ge.QR_CODE_FIELD_256).encode(a,t);for(var o=new Uint8Array(t),i=0;i<t;i++)o[i]=a[n+i];return o},r.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},r.appendLengthInfo=function(e,t,n,a){var i=n.getCharacterCountBits(t);if(e>=1<<i)throw new he(e+" is bigger than "+((1<<i)-1));a.appendBits(e,i)},r.appendBytes=function(e,t,n,a){switch(t){case pe.NUMERIC:r.appendNumericBytes(e,n);break;case pe.ALPHANUMERIC:r.appendAlphanumericBytes(e,n);break;case pe.BYTE:r.append8BitBytes(e,n,a);break;case pe.KANJI:r.appendKanjiBytes(e,n);break;default:throw new he("Invalid mode: "+t)}},r.getDigit=function(e){return e.charCodeAt(0)-48},r.isDigit=function(e){var t=r.getDigit(e);return t>=0&&t<=9},r.appendNumericBytes=function(e,t){for(var n=e.length,a=0;a<n;){var i=r.getDigit(e.charAt(a));if(a+2<n){var o=r.getDigit(e.charAt(a+1)),s=r.getDigit(e.charAt(a+2));t.appendBits(i*100+o*10+s,10),a+=3}else if(a+1<n){var o=r.getDigit(e.charAt(a+1));t.appendBits(i*10+o,7),a+=2}else t.appendBits(i,4),a++}},r.appendAlphanumericBytes=function(e,t){for(var n=e.length,a=0;a<n;){var i=r.getAlphanumericCode(e.charCodeAt(a));if(i===-1)throw new he;if(a+1<n){var o=r.getAlphanumericCode(e.charCodeAt(a+1));if(o===-1)throw new he;t.appendBits(i*45+o,11),a+=2}else t.appendBits(i,6),a++}},r.append8BitBytes=function(e,t,n){var a;try{a=Ke.encode(e,n)}catch(l){throw new he(l)}for(var i=0,o=a.length;i!==o;i++){var s=a[i];t.appendBits(s,8)}},r.appendKanjiBytes=function(e,t){var n;try{n=Ke.encode(e,Ee.SJIS)}catch(f){throw new he(f)}for(var a=n.length,i=0;i<a;i+=2){var o=n[i]&255,s=n[i+1]&255,l=o<<8&4294967295|s,c=-1;if(l>=33088&&l<=40956?c=l-33088:l>=57408&&l<=60351&&(c=l-49472),c===-1)throw new he("Invalid byte sequence");var u=(c>>8)*192+(c&255);t.appendBits(u,13)}},r.appendECI=function(e,t){t.appendBits(pe.ECI.getBits(),4),t.appendBits(e.getValue(),8)},r.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),r.DEFAULT_BYTE_MODE_ENCODING=Ee.UTF8.getName(),r})();var rd=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){rd(e,r);function e(t,n,a,i,o,s,l,c){var u=r.call(this,s,l)||this;if(u.yuvData=t,u.dataWidth=n,u.dataHeight=a,u.left=i,u.top=o,i+s>n||o+l>a)throw new U("Crop rectangle does not fit within image data.");return c&&u.reverseHorizontal(s,l),u}return e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new U("Requested row is outside the image: "+t);var a=this.getWidth();(n==null||n.length<a)&&(n=new Uint8ClampedArray(a));var i=(t+this.top)*this.dataWidth+this.left;return de.arraycopy(this.yuvData,i,n,0,a),n},e.prototype.getMatrix=function(){var t=this.getWidth(),n=this.getHeight();if(t===this.dataWidth&&n===this.dataHeight)return this.yuvData;var a=t*n,i=new Uint8ClampedArray(a),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return de.arraycopy(this.yuvData,o,i,0,a),i;for(var s=0;s<n;s++){var l=s*t;de.arraycopy(this.yuvData,o,i,l,t),o+=this.dataWidth}return i},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,a,i){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+n,a,i,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(t*n),i=this.yuvData,o=this.top*this.dataWidth+this.left,s=0;s<n;s++){for(var l=s*t,c=0;c<t;c++){var u=i[o+c*e.THUMBNAIL_SCALE_FACTOR]&255;a[l+c]=4278190080|u*65793}o+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return a},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,n){for(var a=this.yuvData,i=0,o=this.top*this.dataWidth+this.left;i<n;i++,o+=this.dataWidth)for(var s=o+t/2,l=o,c=o+t-1;l<s;l++,c--){var u=a[l];a[l]=a[c],a[c]=u}},e.prototype.invert=function(){return new jr(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(rr);var nd=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){nd(e,r);function e(t,n,a,i,o,s,l){var c=r.call(this,n,a)||this;if(c.dataWidth=i,c.dataHeight=o,c.left=s,c.top=l,t.BYTES_PER_ELEMENT===4){for(var u=n*a,f=new Uint8ClampedArray(u),h=0;h<u;h++){var p=t[h],x=p>>16&255,v=p>>7&510,m=p&255;f[h]=(x+v+m)/4&255}c.luminances=f}else c.luminances=t;if(i===void 0&&(c.dataWidth=n),o===void 0&&(c.dataHeight=a),s===void 0&&(c.left=0),l===void 0&&(c.top=0),c.left+n>c.dataWidth||c.top+a>c.dataHeight)throw new U("Crop rectangle does not fit within image data.");return c}return e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new U("Requested row is outside the image: "+t);var a=this.getWidth();(n==null||n.length<a)&&(n=new Uint8ClampedArray(a));var i=(t+this.top)*this.dataWidth+this.left;return de.arraycopy(this.luminances,i,n,0,a),n},e.prototype.getMatrix=function(){var t=this.getWidth(),n=this.getHeight();if(t===this.dataWidth&&n===this.dataHeight)return this.luminances;var a=t*n,i=new Uint8ClampedArray(a),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return de.arraycopy(this.luminances,o,i,0,a),i;for(var s=0;s<n;s++){var l=s*t;de.arraycopy(this.luminances,o,i,l,t),o+=this.dataWidth}return i},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,a,i){return new e(this.luminances,a,i,this.dataWidth,this.dataHeight,this.left+t,this.top+n)},e.prototype.invert=function(){return new jr(this)},e})(rr);var ad=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),id=(function(r){ad(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e})(Ee),od=(function(){function r(){}return r.ISO_8859_1=Ee.ISO8859_1,r})(),Cn,sd=301,ld=function(r,e){for(var t=1,n=0;n<255;n++)e[n]=t,r[t]=n,t*=2,t>=256&&(t^=sd);return{LOG:r,ALOG:e}};Cn=ld([],[]),Cn.LOG;Cn.ALOG;var Xa;(function(r){r[r.FORCE_NONE=0]="FORCE_NONE",r[r.FORCE_SQUARE=1]="FORCE_SQUARE",r[r.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(Xa||(Xa={}));var Ya=129,Co=230,cd=231,ud=235,dd=236,fd=237,hd=238,pd=239,xd=240,Kr=254,vd=254,Za="[)>05",Ka="[)>06",qa="",ie=0,De=1,Fe=2,Ae=3,ke=4,Me=5,gd=(function(){function r(){}return r.prototype.getEncodingMode=function(){return ie},r.prototype.encode=function(e){var t=tt.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var n=e.getCurrentChar(),a=tt.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode())switch(a){case Me:e.writeCodeword(cd),e.signalEncoderChange(Me);return;case De:e.writeCodeword(Co),e.signalEncoderChange(De);return;case Ae:e.writeCodeword(hd),e.signalEncoderChange(Ae);break;case Fe:e.writeCodeword(pd),e.signalEncoderChange(Fe);break;case ke:e.writeCodeword(xd),e.signalEncoderChange(ke);break;default:throw new Error("Illegal mode: "+a)}else tt.isExtendedASCII(n)?(e.writeCodeword(ud),e.writeCodeword(n-128+1),e.pos++):(e.writeCodeword(n+1),e.pos++)}},r.prototype.encodeASCIIDigits=function(e,t){if(tt.isDigit(e)&&tt.isDigit(t)){var n=(e-48)*10+(t-48);return n+130}throw new Error("not digits: "+e+t)},r})(),md=(function(){function r(){}return r.prototype.getEncodingMode=function(){return Me},r.prototype.encode=function(e){var t=new $;for(t.append(0);e.hasMoreCharacters();){var n=e.getCurrentChar();t.append(n),e.pos++;var a=tt.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){e.signalEncoderChange(ie);break}}var i=t.length()-1,o=1,s=e.getCodewordCount()+i+o;e.updateSymbolInfo(s);var l=e.getSymbolInfo().getDataCapacity()-s>0;if(e.hasMoreCharacters()||l)if(i<=249)t.setCharAt(0,K.getCharAt(i));else if(i<=1555)t.setCharAt(0,K.getCharAt(Math.floor(i/250)+249)),t.insert(1,K.getCharAt(i%250));else throw new Error("Message length not in valid ranges: "+i);for(var c=0,n=t.length();c<n;c++)e.writeCodeword(this.randomize255State(t.charAt(c).charCodeAt(0),e.getCodewordCount()+1))},r.prototype.randomize255State=function(e,t){var n=149*t%255+1,a=e+n;return a<=255?a:a-256},r})(),Hn=(function(){function r(){}return r.prototype.getEncodingMode=function(){return De},r.prototype.encodeMaximal=function(e){for(var t=new $,n=0,a=e.pos,i=0;e.hasMoreCharacters();){var o=e.getCurrentChar();e.pos++,n=this.encodeChar(o,t),t.length()%3===0&&(a=e.pos,i=t.length())}if(i!==t.length()){var s=Math.floor(t.length()/3*2),l=Math.floor(e.getCodewordCount()+s+1);e.updateSymbolInfo(l);var c=e.getSymbolInfo().getDataCapacity()-l,u=Math.floor(t.length()%3);(u===2&&c!==2||u===1&&(n>3||c!==1))&&(e.pos=a)}t.length()>0&&e.writeCodeword(Co),this.handleEOD(e,t)},r.prototype.encode=function(e){for(var t=new $;e.hasMoreCharacters();){var n=e.getCurrentChar();e.pos++;var a=this.encodeChar(n,t),i=Math.floor(t.length()/3)*2,o=e.getCodewordCount()+i;e.updateSymbolInfo(o);var s=e.getSymbolInfo().getDataCapacity()-o;if(!e.hasMoreCharacters()){var l=new $;for(t.length()%3===2&&s!==2&&(a=this.backtrackOneCharacter(e,t,l,a));t.length()%3===1&&(a>3||s!==1);)a=this.backtrackOneCharacter(e,t,l,a);break}var c=t.length();if(c%3===0){var u=tt.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(u!==this.getEncodingMode()){e.signalEncoderChange(ie);break}}}this.handleEOD(e,t)},r.prototype.backtrackOneCharacter=function(e,t,n,a){var i=t.length(),o=t.toString().substring(0,i-a);t.setLengthToZero(),t.append(o),e.pos--;var s=e.getCurrentChar();return a=this.encodeChar(s,n),e.resetSymbolInfo(),a},r.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var n=t.toString().substring(3);t.setLengthToZero(),t.append(n)},r.prototype.handleEOD=function(e,t){var n=Math.floor(t.length()/3*2),a=t.length()%3,i=e.getCodewordCount()+n;e.updateSymbolInfo(i);var o=e.getSymbolInfo().getDataCapacity()-i;if(a===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(Kr)}else if(o===1&&a===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(Kr),e.pos--}else if(a===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(o>0||e.hasMoreCharacters())&&e.writeCodeword(Kr)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(ie)},r.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var n=2;return n+=this.encodeChar(e-128,t),n},r.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,n=t/256,a=t%256,i=new $;return i.append(n),i.append(a),i.toString()},r})(),yd=(function(){function r(){}return r.prototype.getEncodingMode=function(){return ke},r.prototype.encode=function(e){for(var t=new $;e.hasMoreCharacters();){var n=e.getCurrentChar();this.encodeChar(n,t),e.pos++;var a=t.length();if(a>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var i=t.toString().substring(4);t.setLengthToZero(),t.append(i);var o=tt.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){e.signalEncoderChange(ie);break}}}t.append(K.getCharAt(31)),this.handleEOD(e,t)},r.prototype.handleEOD=function(e,t){try{var n=t.length();if(n===0)return;if(n===1){e.updateSymbolInfo();var a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),i=e.getRemainingCharacters();if(i>a&&(e.updateSymbolInfo(e.getCodewordCount()+1),a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),i<=a&&a<=2)return}if(n>4)throw new Error("Count must not exceed 4");var o=n-1,s=this.encodeToCodewords(t.toString()),l=!e.hasMoreCharacters(),c=l&&o<=2;if(o<=2){e.updateSymbolInfo(e.getCodewordCount()+o);var a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();a>=3&&(c=!1,e.updateSymbolInfo(e.getCodewordCount()+s.length))}c?(e.resetSymbolInfo(),e.pos-=o):e.writeCodewords(s)}finally{e.signalEncoderChange(ie)}},r.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(K.getCharAt(e-64)):tt.illegalCharacter(K.getCharAt(e))},r.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var n=e.charAt(0).charCodeAt(0),a=t>=2?e.charAt(1).charCodeAt(0):0,i=t>=3?e.charAt(2).charCodeAt(0):0,o=t>=4?e.charAt(3).charCodeAt(0):0,s=(n<<18)+(a<<12)+(i<<6)+o,l=s>>16&255,c=s>>8&255,u=s&255,f=new $;return f.append(l),t>=2&&f.append(c),t>=3&&f.append(u),f.toString()},r})(),bd=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),wd=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},re=(function(){function r(e,t,n,a,i,o,s,l){s===void 0&&(s=0),l===void 0&&(l=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=n,this.matrixWidth=a,this.matrixHeight=i,this.dataRegions=o,this.rsBlockData=s,this.rsBlockError=l}return r.lookup=function(e,t,n,a,i){var o,s;t===void 0&&(t=0),n===void 0&&(n=null),a===void 0&&(a=null),i===void 0&&(i=!0);try{for(var l=wd(Ad),c=l.next();!c.done;c=l.next()){var u=c.value;if(!(t===1&&u.rectangular)&&!(t===2&&!u.rectangular)&&!(n!=null&&(u.getSymbolWidth()<n.getWidth()||u.getSymbolHeight()<n.getHeight()))&&!(a!=null&&(u.getSymbolWidth()>a.getWidth()||u.getSymbolHeight()>a.getHeight()))&&e<=u.dataCapacity)return u}}catch(f){o={error:f}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(o)throw o.error}}if(i)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},r.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},r.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},r.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},r.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},r.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},r.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},r.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},r.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},r.prototype.getDataCapacity=function(){return this.dataCapacity},r.prototype.getErrorCodewords=function(){return this.errorCodewords},r.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},r.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},r})(),_d=(function(r){bd(e,r);function e(){return r.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e})(re),Ad=[new re(!1,3,5,8,8,1),new re(!1,5,7,10,10,1),new re(!0,5,7,16,6,1),new re(!1,8,10,12,12,1),new re(!0,10,11,14,6,2),new re(!1,12,12,14,14,1),new re(!0,16,14,24,10,1),new re(!1,18,14,16,16,1),new re(!1,22,18,18,18,1),new re(!0,22,18,16,10,2),new re(!1,30,20,20,20,1),new re(!0,32,24,16,14,2),new re(!1,36,24,22,22,1),new re(!1,44,28,24,24,1),new re(!0,49,28,22,14,2),new re(!1,62,36,14,14,4),new re(!1,86,42,16,16,4),new re(!1,114,48,18,18,4),new re(!1,144,56,20,20,4),new re(!1,174,68,22,22,4),new re(!1,204,84,24,24,4,102,42),new re(!1,280,112,14,14,16,140,56),new re(!1,368,144,16,16,16,92,36),new re(!1,456,192,18,18,16,114,48),new re(!1,576,224,20,20,16,144,56),new re(!1,696,272,22,22,16,174,68),new re(!1,816,336,24,24,16,136,56),new re(!1,1050,408,18,18,36,175,68),new re(!1,1304,496,20,20,36,163,62),new _d],Cd=(function(){function r(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(s){return s.charCodeAt(0)}),n=new $,a=0,i=t.length;a<i;a++){var o=String.fromCharCode(t[a]&255);if(o==="?"&&e.charAt(a)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(o)}this.msg=n.toString(),this.shape=0,this.codewords=new $,this.newEncoding=-1}return r.prototype.setSymbolShape=function(e){this.shape=e},r.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},r.prototype.getMessage=function(){return this.msg},r.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},r.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},r.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},r.prototype.getCodewords=function(){return this.codewords},r.prototype.writeCodewords=function(e){this.codewords.append(e)},r.prototype.writeCodeword=function(e){this.codewords.append(e)},r.prototype.getCodewordCount=function(){return this.codewords.length()},r.prototype.getNewEncoding=function(){return this.newEncoding},r.prototype.signalEncoderChange=function(e){this.newEncoding=e},r.prototype.resetEncoderSignal=function(){this.newEncoding=-1},r.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},r.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},r.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},r.prototype.getSymbolInfo=function(){return this.symbolInfo},r.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=re.lookup(e,this.shape,this.minSize,this.maxSize,!0))},r.prototype.resetSymbolInfo=function(){this.symbolInfo=null},r})(),Ed=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Sd=(function(r){Ed(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Ae},e.prototype.encode=function(t){for(var n=new $;t.hasMoreCharacters();){var a=t.getCurrentChar();t.pos++,this.encodeChar(a,n);var i=n.length();if(i%3===0){this.writeNextTriplet(t,n);var o=tt.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){t.signalEncoderChange(ie);break}}}this.handleEOD(t,n)},e.prototype.encodeChar=function(t,n){switch(t){case 13:n.append(0);break;case 42:n.append(1);break;case 62:n.append(2);break;case 32:n.append(3);break;default:t>=48&&t<=57?n.append(t-48+4):t>=65&&t<=90?n.append(t-65+14):tt.illegalCharacter(K.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,n){t.updateSymbolInfo();var a=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),i=n.length();t.pos-=i,(t.getRemainingCharacters()>1||a>1||t.getRemainingCharacters()!==a)&&t.writeCodeword(vd),t.getNewEncoding()<0&&t.signalEncoderChange(ie)},e})(Hn),Nd=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Id=(function(r){Nd(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Fe},e.prototype.encodeChar=function(t,n){if(t===32)return n.append(3),1;if(t>=48&&t<=57)return n.append(t-48+4),1;if(t>=97&&t<=122)return n.append(t-97+14),1;if(t<32)return n.append(0),n.append(t),2;if(t<=47)return n.append(1),n.append(t-33),2;if(t<=64)return n.append(1),n.append(t-58+15),2;if(t>=91&&t<=95)return n.append(1),n.append(t-91+22),2;if(t===96)return n.append(2),n.append(0),2;if(t<=90)return n.append(2),n.append(t-65+1),2;if(t<=127)return n.append(2),n.append(t-123+27),2;n.append("1");var a=2;return a+=this.encodeChar(t-128,n),a},e})(Hn),tt=(function(){function r(){}return r.randomize253State=function(e){var t=149*e%253+1,n=Ya+t;return n<=254?n:n-254},r.encodeHighLevel=function(e,t,n,a,i){t===void 0&&(t=0),n===void 0&&(n=null),a===void 0&&(a=null),i===void 0&&(i=!1);var o=new Hn,s=[new gd,o,new Id,new Sd,new yd,new md],l=new Cd(e);l.setSymbolShape(t),l.setSizeConstraints(n,a),e.startsWith(Za)&&e.endsWith(qa)?(l.writeCodeword(dd),l.setSkipAtEnd(2),l.pos+=Za.length):e.startsWith(Ka)&&e.endsWith(qa)&&(l.writeCodeword(fd),l.setSkipAtEnd(2),l.pos+=Ka.length);var c=ie;for(i&&(o.encodeMaximal(l),c=l.getNewEncoding(),l.resetEncoderSignal());l.hasMoreCharacters();)s[c].encode(l),l.getNewEncoding()>=0&&(c=l.getNewEncoding(),l.resetEncoderSignal());var u=l.getCodewordCount();l.updateSymbolInfo();var f=l.getSymbolInfo().getDataCapacity();u<f&&c!==ie&&c!==Me&&c!==ke&&l.writeCodeword("þ");var h=l.getCodewords();for(h.length()<f&&h.append(Ya);h.length()<f;)h.append(this.randomize253State(h.length()+1));return l.getCodewords().toString()},r.lookAheadTest=function(e,t,n){var a=this.lookAheadTestIntern(e,t,n);if(n===Ae&&a===Ae){for(var i=Math.min(t+3,e.length),o=t;o<i;o++)if(!this.isNativeX12(e.charCodeAt(o)))return ie}else if(n===ke&&a===ke){for(var i=Math.min(t+4,e.length),o=t;o<i;o++)if(!this.isNativeEDIFACT(e.charCodeAt(o)))return ie}return a},r.lookAheadTestIntern=function(e,t,n){if(t>=e.length)return n;var a;n===ie?a=[0,1,1,1,1,1.25]:(a=[1,2,2,2,2,2.25],a[n]=0);for(var i=0,o=new Uint8Array(6),s=[];;){if(t+i===e.length){Se.fill(o,0),Se.fill(s,0);var l=this.findMinimums(a,s,W.MAX_VALUE,o),c=this.getMinimumCount(o);if(s[ie]===l)return ie;if(c===1){if(o[Me]>0)return Me;if(o[ke]>0)return ke;if(o[Fe]>0)return Fe;if(o[Ae]>0)return Ae}return De}var u=e.charCodeAt(t+i);if(i++,this.isDigit(u)?a[ie]+=.5:this.isExtendedASCII(u)?(a[ie]=Math.ceil(a[ie]),a[ie]+=2):(a[ie]=Math.ceil(a[ie]),a[ie]++),this.isNativeC40(u)?a[De]+=2/3:this.isExtendedASCII(u)?a[De]+=8/3:a[De]+=4/3,this.isNativeText(u)?a[Fe]+=2/3:this.isExtendedASCII(u)?a[Fe]+=8/3:a[Fe]+=4/3,this.isNativeX12(u)?a[Ae]+=2/3:this.isExtendedASCII(u)?a[Ae]+=13/3:a[Ae]+=10/3,this.isNativeEDIFACT(u)?a[ke]+=3/4:this.isExtendedASCII(u)?a[ke]+=17/4:a[ke]+=13/4,this.isSpecialB256(u)?a[Me]+=4:a[Me]++,i>=4){if(Se.fill(o,0),Se.fill(s,0),this.findMinimums(a,s,W.MAX_VALUE,o),s[ie]<this.min(s[Me],s[De],s[Fe],s[Ae],s[ke]))return ie;if(s[Me]<s[ie]||s[Me]+1<this.min(s[De],s[Fe],s[Ae],s[ke]))return Me;if(s[ke]+1<this.min(s[Me],s[De],s[Fe],s[Ae],s[ie]))return ke;if(s[Fe]+1<this.min(s[Me],s[De],s[ke],s[Ae],s[ie]))return Fe;if(s[Ae]+1<this.min(s[Me],s[De],s[ke],s[Fe],s[ie]))return Ae;if(s[De]+1<this.min(s[ie],s[Me],s[ke],s[Fe])){if(s[De]<s[Ae])return De;if(s[De]===s[Ae]){for(var f=t+i+1;f<e.length;){var h=e.charCodeAt(f);if(this.isX12TermSep(h))return Ae;if(!this.isNativeX12(h))break;f++}return De}}}}},r.min=function(e,t,n,a,i){var o=Math.min(e,Math.min(t,Math.min(n,a)));return i===void 0?o:Math.min(o,i)},r.findMinimums=function(e,t,n,a){for(var i=0;i<6;i++){var o=t[i]=Math.ceil(e[i]);n>o&&(n=o,Se.fill(a,0)),n===o&&(a[i]=a[i]+1)}return n},r.getMinimumCount=function(e){for(var t=0,n=0;n<6;n++)t+=e[n];return t||0},r.isDigit=function(e){return e>=48&&e<=57},r.isExtendedASCII=function(e){return e>=128&&e<=255},r.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},r.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},r.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},r.isX12TermSep=function(e){return e===13||e===42||e===62},r.isNativeEDIFACT=function(e){return e>=32&&e<=94},r.isSpecialB256=function(e){return!1},r.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var n=e.length,a=t;a<n&&this.isDigit(e.charCodeAt(a));)a++;return a-t},r.illegalCharacter=function(e){var t=W.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},r})(),qr=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ja=(function(){function r(e){this.charset=e,this.name=e.name}return r.prototype.canEncode=function(e){try{return Ke.encode(e,this.charset)!=null}catch{return!1}},r})(),Od=(function(){function r(e,t,n){var a,i,o,s,l,c;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(k){return new Ja(id.forName(k))}),this.encoders=[];var u=[];u.push(new Ja(od.ISO_8859_1));for(var f=t!=null&&t.name.startsWith("UTF"),h=0;h<e.length;h++){var p=!1;try{for(var x=(a=void 0,qr(u)),v=x.next();!v.done;v=x.next()){var m=v.value,y=e.charAt(h),g=y.charCodeAt(0);if(g===n||m.canEncode(y)){p=!0;break}}}catch(k){a={error:k}}finally{try{v&&!v.done&&(i=x.return)&&i.call(x)}finally{if(a)throw a.error}}if(!p)try{for(var _=(o=void 0,qr(this.ENCODERS)),C=_.next();!C.done;C=_.next()){var m=C.value;if(m.canEncode(e.charAt(h))){u.push(m),p=!0;break}}}catch(k){o={error:k}}finally{try{C&&!C.done&&(s=_.return)&&s.call(_)}finally{if(o)throw o.error}}p||(f=!0)}if(u.length===1&&!f)this.encoders=[u[0]];else{this.encoders=[];var A=0;try{for(var E=qr(u),N=E.next();!N.done;N=E.next()){var m=N.value;this.encoders[A++]=m}}catch(k){l={error:k}}finally{try{N&&!N.done&&(c=E.return)&&c.call(E)}finally{if(l)throw l.error}}}var I=-1;if(t!=null){for(var h=0;h<this.encoders.length;h++)if(this.encoders[h]!=null&&t.name===this.encoders[h].name){I=h;break}}this.priorityEncoderIndex=I}return r.prototype.length=function(){return this.encoders.length},r.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},r.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},r.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},r.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},r.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},r.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return Ke.encode(K.getCharAt(e),this.encoders[t].name)},r})(),kd=3,Td=(function(){function r(e,t,n){this.fnc1=n;var a=new Od(e,t,n);if(a.length()===1)for(var i=0;i<this.bytes.length;i++){var o=e.charAt(i).charCodeAt(0);this.bytes[i]=o===n?1e3:o}else this.bytes=this.encodeMinimally(e,a,n)}return r.prototype.getFNC1Character=function(){return this.fnc1},r.prototype.length=function(){return this.bytes.length},r.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var n=0;n<t;n++)if(this.isECI(e+n))return!1;return!0},r.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},r.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var n=new $,a=e;a<t;a++){if(this.isECI(a))throw new Error("value at "+a+" is not a character but an ECI");n.append(this.charAt(a))}return n.toString()},r.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},r.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},r.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},r.prototype.addEdge=function(e,t,n){(e[t][n.encoderIndex]==null||e[t][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(e[t][n.encoderIndex]=n)},r.prototype.addEdges=function(e,t,n,a,i,o){var s=e.charAt(a).charCodeAt(0),l=0,c=t.length();t.getPriorityEncoderIndex()>=0&&(s===o||t.canEncode(s,t.getPriorityEncoderIndex()))&&(l=t.getPriorityEncoderIndex(),c=l+1);for(var u=l;u<c;u++)(s===o||t.canEncode(s,u))&&this.addEdge(n,a+1,new Qa(s,t,u,i,o))},r.prototype.encodeMinimally=function(e,t,n){var a=e.length,i=new Qa[a+1][t.length()];this.addEdges(e,t,i,0,null,n);for(var o=1;o<=a;o++){for(var s=0;s<t.length();s++)i[o][s]!=null&&o<a&&this.addEdges(e,t,i,o,i[o][s],n);for(var s=0;s<t.length();s++)i[o-1][s]=null}for(var l=-1,c=W.MAX_VALUE,s=0;s<t.length();s++)if(i[a][s]!=null){var u=i[a][s];u.cachedTotalSize<c&&(c=u.cachedTotalSize,l=s)}if(l<0)throw new Error('Failed to encode "'+e+'"');for(var f=[],h=i[a][l];h!=null;){if(h.isFNC1())f.unshift(1e3);else for(var p=t.encode(h.c,h.encoderIndex),o=p.length-1;o>=0;o--)f.unshift(p[o]&255);var x=h.previous===null?0:h.previous.encoderIndex;x!==h.encoderIndex&&f.unshift(256+t.getECIValue(h.encoderIndex)),h=h.previous}for(var v=[],o=0;o<v.length;o++)v[o]=f[o];return v},r})(),Qa=(function(){function r(e,t,n,a,i){this.c=e,this.encoderSet=t,this.encoderIndex=n,this.previous=a,this.fnc1=i,this.c=e===i?1e3:e;var o=this.isFNC1()?1:t.encode(e,n).length,s=a===null?0:a.encoderIndex;s!==n&&(o+=kd),a!=null&&(o+=a.cachedTotalSize),this.cachedTotalSize=o}return r.prototype.isFNC1=function(){return this.c===1e3},r})(),Rd=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();var ei;(function(r){r[r.ASCII=0]="ASCII",r[r.C40=1]="C40",r[r.TEXT=2]="TEXT",r[r.X12=3]="X12",r[r.EDF=4]="EDF",r[r.B256=5]="B256"})(ei||(ei={}));(function(r){Rd(e,r);function e(t,n,a,i,o){var s=r.call(this,t,n,a)||this;return s.shape=i,s.macroId=o,s}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(Td);var Dd=(function(){function r(){}return r.prototype.isCompact=function(){return this.compact},r.prototype.setCompact=function(e){this.compact=e},r.prototype.getSize=function(){return this.size},r.prototype.setSize=function(e){this.size=e},r.prototype.getLayers=function(){return this.layers},r.prototype.setLayers=function(e){this.layers=e},r.prototype.getCodeWords=function(){return this.codeWords},r.prototype.setCodeWords=function(e){this.codeWords=e},r.prototype.getMatrix=function(){return this.matrix},r.prototype.setMatrix=function(e){this.matrix=e},r})(),ti=(function(){function r(){}return r.singletonList=function(e){return[e]},r.min=function(e,t){return e.sort(t)[0]},r})(),Pd=(function(){function r(e){this.previous=e}return r.prototype.getPrevious=function(){return this.previous},r})(),Md=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),zn=(function(r){Md(e,r);function e(t,n,a){var i=r.call(this,t)||this;return i.value=n,i.bitCount=a,i}return e.prototype.appendTo=function(t,n){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,n){return new e(this,t,n)},e.prototype.addBinaryShift=function(t,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,n)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+W.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e})(Pd),jd=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Bd=(function(r){jd(e,r);function e(t,n,a){var i=r.call(this,t,0,0)||this;return i.binaryShiftStart=n,i.binaryShiftByteCount=a,i}return e.prototype.appendTo=function(t,n){for(var a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):a===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(n[this.binaryShiftStart+a],8)},e.prototype.addBinaryShift=function(t,n){return new e(this,t,n)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e})(zn);function Ld(r,e,t){return new Bd(r,e,t)}function Gt(r,e,t){return new zn(r,e,t)}var Fd=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],gt=0,Cr=1,Ze=2,Eo=3,it=4,Ud=new zn(null,0,0),Jr=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],Vd=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function Gd(r){var e,t;try{for(var n=Vd(r),a=n.next();!a.done;a=n.next()){var i=a.value;Se.fill(i,-1)}}catch(o){e={error:o}}finally{try{a&&!a.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r[gt][it]=0,r[Cr][it]=0,r[Cr][gt]=28,r[Eo][it]=0,r[Ze][it]=0,r[Ze][gt]=15,r}var So=Gd(Se.createInt32Array(6,6)),$d=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Hd=(function(){function r(e,t,n,a){this.token=e,this.mode=t,this.binaryShiftByteCount=n,this.bitCount=a}return r.prototype.getMode=function(){return this.mode},r.prototype.getToken=function(){return this.token},r.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},r.prototype.getBitCount=function(){return this.bitCount},r.prototype.latchAndAppend=function(e,t){var n=this.bitCount,a=this.token;if(e!==this.mode){var i=Jr[this.mode][e];a=Gt(a,i&65535,i>>16),n+=i>>16}var o=e===Ze?4:5;return a=Gt(a,t,o),new r(a,e,0,n+o)},r.prototype.shiftAndAppend=function(e,t){var n=this.token,a=this.mode===Ze?4:5;return n=Gt(n,So[this.mode][e],a),n=Gt(n,t,5),new r(n,this.mode,0,this.bitCount+a+5)},r.prototype.addBinaryShiftChar=function(e){var t=this.token,n=this.mode,a=this.bitCount;if(this.mode===it||this.mode===Ze){var i=Jr[n][gt];t=Gt(t,i&65535,i>>16),a+=i>>16,n=gt}var o=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,s=new r(t,n,this.binaryShiftByteCount+1,a+o);return s.binaryShiftByteCount===2078&&(s=s.endBinaryShift(e+1)),s},r.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=Ld(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new r(t,this.mode,0,this.bitCount)},r.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(Jr[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=r.calculateBinaryShiftCost(e)-r.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},r.prototype.toBitArray=function(e){for(var t,n,a=[],i=this.endBinaryShift(e.length).token;i!==null;i=i.getPrevious())a.unshift(i);var o=new Te;try{for(var s=$d(a),l=s.next();!l.done;l=s.next()){var c=l.value;c.appendTo(o,e)}}catch(u){t={error:u}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return o},r.prototype.toString=function(){return K.format("%s bits=%d bytes=%d",Fd[this.mode],this.bitCount,this.binaryShiftByteCount)},r.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},r.INITIAL_STATE=new r(Ud,gt,0,0),r})();function zd(r){var e=K.getCharCode(" "),t=K.getCharCode("."),n=K.getCharCode(",");r[gt][e]=1;for(var a=K.getCharCode("Z"),i=K.getCharCode("A"),o=i;o<=a;o++)r[gt][o]=o-i+2;r[Cr][e]=1;for(var s=K.getCharCode("z"),l=K.getCharCode("a"),o=l;o<=s;o++)r[Cr][o]=o-l+2;r[Ze][e]=1;for(var c=K.getCharCode("9"),u=K.getCharCode("0"),o=u;o<=c;o++)r[Ze][o]=o-u+2;r[Ze][n]=12,r[Ze][t]=13;for(var f=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],h=0;h<f.length;h++)r[Eo][K.getCharCode(f[h])]=h;for(var p=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],h=0;h<p.length;h++)K.getCharCode(p[h])>0&&(r[it][K.getCharCode(p[h])]=h);return r}var Qr=zd(Se.createInt32Array(5,256)),ur=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Wd=(function(){function r(e){this.text=e}return r.prototype.encode=function(){for(var e=K.getCharCode(" "),t=K.getCharCode(`
`),n=ti.singletonList(Hd.INITIAL_STATE),a=0;a<this.text.length;a++){var i=void 0,o=a+1<this.text.length?this.text[a+1]:0;switch(this.text[a]){case K.getCharCode("\r"):i=o===t?2:0;break;case K.getCharCode("."):i=o===e?3:0;break;case K.getCharCode(","):i=o===e?4:0;break;case K.getCharCode(":"):i=o===e?5:0;break;default:i=0}i>0?(n=r.updateStateListForPair(n,a,i),a++):n=this.updateStateListForChar(n,a)}var s=ti.min(n,function(l,c){return l.getBitCount()-c.getBitCount()});return s.toBitArray(this.text)},r.prototype.updateStateListForChar=function(e,t){var n,a,i=[];try{for(var o=ur(e),s=o.next();!s.done;s=o.next()){var l=s.value;this.updateStateForChar(l,t,i)}}catch(c){n={error:c}}finally{try{s&&!s.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}return r.simplifyStates(i)},r.prototype.updateStateForChar=function(e,t,n){for(var a=this.text[t]&255,i=Qr[e.getMode()][a]>0,o=null,s=0;s<=it;s++){var l=Qr[s][a];if(l>0){if(o==null&&(o=e.endBinaryShift(t)),!i||s===e.getMode()||s===Ze){var c=o.latchAndAppend(s,l);n.push(c)}if(!i&&So[e.getMode()][s]>=0){var u=o.shiftAndAppend(s,l);n.push(u)}}}if(e.getBinaryShiftByteCount()>0||Qr[e.getMode()][a]===0){var f=e.addBinaryShiftChar(t);n.push(f)}},r.updateStateListForPair=function(e,t,n){var a,i,o=[];try{for(var s=ur(e),l=s.next();!l.done;l=s.next()){var c=l.value;this.updateStateForPair(c,t,n,o)}}catch(u){a={error:u}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(a)throw a.error}}return this.simplifyStates(o)},r.updateStateForPair=function(e,t,n,a){var i=e.endBinaryShift(t);if(a.push(i.latchAndAppend(it,n)),e.getMode()!==it&&a.push(i.shiftAndAppend(it,n)),n===3||n===4){var o=i.latchAndAppend(Ze,16-n).latchAndAppend(Ze,1);a.push(o)}if(e.getBinaryShiftByteCount()>0){var s=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);a.push(s)}},r.simplifyStates=function(e){var t,n,a,i,o=[];try{for(var s=ur(e),l=s.next();!l.done;l=s.next()){var c=l.value,u=!0,f=function(m){if(m.isBetterThanOrEqualTo(c))return u=!1,"break";c.isBetterThanOrEqualTo(m)&&(o=o.filter(function(y){return y!==m}))};try{for(var h=(a=void 0,ur(o)),p=h.next();!p.done;p=h.next()){var x=p.value,v=f(x);if(v==="break")break}}catch(m){a={error:m}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(a)throw a.error}}u&&o.push(c)}}catch(m){t={error:m}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return o},r})(),Xd=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function r(){}return r.encodeBytes=function(e){return r.encode(e,r.DEFAULT_EC_PERCENT,r.DEFAULT_AZTEC_LAYERS)},r.encode=function(e,t,n){var a=new Wd(e).encode(),i=W.truncDivision(a.getSize()*t,100)+11,o=a.getSize()+i,s,l,c,u,f;if(n!==r.DEFAULT_AZTEC_LAYERS){if(s=n<0,l=Math.abs(n),l>(s?r.MAX_NB_BITS_COMPACT:r.MAX_NB_BITS))throw new U(K.format("Illegal value %s for layers",n));c=r.totalBitsInLayer(l,s),u=r.WORD_SIZE[l];var h=c-c%u;if(f=r.stuffBits(a,u),f.getSize()+i>h)throw new U("Data to large for user specified layer");if(s&&f.getSize()>u*64)throw new U("Data to large for user specified layer")}else{u=0,f=null;for(var p=0;;p++){if(p>r.MAX_NB_BITS)throw new U("Data too large for an Aztec code");if(s=p<=3,l=s?p+1:p,c=r.totalBitsInLayer(l,s),!(o>c)){(f==null||u!==r.WORD_SIZE[l])&&(u=r.WORD_SIZE[l],f=r.stuffBits(a,u));var h=c-c%u;if(!(s&&f.getSize()>u*64)&&f.getSize()+i<=h)break}}}var x=r.generateCheckWords(f,c,u),v=f.getSize()/u,m=r.generateModeMessage(s,l,v),y=(s?11:14)+l*4,g=new Int32Array(y),_;if(s){_=y;for(var p=0;p<g.length;p++)g[p]=p}else{_=y+1+2*W.truncDivision(W.truncDivision(y,2)-1,15);for(var C=W.truncDivision(y,2),A=W.truncDivision(_,2),p=0;p<C;p++){var E=p+W.truncDivision(p,15);g[C-p-1]=A-E-1,g[C+p]=A+E+1}}for(var N=new st(_),p=0,I=0;p<l;p++){for(var k=(l-p)*4+(s?9:12),R=0;R<k;R++)for(var M=R*2,j=0;j<2;j++)x.get(I+M+j)&&N.set(g[p*2+j],g[p*2+R]),x.get(I+k*2+M+j)&&N.set(g[p*2+R],g[y-1-p*2-j]),x.get(I+k*4+M+j)&&N.set(g[y-1-p*2-j],g[y-1-p*2-R]),x.get(I+k*6+M+j)&&N.set(g[y-1-p*2-R],g[p*2+j]);I+=k*8}if(r.drawModeMessage(N,s,_,m),s)r.drawBullsEye(N,W.truncDivision(_,2),5);else{r.drawBullsEye(N,W.truncDivision(_,2),7);for(var p=0,R=0;p<W.truncDivision(y,2)-1;p+=15,R+=16)for(var j=W.truncDivision(_,2)&1;j<_;j+=2)N.set(W.truncDivision(_,2)-R,j),N.set(W.truncDivision(_,2)+R,j),N.set(j,W.truncDivision(_,2)-R),N.set(j,W.truncDivision(_,2)+R)}var G=new Dd;return G.setCompact(s),G.setSize(_),G.setLayers(l),G.setCodeWords(v),G.setMatrix(N),G},r.drawBullsEye=function(e,t,n){for(var a=0;a<n;a+=2)for(var i=t-a;i<=t+a;i++)e.set(i,t-a),e.set(i,t+a),e.set(t-a,i),e.set(t+a,i);e.set(t-n,t-n),e.set(t-n+1,t-n),e.set(t-n,t-n+1),e.set(t+n,t-n),e.set(t+n,t-n+1),e.set(t+n,t+n-1)},r.generateModeMessage=function(e,t,n){var a=new Te;return e?(a.appendBits(t-1,2),a.appendBits(n-1,6),a=r.generateCheckWords(a,28,4)):(a.appendBits(t-1,5),a.appendBits(n-1,11),a=r.generateCheckWords(a,40,4)),a},r.drawModeMessage=function(e,t,n,a){var i=W.truncDivision(n,2);if(t)for(var o=0;o<7;o++){var s=i-3+o;a.get(o)&&e.set(s,i-5),a.get(o+7)&&e.set(i+5,s),a.get(20-o)&&e.set(s,i+5),a.get(27-o)&&e.set(i-5,s)}else for(var o=0;o<10;o++){var s=i-5+o+W.truncDivision(o,5);a.get(o)&&e.set(s,i-7),a.get(o+10)&&e.set(i+7,s),a.get(29-o)&&e.set(s,i+7),a.get(39-o)&&e.set(i-7,s)}},r.generateCheckWords=function(e,t,n){var a,i,o=e.getSize()/n,s=new Ao(r.getGF(n)),l=W.truncDivision(t,n),c=r.bitsToWords(e,n,l);s.encode(c,l-o);var u=t%n,f=new Te;f.appendBits(0,u);try{for(var h=Xd(Array.from(c)),p=h.next();!p.done;p=h.next()){var x=p.value;f.appendBits(x,n)}}catch(v){a={error:v}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(a)throw a.error}}return f},r.bitsToWords=function(e,t,n){var a=new Int32Array(n),i,o;for(i=0,o=e.getSize()/t;i<o;i++){for(var s=0,l=0;l<t;l++)s|=e.get(i*t+l)?1<<t-l-1:0;a[i]=s}return a},r.getGF=function(e){switch(e){case 4:return Ge.AZTEC_PARAM;case 6:return Ge.AZTEC_DATA_6;case 8:return Ge.AZTEC_DATA_8;case 10:return Ge.AZTEC_DATA_10;case 12:return Ge.AZTEC_DATA_12;default:throw new U("Unsupported word size "+e)}},r.stuffBits=function(e,t){for(var n=new Te,a=e.getSize(),i=(1<<t)-2,o=0;o<a;o+=t){for(var s=0,l=0;l<t;l++)(o+l>=a||e.get(o+l))&&(s|=1<<t-1-l);(s&i)===i?(n.appendBits(s&i,t),o--):(s&i)===0?(n.appendBits(s|1,t),o--):n.appendBits(s,t)}return n},r.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},r.DEFAULT_EC_PERCENT=33,r.DEFAULT_AZTEC_LAYERS=0,r.MAX_NB_BITS=32,r.MAX_NB_BITS_COMPACT=4,r.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),r})();var Yd=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Zd=(function(r){Yd(e,r);function e(t){var n=r.call(this,t.width,t.height)||this;return n.canvas=t,n.tempCanvasElement=null,n.buffer=e.makeBufferFromCanvasImageData(t),n}return e.makeBufferFromCanvasImageData=function(t){var n;try{n=t.getContext("2d",{willReadFrequently:!0})}catch{n=t.getContext("2d")}if(!n)throw new Error("Couldn't get canvas context.");var a=n.getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(a.data,t.width,t.height)},e.toGrayscaleBuffer=function(t,n,a){for(var i=new Uint8ClampedArray(n*a),o=0,s=0,l=t.length;o<l;o+=4,s++){var c=void 0,u=t[o+3];if(u===0)c=255;else{var f=t[o],h=t[o+1],p=t[o+2];c=306*f+601*h+117*p+512>>10}i[s]=c}return i},e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new U("Requested row is outside the image: "+t);var a=this.getWidth(),i=t*a;return n===null?n=this.buffer.slice(i,i+a):(n.length<a&&(n=new Uint8ClampedArray(a)),n.set(this.buffer.slice(i,i+a))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,a,i){return r.prototype.crop.call(this,t,n,a,i),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new jr(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var n=this.getTempCanvasElement();if(!n)throw new Error("Could not create a Canvas element.");var a=t*e.DEGREE_TO_RADIANS,i=this.canvas.width,o=this.canvas.height,s=Math.ceil(Math.abs(Math.cos(a))*i+Math.abs(Math.sin(a))*o),l=Math.ceil(Math.abs(Math.sin(a))*i+Math.abs(Math.cos(a))*o);n.width=s,n.height=l;var c=n.getContext("2d");if(!c)throw new Error("Could not create a Canvas Context element.");return c.translate(s/2,l/2),c.rotate(a),c.drawImage(this.canvas,i/-2,o/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.DEGREE_TO_RADIANS=Math.PI/180,e})(rr);function No(){return typeof navigator<"u"}function Kd(){return No()&&!!navigator.mediaDevices}function qd(){return!!(Kd()&&navigator.mediaDevices.enumerateDevices)}var Ot=function(){return Ot=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},Ot.apply(this,arguments)},ge=function(r,e,t,n){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function s(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):a(u.value).then(s,l)}c((n=n.apply(r,e||[])).next())})},me=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,a&&(i=c[0]&2?a.return:c[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,c[1])).done)return i;switch(a=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,a=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){t.label=c[1];break}if(c[0]===6&&t.label<i[1]){t.label=i[1],i=c;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(c);break}i[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(u){c=[6,u],a=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},en=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Jd={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},Bt=(function(){function r(e,t,n){t===void 0&&(t=new Map),n===void 0&&(n={}),this.reader=e,this.hints=t,this.options=Ot(Ot({},Jd),n)}return Object.defineProperty(r.prototype,"possibleFormats",{set:function(e){this.hints.set(le.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),r.addVideoSource=function(e,t){try{e.srcObject=t}catch{console.error("got interrupted by new loading request")}},r.mediaStreamSetTorch=function(e,t){return ge(this,void 0,void 0,function(){return me(this,function(n){switch(n.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:t?"flash":"off",torch:!!t}]})];case 1:return n.sent(),[2]}})})},r.mediaStreamIsTorchCompatible=function(e){var t,n,a=e.getVideoTracks();try{for(var i=en(a),o=i.next();!o.done;o=i.next()){var s=o.value;if(r.mediaStreamIsTorchCompatibleTrack(s))return!0}}catch(l){t={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return!1},r.mediaStreamIsTorchCompatibleTrack=function(e){try{var t=e.getCapabilities();return"torch"in t}catch(n){return console.error(n),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},r.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},r.getMediaElement=function(e,t){var n=document.getElementById(e);if(!n)throw new ye("element with id '".concat(e,"' not found"));if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new ye("element with id '".concat(e,"' must be an ").concat(t," element"));return n},r.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return r.getMediaElement(e,"video");if(!e&&typeof document<"u"){var t=document.createElement("video");return t.width=200,t.height=200,t}throw new Error("Couldn't get videoElement from videoSource!")},r.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return r.getMediaElement(e,"img");if(typeof e>"u"){var t=document.createElement("img");return t.width=200,t.height=200,t}throw new Error("Couldn't get imageElement from imageSource!")},r.prepareVideoElement=function(e){var t=r.createVideoElement(e);return t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},r.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},r.createBinaryBitmapFromCanvas=function(e){var t=new Zd(e),n=new uo(t);return new co(n)},r.drawImageOnCanvas=function(e,t){e.drawImage(t,0,0)},r.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},r.createCaptureCanvas=function(e){if(!e)throw new ye("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var t=document.createElement("canvas"),n=r.getMediaElementDimensions(e),a=n.width,i=n.height;return t.style.width=a+"px",t.style.height=i+"px",t.width=a,t.height=i,t},r.tryPlayVideo=function(e){return ge(this,void 0,void 0,function(){var t;return me(this,function(n){switch(n.label){case 0:if(e?.ended)return console.error("Trying to play video that has ended."),[2,!1];if(r.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.play()];case 2:return n.sent(),[2,!0];case 3:return t=n.sent(),console.warn("It was not possible to play the video.",t),[2,!1];case 4:return[2]}})})},r.createCanvasFromMediaElement=function(e){var t=r.createCaptureCanvas(e),n=t.getContext("2d");if(!n)throw new Error("Couldn't find Canvas 2D Context.");return r.drawImageOnCanvas(n,e),t},r.createBinaryBitmapFromMediaElem=function(e){var t=r.createCanvasFromMediaElement(e);return r.createBinaryBitmapFromCanvas(t)},r.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},r.listVideoInputDevices=function(){return ge(this,void 0,void 0,function(){var e,t,n,a,i,o,s,l,c,u,f,h;return me(this,function(p){switch(p.label){case 0:if(!No())throw new Error("Can't enumerate devices, navigator is not present.");if(!qd())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=p.sent(),t=[];try{for(n=en(e),a=n.next();!a.done;a=n.next())i=a.value,o=i.kind==="video"?"videoinput":i.kind,o==="videoinput"&&(s=i.deviceId||i.id,l=i.label||"Video device ".concat(t.length+1),c=i.groupId,u={deviceId:s,label:l,kind:o,groupId:c},t.push(u))}catch(x){f={error:x}}finally{try{a&&!a.done&&(h=n.return)&&h.call(n)}finally{if(f)throw f.error}}return[2,t]}})})},r.findDeviceById=function(e){return ge(this,void 0,void 0,function(){var t;return me(this,function(n){switch(n.label){case 0:return[4,r.listVideoInputDevices()];case 1:return t=n.sent(),t?[2,t.find(function(a){return a.deviceId===e})]:[2]}})})},r.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},r.releaseAllStreams=function(){r.streamTracker.length!==0&&r.streamTracker.forEach(function(e){e.getTracks().forEach(function(t){return t.stop()})}),r.streamTracker=[]},r.playVideoOnLoadAsync=function(e,t){return ge(this,void 0,void 0,function(){var n;return me(this,function(a){switch(a.label){case 0:return[4,r.tryPlayVideo(e)];case 1:return n=a.sent(),n?[2,!0]:[2,new Promise(function(i,o){var s=setTimeout(function(){r.isVideoPlaying(e)||(o(!1),e.removeEventListener("canplay",l))},t),l=function(){r.tryPlayVideo(e).then(function(c){clearTimeout(s),e.removeEventListener("canplay",l),i(c)})};e.addEventListener("canplay",l)})]}})})},r.attachStreamToVideo=function(e,t,n){return n===void 0&&(n=5e3),ge(this,void 0,void 0,function(){var a;return me(this,function(i){switch(i.label){case 0:return a=r.prepareVideoElement(t),r.addVideoSource(a,e),[4,r.playVideoOnLoadAsync(a,n)];case 1:return i.sent(),[2,a]}})})},r._waitImageLoad=function(e){return new Promise(function(t,n){var a=1e4,i=setTimeout(function(){r.isImageLoaded(e)||(e.removeEventListener("load",o),n())},a),o=function(){clearTimeout(i),e.removeEventListener("load",o),t()};e.addEventListener("load",o)})},r.checkCallbackFnOrThrow=function(e){if(!e)throw new ye("`callbackFn` is a required parameter, you cannot capture results without it.")},r.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(t){return t.stop()}),e=void 0},r.prototype.decode=function(e){var t=r.createCanvasFromMediaElement(e);return this.decodeFromCanvas(t)},r.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},r.prototype.decodeFromCanvas=function(e){var t=r.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(t)},r.prototype.decodeFromImageElement=function(e){return ge(this,void 0,void 0,function(){var t;return me(this,function(n){switch(n.label){case 0:if(!e)throw new ye("An image element must be provided.");return t=r.prepareImageElement(e),[4,this._decodeOnLoadImage(t)];case 1:return[2,n.sent()]}})})},r.prototype.decodeFromImageUrl=function(e){return ge(this,void 0,void 0,function(){var t;return me(this,function(n){switch(n.label){case 0:if(!e)throw new ye("An URL must be provided.");t=r.prepareImageElement(),t.src=e,n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.decodeFromImageElement(t)];case 2:return[2,n.sent()];case 3:return r.destroyImageElement(t),[7];case 4:return[2]}})})},r.prototype.decodeFromConstraints=function(e,t,n){return ge(this,void 0,void 0,function(){var a,i;return me(this,function(o){switch(o.label){case 0:return r.checkCallbackFnOrThrow(n),[4,this.getUserMedia(e)];case 1:a=o.sent(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.decodeFromStream(a,t,n)];case 3:return[2,o.sent()];case 4:throw i=o.sent(),r.disposeMediaStream(a),i;case 5:return[2]}})})},r.prototype.decodeFromStream=function(e,t,n){return ge(this,void 0,void 0,function(){var a,i,o,s,l,c,u,f,h,p=this;return me(this,function(x){switch(x.label){case 0:return r.checkCallbackFnOrThrow(n),a=this.options.tryPlayVideoTimeout,[4,r.attachStreamToVideo(e,t,a)];case 1:return i=x.sent(),o=function(){r.disposeMediaStream(e),r.cleanVideoSource(i)},s=this.scan(i,n,o),l=e.getVideoTracks(),c=Ot(Ot({},s),{stop:function(){s.stop()},streamVideoConstraintsApply:function(v,m){return ge(this,void 0,void 0,function(){var y,g,_,C,A,E,N;return me(this,function(I){switch(I.label){case 0:y=m?l.filter(m):l,I.label=1;case 1:I.trys.push([1,6,7,8]),g=en(y),_=g.next(),I.label=2;case 2:return _.done?[3,5]:(C=_.value,[4,C.applyConstraints(v)]);case 3:I.sent(),I.label=4;case 4:return _=g.next(),[3,2];case 5:return[3,8];case 6:return A=I.sent(),E={error:A},[3,8];case 7:try{_&&!_.done&&(N=g.return)&&N.call(g)}finally{if(E)throw E.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(v){return l.find(v).getConstraints()},streamVideoSettingsGet:function(v){return l.find(v).getSettings()},streamVideoCapabilitiesGet:function(v){return l.find(v).getCapabilities()}}),u=r.mediaStreamIsTorchCompatible(e),u&&(f=l?.find(function(v){return r.mediaStreamIsTorchCompatibleTrack(v)}),h=function(v){return ge(p,void 0,void 0,function(){return me(this,function(m){switch(m.label){case 0:return[4,r.mediaStreamSetTorch(f,v)];case 1:return m.sent(),[2]}})})},c.switchTorch=h,c.stop=function(){return ge(p,void 0,void 0,function(){return me(this,function(v){switch(v.label){case 0:return s.stop(),[4,h(!1)];case 1:return v.sent(),[2]}})})}),[2,c]}})})},r.prototype.decodeFromVideoDevice=function(e,t,n){return ge(this,void 0,void 0,function(){var a,i;return me(this,function(o){switch(o.label){case 0:return r.checkCallbackFnOrThrow(n),e?a={deviceId:{exact:e}}:a={facingMode:"environment"},i={video:a},[4,this.decodeFromConstraints(i,t,n)];case 1:return[2,o.sent()]}})})},r.prototype.decodeFromVideoElement=function(e,t){return ge(this,void 0,void 0,function(){var n,a;return me(this,function(i){switch(i.label){case 0:if(r.checkCallbackFnOrThrow(t),!e)throw new ye("A video element must be provided.");return n=r.prepareVideoElement(e),a=this.options.tryPlayVideoTimeout,[4,r.playVideoOnLoadAsync(n,a)];case 1:return i.sent(),[2,this.scan(n,t)]}})})},r.prototype.decodeFromVideoUrl=function(e,t){return ge(this,void 0,void 0,function(){var n,a,i,o;return me(this,function(s){switch(s.label){case 0:if(r.checkCallbackFnOrThrow(t),!e)throw new ye("An URL must be provided.");return n=r.prepareVideoElement(),n.src=e,a=function(){r.cleanVideoSource(n)},i=this.options.tryPlayVideoTimeout,[4,r.playVideoOnLoadAsync(n,i)];case 1:return s.sent(),o=this.scan(n,t,a),[2,o]}})})},r.prototype.decodeOnceFromConstraints=function(e,t){return ge(this,void 0,void 0,function(){var n;return me(this,function(a){switch(a.label){case 0:return[4,this.getUserMedia(e)];case 1:return n=a.sent(),[4,this.decodeOnceFromStream(n,t)];case 2:return[2,a.sent()]}})})},r.prototype.decodeOnceFromStream=function(e,t){return ge(this,void 0,void 0,function(){var n,a,i;return me(this,function(o){switch(o.label){case 0:return n=!!t,[4,r.attachStreamToVideo(e,t)];case 1:a=o.sent(),o.label=2;case 2:return o.trys.push([2,,4,5]),[4,this.scanOneResult(a)];case 3:return i=o.sent(),[2,i];case 4:return n||r.cleanVideoSource(a),[7];case 5:return[2]}})})},r.prototype.decodeOnceFromVideoDevice=function(e,t){return ge(this,void 0,void 0,function(){var n,a;return me(this,function(i){switch(i.label){case 0:return e?n={deviceId:{exact:e}}:n={facingMode:"environment"},a={video:n},[4,this.decodeOnceFromConstraints(a,t)];case 1:return[2,i.sent()]}})})},r.prototype.decodeOnceFromVideoElement=function(e){return ge(this,void 0,void 0,function(){var t,n;return me(this,function(a){switch(a.label){case 0:if(!e)throw new ye("A video element must be provided.");return t=r.prepareVideoElement(e),n=this.options.tryPlayVideoTimeout,[4,r.playVideoOnLoadAsync(t,n)];case 1:return a.sent(),[4,this.scanOneResult(t)];case 2:return[2,a.sent()]}})})},r.prototype.decodeOnceFromVideoUrl=function(e){return ge(this,void 0,void 0,function(){var t,n;return me(this,function(a){switch(a.label){case 0:if(!e)throw new ye("An URL must be provided.");t=r.prepareVideoElement(),t.src=e,n=this.decodeOnceFromVideoElement(t),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,n];case 2:return[2,a.sent()];case 3:return r.cleanVideoSource(t),[7];case 4:return[2]}})})},r.prototype.scanOneResult=function(e,t,n,a){var i=this;return t===void 0&&(t=!0),n===void 0&&(n=!0),a===void 0&&(a=!0),new Promise(function(o,s){i.scan(e,function(l,c,u){if(l){o(l),u.stop();return}if(c){if(c instanceof O&&t||c instanceof be&&n||c instanceof D&&a)return;u.stop(),s(c)}})})},r.prototype.scan=function(e,t,n){var a=this;r.checkCallbackFnOrThrow(t);var i=r.createCaptureCanvas(e),o;try{o=i.getContext("2d",{willReadFrequently:!0})}catch{o=i.getContext("2d")}if(!o)throw new Error("Couldn't create canvas for visual element scan.");var s=function(){o=void 0,i=void 0},l=!1,c,u=function(){l=!0,clearTimeout(c),s(),n&&n()},f={stop:u},h=function(){if(!l)try{r.drawImageOnCanvas(o,e);var p=a.decodeFromCanvas(i);t(p,void 0,f),c=setTimeout(h,a.options.delayBetweenScanSuccess)}catch(y){t(void 0,y,f);var x=y instanceof be,v=y instanceof D,m=y instanceof O;if(x||v||m){c=setTimeout(h,a.options.delayBetweenScanAttempts);return}s(),n&&n(y)}};return h(),f},r.prototype._decodeOnLoadImage=function(e){return ge(this,void 0,void 0,function(){var t;return me(this,function(n){switch(n.label){case 0:return t=r.isImageLoaded(e),t?[3,2]:[4,r._waitImageLoad(e)];case 1:n.sent(),n.label=2;case 2:return[2,this.decode(e)]}})})},r.prototype.getUserMedia=function(e){return ge(this,void 0,void 0,function(){var t;return me(this,function(n){switch(n.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return t=n.sent(),r.streamTracker.push(t),[2,t]}})})},r.streamTracker=[],r})(),Qd=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){Qd(e,r);function e(t,n){return r.call(this,new yr,t,n)||this}return e})(Bt);var ef=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){ef(e,r);function e(t,n){return r.call(this,new Nt(t),t,n)||this}return e})(Bt);var tf=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){tf(e,r);function e(t,n){return r.call(this,new wr,t,n)||this}return e})(Bt);var rf=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),ri=(function(r){rf(e,r);function e(t,n){var a=this,i=new _o;return i.setHints(t),a=r.call(this,i,t,n)||this,a.reader=i,a}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(t){this.hints.set(le.POSSIBLE_FORMATS,t),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e.prototype.setHints=function(t){this.hints=t,this.reader.setHints(this.hints)},e})(Bt),nf=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){nf(e,r);function e(t,n){return r.call(this,new Ar,t,n)||this}return e})(Bt);var af=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){af(e,r);function e(t,n){return r.call(this,new _r,t,n)||this}return e})(Bt);const tn=1e3,of=[B.QR_CODE,B.CODE_128,B.CODE_39,B.CODE_93,B.ITF,B.EAN_13,B.EAN_8,B.UPC_A,B.UPC_E,B.UPC_EAN_EXTENSION];function sf(r){if(!r)return!1;if(`${r.name||""}`.toLowerCase().includes("notfound"))return!0;const t=`${r.message||""}`.toLowerCase();return t.includes("no multiformat readers")||t.includes("not found")}function lf({open:r,onClose:e,onDetected:t}){const n=w.useRef(null),a=w.useRef(null),i=w.useRef(null),[o,s]=w.useState([]),[l,c]=w.useState(""),[u,f]=w.useState(!1),[h,p]=w.useState(""),[x,v]=w.useState(""),m=w.useRef(0),y=w.useRef(0),g=w.useCallback(()=>{a.current?.stop(),a.current=null,i.current?.reset?.(),i.current=null},[]);return w.useEffect(()=>{if(!r){g(),s([]),c(""),p(""),v(""),y.current=0,m.current=0,f(!1);return}let _=!1;async function C(){p("");try{if(!navigator?.mediaDevices?.getUserMedia){p("This browser does not support camera access. Please try a different browser."),v(""),f(!1);return}if(f(!0),v("Requesting camera access…"),(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(N=>N.stop()),_)return;const E=await ri.listVideoInputDevices();if(_)return;if(s(E),!E.length){p("No camera devices were detected. Please connect a camera and try again."),f(!1);return}c(N=>N||E[0]?.deviceId||""),v("")}catch(A){console.error("Barcode scanner: unable to enumerate video devices",A),_||(A?.name==="NotAllowedError"||A?.name==="SecurityError"?p("Camera access was denied. Please allow camera permissions in your browser settings and try again."):p("Unable to access the camera. Please check browser permissions and try again."),v(""),f(!1))}}return C(),()=>{_=!0,g()}},[r,g]),w.useEffect(()=>{if(!r||!l)return;const _=new Map;_.set(le.POSSIBLE_FORMATS,of),_.set(le.TRY_HARDER,!0);const C=new ri(_,tn);i.current=C;let A=!0;return y.current=0,m.current=0,f(!0),p(""),v("Preparing camera…"),C.decodeFromVideoDevice(l,n.current,(E,N,I)=>{if(A){if(E){const k=E.getText?.()||"";k&&t?.(k),I?.stop(),e?.()}if(N){if(sf(N)){const R=Date.now();if(R-m.current>=tn){m.current=R;const M=y.current+1;y.current=M,v(`Still scanning… attempt ${M}.`)}p("");return}console.error("Barcode scanner: decode error",N),p("Unable to read the barcode. Try holding the product steady and ensure it fills the frame.");const k=Date.now();if(k-m.current>=tn){m.current=k;const R=y.current+1;y.current=R,v(`Retrying in a second… attempt ${R}.`)}}}}).then(E=>{if(!A){E?.stop();return}a.current=E,f(!1),v("Scanning for a barcode…")}).catch(E=>{A&&(console.error("Barcode scanner: failed to start video stream",E),p("Unable to start the camera stream. Please verify permissions and refresh the page."),f(!1))}),()=>{A=!1,f(!1),g()}},[l,e,t,r,g]),r?d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/70 px-4 py-8",children:d.jsxs("div",{className:"relative w-full max-w-2xl rounded-3xl bg-white p-6 shadow-xl dark:bg-slate-900",children:[d.jsx("button",{type:"button",onClick:e,className:"absolute right-4 top-4 inline-flex h-9 w-9 items-center justify-center rounded-full bg-slate-100 text-slate-600 hover:bg-slate-200 focus:outline-none focus:ring-2 focus:ring-brand-500 dark:bg-slate-800 dark:text-slate-200 dark:hover:bg-slate-700","aria-label":"Close barcode scanner",children:d.jsx(fs,{className:"h-5 w-5"})}),d.jsxs("div",{className:"flex flex-col gap-4",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Scan a barcode"}),d.jsx("p",{className:"mt-1 text-sm text-slate-600 dark:text-slate-300",children:"Allow camera access so we can scan the product barcode and look it up for you."})]}),o.length>1&&d.jsxs("label",{className:"flex flex-col gap-1 text-sm text-slate-700 dark:text-slate-200",children:["Camera",d.jsx("select",{className:"rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",value:l,onChange:_=>c(_.target.value),children:o.map(_=>d.jsx("option",{value:_.deviceId,children:_.label||`Camera ${_.deviceId.slice(-4)}`},_.deviceId))})]}),d.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-black shadow-inner",children:[d.jsx("video",{ref:n,className:"h-full w-full object-cover",autoPlay:!0,muted:!0,playsInline:!0}),u&&d.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900/60",children:d.jsx("span",{className:"rounded-full bg-white/90 px-4 py-2 text-sm font-medium text-slate-700 shadow",children:"Initializing camera…"})})]}),d.jsxs("div",{className:"flex flex-col gap-2",children:[h&&d.jsx("p",{className:"rounded-xl border border-amber-300 bg-amber-50 px-3 py-2 text-sm text-amber-700 dark:border-amber-500/60 dark:bg-amber-500/10 dark:text-amber-200",children:h}),d.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:x||"Once a barcode is detected it will automatically populate the chat."})]})]})]})}):null}const ni={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var ai={};const rn=typeof import.meta<"u"&&ni?ni:void 0,nn=typeof globalThis<"u"&&ai?ai:void 0;function cf(r){if(rn&&rn[r]!==void 0)return rn[r];if(nn&&nn[r]!==void 0)return nn[r]}const uf=(cf("VITE_CHAT_BASE_URL")||"https://groq-endpoint.louispaulet13.workers.dev").replace(/\/$/,"");function an(r="",e=180){if(!r)return"";const t=String(r).trim();return t.length<=e?t:`${t.slice(0,e)}...`}async function ar(r,e,{signal:t,model:n,baseUrl:a}={}){const i=r?.logLabel||"Chat",o=(a||r?.defaultBaseUrl||uf||"").replace(/\/$/,"");if(!o)throw new Error("Missing chat service base URL. Set VITE_CHAT_BASE_URL or provide an override.");const s=`${o}/chat`,l=typeof performance<"u"&&typeof performance.now=="function"?performance.now():Date.now(),u=e?.[e.length-1]?.content||"";console.log(`[${i}] → POST %s — model: %s — prompt: %s`,s,n||"default",an(u,160));const f=n?{model:n,messages:e}:{messages:e};let h;try{h=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f),signal:t})}catch(g){throw new Error(`Request to ${i} service failed: ${g?.message||g}`)}const p=typeof performance<"u"&&typeof performance.now=="function"?performance.now():Date.now(),x=Math.round(p-l);let v="",m;if(typeof h.text=="function"){v=await h.text();try{m=JSON.parse(v)}catch{m=void 0}}else if(typeof h.json=="function"){m=await h.json();try{v=JSON.stringify(m)}catch{v="[object Object]"}}if(!h.ok){const g=h.statusText||"Unknown error",_=an(v||g,200);throw new Error(`Remote chat service returned ${h.status}: ${_}`)}if(!m)try{m=JSON.parse(v)}catch{throw new Error("Remote chat service returned invalid JSON")}let y=m?.choices?.[0]?.message?.content;if(!y&&typeof m?.output_text=="string"&&(y=m.output_text),y=typeof y=="string"?y.trim():"",!y)throw new Error("Remote chat service returned an empty message");return console.log(`[${i}] ← %s %d in %dms — response: %s`,s,h.status,x,an(y,160)),{content:y,payload:m,status:h.status,duration:x,baseUrl:o}}const Io=3600*24*365,ii=3500;function Lt(){return typeof document>"u"?null:document}function Wn(r=Lt()){return!r||!r.cookie?[]:r.cookie.split(";").map(e=>e.trim()).filter(Boolean).map(e=>{const t=e.indexOf("=");return t===-1?{name:e,value:""}:{name:e.slice(0,t),value:e.slice(t+1)}})}function Fr(r){if(!r)return"";const e=Wn().find(t=>t.name===r);return e?e.value:""}function Xn(r,e,t=Io){const n=Lt();if(!n||!r)return;const a=encodeURIComponent(e);n.cookie=`${r}=${a}; path=/; max-age=${t}`}function Tt(r){const e=Lt();!e||!r||(e.cookie=`${r}=; path=/; max-age=0`)}function lt(r){const e=Lt();if(!e||!r||!e.cookie)return;const t=`${r}__`;Wn(e).filter(n=>n.name===r||n.name.startsWith(t)).forEach(n=>{e.cookie=`${n.name}=; path=/; max-age=0`})}function Yn(r){if(!r)return"";const e=`${r}__`,t=Wn().filter(a=>a.name===r||a.name.startsWith(e)).map(a=>({name:a.name,value:a.value||"",index:a.name===r?0:Number.parseInt(a.name.slice(e.length),10)})).filter(a=>Number.isInteger(a.index)&&a.index>=0).sort((a,i)=>a.index-i.index);if(t.length===0)return"";const n=t.map(a=>a.value).join("");if(!n)return"";try{return decodeURIComponent(n)}catch{return""}}function Zn(r,e,{maxAgeSeconds:t=Io,chunkSize:n=ii}={}){const a=Lt();if(!a||!r)return;const i=typeof e=="string"?e:JSON.stringify(e);if(!i){lt(r);return}const o=encodeURIComponent(i),s=Math.max(1,Number.parseInt(n,10)||ii);lt(r);for(let l=0;l*s<o.length;l+=1){const c=l*s,u=o.slice(c,c+s),f=l===0?r:`${r}__${l}`;a.cookie=`${f}=${u}; path=/; max-age=${t}`}}const Kn="allergy_notes",df="allergyfinder_conversations",Er="allin_profile_name",kt="allin_chat_counts",Oo="allergyfinder",ff="allin_conversations_",hf=["allergyfinder","stlviewer","pokedex"],qn=3600*24*365,pf=3500,xf=Number.POSITIVE_INFINITY;function Jt(){try{return decodeURIComponent(Fr(Kn))}catch{return""}}function ko(r,e=qn){Xn(Kn,r,e)}function oi(){const r=Jt();return r?r.split(/\r?\n/).map(e=>e.replace(/^[-*+\s]+/,"").trim()).filter(e=>e.length>0).length:0}function vf(r){const e=r?.role==="assistant"?"assistant":"user",t=typeof r?.content=="string"?r.content:"";if(!t)return null;const n=typeof r?.timestamp=="number"&&Number.isFinite(r.timestamp)?Math.round(r.timestamp):Date.now(),a={role:e,content:t,timestamp:n};if(r?.sources&&Array.isArray(r.sources)&&r.sources.length>0)try{a.sources=JSON.parse(JSON.stringify(r.sources))}catch{a.sources=r.sources.filter(i=>typeof i=="string")}return r?.error&&(a.error=!0),a}function gf(r){if(!r)return null;const t=(Array.isArray(r.messages)?r.messages:[]).map(vf).filter(Boolean);if(t.length===0)return null;const n=typeof r.title=="string"&&r.title.trim()?r.title.trim().slice(0,60):"Saved chat",a={id:typeof r.id=="string"?r.id:void 0,title:n,messages:t};return r?.createdAt&&(a.createdAt=r.createdAt),a}function To(r){return(Array.isArray(r)?r:[]).filter(Boolean).map(gf).filter(Boolean)}function Jn(r){return!r||r===Oo?df:`${ff}${r}`}function Ro(r){const e=Jn(r),t=Yn(e)||(()=>{const n=Fr(e);return n?decodeURIComponent(n):""})();if(!t)return[];try{const n=JSON.parse(t);return To(n)}catch{return[]}}function on(r,e){const t=Jn(r),n=To(e);if(n.length===0){lt(t),ea(r);return}Zn(t,n,{maxAgeSeconds:qn}),Do(r,n.length)}function En(r){const e=Jn(r);lt(e),ea(r)}function mf(){En(Oo)}function Ur(){const r=Fr(kt);if(!r)return{};try{const e=decodeURIComponent(r),t=JSON.parse(e);if(t&&typeof t=="object")return t}catch{}return{}}function Qn(r){if(!r||Object.keys(r).length===0){Tt(kt);return}try{const e=JSON.stringify(r);if(e.length>pf){Tt(kt);return}Xn(kt,e)}catch{Tt(kt)}}function si(){const r=Ur(),e={allergyfinder:Number.parseInt(r.allergyfinder,10)||0,stlviewer:Number.parseInt(r.stlviewer,10)||0,pokedex:Number.parseInt(r.pokedex,10)||0};return hf.forEach(t=>{if(e[t]===0){const n=Ro(t);n.length>0&&(e[t]=n.length)}}),e}function yf(r){if(!r)return;const e=Ur();e[r]=(Number.parseInt(e[r],10)||0)+1,Qn(e)}function Do(r,e){if(!r)return;const t=Math.max(0,Number(e)||0),n=Ur(),a=Number.parseInt(n[r],10)||0;t===0&&a===0||t<=a||(n[r]=t,Qn(n))}function ea(r){const e=Ur();!r||!(r in e)||(delete e[r],Qn(e))}function bf(){Tt(kt)}function wf(){const r=Fr(Er);if(!r)return"";try{return decodeURIComponent(r)}catch{return""}}function li(r,e=qn){if(!r){Tt(Er);return}Xn(Er,r,e)}function _f(){Tt(Er)}function Af(){const r=Lt();!r||!r.cookie||r.cookie.split(";").forEach(e=>{const t=e.indexOf("="),n=t>-1?e.slice(0,t).trim():e.trim();n&&(r.cookie=`${n}=; path=/; max-age=0`)})}const Cf=/【[^】]+】/g;function Ef(r){return r&&r.replace(Cf,"")}function Sf(r,e){let t=e||"";return t&&(r?.id==="allergyfinder"&&(t=Ef(t)),t.trim())}const ci=/openfoodfacts\.org\/(?:[a-z]{2}\/)?produit\/(\d{6,})/gi,ui=/\b(\d{8,18})\b/g;function Nf(r){if(!r)return null;const e=String(r);ci.lastIndex=0;let t;for(;t=ci.exec(e);){const o=t[1];if(o)return o}const n=e.replace(/[^0-9]/g,""),a=e.replace(/[0-9\s-]/g,"");if(n.length>=8&&n.length<=18&&!a)return n;ui.lastIndex=0;const i=ui.exec(e);return i&&i[1]?i[1]:null}async function If(r,e,{signal:t}={}){const n=typeof r=="string"?r.trim().replace(/\/$/,""):"";if(!n||!e)return null;const a=`${n}/flavor-finder/${encodeURIComponent(e)}`;console.log(`Calling flavor finder API: ${a}`);let i;try{i=await fetch(a,{method:"GET",headers:{Accept:"application/json"},signal:t})}catch(l){const c=new Error(`Flavor Finder request failed: ${l?.message||l}`);throw c.cause=l,c}const o=await i.text();let s;try{s=JSON.parse(o)}catch{s=null}if(console.log("Flavor finder response:",s),!i.ok){const l=new Error(`Flavor Finder returned ${i.status}`);throw l.status=i.status,l.body=o,l}return s||null}function Xt(r){return r==null?"":Array.isArray(r)?r.map(e=>e==null?"":typeof e=="string"?e.trim():typeof e=="number"||typeof e=="boolean"?String(e):"").filter(Boolean).join(", "):typeof r=="number"||typeof r=="boolean"?String(r):typeof r=="string"?r.trim():""}function We(r,e,t){const n=Xt(t);n&&r.push(`${e}: ${n}`)}function Of(r,e){const t=Array.isArray(e?.products)?e.products:[];if(!r||t.length===0)return null;const n=[`OpenFoodFacts product context for barcode ${r}:`],a=Xt(e?.resolvedUrl);a&&n.push(`Resolved URL: ${a}`);const i=Xt(e?.resolvedSlug);i&&n.push(`Resolved slug: ${i}`);const o=Xt(e?.sources);o&&n.push(`Sources: ${o}`);const s=3;return t.slice(0,s).forEach((l,c)=>{const u=Xt(l?.name||l?.genericName||l?.generic_name||l?.product_name)||`Product ${c+1}`,f=`Product ${c+1}: ${u}`;n.push(f);const h=[];We(h,"Brands",l?.brands),We(h,"Quantity",l?.quantity),We(h,"Serving size",l?.servingSize||l?.serving_size),We(h,"Nutri-Score",l?.nutriscore||l?.nutrition_grade),We(h,"NOVA group",l?.nova),We(h,"Labels",l?.labels),We(h,"Categories",l?.categories),We(h,"Ingredients",l?.ingredients),We(h,"Allergens",l?.allergens),We(h,"Traces",l?.traces),We(h,"Additives",l?.additives),We(h,"Ingredients analysis",l?.ingredientsAnalysis||l?.ingredients_analysis),h.length>0&&h.forEach(p=>{n.push(`  - ${p}`)})}),t.length>s&&n.push(`(+ ${t.length-s} additional products omitted)`),n.join(`
`)}async function kf(r,e,{signal:t}={}){const n=Nf(e);if(!n)return null;const a=await If(r,n,{signal:t});if(!a)return null;const i=Of(n,a);return i?{code:n,summary:i,payload:a}:null}const Tf=new Set(["allergyfinder","stlviewer","pokedex"]);function Rf(r){const e=(r||"").trim();if(!e)throw new Error("Endpoint is required.");return e.replace(/\/$/,"")}function Df(r,e){const t=r?[{role:"system",content:r}]:[],n=(e||[]).filter(a=>a.role==="user"||a.role==="assistant").map(a=>({role:a.role,content:a.content}));return[...t,...n]}function Po(){return`conv-${Math.random().toString(16).slice(2,6)}-${Date.now()}`}function ta(r,e){return{role:"assistant",name:e,timestamp:Date.now(),content:r?.greeting||`Hello from ${e}`}}function dr(r,e){return{id:Po(),title:"New chat",messages:[ta(r,e)]}}function Pf(r,e,t){return!Array.isArray(r)||r.length===0?[]:r.map((n,a)=>{const i=typeof n?.id=="string"?n.id:Po(),o=typeof n?.title=="string"&&n.title.trim()?n.title.trim():`Saved chat ${a+1}`,s=Array.isArray(n?.messages)?n.messages:[],l=s.length>0?s.map(c=>{const u=c?.role==="assistant"?"assistant":"user",f=typeof c?.content=="string"?c.content:"";return{role:u,content:f,name:u==="assistant"?t:"You",timestamp:typeof c?.timestamp=="number"&&Number.isFinite(c.timestamp)?c.timestamp:Date.now(),streaming:!1,error:!!c?.error,sources:Array.isArray(c?.sources)?c.sources:void 0}}):[ta(e,t)];return{id:i,title:o,messages:l}}).filter(n=>Array.isArray(n.messages)&&n.messages.length>0)}function Mf(r){const e=r?.name||"Groq Assistant",t=r?.defaultModel||r?.modelOptions?.[0]||"openai/gpt-oss-20b",n=w.useMemo(()=>{const F=r?.defaultBaseUrl||"";return F?F.replace(/\/$/,""):""},[r]),[a,i]=w.useState(t),[o,s]=w.useState(n),[l,c]=w.useState(()=>[dr(r,e)]),[u,f]=w.useState(()=>l[0]?.id),[h,p]=w.useState(""),[x,v]=w.useState(!1),m=w.useRef(null),y=w.useRef(!1),g=!!r?.id&&Tf.has(r.id),_=!!r?.enableBarcodeScanner;w.useEffect(()=>{let F=[],V=!1;if(g){const Y=Ro(r.id),ee=Pf(Y,r,e);ee.length>0&&(F=ee,V=!0,Do(r?.id,ee.length))}if(F.length===0&&(F=[dr(r,e)],g&&on(r.id,F)),c(F),f(F[0]?.id),p(""),i(r?.defaultModel||r?.modelOptions?.[0]||"openai/gpt-oss-20b"),s((r?.defaultBaseUrl||"").replace(/\/$/,"")),m.current){try{m.current.abort()}catch{}m.current=null}v(!1),y.current=V},[r,e,g]);const A=w.useMemo(()=>l.find(F=>F.id===u)||l[0],[l,u])?.messages||[],E=r?.promptPlaceholder||"Ask anything...";w.useEffect(()=>{if(g){if(y.current){y.current=!1;return}on(r.id,l)}},[l,r?.id,g]);function N(F,V){c(Y=>Y.map(ee=>ee.id===F?{...ee,title:V?.trim()?V.trim():ee.title}:ee))}function I(){if(x)return;const F=dr(r,e);c(V=>{const Y=[F,...V];return g?Y.slice(0,xf):Y}),f(F.id),p("")}function k(){if(x)return;const F=ta(r,e);c(V=>V.map(Y=>Y.id===u?{...Y,title:"New chat",messages:[F]}:Y))}function R(){if(x)return;const F=dr(r,e);c([F]),f(F.id),p(""),g&&(on(r.id,[F]),y.current=!0)}function M(){if(x){try{m.current?.abort()}catch{}m.current=null,v(!1),c(F=>F.map(V=>{if(V.id!==u)return V;const Y=[...V.messages],ee=Y.length-1;return ee>=0&&Y[ee].role==="assistant"&&(Y[ee]={...Y[ee],content:"Request cancelled.",streaming:!1,error:!0}),{...V,messages:Y}}))}}async function j(F){const V=(typeof F=="string"?F:h).trim();if(!V||x)return;const ee={role:"user",name:"You",timestamp:Date.now(),content:V},fe=!!r?.id&&!A.some(ce=>ce.role==="user");let P;try{const ce=r?.allowBaseUrlOverride?o:r?.defaultBaseUrl||o;P=Rf(ce)}catch(ce){c(oe=>oe.map(ve=>{if(ve.id!==u)return ve;const nt=ve.title==="New chat"&&V.slice(0,30)||ve.title;return{...ve,title:nt,messages:[...ve.messages,ee,{role:"assistant",name:e,timestamp:Date.now(),content:`Warning: ${ce.message}`,error:!0}]}})),p("");return}c(ce=>ce.map(oe=>{if(oe.id!==u)return oe;const ve=oe.title==="New chat"&&V.slice(0,30)||oe.title;return{...oe,title:ve,messages:[...oe.messages,ee,{role:"assistant",name:e,timestamp:Date.now(),content:"",streaming:!0}]}})),p(""),v(!0);const X=new AbortController;m.current=X;try{fe&&yf(r.id);const ce=[...A,ee];let oe=r?.systemPrompt;if(r?.id==="allergyfinder"){const T=Jt();T&&(oe=[oe,"User allergy notes saved via the Allergy Cookie Editor (markdown format):",T].filter(Boolean).join(`

`))}let ve=oe;if(r?.id==="allergyfinder")try{const T=await kf(P,V,{signal:X.signal});T?.summary?c(z=>z.map(q=>{if(q.id!==u)return q;const Z=[...q.messages],we=Z.length-1;return we>=0&&Z[we].role==="assistant"&&(Z[we]={...Z[we],content:T.summary,streaming:!1,error:!1}),{...q,messages:Z}})):ve=[ve,"I couldn't find any product with that barcode."].filter(Boolean).join(`

`)}catch(T){T?.name!=="AbortError"&&(console.error(`[${r?.logLabel||"Chat"}] flavor finder lookup failed`,T),c(z=>z.map(q=>{if(q.id!==u)return q;const Z=[...q.messages],we=Z.length-1;return we>=0&&Z[we].role==="assistant"&&(Z[we]={...Z[we],content:"I couldn't find any product with that barcode.",streaming:!1,error:!0}),{...q,messages:Z}})))}const nt=Df(ve,ce),H=await ar(r,nt,{signal:X.signal,model:a,baseUrl:P});s(H.baseUrl);const ue=Sf(r,H.content);c(T=>T.map(z=>{if(z.id!==u)return z;const q=[...z.messages],Z=q.length-1;return Z>=0&&q[Z].role==="assistant"&&(q[Z]={...q[Z],content:ue,streaming:!1,error:!1}),{...z,messages:q}}))}catch(ce){const oe=ce?.name==="AbortError",ve=oe?"Request cancelled.":`Unable to reach the service. ${ce?.message||"Please try again."}`;oe||console.error(`[${r?.logLabel||"Chat"}] request failed`,ce),c(nt=>nt.map(H=>{if(H.id!==u)return H;const ue=[...H.messages],T=ue.length-1;return T>=0&&ue[T].role==="assistant"&&(ue[T]={...ue[T],content:ve,streaming:!1,error:!0}),{...H,messages:ue}}))}finally{m.current=null,v(!1)}}const G=o||r?.defaultBaseUrl||"";return{activeId:u,assistantName:e,baseUrl:o,conversations:l,enableBarcodeScanner:_,endpointDisplay:G,handleClear:k,handleFlushHistory:R,handleNewConversation:I,handleRename:N,handleSend:j,handleStop:M,loading:x,messages:A,model:a,persistConversations:g,placeholder:E,prompt:h,setActiveId:f,setModel:i,setPrompt:p}}function di({experience:r}){const{activeId:e,assistantName:t,conversations:n,enableBarcodeScanner:a,endpointDisplay:i,handleClear:o,handleFlushHistory:s,handleNewConversation:l,handleRename:c,handleSend:u,handleStop:f,loading:h,messages:p,model:x,persistConversations:v,placeholder:m,prompt:y,setActiveId:g,setModel:_,setPrompt:C}=Mf(r),[A,E]=w.useState(!1);function N(I){if(!a)return;const k=`${I}`.trim();k&&(E(!1),C(k),u(k))}return d.jsxs("div",{className:"grid gap-6 md:grid-cols-12",children:[d.jsx("aside",{className:"md:col-span-4 lg:col-span-3",children:d.jsx(rc,{conversations:n,activeId:e,onSelect:g,onNew:l,onRename:c,onFlushHistory:v?s:void 0,disableNew:h,disableFlush:h})}),d.jsxs("section",{className:"md:col-span-8 lg:col-span-9 flex flex-col gap-4",children:[d.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white/80 p-4 shadow-sm dark:border-slate-800 dark:bg-slate-900/60",children:[d.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-end lg:justify-between",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Session settings"}),d.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Select a model and endpoint for this workspace."})]}),d.jsx("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end",children:d.jsx(fc,{value:x,onChange:_,options:r?.modelOptions||[]})})]}),d.jsxs("div",{className:"mt-3 grid gap-2 text-xs text-slate-500 dark:text-slate-400 sm:grid-cols-2",children:[d.jsxs("div",{children:[d.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-300",children:"Assistant"}),": ",t]}),d.jsxs("div",{children:[d.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-300",children:"Endpoint"}),": ",i||"Not configured"]})]})]}),d.jsx(uc,{experience:r,messages:p}),d.jsx(dc,{value:y,onChange:C,onSend:u,onStop:f,onClear:o,loading:h,placeholder:m,onOpenScanner:a?()=>E(!0):void 0})]}),a&&d.jsx(lf,{open:A,onClose:()=>E(!1),onDetected:N})]})}const jf=`- Peanuts
- Shellfish
- Dairy
- Eggs
- Sesame
- Tree nuts`;function Bf(){const[r,e]=w.useState(""),[t,n]=w.useState(null),a=w.useMemo(()=>jf,[]);w.useEffect(()=>{const s=Jt();e(s)},[]);function i(s){s.preventDefault(),ko(r||""),n({type:"success",message:"Allergy notes saved to cookie. ✅"})}function o(){Af(),e(""),n({type:"warning",message:"All cookies cleared for this site. ⚠️"})}return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"rounded-2xl border border-emerald-100 bg-emerald-50/60 p-6 text-emerald-900 dark:border-emerald-500/40 dark:bg-emerald-900/30 dark:text-emerald-100",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Allergy Cookie Editor 🍪"}),d.jsx("p",{className:"mt-2 text-sm text-emerald-900/80 dark:text-emerald-100/80",children:"📝 Save a markdown list of allergens you or your household need to watch out for. The notes are stored in a browser cookie so you can quickly reference or reuse them when chatting with the assistant."})]}),d.jsxs("form",{className:"space-y-4",onSubmit:i,children:[d.jsxs("label",{className:"block space-y-2",htmlFor:"allergy-cookie-textarea",children:[d.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Allergy list 📋"}),d.jsx("textarea",{id:"allergy-cookie-textarea",name:"allergy-notes",value:r,onChange:s=>e(s.target.value),placeholder:a,rows:10,className:"w-full rounded-2xl border border-slate-300 bg-white/80 p-4 font-mono text-sm text-slate-800 placeholder:text-slate-400 focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-400 dark:border-slate-700 dark:bg-slate-900/60 dark:text-slate-100 dark:placeholder:text-slate-500 dark:focus:border-emerald-300 dark:focus:ring-emerald-300","aria-describedby":"allergy-cookie-helper"})]}),d.jsx("p",{id:"allergy-cookie-helper",className:"text-xs text-slate-500 dark:text-slate-400",children:`Tip: This information is stored in the "${Kn}" browser cookie. Use markdown lists, headings, or bold text to organise allergens by family members. 💡`}),d.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[d.jsx("button",{type:"submit",className:"inline-flex items-center gap-2 rounded-xl bg-emerald-600 px-4 py-2 text-sm font-medium text-white shadow-sm transition hover:bg-emerald-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-emerald-500 disabled:opacity-50",children:"Save Cookie 💾"}),d.jsx("button",{type:"button",onClick:o,className:"inline-flex items-center gap-2 rounded-xl border border-slate-300 px-4 py-2 text-sm font-medium text-slate-700 transition hover:border-slate-400 hover:bg-slate-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-slate-400 dark:border-slate-600 dark:text-slate-200 dark:hover:border-slate-500 dark:hover:bg-slate-800 dark:focus-visible:outline-slate-500",children:"Delete All Cookies 🧹"}),t?d.jsx("span",{role:"status",className:`text-sm ${t.type==="success"?"text-emerald-600 dark:text-emerald-300":"text-amber-600 dark:text-amber-300"}`,children:t.message}):null]})]})]})}const fi="inline-flex items-center rounded-xl px-4 py-2 text-sm font-medium transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2";function hi(){return d.jsxs("nav",{"aria-label":"AllergyFinder sections",className:"flex flex-wrap items-center gap-2",children:[d.jsx(Ve,{to:"/allergyfinder",end:!0,className:({isActive:r})=>`${fi} ${r?"bg-emerald-600 text-white focus-visible:outline-emerald-400":"border border-transparent bg-white/80 text-emerald-700 hover:border-emerald-200 hover:bg-emerald-50 focus-visible:outline-emerald-300 dark:bg-slate-900/60 dark:text-emerald-200 dark:hover:bg-emerald-900/40"}`,children:"Chat Assistant"}),d.jsx(Ve,{to:"/allergyfinder/cookies",className:({isActive:r})=>`${fi} ${r?"bg-emerald-600 text-white focus-visible:outline-emerald-400":"border border-transparent bg-white/80 text-emerald-700 hover:border-emerald-200 hover:bg-emerald-50 focus-visible:outline-emerald-300 dark:bg-slate-900/60 dark:text-emerald-200 dark:hover:bg-emerald-900/40"}`,children:"Allergy Cookie Editor"})]})}const ra="objectmaker_zoo_v1";function na(){try{return globalThis.localStorage||null}catch{return null}}function aa(){const r=na();if(!r)return[];try{const e=r.getItem(ra);if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch{return[]}}function pi(){const r=aa();return Array.isArray(r)?r.length:0}function Mo(r){const e=na();if(e)try{e.setItem(ra,JSON.stringify(r||[]))}catch{}}function Lf(r){const e=aa();e.unshift(r),Mo(e)}function jo(){const r=na();if(r)try{r.removeItem(ra)}catch{}}function Ff(r){const e=new Map;for(const t of r||[]){const n=(t?.type||"object").toString();e.has(n)||e.set(n,[]),e.get(n).push(t)}return e}const ia="newsanalyzer_classification_count_v1";function oa(){try{return globalThis.localStorage||null}catch{return null}}function Bo(){const r=oa();if(!r)return 0;try{const e=r.getItem(ia);if(!e)return 0;const t=Number.parseInt(e,10);return Number.isFinite(t)&&t>0?t:0}catch{return 0}}function xi(){return Bo()}function Uf(){const r=oa();if(!r)return;const e=Bo()+1;try{r.setItem(ia,String(e))}catch{}}function Vf(){const r=oa();if(r)try{r.removeItem(ia)}catch{}}const Sr="allin_pizza_gallery",Gf=3600*24*30,sa=40;function Lo(){return typeof document>"u"?null:document}function $f(r){const e=Lo();if(!e||!e.cookie)return"";const n=e.cookie.split("; ").find(a=>a.startsWith(`${r}=`));return n?n.split("=").slice(1).join("="):""}function Sn(r,e,t=Gf){const n=Lo();if(!n)return;const a=encodeURIComponent(e),i=["path=/",`max-age=${t}`];n.cookie=`${r}=${a}; ${i.join("; ")}`}function Fo(r){return!r||typeof r.url!="string"||!r.url.trim()?null:{prompt:typeof r.prompt=="string"?r.prompt:"",url:r.url,summary:typeof r.summary=="string"?r.summary:"",timestamp:typeof r.timestamp=="number"?r.timestamp:Date.now()}}function Uo(){const r=$f(Sr);if(!r)return[];try{const e=JSON.parse(decodeURIComponent(r));return Array.isArray(e)?e.map(t=>Fo(t)).filter(Boolean).slice(0,sa):[]}catch{return[]}}function Hf(r){if(!Array.isArray(r)||r.length===0){Sn(Sr,"[]");return}const e=r.map(t=>Fo(t)).filter(Boolean).slice(0,sa);Sn(Sr,JSON.stringify(e))}function Vo(){Sn(Sr,"[]",0)}function zf(){return Uo().length}const Wf={allergyfinder:"AllergyFinder",stlviewer:"STL Studio",pokedex:"Pokédex"},vi=["Curious","Vigilant","Bright","Calm","Resilient","Swift","Gentle","Lively","Mindful","Radiant"],gi=["Aviator","Guardian","Navigator","Trailblazer","Harvest","Aurora","Sentinel","Voyager","Caretaker","Beacon"],Xf=new Intl.NumberFormat("en-US");function mi(){const r=vi[Math.floor(Math.random()*vi.length)],e=gi[Math.floor(Math.random()*gi.length)];return`${r} ${e}`}function yi(r,e=12){return r?r.split(/\r?\n/).map(t=>t.replace(/^[-*+\s]+/,"").trim()).filter(Boolean).slice(0,e):[]}function sn(r){return Xf.format(Math.max(0,Number(r)||0))}function Yf(){const[r,e]=w.useState(""),[t,n]=w.useState(()=>si()),[a,i]=w.useState(()=>oi()),[o,s]=w.useState(()=>yi(Jt())),[l,c]=w.useState(()=>pi()),[u,f]=w.useState(()=>xi()),[h,p]=w.useState(0);w.useEffect(()=>{let I=wf();I||(I=mi(),li(I)),e(I),x()},[]);function x(){n(si()),i(oi()),s(yi(Jt())),c(pi()),f(xi()),p(zf())}function v(){const I=mi();li(I),e(I)}function m(){_f(),e("")}function y(I){En(I),ea(I),x()}function g(){bf(),Object.keys(Wf).forEach(I=>{En(I)}),x()}function _(){ko(""),mf(),x()}function C(){jo(),x()}function A(){Vf(),x()}function E(){Vo(),x()}const N=[{id:"allergyfinder",label:"AllergyFinder",icon:"🩺",value:t.allergyfinder??0,description:"Chats started with the allergy assistant.",cta:{to:"/allergyfinder",label:"Open AllergyFinder"},onReset:()=>y("allergyfinder"),resetLabel:"Clear AllergyFinder history",footnote:"Removes the cookie that stores saved conversations and counters for this experience."},{id:"stlviewer",label:"STL Studio",icon:"🛠️",value:t.stlviewer??0,description:"Design and printing chats initiated in STL Studio.",cta:{to:"/stlviewer",label:"Open STL Studio"},onReset:()=>y("stlviewer"),resetLabel:"Clear STL Studio history",footnote:"Deletes the STL Studio chat cookie, including saved sessions and counters."},{id:"pokedex",label:"Pokédex",icon:"🔍",value:t.pokedex??0,description:"Quick Pokédex lookups launched from this browser.",cta:{to:"/pokedex",label:"Open Pokédex"},onReset:()=>y("pokedex"),resetLabel:"Clear Pokédex history",footnote:"Erases the Pokédex chat cookie and any stored conversations."},{id:"objectmaker",label:"Object Maker",icon:"🧱",value:l,description:"Objects saved to your local Object Zoo.",cta:{to:"/objectmaker/zoo",label:"Visit Object Zoo"},onReset:C,resetLabel:"Delete saved objects",footnote:"Removes every object stored in the Object Maker Zoo on this device."},{id:"pizzamaker",label:"Pizza Maker",icon:"🍕",value:h,description:"Pizzas saved to your cookie-backed gallery.",cta:{to:"/pizza-maker",label:"Open Pizza Maker"},onReset:E,resetLabel:"Clear pizza gallery",footnote:"Deletes every saved pizza render stored in browser cookies."},{id:"newsanalyzer",label:"News Analyzer",icon:"📰",value:u,description:"Articles classified locally with the news workflow.",cta:{to:"/newsanalyzer",label:"Open News Analyzer"},onReset:A,resetLabel:"Reset article counter",footnote:"Clears the local counter that tracks processed news articles."}];return d.jsxs("div",{className:"space-y-12",children:[d.jsxs("section",{className:"relative overflow-hidden rounded-4xl border border-brand-400/40 bg-gradient-to-br from-brand-500 via-emerald-500 to-brand-600 p-8 text-white shadow-2xl",children:[d.jsx("div",{className:"absolute right-[-12rem] top-[-6rem] h-56 w-56 rounded-full bg-white/10 blur-3xl","aria-hidden":"true"}),d.jsx("div",{className:"absolute bottom-[-10rem] left-[-8rem] h-64 w-64 rounded-full bg-emerald-300/20 blur-3xl","aria-hidden":"true"}),d.jsxs("div",{className:"relative space-y-6",children:[d.jsxs("div",{children:[d.jsx("span",{className:"inline-flex items-center rounded-full bg-white/20 px-3 py-1 text-xs font-semibold uppercase tracking-wide",children:"Profile"}),d.jsx("h2",{className:"mt-4 text-3xl font-semibold sm:text-4xl",children:"User Preferences & Activity"}),d.jsx("p",{className:"mt-2 max-w-2xl text-sm text-white/80",children:"We generate a private alias so you can explore each experience without sharing personal details. Everything here lives only in your browser."})]}),d.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[d.jsx("div",{className:"rounded-3xl border border-white/30 bg-white/20 px-6 py-4 text-lg font-semibold text-white shadow-lg backdrop-blur",children:r||"No profile name stored"}),d.jsx("button",{type:"button",onClick:v,className:"inline-flex items-center rounded-full bg-white/20 px-4 py-2 text-sm font-medium text-white transition hover:bg-white/30",children:"Generate New Alias 🎲"}),d.jsx("button",{type:"button",onClick:m,className:"inline-flex items-center rounded-full bg-white/10 px-4 py-2 text-sm font-semibold text-white transition hover:bg-red-500/90",children:"Remove Profile Cookie 🗑️"})]}),d.jsx("p",{className:"rounded-3xl border border-white/20 bg-white/10 px-4 py-3 text-xs text-white/90 shadow-inner",children:"Important: Removing the profile cookie deletes the saved alias immediately. The next time you open this page a new randomly generated name will appear."})]})]}),d.jsxs("section",{className:"rounded-4xl border border-emerald-200/60 bg-white/70 p-8 shadow-xl backdrop-blur-sm dark:border-emerald-500/40 dark:bg-emerald-900/30",children:[d.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-2xl font-semibold text-emerald-900 dark:text-emerald-100",children:"Saved Allergies 🗂️"}),d.jsx("p",{className:"mt-1 max-w-xl text-sm text-emerald-900/80 dark:text-emerald-100/80",children:"Your allergy notes stay local. Use the editor to update or remove items at any time."})]}),d.jsx(ot,{to:"/allergyfinder/cookies",className:"inline-flex items-center rounded-full border border-emerald-500 px-4 py-2 text-sm font-semibold text-emerald-700 transition hover:bg-emerald-500/10 dark:border-emerald-300 dark:text-emerald-200 dark:hover:bg-emerald-300/20",children:"Edit Allergy List ✍️"})]}),d.jsxs("div",{className:"mt-6 grid gap-6 lg:grid-cols-[minmax(0,280px)_1fr]",children:[d.jsxs("div",{className:"rounded-3xl border border-emerald-300/70 bg-emerald-100/70 p-6 text-center text-emerald-900 shadow-inner dark:border-emerald-400/40 dark:bg-emerald-800/40 dark:text-emerald-100",children:[d.jsx("div",{className:"text-sm uppercase tracking-wide text-emerald-700/80 dark:text-emerald-200/80",children:"Allergens tracked"}),d.jsx("div",{className:"mt-2 text-5xl font-bold",children:sn(a)}),d.jsx("div",{className:"mt-2 text-xs text-emerald-700/80 dark:text-emerald-200/70",children:"Across saved markdown notes"})]}),d.jsxs("div",{className:"rounded-3xl border border-emerald-200/70 bg-white/70 p-6 shadow-lg dark:border-emerald-500/30 dark:bg-emerald-900/40",children:[o.length>0?d.jsxs("ul",{className:"grid grid-cols-1 gap-2 text-sm text-emerald-900 dark:text-emerald-100 sm:grid-cols-2",children:[o.map(I=>d.jsx("li",{className:"rounded-2xl border border-emerald-200/70 bg-emerald-50/80 px-3 py-2 shadow-sm dark:border-emerald-500/30 dark:bg-emerald-800/40",children:I},I)),a>o.length?d.jsxs("li",{className:"rounded-2xl border border-dashed border-emerald-300/60 px-3 py-2 text-emerald-700/80 dark:border-emerald-500/30 dark:text-emerald-200/80",children:["…and ",sn(a-o.length)," more saved locally."]}):null]}):d.jsx("div",{className:"flex h-full items-center justify-center rounded-2xl border border-dashed border-emerald-300/70 bg-emerald-50/80 p-6 text-sm italic text-emerald-700/80 dark:border-emerald-500/30 dark:bg-emerald-800/30 dark:text-emerald-200/70",children:"No allergy notes saved yet."}),d.jsxs("div",{className:"mt-6 flex flex-wrap items-center gap-3",children:[d.jsx("button",{type:"button",onClick:_,className:"inline-flex items-center rounded-full bg-red-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-red-500",children:"Delete Allergy Notes & Saved Chats 🧹"}),d.jsx("p",{className:"rounded-2xl border border-red-300/70 bg-red-50/80 px-4 py-2 text-xs text-red-700 shadow-inner dark:border-red-700/50 dark:bg-red-900/30 dark:text-red-200",children:"Removing allergy data clears both the notes cookie and any saved AllergyFinder conversations from this browser."})]})]})]})]}),d.jsxs("section",{className:"space-y-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("h3",{className:"text-2xl font-semibold text-slate-900 dark:text-slate-100",children:"Experience Snapshot 📊"}),d.jsx("p",{className:"max-w-2xl text-sm text-slate-600 dark:text-slate-400",children:"Each card reflects what\\'s stored locally for a specific section. Manage your history, saved objects, and news analytics without leaving the profile page."})]}),d.jsx("div",{className:"grid gap-5 md:grid-cols-2 xl:grid-cols-3",children:N.map(I=>d.jsxs("div",{className:"group relative overflow-hidden rounded-3xl border border-slate-200 bg-white/80 p-6 shadow-xl transition hover:-translate-y-1 hover:shadow-2xl dark:border-slate-700 dark:bg-slate-900/60",children:[d.jsx("div",{className:"absolute right-0 top-0 h-24 w-24 rounded-full bg-slate-200/50 blur-3xl transition group-hover:bg-slate-200/70 dark:bg-slate-700/30","aria-hidden":"true"}),d.jsxs("div",{className:"relative space-y-4",children:[d.jsxs("div",{className:"flex items-start justify-between gap-4",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-400",children:I.label}),d.jsx("p",{className:"mt-1 text-sm text-slate-600 dark:text-slate-400",children:I.description})]}),d.jsx("span",{className:"text-2xl","aria-hidden":"true",children:I.icon})]}),d.jsxs("div",{className:"flex items-baseline gap-2",children:[d.jsx("div",{className:"text-4xl font-bold text-slate-900 dark:text-slate-100",children:sn(I.value)}),d.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Total"})]}),d.jsxs("div",{className:"flex flex-wrap gap-3",children:[d.jsx(ot,{to:I.cta.to,className:"inline-flex items-center rounded-full border border-slate-300 px-4 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100 dark:border-slate-600 dark:text-slate-200 dark:hover:bg-slate-800/60",children:I.cta.label}),d.jsx("button",{type:"button",onClick:I.onReset,className:"inline-flex items-center rounded-full bg-red-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-red-500",children:I.resetLabel})]}),d.jsx("p",{className:"rounded-2xl border border-slate-200/70 bg-slate-50/80 px-4 py-2 text-xs text-slate-600 shadow-inner dark:border-slate-700/50 dark:bg-slate-800/50 dark:text-slate-300",children:I.footnote})]})]},I.id))}),d.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white/70 p-6 shadow-lg dark:border-slate-700 dark:bg-slate-900/60",children:d.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[d.jsxs("div",{children:[d.jsx("h4",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Reset chat-based experiences"}),d.jsx("p",{className:"mt-1 text-sm text-slate-600 dark:text-slate-400",children:"This action clears every saved chat cookie for AllergyFinder, STL Studio, and the Pokédex in one click."})]}),d.jsx("button",{type:"button",onClick:g,className:"inline-flex items-center rounded-full bg-red-700 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-red-600",children:"Delete All Saved Chat History 🧽"})]})})]})]})}function Zf(){return d.jsxs("div",{className:"space-y-8",children:[d.jsx("section",{className:"rounded-3xl border border-brand-200 bg-gradient-to-r from-brand-500/10 to-brand-600/10 px-8 py-10 text-slate-900 shadow-lg dark:border-brand-500/30 dark:from-brand-500/20 dark:to-brand-700/20 dark:text-slate-100",children:d.jsxs("div",{className:"space-y-3",children:[d.jsx("span",{className:"inline-flex items-center rounded-full bg-white/70 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-brand-700 dark:bg-slate-900/60 dark:text-brand-200",children:"Profile"}),d.jsx("h1",{className:"text-3xl font-semibold sm:text-4xl",children:"User Preferences & Stats"}),d.jsx("p",{className:"max-w-2xl text-sm text-slate-700 dark:text-slate-300",children:"Manage your generated alias, review chat counters across experiences, and clear local cookies for allergy notes and saved conversations. Everything shown here lives only in your browser — we do not store personal health information, we keep no server-side logs, and this workspace is operated with GDPR compliance in mind."})]})}),d.jsx(Yf,{})]})}function bi({isActive:r}){return`inline-flex items-center rounded-full border px-3 py-1.5 text-sm font-medium transition border-slate-300 text-slate-700 hover:border-amber-500 hover:text-amber-600 dark:border-slate-700 dark:text-slate-200 ${r?"bg-gradient-to-r from-yellow-400 to-amber-600 text-white border-transparent shadow":""}`}function wi(){return d.jsxs("nav",{className:"flex flex-wrap items-center gap-2",children:[d.jsx(Ve,{to:"/objectmaker",className:bi,end:!0,children:"Builder"}),d.jsx(Ve,{to:"/objectmaker/zoo",className:bi,children:"Zoo"})]})}function Kf({baseUrl:r,setBaseUrl:e,model:t,setModel:n,experience:a}){function i(o){const s=(o||"").trim();return s?s.replace(/\/$/,""):""}return d.jsx("section",{className:"md:col-span-12",children:d.jsx("div",{className:"rounded-xl border border-slate-200 bg-white/80 p-3 dark:border-slate-800 dark:bg-slate-900/60",children:d.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Service settings"}),d.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Configure model and base URL for object creation."})]}),d.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row",children:[d.jsxs("label",{className:"block text-sm",children:[d.jsx("span",{className:"block text-[10px] uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Model"}),d.jsx("select",{className:"mt-1 block w-56 rounded-md border border-slate-300 bg-white px-2 py-2 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",value:t,onChange:o=>n(o.target.value),children:(a?.modelOptions||[]).map(o=>d.jsx("option",{value:o,children:o},o))})]}),d.jsxs("label",{className:"block text-sm",children:[d.jsx("span",{className:"block text-[10px] uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Service base URL"}),d.jsx("input",{type:"url",value:r,onChange:o=>e(o.target.value),onBlur:o=>e(i(o.target.value)),className:"mt-1 block w-72 rounded-md border border-slate-300 bg-white px-2 py-2 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",placeholder:"https://your-endpoint.example"})]})]})]})})})}function qf({prompt:r,setPrompt:e,chatMessages:t,chatLoading:n,onSend:a,onAdopt:i}){const o=!!r.trim()&&!n,l=!![...t].reverse().find(f=>f.role==="assistant"),c=f=>{f.key==="Enter"&&!f.shiftKey&&(f.preventDefault(),o&&a())},u=f=>{f.preventDefault(),o&&a()};return d.jsxs("section",{className:"md:col-span-5 space-y-4",children:[d.jsx("div",{className:"rounded-xl border border-slate-200 bg-white/80 p-4 shadow-sm dark:border-slate-800 dark:bg-slate-900/60",children:d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Assistant Schema Builder"}),d.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Describe the object you want. The assistant will propose a single JSON schema."})]}),d.jsxs("form",{onSubmit:u,className:"flex flex-col gap-2",children:[d.jsx("textarea",{value:r,onChange:f=>e(f.target.value),onKeyDown:c,rows:3,spellCheck:!1,className:"block w-full rounded-lg border border-slate-300 bg-white/90 p-3 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-2 focus:ring-amber-500/60 dark:border-slate-700 dark:bg-slate-900/60 dark:text-slate-100",placeholder:"Ask for a schema idea…"}),d.jsx("div",{className:"flex flex-wrap items-center justify-end gap-2",children:d.jsx("button",{type:"submit",disabled:!o,className:"inline-flex items-center gap-1 rounded-md bg-amber-600 px-3 py-1.5 text-sm font-semibold text-white shadow transition-colors hover:bg-amber-500 disabled:opacity-50",children:n?"Sending…":d.jsxs(d.Fragment,{children:[d.jsx("span",{children:"Send to assistant"}),d.jsx(Ui,{className:"h-4 w-4","aria-hidden":"true"})]})})})]})]})}),d.jsxs("div",{className:"rounded-xl border border-amber-200 bg-amber-50/80 p-4 shadow-sm dark:border-amber-500/40 dark:bg-amber-500/10",children:[d.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[d.jsxs("div",{children:[d.jsx("h4",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Apply the assistant schema"}),d.jsx("p",{className:"text-xs text-amber-900/80 dark:text-amber-200/80",children:"Review the latest assistant reply below. When it looks good, send it to the Schema Setup card so you can validate and fine-tune it."})]}),d.jsxs("button",{type:"button",onClick:i,disabled:!l,className:"inline-flex items-center gap-1 rounded-md border border-amber-600 px-3 py-1.5 text-sm font-medium text-amber-700 transition-colors hover:bg-amber-100 disabled:opacity-50 dark:border-amber-400 dark:text-amber-200 dark:hover:bg-amber-500/20",children:[d.jsx(Vi,{className:"h-4 w-4","aria-hidden":"true"}),"Send to Schema Setup"]})]}),d.jsx("div",{className:"mt-3 max-h-64 space-y-2 overflow-auto",children:t.length?t.map((f,h)=>d.jsxs("div",{className:`rounded-md border p-2 text-sm ${f.role==="user"?"border-amber-200 bg-white text-slate-800 dark:border-amber-400/40 dark:bg-amber-500/10":"border-amber-300 bg-amber-100/80 text-amber-900 dark:border-amber-400/60 dark:bg-amber-500/20 dark:text-amber-50"}`,children:[d.jsx("div",{className:"mb-1 text-[10px] uppercase tracking-wide text-amber-600 dark:text-amber-200/80",children:f.role}),d.jsx("div",{className:"whitespace-pre-wrap break-words",children:f.content})]},h)):d.jsx("div",{className:"rounded-md border border-dashed border-amber-300 p-3 text-xs text-amber-700 dark:border-amber-400/50 dark:text-amber-200",children:"No assistant replies yet. Ask the assistant for a schema to get started."})}),l?null:d.jsx("p",{className:"mt-2 text-[11px] font-medium text-amber-800/80 dark:text-amber-200/70",children:"Send a prompt to the assistant first—then this button will push the suggested schema into the editor."})]})]})}function Jf({value:r,onChange:e,rows:t=10,placeholder:n}){return d.jsx("textarea",{value:r,onChange:a=>e(a.target.value),rows:t,spellCheck:!1,className:"mt-1 block w-full rounded-lg border border-slate-300 bg-white/90 p-2 font-mono text-[13px] text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-900/60 dark:text-slate-100",placeholder:n})}function Qf({value:r}){const e=w.useMemo(()=>{try{return JSON.stringify(r,null,2)}catch{return""}},[r]);return d.jsx("pre",{className:"max-h-80 overflow-auto rounded-lg border border-slate-200 bg-slate-50 p-3 text-xs text-slate-800 dark:border-slate-700 dark:bg-slate-900/50 dark:text-slate-200",children:e})}function eh({structureText:r,setStructureText:e,onValidate:t,objectType:n,setObjectType:a,objectName:i,setObjectName:o,createPrompt:s,setCreatePrompt:l,systemText:c,setSystemText:u,temperature:f,setTemperature:h,strictMode:p,setStrictMode:x,onCreate:v,createLoading:m,error:y,resultObj:g,structureStatus:_}){const[C,A]=w.useState(""),E=w.useRef(null);w.useEffect(()=>()=>{E.current&&(clearTimeout(E.current),E.current=null)},[]);async function N(){if(g){try{const I=JSON.stringify(g,null,2);if(typeof navigator<"u"&&navigator.clipboard?.writeText)await navigator.clipboard.writeText(I);else{const k=document.createElement("textarea");k.value=I,k.setAttribute("readonly",""),k.style.position="absolute",k.style.left="-9999px",document.body.appendChild(k),k.select(),document.execCommand("copy"),document.body.removeChild(k)}A("Copied!")}catch(I){console.error("Copy failed",I),A("Copy failed")}E.current&&clearTimeout(E.current),E.current=setTimeout(()=>{A(""),E.current=null},2e3)}}return d.jsxs("section",{className:"md:col-span-7 space-y-4",children:[d.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white/80 p-4 shadow-sm dark:border-slate-800 dark:bg-slate-900/60",children:[d.jsxs("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-start sm:justify-between",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Schema Setup"}),d.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Define and validate the JSON Schema before attempting generation."})]}),_?d.jsxs("div",{className:"flex items-center gap-1 text-xs font-medium text-emerald-600 dark:text-emerald-400",children:[d.jsx(hs,{className:"h-4 w-4","aria-hidden":"true"}),d.jsx("span",{children:_})]}):null]}),d.jsxs("div",{className:"mt-3 space-y-3",children:[d.jsx(Jf,{value:r,onChange:e,rows:16,placeholder:'{"type":"object","properties":{"name":{"type":"string"},"toppings":{"type":"array","items":{"type":"string"}}}}'}),d.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[d.jsx("button",{type:"button",onClick:t,className:"rounded-md bg-amber-600 px-3 py-1.5 text-sm font-medium text-white shadow hover:bg-amber-500",children:"Validate JSON"}),d.jsxs("label",{className:"text-sm text-slate-600 dark:text-slate-300",children:[d.jsx("span",{className:"mr-1",children:"Type"}),d.jsx("input",{value:n,onChange:I=>a(I.target.value),className:"rounded-md border border-slate-300 bg-white px-2 py-1 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",placeholder:"pizza | hot_sauce | car"})]}),d.jsxs("label",{className:"text-sm text-slate-600 dark:text-slate-300",children:[d.jsx("span",{className:"mr-1",children:"Object Name (optional)"}),d.jsx("input",{value:i,onChange:I=>o(I.target.value),className:"rounded-md border border-slate-300 bg-white px-2 py-1 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",placeholder:"diavola"})]})]}),d.jsxs("label",{className:"block text-sm",children:[d.jsx("span",{className:"mr-1 text-slate-600 dark:text-slate-300",children:"System Instruction"}),d.jsx("input",{value:c,onChange:I=>u(I.target.value),className:"mt-1 block w-full rounded-md border border-slate-300 bg-white px-2 py-2 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",placeholder:"You create a pizza object that conforms strictly to the provided JSON Schema; return only JSON."})]})]})]}),d.jsx("div",{className:"rounded-xl border border-slate-200 bg-white/80 p-4 shadow-sm dark:border-slate-800 dark:bg-slate-900/60",children:d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Generation Request"}),d.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Craft the prompt and run the request after your schema looks right."})]}),d.jsxs("label",{className:"block text-sm",children:[d.jsx("span",{className:"mr-1 text-slate-600 dark:text-slate-300",children:"User Prompt"}),d.jsx("input",{value:s,onChange:I=>l(I.target.value),className:"mt-1 block w-full rounded-md border border-slate-300 bg-white px-2 py-2 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",placeholder:"Describe the instance to create (e.g., 'A Margherita with basil and fresh mozzarella')"})]}),d.jsxs("div",{className:"flex flex-wrap gap-3",children:[d.jsxs("label",{className:"text-sm text-slate-600 dark:text-slate-300",children:[d.jsx("span",{className:"mr-1",children:"Temperature"}),d.jsx("input",{type:"number",value:f,onChange:I=>h(I.target.value),min:"0",max:"2",step:"0.1",className:"mt-1 block w-24 rounded-md border border-slate-300 bg-white px-2 py-1 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100"})]}),d.jsxs("label",{className:"text-sm text-slate-600 dark:text-slate-300",children:[d.jsx("span",{className:"mr-1",children:"Strict mode"}),d.jsxs("select",{value:p,onChange:I=>x(I.target.value),className:"mt-1 block rounded-md border border-slate-300 bg-white px-2 py-1 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",children:[d.jsx("option",{value:"auto",children:"Auto (service decides)"}),d.jsx("option",{value:"true",children:"Force strict validation"}),d.jsx("option",{value:"false",children:"Relaxed validation"})]})]}),d.jsx("div",{className:"ml-auto flex items-end",children:d.jsx("button",{type:"button",onClick:v,disabled:m,className:"rounded-md bg-amber-700 px-4 py-2 text-sm font-semibold text-white shadow hover:bg-amber-600 disabled:opacity-50",children:m?"Creating…":"Create Object"})})]}),y?d.jsx("div",{className:"rounded-md border border-red-300 bg-red-50 p-2 text-sm text-red-800 dark:border-red-800/60 dark:bg-red-900/40 dark:text-red-200",children:y}):null]})}),d.jsxs("section",{className:"rounded-xl border border-slate-200 bg-white/60 p-4 shadow-sm dark:border-slate-800 dark:bg-slate-900/50",children:[d.jsxs("div",{className:"flex items-center justify-between gap-2",children:[d.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Last Created Object"}),g?d.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 dark:text-slate-400",children:[C?d.jsx("span",{children:C}):null,d.jsxs("button",{type:"button",onClick:N,className:"inline-flex items-center gap-1 rounded-md border border-slate-300 px-2 py-1 text-xs font-medium text-slate-700 transition-colors hover:bg-slate-100 dark:border-slate-600 dark:text-slate-200 dark:hover:bg-slate-800",children:[d.jsx(Vi,{className:"h-4 w-4","aria-hidden":"true"}),"Copy JSON"]})]}):null]}),d.jsx("div",{className:"mt-3",children:g?d.jsx(Qf,{value:g}):d.jsx("div",{className:"rounded-lg border border-dashed border-slate-300 bg-white/60 p-4 text-sm text-slate-500 dark:border-slate-700 dark:bg-slate-900/60 dark:text-slate-400",children:"No object created yet. The response from /obj will appear here."})})]})]})}function la(r){if(!r)return null;try{const e=JSON.parse(r);if(e&&typeof e=="object")return e}catch{return null}return null}function th(r){if(!r)return null;const e=/```(?:json)?\s*([\s\S]*?)```/i,t=r.match(e);return!t||!t[1]?null:la(t[1].trim())}function rh(r){if(!r)return null;const e=String(r),t=e.indexOf("{");if(t<0)return null;let n=0;for(let a=t;a<e.length;a++){const i=e[a];if(i==="{")n++;else if(i==="}"&&(n--,n===0)){const o=e.slice(t,a+1),s=la(o);if(s)return s}}return null}function nh(r){return la(r)||th(r)||rh(r)}const _i={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var Ai={};const ln=typeof import.meta<"u"&&_i?_i:void 0,cn=typeof globalThis<"u"&&Ai?Ai:void 0;function Go(r){if(r){if(ln&&ln[r]!==void 0)return ln[r];if(cn&&cn[r]!==void 0)return cn[r]}}const ah=(Go("VITE_CHAT_BASE_URL")||"https://groq-endpoint.louispaulet13.workers.dev").replace(/\/$/,"");function ih(r="",e=160){const t=(r||"").toString().trim();return t.length<=e?t:`${t.slice(0,e)}...`}function oh(r){if(!r||typeof r!="object")return r;try{const e=JSON.parse(JSON.stringify(r)),t=n=>{if(!(!n||typeof n!="object")){if(n.type==="object"){n.additionalProperties!==!1&&(n.additionalProperties=!1);const a=n.properties&&typeof n.properties=="object"?n.properties:{},i=Object.keys(a);if(i.length){const l=Array.isArray(n.required)?n.required.filter(u=>typeof u=="string"):[],c=new Set([...l,...i]);n.required=Array.from(c)}Object.values(a).forEach(t);const o=n.patternProperties&&typeof n.patternProperties=="object"?n.patternProperties:{};Object.values(o).forEach(t);const s=n.dependencies&&typeof n.dependencies=="object"?n.dependencies:{};Object.values(s).forEach(l=>{l&&typeof l=="object"&&t(l)})}"format"in n&&delete n.format,n.items&&(Array.isArray(n.items)?n.items.forEach(t):t(n.items));for(const a of["allOf","anyOf","oneOf"])Array.isArray(n[a])&&n[a].forEach(t);for(const a of["not","if","then","else"])n[a]&&typeof n[a]=="object"&&t(n[a]);for(const a of["definitions","$defs"])n[a]&&typeof n[a]=="object"&&Object.values(n[a]).forEach(t)}};return t(e),e}catch{return r}}function sh(r){const e=(r||"").toString().trim();return e?e.replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_-]/g,"").toLowerCase():""}async function $o({baseUrl:r,structure:e,model:t,objectType:n,prompt:a,system:i,temperature:o,strict:s}={}){const l=(r||ah||"").replace(/\/$/,"");if(!l)throw new Error("Missing service base URL for /obj");const c=(Go("VITE_OBJECTMAKER_OBJ_PATH")||"").trim(),u=sh(n||e&&e.type),f=A=>A?u?A.replace("{type}",u).replace(":type",u).replace("%s",u):A.includes("{type}")||A.includes(":type")||A.includes("%s")?null:A:null;let h=[];if(c){const A=f(c);A?h.push(A.startsWith("/")?A:`/${A}`):u&&h.push(c.replace(/\/?$/,"/")+u)}u&&h.push(`/obj/${u}`,`/object/${u}`,`/objects/${u}`),u||h.push("/obj","/object","/objects"),h=Array.from(new Set(h.filter(Boolean).map(A=>A.startsWith("/")?A:`/${A}`)));const p=(a||"").toString().trim();if(!p)throw new Error("Object prompt is required to call /obj");const x="You are an object maker. Produce a single JSON object that strictly conforms to the provided JSON Schema. Do not include commentary or markdown. Only return the JSON object.",v=(i||x).toString().trim()||x,y={schema:oh(e),system:v,user:p},g=typeof o=="number"?o:Number.parseFloat(o);Number.isFinite(g)&&(y.temperature=g),t&&(y.model=t),typeof s=="boolean"&&(y.strict=s);const _=[y];let C=null;for(const A of h){const E=`${l}${A}`;let N=null;for(const I of _)try{const k=await fetch(E,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)}),R=await k.text();if(!k.ok){const j=ih(R);if(k.status===404){N=null;break}N=new Error(`HTTP ${k.status}: ${j} (path ${E})`);continue}let M;try{M=JSON.parse(R)}catch{M=null}if(!M||typeof M!="object")throw new Error("Invalid JSON response from object endpoint");return{payload:M,status:k.status,baseUrl:l,path:A}}catch(k){N=k}if(N)throw N;C=C||new Error(`HTTP 404: endpoint not found at ${E}`)}throw C||new Error("Object creation failed")}const Ci="You are an object maker. Produce a single JSON object that strictly conforms to the provided JSON Schema. Do not include commentary or markdown. Only return the JSON object.",Ho={type:"object",additionalProperties:!1,properties:{name:{type:"string"},size:{type:"string",enum:["small","medium","large"]},crust:{type:"string"},cheese:{type:"string"},toppings:{type:"array",items:{type:"string"}}},required:["name","size","crust","cheese","toppings"]},lh=JSON.stringify(Ho,null,2),ch="make a delicious spicy pizza that respects this schema",uh="pizza",dh="";function fh(r,e){const t=e?[{role:"system",content:e}]:[],n=(r||[]).filter(a=>a&&(a.role==="user"||a.role==="assistant")).map(a=>({role:a.role,content:a.content}));return[...t,...n]}function un(r){const e=(r||"").trim();return e?e.replace(/\/$/,""):""}function zo(r){if(!r||typeof r!="object")return{schema:r,changed:!1};let e=!1;const t=JSON.parse(JSON.stringify(r)),n=a=>{if(!(!a||typeof a!="object")){if(a.type==="object"){a.additionalProperties!==!1&&(a.additionalProperties=!1,e=!0);const i=a.properties&&typeof a.properties=="object"?a.properties:{},o=Object.keys(i);if(o.length){const c=Array.isArray(a.required)?a.required.filter(h=>typeof h=="string"):[],u=new Set(c),f=u.size;for(const h of o)u.add(h);(u.size!==f||c.length!==u.size)&&(a.required=Array.from(u),e=!0)}Object.values(i).forEach(n);const s=a.patternProperties&&typeof a.patternProperties=="object"?a.patternProperties:{};Object.values(s).forEach(n);const l=a.dependencies&&typeof a.dependencies=="object"?a.dependencies:{};Object.values(l).forEach(c=>{c&&typeof c=="object"&&n(c)})}"format"in a&&(delete a.format,e=!0),a.items&&(Array.isArray(a.items)?a.items.forEach(n):n(a.items));for(const i of["allOf","anyOf","oneOf"])Array.isArray(a[i])&&a[i].forEach(n);for(const i of["not","if","then","else"])a[i]&&typeof a[i]=="object"&&n(a[i]);for(const i of["definitions","$defs"])a[i]&&typeof a[i]=="object"&&Object.values(a[i]).forEach(n)}};return n(t),{schema:t,changed:e}}function hh(r,e,t){if(e)return e;const n=JSON.parse(r);if(!n||typeof n!="object")throw new Error("Structure must be a JSON object");if(n.type!=="object")throw new Error('Schema must declare "type":"object"');return t(n),n}function Ei(r,e,t,n,a){const i=zo(r);return i.changed&&(e(i.schema),t(JSON.stringify(i.schema,null,2)),n(a)),i.schema}function ph(r){const[e,t]=w.useState(r?.defaultModel||r?.modelOptions?.[0]),[n,a]=w.useState(un(r?.defaultBaseUrl)),[i,o]=w.useState(""),[s,l]=w.useState(!1),[c,u]=w.useState([]),[f,h]=w.useState(lh),[p,x]=w.useState(Ho),[v,m]=w.useState(""),[y,g]=w.useState(!1),[_,C]=w.useState(null),[A,E]=w.useState(uh),[N,I]=w.useState(dh),[k,R]=w.useState(ch),[M,j]=w.useState(Ci),[G,F]=w.useState("0"),[V,Y]=w.useState("auto"),[ee,fe]=w.useState("");return{experience:r,model:e,setModel:t,baseUrl:n,setBaseUrl:H=>a(H),prompt:i,setPrompt:o,chatLoading:s,chatMessages:c,sendToChat:async()=>{const H=i.trim();if(!H||s)return;fe("");const ue=[...c,{role:"user",content:H,timestamp:Date.now()}];u(ue),o(""),l(!0);try{const T=fh(ue,r?.systemPrompt),q={role:"assistant",content:(await ar(r,T,{model:e,baseUrl:un(n)})).content,timestamp:Date.now()};u(Z=>[...Z,q])}catch(T){fe(T?.message||"Chat failed")}finally{l(!1)}},tryAdoptAssistantJson:()=>{const H=[...c].reverse().find(z=>z.role==="assistant");if(!H){fe("No assistant message to extract JSON from.");return}const ue=nh(H.content);if(!ue){fe("Could not extract JSON. Ensure the assistant returns a single JSON object.");return}if(ue?.type!=="object"){fe('Schema must declare "type":"object".');return}const T=Ei(ue,x,h,m,"Schema adopted from assistant");m("Schema adopted from assistant"),h(JSON.stringify(T,null,2)),x(T),fe("")},structureText:f,setStructureText:H=>{h(H),x(null),m("")},validateStructure:()=>{fe("");try{const H=JSON.parse(f);if(!H||typeof H!="object")throw new Error("Not an object");if(H.type!=="object")throw new Error('Schema must declare "type":"object"');const ue=zo(H);x(ue.schema),ue.changed&&h(JSON.stringify(ue.schema,null,2)),m(ue.changed?"Schema valid (normalized unsupported keywords)":"Schema valid")}catch(H){x(null),fe(`Invalid JSON: ${H?.message||"parse error"}`),m("")}},structureStatus:v,objectType:A,setObjectType:E,objectName:N,setObjectName:I,createPrompt:k,setCreatePrompt:R,systemText:M,setSystemText:j,temperature:G,setTemperature:F,strictMode:V,setStrictMode:Y,handleCreate:async()=>{fe(""),C(null);let H;try{H=hh(f,p,x)}catch(q){fe(q.message);return}const ue=(A||H?.type||"").toString().trim();if(!ue){fe('Type is required to call /obj/{type}. Fill the Type field or include "type" in your structure.');return}const T=k.trim();if(!T){fe("Provide a user prompt for the object generation request.");return}const z=M.trim()||Ci;H=Ei(H,x,h,m,"Schema normalized before create (unsupported keywords removed)"),g(!0);try{const q=un(n),Z=Number.parseFloat(G),we=V==="true"?!0:V==="false"?!1:void 0,{payload:at}=await $o({baseUrl:q,structure:H,model:e,objectType:ue,prompt:T,system:z,temperature:Number.isFinite(Z)?Z:void 0,strict:we});C(at);const ft=(ue||at?.type||H?.type||"object").toString(),ca=(at?.name||N||at?.title||ft).toString();Lf({id:`obj-${Date.now().toString(16)}`,type:ft,title:ca,createdAt:Date.now(),structure:H,result:at,conversation:c,prompt:T,system:z,temperature:Number.isFinite(Z)?Z:void 0,strict:we})}catch(q){fe(q?.message||"Object creation failed")}finally{g(!1)}},createLoading:y,error:ee,resultObj:_}}function xh(){const r=Ln("objectmaker"),e=ph(r);return d.jsx("div",{className:"space-y-8",children:d.jsxs("div",{className:"grid gap-6 md:grid-cols-12",children:[d.jsx(Kf,{baseUrl:e.baseUrl,setBaseUrl:e.setBaseUrl,model:e.model,setModel:e.setModel,experience:r,objectType:e.objectType}),d.jsx(qf,{prompt:e.prompt,setPrompt:e.setPrompt,chatMessages:e.chatMessages,chatLoading:e.chatLoading,onSend:e.sendToChat,onAdopt:e.tryAdoptAssistantJson}),d.jsx(eh,{structureText:e.structureText,setStructureText:e.setStructureText,onValidate:e.validateStructure,objectType:e.objectType,setObjectType:e.setObjectType,objectName:e.objectName,setObjectName:e.setObjectName,createPrompt:e.createPrompt,setCreatePrompt:e.setCreatePrompt,systemText:e.systemText,setSystemText:e.setSystemText,temperature:e.temperature,setTemperature:e.setTemperature,strictMode:e.strictMode,setStrictMode:e.setStrictMode,onCreate:e.handleCreate,createLoading:e.createLoading,error:e.error,resultObj:e.resultObj,structureStatus:e.structureStatus})]})})}function vh({entry:r,onDelete:e}){const[t,n]=w.useState(!1),a=new Date(r.createdAt);return d.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white/80 p-3 shadow-sm dark:border-slate-800 dark:bg-slate-900/60",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"space-y-0.5",children:[d.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-100",children:r.title}),d.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:a.toLocaleString()})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{className:"rounded-md border border-slate-300 px-2 py-1 text-xs text-slate-700 hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-800/60",onClick:()=>n(i=>!i),children:t?"Hide":"View"}),d.jsx("button",{className:"rounded-md border border-red-300 px-2 py-1 text-xs text-red-700 hover:bg-red-50 dark:border-red-800 dark:text-red-300 dark:hover:bg-red-900/30",onClick:e,children:"Delete"})]})]}),t?d.jsxs("div",{className:"mt-3 grid gap-3 lg:grid-cols-2",children:[d.jsxs("div",{children:[d.jsx("div",{className:"mb-1 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"Result"}),d.jsx("pre",{className:"max-h-72 overflow-auto rounded-md border border-slate-200 bg-slate-50 p-2 text-[12px] text-slate-800 dark:border-slate-700 dark:bg-slate-900/50 dark:text-slate-200",children:JSON.stringify(r.result,null,2)})]}),d.jsxs("div",{children:[d.jsx("div",{className:"mb-1 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"Structure"}),d.jsx("pre",{className:"max-h-72 overflow-auto rounded-md border border-slate-200 bg-slate-50 p-2 text-[12px] text-slate-800 dark:border-slate-700 dark:bg-slate-900/50 dark:text-slate-200",children:JSON.stringify(r.structure,null,2)})]}),d.jsxs("div",{className:"lg:col-span-2",children:[d.jsx("div",{className:"mb-1 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"Conversation"}),d.jsx("div",{className:"max-h-56 space-y-2 overflow-auto",children:(r.conversation||[]).map((i,o)=>d.jsxs("div",{className:`rounded-md p-2 text-[12px] ${i.role==="user"?"bg-yellow-50 text-slate-800 dark:bg-yellow-500/10":"bg-slate-50 text-slate-700 dark:bg-slate-800/50 dark:text-slate-200"}`,children:[d.jsx("div",{className:"mb-1 text-[10px] uppercase tracking-wide text-slate-500 dark:text-slate-400",children:i.role}),d.jsx("div",{className:"whitespace-pre-wrap break-words",children:i.content})]},o))})]})]}):null]})}function gh(){const[r,e]=w.useState(()=>aa()),t=w.useMemo(()=>Ff(r),[r]);function n(i){const o=r.filter(s=>s!==i);e(o),Mo(o)}function a(){jo(),e([])}return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h3",{className:"text-base font-semibold text-slate-800 dark:text-slate-100",children:"Object Zoo 🦾"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(ot,{to:"/objectmaker",className:"rounded-md border border-slate-300 px-3 py-1.5 text-sm text-slate-700 hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-800/60",children:"Back to Builder 🛠️"}),r.length>0?d.jsx("button",{onClick:a,className:"rounded-md border border-red-300 px-3 py-1.5 text-sm font-medium text-red-700 hover:bg-red-50 dark:border-red-800 dark:text-red-300 dark:hover:bg-red-900/30",children:"Delete all saved objects 🧹"}):null]})]}),r.length===0?d.jsx("div",{className:"rounded-xl border border-slate-200 bg-white/70 p-6 text-sm text-slate-500 dark:border-slate-800 dark:bg-slate-900/60 dark:text-slate-400",children:"No entries yet. Create objects in the Builder and they will appear here grouped by type. 📝"}):null,[...t.entries()].map(([i,o])=>d.jsxs("section",{className:"space-y-3",children:[d.jsx("div",{className:"flex items-center justify-between",children:d.jsxs("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:[i," — ",o.length," 📦"]})}),d.jsx("div",{className:"grid gap-3 md:grid-cols-2",children:o.map(s=>d.jsx(vh,{entry:s,onDelete:()=>n(s)},s.id))})]},i))]})}const mh=[{value:"all",label:"All news"},{value:"good",label:"Good only"},{value:"bad",label:"Bad only"}];function yh({filter:r,onFilterChange:e}){return d.jsxs("div",{className:"flex flex-col gap-3 p-4",children:[d.jsx("h2",{className:"text-lg font-semibold",children:"News Headlines by Category"}),d.jsx("div",{className:"flex flex-wrap gap-2",children:mh.map(t=>{const n=r===t.value;return d.jsx("button",{type:"button",onClick:()=>e(t.value),className:`rounded-full border px-3 py-1 text-sm transition-colors duration-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 ${n?"border-blue-500 bg-blue-500 text-white shadow-sm focus-visible:ring-blue-500":"border-slate-300 bg-white text-slate-600 hover:border-blue-400 hover:text-blue-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-200 dark:hover:border-blue-400"}`,children:t.label},t.value)})})]})}const Wo={top:"Top Stories",world:"World",us:"US",business:"Business",technology:"Technology",politics:"Politics",health:"Health",entertainment:"Entertainment",travel:"Travel"},Yt=Object.keys(Wo),Nr=[{id:"openai/gpt-oss-20b",label:"GPT-OSS 20B",dotClass:"bg-emerald-500"},{id:"openai/gpt-oss-120b",label:"GPT-OSS 120B",dotClass:"bg-indigo-500"},{id:"moonshotai/kimi-k2-instruct-0905",label:"Kimi K2 Instruct",dotClass:"bg-amber-500"},{id:"meta-llama/llama-4-maverick-17b-128e-instruct",label:"Llama 4 Maverick",dotClass:"bg-rose-500"},{id:"meta-llama/llama-4-scout-17b-16e-instruct",label:"Llama 4 Scout",dotClass:"bg-cyan-500"}];function bh(r){return r&&Nr.find(e=>e.id===r)||null}function wh(r,e,t){return e.reduce((n,a,i)=>{const o=t?.[`${r}-${i}`];return o&&(o.status==="pending"&&(n.hasPending=!0),o.status==="complete"&&(n.hasComplete=!0),o.status==="error"&&(n.hasError=!0)),n},{hasPending:!1,hasComplete:!1,hasError:!1})}function _h(r,e){return r==="all"?!0:!e||!e.sentiment?!1:e.sentiment===r}function Ah(r){return r==="good"?"bg-emerald-50 dark:bg-emerald-900/30 border border-emerald-200 dark:border-emerald-500/40":r==="bad"?"bg-rose-50 dark:bg-rose-900/30 border border-rose-200 dark:border-rose-500/40":"bg-white dark:bg-slate-800 border border-transparent"}function Ch({news:r,loading:e,classifications:t,filter:n,activationCounts:a,onActivateCategory:i,onActivateAllCategories:o}){if(e)return d.jsx("div",{className:"p-4 text-center",children:"Loading news..."});const s=Yt.filter(c=>(r[c]||[]).length>0),l=s.every(c=>(a?.[c]||0)>0);return d.jsxs("div",{className:"space-y-16",children:[d.jsx("section",{className:"rounded-3xl border border-slate-200 bg-white/80 p-6 shadow-sm backdrop-blur dark:border-slate-700 dark:bg-slate-900/60",children:d.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("h2",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100",children:"How classification unfolds"}),d.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:["The top news section autoloads so you get an instant pulse, while the rest wait for you to tap"," ",d.jsx("span",{className:"mx-1 rounded-full bg-slate-200 px-2 py-0.5 text-xs uppercase tracking-wide text-slate-700 dark:bg-slate-700 dark:text-slate-200",children:"Classify"})," ","when you're ready."]}),d.jsx("p",{className:"text-xs italic text-slate-500 dark:text-slate-400",children:"Curious note: our Groq API hummingbird spooks easily—hammering the auto-load can bump into rate limits."})]}),d.jsx("div",{className:"shrink-0",children:d.jsx("button",{type:"button",onClick:()=>{!l&&o&&o()},disabled:!s.length||l,className:`inline-flex items-center gap-2 rounded-full border border-blue-500 bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition-all hover:bg-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 dark:border-blue-400 dark:bg-blue-500 dark:hover:bg-blue-400 ${!s.length||l?"cursor-not-allowed opacity-60 hover:bg-blue-600 dark:hover:bg-blue-500":""}`,children:"Autoload everything"})})]})}),d.jsxs("section",{"aria-label":"Model legend",className:"space-y-3",children:[d.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-gray-500 dark:text-slate-400",children:"Model legend"}),d.jsx("div",{className:"flex flex-wrap items-center gap-4",children:Nr.map(c=>d.jsxs("span",{className:"inline-flex items-center gap-2 text-sm text-gray-600 dark:text-slate-300",children:[d.jsx("span",{className:`h-3 w-3 rounded-full ${c.dotClass}`,"aria-hidden":"true"}),d.jsx("span",{children:c.label})]},c.id))})]}),Yt.map(c=>{const u=(r[c]||[]).slice(0,10);if(!u.length)return null;const{hasPending:f,hasComplete:h,hasError:p}=wh(c,u,t),v=(a?.[c]||0)>0;let m="Classify",y=!u.length;return v&&(f?(m="Classifying…",y=!0):p?(m="Retry classification",y=!1):h?(m="Classified",y=!0):(m="Classify",y=!u.length)),d.jsxs("section",{children:[d.jsxs("div",{className:"relative mb-8",children:[d.jsx("div",{className:"absolute inset-0 flex items-center","aria-hidden":"true",children:d.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),d.jsx("div",{className:"relative flex justify-center",children:d.jsx("span",{className:"bg-white dark:bg-slate-900 px-4 text-2xl font-serif text-gray-500 dark:text-gray-400",children:Wo[c]})})]}),d.jsx("div",{className:"mb-6 flex justify-end",children:d.jsx("button",{type:"button",onClick:()=>{!y&&i&&i(c)},disabled:y,className:`inline-flex items-center gap-2 rounded-full border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-600 shadow-sm transition-colors hover:border-slate-400 hover:text-slate-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:border-slate-600 dark:bg-slate-800 dark:text-slate-200 dark:hover:border-slate-500 dark:hover:text-white ${y?"cursor-not-allowed opacity-60 hover:border-slate-300 hover:text-slate-600 dark:hover:border-slate-600 dark:hover:text-slate-200":""}`,children:m})}),d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:u.map((g,_)=>{const C=`${c}-${_}`,A=t?.[C];if(!_h(n,A))return null;const E=Ah(A?.sentiment),N=bh(A?.modelId);return d.jsx("article",{className:`rounded-lg shadow-lg overflow-hidden transform hover:-translate-y-1 transition-transform duration-300 ${E}`,children:d.jsxs("div",{className:"p-6",children:[d.jsx("a",{href:g.link,target:"_blank",rel:"noopener noreferrer",className:"text-2xl font-serif text-gray-800 dark:text-slate-100 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-300",children:g.title.replace(/Fixture:/g,"")}),d.jsxs("div",{className:"mt-3 text-sm text-gray-500 dark:text-slate-400",children:[new Date(g.publishedAt).toLocaleString()," • ",g.sourceTitle]}),d.jsxs("div",{className:"mt-3 flex items-center gap-3 text-sm",children:[d.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-100 px-2 py-1 text-xs font-medium uppercase tracking-wide text-slate-600 dark:bg-slate-700 dark:text-slate-200",children:A?.sentiment?`${A.sentiment} news`:A?.status==="pending"?"classifying…":"not classified"}),N&&d.jsxs("span",{className:"inline-flex items-center gap-2 text-xs text-gray-500 dark:text-slate-400",children:[d.jsx("span",{className:`h-2.5 w-2.5 rounded-full ${N.dotClass}`,"aria-hidden":"true"}),d.jsx("span",{children:N.label})]}),A?.status==="error"&&d.jsx("span",{className:"text-xs text-rose-500",children:"Classification failed"})]}),d.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[g.sourceTitle&&d.jsx("span",{className:"badge bg-gray-100 dark:bg-slate-700 text-gray-600 dark:text-slate-300 border-gray-200 dark:border-slate-600",children:g.sourceTitle}),g.link&&d.jsx("span",{className:"badge bg-gray-100 dark:bg-slate-700 text-gray-600 dark:text-slate-300 border-gray-200 dark:border-slate-600",children:new URL(g.link).hostname.replace(/^www\./,"")})]}),g.description&&d.jsx("p",{className:"mt-4 text-gray-600 dark:text-slate-300",dangerouslySetInnerHTML:{__html:g.description}})]})},_)})})]},c)})]})}const Eh="https://groq-endpoint.louispaulet13.workers.dev/",Sh={type:"object",additionalProperties:!1,properties:{sentiment:{type:"string",enum:["good","bad"]}},required:["sentiment"]};function Nh(r){const e=["Please classify the following news article while adhering the schema:","",`Title: ${r.title||"N/A"}`];return r.description&&e.push(`Description: ${r.description}`),r.sourceTitle&&e.push(`Source: ${r.sourceTitle}`),r.publishedAt&&e.push(`Published At: ${r.publishedAt}`),r.content&&e.push(`Content: ${r.content}`),e.join(`
`)}function Ih(){const r=Ln("newsanalyzer"),[e,t]=w.useState({}),[n,a]=w.useState(!0),[i,o]=w.useState("all"),[s,l]=w.useState({}),[c,u]=w.useState({}),f=w.useRef(s),h=w.useRef([]),p=w.useRef(!1),x=w.useRef(0),v=w.useRef(!0),m=w.useRef(null);w.useEffect(()=>{f.current=s},[s]),w.useEffect(()=>(v.current=!0,()=>{v.current=!1,m.current&&(clearTimeout(m.current),m.current=null)}),[]);const y=w.useCallback(()=>{if(!v.current||p.current)return;const A=h.current.shift();if(!A)return;p.current=!0;const{category:E,index:N,item:I}=A,k=`${E}-${N}`,R=Nr.length,M=R?Nr[x.current%R]:null;R&&(x.current=(x.current+1)%R),(async()=>{try{const{payload:j}=await $o({structure:Sh,prompt:Nh(I),strict:!0,model:M?.id}),G=typeof j?.sentiment=="string"?j.sentiment.toLowerCase():null,F=G==="good"||G==="bad"?G:null;v.current&&l(V=>{const Y=V[k]?.status,ee=F?"complete":"error";return F&&Y!=="complete"&&Uf(),{...V,[k]:{...V[k]||{},sentiment:F,status:ee,modelId:M?.id||null,modelLabel:M?.label||null,error:F?null:V[k]?.error||null}}})}catch(j){console.error("Failed to classify article",j),v.current&&l(G=>({...G,[k]:{...G[k]||{},sentiment:null,status:"error",modelId:M?.id||null,modelLabel:M?.label||null,error:j?.message||"Classification failed"}}))}finally{p.current=!1,m.current&&clearTimeout(m.current),v.current&&(m.current=setTimeout(()=>{m.current=null,y()},1e3))}})()},[]);w.useEffect(()=>{let A=!1;return(async()=>{a(!0);const N={};if(await Promise.all(Yt.map(async k=>{try{const R=`${Eh}news/${k}`,j=await(await fetch(R,{headers:{Accept:"application/json"}})).json();N[k]=(j?.items||[]).slice(0,10)}catch(R){console.error(`Failed to fetch news for category: ${k}`,R),N[k]=[]}})),A||!v.current)return;h.current=[],p.current=!1,m.current&&(clearTimeout(m.current),m.current=null),l({}),f.current={};const I=Yt[0];u(I?{[I]:1}:{}),t(N),a(!1)})(),()=>{A=!0}},[]);const g=w.useCallback(A=>{const E=e[A]||[];if(!E.length)return;const N=[],I={};E.forEach((k,R)=>{const M=`${A}-${R}`,j=f.current[M];j?.status==="complete"||j?.status==="pending"||(N.push({category:A,index:R,item:k}),I[M]={sentiment:null,status:"pending",modelId:null,modelLabel:null,error:null})}),N.length&&(l(k=>({...k,...I})),h.current.push(...N),y())},[e,y]);w.useEffect(()=>{n||Object.keys(e).length&&Object.entries(c).forEach(([A,E])=>{E>0&&g(A)})},[c,g,n,e]);const _=w.useCallback(A=>{u(E=>({...E,[A]:(E[A]||0)+1}))},[]),C=w.useCallback(()=>{u(A=>{const E={...A};return Yt.forEach(N=>{(e[N]||[]).length&&(E[N]=(E[N]||0)+1)}),E})},[e]);return d.jsx(Xe,{experience:r,navigation:d.jsx(yh,{filter:i,onFilterChange:o}),children:d.jsx(Ch,{news:e,loading:n,classifications:s,filter:i,activationCounts:c,onActivateCategory:_,onActivateAllCategories:C})})}const gr=Ln("sixdegrees"),Oh=gr?.systemPrompt||["You are a playful parody writer. When given any text you respond with a witty parody of it.","Keep responses concise (2-4 sentences) and ensure they clearly riff on the original idea.","Match the length of the original message as closely as possible—no more than about 20% longer than the user's input.","Avoid quoting the original verbatim; reshape it with humor and creative twists."].join(" ");function kh(r){return new Promise(e=>{setTimeout(e,r)})}function Th(){const[r,e]=w.useState(""),[t,n]=w.useState(""),[a,i]=w.useState([]),[o,s]=w.useState(0),[l,c]=w.useState(!1),u=w.useMemo(()=>r.trim().length>0&&!l,[r,l]);async function f(h){if(h.preventDefault(),!gr){n("Unable to load the Six Degrees experience configuration.");return}const p=r.trim();if(!p){n("Please provide a sentence to parody.");return}c(!0),n(""),s(0),i([{label:"Original spark",content:p}]);let x=p;for(let v=1;v<=6;v+=1){s(v);try{x=(await ar(gr,[{role:"system",content:Oh},{role:"user",content:x}],{model:gr.defaultModel})).content.trim(),i(y=>[...y,{label:`Degree ${v}`,content:x}])}catch(m){console.error(m),n(m?.message||"Something went wrong while generating the parody.");break}v<6&&await kh(1e3)}c(!1),s(0)}return d.jsxs("div",{className:"space-y-10",children:[d.jsx("header",{className:"space-y-4 rounded-3xl bg-gradient-to-br from-fuchsia-500 via-purple-500 to-purple-700 p-[1px]",children:d.jsxs("div",{className:"rounded-[calc(1.5rem-1px)] bg-white/95 p-8 shadow-sm dark:bg-slate-900/90",children:[d.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-fuchsia-500",children:"Remix Lab"}),d.jsx("h1",{className:"text-3xl font-semibold text-slate-900 dark:text-slate-100",children:"Six Degrees Of Parody"}),d.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Start with a sentence and watch Groq parody it six times in a row. Each degree only sees the previous punchline, so the humor evolves right in front of you."}),d.jsxs("form",{className:"mt-6 space-y-4",onSubmit:f,children:[d.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",htmlFor:"six-degree-input",children:"Enter your seed sentence"}),d.jsx("textarea",{id:"six-degree-input",className:"w-full rounded-2xl border border-slate-300 bg-white/90 p-4 text-sm text-slate-800 shadow-sm transition focus:border-fuchsia-500 focus:outline-none focus:ring-2 focus:ring-fuchsia-500/30 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-100",rows:3,value:r,onChange:h=>e(h.target.value),placeholder:"Example: Our office coffee machine just became self-aware.",disabled:l}),d.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[d.jsx("button",{type:"submit",disabled:!u,className:"inline-flex items-center gap-2 rounded-full bg-gradient-to-r from-fuchsia-500 to-purple-600 px-5 py-2 text-sm font-semibold text-white shadow transition disabled:cursor-not-allowed disabled:opacity-60",children:l?"Remixing…":"Run six degrees"}),d.jsx("button",{type:"button",onClick:()=>{e(""),i([]),n(""),s(0)},className:"inline-flex items-center rounded-full border border-slate-300 px-4 py-2 text-sm font-medium text-slate-600 transition hover:border-fuchsia-500 hover:text-fuchsia-600 dark:border-slate-700 dark:text-slate-300 dark:hover:border-fuchsia-500 dark:hover:text-fuchsia-400",disabled:l&&a.length<=1,children:"Reset"}),l&&d.jsxs("span",{className:"text-xs font-medium uppercase tracking-wide text-fuchsia-600 dark:text-fuchsia-400",children:["Generating degree ",o," of 6…"]})]}),t&&d.jsx("p",{className:"text-sm text-rose-600 dark:text-rose-400",children:t})]})]})}),!!a.length&&d.jsxs("section",{className:"space-y-6",children:[d.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Evolution timeline"}),d.jsx("ol",{className:"space-y-4",children:a.map((h,p)=>d.jsxs("li",{className:"relative overflow-hidden rounded-3xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900",children:[d.jsxs("div",{className:"flex items-start justify-between gap-3",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-xs uppercase tracking-wider text-fuchsia-500 dark:text-fuchsia-300",children:h.label}),d.jsx("p",{className:"mt-2 whitespace-pre-wrap text-sm text-slate-700 dark:text-slate-200",children:h.content})]}),d.jsx("span",{className:"text-xs font-semibold text-slate-400",children:String(p).padStart(2,"0")})]}),p===a.length-1&&l&&p<6&&d.jsx("div",{className:"absolute inset-x-0 bottom-0 h-1 bg-gradient-to-r from-fuchsia-400 via-purple-500 to-purple-700 animate-pulse"})]},`${h.label}-${p}`))})]})]})}const Zt="allin_flux_image_history",Rh=3600*24*30;function Xo(r){if(!r)return null;const e=typeof r.url=="string"?r.url.trim():"";if(!e)return null;const t=typeof r.prompt=="string"?r.prompt:"",n=typeof r.timestamp=="number"&&Number.isFinite(r.timestamp)?r.timestamp:Date.now();return{url:e,prompt:t,timestamp:n}}function Yo(){const r=Yn(Zt);if(!r)return[];try{const e=JSON.parse(r);return Array.isArray(e)?e.map(Xo).filter(Boolean):[]}catch{return[]}}function Dh(r){if(!Array.isArray(r)||r.length===0){lt(Zt);return}const e=r.map(Xo).filter(Boolean);if(e.length===0){lt(Zt);return}Zn(Zt,e,{maxAgeSeconds:Rh})}function Zo(){lt(Zt)}const Ph=Number.POSITIVE_INFINITY;function Mh(r){const e=new Date(r);return Number.isNaN(e.getTime())?"":e.toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"})}function jh({entry:r,onSelect:e}){return d.jsxs("button",{type:"button",onClick:()=>e(r),className:"flex flex-col items-start gap-1 rounded-xl border border-slate-200 bg-white/70 p-3 text-left shadow-sm transition hover:border-brand-400 hover:bg-brand-50/70 dark:border-slate-700 dark:bg-slate-900/60 dark:hover:border-brand-300",children:[d.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:r.prompt||"Saved image"}),r.timestamp?d.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:Mh(r.timestamp)}):null]})}function Bh({experience:r}){const[e,t]=w.useState("train speeding through a neon cyberpunk tunnel"),[n,a]=w.useState(!1),[i,o]=w.useState(""),[s,l]=w.useState(null),[c,u]=w.useState([]);w.useEffect(()=>{u(Yo())},[]);const f=r?.imageApiBaseUrl||"https://groq-endpoint.louispaulet13.workers.dev";async function h(v){v.preventDefault();const m=e.trim();if(!m){o("Please provide a prompt before generating an image.");return}a(!0),o("");try{const y=new URL(`${f.replace(/\/$/,"")}/flux/${encodeURIComponent(m)}`),g=await fetch(y.toString());if(!g.ok)throw new Error(`Generation failed with status ${g.status}`);const _=await g.json(),C=Array.isArray(_?.images)?_.images:[];if(C.length===0||!C[0]?.url)throw new Error("The service did not return an image URL.");const A=typeof _.prompt=="string"&&_.prompt.trim()?_.prompt.trim():m,E={prompt:A,images:C.map((M,j)=>({url:M?.url||"",index:typeof M?.index=="number"?M.index:j})),raw:_};l(E);const N=Date.now(),I=E.images.filter(M=>M?.url).map((M,j)=>({prompt:A,url:M.url,timestamp:N+j})),k=c.filter(M=>!I.some(j=>j.url===M.url)),R=[...I,...k].slice(0,Ph);u(R),Dh(R)}catch(y){o(y instanceof Error?y.message:"Unexpected error during generation.")}finally{a(!1)}}function p(v){v?.url&&(t(v.prompt||""),l({prompt:v.prompt,images:[{url:v.url,index:0}],raw:null}))}function x(){Zo(),u([])}return d.jsx("div",{className:"space-y-8",children:d.jsxs("section",{className:"grid gap-8 lg:grid-cols-[1.1fr_0.9fr]",children:[d.jsxs("form",{onSubmit:h,className:"space-y-6 rounded-2xl border border-slate-200 bg-white/80 p-6 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[d.jsxs("div",{children:[d.jsxs("label",{htmlFor:"imagegen-prompt",className:"flex items-center justify-between text-sm font-medium text-slate-700 dark:text-slate-200",children:["Image prompt",d.jsx("span",{className:"text-xs font-normal text-slate-400 dark:text-slate-500",children:"Flux @ Groq endpoint"})]}),d.jsx("textarea",{id:"imagegen-prompt",value:e,onChange:v=>t(v.target.value),rows:4,className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-3 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/50 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100",placeholder:"Describe the image you want to see..."}),d.jsxs("p",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:["The request is sent to ",d.jsx("code",{className:"rounded bg-slate-100 px-1 py-0.5 text-[0.7rem] text-slate-700 dark:bg-slate-800 dark:text-slate-200",children:`${f}/flux/<prompt>`}),". We'll display the first image from the response."]})]}),d.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[d.jsxs("button",{type:"submit",disabled:n,className:"inline-flex items-center gap-2 rounded-full bg-brand-600 px-5 py-2.5 text-sm font-medium text-white shadow transition hover:bg-brand-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500/40 focus-visible:ring-offset-2 focus-visible:ring-offset-white disabled:cursor-not-allowed disabled:bg-brand-400 dark:focus-visible:ring-offset-slate-900",children:[d.jsx(Dr,{className:`h-5 w-5 ${n?"animate-spin":""}`}),n?"Generating…":"Generate image"]}),d.jsx(ot,{to:"/imagegen/gallery",className:"inline-flex items-center gap-2 rounded-full border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-600 shadow-sm transition hover:border-brand-400 hover:text-brand-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-400/40 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:border-slate-600 dark:bg-slate-900 dark:text-slate-200",children:"View gallery"}),c.length>0?d.jsxs("button",{type:"button",onClick:x,className:"inline-flex items-center gap-2 rounded-full border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-600 shadow-sm transition hover:border-red-400 hover:text-red-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-400/30 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:border-slate-600 dark:bg-slate-900 dark:text-slate-200 dark:hover:border-red-400 dark:hover:text-red-300 dark:focus-visible:ring-offset-slate-900",children:[d.jsx(Qt,{className:"h-4 w-4"}),"Clear saved images"]}):null]}),i?d.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700 dark:border-red-800 dark:bg-red-900/40 dark:text-red-200",children:i}):null]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white/80 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[d.jsx("div",{className:"border-b border-slate-200 bg-slate-50 px-4 py-3 text-sm font-semibold text-slate-600 dark:border-slate-700 dark:bg-slate-900/80 dark:text-slate-200",children:"Latest result"}),d.jsx("div",{className:"flex flex-col gap-4 p-4",children:s?d.jsxs(d.Fragment,{children:[d.jsx("div",{children:d.jsx("h3",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:s.prompt})}),d.jsx("div",{className:"relative overflow-hidden rounded-xl border border-slate-200 bg-slate-100 dark:border-slate-700 dark:bg-slate-800",children:d.jsx("img",{src:s.images[0].url,alt:s.prompt,className:"h-full w-full object-cover",loading:"lazy"})}),d.jsx("a",{href:s.images[0].url,target:"_blank",rel:"noreferrer",className:"inline-flex w-fit items-center gap-2 rounded-full border border-slate-300 bg-white px-4 py-2 text-xs font-medium text-slate-600 transition hover:border-brand-400 hover:text-brand-600 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-200",children:"Open image in new tab"})]}):d.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Submit a prompt to generate your first image. Your results will appear here."})})]}),d.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white/80 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[d.jsx("div",{className:"border-b border-slate-200 bg-slate-50 px-4 py-3 text-sm font-semibold text-slate-600 dark:border-slate-700 dark:bg-slate-900/80 dark:text-slate-200",children:"Saved images (browser cookie)"}),d.jsx("div",{className:"grid gap-3 p-4 sm:grid-cols-2",children:c.length===0?d.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Generate an image to automatically store the image URL, prompt, and timestamp in a browser cookie for quick acce ss."}):c.map(v=>d.jsx(jh,{entry:v,onSelect:p},`${v.url}-${v.timestamp}`))})]})]})]})})}const $t=12;function Lh(){const[r,e]=w.useState([]),[t,n]=w.useState($t),a=w.useRef(null),i=w.useCallback(()=>{e(Yo())},[]);w.useEffect(()=>{i()},[i]),w.useEffect(()=>{n(u=>{if(r.length===0)return $t;const f=Math.max($t,u);return Math.min(f,r.length)})},[r.length]),w.useEffect(()=>{if(typeof window>"u")return;const u=()=>i();window.addEventListener("focus",u);let f;return typeof document<"u"&&(f=()=>{document.visibilityState==="visible"&&i()},document.addEventListener("visibilitychange",f)),()=>{window.removeEventListener("focus",u),f&&typeof document<"u"&&document.removeEventListener("visibilitychange",f)}},[i]),w.useEffect(()=>{const u=a.current;if(!u)return;if(typeof window>"u"||!("IntersectionObserver"in window)){n(r.length);return}const f=new IntersectionObserver(h=>{h.forEach(p=>{p.isIntersecting&&n(x=>Math.min(x+$t,r.length))})});return f.observe(u),()=>{f.disconnect()}},[r.length]);const o=w.useMemo(()=>r.slice(0,t),[r,t]),s=r.length>0,l=t<r.length;function c(){Zo(),e([]),n($t)}return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-xl font-semibold text-slate-800 dark:text-slate-100",children:"Saved image gallery"}),d.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Browse every image saved to your browser cookie. Scroll to load more or refresh after generating new art."})]}),d.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[d.jsx(ot,{to:"/imagegen",className:"inline-flex items-center gap-2 rounded-full border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-600 shadow-sm transition hover:border-brand-400 hover:text-brand-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-400/40 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:border-slate-600 dark:bg-slate-900 dark:text-slate-200",children:"Back to generator"}),d.jsx("button",{type:"button",onClick:i,className:"inline-flex items-center gap-2 rounded-full border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-600 shadow-sm transition hover:border-sky-400 hover:text-sky-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-400/40 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:border-slate-600 dark:bg-slate-900 dark:text-slate-200",children:"Refresh"}),s?d.jsx("button",{type:"button",onClick:c,className:"inline-flex items-center gap-2 rounded-full border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-600 shadow-sm transition hover:border-red-400 hover:text-red-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-400/30 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:border-slate-600 dark:bg-slate-900 dark:text-slate-200",children:"Clear all"}):null]})]}),s?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:o.map(u=>d.jsxs("article",{className:"flex flex-col overflow-hidden rounded-2xl border border-slate-200 bg-white/80 shadow-sm transition hover:-translate-y-0.5 hover:border-sky-300 dark:border-slate-700 dark:bg-slate-900/60",children:[d.jsx("div",{className:"relative aspect-square w-full overflow-hidden bg-slate-100 dark:bg-slate-800",children:d.jsx("img",{src:u.url,alt:u.prompt||"Generated image",className:"h-full w-full object-cover",loading:"lazy"})}),d.jsxs("div",{className:"space-y-2 p-4",children:[d.jsx("h2",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:u.prompt||"Saved image"}),u.timestamp?d.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:new Date(u.timestamp).toLocaleString()}):null,d.jsx("a",{href:u.url,target:"_blank",rel:"noreferrer",className:"inline-flex w-fit items-center gap-2 rounded-full border border-slate-300 bg-white px-4 py-1.5 text-xs font-medium text-slate-600 transition hover:border-sky-400 hover:text-sky-600 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-200",children:"Open original"})]})]},`${u.url}-${u.timestamp}`))}),d.jsx("div",{ref:a,className:"h-8 w-full","aria-hidden":!0}),l?null:d.jsx("p",{className:"text-center text-sm text-slate-500 dark:text-slate-400",children:"You've reached the end of your saved images."})]}):d.jsx("div",{className:"rounded-2xl border border-dashed border-slate-300 bg-white/60 p-10 text-center text-sm text-slate-500 dark:border-slate-700 dark:bg-slate-900/40 dark:text-slate-400",children:"No saved images yet. Generate something new and it will appear here automatically."})]})}function Si({isActive:r}){return`inline-flex items-center rounded-full border px-3 py-1.5 text-sm font-medium transition border-slate-300 text-slate-700 hover:border-sky-500 hover:text-sky-600 dark:border-slate-700 dark:text-slate-200 ${r?"bg-gradient-to-r from-sky-500 to-cyan-600 text-white border-transparent shadow":""}`}function Ni(){return d.jsxs("nav",{className:"flex flex-wrap items-center gap-2",children:[d.jsx(Ve,{to:"/imagegen",className:Si,end:!0,children:"Generator"}),d.jsx(Ve,{to:"/imagegen/gallery",className:Si,children:"Gallery"})]})}const Fh=[{value:"personal",label:'Personal (8")'},{value:"medium",label:'Medium (12")'},{value:"large",label:'Large (16")'},{value:"xl",label:'Extra large (18")'}],Uh=[{value:"thin and crispy",label:"Thin & crispy"},{value:"hand-tossed",label:"Hand-tossed"},{value:"sourdough",label:"Sourdough artisan"},{value:"deep dish",label:"Deep dish"}],Ii=[{value:"slow simmered San Marzano tomato sauce",label:"Tomato base"},{value:"creamy roasted garlic white sauce",label:"White base"},{value:"pesto infused olive oil",label:"Pesto base"}],Vh=["fresh mozzarella","aged provolone","shaved parmesan","buffalo mozzarella","ricotta dollops","vegan cashew cheese"],Ir=[{id:"pepperoni",label:"Pepperoni"},{id:"wild-mushroom",label:"Wild mushrooms"},{id:"heirloom-tomato",label:"Heirloom tomato"},{id:"roasted-pepper",label:"Roasted peppers"},{id:"prosciutto",label:"Prosciutto"},{id:"basil",label:"Fresh basil"},{id:"arugula",label:"Baby arugula"},{id:"pineapple",label:"Golden pineapple"},{id:"olives",label:"Castelvetrano olives"}],Gh=[{value:"light",label:"Light"},{value:"regular",label:"Regular"},{value:"extra",label:"Extra"}],Oi=[{value:"styled on a rustic wood board with fresh ingredients artfully scattered",label:"Rustic board styling"},{value:"served on a marble slab with elegant cutlery and a linen napkin",label:"Modern marble plating"},{value:"displayed inside a stone oven with glowing embers",label:"Stone oven reveal"},{value:"on a dark slate with overhead sprinkle of herbs and parmesan",label:"Moody slate backdrop"}],ki=[{value:"dramatic softbox studio lighting with controlled highlights",label:"Studio softbox"},{value:"warm golden hour lighting streaming through a window",label:"Golden hour"},{value:"crisp natural daylight with gentle shadows",label:"Natural daylight"},{value:"moody cinematic lighting with selective focus",label:"Cinematic"}];function $h({size:r,crust:e,sauce:t,cheeses:n,toppingSelections:a,finishingNotes:i,presentation:o,lighting:s}){const l=Ir.filter(c=>a[c.id]?.enabled).map(c=>`- ${c.label}: ${a[c.id].amount}`);return["Create an imaginative yet photorealistic AI image prompt for a pizza photo shoot.","Honor every detail from the configuration, emphasise gourmet styling, texture, and lighting.","Limit the response to a single paragraph under 75 words with no lists or line breaks.","Do not include camera brands or quotation marks.","","Pizza configuration:",`• Size: ${r}`,`• Crust: ${e}`,`• Sauce: ${t}`,`• Cheeses: ${n.length>0?n.join(", "):"none"}`,l.length>0?`• Toppings:
`+l.join(`
`):"• Toppings: none",`• Presentation: ${o}`,`• Lighting: ${s}`,i?`• Extra direction: ${i}`:"• Extra direction: none"].filter(Boolean).join(`
`)}function Hh({size:r,crust:e,sauce:t,cheeses:n,toppingSelections:a,presentation:i,lighting:o,finishingNotes:s}){const l=Ir.filter(f=>a[f.id]?.enabled),c=l.length>0?l.map(f=>`${f.label.toLowerCase()} (${a[f.id].amount})`).join(", "):"no additional toppings",u=n.length>0?n.join(", "):"no cheese";return`A ${r} pizza on ${e} crust with ${t}, featuring ${u} and ${c}. Styled ${i} under ${o}${s?`, with extra direction: ${s}`:""}.`}function zh({experience:r}){const[e,t]=w.useState("medium"),[n,a]=w.useState("hand-tossed"),[i,o]=w.useState(Ii[0].value),[s,l]=w.useState(["fresh mozzarella"]),[c,u]=w.useState(()=>Ir.reduce((P,X)=>({...P,[X.id]:{enabled:["pepperoni","basil"].includes(X.id),amount:"regular"}}),{})),[f,h]=w.useState(Oi[0].value),[p,x]=w.useState(ki[0].value),[v,m]=w.useState(""),[y,g]=w.useState(!1),[_,C]=w.useState(""),[A,E]=w.useState(""),[N,I]=w.useState(""),[k,R]=w.useState([]);w.useEffect(()=>{R(Uo())},[]);const M=w.useMemo(()=>Hh({size:e,crust:n,sauce:i,cheeses:s,toppingSelections:c,presentation:f,lighting:p,finishingNotes:v}),[e,n,i,s,c,f,p,v]),j=(r?.imageApiBaseUrl||"https://groq-endpoint.louispaulet13.workers.dev").replace(/\/$/,"");function G(P){const X=new Date(P);return Number.isNaN(X.getTime())?"":X.toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"})}function F(P){l(X=>X.includes(P)?X.filter(ce=>ce!==P):[...X,P])}function V(P){u(X=>({...X,[P]:{...X[P],enabled:!X[P]?.enabled}}))}function Y(P,X){u(ce=>({...ce,[P]:{...ce[P],amount:X}}))}async function ee(P){P.preventDefault(),C(""),g(!0);try{const X=$h({size:e,crust:n,sauce:i,cheeses:s,toppingSelections:c,presentation:f,lighting:p,finishingNotes:v}),oe=await ar(r,[{role:"system",content:"You are a Michelin-level food stylist who writes elite image prompts for photorealistic pizza photography. Respond with one sentence under 75 words capturing texture, ingredients, setting, and lighting."},{role:"user",content:X}],{model:r?.defaultModel}),ve=typeof oe?.content=="string"?oe.content.trim():"";if(!ve)throw new Error("The prompt service returned an empty description.");E(ve);const nt=new URL(`${j}/flux/${encodeURIComponent(ve)}`),H=await fetch(nt.toString());if(!H.ok)throw new Error(`Image generation failed with status ${H.status}`);const T=(await H.json())?.images?.[0]?.url;if(!T)throw new Error("The image service did not return a usable URL.");I(T);const z=Date.now(),q={prompt:ve,url:T,summary:M,timestamp:z};R(Z=>{const we=Z.filter(ft=>ft.url!==q.url),at=[q,...we].slice(0,sa);return Hf(at),at})}catch(X){I(""),E(""),C(X instanceof Error?X.message:"Unexpected error while generating your pizza image.")}finally{g(!1)}}function fe(){Vo(),R([])}return d.jsxs("section",{className:"grid gap-6 lg:grid-cols-[minmax(0,0.95fr)_minmax(0,1.05fr)]",children:[d.jsxs("form",{onSubmit:ee,className:"space-y-6 rounded-2xl border border-slate-200 bg-white/80 p-6 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[d.jsxs("header",{className:"space-y-1",children:[d.jsx("h2",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100",children:"Configure your pizza"}),d.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Dial in every detail, then let Groq draft a studio-grade prompt and render the pie on the right."})]}),d.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"pizza-size",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Size"}),d.jsx("select",{id:"pizza-size",value:e,onChange:P=>t(P.target.value),className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100",children:Fh.map(P=>d.jsx("option",{value:P.value,children:P.label},P.value))})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"pizza-crust",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Crust style"}),d.jsx("select",{id:"pizza-crust",value:n,onChange:P=>a(P.target.value),className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100",children:Uh.map(P=>d.jsx("option",{value:P.value,children:P.label},P.value))})]})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Sauce base"}),d.jsx("div",{className:"mt-3 grid gap-2 sm:grid-cols-3",children:Ii.map(P=>{const X=i===P.value;return d.jsx("button",{type:"button",onClick:()=>o(P.value),className:`rounded-xl border px-3 py-2 text-left text-sm font-medium transition ${X?"border-brand-500 bg-brand-50 text-brand-700 shadow-sm dark:border-brand-400 dark:bg-brand-500/10 dark:text-brand-200":"border-slate-300 bg-white text-slate-600 hover:border-brand-300 hover:text-brand-600 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-300"}`,children:P.label},P.value)})})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Cheeses"}),d.jsx("div",{className:"mt-3 grid gap-2 sm:grid-cols-2",children:Vh.map(P=>{const X=s.includes(P);return d.jsxs("label",{className:`flex items-center gap-3 rounded-xl border px-3 py-2 text-sm font-medium transition ${X?"border-brand-500 bg-brand-50 text-brand-700 shadow-sm dark:border-brand-400 dark:bg-brand-500/10 dark:text-brand-200":"border-slate-300 bg-white text-slate-600 hover:border-brand-300 hover:text-brand-600 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-300"}`,children:[d.jsx("input",{type:"checkbox",checked:X,onChange:()=>F(P),className:"h-4 w-4 rounded border-slate-300 text-brand-600 focus:ring-brand-500"}),P]},P)})})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Toppings & intensity"}),d.jsx("div",{className:"space-y-2",children:Ir.map(P=>{const X=c[P.id],ce=X?.enabled;return d.jsxs("div",{className:"flex flex-col gap-2 rounded-xl border border-slate-200 bg-white/70 p-3 shadow-sm sm:flex-row sm:items-center sm:justify-between dark:border-slate-700 dark:bg-slate-900/40",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("button",{type:"button",onClick:()=>V(P.id),className:`inline-flex items-center rounded-full px-3 py-1 text-sm font-medium transition ${ce?"bg-brand-600 text-white shadow hover:bg-brand-500":"border border-slate-300 text-slate-600 hover:border-brand-300 hover:text-brand-600 dark:border-slate-600 dark:text-slate-300"}`,children:ce?"Included":"Add"}),d.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:P.label})]}),d.jsxs("div",{className:"sm:w-40",children:[d.jsxs("label",{htmlFor:`${P.id}-amount`,className:"sr-only",children:[P.label," amount"]}),d.jsx("select",{id:`${P.id}-amount`,value:X?.amount||"regular",onChange:oe=>Y(P.id,oe.target.value),disabled:!ce,className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-600 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 disabled:cursor-not-allowed disabled:opacity-60 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-300",children:Gh.map(oe=>d.jsx("option",{value:oe.value,children:oe.label},oe.value))})]})]},P.id)})})]}),d.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"pizza-presentation",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Presentation style"}),d.jsx("select",{id:"pizza-presentation",value:f,onChange:P=>h(P.target.value),className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100",children:Oi.map(P=>d.jsx("option",{value:P.value,children:P.label},P.value))})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"pizza-lighting",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Lighting direction"}),d.jsx("select",{id:"pizza-lighting",value:p,onChange:P=>x(P.target.value),className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100",children:ki.map(P=>d.jsx("option",{value:P.value,children:P.label},P.value))})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"pizza-notes",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Final direction"}),d.jsx("textarea",{id:"pizza-notes",value:v,onChange:P=>m(P.target.value),rows:3,placeholder:"Any additional art direction or plating requests...",className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100"})]}),_?d.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700 dark:border-red-800 dark:bg-red-900/30 dark:text-red-200",children:_}):null,d.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[d.jsxs("button",{type:"submit",disabled:y,className:"inline-flex items-center gap-2 rounded-full bg-brand-600 px-5 py-2.5 text-sm font-medium text-white shadow transition hover:bg-brand-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500/40 focus-visible:ring-offset-2 focus-visible:ring-offset-white disabled:cursor-not-allowed disabled:bg-brand-400 dark:focus-visible:ring-offset-slate-900",children:[d.jsx(Dr,{className:`h-5 w-5 ${y?"animate-spin":""}`}),y?"Baking…":"Bake this pizza image"]}),d.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:M})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white/80 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[d.jsx("div",{className:"border-b border-slate-200 bg-slate-50 px-4 py-3 text-sm font-semibold text-slate-600 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-200",children:"Generated prompt"}),d.jsx("div",{className:"p-5",children:A?d.jsx("p",{className:"text-sm leading-relaxed text-slate-700 dark:text-slate-200",children:A}):d.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Configure your pie and click ",d.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-200",children:"Bake this pizza image"})," to see the LLM-crafted prompt."]})})]}),d.jsxs("div",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white/80 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[d.jsx("div",{className:"border-b border-slate-200 bg-slate-50 px-4 py-3 text-sm font-semibold text-slate-600 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-200",children:"Pizza render"}),d.jsx("div",{className:"flex min-h-[320px] items-center justify-center bg-slate-100 dark:bg-slate-800",children:N?d.jsx("img",{src:N,alt:A||"Generated pizza",className:"h-full w-full object-cover",loading:"lazy"}):y?d.jsxs("div",{className:"flex flex-col items-center gap-2 text-sm text-slate-500 dark:text-slate-400",children:[d.jsx("span",{className:"h-10 w-10 animate-spin rounded-full border-2 border-slate-300 border-t-brand-500","aria-hidden":!0}),"Baking your pizza photo…"]}):d.jsx("p",{className:"px-6 text-center text-sm text-slate-500 dark:text-slate-400",children:"Your pizza masterpiece will appear here once the image service finishes rendering."})})]}),d.jsxs("div",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white/80 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[d.jsxs("div",{className:"flex items-center justify-between gap-3 border-b border-slate-200 bg-slate-50 px-4 py-3 text-sm font-semibold text-slate-600 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-200",children:[d.jsx("span",{children:"Saved pizza gallery"}),k.length>0?d.jsxs("button",{type:"button",onClick:fe,className:"inline-flex items-center gap-2 rounded-full border border-slate-300 bg-white px-3 py-1.5 text-xs font-medium text-slate-600 shadow-sm transition hover:border-red-400 hover:text-red-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-400/40 focus-visible:ring-offset-1 focus-visible:ring-offset-white dark:border-slate-600 dark:bg-slate-900 dark:text-slate-200 dark:hover:border-red-400 dark:hover:text-red-300",children:[d.jsx(Qt,{className:"h-4 w-4"}),"Clear gallery"]}):null]}),d.jsx("div",{className:"p-5",children:k.length>0?d.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:k.map(P=>d.jsxs("article",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white/80 shadow-sm transition hover:-translate-y-0.5 hover:shadow-lg dark:border-slate-700 dark:bg-slate-900/70",children:[d.jsx("div",{className:"relative h-40 w-full overflow-hidden border-b border-slate-200 bg-slate-100 dark:border-slate-700 dark:bg-slate-800",children:d.jsx("img",{src:P.url,alt:P.prompt||"Saved pizza render",className:"h-full w-full object-cover",loading:"lazy"})}),d.jsxs("div",{className:"space-y-2 p-4",children:[d.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-100",children:P.prompt||"Saved pizza prompt"}),P.summary?d.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:P.summary}):null,d.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-[0.7rem] text-slate-400 dark:text-slate-500",children:[d.jsx("span",{children:G(P.timestamp)}),d.jsx("a",{href:P.url,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1 rounded-full border border-slate-300 px-2 py-1 text-[0.7rem] font-medium text-slate-600 transition hover:border-brand-400 hover:text-brand-600 dark:border-slate-600 dark:text-slate-200",children:"Open ↗"})]})]})]},`${P.url}-${P.timestamp}`))}):d.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Every generated pizza is saved to a browser cookie so you can revisit it later. Bake a pie to see it here."})})]})]})]})}const Or="allin_car_gallery",Wh=3600*24*30,kr=40;function Ko(){return typeof document>"u"?null:document}function Xh(r){const e=Ko();if(!e||!e.cookie)return"";const n=e.cookie.split("; ").find(a=>a.startsWith(`${r}=`));return n?n.split("=").slice(1).join("="):""}function Nn(r,e,t=Wh){const n=Ko();if(!n)return;const a=encodeURIComponent(e),i=["path=/",`max-age=${t}`];n.cookie=`${r}=${a}; ${i.join("; ")}`}function qo(r){return!r||typeof r.url!="string"||!r.url.trim()?null:{prompt:typeof r.prompt=="string"?r.prompt:"",url:r.url,summary:typeof r.summary=="string"?r.summary:"",timestamp:typeof r.timestamp=="number"?r.timestamp:Date.now()}}function Yh(){const r=Xh(Or);if(!r)return[];try{const e=JSON.parse(decodeURIComponent(r));return Array.isArray(e)?e.map(t=>qo(t)).filter(Boolean).slice(0,kr):[]}catch{return[]}}function Zh(r){if(!Array.isArray(r)||r.length===0){Nn(Or,"[]");return}const e=r.map(t=>qo(t)).filter(Boolean).slice(0,kr);Nn(Or,JSON.stringify(e))}function Kh(){Nn(Or,"[]",0)}const In="__custom__",Ti=[{value:"Tesla",label:"Tesla"},{value:"Lamborghini",label:"Lamborghini"},{value:"Porsche",label:"Porsche"},{value:"Mercedes-Benz",label:"Mercedes-Benz"},{value:"Bugatti",label:"Bugatti"},{value:"Aston Martin",label:"Aston Martin"},{value:"Pagani",label:"Pagani"},{value:In,label:"Custom (follow your prompt)"}],Ri=[{value:"sleek two-door coupe",label:"Coupe"},{value:"low-slung roadster",label:"Roadster"},{value:"wide-body hypercar",label:"Hypercar"},{value:"muscular grand tourer",label:"Grand tourer"},{value:"futuristic concept car",label:"Concept"},{value:"lifted adventure rig",label:"Adventure rig"}],Di=[{value:"production supercar",label:"Production supercar"},{value:"bespoke concept car",label:"Concept showpiece"},{value:"vintage-inspired restomod",label:"Restomod classic"},{value:"electric performance car",label:"Electric performance"},{value:"off-road performance build",label:"Off-road performance"}],Pi=[{value:"mirror-gloss paint with crisp reflections",label:"Mirror gloss"},{value:"satin paint with velvety highlights",label:"Satin finish"},{value:"matte paint with soft diffused reflections",label:"Matte finish"},{value:"color-shifting pearlescent paint",label:"Pearlescent"}],Mi=[{value:"dramatic three-quarter front view",label:"3/4 front"},{value:"side profile stance shot",label:"Side profile"},{value:"low angle hero shot",label:"Low angle hero"},{value:"rear three-quarter tracking shot",label:"3/4 rear"},{value:"top-down showcase of the silhouette",label:"Top-down"}],ji=[{value:"set against a misty mountain landscape",label:"Mountain landscape"},{value:"coasting beside a neon-lit city center",label:"City center"},{value:"parked on a coastal seascape overlook",label:"Seascape overlook"},{value:"charging within a futuristic studio environment",label:"Futuristic studio"},{value:"sprinting across a desert salt flat",label:"Desert salt flat"}],Bi=[{value:"glowing golden hour lighting with long highlights",label:"Golden hour"},{value:"moody cinematic lighting with crisp rim lights",label:"Cinematic"},{value:"soft diffused studio lighting with controlled reflections",label:"Soft studio"},{value:"nocturnal lighting with neon accents and reflections",label:"Neon night"},{value:"clear daylight with sharp contrast and defined shadows",label:"Clear daylight"}],qh=[{value:"subtle",label:"Subtle"},{value:"balanced",label:"Balanced"},{value:"bold",label:"Bold"}],Tr=[{id:"aero-kit",label:"Aerodynamic body kit",description:"splitters, diffusers, and side skirts"},{id:"light-trail",label:"Motion light trails",description:"streaks implying speed"},{id:"door-style",label:"Signature doors open",description:"gullwing or scissor doors raised"},{id:"wheel-glow",label:"Illuminated wheel accents",description:"glowing rims or brake calipers"},{id:"graphic",label:"Custom livery graphics",description:"stripes, numbers, or sponsor decals"},{id:"environmental-effects",label:"Environmental effects",description:"mist, dust, or water spray"}];function Jh({brand:r,color:e,wheelCount:t,bodyStyle:n,carType:a,finish:i,viewpoint:o,scenery:s,lighting:l,detailSelections:c,finishingNotes:u}){const f=Tr.filter(h=>c[h.id]?.enabled).map(h=>`- ${h.label}: ${c[h.id].intensity}`);return["Craft a vivid yet concise AI image prompt for an automotive exterior photoshoot.","Describe only the visible design, stance, setting, and lighting—avoid mechanical specifications or interior commentary.","Respond with one paragraph under 80 words and do not use lists or line breaks.","","Car configuration:",`• Brand: ${r}`,`• Exterior color: ${e||"unspecified"}`,`• Wheel count: ${t||"unspecified"}`,`• Body style: ${n}`,`• Car type: ${a}`,`• Finish: ${i}`,f.length>0?`• Distinctive details:
`+f.join(`
`):"• Distinctive details: none",`• Viewpoint: ${o}`,`• Scenery: ${s}`,`• Lighting: ${l}`,u?`• Extra direction: ${u}`:"• Extra direction: none"].filter(Boolean).join(`
`)}function Qh({brand:r,color:e,wheelCount:t,bodyStyle:n,carType:a,finish:i,viewpoint:o,scenery:s,lighting:l,detailSelections:c,finishingNotes:u}){const f=Tr.filter(x=>c[x.id]?.enabled),h=f.length>0?f.map(x=>`${x.label.toLowerCase()} (${c[x.id].intensity})`).join(", "):"no extra flourishes",p=(()=>{if(typeof t=="number")return Number.isFinite(t)?`${t}-wheel`:"custom-wheel";const x=typeof t=="string"?t.trim():"";return x?`${x}-wheel`:"custom-wheel"})();return[`A ${r} ${n} portrayed as a ${a}`,`finished in ${e||"a custom hue"} with ${i}`,`shown from a ${o} in ${s}`,`under ${l}, featuring ${h}`,u?`extra direction: ${u}`:null,`wheel setup: ${p}`].filter(Boolean).join(", ")}function e1({experience:r}){const[e,t]=w.useState(Ti[0].value),[n,a]=w.useState(""),[i,o]=w.useState("candy apple red"),[s,l]=w.useState("4"),[c,u]=w.useState(Ri[0].value),[f,h]=w.useState(Di[0].value),[p,x]=w.useState(Pi[0].value),[v,m]=w.useState(Mi[0].value),[y,g]=w.useState(ji[0].value),[_,C]=w.useState(Bi[0].value),[A,E]=w.useState(()=>Tr.reduce((T,z)=>({...T,[z.id]:{enabled:["aero-kit","graphic"].includes(z.id),intensity:"balanced"}}),{})),[N,I]=w.useState(""),[k,R]=w.useState(!1),[M,j]=w.useState(""),[G,F]=w.useState(""),[V,Y]=w.useState(""),[ee,fe]=w.useState([]),P=e===In?n.trim()||"bespoke concept car brand guided by the prompt":e;w.useEffect(()=>{fe(Yh())},[]);const X=w.useMemo(()=>Qh({brand:P,color:i,wheelCount:s,bodyStyle:c,carType:f,finish:p,viewpoint:v,scenery:y,lighting:_,detailSelections:A,finishingNotes:N}),[P,i,s,c,f,p,v,y,_,A,N]),ce=(r?.imageApiBaseUrl||"https://groq-endpoint.louispaulet13.workers.dev").replace(/\/$/,"");function oe(T){const z=new Date(T);return Number.isNaN(z.getTime())?"":z.toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"})}function ve(T){E(z=>({...z,[T]:{...z[T],enabled:!z[T]?.enabled}}))}function nt(T,z){E(q=>({...q,[T]:{...q[T],intensity:z}}))}async function H(T){T.preventDefault(),j(""),R(!0);try{const z=Jh({brand:P,color:i,wheelCount:s.trim(),bodyStyle:c,carType:f,finish:p,viewpoint:v,scenery:y,lighting:_,detailSelections:A,finishingNotes:N}),Z=await ar(r,[{role:"system",content:"You are an automotive exterior stylist who writes high-end image prompts for hero car photography. Focus on what is visible and cinematic without mentioning internal mechanics."},{role:"user",content:z}],{model:r?.defaultModel}),we=typeof Z?.content=="string"?Z.content.trim():"";if(!we)throw new Error("The prompt service returned an empty description.");F(we);const at=new URL(`${ce}/flux/${encodeURIComponent(we)}`),ft=await fetch(at.toString());if(!ft.ok)throw new Error(`Image generation failed with status ${ft.status}`);const Vr=(await ft.json())?.images?.[0]?.url;if(!Vr)throw new Error("The image service did not return a usable URL.");Y(Vr);const es=Date.now(),ua={prompt:we,url:Vr,summary:X,timestamp:es};fe(ts=>{const rs=ts.filter(ns=>ns.url!==ua.url),da=[ua,...rs].slice(0,kr);return Zh(da),da})}catch(z){Y(""),F(""),j(z instanceof Error?z.message:"Unexpected error while generating your car image.")}finally{R(!1)}}function ue(){Kh(),fe([])}return d.jsxs("section",{className:"grid gap-6 lg:grid-cols-[minmax(0,0.95fr)_minmax(0,1.05fr)]",children:[d.jsxs("form",{onSubmit:H,className:"space-y-6 rounded-2xl border border-slate-200 bg-white/80 p-6 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[d.jsxs("header",{className:"space-y-1",children:[d.jsx("h2",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100",children:"Configure your hero car"}),d.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Shape every visible detail, then let Groq author a cinematic prompt and render the shot on the right."})]}),d.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"car-brand",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Brand"}),d.jsx("select",{id:"car-brand",value:e,onChange:T=>t(T.target.value),className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100",children:Ti.map(T=>d.jsx("option",{value:T.value,children:T.label},T.value))}),e===In?d.jsxs("div",{className:"mt-3 space-y-2",children:[d.jsx("label",{htmlFor:"car-brand-custom",className:"text-xs font-medium uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Custom brand direction"}),d.jsx("input",{id:"car-brand-custom",type:"text",value:n,onChange:T=>a(T.target.value),placeholder:"e.g. art-deco inspired electric marque",className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100"}),d.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Leave blank to let Groq invent a marque that matches your prompt."})]}):null]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"car-color",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Exterior color"}),d.jsx("input",{id:"car-color",type:"text",value:i,onChange:T=>o(T.target.value),placeholder:"e.g. deep sapphire blue",className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100"})]})]}),d.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"car-body-style",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Body style"}),d.jsx("select",{id:"car-body-style",value:c,onChange:T=>u(T.target.value),className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100",children:Ri.map(T=>d.jsx("option",{value:T.value,children:T.label},T.value))})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"car-type",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Car type"}),d.jsx("select",{id:"car-type",value:f,onChange:T=>h(T.target.value),className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100",children:Di.map(T=>d.jsx("option",{value:T.value,children:T.label},T.value))})]})]}),d.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"car-wheels",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Number of wheels"}),d.jsx("input",{id:"car-wheels",type:"number",min:"0",value:s,onChange:T=>l(T.target.value),className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100"}),d.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:"Enter any wheel count—even unconventional ones."})]}),d.jsxs("div",{children:[d.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Paint finish"}),d.jsx("div",{className:"mt-3 grid gap-2",children:Pi.map(T=>{const z=p===T.value;return d.jsx("button",{type:"button",onClick:()=>x(T.value),className:`rounded-xl border px-3 py-2 text-left text-sm font-medium transition ${z?"border-brand-500 bg-brand-50 text-brand-700 shadow-sm dark:border-brand-400 dark:bg-brand-500/10 dark:text-brand-200":"border-slate-300 bg-white text-slate-600 hover:border-brand-300 hover:text-brand-600 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-300"}`,children:T.label},T.value)})})]})]}),d.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"car-viewpoint",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Viewpoint"}),d.jsx("select",{id:"car-viewpoint",value:v,onChange:T=>m(T.target.value),className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100",children:Mi.map(T=>d.jsx("option",{value:T.value,children:T.label},T.value))})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"car-scenery",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Scenery"}),d.jsx("select",{id:"car-scenery",value:y,onChange:T=>g(T.target.value),className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100",children:ji.map(T=>d.jsx("option",{value:T.value,children:T.label},T.value))})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"car-lighting",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Lighting"}),d.jsx("select",{id:"car-lighting",value:_,onChange:T=>C(T.target.value),className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100",children:Bi.map(T=>d.jsx("option",{value:T.value,children:T.label},T.value))})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Signature details"}),d.jsx("div",{className:"space-y-2",children:Tr.map(T=>{const z=A[T.id],q=z?.enabled;return d.jsxs("div",{className:"flex flex-col gap-2 rounded-xl border border-slate-200 bg-white/70 p-3 shadow-sm sm:flex-row sm:items-center sm:justify-between dark:border-slate-700 dark:bg-slate-900/40",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("button",{type:"button",onClick:()=>ve(T.id),className:`inline-flex items-center rounded-full px-3 py-1 text-sm font-medium transition ${q?"bg-brand-600 text-white shadow hover:bg-brand-500":"border border-slate-300 text-slate-600 hover:border-brand-300 hover:text-brand-600 dark:border-slate-600 dark:text-slate-300"}`,children:q?"Included":"Add"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:T.label}),d.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:T.description})]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("label",{className:"text-xs font-medium uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Intensity"}),d.jsx("select",{value:z?.intensity||"balanced",onChange:Z=>nt(T.id,Z.target.value),className:"rounded-lg border border-slate-300 bg-white px-2 py-1 text-xs text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100",children:qh.map(Z=>d.jsx("option",{value:Z.value,children:Z.label},Z.value))})]})]},T.id)})})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"car-notes",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Extra direction"}),d.jsx("textarea",{id:"car-notes",value:N,onChange:T=>I(T.target.value),rows:3,placeholder:"Optional styling notes visible from the exterior...",className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100"})]}),d.jsxs("div",{className:"flex items-center justify-between gap-3",children:[d.jsx("button",{type:"submit",disabled:k,className:"inline-flex items-center gap-2 rounded-xl bg-brand-600 px-4 py-2 text-sm font-semibold text-white shadow transition hover:bg-brand-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-400/60 disabled:cursor-not-allowed disabled:bg-brand-400",children:k?d.jsxs(d.Fragment,{children:[d.jsx(Dr,{className:"h-4 w-4 animate-spin","aria-hidden":"true"}),"Generating…"]}):"Generate car image"}),d.jsxs("button",{type:"button",onClick:ue,className:"inline-flex items-center gap-2 rounded-xl border border-slate-300 px-3 py-2 text-xs font-semibold uppercase tracking-wide text-slate-500 transition hover:border-red-400 hover:text-red-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-400/50 dark:border-slate-600 dark:text-slate-300",children:[d.jsx(Qt,{className:"h-4 w-4","aria-hidden":"true"}),"Clear gallery"]})]}),M?d.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:M}):null,d.jsxs("div",{className:"rounded-xl bg-slate-50 p-4 text-sm text-slate-600 shadow-inner dark:bg-slate-900/40 dark:text-slate-300",children:[d.jsx("p",{className:"font-medium text-slate-700 dark:text-slate-100",children:"Quick summary"}),d.jsx("p",{className:"mt-1 leading-relaxed",children:X})]})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("section",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white/70 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[d.jsx("header",{className:"border-b border-slate-200 bg-slate-50/80 px-5 py-4 dark:border-slate-700 dark:bg-slate-900/40",children:d.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-300",children:"Prompt & render"})}),d.jsx("div",{className:"space-y-4 p-5",children:G?d.jsxs("article",{className:"space-y-3",children:[d.jsx("div",{className:"rounded-lg border border-slate-200 bg-white/90 p-3 text-sm leading-relaxed text-slate-700 shadow-sm dark:border-slate-700 dark:bg-slate-900/60 dark:text-slate-200",children:G}),V?d.jsx("img",{src:V,alt:"Generated hero car",className:"w-full rounded-xl border border-slate-200 bg-slate-100 object-cover shadow-sm dark:border-slate-700 dark:bg-slate-900"}):null]}):d.jsx("div",{className:"rounded-lg border border-dashed border-slate-300 bg-white/40 p-6 text-center text-sm text-slate-400 dark:border-slate-700 dark:bg-slate-900/20 dark:text-slate-500",children:"Configure the ride and generate to see your prompt and render here."})})]}),d.jsxs("section",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white/70 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[d.jsxs("header",{className:"flex items-center justify-between border-b border-slate-200 bg-slate-50/80 px-5 py-4 dark:border-slate-700 dark:bg-slate-900/40",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-300",children:"Car gallery"}),d.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:"Recent renders are stored in a cookie on this device."})]}),d.jsxs("span",{className:"rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-600 dark:bg-slate-800 dark:text-slate-300",children:[ee.length,"/",kr]})]}),ee.length>0?d.jsx("ul",{className:"divide-y divide-slate-200 dark:divide-slate-800",children:ee.map(T=>d.jsxs("li",{className:"flex flex-col gap-4 p-5 sm:flex-row sm:items-start",children:[d.jsx("img",{src:T.url,alt:"Saved hero car render",className:"h-32 w-full rounded-xl border border-slate-200 object-cover shadow-sm sm:h-24 sm:w-40 dark:border-slate-700"}),d.jsxs("div",{className:"flex-1 space-y-2",children:[d.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-100",children:T.summary}),d.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:T.prompt}),d.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:["Saved ",oe(T.timestamp)]})]})]},T.url))}):d.jsx("p",{className:"p-5 text-sm text-slate-500 dark:text-slate-400",children:"Generate a car to begin filling your gallery."})]})]})]})}const Kt="allin_svg_prompt_history",t1=3600*24*30,On=8;function Jo(r){if(typeof r!="string")return"";const e=r.trim();return e||""}function r1({dataUrl:r,svgMarkup:e}){if(typeof r=="string"&&r.startsWith("data:image/svg+xml"))return r;const t=Jo(e);return t?`data:image/svg+xml;utf8,${encodeURIComponent(t)}`:""}function Qo(r){if(!r)return null;const e=typeof r.prompt=="string"?r.prompt.trim():"",t=Jo(r.svgMarkup),n=typeof r.dataUrl=="string"?r.dataUrl.trim():"";if(!t&&!n)return null;const a=typeof r.timestamp=="number"&&Number.isFinite(r.timestamp)?r.timestamp:Date.now();return{prompt:e,svgMarkup:t,dataUrl:r1({dataUrl:n,svgMarkup:t}),timestamp:a}}function n1(){const r=Yn(Kt);if(!r)return[];try{const e=JSON.parse(r);return Array.isArray(e)?e.map(Qo).filter(Boolean):[]}catch{return[]}}function a1(r){if(!Array.isArray(r)||r.length===0){lt(Kt);return}const e=r.map(t=>{const n=Qo(t);if(!n)return null;const{dataUrl:a,...i}=n;return i}).filter(Boolean).slice(0,On);if(e.length===0){lt(Kt);return}Zn(Kt,e,{maxAgeSeconds:t1})}function i1(){lt(Kt)}function kn({dataUrl:r,svgMarkup:e}){return typeof r=="string"&&r.startsWith("data:image/svg+xml")?r:typeof e=="string"&&e.trim()?`data:image/svg+xml;utf8,${encodeURIComponent(e.trim())}`:""}function o1(r){const e=new Date(r);return Number.isNaN(e.getTime())?"":e.toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"})}function s1({entry:r,onSelect:e}){const t=kn(r);return d.jsxs("button",{type:"button",onClick:()=>e(r),className:"group flex flex-col gap-2 overflow-hidden rounded-xl border border-slate-200 bg-white/80 p-3 text-left shadow-sm transition hover:border-brand-400 hover:bg-brand-50/70 dark:border-slate-700 dark:bg-slate-900/60 dark:hover:border-brand-300",children:[d.jsx("div",{className:"relative overflow-hidden rounded-lg border border-slate-200 bg-slate-100 dark:border-slate-700 dark:bg-slate-800",children:t?d.jsx("img",{src:t,alt:r.prompt||"Saved SVG preview",className:"h-24 w-full object-contain",loading:"lazy"}):d.jsx("div",{className:"flex h-24 items-center justify-center text-xs text-slate-400 dark:text-slate-500",children:"No preview"})}),d.jsxs("div",{children:[d.jsx("p",{className:"line-clamp-2 text-sm font-medium text-slate-700 dark:text-slate-200",children:r.prompt||"Saved request"}),r.timestamp?d.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:o1(r.timestamp)}):null]})]})}function l1({experience:r}){const[e,t]=w.useState("A cheerful robot painting geometric trees"),[n,a]=w.useState(!1),[i,o]=w.useState(""),[s,l]=w.useState(null),[c,u]=w.useState([]),[f,h]=w.useState(!1);w.useEffect(()=>{u(n1())},[]),w.useEffect(()=>{if(!f)return;const g=setTimeout(()=>h(!1),1500);return()=>clearTimeout(g)},[f]);const p=r?.svgApiBaseUrl||r?.defaultBaseUrl||"https://groq-endpoint.louispaulet13.workers.dev";async function x(g){g.preventDefault();const _=e.trim();if(!_){o("Please enter a prompt for the SVG generator.");return}a(!0),o("");try{const C=new URL(`${p.replace(/\/$/,"")}/svg/${encodeURIComponent(_)}`),A=await fetch(C.toString());if(!A.ok){let V=`Generation failed with status ${A.status}`;try{const Y=await A.json();Y?.error&&(V=Y.error)}catch{}throw new Error(V)}const E=await A.json(),N=typeof E?.svg=="string"?E.svg.trim():"",I=kn({dataUrl:typeof E?.dataUrl=="string"?E.dataUrl.trim():"",svgMarkup:N});if(!I)throw new Error("The SVG response did not include renderable markup.");const k=typeof E?.prompt=="string"&&E.prompt.trim()?E.prompt.trim():_;l({prompt:k,dataUrl:I,svgMarkup:N,raw:E});const M=Date.now(),j={prompt:k,dataUrl:I,svgMarkup:N,timestamp:M},G=c.filter(V=>V.dataUrl!==j.dataUrl||V.prompt!==j.prompt),F=[j,...G].slice(0,On);u(F),a1(F)}catch(C){o(C instanceof Error?C.message:"Unexpected error during SVG generation.")}finally{a(!1)}}function v(g){g&&(t(g.prompt||""),l({prompt:g.prompt,dataUrl:kn(g),svgMarkup:g.svgMarkup||"",raw:null}))}function m(){i1(),u([])}async function y(){if(s?.svgMarkup)try{await navigator.clipboard.writeText(s.svgMarkup),h(!0)}catch(g){console.error("Failed to copy SVG markup",g)}}return d.jsx("div",{className:"space-y-8",children:d.jsxs("section",{className:"grid gap-8 lg:grid-cols-[1.1fr_0.9fr]",children:[d.jsxs("form",{onSubmit:x,className:"space-y-6 rounded-2xl border border-slate-200 bg-white/80 p-6 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[d.jsxs("div",{children:[d.jsxs("label",{htmlFor:"svglab-prompt",className:"flex items-center justify-between text-sm font-medium text-slate-700 dark:text-slate-200",children:["SVG prompt",d.jsx("span",{className:"text-xs font-normal text-slate-400 dark:text-slate-500",children:"/svg worker endpoint"})]}),d.jsx("textarea",{id:"svglab-prompt",value:e,onChange:g=>t(g.target.value),rows:4,className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-3 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/50 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100",placeholder:"Describe what the SVG should contain..."}),d.jsxs("p",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:["Requests are sent to ",d.jsx("code",{className:"rounded bg-slate-100 px-1 py-0.5 text-[0.7rem] text-slate-700 dark:bg-slate-800 dark:text-slate-200",children:`${p}/svg/<prompt>`}),". We encode the prompt so spaces and punctuation are preserved."]})]}),d.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[d.jsxs("button",{type:"submit",disabled:n,className:"inline-flex items-center gap-2 rounded-full bg-brand-600 px-5 py-2.5 text-sm font-medium text-white shadow transition hover:bg-brand-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500/40 focus-visible:ring-offset-2 focus-visible:ring-offset-white disabled:cursor-not-allowed disabled:bg-brand-400 dark:focus-visible:ring-offset-slate-900",children:[d.jsx(Dr,{className:`h-5 w-5 ${n?"animate-spin":""}`}),n?"Generating…":"Generate SVG"]}),c.length>0?d.jsxs("button",{type:"button",onClick:m,className:"inline-flex items-center gap-2 rounded-full border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-600 shadow-sm transition hover:border-red-400 hover:text-red-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-400/30 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:border-slate-600 dark:bg-slate-900 dark:text-slate-200 dark:hover:border-red-400 dark:hover:text-red-300 dark:focus-visible:ring-offset-slate-900",children:[d.jsx(Qt,{className:"h-4 w-4"}),"Clear saved prompts"]}):null]}),i?d.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700 dark:border-red-800 dark:bg-red-900/40 dark:text-red-200",children:i}):null]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white/80 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[d.jsx("div",{className:"border-b border-slate-200 bg-slate-50 px-4 py-3 text-sm font-semibold text-slate-600 dark:border-slate-700 dark:bg-slate-900/80 dark:text-slate-200",children:"Latest result"}),d.jsx("div",{className:"flex flex-col gap-4 p-4",children:s?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-start justify-between gap-4",children:[d.jsx("h3",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:s.prompt}),s.svgMarkup?d.jsxs("button",{type:"button",onClick:y,className:"inline-flex items-center gap-2 rounded-full border border-slate-300 bg-white px-3 py-1 text-xs font-medium text-slate-600 transition hover:border-brand-400 hover:text-brand-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-400/40 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:border-slate-600 dark:bg-slate-900 dark:text-slate-200",children:[d.jsx(ps,{className:"h-4 w-4"}),f?"Copied!":"Copy SVG"]}):null]}),d.jsx("div",{className:"relative overflow-hidden rounded-xl border border-slate-200 bg-slate-100 dark:border-slate-700 dark:bg-slate-800",children:d.jsx("img",{src:s.dataUrl,alt:s.prompt,className:"h-full w-full object-contain",loading:"lazy"})}),s.raw?d.jsxs("details",{className:"rounded-xl border border-slate-200 bg-slate-50 px-4 py-3 text-xs text-slate-600 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-300",children:[d.jsx("summary",{className:"cursor-pointer text-sm font-semibold",children:"View raw response"}),d.jsx("pre",{className:"mt-2 whitespace-pre-wrap break-all text-[0.7rem] leading-relaxed",children:JSON.stringify(s.raw,null,2)})]}):null]}):d.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Submit a prompt to generate your first SVG. The rendered artwork will appear here."})})]}),d.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white/80 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[d.jsx("div",{className:"border-b border-slate-200 bg-slate-50 px-4 py-3 text-sm font-semibold text-slate-600 dark:border-slate-700 dark:bg-slate-900/80 dark:text-slate-200",children:"Saved prompts (cookie-based gallery)"}),d.jsx("div",{className:"grid gap-3 p-4 sm:grid-cols-2",children:c.length===0?d.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Generate an SVG to store the prompt and markup in a browser cookie. Up to ",On," recent entries are saved for quick recall."]}):c.map(g=>d.jsx(s1,{entry:g,onSelect:v},`${g.timestamp}-${g.prompt}`))})]})]})]})})}function Rr(){return Rr=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Rr.apply(this,arguments)}function c1(r,e){if(r==null)return{};var t={},n=Object.keys(r),a,i;for(i=0;i<n.length;i++)a=n[i],!(e.indexOf(a)>=0)&&(t[a]=r[a]);return t}var u1=["cdnSuffix","cdnUrl","countryCode","style","svg"],d1="https://cdn.jsdelivr.net/gh/lipis/flag-icons/flags/4x3/",f1="svg",h1=127397,Li=function(e){var t=e.cdnSuffix,n=t===void 0?f1:t,a=e.cdnUrl,i=a===void 0?d1:a,o=e.countryCode,s=e.style,l=e.svg,c=l===void 0?!1:l,u=c1(e,u1);if(typeof o!="string")return null;if(c){var f=""+i+o.toLowerCase()+"."+n;return w.createElement("img",Object.assign({},u,{src:f,style:Rr({display:"inline-block",width:"1em",height:"1em",verticalAlign:"middle"},s)}))}var h=o.toUpperCase().replace(/./g,function(p){return String.fromCodePoint(p.charCodeAt(0)+h1)});return w.createElement("span",Object.assign({role:"img"},u,{style:Rr({display:"inline-block",fontSize:"1em",lineHeight:"1em",verticalAlign:"middle"},s)}),h)};const dn=[{name:"Russia",code:"RU"},{name:"Germany",code:"DE"},{name:"United Kingdom",code:"GB"},{name:"France",code:"FR"},{name:"Italy",code:"IT"},{name:"Spain",code:"ES"},{name:"Ukraine",code:"UA"},{name:"Poland",code:"PL"},{name:"Romania",code:"RO"},{name:"Netherlands",code:"NL"}],p1=1e3,x1=r=>({country:r,status:"idle",prompt:"",dataUrl:"",error:""}),v1=r=>{const e=typeof r?.dataUrl=="string"?r.dataUrl.trim():"";if(e.startsWith("data:image/svg+xml"))return e;const t=typeof r?.svg=="string"?r.svg.trim():"";return t?`data:image/svg+xml;utf8,${encodeURIComponent(t)}`:""};function g1({entry:r}){const{country:e,dataUrl:t,error:n,prompt:a,status:i}=r;return d.jsxs("article",{className:"space-y-3 rounded-2xl border border-slate-200 bg-white/80 p-5 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[d.jsxs("header",{className:"space-y-2 text-center",children:[d.jsxs("div",{className:"inline-flex items-center gap-2 text-lg font-semibold text-slate-800 dark:text-slate-100",children:[d.jsx(Li,{countryCode:e.code,svg:!0,title:`${e.name} reference flag`,className:"text-2xl"}),d.jsx("span",{children:e.name})]}),d.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Unicode reference flag for quick color checks."})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("div",{className:"overflow-hidden rounded-xl border border-slate-200 bg-slate-50 p-2 dark:border-slate-700 dark:bg-slate-800",children:d.jsx(Li,{countryCode:e.code,svg:!0,title:`${e.name} official flag`,className:"block h-24 w-full"})}),d.jsx("div",{className:"overflow-hidden rounded-xl border border-brand-200 bg-white p-2 text-center dark:border-brand-500/60 dark:bg-slate-900",children:t?d.jsx("img",{src:t,alt:`Generated ${e.name} flag`,className:"h-24 w-full object-contain",loading:"lazy"}):d.jsx("div",{className:"flex h-24 items-center justify-center text-xs font-medium text-slate-400 dark:text-slate-500",children:i==="error"?"Generation failed":i==="loading"?"Loading flag…":"Pending request"})})]}),d.jsxs("footer",{className:"space-y-2 text-xs text-slate-500 dark:text-slate-400",children:[d.jsx("p",{className:"rounded-lg bg-slate-100 px-3 py-2 font-medium text-slate-600 dark:bg-slate-800/70 dark:text-slate-300",children:a||`Waiting to request the ${e.name} flag…`}),n?d.jsx("p",{className:"text-red-500 dark:text-red-400",children:n}):null]})]})}function m1({experience:r}){const[e,t]=w.useState(()=>dn.map(x1)),n=w.useMemo(()=>(r?.svgApiBaseUrl||r?.defaultBaseUrl||"https://groq-endpoint.louispaulet13.workers.dev").replace(/\/$/,""),[r]);return w.useEffect(()=>{let a=!1,i;const o=(l,c)=>t(u=>u.map((f,h)=>h===l?{...f,...c}:f));async function s(l){if(a||l>=dn.length)return;const u=`Generate an accurate flat SVG of the national flag of ${dn[l].name}. Respect the official proportions and palette.`;o(l,{status:"loading",prompt:u,error:"",dataUrl:""});try{const f=new URL(`${n}/svg/${encodeURIComponent(u)}`),h=await fetch(f.toString());if(!h.ok)throw new Error(`Request failed with status ${h.status}`);const p=await h.json(),x=v1(p);if(!x)throw new Error("The response did not include SVG markup.");o(l,{status:"done",dataUrl:x,prompt:typeof p?.prompt=="string"&&p.prompt.trim()?p.prompt.trim():u})}catch(f){o(l,{status:"error",error:f instanceof Error?f.message:"Unexpected error while generating the flag."})}finally{a||(i=setTimeout(()=>s(l+1),p1))}}return i=setTimeout(()=>s(0),200),()=>{a=!0,i&&clearTimeout(i)}},[n]),d.jsxs("div",{className:"space-y-8",children:[d.jsxs("section",{className:"space-y-3 rounded-2xl border border-slate-200 bg-white/80 p-6 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[d.jsx("h2",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100",children:"European flag roll call"}),d.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:["We stream prompts into the ",d.jsx("code",{className:"rounded bg-slate-100 px-1 py-0.5 text-[0.7rem] text-slate-700 dark:bg-slate-800 dark:text-slate-200",children:"/svg"})," worker route one second apart so the gallery fills gradually alongside a Unicode flag reference."]})]}),d.jsx("section",{className:"grid gap-6 md:grid-cols-2 xl:grid-cols-3",children:e.map(a=>d.jsx(g1,{entry:a},a.country.code))})]})}function y1(){return d.jsx(Hl,{children:d.jsx(Pl,{children:d.jsx(Zl,{children:d.jsxs(dl,{children:[d.jsx(Ie,{path:"/",element:d.jsx(ec,{})}),Mt.map(r=>r.id==="allergyfinder"?d.jsxs(w.Fragment,{children:[d.jsx(Ie,{path:r.path,element:d.jsx(Xe,{experience:r,navigation:d.jsx(hi,{}),children:d.jsx(di,{experience:r})})}),d.jsx(Ie,{path:`${r.path}/cookies`,element:d.jsx(Xe,{experience:r,navigation:d.jsx(hi,{}),children:d.jsx(Bf,{})})})]},r.id):r.id==="objectmaker"?d.jsxs(w.Fragment,{children:[d.jsx(Ie,{path:r.path,element:d.jsx(Xe,{experience:r,navigation:d.jsx(wi,{}),children:d.jsx(xh,{})})}),d.jsx(Ie,{path:`${r.path}/zoo`,element:d.jsx(Xe,{experience:r,navigation:d.jsx(wi,{}),children:d.jsx(gh,{})})})]},r.id):r.id==="imagegen"?d.jsxs(w.Fragment,{children:[d.jsx(Ie,{path:r.path,element:d.jsx(Xe,{experience:r,navigation:d.jsx(Ni,{}),children:d.jsx(Bh,{experience:r})})}),d.jsx(Ie,{path:`${r.path}/gallery`,element:d.jsx(Xe,{experience:r,navigation:d.jsx(Ni,{}),children:d.jsx(Lh,{})})})]},r.id):r.id==="svglab"?d.jsx(Ie,{path:r.path,element:d.jsx(Xe,{experience:r,children:d.jsx(l1,{experience:r})})},r.id):r.id==="flagfoundry"?d.jsx(Ie,{path:r.path,element:d.jsx(Xe,{experience:r,children:d.jsx(m1,{experience:r})})},r.id):r.id==="pizzamaker"?d.jsx(Ie,{path:r.path,element:d.jsx(Xe,{experience:r,children:d.jsx(zh,{experience:r})})},r.id):r.id==="carmaker"?d.jsx(Ie,{path:r.path,element:d.jsx(Xe,{experience:r,children:d.jsx(e1,{experience:r})})},r.id):r.id==="newsanalyzer"?d.jsx(Ie,{path:r.path,element:d.jsx(Ih,{})},r.id):r.id==="sixdegrees"?d.jsx(Ie,{path:r.path,element:d.jsx(Th,{})},r.id):d.jsx(Ie,{path:r.path,element:d.jsx(Xe,{experience:r,children:d.jsx(di,{experience:r})})},r.id)),d.jsx(Ie,{path:"/profile",element:d.jsx(Zf,{})}),d.jsx(Ie,{path:"/about",element:d.jsx(tc,{})}),d.jsx(Ie,{path:"*",element:d.jsx(cl,{to:"/",replace:!0})})]})})})})}xs.createRoot(document.getElementById("root")).render(d.jsx(vs.StrictMode,{children:d.jsx(y1,{})}));
