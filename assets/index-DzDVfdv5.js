const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/STLViewer-De5lyolA.js","assets/stl-MxQKiD49.js","assets/react-DhO428nI.js","assets/markdown-BoWTVge5.js"])))=>i.map(i=>d[i]);
import{a as A,j as p,F as $a,b as Xi,c as zi,d as Yi,e as Zi,f as Ki,g as qi,h as Ji,i as Qi,k as eo,l as Wa,m as to,n as Xa,o as ro,p as no,R as ao}from"./react-DhO428nI.js";import{_ as io}from"./stl-MxQKiD49.js";import{H as je,j as za,t as Ya,p as Za,a as oo,b as Ka,m as so,d as qa,c as uo}from"./markdown-BoWTVge5.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}})();/**
 * react-router v7.9.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Pn="popstate";function co(r={}){function e(a,i){let{pathname:o="/",search:s="",hash:u=""}=xt(a.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Yr("",{pathname:o,search:s,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(a,i){let o=a.document.querySelector("base"),s="";if(o&&o.getAttribute("href")){let u=a.location.href,c=u.indexOf("#");s=c===-1?u:u.slice(0,c)}return s+"#"+(typeof i=="string"?i:Ut(i))}function n(a,i){Xe(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(i)})`)}return fo(e,t,n,r)}function ie(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Xe(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function lo(){return Math.random().toString(36).substring(2,10)}function kn(r,e){return{usr:r.state,key:r.key,idx:e}}function Yr(r,e,t=null,n){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?xt(e):e,state:t,key:e&&e.key||n||lo()}}function Ut({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function xt(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substring(n),r=r.substring(0,n)),r&&(e.pathname=r)}return e}function fo(r,e,t,n={}){let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,s="POP",u=null,c=l();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function l(){return(o.state||{idx:null}).idx}function f(){s="POP";let g=l(),w=g==null?null:g-c;c=g,u&&u({action:s,location:x.location,delta:w})}function d(g,w){s="PUSH";let y=Yr(x.location,g,w);t&&t(y,g),c=l()+1;let _=kn(y,c),b=x.createHref(y);try{o.pushState(_,"",b)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;a.location.assign(b)}i&&u&&u({action:s,location:x.location,delta:1})}function h(g,w){s="REPLACE";let y=Yr(x.location,g,w);t&&t(y,g),c=l();let _=kn(y,c),b=x.createHref(y);o.replaceState(_,"",b),i&&u&&u({action:s,location:x.location,delta:0})}function v(g){return ho(g)}let x={get action(){return s},get location(){return r(a,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return a.addEventListener(Pn,f),u=g,()=>{a.removeEventListener(Pn,f),u=null}},createHref(g){return e(a,g)},createURL:v,encodeLocation(g){let w=v(g);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:d,replace:h,go(g){return o.go(g)}};return x}function ho(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ie(t,"No window.location.(origin|href) available to create URL");let n=typeof r=="string"?r:Ut(r);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function Ja(r,e,t="/"){return po(r,e,t,!1)}function po(r,e,t,n){let a=typeof e=="string"?xt(e):e,i=nt(a.pathname||"/",t);if(i==null)return null;let o=Qa(r);vo(o);let s=null;for(let u=0;s==null&&u<o.length;++u){let c=So(i);s=Eo(o[u],c,n)}return s}function Qa(r,e=[],t=[],n="",a=!1){let i=(o,s,u=a,c)=>{let l={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(n)&&u)return;ie(l.relativePath.startsWith(n),`Absolute route path "${l.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(n.length)}let f=tt([n,l.relativePath]),d=t.concat(l);o.children&&o.children.length>0&&(ie(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),Qa(o.children,e,d,f,u)),!(o.path==null&&!o.index)&&e.push({path:f,score:Ao(f,o.index),routesMeta:d})};return r.forEach((o,s)=>{if(o.path===""||!o.path?.includes("?"))i(o,s);else for(let u of ei(o.path))i(o,s,!0,u)}),e}function ei(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,a=t.endsWith("?"),i=t.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=ei(n.join("/")),s=[];return s.push(...o.map(u=>u===""?i:[i,u].join("/"))),a&&s.push(...o),s.map(u=>r.startsWith("/")&&u===""?"/":u)}function vo(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:bo(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var xo=/^:[\w-]+$/,go=3,mo=2,yo=1,wo=10,_o=-2,Mn=r=>r==="*";function Ao(r,e){let t=r.split("/"),n=t.length;return t.some(Mn)&&(n+=_o),e&&(n+=mo),t.filter(a=>!Mn(a)).reduce((a,i)=>a+(xo.test(i)?go:i===""?yo:wo),n)}function bo(r,e){return r.length===e.length&&r.slice(0,-1).every((n,a)=>n===e[a])?r[r.length-1]-e[e.length-1]:0}function Eo(r,e,t=!1){let{routesMeta:n}=r,a={},i="/",o=[];for(let s=0;s<n.length;++s){let u=n[s],c=s===n.length-1,l=i==="/"?e:e.slice(i.length)||"/",f=ur({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},l),d=u.route;if(!f&&c&&t&&!n[n.length-1].route.index&&(f=ur({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},l)),!f)return null;Object.assign(a,f.params),o.push({params:a,pathname:tt([i,f.pathname]),pathnameBase:To(tt([i,f.pathnameBase])),route:d}),f.pathnameBase!=="/"&&(i=tt([i,f.pathnameBase]))}return o}function ur(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=Co(r.path,r.caseSensitive,r.end),a=e.match(t);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),s=a.slice(1);return{params:n.reduce((c,{paramName:l,isOptional:f},d)=>{if(l==="*"){let v=s[d]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const h=s[d];return f&&!h?c[l]=void 0:c[l]=(h||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:r}}function Co(r,e=!1,t=!0){Xe(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let n=[],a="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,s,u)=>(n.push({paramName:s,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(n.push({paramName:"*"}),a+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":r!==""&&r!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),n]}function So(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Xe(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function nt(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}function Io(r,e="/"){let{pathname:t,search:n="",hash:a=""}=typeof r=="string"?xt(r):r;return{pathname:t?t.startsWith("/")?t:Oo(t,e):e,search:Ro(n),hash:Do(a)}}function Oo(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Cr(r,e,t,n){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function No(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function cn(r){let e=No(r);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function ln(r,e,t,n=!1){let a;typeof r=="string"?a=xt(r):(a={...r},ie(!a.pathname||!a.pathname.includes("?"),Cr("?","pathname","search",a)),ie(!a.pathname||!a.pathname.includes("#"),Cr("#","pathname","hash",a)),ie(!a.search||!a.search.includes("#"),Cr("#","search","hash",a)));let i=r===""||a.pathname==="",o=i?"/":a.pathname,s;if(o==null)s=t;else{let f=e.length-1;if(!n&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;a.pathname=d.join("/")}s=f>=0?e[f]:"/"}let u=Io(a,s),c=o&&o!=="/"&&o.endsWith("/"),l=(i||o===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(c||l)&&(u.pathname+="/"),u}var tt=r=>r.join("/").replace(/\/\/+/g,"/"),To=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),Ro=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,Do=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function Po(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var ti=["POST","PUT","PATCH","DELETE"];new Set(ti);var ko=["GET",...ti];new Set(ko);var Ct=A.createContext(null);Ct.displayName="DataRouter";var xr=A.createContext(null);xr.displayName="DataRouterState";A.createContext(!1);var ri=A.createContext({isTransitioning:!1});ri.displayName="ViewTransition";var Mo=A.createContext(new Map);Mo.displayName="Fetchers";var Bo=A.createContext(null);Bo.displayName="Await";var Ke=A.createContext(null);Ke.displayName="Navigation";var Gt=A.createContext(null);Gt.displayName="Location";var et=A.createContext({outlet:null,matches:[],isDataRoute:!1});et.displayName="Route";var fn=A.createContext(null);fn.displayName="RouteError";function Lo(r,{relative:e}={}){ie(St(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=A.useContext(Ke),{hash:a,pathname:i,search:o}=$t(r,{relative:e}),s=i;return t!=="/"&&(s=i==="/"?t:tt([t,i])),n.createHref({pathname:s,search:o,hash:a})}function St(){return A.useContext(Gt)!=null}function ct(){return ie(St(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(Gt).location}var ni="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ai(r){A.useContext(Ke).static||A.useLayoutEffect(r)}function ii(){let{isDataRoute:r}=A.useContext(et);return r?Ko():Fo()}function Fo(){ie(St(),"useNavigate() may be used only in the context of a <Router> component.");let r=A.useContext(Ct),{basename:e,navigator:t}=A.useContext(Ke),{matches:n}=A.useContext(et),{pathname:a}=ct(),i=JSON.stringify(cn(n)),o=A.useRef(!1);return ai(()=>{o.current=!0}),A.useCallback((u,c={})=>{if(Xe(o.current,ni),!o.current)return;if(typeof u=="number"){t.go(u);return}let l=ln(u,JSON.parse(i),a,c.relative==="path");r==null&&e!=="/"&&(l.pathname=l.pathname==="/"?e:tt([e,l.pathname])),(c.replace?t.replace:t.push)(l,c.state,c)},[e,t,i,a,r])}A.createContext(null);function $t(r,{relative:e}={}){let{matches:t}=A.useContext(et),{pathname:n}=ct(),a=JSON.stringify(cn(t));return A.useMemo(()=>ln(r,JSON.parse(a),n,e==="path"),[r,a,n,e])}function jo(r,e){return oi(r,e)}function oi(r,e,t,n,a){ie(St(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=A.useContext(Ke),{matches:o}=A.useContext(et),s=o[o.length-1],u=s?s.params:{},c=s?s.pathname:"/",l=s?s.pathnameBase:"/",f=s&&s.route;{let y=f&&f.path||"";si(c,!f||y.endsWith("*")||y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y==="/"?"*":`${y}/*`}">.`)}let d=ct(),h;if(e){let y=typeof e=="string"?xt(e):e;ie(l==="/"||y.pathname?.startsWith(l),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${l}" but pathname "${y.pathname}" was given in the \`location\` prop.`),h=y}else h=d;let v=h.pathname||"/",x=v;if(l!=="/"){let y=l.replace(/^\//,"").split("/");x="/"+v.replace(/^\//,"").split("/").slice(y.length).join("/")}let g=Ja(r,{pathname:x});Xe(f||g!=null,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),Xe(g==null||g[g.length-1].route.element!==void 0||g[g.length-1].route.Component!==void 0||g[g.length-1].route.lazy!==void 0,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=$o(g&&g.map(y=>Object.assign({},y,{params:Object.assign({},u,y.params),pathname:tt([l,i.encodeLocation?i.encodeLocation(y.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:tt([l,i.encodeLocation?i.encodeLocation(y.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:y.pathnameBase])})),o,t,n,a);return e&&w?A.createElement(Gt.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...h},navigationType:"POP"}},w):w}function Uo(){let r=Zo(),e=Po(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",r),o=A.createElement(A.Fragment,null,A.createElement("p",null,"üíø Hey developer üëã"),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:i},"ErrorBoundary")," or"," ",A.createElement("code",{style:i},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),t?A.createElement("pre",{style:a},t):null,o)}var Vo=A.createElement(Uo,null),Ho=class extends A.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.unstable_onError?this.props.unstable_onError(r,e):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?A.createElement(et.Provider,{value:this.props.routeContext},A.createElement(fn.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Go({routeContext:r,match:e,children:t}){let n=A.useContext(Ct);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),A.createElement(et.Provider,{value:r},t)}function $o(r,e=[],t=null,n=null,a=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let i=r,o=t?.errors;if(o!=null){let c=i.findIndex(l=>l.route.id&&o?.[l.route.id]!==void 0);ie(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let s=!1,u=-1;if(t)for(let c=0;c<i.length;c++){let l=i[c];if((l.route.HydrateFallback||l.route.hydrateFallbackElement)&&(u=c),l.route.id){let{loaderData:f,errors:d}=t,h=l.route.loader&&!f.hasOwnProperty(l.route.id)&&(!d||d[l.route.id]===void 0);if(l.route.lazy||h){s=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((c,l,f)=>{let d,h=!1,v=null,x=null;t&&(d=o&&l.route.id?o[l.route.id]:void 0,v=l.route.errorElement||Vo,s&&(u<0&&f===0?(si("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,x=null):u===f&&(h=!0,x=l.route.hydrateFallbackElement||null)));let g=e.concat(i.slice(0,f+1)),w=()=>{let y;return d?y=v:h?y=x:l.route.Component?y=A.createElement(l.route.Component,null):l.route.element?y=l.route.element:y=c,A.createElement(Go,{match:l,routeContext:{outlet:c,matches:g,isDataRoute:t!=null},children:y})};return t&&(l.route.ErrorBoundary||l.route.errorElement||f===0)?A.createElement(Ho,{location:t.location,revalidation:t.revalidation,component:v,error:d,children:w(),routeContext:{outlet:null,matches:g,isDataRoute:!0},unstable_onError:n}):w()},null)}function dn(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Wo(r){let e=A.useContext(Ct);return ie(e,dn(r)),e}function Xo(r){let e=A.useContext(xr);return ie(e,dn(r)),e}function zo(r){let e=A.useContext(et);return ie(e,dn(r)),e}function hn(r){let e=zo(r),t=e.matches[e.matches.length-1];return ie(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function Yo(){return hn("useRouteId")}function Zo(){let r=A.useContext(fn),e=Xo("useRouteError"),t=hn("useRouteError");return r!==void 0?r:e.errors?.[t]}function Ko(){let{router:r}=Wo("useNavigate"),e=hn("useNavigate"),t=A.useRef(!1);return ai(()=>{t.current=!0}),A.useCallback(async(a,i={})=>{Xe(t.current,ni),t.current&&(typeof a=="number"?r.navigate(a):await r.navigate(a,{fromRouteId:e,...i}))},[r,e])}var Bn={};function si(r,e,t){!e&&!Bn[r]&&(Bn[r]=!0,Xe(!1,t))}A.memo(qo);function qo({routes:r,future:e,state:t,unstable_onError:n}){return oi(r,void 0,t,n,e)}function Jo({to:r,replace:e,state:t,relative:n}){ie(St(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=A.useContext(Ke);Xe(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=A.useContext(et),{pathname:o}=ct(),s=ii(),u=ln(r,cn(i),o,n==="path"),c=JSON.stringify(u);return A.useEffect(()=>{s(JSON.parse(c),{replace:e,state:t,relative:n})},[s,c,n,e,t]),null}function qe(r){ie(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Qo({basename:r="/",children:e=null,location:t,navigationType:n="POP",navigator:a,static:i=!1}){ie(!St(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=r.replace(/^\/*/,"/"),s=A.useMemo(()=>({basename:o,navigator:a,static:i,future:{}}),[o,a,i]);typeof t=="string"&&(t=xt(t));let{pathname:u="/",search:c="",hash:l="",state:f=null,key:d="default"}=t,h=A.useMemo(()=>{let v=nt(u,o);return v==null?null:{location:{pathname:v,search:c,hash:l,state:f,key:d},navigationType:n}},[o,u,c,l,f,d,n]);return Xe(h!=null,`<Router basename="${o}"> is not able to match the URL "${u}${c}${l}" because it does not start with the basename, so the <Router> won't render anything.`),h==null?null:A.createElement(Ke.Provider,{value:s},A.createElement(Gt.Provider,{children:e,value:h}))}function es({children:r,location:e}){return jo(Zr(r),e)}function Zr(r,e=[]){let t=[];return A.Children.forEach(r,(n,a)=>{if(!A.isValidElement(n))return;let i=[...e,a];if(n.type===A.Fragment){t.push.apply(t,Zr(n.props.children,i));return}ie(n.type===qe,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ie(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Zr(n.props.children,i)),t.push(o)}),t}var nr="get",ar="application/x-www-form-urlencoded";function gr(r){return r!=null&&typeof r.tagName=="string"}function ts(r){return gr(r)&&r.tagName.toLowerCase()==="button"}function rs(r){return gr(r)&&r.tagName.toLowerCase()==="form"}function ns(r){return gr(r)&&r.tagName.toLowerCase()==="input"}function as(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function is(r,e){return r.button===0&&(!e||e==="_self")&&!as(r)}var Zt=null;function os(){if(Zt===null)try{new FormData(document.createElement("form"),0),Zt=!1}catch{Zt=!0}return Zt}var ss=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Sr(r){return r!=null&&!ss.has(r)?(Xe(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ar}"`),null):r}function us(r,e){let t,n,a,i,o;if(rs(r)){let s=r.getAttribute("action");n=s?nt(s,e):null,t=r.getAttribute("method")||nr,a=Sr(r.getAttribute("enctype"))||ar,i=new FormData(r)}else if(ts(r)||ns(r)&&(r.type==="submit"||r.type==="image")){let s=r.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=r.getAttribute("formaction")||s.getAttribute("action");if(n=u?nt(u,e):null,t=r.getAttribute("formmethod")||s.getAttribute("method")||nr,a=Sr(r.getAttribute("formenctype"))||Sr(s.getAttribute("enctype"))||ar,i=new FormData(s,r),!os()){let{name:c,type:l,value:f}=r;if(l==="image"){let d=c?`${c}.`:"";i.append(`${d}x`,"0"),i.append(`${d}y`,"0")}else c&&i.append(c,f)}}else{if(gr(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=nr,n=null,a=ar,o=r}return i&&a==="text/plain"&&(o=i,i=void 0),{action:n,method:t.toLowerCase(),encType:a,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function pn(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function cs(r,e,t){let n=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return n.pathname==="/"?n.pathname=`_root.${t}`:e&&nt(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${t}`,n}async function ls(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function fs(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function ds(r,e,t){let n=await Promise.all(r.map(async a=>{let i=e.routes[a.route.id];if(i){let o=await ls(i,t);return o.links?o.links():[]}return[]}));return xs(n.flat(1).filter(fs).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Ln(r,e,t,n,a,i){let o=(u,c)=>t[c]?u.route.id!==t[c].route.id:!0,s=(u,c)=>t[c].pathname!==u.pathname||t[c].route.path?.endsWith("*")&&t[c].params["*"]!==u.params["*"];return i==="assets"?e.filter((u,c)=>o(u,c)||s(u,c)):i==="data"?e.filter((u,c)=>{let l=n.routes[u.route.id];if(!l||!l.hasLoader)return!1;if(o(u,c)||s(u,c))return!0;if(u.route.shouldRevalidate){let f=u.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function hs(r,e,{includeHydrateFallback:t}={}){return ps(r.map(n=>{let a=e.routes[n.route.id];if(!a)return[];let i=[a.module];return a.clientActionModule&&(i=i.concat(a.clientActionModule)),a.clientLoaderModule&&(i=i.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(i=i.concat(a.hydrateFallbackModule)),a.imports&&(i=i.concat(a.imports)),i}).flat(1))}function ps(r){return[...new Set(r)]}function vs(r){let e={},t=Object.keys(r).sort();for(let n of t)e[n]=r[n];return e}function xs(r,e){let t=new Set;return new Set(e),r.reduce((n,a)=>{let i=JSON.stringify(vs(a));return t.has(i)||(t.add(i),n.push({key:i,link:a})),n},[])}function ui(){let r=A.useContext(Ct);return pn(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function gs(){let r=A.useContext(xr);return pn(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var vn=A.createContext(void 0);vn.displayName="FrameworkContext";function ci(){let r=A.useContext(vn);return pn(r,"You must render this element inside a <HydratedRouter> element"),r}function ms(r,e){let t=A.useContext(vn),[n,a]=A.useState(!1),[i,o]=A.useState(!1),{onFocus:s,onBlur:u,onMouseEnter:c,onMouseLeave:l,onTouchStart:f}=e,d=A.useRef(null);A.useEffect(()=>{if(r==="render"&&o(!0),r==="viewport"){let x=w=>{w.forEach(y=>{o(y.isIntersecting)})},g=new IntersectionObserver(x,{threshold:.5});return d.current&&g.observe(d.current),()=>{g.disconnect()}}},[r]),A.useEffect(()=>{if(n){let x=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(x)}}},[n]);let h=()=>{a(!0)},v=()=>{a(!1),o(!1)};return t?r!=="intent"?[i,d,{}]:[i,d,{onFocus:Tt(s,h),onBlur:Tt(u,v),onMouseEnter:Tt(c,h),onMouseLeave:Tt(l,v),onTouchStart:Tt(f,h)}]:[!1,d,{}]}function Tt(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function ys({page:r,...e}){let{router:t}=ui(),n=A.useMemo(()=>Ja(t.routes,r,t.basename),[t.routes,r,t.basename]);return n?A.createElement(_s,{page:r,matches:n,...e}):null}function ws(r){let{manifest:e,routeModules:t}=ci(),[n,a]=A.useState([]);return A.useEffect(()=>{let i=!1;return ds(r,e,t).then(o=>{i||a(o)}),()=>{i=!0}},[r,e,t]),n}function _s({page:r,matches:e,...t}){let n=ct(),{manifest:a,routeModules:i}=ci(),{basename:o}=ui(),{loaderData:s,matches:u}=gs(),c=A.useMemo(()=>Ln(r,e,u,a,n,"data"),[r,e,u,a,n]),l=A.useMemo(()=>Ln(r,e,u,a,n,"assets"),[r,e,u,a,n]),f=A.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let v=new Set,x=!1;if(e.forEach(w=>{let y=a.routes[w.route.id];!y||!y.hasLoader||(!c.some(_=>_.route.id===w.route.id)&&w.route.id in s&&i[w.route.id]?.shouldRevalidate||y.hasClientLoader?x=!0:v.add(w.route.id))}),v.size===0)return[];let g=cs(r,o,"data");return x&&v.size>0&&g.searchParams.set("_routes",e.filter(w=>v.has(w.route.id)).map(w=>w.route.id).join(",")),[g.pathname+g.search]},[o,s,n,a,c,e,r,i]),d=A.useMemo(()=>hs(l,a),[l,a]),h=ws(l);return A.createElement(A.Fragment,null,f.map(v=>A.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...t})),d.map(v=>A.createElement("link",{key:v,rel:"modulepreload",href:v,...t})),h.map(({key:v,link:x})=>A.createElement("link",{key:v,nonce:t.nonce,...x})))}function As(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var li=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{li&&(window.__reactRouterVersion="7.9.3")}catch{}function bs({basename:r,children:e,window:t}){let n=A.useRef();n.current==null&&(n.current=co({window:t,v5Compat:!0}));let a=n.current,[i,o]=A.useState({action:a.action,location:a.location}),s=A.useCallback(u=>{A.startTransition(()=>o(u))},[o]);return A.useLayoutEffect(()=>a.listen(s),[a,s]),A.createElement(Qo,{basename:r,children:e,location:i.location,navigationType:i.action,navigator:a})}var fi=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vt=A.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:a,reloadDocument:i,replace:o,state:s,target:u,to:c,preventScrollReset:l,viewTransition:f,...d},h){let{basename:v}=A.useContext(Ke),x=typeof c=="string"&&fi.test(c),g,w=!1;if(typeof c=="string"&&x&&(g=c,li))try{let T=new URL(window.location.href),D=c.startsWith("//")?new URL(T.protocol+c):new URL(c),j=nt(D.pathname,v);D.origin===T.origin&&j!=null?c=j+D.search+D.hash:w=!0}catch{Xe(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=Lo(c,{relative:a}),[_,b,E]=ms(n,d),S=Ss(c,{replace:o,state:s,target:u,preventScrollReset:l,relative:a,viewTransition:f});function O(T){e&&e(T),T.defaultPrevented||S(T)}let N=A.createElement("a",{...d,...E,href:g||y,onClick:w||i?e:O,ref:As(h,b),target:u,"data-discover":!x&&t==="render"?"true":void 0});return _&&!x?A.createElement(A.Fragment,null,N,A.createElement(ys,{page:y})):N});vt.displayName="Link";var Ge=A.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:a=!1,style:i,to:o,viewTransition:s,children:u,...c},l){let f=$t(o,{relative:c.relative}),d=ct(),h=A.useContext(xr),{navigator:v,basename:x}=A.useContext(Ke),g=h!=null&&Rs(f)&&s===!0,w=v.encodeLocation?v.encodeLocation(f).pathname:f.pathname,y=d.pathname,_=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;t||(y=y.toLowerCase(),_=_?_.toLowerCase():null,w=w.toLowerCase()),_&&x&&(_=nt(_,x)||_);const b=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let E=y===w||!a&&y.startsWith(w)&&y.charAt(b)==="/",S=_!=null&&(_===w||!a&&_.startsWith(w)&&_.charAt(w.length)==="/"),O={isActive:E,isPending:S,isTransitioning:g},N=E?e:void 0,T;typeof n=="function"?T=n(O):T=[n,E?"active":null,S?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let D=typeof i=="function"?i(O):i;return A.createElement(vt,{...c,"aria-current":N,className:T,ref:l,style:D,to:o,viewTransition:s},typeof u=="function"?u(O):u)});Ge.displayName="NavLink";var Es=A.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:a,state:i,method:o=nr,action:s,onSubmit:u,relative:c,preventScrollReset:l,viewTransition:f,...d},h)=>{let v=Ns(),x=Ts(s,{relative:c}),g=o.toLowerCase()==="get"?"get":"post",w=typeof s=="string"&&fi.test(s),y=_=>{if(u&&u(_),_.defaultPrevented)return;_.preventDefault();let b=_.nativeEvent.submitter,E=b?.getAttribute("formmethod")||o;v(b||_.currentTarget,{fetcherKey:e,method:E,navigate:t,replace:a,state:i,relative:c,preventScrollReset:l,viewTransition:f})};return A.createElement("form",{ref:h,method:g,action:x,onSubmit:n?u:y,...d,"data-discover":!w&&r==="render"?"true":void 0})});Es.displayName="Form";function Cs(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function di(r){let e=A.useContext(Ct);return ie(e,Cs(r)),e}function Ss(r,{target:e,replace:t,state:n,preventScrollReset:a,relative:i,viewTransition:o}={}){let s=ii(),u=ct(),c=$t(r,{relative:i});return A.useCallback(l=>{if(is(l,e)){l.preventDefault();let f=t!==void 0?t:Ut(u)===Ut(c);s(r,{replace:f,state:n,preventScrollReset:a,relative:i,viewTransition:o})}},[u,s,c,t,n,e,r,a,i,o])}var Is=0,Os=()=>`__${String(++Is)}__`;function Ns(){let{router:r}=di("useSubmit"),{basename:e}=A.useContext(Ke),t=Yo();return A.useCallback(async(n,a={})=>{let{action:i,method:o,encType:s,formData:u,body:c}=us(n,e);if(a.navigate===!1){let l=a.fetcherKey||Os();await r.fetch(l,t,a.action||i,{preventScrollReset:a.preventScrollReset,formData:u,body:c,formMethod:a.method||o,formEncType:a.encType||s,flushSync:a.flushSync})}else await r.navigate(a.action||i,{preventScrollReset:a.preventScrollReset,formData:u,body:c,formMethod:a.method||o,formEncType:a.encType||s,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[r,e,t])}function Ts(r,{relative:e}={}){let{basename:t}=A.useContext(Ke),n=A.useContext(et);ie(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),i={...$t(r||".",{relative:e})},o=ct();if(r==null){i.search=o.search;let s=new URLSearchParams(i.search),u=s.getAll("index");if(u.some(l=>l==="")){s.delete("index"),u.filter(f=>f).forEach(f=>s.append("index",f));let l=s.toString();i.search=l?`?${l}`:""}}return(!r||r===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(i.pathname=i.pathname==="/"?t:tt([t,i.pathname])),Ut(i)}function Rs(r,{relative:e}={}){let t=A.useContext(ri);ie(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=di("useViewTransitionState"),a=$t(r,{relative:e});if(!t.isTransitioning)return!1;let i=nt(t.currentLocation.pathname,n)||t.currentLocation.pathname,o=nt(t.nextLocation.pathname,n)||t.nextLocation.pathname;return ur(a.pathname,o)!=null||ur(a.pathname,i)!=null}const Fn={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var jn={};const Ir=typeof import.meta<"u"&&Fn?Fn:void 0,Or=typeof globalThis<"u"&&jn?jn:void 0;function Mt(r){if(r){if(Ir&&Ir[r]!==void 0)return Ir[r];if(Or&&Or[r]!==void 0)return Or[r]}}const Kt=(Mt("VITE_CHAT_BASE_URL")||"https://groq-endpoint.louispaulet13.workers.dev").replace(/\/$/,""),Vt=[{id:"allergyfinder",path:"/allergyfinder",name:"AllergyFinder",headline:"Allergy Assistant",description:"Use Groq to explore ingredient lists, highlight allergens, and triage food questions with product context.",badge:"Nutrition",heroGradient:"from-emerald-500 to-teal-500",panelAccent:"bg-emerald-100 text-emerald-900 dark:bg-emerald-500/20 dark:text-emerald-200",navAccent:{gradient:"from-emerald-500 to-teal-500",hover:"hover:bg-emerald-500/10 hover:text-emerald-600 hover:border-emerald-400/60 dark:hover:bg-emerald-500/20 dark:hover:text-emerald-200 dark:hover:border-emerald-400/60",focus:"focus-visible:ring-emerald-500/40"},defaultModel:"openai/gpt-oss-20b",modelOptions:["openai/gpt-oss-20b","openai/gpt-oss-120b"],greeting:"Hi! Ask me about allergens in any food and I'll look it up for you.",promptPlaceholder:"Ask about allergens in a recipe or packaged food...",systemPrompt:["You are an allergy assistant that uses product data to answer questions about food allergens.","Use the provided context when it is relevant and be transparent about any gaps.","When a barcode is available, share the product page URL.","Encourage users to double-check packaging for medical decisions.","When allergy notes from the Allergy Cookie Editor are supplied, treat them as authoritative user-provided context and surface relevant reminders proactively."].join(" "),allowBaseUrlOverride:!1,enableStlViewer:!1,enableBarcodeScanner:!0,logLabel:"AllergyFinder",defaultBaseUrl:(Mt("VITE_ALLERGY_CHAT_BASE_URL")||Kt).replace(/\/$/,"")},{id:"objectmaker",path:"/objectmaker",name:"Object Maker",headline:"Design JSON ‚Üí Create Objects",description:"Handcraft a JSON structure or ask the assistant to propose one, then call the /obj endpoint to instantiate concrete objects. Save results and browse them in the Zoo.",badge:"Builder",heroGradient:"from-yellow-400 to-amber-600",panelAccent:"bg-yellow-100 text-yellow-900 dark:bg-yellow-500/20 dark:text-yellow-200",navAccent:{gradient:"from-yellow-400 to-amber-600",hover:"hover:bg-yellow-500/10 hover:text-amber-600 hover:border-amber-400/60 dark:hover:bg-yellow-500/20 dark:hover:text-yellow-200 dark:hover:border-amber-400/60",focus:"focus-visible:ring-yellow-500/40"},defaultModel:"openai/gpt-oss-20b",modelOptions:["openai/gpt-oss-20b","openai/gpt-oss-120b"],greeting:'Describe an object you want (e.g., pizza, hot sauce, car). I will propose a JSON Schema with type "object" and useful properties.',promptPlaceholder:"Describe the JSON Schema you want‚Ä¶",systemPrompt:["You help design concise JSON Schema definitions (draft-agnostic) for a single object.",'Always return exactly one JSON object that is a JSON Schema with top-level "type":"object" and a "properties" map.','Prefer simple types (string, number, integer, boolean, array, object). Include "items" for arrays. Avoid examples or prose.','Avoid unsupported JSON Schema keywords such as "format", "$ref", or vendor-specific extensions. Express constraints with enums or descriptions instead.',"Do not include markdown fences or backticks. Return only the JSON Schema object."].join(" "),allowBaseUrlOverride:!1,enableStlViewer:!1,logLabel:"Object Maker",defaultBaseUrl:(Mt("VITE_OBJECTMAKER_CHAT_BASE_URL")||Kt).replace(/\/$/,"")},{id:"stlviewer",path:"/stlviewer",name:"STL Studio",headline:"3D Printing Copilot",description:"Chat about STL files, design tweaks, and 3D printing tips while previewing models inline.",badge:"3D",heroGradient:"from-indigo-500 to-slate-700",panelAccent:"bg-indigo-100 text-indigo-900 dark:bg-indigo-500/20 dark:text-indigo-200",navAccent:{gradient:"from-indigo-500 to-slate-700",hover:"hover:bg-indigo-500/10 hover:text-indigo-400 hover:border-indigo-400/60 dark:hover:bg-indigo-500/20 dark:hover:text-indigo-200 dark:hover:border-indigo-400/60",focus:"focus-visible:ring-indigo-500/40"},defaultModel:"openai/gpt-oss-20b",modelOptions:["openai/gpt-oss-20b","openai/gpt-oss-120b"],greeting:"Hi! Ask me anything about STL models or 3D printing workflows.",promptPlaceholder:"Need help with an STL? Ask about fixes, slicing, or design tweaks...",systemPrompt:["You are a helpful AI assistant who understands STL files and 3D printing workflows.","Provide concise, practical answers and include tips for viewing or tweaking STL content when relevant."].join(" "),allowBaseUrlOverride:!1,enableStlViewer:!0,logLabel:"STL Studio",defaultBaseUrl:(Mt("VITE_STL_CHAT_BASE_URL")||Kt).replace(/\/$/,"")},{id:"pokedex",path:"/pokedex",name:"Pokedex",headline:"Concise Pokemon Companion",description:"Ask for typings, strengths, weaknesses, and quick lore delivered by a remote Pokedex service.",badge:"Pokemon",heroGradient:"from-rose-500 to-orange-500",panelAccent:"bg-rose-100 text-rose-900 dark:bg-rose-500/20 dark:text-rose-200",navAccent:{gradient:"from-rose-500 to-orange-500",hover:"hover:bg-rose-500/10 hover:text-rose-500 hover:border-rose-400/60 dark:hover:bg-rose-500/20 dark:hover:text-rose-200 dark:hover:border-rose-400/60",focus:"focus-visible:ring-rose-500/40"},defaultModel:"openai/gpt-oss-20b",modelOptions:["openai/gpt-oss-20b","openai/gpt-oss-120b"],greeting:"Hi! Ask me about any Pokemon and I will fetch quick Pokedex facts.",promptPlaceholder:"Example: What are Gengar strengths and weaknesses?",systemPrompt:["You are a remote Pokedex assistant. Answer questions about Pokemon in two or three sentences.","Highlight typings, notable strengths or weaknesses, and other concise Pokedex facts.","If the question falls outside Pokemon, politely redirect the user."].join(" "),allowBaseUrlOverride:!0,enableStlViewer:!1,logLabel:"Pokedex",defaultBaseUrl:(Mt("VITE_POKEDEX_CHAT_BASE_URL")||Kt).replace(/\/$/,"")}];function Ds(r){return Vt.find(e=>e.id===r)}const hi=A.createContext({theme:"light",setTheme:()=>{}});function Ps(){if(typeof window>"u")return"light";try{return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}catch{return"light"}}function ks({children:r}){const[e,t]=A.useState(()=>{try{const a=localStorage.getItem("theme");if(a==="light"||a==="dark")return a}catch{}return Ps()});A.useEffect(()=>{try{localStorage.setItem("theme",e)}catch{}const a=document.documentElement;e==="dark"?a.classList.add("dark"):a.classList.remove("dark")},[e]);const n=A.useMemo(()=>({theme:e,setTheme:t}),[e]);return p.jsx(hi.Provider,{value:n,children:r})}function Ms(){return A.useContext(hi)}function Bs(){const{theme:r,setTheme:e}=Ms(),t=r==="dark";return p.jsxs("button",{type:"button",onClick:()=>e(t?"light":"dark"),className:"inline-flex items-center gap-2 rounded-md border border-slate-300 bg-white/80 px-3 py-2 text-sm font-medium text-slate-700 shadow-sm hover:bg-slate-50 dark:border-slate-700 dark:bg-slate-800/70 dark:text-slate-100",title:"Toggle theme",children:[t?p.jsx(Xi,{className:"h-5 w-5"}):p.jsx(zi,{className:"h-5 w-5"}),p.jsx("span",{className:"hidden sm:inline",children:t?"Light mode":"Dark mode"})]})}function Un({isActive:r}){const e="inline-flex items-center rounded-full border px-4 py-2 text-sm font-medium transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-slate-900",t="focus-visible:ring-brand-500/40";return r?`${e} border-transparent bg-brand-600 text-white shadow ${t}`:`${e} border-slate-300 bg-white/70 text-slate-600 hover:border-brand-500/60 hover:bg-brand-500/10 hover:text-brand-600 dark:border-slate-700 dark:bg-slate-900/60 dark:text-slate-300 dark:hover:text-white ${t}`}function Ls(r){const e=r?.gradient||"from-brand-500 to-brand-600",t=r?.hover||"hover:bg-brand-500/10 hover:text-brand-600 hover:border-brand-400/60",n=r?.focus||"focus-visible:ring-brand-500/40";return({isActive:a})=>{const i="inline-flex items-center rounded-full border px-4 py-2 text-sm font-medium transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-slate-900";return a?`${i} border-transparent bg-gradient-to-r ${e} text-white shadow ${n}`:`${i} border-slate-300 bg-white/70 text-slate-600 ${t} dark:border-slate-700 dark:bg-slate-900/60 dark:text-slate-300 dark:hover:text-white ${n}`}}function Vn({isActive:r}){return`inline-flex items-center rounded-full border border-slate-300 px-3 py-1 text-xs font-medium text-slate-600 transition hover:border-brand-500 hover:text-brand-600 dark:border-slate-600 dark:text-slate-300 ${r?"bg-brand-600 text-white border-brand-600 shadow-sm":""}`}function Fs({isActive:r}){const e="inline-flex h-11 w-11 items-center justify-center rounded-full border text-slate-600 transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500/40 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:text-slate-200 dark:focus-visible:ring-offset-slate-900";return r?`${e} border-brand-500 bg-brand-600 text-white shadow`:`${e} border-slate-300 bg-white/80 hover:border-brand-500/60 hover:bg-brand-500/10 hover:text-brand-600 dark:border-slate-700 dark:bg-slate-800/70`}function js({children:r}){return p.jsxs("div",{className:"min-h-screen flex flex-col",children:[p.jsx("header",{className:"sticky top-0 z-20 border-b border-slate-200 bg-white/80 backdrop-blur supports-[backdrop-filter]:bg-white/70 dark:border-slate-800 dark:bg-slate-900/70",children:p.jsxs("div",{className:"mx-auto flex max-w-6xl items-center justify-between gap-4 px-4 py-4",children:[p.jsxs(Ge,{to:"/",className:"flex items-center gap-3",children:[p.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-xl bg-brand-600 text-white text-lg font-semibold",children:"llI"}),p.jsxs("div",{className:"leading-tight",children:[p.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Groq"}),p.jsx("div",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"AllIn Studio"})]})]}),p.jsxs("nav",{className:"hidden items-center gap-2 md:flex",children:[p.jsx(Ge,{to:"/",className:Un,end:!0,children:"Overview"}),Vt.map(e=>p.jsx(Ge,{to:e.path,className:Ls(e.navAccent),children:e.name},e.id)),p.jsx(Ge,{to:"/about",className:Un,children:"About"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs(Ge,{to:"/profile",className:Fs,title:"Profile options",children:[p.jsx($a,{className:"h-5 w-5"}),p.jsx("span",{className:"sr-only",children:"Profile options"})]}),p.jsx(Bs,{})]})]})}),p.jsx("main",{className:"mx-auto w-full max-w-6xl flex-1 px-4 py-8",children:r}),p.jsx("footer",{className:"mt-auto border-t border-slate-200 bg-white/80 py-6 text-sm text-slate-600 backdrop-blur supports-[backdrop-filter]:bg-white/70 dark:border-slate-800 dark:bg-slate-900/70 dark:text-slate-300",children:p.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-2 px-4 text-center sm:flex-row sm:items-center sm:justify-between sm:text-left",children:[p.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-x-3 gap-y-2 sm:justify-start",children:[p.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-x-2 gap-y-1 sm:justify-start",children:[p.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:"Groq AllIn Studio"}),p.jsx("span",{className:"text-xs uppercase tracking-wide text-slate-400 dark:text-slate-500",children:"Unified Workspace ‚öôÔ∏è"})]}),p.jsx(Ge,{to:"/",className:Vn,end:!0,children:"Overview"}),p.jsx(Ge,{to:"/about",className:Vn,children:"About"})]}),p.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Fast chats powered by Groq‚Äôs API ¬∑ Built with React, Vite, and Tailwind CSS ‚ö°Ô∏è"})]})})]})}const Us={allergyfinder:p.jsxs(p.Fragment,{children:[p.jsx("p",{children:"üõ°Ô∏è AllergyFinder taps into Open Food Facts so it can examine ingredient panels in context. Bring your saved allergen profile into the conversation and the assistant highlights risky ingredients, suggests safe alternatives, and drafts grocery lists that respect your preferences. Transparency comes first: responses call out when product data is missing or when you should double-check real-world packaging. üßæ"}),p.jsx("p",{children:"Use it for meal planning, quick label triage, or inspiration when you are cooking for friends with different dietary needs. Because it runs on Groq-accelerated LLMs, you get near-instant summaries even for lengthy ingredient lists. üöÄ"})]}),objectmaker:p.jsxs(p.Fragment,{children:[p.jsxs("p",{children:["üß† Object Maker is a workspace for structured creativity. Start with a conversational brief and the assistant drafts JSON schemas that describe imaginative artifacts‚Äîanything from a pizza, to a track-ready car, to a curated ice cream flight. Once the schema looks right, you can call the",p.jsx("code",{className:"rounded bg-slate-900/80 px-1 py-0.5 text-[0.7rem] text-white",children:"/obj"})," endpoint to spin up dozens of variants that adhere to the structure. The workflow is grounded in Groq hosted",p.jsx("span",{className:"font-medium",children:" openai/gpt-oss-20b"})," and ",p.jsx("span",{className:"font-medium",children:"openai/gpt-oss-120b"}),"models, keeping generation fast while your schema evolves. ‚öôÔ∏è"]}),p.jsx("p",{children:"Each session curates a ‚ÄúZoo‚Äù of finished creations so you can revisit, iterate, and compare outputs. The aim is to demonstrate how reliable JSON scaffolding unlocks downstream tooling: the sharper the schema, the more dependable the generated objects. Image generation integrations are planned, but today is about perfecting the structured prompt. üóÇÔ∏è"})]}),stlviewer:p.jsxs(p.Fragment,{children:[p.jsx("p",{children:"üß© STL Studio preserves the original 3D printing workflow. The assistant can draft STL snippets, explain mesh edits, and, thanks to the embedded viewer, render models directly inside the chat transcript. Share a design tweak, paste an STL file, and see the preview update without leaving the conversation. üñ•Ô∏è"}),p.jsx("p",{children:"It is ideal for rapid iteration on printable parts, offering slicing tips, material suggestions, and context-aware troubleshooting. Whether you are validating overhangs or collaborating on a new gadget, the mix of text guidance and inline visuals keeps the feedback loop tight. üîÅ"})]}),pokedex:p.jsxs(p.Fragment,{children:[p.jsx("p",{children:"üìò The Pok√©dex workspace is a focused encyclopedia for trainers. Ask about any Pok√©mon and you will get typings, strengths, weaknesses, and a bite-sized lore blurb sourced from our remote service. It is tuned to stay in-universe: off-topic questions politely steer you back to the Pok√©dex. üéì"}),p.jsx("p",{children:"Combine it with team-building sessions or quick reminders before a battle. Because the base URL is configurable, you can point the workspace at experimental datasets or community-maintained entries while keeping the same interface. üîÑ"})]})};function Vs(){return p.jsxs("div",{className:"space-y-12",children:[p.jsxs("section",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-brand-600 to-indigo-700 px-8 py-12 text-white shadow-xl",children:[p.jsxs("div",{className:"max-w-3xl space-y-4",children:[p.jsx("p",{className:"text-sm uppercase tracking-[0.3em] text-white/80",children:"Groq Studio"}),p.jsx("h1",{className:"text-3xl font-semibold sm:text-4xl",children:"All experiences in one workspace."}),p.jsx("p",{className:"text-base text-white/90",children:"Explore specialized assistants for nutrition, 3D printing, and Pok√©mon knowledge with a shared interface and a streamlined workflow. ‚ö°Ô∏è"}),p.jsx("div",{className:"flex flex-wrap gap-3 pt-2",children:Vt.map(r=>p.jsx(vt,{to:r.path,className:"inline-flex items-center rounded-full bg-white/90 px-4 py-2 text-sm font-medium text-slate-900 transition hover:bg-white",children:r.name},r.id))})]}),p.jsx("div",{className:"absolute -right-24 -top-24 h-56 w-56 rounded-full bg-white/10 blur-3xl","aria-hidden":!0})]}),p.jsxs("section",{className:"space-y-10",children:[p.jsxs("header",{className:"space-y-2",children:[p.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Explore the workspaces ‚ú®"}),p.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Each experience shares the same chat shell yet brings its own data sources, inline tools, and best practices. Dive in to see how focused assistants feel when they are tuned for a specific workflow. üéØ"})]}),p.jsx("div",{className:"space-y-8",children:Vt.map(r=>{const e=Us[r.id]??p.jsx("p",{children:r.description});return p.jsxs("article",{className:"space-y-4 rounded-3xl border border-slate-200 bg-white p-8 shadow-sm transition hover:shadow-lg dark:border-slate-800 dark:bg-slate-900",children:[p.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[p.jsx("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold ${r.panelAccent}`,children:r.badge}),p.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:r.name}),p.jsxs(vt,{to:r.path,className:"inline-flex items-center gap-2 rounded-full border border-slate-300 px-3 py-1 text-sm font-medium text-slate-700 transition hover:border-brand-500 hover:text-brand-600 dark:border-slate-700 dark:text-slate-200",children:["Enter workspace",p.jsx("span",{"aria-hidden":!0,children:"‚Üí"})]})]}),p.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:r.headline}),p.jsx("div",{className:"space-y-3 text-sm text-slate-600 dark:text-slate-300",children:e}),p.jsx("div",{className:"text-xs uppercase tracking-wider text-slate-400 dark:text-slate-500",children:r.modelOptions.join(" ‚Ä¢ ")})]},r.id)})})]})]})}function Rt({experience:r,children:e,navigation:t}){return r?p.jsxs("div",{className:"space-y-8",children:[p.jsxs("section",{className:`relative overflow-hidden rounded-3xl bg-gradient-to-br px-8 py-10 text-white shadow-lg ${r.heroGradient}`,children:[p.jsxs("div",{className:"max-w-3xl space-y-4",children:[p.jsx("span",{className:"inline-flex items-center rounded-full bg-black/20 px-3 py-1 text-xs uppercase tracking-wide",children:r.badge}),p.jsx("h1",{className:"text-3xl font-semibold sm:text-4xl",children:r.name}),p.jsx("p",{className:"text-base text-white/90",children:r.headline}),p.jsx("p",{className:"text-sm text-white/80",children:r.description})]}),p.jsx("div",{className:"absolute -right-20 bottom-0 top-0 w-64 bg-white/10 blur-3xl","aria-hidden":!0})]}),t?p.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white/80 px-4 py-3 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:t}):null,p.jsx("div",{children:e})]}):p.jsx("div",{className:"rounded-2xl border border-red-200 bg-red-50 p-6 text-red-700 dark:border-red-800 dark:bg-red-900/40 dark:text-red-200",children:"Experience not found."})}function Hs(){return p.jsxs("div",{className:"space-y-12",children:[p.jsx("section",{className:"rounded-3xl bg-gradient-to-br from-slate-900 via-brand-700 to-indigo-600 px-8 py-12 text-white shadow-xl",children:p.jsxs("div",{className:"max-w-3xl space-y-4",children:[p.jsx("p",{className:"text-sm uppercase tracking-[0.3em] text-white/70",children:"About Groq AllIn Studio"}),p.jsx("h1",{className:"text-3xl font-semibold sm:text-4xl",children:"Louis Paulet's Groq AllIn Studio ü§ù"}),p.jsx("p",{className:"text-base text-white/90",children:"Groq AllIn Studio is a personal initiative by Louis Paulet, Data Scientist at Checkout.com. The project explores how GroqCloud services can support focused conversational tools while complementing his production work. Each module tests practical applications, latency-sensitive interfaces, and the supporting infrastructure required to run them responsibly. üîç"}),p.jsx(vt,{to:"/",className:"inline-flex items-center rounded-full bg-white/90 px-4 py-2 text-sm font-medium text-slate-900 transition hover:bg-white",children:"Back to Overview"})]})}),p.jsxs("section",{className:"grid gap-8 md:grid-cols-3",children:[p.jsxs("article",{className:"space-y-3 rounded-2xl border border-slate-200 bg-white/80 p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900/70",children:[p.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"1. Frontend studio üñ•Ô∏è"}),p.jsxs("p",{className:"text-sm leading-relaxed text-slate-600 dark:text-slate-400",children:["The ",p.jsx("code",{children:"all_in/"})," workspace is the production React shell that unifies the Pok√©dex, AllergyFinder, STL Viewer, and Object Maker experiences for deployment. It is the only project that ships live, while reusing shared chat and UI components across each tab."]})]}),p.jsxs("article",{className:"space-y-3 rounded-2xl border border-slate-200 bg-white/80 p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900/70",children:[p.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"2. Cloudflare worker backend ‚òÅÔ∏è"}),p.jsx("p",{className:"text-sm leading-relaxed text-slate-600 dark:text-slate-400",children:"‚òÅÔ∏è A dedicated Cloudflare Worker powers the Groq backend. Every chat in the studio tunnels through this worker, which enriches prompts with tools like product lookups before relaying Groq responses."})]}),p.jsxs("article",{className:"space-y-3 rounded-2xl border border-slate-200 bg-white/80 p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900/70",children:[p.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"3. Applied research space üß™"}),p.jsx("p",{className:"text-sm leading-relaxed text-slate-600 dark:text-slate-400",children:"üî¨ The studio hosts a rotating set of exploratory prompts and prototypes that examine new interaction patterns. It is the venue for trying emerging Groq capabilities, refining responsible guardrails, and translating lessons back into production-quality solutions."})]})]}),p.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900/70",children:[p.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Why the worker matters üõ†Ô∏è"}),p.jsx("p",{className:"mt-3 text-sm leading-relaxed text-slate-600 dark:text-slate-400",children:"Louis designed the worker to carry its own intelligence. Beyond proxying Groq models, it can query product data when a chat session asks about allergens, providing the same product evidence that powers the dedicated AllergyFinder experience. üß†"}),p.jsx("p",{className:"mt-3 text-sm leading-relaxed text-slate-600 dark:text-slate-400",children:"The Object Maker tooling leans on the worker too: schema brainstorming happens through the chat endpoint, then the structured output endpoint turns those schemas into real JSON objects. üßæ"})]}),p.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900/70",children:[p.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Supported worker routes üö¶"}),p.jsxs("ul",{className:"mt-4 space-y-3 text-sm text-slate-600 dark:text-slate-400",children:[p.jsxs("li",{children:[p.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"POST /chat"})," ‚Äî primary endpoint used by every experience. The frontend appends ",p.jsx("code",{children:"/chat"})," to the configured base URL and sends OpenAI-style chat payloads; the worker can augment requests with product lookups before returning Groq responses. üí¨"]}),p.jsxs("li",{children:[p.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"GET /flavor-finder/<food>"})," ‚Äî helper route that fetches product entries directly, useful for debugging the worker's ingredient sourcing without spinning up the UI. üîé"]}),p.jsxs("li",{children:[p.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"POST /obj/<type> (and /object*/ variants)"})," ‚Äî structured generation endpoint consumed by Object Maker. It accepts a JSON schema, user prompt, and optional model parameters, then returns a compliant object. üß©"]})]}),p.jsx("p",{className:"mt-4 text-sm leading-relaxed text-slate-600 dark:text-slate-400",children:"The worker keeps each experiment consistent, ensuring the studio remains reliable even as new ideas are introduced. üìà"})]})]})}function Gs({conversations:r,activeId:e,onSelect:t,onNew:n,onRename:a,onFlushHistory:i,disableNew:o=!1,disableFlush:s=!1}){const[u,c]=A.useState(null),[l,f]=A.useState("");return p.jsxs("div",{className:"h-full rounded-2xl border border-slate-200 bg-white/80 p-3 shadow-sm dark:border-slate-800 dark:bg-slate-900/60",children:[p.jsxs("button",{type:"button",onClick:n,disabled:o,className:"mb-3 inline-flex w-full items-center justify-center gap-2 rounded-xl bg-brand-600 px-3 py-2 text-sm font-medium text-white transition hover:bg-brand-700 disabled:cursor-not-allowed disabled:bg-brand-600/60",children:[p.jsx(Yi,{className:"h-5 w-5"})," New chat"]}),i?p.jsxs("button",{type:"button",onClick:i,disabled:s,className:"mb-4 inline-flex w-full items-center justify-center gap-2 rounded-xl border border-slate-300 px-3 py-2 text-sm font-medium text-slate-600 transition hover:border-slate-400 hover:bg-slate-50 disabled:cursor-not-allowed disabled:text-slate-400 dark:border-slate-700 dark:text-slate-300 dark:hover:border-slate-600 dark:hover:bg-slate-800",children:[p.jsx(Zi,{className:"h-5 w-5"})," Delete saved chats"]}):null,p.jsx("div",{className:"space-y-1",children:r.map(d=>p.jsxs("div",{className:`group flex items-center justify-between rounded-xl border px-3 py-2 text-sm transition ${d.id===e?"border-brand-600 bg-brand-50 text-brand-700 dark:border-brand-500 dark:bg-slate-800 dark:text-brand-300":"border-slate-200 text-slate-600 hover:bg-slate-50 dark:border-slate-700 dark:text-slate-300 dark:hover:bg-slate-800"}`,onClick:()=>t?.(d.id),children:[u===d.id?p.jsx("form",{onSubmit:h=>{h.preventDefault(),a?.(d.id,l||d.title),c(null)},className:"flex grow items-center gap-2",children:p.jsx("input",{autoFocus:!0,className:"w-full rounded-md border border-slate-300 px-2 py-1 text-sm text-slate-700 focus:border-brand-500 focus:outline-none focus:ring-1 focus:ring-brand-500 dark:border-slate-600 dark:bg-slate-800 dark:text-slate-100",defaultValue:d.title,onChange:h=>f(h.target.value),onBlur:()=>c(null)})}):p.jsx("div",{className:"truncate pr-2 text-sm font-medium",children:d.title}),p.jsx("button",{type:"button",onClick:h=>{h.stopPropagation(),c(d.id),f(d.title)},className:"invisible rounded-md p-1 text-slate-500 transition group-hover:visible hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-700",title:"Rename",children:p.jsx(Ki,{className:"h-4 w-4"})})]},d.id))})]})}je.registerLanguage("javascript",za);je.registerLanguage("js",za);je.registerLanguage("typescript",Ya);je.registerLanguage("ts",Ya);je.registerLanguage("python",Za);je.registerLanguage("py",Za);je.registerLanguage("json",oo);je.registerLanguage("bash",Ka);je.registerLanguage("sh",Ka);je.registerLanguage("markdown",so);qa.setOptions({breaks:!0,highlight(r,e){try{return e&&je.getLanguage(e)?je.highlight(r,{language:e}).value:je.highlightAuto(r).value}catch{return r}}});function $s(r){const e=qa.parse(r||"");return uo.sanitize(e)}function Ws(r){return(typeof r=="number"?new Date(r):r).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}class Xs extends A.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught",e,t)}render(){return this.state.hasError?p.jsx("div",{className:"h-64 grid place-items-center text-sm text-red-600 dark:text-red-400",children:"Failed to render 3D preview."}):this.props.children}}const zs=A.lazy(()=>io(()=>import("./STLViewer-De5lyolA.js"),__vite__mapDeps([0,1,2,3])));function Ys(r){if(!r)return[];const e=[],t=/(https?:\/\/\S+?\.stl)\b/gi,n=new Set;let a;for(;(a=t.exec(r))!==null;)n.add(a[1]);for(const l of n)e.push({type:"url",url:l});const i=r.toLowerCase(),o=/```([^\n`]*)\n([\s\S]*?)```/g;let s;for(;(s=o.exec(r))!==null;){const l=(s[1]||"").trim().toLowerCase(),f=s[2]||"",d=f.toLowerCase(),h=(d.match(/facet normal/g)||[]).length;(l==="stl"||d.startsWith("solid")||h>=4&&d.includes("vertex"))&&e.push({type:"text",text:f.trim()})}const u=(i.match(/facet normal/g)||[]).length;return(/(\n|^)\s*solid\b/.test(i)&&u>=1||u>=4&&i.includes("vertex"))&&(e.some(l=>l.type==="text")||e.push({type:"text",text:r.trim()})),e}function Zs({experience:r,role:e,content:t,name:n,timestamp:a,streaming:i=!1,showAvatar:o=!0,showName:s=!0}){const u=e==="user",c=!!r?.enableStlViewer,l=A.useMemo(()=>c?Ys(t):[],[t,c]),f=A.useMemo(()=>{if(!c)return!1;const d=(t||"").toLowerCase();return[d.includes(".stl"),d.includes("facet normal"),d.includes("vertex "),d.includes("outer loop")].filter(Boolean).length>=2},[t,c]);return p.jsxs("div",{className:`flex ${u?"justify-end":"justify-start"}`,children:[!u&&o&&p.jsx("div",{className:"mr-2 mt-1 h-7 w-7 shrink-0 rounded-full bg-brand-600 text-white",children:p.jsx("div",{className:"grid h-full w-full place-items-center",children:p.jsx(qi,{className:"h-4 w-4"})})}),p.jsxs("div",{className:u?"max-w-[80%] rounded-2xl bg-indigo-600 px-4 py-2 text-sm text-white shadow":"max-w-[80%] rounded-2xl border border-slate-200 bg-white px-4 py-2 text-sm text-slate-800 shadow-sm dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",children:[s&&p.jsxs("div",{className:`mb-1 text-xs ${u?"text-indigo-100/80":"text-slate-500 dark:text-slate-400"}`,children:[n," ‚Ä¢ ",Ws(a)]}),u?p.jsx("div",{className:"whitespace-pre-wrap",children:t}):p.jsx("div",{className:"prose",dangerouslySetInnerHTML:{__html:$s(t)}}),c&&l.length>0&&!i&&p.jsx("div",{className:"mt-2",children:p.jsx(Xs,{children:p.jsx(A.Suspense,{fallback:p.jsx("div",{className:"h-64 grid place-items-center text-slate-500",children:"Loading 3D viewer‚Ä¶ ‚è≥"}),children:p.jsx(zs,{source:l[0]})})})}),c&&l.length>0&&i&&p.jsx("div",{className:"mt-2 text-xs text-slate-500",children:"3D preview will appear when the response finishes‚Ä¶ üõ∞Ô∏è"}),c&&l.length===0&&!i&&f&&p.jsx("div",{className:"mt-2 text-xs text-amber-600 dark:text-amber-400",children:"The response looks like STL content but may be incomplete. Wrap it in a fenced block (```stl ‚Ä¶ ```), or include full facets so the preview can render correctly. üß±"})]}),u&&o&&p.jsx("div",{className:"ml-2 mt-1 h-7 w-7 shrink-0 rounded-full bg-slate-200 text-slate-600",children:p.jsx("div",{className:"grid h-full w-full place-items-center",children:p.jsx($a,{className:"h-4 w-4"})})})]})}function Ks(r){return r.map((e,t,n)=>{const a=t>0?n[t-1]:null,i=t<n.length-1?n[t+1]:null,o=!a||a.role!==e.role,s=!i||i.role!==e.role;return{...e,isFirstOfGroup:o,isLastOfGroup:s}})}function qs({experience:r,messages:e}){const t=A.useRef(null);return A.useEffect(()=>{t.current?.scrollIntoView({behavior:"smooth",block:"end"})},[e]),p.jsx("div",{className:"h-[65vh] overflow-y-auto rounded-2xl border border-slate-200 bg-white/80 p-4 shadow-sm thin-scrollbar dark:border-slate-800 dark:bg-slate-900/60",children:p.jsxs("div",{className:"flex flex-col gap-3",children:[Ks(e).map((n,a)=>p.jsx(Zs,{experience:r,role:n.role,content:n.content,name:n.name,timestamp:n.timestamp,streaming:n.streaming,showAvatar:n.isFirstOfGroup,showName:n.isFirstOfGroup,sources:n.sources},a)),p.jsx("div",{ref:t})]})})}function Js({value:r,onChange:e,onSend:t,onStop:n,loading:a,onClear:i,placeholder:o,onOpenScanner:s}){return p.jsx("form",{onSubmit:u=>{u.preventDefault(),a||t?.(r)},className:"sticky bottom-0 w-full",children:p.jsxs("div",{className:"flex items-end gap-2 rounded-2xl border border-slate-200 bg-white/90 p-2 shadow-sm backdrop-blur dark:border-slate-700 dark:bg-slate-900/60",children:[p.jsx("textarea",{className:"block w-full resize-none rounded-xl border-none bg-transparent p-3 text-sm text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-brand-600/60 dark:bg-slate-800/70 dark:text-slate-100 dark:placeholder-slate-400",rows:2,value:r,onChange:u=>e?.(u.target.value),placeholder:o||"Ask anything... (Shift+Enter for newline)",onKeyDown:u=>{u.key==="Enter"&&!u.shiftKey&&(u.preventDefault(),a||t?.(r))}}),p.jsx("div",{className:"flex items-center gap-2 pr-1",children:a?p.jsx("button",{type:"button",onClick:n,className:"inline-flex items-center rounded-xl bg-slate-200 px-3 py-2 text-slate-700 hover:bg-slate-300 dark:bg-slate-800 dark:text-slate-100 dark:hover:bg-slate-700",title:"Stop",children:p.jsx(Ji,{className:"h-5 w-5"})}):p.jsxs(p.Fragment,{children:[s&&p.jsx("button",{type:"button",onClick:()=>s?.(),className:"inline-flex items-center rounded-xl bg-slate-100 px-3 py-2 text-slate-700 hover:bg-slate-200 dark:bg-slate-800/80 dark:text-slate-200 dark:hover:bg-slate-700",title:"Scan barcode",children:p.jsx(Qi,{className:"h-5 w-5"})}),p.jsx("button",{type:"button",onClick:i,className:"inline-flex items-center rounded-xl bg-slate-100 px-3 py-2 text-slate-700 hover:bg-slate-200 dark:bg-slate-800/80 dark:text-slate-200 dark:hover:bg-slate-700",title:"Clear",children:p.jsx(eo,{className:"h-5 w-5"})}),p.jsx("button",{type:"submit",disabled:!r.trim(),className:"inline-flex items-center rounded-xl bg-brand-600 px-4 py-2 text-white shadow hover:bg-brand-700 disabled:opacity-60",title:"Send",children:p.jsx(Wa,{className:"h-5 w-5"})})]})})]})})}function Qs({value:r,onChange:e,options:t=[]}){const n=t.length>0?t:[r];return p.jsxs("label",{className:"block text-sm",children:[p.jsx("span",{className:"block text-xs font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Model"}),p.jsx("select",{className:"mt-1 block w-56 rounded-md border border-slate-300 bg-white px-2 py-2 text-sm text-slate-800 focus:border-brand-500 focus:outline-none focus:ring-1 focus:ring-brand-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",value:r,onChange:a=>e?.(a.target.value),children:n.map(a=>p.jsx("option",{value:a,children:a},a))})]})}function eu(r,e){var t=Object.setPrototypeOf;t?t(r,e):r.__proto__=e}function tu(r,e){e===void 0&&(e=r.constructor);var t=Error.captureStackTrace;t&&t(r,e)}var ru=(function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(a[o]=i[o])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),nu=(function(r){ru(e,r);function e(t,n){var a=this.constructor,i=r.call(this,t,n)||this;return Object.defineProperty(i,"name",{value:a.name,enumerable:!1,configurable:!0}),eu(i,a.prototype),tu(i),i}return e})(Error),au=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Fe=(function(r){au(e,r);function e(t){t===void 0&&(t=void 0);var n=r.call(this,t)||this;return n.message=t,n}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e})(nu),iu=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),de=(function(r){iu(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ArgumentException",e})(Fe),ou=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),M=(function(r){ou(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e})(Fe),pi=(function(){function r(e){if(this.binarizer=e,e===null)throw new M("Binarizer must be non-null.")}return r.prototype.getWidth=function(){return this.binarizer.getWidth()},r.prototype.getHeight=function(){return this.binarizer.getHeight()},r.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},r.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},r.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},r.prototype.crop=function(e,t,n,a){var i=this.binarizer.getLuminanceSource().crop(e,t,n,a);return new r(this.binarizer.createBinarizer(i))},r.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},r.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new r(this.binarizer.createBinarizer(e))},r.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new r(this.binarizer.createBinarizer(e))},r.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},r})(),su=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),he=(function(r){su(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e})(Fe),uu=(function(){function r(e){this.source=e}return r.prototype.getLuminanceSource=function(){return this.source},r.prototype.getWidth=function(){return this.source.getWidth()},r.prototype.getHeight=function(){return this.source.getHeight()},r})(),te=(function(){function r(){}return r.arraycopy=function(e,t,n,a,i){for(;i--;)n[a++]=e[t++]},r.currentTimeMillis=function(){return Date.now()},r})(),cu=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),xn=(function(r){cu(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e})(Fe),lu=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Hn=(function(r){lu(e,r);function e(t,n){t===void 0&&(t=void 0),n===void 0&&(n=void 0);var a=r.call(this,n)||this;return a.index=t,a.message=n,a}return e.kind="ArrayIndexOutOfBoundsException",e})(xn),fu=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ye=(function(){function r(){}return r.fill=function(e,t){for(var n=0,a=e.length;n<a;n++)e[n]=t},r.fillWithin=function(e,t,n,a){r.rangeCheck(e.length,t,n);for(var i=t;i<n;i++)e[i]=a},r.rangeCheck=function(e,t,n){if(t>n)throw new M("fromIndex("+t+") > toIndex("+n+")");if(t<0)throw new Hn(t);if(n>e)throw new Hn(n)},r.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},r.create=function(e,t,n){var a=Array.from({length:e});return a.map(function(i){return Array.from({length:t}).fill(n)})},r.createInt32Array=function(e,t,n){var a=Array.from({length:e});return a.map(function(i){return Int32Array.from({length:t}).fill(n)})},r.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var n=0,a=e.length;n<a;n++)if(e[n]!==t[n])return!1;return!0},r.hashCode=function(e){var t,n;if(e===null)return 0;var a=1;try{for(var i=fu(e),o=i.next();!o.done;o=i.next()){var s=o.value;a=31*a+s}}catch(u){t={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return a},r.fillUint8Array=function(e,t){for(var n=0;n!==e.length;n++)e[n]=t},r.copyOf=function(e,t){return e.slice(0,t)},r.copyOfUint8Array=function(e,t){if(e.length<=t){var n=new Uint8Array(t);return n.set(e),n}return e.slice(0,t)},r.copyOfRange=function(e,t,n){var a=n-t,i=new Int32Array(a);return te.arraycopy(e,t,i,0,a),i},r.binarySearch=function(e,t,n){n===void 0&&(n=r.numberComparator);for(var a=0,i=e.length-1;a<=i;){var o=i+a>>1,s=n(t,e[o]);if(s>0)a=o+1;else if(s<0)i=o-1;else return o}return-a-1},r.numberComparator=function(e,t){return e-t},r})(),U=(function(){function r(){}return r.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var n=31;return t=e<<16,t!==0&&(n-=16,e=t),t=e<<8,t!==0&&(n-=8,e=t),t=e<<4,t!==0&&(n-=4,e=t),t=e<<2,t!==0&&(n-=2,e=t),n-(e<<1>>>31)},r.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},r.toHexString=function(e){return e.toString(16)},r.toBinaryString=function(e){return String(parseInt(String(e),2))},r.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},r.truncDivision=function(e,t){return Math.trunc(e/t)},r.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},r.MIN_VALUE_32_BITS=-2147483648,r.MAX_VALUE=Number.MAX_SAFE_INTEGER,r})(),be=(function(){function r(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=r.makeArray(e):this.bits=t)}return r.prototype.getSize=function(){return this.size},r.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},r.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=r.makeArray(e);te.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},r.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},r.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},r.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},r.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var n=this.bits,a=Math.floor(e/32),i=n[a];i&=~((1<<(e&31))-1);for(var o=n.length;i===0;){if(++a===o)return t;i=n[a]}var s=a*32+U.numberOfTrailingZeros(i);return s>t?t:s},r.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var n=this.bits,a=Math.floor(e/32),i=~n[a];i&=~((1<<(e&31))-1);for(var o=n.length;i===0;){if(++a===o)return t;i=~n[a]}var s=a*32+U.numberOfTrailingZeros(i);return s>t?t:s},r.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},r.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new M;if(t!==e){t--;for(var n=Math.floor(e/32),a=Math.floor(t/32),i=this.bits,o=n;o<=a;o++){var s=o>n?0:e&31,u=o<a?31:t&31,c=(2<<u)-(1<<s);i[o]|=c}}},r.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,n=0;n<e;n++)t[n]=0},r.prototype.isRange=function(e,t,n){if(t<e||e<0||t>this.size)throw new M;if(t===e)return!0;t--;for(var a=Math.floor(e/32),i=Math.floor(t/32),o=this.bits,s=a;s<=i;s++){var u=s>a?0:e&31,c=s<i?31:t&31,l=(2<<c)-(1<<u)&4294967295;if((o[s]&l)!==(n?l:0))return!1}return!0},r.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},r.prototype.appendBits=function(e,t){if(t<0||t>32)throw new M("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var n=t;n>0;n--)this.appendBit((e>>n-1&1)===1)},r.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var n=0;n<t;n++)this.appendBit(e.get(n))},r.prototype.xor=function(e){if(this.size!==e.size)throw new M("Sizes don't match");for(var t=this.bits,n=0,a=t.length;n<a;n++)t[n]^=e.bits[n]},r.prototype.toBytes=function(e,t,n,a){for(var i=0;i<a;i++){for(var o=0,s=0;s<8;s++)this.get(e)&&(o|=1<<7-s),e++;t[n+i]=o}},r.prototype.getBitArray=function(){return this.bits},r.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),n=t+1,a=this.bits,i=0;i<n;i++){var o=a[i];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[t-i]=o}if(this.size!==n*32){for(var s=n*32-this.size,u=e[0]>>>s,i=1;i<n;i++){var c=e[i];u|=c<<32-s,e[i-1]=u,u=c>>>s}e[n-1]=u}this.bits=e},r.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.size===t.size&&ye.equals(this.bits,t.bits)},r.prototype.hashCode=function(){return 31*this.size+ye.hashCode(this.bits)},r.prototype.toString=function(){for(var e="",t=0,n=this.size;t<n;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e},r.prototype.clone=function(){return new r(this.size,this.bits.slice())},r.prototype.toArray=function(){for(var e=[],t=0,n=this.size;t<n;t++)e.push(this.get(t));return e},r})(),Kr;(function(r){r[r.OTHER=0]="OTHER",r[r.PURE_BARCODE=1]="PURE_BARCODE",r[r.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",r[r.TRY_HARDER=3]="TRY_HARDER",r[r.CHARACTER_SET=4]="CHARACTER_SET",r[r.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",r[r.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",r[r.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",r[r.ASSUME_GS1=8]="ASSUME_GS1",r[r.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",r[r.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",r[r.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(Kr||(Kr={}));const Q=Kr;var du=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),R=(function(r){du(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e})(Fe),hu=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Z;(function(r){r[r.Cp437=0]="Cp437",r[r.ISO8859_1=1]="ISO8859_1",r[r.ISO8859_2=2]="ISO8859_2",r[r.ISO8859_3=3]="ISO8859_3",r[r.ISO8859_4=4]="ISO8859_4",r[r.ISO8859_5=5]="ISO8859_5",r[r.ISO8859_6=6]="ISO8859_6",r[r.ISO8859_7=7]="ISO8859_7",r[r.ISO8859_8=8]="ISO8859_8",r[r.ISO8859_9=9]="ISO8859_9",r[r.ISO8859_10=10]="ISO8859_10",r[r.ISO8859_11=11]="ISO8859_11",r[r.ISO8859_13=12]="ISO8859_13",r[r.ISO8859_14=13]="ISO8859_14",r[r.ISO8859_15=14]="ISO8859_15",r[r.ISO8859_16=15]="ISO8859_16",r[r.SJIS=16]="SJIS",r[r.Cp1250=17]="Cp1250",r[r.Cp1251=18]="Cp1251",r[r.Cp1252=19]="Cp1252",r[r.Cp1256=20]="Cp1256",r[r.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",r[r.UTF8=22]="UTF8",r[r.ASCII=23]="ASCII",r[r.Big5=24]="Big5",r[r.GB18030=25]="GB18030",r[r.EUC_KR=26]="EUC_KR"})(Z||(Z={}));var me=(function(){function r(e,t,n){for(var a,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];this.valueIdentifier=e,this.name=n,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=o,r.VALUE_IDENTIFIER_TO_ECI.set(e,this),r.NAME_TO_ECI.set(n,this);for(var u=this.values,c=0,l=u.length;c!==l;c++){var f=u[c];r.VALUES_TO_ECI.set(f,this)}try{for(var d=hu(o),h=d.next();!h.done;h=d.next()){var v=h.value;r.NAME_TO_ECI.set(v,this)}}catch(x){a={error:x}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(a)throw a.error}}}return r.prototype.getValueIdentifier=function(){return this.valueIdentifier},r.prototype.getName=function(){return this.name},r.prototype.getValue=function(){return this.values[0]},r.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new R("incorect value");var t=r.VALUES_TO_ECI.get(e);if(t===void 0)throw new R("incorect value");return t},r.getCharacterSetECIByName=function(e){var t=r.NAME_TO_ECI.get(e);if(t===void 0)throw new R("incorect value");return t},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.getName()===t.getName()},r.VALUE_IDENTIFIER_TO_ECI=new Map,r.VALUES_TO_ECI=new Map,r.NAME_TO_ECI=new Map,r.Cp437=new r(Z.Cp437,Int32Array.from([0,2]),"Cp437"),r.ISO8859_1=new r(Z.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),r.ISO8859_2=new r(Z.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),r.ISO8859_3=new r(Z.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),r.ISO8859_4=new r(Z.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),r.ISO8859_5=new r(Z.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),r.ISO8859_6=new r(Z.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),r.ISO8859_7=new r(Z.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),r.ISO8859_8=new r(Z.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),r.ISO8859_9=new r(Z.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),r.ISO8859_10=new r(Z.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),r.ISO8859_11=new r(Z.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),r.ISO8859_13=new r(Z.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),r.ISO8859_14=new r(Z.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),r.ISO8859_15=new r(Z.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),r.ISO8859_16=new r(Z.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),r.SJIS=new r(Z.SJIS,20,"SJIS","Shift_JIS"),r.Cp1250=new r(Z.Cp1250,21,"Cp1250","windows-1250"),r.Cp1251=new r(Z.Cp1251,22,"Cp1251","windows-1251"),r.Cp1252=new r(Z.Cp1252,23,"Cp1252","windows-1252"),r.Cp1256=new r(Z.Cp1256,24,"Cp1256","windows-1256"),r.UnicodeBigUnmarked=new r(Z.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),r.UTF8=new r(Z.UTF8,26,"UTF8","UTF-8"),r.ASCII=new r(Z.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),r.Big5=new r(Z.Big5,28,"Big5"),r.GB18030=new r(Z.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),r.EUC_KR=new r(Z.EUC_KR,30,"EUC_KR","EUC-KR"),r})(),pu=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),ir=(function(r){pu(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e})(Fe),We=(function(){function r(){}return r.decode=function(e,t){var n=this.encodingName(t);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},r.shouldDecodeOnFallback=function(e){return!r.isBrowser()&&e==="ISO-8859-1"},r.encode=function(e,t){var n=this.encodingName(t);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},r.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},r.encodingName=function(e){return typeof e=="string"?e:e.getName()},r.encodingCharacterSet=function(e){return e instanceof me?e:me.getCharacterSetECIByName(e)},r.decodeFallback=function(e,t){var n=this.encodingCharacterSet(t);if(r.isDecodeFallbackSupported(n)){for(var a="",i=0,o=e.length;i<o;i++){var s=e[i].toString(16);s.length<2&&(s="0"+s),a+="%"+s}return decodeURIComponent(a)}if(n.equals(me.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new ir("Encoding "+this.encodingName(t)+" not supported by fallback.")},r.isDecodeFallbackSupported=function(e){return e.equals(me.UTF8)||e.equals(me.ISO8859_1)||e.equals(me.ASCII)},r.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),n=t.split(""),a=[],i=0;i<n.length;i++)a.push(n[i].charCodeAt(0));return new Uint8Array(a)},r})(),V=(function(){function r(){}return r.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var n=t?t.getName():this.ISO88591;return We.decode(new Uint8Array([e]),n)},r.guessEncoding=function(e,t){if(t!=null&&t.get(Q.CHARACTER_SET)!==void 0)return t.get(Q.CHARACTER_SET).toString();for(var n=e.length,a=!0,i=!0,o=!0,s=0,u=0,c=0,l=0,f=0,d=0,h=0,v=0,x=0,g=0,w=0,y=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,_=0;_<n&&(a||i||o);_++){var b=e[_]&255;o&&(s>0?(b&128)===0?o=!1:s--:(b&128)!==0&&((b&64)===0?o=!1:(s++,(b&32)===0?u++:(s++,(b&16)===0?c++:(s++,(b&8)===0?l++:o=!1))))),a&&(b>127&&b<160?a=!1:b>159&&(b<192||b===215||b===247)&&w++),i&&(f>0?b<64||b===127||b>252?i=!1:f--:b===128||b===160||b>239?i=!1:b>160&&b<224?(d++,v=0,h++,h>x&&(x=h)):b>127?(f++,h=0,v++,v>g&&(g=v)):(h=0,v=0))}return o&&s>0&&(o=!1),i&&f>0&&(i=!1),o&&(y||u+c+l>0)?r.UTF8:i&&(r.ASSUME_SHIFT_JIS||x>=3||g>=3)?r.SHIFT_JIS:a&&i?x===2&&d===2||w*10>=n?r.SHIFT_JIS:r.ISO88591:a?r.ISO88591:i?r.SHIFT_JIS:o?r.UTF8:r.PLATFORM_DEFAULT_ENCODING},r.format=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var a=-1;function i(s,u,c,l,f,d){if(s==="%%")return"%";if(t[++a]!==void 0){s=l?parseInt(l.substr(1)):void 0;var h=f?parseInt(f.substr(1)):void 0,v;switch(d){case"s":v=t[a];break;case"c":v=t[a][0];break;case"f":v=parseFloat(t[a]).toFixed(s);break;case"p":v=parseFloat(t[a]).toPrecision(s);break;case"e":v=parseFloat(t[a]).toExponential(s);break;case"x":v=parseInt(t[a]).toString(h||16);break;case"d":v=parseFloat(parseInt(t[a],h||10).toPrecision(s)).toFixed(0);break}v=typeof v=="object"?JSON.stringify(v):(+v).toString(h);for(var x=parseInt(c),g=c&&c[0]+""=="0"?"0":" ";v.length<x;)v=u!==void 0?v+g:g+v;return v}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,i)},r.getBytes=function(e,t){return We.encode(e,t)},r.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},r.getCharAt=function(e){return String.fromCharCode(e)},r.SHIFT_JIS=me.SJIS.getName(),r.GB2312="GB2312",r.ISO88591=me.ISO8859_1.getName(),r.EUC_JP="EUC_JP",r.UTF8=me.UTF8.getName(),r.PLATFORM_DEFAULT_ENCODING=r.UTF8,r.ASSUME_SHIFT_JIS=!1,r})(),F=(function(){function r(e){e===void 0&&(e=""),this.value=e}return r.prototype.enableDecoding=function(e){return this.encoding=e,this},r.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=V.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},r.prototype.appendChars=function(e,t,n){for(var a=t;t<t+n;a++)this.append(e[a]);return this},r.prototype.length=function(){return this.value.length},r.prototype.charAt=function(e){return this.value.charAt(e)},r.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},r.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},r.prototype.substring=function(e,t){return this.value.substring(e,t)},r.prototype.setLengthToZero=function(){this.value=""},r.prototype.toString=function(){return this.value},r.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},r})(),Qe=(function(){function r(e,t,n,a){if(this.width=e,this.height=t,this.rowSize=n,this.bits=a,t==null&&(t=e),this.height=t,e<1||t<1)throw new M("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,a==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return r.parseFromBooleanArray=function(e){for(var t=e.length,n=e[0].length,a=new r(n,t),i=0;i<t;i++)for(var o=e[i],s=0;s<n;s++)o[s]&&a.set(s,i);return a},r.parseFromString=function(e,t,n){if(e===null)throw new M("stringRepresentation cannot be null");for(var a=new Array(e.length),i=0,o=0,s=-1,u=0,c=0;c<e.length;)if(e.charAt(c)===`
`||e.charAt(c)==="\r"){if(i>o){if(s===-1)s=i-o;else if(i-o!==s)throw new M("row lengths do not match");o=i,u++}c++}else if(e.substring(c,c+t.length)===t)c+=t.length,a[i]=!0,i++;else if(e.substring(c,c+n.length)===n)c+=n.length,a[i]=!1,i++;else throw new M("illegal character encountered: "+e.substring(c));if(i>o){if(s===-1)s=i-o;else if(i-o!==s)throw new M("row lengths do not match");u++}for(var l=new r(s,u),f=0;f<i;f++)a[f]&&l.set(Math.floor(f%s),Math.floor(f/s));return l},r.prototype.get=function(e,t){var n=t*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0},r.prototype.set=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295},r.prototype.unset=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)},r.prototype.flip=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295},r.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new M("input matrix dimensions do not match");for(var t=new be(Math.floor(this.width/32)+1),n=this.rowSize,a=this.bits,i=0,o=this.height;i<o;i++)for(var s=i*n,u=e.getRow(i,t).getBitArray(),c=0;c<n;c++)a[s+c]^=u[c]},r.prototype.clear=function(){for(var e=this.bits,t=e.length,n=0;n<t;n++)e[n]=0},r.prototype.setRegion=function(e,t,n,a){if(t<0||e<0)throw new M("Left and top must be nonnegative");if(a<1||n<1)throw new M("Height and width must be at least 1");var i=e+n,o=t+a;if(o>this.height||i>this.width)throw new M("The region must fit inside the matrix");for(var s=this.rowSize,u=this.bits,c=t;c<o;c++)for(var l=c*s,f=e;f<i;f++)u[l+Math.floor(f/32)]|=1<<(f&31)&4294967295},r.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new be(this.width):t.clear();for(var n=this.rowSize,a=this.bits,i=e*n,o=0;o<n;o++)t.setBulk(o*32,a[i+o]);return t},r.prototype.setRow=function(e,t){te.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},r.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),n=new be(e),a=new be(e),i=0,o=Math.floor((t+1)/2);i<o;i++)n=this.getRow(i,n),a=this.getRow(t-1-i,a),n.reverse(),a.reverse(),this.setRow(i,a),this.setRow(t-1-i,n)},r.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,n=this.rowSize,a=this.bits,i=e,o=t,s=-1,u=-1,c=0;c<t;c++)for(var l=0;l<n;l++){var f=a[c*n+l];if(f!==0){if(c<o&&(o=c),c>u&&(u=c),l*32<i){for(var d=0;(f<<31-d&4294967295)===0;)d++;l*32+d<i&&(i=l*32+d)}if(l*32+31>s){for(var d=31;!(f>>>d);)d--;l*32+d>s&&(s=l*32+d)}}}return s<i||u<o?null:Int32Array.from([i,o,s-i+1,u-o+1])},r.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,n=0;n<t.length&&t[n]===0;)n++;if(n===t.length)return null;for(var a=n/e,i=n%e*32,o=t[n],s=0;(o<<31-s&4294967295)===0;)s++;return i+=s,Int32Array.from([i,a])},r.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,n=t.length-1;n>=0&&t[n]===0;)n--;if(n<0)return null;for(var a=Math.floor(n/e),i=Math.floor(n%e)*32,o=t[n],s=31;!(o>>>s);)s--;return i+=s,Int32Array.from([i,a])},r.prototype.getWidth=function(){return this.width},r.prototype.getHeight=function(){return this.height},r.prototype.getRowSize=function(){return this.rowSize},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&ye.equals(this.bits,t.bits)},r.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+ye.hashCode(this.bits),e},r.prototype.toString=function(e,t,n){return e===void 0&&(e="X "),t===void 0&&(t="  "),n===void 0&&(n=`
`),this.buildToString(e,t,n)},r.prototype.buildToString=function(e,t,n){for(var a=new F,i=0,o=this.height;i<o;i++){for(var s=0,u=this.width;s<u;s++)a.append(this.get(s,i)?e:t);a.append(n)}return a.toString()},r.prototype.clone=function(){return new r(this.width,this.height,this.rowSize,this.bits.slice())},r})(),vu=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),I=(function(r){vu(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e})(Fe),xu=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),gu=(function(r){xu(e,r);function e(t){var n=r.call(this,t)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return e.prototype.getBlackRow=function(t,n){var a=this.getLuminanceSource(),i=a.getWidth();n==null||n.getSize()<i?n=new be(i):n.clear(),this.initArrays(i);for(var o=a.getRow(t,this.luminances),s=this.buckets,u=0;u<i;u++)s[(o[u]&255)>>e.LUMINANCE_SHIFT]++;var c=e.estimateBlackPoint(s);if(i<3)for(var u=0;u<i;u++)(o[u]&255)<c&&n.set(u);else for(var l=o[0]&255,f=o[1]&255,u=1;u<i-1;u++){var d=o[u+1]&255;(f*4-l-d)/2<c&&n.set(u),l=f,f=d}return n},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),n=t.getWidth(),a=t.getHeight(),i=new Qe(n,a);this.initArrays(n);for(var o=this.buckets,s=1;s<5;s++)for(var u=Math.floor(a*s/5),c=t.getRow(u,this.luminances),l=Math.floor(n*4/5),f=Math.floor(n/5);f<l;f++){var d=c[f]&255;o[d>>e.LUMINANCE_SHIFT]++}for(var h=e.estimateBlackPoint(o),v=t.getMatrix(),s=0;s<a;s++)for(var x=s*n,f=0;f<n;f++){var d=v[x+f]&255;d<h&&i.set(f,s)}return i},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var n=this.buckets,a=0;a<e.LUMINANCE_BUCKETS;a++)n[a]=0},e.estimateBlackPoint=function(t){for(var n=t.length,a=0,i=0,o=0,s=0;s<n;s++)t[s]>o&&(i=s,o=t[s]),t[s]>a&&(a=t[s]);for(var u=0,c=0,s=0;s<n;s++){var l=s-i,f=t[s]*l*l;f>c&&(u=s,c=f)}if(i>u){var d=i;i=u,u=d}if(u-i<=n/16)throw new I;for(var h=u-1,v=-1,s=u-1;s>i;s--){var x=s-i,f=x*x*(u-s)*(a-t[s]);f>v&&(h=s,v=f)}return h<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e})(uu),mu=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),vi=(function(r){mu(e,r);function e(t){var n=r.call(this,t)||this;return n.matrix=null,n}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),n=t.getWidth(),a=t.getHeight();if(n>=e.MINIMUM_DIMENSION&&a>=e.MINIMUM_DIMENSION){var i=t.getMatrix(),o=n>>e.BLOCK_SIZE_POWER;(n&e.BLOCK_SIZE_MASK)!==0&&o++;var s=a>>e.BLOCK_SIZE_POWER;(a&e.BLOCK_SIZE_MASK)!==0&&s++;var u=e.calculateBlackPoints(i,o,s,n,a),c=new Qe(n,a);e.calculateThresholdForBlock(i,o,s,n,a,u,c),this.matrix=c}else this.matrix=r.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,n,a,i,o,s,u){for(var c=o-e.BLOCK_SIZE,l=i-e.BLOCK_SIZE,f=0;f<a;f++){var d=f<<e.BLOCK_SIZE_POWER;d>c&&(d=c);for(var h=e.cap(f,2,a-3),v=0;v<n;v++){var x=v<<e.BLOCK_SIZE_POWER;x>l&&(x=l);for(var g=e.cap(v,2,n-3),w=0,y=-2;y<=2;y++){var _=s[h+y];w+=_[g-2]+_[g-1]+_[g]+_[g+1]+_[g+2]}var b=w/25;e.thresholdBlock(t,x,d,b,i,u)}}},e.cap=function(t,n,a){return t<n?n:t>a?a:t},e.thresholdBlock=function(t,n,a,i,o,s){for(var u=0,c=a*o+n;u<e.BLOCK_SIZE;u++,c+=o)for(var l=0;l<e.BLOCK_SIZE;l++)(t[c+l]&255)<=i&&s.set(n+l,a+u)},e.calculateBlackPoints=function(t,n,a,i,o){for(var s=o-e.BLOCK_SIZE,u=i-e.BLOCK_SIZE,c=new Array(a),l=0;l<a;l++){c[l]=new Int32Array(n);var f=l<<e.BLOCK_SIZE_POWER;f>s&&(f=s);for(var d=0;d<n;d++){var h=d<<e.BLOCK_SIZE_POWER;h>u&&(h=u);for(var v=0,x=255,g=0,w=0,y=f*i+h;w<e.BLOCK_SIZE;w++,y+=i){for(var _=0;_<e.BLOCK_SIZE;_++){var b=t[y+_]&255;v+=b,b<x&&(x=b),b>g&&(g=b)}if(g-x>e.MIN_DYNAMIC_RANGE)for(w++,y+=i;w<e.BLOCK_SIZE;w++,y+=i)for(var _=0;_<e.BLOCK_SIZE;_++)v+=t[y+_]&255}var E=v>>e.BLOCK_SIZE_POWER*2;if(g-x<=e.MIN_DYNAMIC_RANGE&&(E=x/2,l>0&&d>0)){var S=(c[l-1][d]+2*c[l][d-1]+c[l-1][d-1])/4;x<S&&(E=S)}c[l][d]=E}}return c},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e})(gu),Wt=(function(){function r(e,t){this.width=e,this.height=t}return r.prototype.getWidth=function(){return this.width},r.prototype.getHeight=function(){return this.height},r.prototype.isCropSupported=function(){return!1},r.prototype.crop=function(e,t,n,a){throw new ir("This luminance source does not support cropping.")},r.prototype.isRotateSupported=function(){return!1},r.prototype.rotateCounterClockwise=function(){throw new ir("This luminance source does not support rotation by 90 degrees.")},r.prototype.rotateCounterClockwise45=function(){throw new ir("This luminance source does not support rotation by 45 degrees.")},r.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new F,n=0;n<this.height;n++){for(var a=this.getRow(n,e),i=0;i<this.width;i++){var o=a[i]&255,s=void 0;o<64?s="#":o<128?s="+":o<192?s=".":s=" ",t.append(s)}t.append(`
`)}return t.toString()},r})(),yu=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),mr=(function(r){yu(e,r);function e(t){var n=r.call(this,t.getWidth(),t.getHeight())||this;return n.delegate=t,n}return e.prototype.getRow=function(t,n){for(var a=this.delegate.getRow(t,n),i=this.getWidth(),o=0;o<i;o++)a[o]=255-(a[o]&255);return a},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(n),i=0;i<n;i++)a[i]=255-(t[i]&255);return a},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,n,a,i){return new e(this.delegate.crop(t,n,a,i))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e})(Wt),wu=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),_u=(function(r){wu(e,r);function e(t,n){n===void 0&&(n=!1);var a=r.call(this,t.width,t.height)||this;return a.canvas=t,a.tempCanvasElement=null,a.buffer=e.makeBufferFromCanvasImageData(t,n),a}return e.makeBufferFromCanvasImageData=function(t,n){n===void 0&&(n=!1);var a=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(a.data,t.width,t.height,n)},e.toGrayscaleBuffer=function(t,n,a,i){i===void 0&&(i=!1);var o=new Uint8ClampedArray(n*a);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!i)for(var s=0,u=0,c=t.length;s<c;s+=4,u++){var l=void 0,f=t[s+3];if(f===0)l=255;else{var d=t[s],h=t[s+1],v=t[s+2];l=306*d+601*h+117*v+512>>10}o[u]=l}else for(var s=0,u=0,x=t.length;s<x;s+=4,u++){var l=void 0,f=t[s+3];if(f===0)l=255;else{var d=t[s],h=t[s+1],v=t[s+2];l=306*d+601*h+117*v+512>>10}o[u]=255-l}return o},e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new M("Requested row is outside the image: "+t);var a=this.getWidth(),i=t*a;return n===null?n=this.buffer.slice(i,i+a):(n.length<a&&(n=new Uint8ClampedArray(a)),n.set(this.buffer.slice(i,i+a))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,a,i){return r.prototype.crop.call(this,t,n,a,i),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var n=this.getTempCanvasElement(),a=n.getContext("2d"),i=t*e.DEGREE_TO_RADIANS,o=this.canvas.width,s=this.canvas.height,u=Math.ceil(Math.abs(Math.cos(i))*o+Math.abs(Math.sin(i))*s),c=Math.ceil(Math.abs(Math.sin(i))*o+Math.abs(Math.cos(i))*s);return n.width=u,n.height=c,a.translate(u/2,c/2),a.rotate(i),a.drawImage(this.canvas,o/-2,s/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.prototype.invert=function(){return new mr(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e})(Wt),Au=(function(){function r(e,t,n){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=n||void 0}return r.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},r})(),Re=function(r,e,t,n){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function s(l){try{c(n.next(l))}catch(f){o(f)}}function u(l){try{c(n.throw(l))}catch(f){o(f)}}function c(l){l.done?i(l.value):a(l.value).then(s,u)}c((n=n.apply(r,e||[])).next())})},De=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,a&&(i=c[0]&2?a.return:c[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,c[1])).done)return i;switch(a=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,a=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){t.label=c[1];break}if(c[0]===6&&t.label<i[1]){t.label=i[1],i=c;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(c);break}i[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(l){c=[6,l],a=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},bu=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},It=(function(){function r(e,t,n){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(r.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),r.prototype.listVideoInputDevices=function(){return Re(this,void 0,void 0,function(){var e,t,n,a,i,o,s,u,c,l,f,d;return De(this,function(h){switch(h.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=h.sent(),t=[];try{for(n=bu(e),a=n.next();!a.done;a=n.next())i=a.value,o=i.kind==="video"?"videoinput":i.kind,o==="videoinput"&&(s=i.deviceId||i.id,u=i.label||"Video device "+(t.length+1),c=i.groupId,l={deviceId:s,label:u,kind:o,groupId:c},t.push(l))}catch(v){f={error:v}}finally{try{a&&!a.done&&(d=n.return)&&d.call(n)}finally{if(f)throw f.error}}return[2,t]}})})},r.prototype.getVideoInputDevices=function(){return Re(this,void 0,void 0,function(){var e;return De(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(n){return new Au(n.deviceId,n.label)})]}})})},r.prototype.findDeviceById=function(e){return Re(this,void 0,void 0,function(){var t;return De(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=n.sent(),t?[2,t.find(function(a){return a.deviceId===e})]:[2,null]}})})},r.prototype.decodeFromInputVideoDevice=function(e,t){return Re(this,void 0,void 0,function(){return De(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,n.sent()]}})})},r.prototype.decodeOnceFromVideoDevice=function(e,t){return Re(this,void 0,void 0,function(){var n,a;return De(this,function(i){switch(i.label){case 0:return this.reset(),e?n={deviceId:{exact:e}}:n={facingMode:"environment"},a={video:n},[4,this.decodeOnceFromConstraints(a,t)];case 1:return[2,i.sent()]}})})},r.prototype.decodeOnceFromConstraints=function(e,t){return Re(this,void 0,void 0,function(){var n;return De(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=a.sent(),[4,this.decodeOnceFromStream(n,t)];case 2:return[2,a.sent()]}})})},r.prototype.decodeOnceFromStream=function(e,t){return Re(this,void 0,void 0,function(){var n,a;return De(this,function(i){switch(i.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return n=i.sent(),[4,this.decodeOnce(n)];case 2:return a=i.sent(),[2,a]}})})},r.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,n){return Re(this,void 0,void 0,function(){return De(this,function(a){switch(a.label){case 0:return[4,this.decodeFromVideoDevice(e,t,n)];case 1:return[2,a.sent()]}})})},r.prototype.decodeFromVideoDevice=function(e,t,n){return Re(this,void 0,void 0,function(){var a,i;return De(this,function(o){switch(o.label){case 0:return e?a={deviceId:{exact:e}}:a={facingMode:"environment"},i={video:a},[4,this.decodeFromConstraints(i,t,n)];case 1:return[2,o.sent()]}})})},r.prototype.decodeFromConstraints=function(e,t,n){return Re(this,void 0,void 0,function(){var a;return De(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return a=i.sent(),[4,this.decodeFromStream(a,t,n)];case 2:return[2,i.sent()]}})})},r.prototype.decodeFromStream=function(e,t,n){return Re(this,void 0,void 0,function(){var a;return De(this,function(i){switch(i.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return a=i.sent(),[4,this.decodeContinuously(a,n)];case 2:return[2,i.sent()]}})})},r.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},r.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},r.prototype.attachStreamToVideo=function(e,t){return Re(this,void 0,void 0,function(){var n;return De(this,function(a){switch(a.label){case 0:return n=this.prepareVideoElement(t),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return a.sent(),[2,n]}})})},r.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(n,a){return t.playVideoOnLoad(e,function(){return n()})})},r.prototype.playVideoOnLoad=function(e,t){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},r.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},r.prototype.tryPlayVideo=function(e){return Re(this,void 0,void 0,function(){return De(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},r.prototype.getMediaElement=function(e,t){var n=document.getElementById(e);if(!n)throw new de("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new de("element with id '"+e+"' must be an "+t+" element");return n},r.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new de("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},r.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new de("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},r.prototype.decodeFromVideoContinuously=function(e,t,n){if(e===void 0&&t===void 0)throw new de("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,n):this.decodeFromVideoElementContinuously(e,n)},r.prototype.decodeFromImageElement=function(e){if(!e)throw new de("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var n;return this.isImageLoaded(t)?n=this.decodeOnce(t,!1,!0):n=this._decodeOnLoadImage(t),n},r.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},r.prototype.decodeFromVideoElementContinuously=function(e,t){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,t)},r.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new de("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},r.prototype.decodeFromImageUrl=function(e){if(!e)throw new de("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var n=this._decodeOnLoadImage(t);return t.src=e,n},r.prototype.decodeFromVideoUrl=function(e){if(!e)throw new de("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),n=this.decodeFromVideoElement(t);return t.src=e,n},r.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new de("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),a=this.decodeFromVideoElementContinuously(n,t);return n.src=e,a},r.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(n,a){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(n,a)},e.addEventListener("load",t.imageLoadedListener)})},r.prototype._decodeOnLoadVideo=function(e){return Re(this,void 0,void 0,function(){return De(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},r.prototype._decodeOnLoadVideoContinuously=function(e,t){return Re(this,void 0,void 0,function(){return De(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,t),[2]}})})},r.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},r.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},r.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},r.prototype.decodeOnce=function(e,t,n){var a=this;t===void 0&&(t=!0),n===void 0&&(n=!0),this._stopAsyncDecode=!1;var i=function(o,s){if(a._stopAsyncDecode){s(new I("Video stream has ended before any code could be detected.")),a._stopAsyncDecode=void 0;return}try{var u=a.decode(e);o(u)}catch(d){var c=t&&d instanceof I,l=d instanceof he||d instanceof R,f=l&&n;if(c||f)return setTimeout(i,a._timeBetweenDecodingAttempts,o,s);s(d)}};return new Promise(function(o,s){return i(o,s)})},r.prototype.decodeContinuously=function(e,t){var n=this;this._stopContinuousDecode=!1;var a=function(){if(n._stopContinuousDecode){n._stopContinuousDecode=void 0;return}try{var i=n.decode(e);t(i,null),setTimeout(a,n.timeBetweenScansMillis)}catch(u){t(null,u);var o=u instanceof he||u instanceof R,s=u instanceof I;(o||s)&&setTimeout(a,n._timeBetweenDecodingAttempts)}};a()},r.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},r.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var t=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),t=!0):this.drawImageOnCanvas(e);var n=this.getCaptureCanvas(e),a=new _u(n,t),i=new vi(a);return new pi(i)},r.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),n=void 0;try{n=t.getContext("2d",{willReadFrequently:!0})}catch{n=t.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},r.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},r.prototype.drawFrameOnCanvas=function(e,t,n){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},r.prototype.drawImageOnCanvas=function(e,t,n){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},r.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},r.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),n,a;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,a=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,a=e.naturalHeight||e.height)),t.style.width=n+"px",t.style.height=a+"px",t.width=n,t.height=a,t},r.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},r.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},r.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},r.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},r.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},r.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},r.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},r})(),Te=(function(){function r(e,t,n,a,i,o){n===void 0&&(n=t==null?0:8*t.length),o===void 0&&(o=te.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=n,this.resultPoints=a,this.format=i,this.timestamp=o,this.text=e,this.rawBytes=t,n==null?this.numBits=t==null?0:8*t.length:this.numBits=n,this.resultPoints=a,this.format=i,this.resultMetadata=null,o==null?this.timestamp=te.currentTimeMillis():this.timestamp=o}return r.prototype.getText=function(){return this.text},r.prototype.getRawBytes=function(){return this.rawBytes},r.prototype.getNumBits=function(){return this.numBits},r.prototype.getResultPoints=function(){return this.resultPoints},r.prototype.getBarcodeFormat=function(){return this.format},r.prototype.getResultMetadata=function(){return this.resultMetadata},r.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},r.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},r.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var n=new Array(t.length+e.length);te.arraycopy(t,0,n,0,t.length),te.arraycopy(e,0,n,t.length,e.length),this.resultPoints=n}},r.prototype.getTimestamp=function(){return this.timestamp},r.prototype.toString=function(){return this.text},r})(),qr;(function(r){r[r.AZTEC=0]="AZTEC",r[r.CODABAR=1]="CODABAR",r[r.CODE_39=2]="CODE_39",r[r.CODE_93=3]="CODE_93",r[r.CODE_128=4]="CODE_128",r[r.DATA_MATRIX=5]="DATA_MATRIX",r[r.EAN_8=6]="EAN_8",r[r.EAN_13=7]="EAN_13",r[r.ITF=8]="ITF",r[r.MAXICODE=9]="MAXICODE",r[r.PDF_417=10]="PDF_417",r[r.QR_CODE=11]="QR_CODE",r[r.RSS_14=12]="RSS_14",r[r.RSS_EXPANDED=13]="RSS_EXPANDED",r[r.UPC_A=14]="UPC_A",r[r.UPC_E=15]="UPC_E",r[r.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(qr||(qr={}));const P=qr;var Jr;(function(r){r[r.OTHER=0]="OTHER",r[r.ORIENTATION=1]="ORIENTATION",r[r.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",r[r.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",r[r.ISSUE_NUMBER=4]="ISSUE_NUMBER",r[r.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",r[r.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",r[r.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",r[r.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",r[r.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",r[r.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Jr||(Jr={}));const Ie=Jr;var yr=(function(){function r(e,t,n,a,i,o){i===void 0&&(i=-1),o===void 0&&(o=-1),this.rawBytes=e,this.text=t,this.byteSegments=n,this.ecLevel=a,this.structuredAppendSequenceNumber=i,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}return r.prototype.getRawBytes=function(){return this.rawBytes},r.prototype.getNumBits=function(){return this.numBits},r.prototype.setNumBits=function(e){this.numBits=e},r.prototype.getText=function(){return this.text},r.prototype.getByteSegments=function(){return this.byteSegments},r.prototype.getECLevel=function(){return this.ecLevel},r.prototype.getErrorsCorrected=function(){return this.errorsCorrected},r.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},r.prototype.getErasures=function(){return this.erasures},r.prototype.setErasures=function(e){this.erasures=e},r.prototype.getOther=function(){return this.other},r.prototype.setOther=function(e){this.other=e},r.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},r.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},r.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},r})(),Bt=(function(){function r(){}return r.prototype.exp=function(e){return this.expTable[e]},r.prototype.log=function(e){if(e===0)throw new M;return this.logTable[e]},r.addOrSubtract=function(e,t){return e^t},r})(),st=(function(){function r(e,t){if(t.length===0)throw new M;this.field=e;var n=t.length;if(n>1&&t[0]===0){for(var a=1;a<n&&t[a]===0;)a++;a===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-a),te.arraycopy(t,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return r.prototype.getCoefficients=function(){return this.coefficients},r.prototype.getDegree=function(){return this.coefficients.length-1},r.prototype.isZero=function(){return this.coefficients[0]===0},r.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},r.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,n;if(e===1){n=0;for(var a=0,i=t.length;a!==i;a++){var o=t[a];n=Bt.addOrSubtract(n,o)}return n}n=t[0];for(var s=t.length,u=this.field,a=1;a<s;a++)n=Bt.addOrSubtract(u.multiply(e,n),t[a]);return n},r.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new M("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,n=e.coefficients;if(t.length>n.length){var a=t;t=n,n=a}var i=new Int32Array(n.length),o=n.length-t.length;te.arraycopy(n,0,i,0,o);for(var s=o;s<n.length;s++)i[s]=Bt.addOrSubtract(t[s-o],n[s]);return new r(this.field,i)},r.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new M("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,n=t.length,a=e.coefficients,i=a.length,o=new Int32Array(n+i-1),s=this.field,u=0;u<n;u++)for(var c=t[u],l=0;l<i;l++)o[u+l]=Bt.addOrSubtract(o[u+l],s.multiply(c,a[l]));return new r(s,o)},r.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,n=this.field,a=new Int32Array(t),i=this.coefficients,o=0;o<t;o++)a[o]=n.multiply(i[o],e);return new r(n,a)},r.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new M;if(t===0)return this.field.getZero();for(var n=this.coefficients,a=n.length,i=new Int32Array(a+e),o=this.field,s=0;s<a;s++)i[s]=o.multiply(n[s],t);return new r(o,i)},r.prototype.divide=function(e){if(!this.field.equals(e.field))throw new M("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new M("Divide by 0");for(var t=this.field,n=t.getZero(),a=this,i=e.getCoefficient(e.getDegree()),o=t.inverse(i);a.getDegree()>=e.getDegree()&&!a.isZero();){var s=a.getDegree()-e.getDegree(),u=t.multiply(a.getCoefficient(a.getDegree()),o),c=e.multiplyByMonomial(s,u),l=t.buildMonomial(s,u);n=n.addOrSubtract(l),a=a.addOrSubtract(c)}return[n,a]},r.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var n=this.getCoefficient(t);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),t===0||n!==1){var a=this.field.log(n);a===0?e+="1":a===1?e+="a":(e+="a^",e+=a)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},r})(),Eu=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),xi=(function(r){Eu(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ArithmeticException",e})(Fe),Cu=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Le=(function(r){Cu(e,r);function e(t,n,a){var i=r.call(this)||this;i.primitive=t,i.size=n,i.generatorBase=a;for(var o=new Int32Array(n),s=1,u=0;u<n;u++)o[u]=s,s*=2,s>=n&&(s^=t,s&=n-1);i.expTable=o;for(var c=new Int32Array(n),u=0;u<n-1;u++)c[o[u]]=u;return i.logTable=c,i.zero=new st(i,Int32Array.from([0])),i.one=new st(i,Int32Array.from([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,n){if(t<0)throw new M;if(n===0)return this.zero;var a=new Int32Array(t+1);return a[0]=n,new st(this,a)},e.prototype.inverse=function(t){if(t===0)throw new xi;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,n){return t===0||n===0?0:this.expTable[(this.logTable[t]+this.logTable[n])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+U.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e})(Bt),Su=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),qt=(function(r){Su(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ReedSolomonException",e})(Fe),Iu=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Xt=(function(r){Iu(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="IllegalStateException",e})(Fe),wr=(function(){function r(e){this.field=e}return r.prototype.decode=function(e,t){for(var n=this.field,a=new st(n,e),i=new Int32Array(t),o=!0,s=0;s<t;s++){var u=a.evaluateAt(n.exp(s+n.getGeneratorBase()));i[i.length-1-s]=u,u!==0&&(o=!1)}if(!o)for(var c=new st(n,i),l=this.runEuclideanAlgorithm(n.buildMonomial(t,1),c,t),f=l[0],d=l[1],h=this.findErrorLocations(f),v=this.findErrorMagnitudes(d,h),s=0;s<h.length;s++){var x=e.length-1-n.log(h[s]);if(x<0)throw new qt("Bad error location");e[x]=Le.addOrSubtract(e[x],v[s])}},r.prototype.runEuclideanAlgorithm=function(e,t,n){if(e.getDegree()<t.getDegree()){var a=e;e=t,t=a}for(var i=this.field,o=e,s=t,u=i.getZero(),c=i.getOne();s.getDegree()>=(n/2|0);){var l=o,f=u;if(o=s,u=c,o.isZero())throw new qt("r_{i-1} was zero");s=l;for(var d=i.getZero(),h=o.getCoefficient(o.getDegree()),v=i.inverse(h);s.getDegree()>=o.getDegree()&&!s.isZero();){var x=s.getDegree()-o.getDegree(),g=i.multiply(s.getCoefficient(s.getDegree()),v);d=d.addOrSubtract(i.buildMonomial(x,g)),s=s.addOrSubtract(o.multiplyByMonomial(x,g))}if(c=d.multiply(u).addOrSubtract(f),s.getDegree()>=o.getDegree())throw new Xt("Division algorithm failed to reduce polynomial?")}var w=c.getCoefficient(0);if(w===0)throw new qt("sigmaTilde(0) was zero");var y=i.inverse(w),_=c.multiplyScalar(y),b=s.multiplyScalar(y);return[_,b]},r.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(t),a=0,i=this.field,o=1;o<i.getSize()&&a<t;o++)e.evaluateAt(o)===0&&(n[a]=i.inverse(o),a++);if(a!==t)throw new qt("Error locator degree does not match number of roots");return n},r.prototype.findErrorMagnitudes=function(e,t){for(var n=t.length,a=new Int32Array(n),i=this.field,o=0;o<n;o++){for(var s=i.inverse(t[o]),u=1,c=0;c<n;c++)if(o!==c){var l=i.multiply(t[c],s),f=(l&1)===0?l|1:l&-2;u=i.multiply(u,f)}a[o]=i.multiply(e.evaluateAt(s),i.inverse(u)),i.getGeneratorBase()!==0&&(a[o]=i.multiply(a[o],s))}return a},r})(),Ce;(function(r){r[r.UPPER=0]="UPPER",r[r.LOWER=1]="LOWER",r[r.MIXED=2]="MIXED",r[r.DIGIT=3]="DIGIT",r[r.PUNCT=4]="PUNCT",r[r.BINARY=5]="BINARY"})(Ce||(Ce={}));var Gn=(function(){function r(){}return r.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),n=this.extractBits(t),a=this.correctBits(n),i=r.convertBoolArrayToByteArray(a),o=r.getEncodedData(a),s=new yr(i,o,null,null);return s.setNumBits(a.length),s},r.highLevelDecode=function(e){return this.getEncodedData(e)},r.getEncodedData=function(e){for(var t=e.length,n=Ce.UPPER,a=Ce.UPPER,i="",o=0;o<t;)if(a===Ce.BINARY){if(t-o<5)break;var s=r.readCode(e,o,5);if(o+=5,s===0){if(t-o<11)break;s=r.readCode(e,o,11)+31,o+=11}for(var u=0;u<s;u++){if(t-o<8){o=t;break}var c=r.readCode(e,o,8);i+=V.castAsNonUtf8Char(c),o+=8}a=n}else{var l=a===Ce.DIGIT?4:5;if(t-o<l)break;var c=r.readCode(e,o,l);o+=l;var f=r.getCharacter(a,c);f.startsWith("CTRL_")?(n=a,a=r.getTable(f.charAt(5)),f.charAt(6)==="L"&&(n=a)):(i+=f,a=n)}return i},r.getTable=function(e){switch(e){case"L":return Ce.LOWER;case"P":return Ce.PUNCT;case"M":return Ce.MIXED;case"D":return Ce.DIGIT;case"B":return Ce.BINARY;case"U":default:return Ce.UPPER}},r.getCharacter=function(e,t){switch(e){case Ce.UPPER:return r.UPPER_TABLE[t];case Ce.LOWER:return r.LOWER_TABLE[t];case Ce.MIXED:return r.MIXED_TABLE[t];case Ce.PUNCT:return r.PUNCT_TABLE[t];case Ce.DIGIT:return r.DIGIT_TABLE[t];default:throw new Xt("Bad table")}},r.prototype.correctBits=function(e){var t,n;this.ddata.getNbLayers()<=2?(n=6,t=Le.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,t=Le.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,t=Le.AZTEC_DATA_10):(n=12,t=Le.AZTEC_DATA_12);var a=this.ddata.getNbDatablocks(),i=e.length/n;if(i<a)throw new R;for(var o=e.length%n,s=new Int32Array(i),u=0;u<i;u++,o+=n)s[u]=r.readCode(e,o,n);try{var c=new wr(t);c.decode(s,i-a)}catch(g){throw new R(g)}for(var l=(1<<n)-1,f=0,u=0;u<a;u++){var d=s[u];if(d===0||d===l)throw new R;(d===1||d===l-1)&&f++}for(var h=new Array(a*n-f),v=0,u=0;u<a;u++){var d=s[u];if(d===1||d===l-1)h.fill(d>1,v,v+n-1),v+=n-1;else for(var x=n-1;x>=0;--x)h[v++]=(d&1<<x)!==0}return h},r.prototype.extractBits=function(e){var t=this.ddata.isCompact(),n=this.ddata.getNbLayers(),a=(t?11:14)+n*4,i=new Int32Array(a),o=new Array(this.totalBitsInLayer(n,t));if(t)for(var s=0;s<i.length;s++)i[s]=s;else for(var u=a+1+2*U.truncDivision(U.truncDivision(a,2)-1,15),c=a/2,l=U.truncDivision(u,2),s=0;s<c;s++){var f=s+U.truncDivision(s,15);i[c-s-1]=l-f-1,i[c+s]=l+f+1}for(var s=0,d=0;s<n;s++){for(var h=(n-s)*4+(t?9:12),v=s*2,x=a-1-v,g=0;g<h;g++)for(var w=g*2,y=0;y<2;y++)o[d+w+y]=e.get(i[v+y],i[v+g]),o[d+2*h+w+y]=e.get(i[v+g],i[x-y]),o[d+4*h+w+y]=e.get(i[x-y],i[x-g]),o[d+6*h+w+y]=e.get(i[x-g],i[v+y]);d+=h*8}return o},r.readCode=function(e,t,n){for(var a=0,i=t;i<t+n;i++)a<<=1,e[i]&&(a|=1);return a},r.readByte=function(e,t){var n=e.length-t;return n>=8?r.readCode(e,t,8):r.readCode(e,t,n)<<8-n},r.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),n=0;n<t.length;n++)t[n]=r.readByte(e,8*n);return t},r.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},r.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],r.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],r.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],r.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],r.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],r})(),W=(function(){function r(){}return r.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},r.distance=function(e,t,n,a){var i=e-n,o=t-a;return Math.sqrt(i*i+o*o)},r.sum=function(e){for(var t=0,n=0,a=e.length;n!==a;n++){var i=e[n];t+=i}return t},r})(),Qr=(function(){function r(){}return r.floatToIntBits=function(e){return e},r.MAX_VALUE=Number.MAX_SAFE_INTEGER,r})(),k=(function(){function r(e,t){this.x=e,this.y=t}return r.prototype.getX=function(){return this.x},r.prototype.getY=function(){return this.y},r.prototype.equals=function(e){if(e instanceof r){var t=e;return this.x===t.x&&this.y===t.y}return!1},r.prototype.hashCode=function(){return 31*Qr.floatToIntBits(this.x)+Qr.floatToIntBits(this.y)},r.prototype.toString=function(){return"("+this.x+","+this.y+")"},r.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),a=this.distance(e[0],e[2]),i,o,s;if(n>=t&&n>=a?(o=e[0],i=e[1],s=e[2]):a>=n&&a>=t?(o=e[1],i=e[0],s=e[2]):(o=e[2],i=e[0],s=e[1]),this.crossProductZ(i,o,s)<0){var u=i;i=s,s=u}e[0]=i,e[1]=o,e[2]=s},r.distance=function(e,t){return W.distance(e.x,e.y,t.x,t.y)},r.crossProductZ=function(e,t,n){var a=t.x,i=t.y;return(n.x-a)*(e.y-i)-(n.y-i)*(e.x-a)},r})(),gn=(function(){function r(e,t){this.bits=e,this.points=t}return r.prototype.getBits=function(){return this.bits},r.prototype.getPoints=function(){return this.points},r})(),Ou=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Nu=(function(r){Ou(e,r);function e(t,n,a,i,o){var s=r.call(this,t,n)||this;return s.compact=a,s.nbDatablocks=i,s.nbLayers=o,s}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e})(gn),en=(function(){function r(e,t,n,a){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=r.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),a==null&&(a=e.getHeight()/2|0);var i=t/2|0;if(this.leftInit=n-i,this.rightInit=n+i,this.upInit=a-i,this.downInit=a+i,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new I}return r.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,n=this.upInit,a=this.downInit,i=!1,o=!0,s=!1,u=!1,c=!1,l=!1,f=!1,d=this.width,h=this.height;o;){o=!1;for(var v=!0;(v||!u)&&t<d;)v=this.containsBlackPoint(n,a,t,!1),v?(t++,o=!0,u=!0):u||t++;if(t>=d){i=!0;break}for(var x=!0;(x||!c)&&a<h;)x=this.containsBlackPoint(e,t,a,!0),x?(a++,o=!0,c=!0):c||a++;if(a>=h){i=!0;break}for(var g=!0;(g||!l)&&e>=0;)g=this.containsBlackPoint(n,a,e,!1),g?(e--,o=!0,l=!0):l||e--;if(e<0){i=!0;break}for(var w=!0;(w||!f)&&n>=0;)w=this.containsBlackPoint(e,t,n,!0),w?(n--,o=!0,f=!0):f||n--;if(n<0){i=!0;break}o&&(s=!0)}if(!i&&s){for(var y=t-e,_=null,b=1;_===null&&b<y;b++)_=this.getBlackPointOnSegment(e,a-b,e+b,a);if(_==null)throw new I;for(var E=null,b=1;E===null&&b<y;b++)E=this.getBlackPointOnSegment(e,n+b,e+b,n);if(E==null)throw new I;for(var S=null,b=1;S===null&&b<y;b++)S=this.getBlackPointOnSegment(t,n+b,t-b,n);if(S==null)throw new I;for(var O=null,b=1;O===null&&b<y;b++)O=this.getBlackPointOnSegment(t,a-b,t-b,a);if(O==null)throw new I;return this.centerEdges(O,_,S,E)}else throw new I},r.prototype.getBlackPointOnSegment=function(e,t,n,a){for(var i=W.round(W.distance(e,t,n,a)),o=(n-e)/i,s=(a-t)/i,u=this.image,c=0;c<i;c++){var l=W.round(e+c*o),f=W.round(t+c*s);if(u.get(l,f))return new k(l,f)}return null},r.prototype.centerEdges=function(e,t,n,a){var i=e.getX(),o=e.getY(),s=t.getX(),u=t.getY(),c=n.getX(),l=n.getY(),f=a.getX(),d=a.getY(),h=r.CORR;return i<this.width/2?[new k(f-h,d+h),new k(s+h,u+h),new k(c-h,l-h),new k(i+h,o-h)]:[new k(f+h,d+h),new k(s+h,u-h),new k(c-h,l+h),new k(i-h,o-h)]},r.prototype.containsBlackPoint=function(e,t,n,a){var i=this.image;if(a){for(var o=e;o<=t;o++)if(i.get(o,n))return!0}else for(var s=e;s<=t;s++)if(i.get(n,s))return!0;return!1},r.INIT_SIZE=10,r.CORR=1,r})(),$n=(function(){function r(){}return r.checkAndNudgePoints=function(e,t){for(var n=e.getWidth(),a=e.getHeight(),i=!0,o=0;o<t.length&&i;o+=2){var s=Math.floor(t[o]),u=Math.floor(t[o+1]);if(s<-1||s>n||u<-1||u>a)throw new I;i=!1,s===-1?(t[o]=0,i=!0):s===n&&(t[o]=n-1,i=!0),u===-1?(t[o+1]=0,i=!0):u===a&&(t[o+1]=a-1,i=!0)}i=!0;for(var o=t.length-2;o>=0&&i;o-=2){var s=Math.floor(t[o]),u=Math.floor(t[o+1]);if(s<-1||s>n||u<-1||u>a)throw new I;i=!1,s===-1?(t[o]=0,i=!0):s===n&&(t[o]=n-1,i=!0),u===-1?(t[o+1]=0,i=!0):u===a&&(t[o+1]=a-1,i=!0)}},r})(),gi=(function(){function r(e,t,n,a,i,o,s,u,c){this.a11=e,this.a21=t,this.a31=n,this.a12=a,this.a22=i,this.a32=o,this.a13=s,this.a23=u,this.a33=c}return r.quadrilateralToQuadrilateral=function(e,t,n,a,i,o,s,u,c,l,f,d,h,v,x,g){var w=r.quadrilateralToSquare(e,t,n,a,i,o,s,u),y=r.squareToQuadrilateral(c,l,f,d,h,v,x,g);return y.times(w)},r.prototype.transformPoints=function(e){for(var t=e.length,n=this.a11,a=this.a12,i=this.a13,o=this.a21,s=this.a22,u=this.a23,c=this.a31,l=this.a32,f=this.a33,d=0;d<t;d+=2){var h=e[d],v=e[d+1],x=i*h+u*v+f;e[d]=(n*h+o*v+c)/x,e[d+1]=(a*h+s*v+l)/x}},r.prototype.transformPointsWithValues=function(e,t){for(var n=this.a11,a=this.a12,i=this.a13,o=this.a21,s=this.a22,u=this.a23,c=this.a31,l=this.a32,f=this.a33,d=e.length,h=0;h<d;h++){var v=e[h],x=t[h],g=i*v+u*x+f;e[h]=(n*v+o*x+c)/g,t[h]=(a*v+s*x+l)/g}},r.squareToQuadrilateral=function(e,t,n,a,i,o,s,u){var c=e-n+i-s,l=t-a+o-u;if(c===0&&l===0)return new r(n-e,i-n,e,a-t,o-a,t,0,0,1);var f=n-i,d=s-i,h=a-o,v=u-o,x=f*v-d*h,g=(c*v-d*l)/x,w=(f*l-c*h)/x;return new r(n-e+g*n,s-e+w*s,e,a-t+g*a,u-t+w*u,t,g,w,1)},r.quadrilateralToSquare=function(e,t,n,a,i,o,s,u){return r.squareToQuadrilateral(e,t,n,a,i,o,s,u).buildAdjoint()},r.prototype.buildAdjoint=function(){return new r(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},r.prototype.times=function(e){return new r(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},r})(),Tu=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Ru=(function(r){Tu(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,n,a,i,o,s,u,c,l,f,d,h,v,x,g,w,y,_,b){var E=gi.quadrilateralToQuadrilateral(i,o,s,u,c,l,f,d,h,v,x,g,w,y,_,b);return this.sampleGridWithTransform(t,n,a,E)},e.prototype.sampleGridWithTransform=function(t,n,a,i){if(n<=0||a<=0)throw new I;for(var o=new Qe(n,a),s=new Float32Array(2*n),u=0;u<a;u++){for(var c=s.length,l=u+.5,f=0;f<c;f+=2)s[f]=f/2+.5,s[f+1]=l;i.transformPoints(s),$n.checkAndNudgePoints(t,s);try{for(var f=0;f<c;f+=2)t.get(Math.floor(s[f]),Math.floor(s[f+1]))&&o.set(f/2,u)}catch{throw new I}}return o},e})($n),mn=(function(){function r(){}return r.setGridSampler=function(e){r.gridSampler=e},r.getInstance=function(){return r.gridSampler},r.gridSampler=new Ru,r})(),Be=(function(){function r(e,t){this.x=e,this.y=t}return r.prototype.toResultPoint=function(){return new k(this.getX(),this.getY())},r.prototype.getX=function(){return this.x},r.prototype.getY=function(){return this.y},r})(),Du=(function(){function r(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return r.prototype.detect=function(){return this.detectMirror(!1)},r.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),n=this.getBullsEyeCorners(t);if(e){var a=n[0];n[0]=n[2],n[2]=a}this.extractParameters(n);var i=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),o=this.getMatrixCornerPoints(n);return new Nu(i,o,this.compact,this.nbDataBlocks,this.nbLayers)},r.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new I;var t=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(n,t);for(var a=0,i=0;i<4;i++){var o=n[(this.shift+i)%4];this.compact?(a<<=7,a+=o>>1&127):(a<<=10,a+=(o>>2&992)+(o>>1&31))}var s=this.getCorrectedParameterData(a,this.compact);this.compact?(this.nbLayers=(s>>6)+1,this.nbDataBlocks=(s&63)+1):(this.nbLayers=(s>>11)+1,this.nbDataBlocks=(s&2047)+1)},r.prototype.getRotation=function(e,t){var n=0;e.forEach(function(i,o,s){var u=(i>>t-2<<1)+(i&1);n=(n<<3)+u}),n=((n&1)<<11)+(n>>1);for(var a=0;a<4;a++)if(U.bitCount(n^this.EXPECTED_CORNER_BITS[a])<=2)return a;throw new I},r.prototype.getCorrectedParameterData=function(e,t){var n,a;t?(n=7,a=2):(n=10,a=4);for(var i=n-a,o=new Int32Array(n),s=n-1;s>=0;--s)o[s]=e&15,e>>=4;try{var u=new wr(Le.AZTEC_PARAM);u.decode(o,i)}catch{throw new I}for(var c=0,s=0;s<a;s++)c=(c<<4)+o[s];return c},r.prototype.getBullsEyeCorners=function(e){var t=e,n=e,a=e,i=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var s=this.getFirstDifferent(t,o,1,-1),u=this.getFirstDifferent(n,o,1,1),c=this.getFirstDifferent(a,o,-1,1),l=this.getFirstDifferent(i,o,-1,-1);if(this.nbCenterLayers>2){var f=this.distancePoint(l,s)*this.nbCenterLayers/(this.distancePoint(i,t)*(this.nbCenterLayers+2));if(f<.75||f>1.25||!this.isWhiteOrBlackRectangle(s,u,c,l))break}t=s,n=u,a=c,i=l,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new I;this.compact=this.nbCenterLayers===5;var d=new k(t.getX()+.5,t.getY()-.5),h=new k(n.getX()+.5,n.getY()+.5),v=new k(a.getX()-.5,a.getY()+.5),x=new k(i.getX()-.5,i.getY()-.5);return this.expandSquare([d,h,v,x],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},r.prototype.getMatrixCenter=function(){var e,t,n,a;try{var i=new en(this.image).detect();e=i[0],t=i[1],n=i[2],a=i[3]}catch{var o=this.image.getWidth()/2,s=this.image.getHeight()/2;e=this.getFirstDifferent(new Be(o+7,s-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Be(o+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Be(o-7,s+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new Be(o-7,s-7),!1,-1,-1).toResultPoint()}var u=W.round((e.getX()+a.getX()+t.getX()+n.getX())/4),c=W.round((e.getY()+a.getY()+t.getY()+n.getY())/4);try{var i=new en(this.image,15,u,c).detect();e=i[0],t=i[1],n=i[2],a=i[3]}catch{e=this.getFirstDifferent(new Be(u+7,c-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Be(u+7,c+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Be(u-7,c+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new Be(u-7,c-7),!1,-1,-1).toResultPoint()}return u=W.round((e.getX()+a.getX()+t.getX()+n.getX())/4),c=W.round((e.getY()+a.getY()+t.getY()+n.getY())/4),new Be(u,c)},r.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},r.prototype.sampleGrid=function(e,t,n,a,i){var o=mn.getInstance(),s=this.getDimension(),u=s/2-this.nbCenterLayers,c=s/2+this.nbCenterLayers;return o.sampleGrid(e,s,s,u,u,c,u,c,c,u,c,t.getX(),t.getY(),n.getX(),n.getY(),a.getX(),a.getY(),i.getX(),i.getY())},r.prototype.sampleLine=function(e,t,n){for(var a=0,i=this.distanceResultPoint(e,t),o=i/n,s=e.getX(),u=e.getY(),c=o*(t.getX()-e.getX())/i,l=o*(t.getY()-e.getY())/i,f=0;f<n;f++)this.image.get(W.round(s+f*c),W.round(u+f*l))&&(a|=1<<n-f-1);return a},r.prototype.isWhiteOrBlackRectangle=function(e,t,n,a){var i=3;e=new Be(e.getX()-i,e.getY()+i),t=new Be(t.getX()-i,t.getY()-i),n=new Be(n.getX()+i,n.getY()-i),a=new Be(a.getX()+i,a.getY()+i);var o=this.getColor(a,e);if(o===0)return!1;var s=this.getColor(e,t);return s!==o||(s=this.getColor(t,n),s!==o)?!1:(s=this.getColor(n,a),s===o)},r.prototype.getColor=function(e,t){for(var n=this.distancePoint(e,t),a=(t.getX()-e.getX())/n,i=(t.getY()-e.getY())/n,o=0,s=e.getX(),u=e.getY(),c=this.image.get(e.getX(),e.getY()),l=Math.ceil(n),f=0;f<l;f++)s+=a,u+=i,this.image.get(W.round(s),W.round(u))!==c&&o++;var d=o/n;return d>.1&&d<.9?0:d<=.1===c?1:-1},r.prototype.getFirstDifferent=function(e,t,n,a){for(var i=e.getX()+n,o=e.getY()+a;this.isValid(i,o)&&this.image.get(i,o)===t;)i+=n,o+=a;for(i-=n,o-=a;this.isValid(i,o)&&this.image.get(i,o)===t;)i+=n;for(i-=n;this.isValid(i,o)&&this.image.get(i,o)===t;)o+=a;return o-=a,new Be(i,o)},r.prototype.expandSquare=function(e,t,n){var a=n/(2*t),i=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),s=(e[0].getX()+e[2].getX())/2,u=(e[0].getY()+e[2].getY())/2,c=new k(s+a*i,u+a*o),l=new k(s-a*i,u-a*o);i=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),s=(e[1].getX()+e[3].getX())/2,u=(e[1].getY()+e[3].getY())/2;var f=new k(s+a*i,u+a*o),d=new k(s-a*i,u-a*o),h=[c,f,l,d];return h},r.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},r.prototype.isValidPoint=function(e){var t=W.round(e.getX()),n=W.round(e.getY());return this.isValid(t,n)},r.prototype.distancePoint=function(e,t){return W.distance(e.getX(),e.getY(),t.getX(),t.getY())},r.prototype.distanceResultPoint=function(e,t){return W.distance(e.getX(),e.getY(),t.getX(),t.getY())},r.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(U.truncDivision(this.nbLayers-4,8)+1)+15},r})(),cr=(function(){function r(){}return r.prototype.decode=function(e,t){t===void 0&&(t=null);var n=null,a=new Du(e.getBlackMatrix()),i=null,o=null;try{var s=a.detectMirror(!1);i=s.getPoints(),this.reportFoundResultPoints(t,i),o=new Gn().decode(s)}catch(f){n=f}if(o==null)try{var s=a.detectMirror(!0);i=s.getPoints(),this.reportFoundResultPoints(t,i),o=new Gn().decode(s)}catch(f){throw n??f}var u=new Te(o.getText(),o.getRawBytes(),o.getNumBits(),i,P.AZTEC,te.currentTimeMillis()),c=o.getByteSegments();c!=null&&u.putMetadata(Ie.BYTE_SEGMENTS,c);var l=o.getECLevel();return l!=null&&u.putMetadata(Ie.ERROR_CORRECTION_LEVEL,l),u},r.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var n=e.get(Q.NEED_RESULT_POINT_CALLBACK);n!=null&&t.forEach(function(a,i,o){n.foundPossibleResultPoint(a)})}},r.prototype.reset=function(){},r})(),Pu=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){Pu(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new cr,t)||this}return e})(It);var we=(function(){function r(){}return r.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var n=t&&t.get(Q.TRY_HARDER)===!0;if(n&&e.isRotateSupported()){var a=e.rotateCounterClockwise(),i=this.doDecode(a,t),o=i.getResultMetadata(),s=270;o!==null&&o.get(Ie.ORIENTATION)===!0&&(s=s+o.get(Ie.ORIENTATION)%360),i.putMetadata(Ie.ORIENTATION,s);var u=i.getResultPoints();if(u!==null)for(var c=a.getHeight(),l=0;l<u.length;l++)u[l]=new k(c-u[l].getY()-1,u[l].getX());return i}else throw new I}},r.prototype.reset=function(){},r.prototype.doDecode=function(e,t){var n=e.getWidth(),a=e.getHeight(),i=new be(n),o=t&&t.get(Q.TRY_HARDER)===!0,s=Math.max(1,a>>(o?8:5)),u;o?u=a:u=15;for(var c=Math.trunc(a/2),l=0;l<u;l++){var f=Math.trunc((l+1)/2),d=(l&1)===0,h=c+s*(d?f:-f);if(h<0||h>=a)break;try{i=e.getBlackRow(h,i)}catch{continue}for(var v=function(y){if(y===1&&(i.reverse(),t&&t.get(Q.NEED_RESULT_POINT_CALLBACK)===!0)){var _=new Map;t.forEach(function(S,O){return _.set(O,S)}),_.delete(Q.NEED_RESULT_POINT_CALLBACK),t=_}try{var b=x.decodeRow(h,i,t);if(y===1){b.putMetadata(Ie.ORIENTATION,180);var E=b.getResultPoints();E!==null&&(E[0]=new k(n-E[0].getX()-1,E[0].getY()),E[1]=new k(n-E[1].getX()-1,E[1].getY()))}return{value:b}}catch{}},x=this,g=0;g<2;g++){var w=v(g);if(typeof w=="object")return w.value}}throw new I},r.recordPattern=function(e,t,n){for(var a=n.length,i=0;i<a;i++)n[i]=0;var o=e.getSize();if(t>=o)throw new I;for(var s=!e.get(t),u=0,c=t;c<o;){if(e.get(c)!==s)n[u]++;else{if(++u===a)break;n[u]=1,s=!s}c++}if(!(u===a||u===a-1&&c===o))throw new I},r.recordPatternInReverse=function(e,t,n){for(var a=n.length,i=e.get(t);t>0&&a>=0;)e.get(--t)!==i&&(a--,i=!i);if(a>=0)throw new I;r.recordPattern(e,t+1,n)},r.patternMatchVariance=function(e,t,n){for(var a=e.length,i=0,o=0,s=0;s<a;s++)i+=e[s],o+=t[s];if(i<o)return Number.POSITIVE_INFINITY;var u=i/o;n*=u;for(var c=0,l=0;l<a;l++){var f=e[l],d=t[l]*u,h=f>d?f-d:d-f;if(h>n)return Number.POSITIVE_INFINITY;c+=h}return c/i},r})(),ku=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Wn=(function(r){ku(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var n=t.getSize(),a=t.getNextSet(0),i=0,o=Int32Array.from([0,0,0,0,0,0]),s=a,u=!1,c=6,l=a;l<n;l++)if(t.get(l)!==u)o[i]++;else{if(i===c-1){for(var f=e.MAX_AVG_VARIANCE,d=-1,h=e.CODE_START_A;h<=e.CODE_START_C;h++){var v=we.patternMatchVariance(o,e.CODE_PATTERNS[h],e.MAX_INDIVIDUAL_VARIANCE);v<f&&(f=v,d=h)}if(d>=0&&t.isRange(Math.max(0,s-(l-s)/2),s,!1))return Int32Array.from([s,l,d]);s+=o[0]+o[1],o=o.slice(2,o.length),o[i-1]=0,o[i]=0,i--}else i++;o[i]=1,u=!u}throw new I},e.decodeCode=function(t,n,a){we.recordPattern(t,a,n);for(var i=e.MAX_AVG_VARIANCE,o=-1,s=0;s<e.CODE_PATTERNS.length;s++){var u=e.CODE_PATTERNS[s],c=this.patternMatchVariance(n,u,e.MAX_INDIVIDUAL_VARIANCE);c<i&&(i=c,o=s)}if(o>=0)return o;throw new I},e.prototype.decodeRow=function(t,n,a){var i=a&&a.get(Q.ASSUME_GS1)===!0,o=e.findStartPattern(n),s=o[2],u=0,c=new Uint8Array(20);c[u++]=s;var l;switch(s){case e.CODE_START_A:l=e.CODE_CODE_A;break;case e.CODE_START_B:l=e.CODE_CODE_B;break;case e.CODE_START_C:l=e.CODE_CODE_C;break;default:throw new R}for(var f=!1,d=!1,h="",v=o[0],x=o[1],g=Int32Array.from([0,0,0,0,0,0]),w=0,y=0,_=s,b=0,E=!0,S=!1,O=!1;!f;){var N=d;switch(d=!1,w=y,y=e.decodeCode(n,g,x),c[u++]=y,y!==e.CODE_STOP&&(E=!0),y!==e.CODE_STOP&&(b++,_+=b*y),v=x,x+=g.reduce(function(oe,pe){return oe+pe},0),y){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new R}switch(l){case e.CODE_CODE_A:if(y<64)O===S?h+=String.fromCharCode(32+y):h+=String.fromCharCode(32+y+128),O=!1;else if(y<96)O===S?h+=String.fromCharCode(y-64):h+=String.fromCharCode(y+64),O=!1;else switch(y!==e.CODE_STOP&&(E=!1),y){case e.CODE_FNC_1:i&&(h.length===0?h+="]C1":h+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!S&&O?(S=!0,O=!1):S&&O?(S=!1,O=!1):O=!0;break;case e.CODE_SHIFT:d=!0,l=e.CODE_CODE_B;break;case e.CODE_CODE_B:l=e.CODE_CODE_B;break;case e.CODE_CODE_C:l=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_B:if(y<96)O===S?h+=String.fromCharCode(32+y):h+=String.fromCharCode(32+y+128),O=!1;else switch(y!==e.CODE_STOP&&(E=!1),y){case e.CODE_FNC_1:i&&(h.length===0?h+="]C1":h+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!S&&O?(S=!0,O=!1):S&&O?(S=!1,O=!1):O=!0;break;case e.CODE_SHIFT:d=!0,l=e.CODE_CODE_A;break;case e.CODE_CODE_A:l=e.CODE_CODE_A;break;case e.CODE_CODE_C:l=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_C:if(y<100)y<10&&(h+="0"),h+=y;else switch(y!==e.CODE_STOP&&(E=!1),y){case e.CODE_FNC_1:i&&(h.length===0?h+="]C1":h+="");break;case e.CODE_CODE_A:l=e.CODE_CODE_A;break;case e.CODE_CODE_B:l=e.CODE_CODE_B;break;case e.CODE_STOP:f=!0;break}break}N&&(l=l===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var T=x-v;if(x=n.getNextUnset(x),!n.isRange(x,Math.min(n.getSize(),x+(x-v)/2),!1))throw new I;if(_-=b*w,_%103!==w)throw new he;var D=h.length;if(D===0)throw new I;D>0&&E&&(l===e.CODE_CODE_C?h=h.substring(0,D-2):h=h.substring(0,D-1));for(var j=(o[1]+o[0])/2,L=v+T/2,q=c.length,B=new Uint8Array(q),H=0;H<q;H++)B[H]=c[H];var ae=[new k(j,t),new k(L,t)];return new Te(h,B,0,ae,P.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e})(we),Mu=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Nr=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xn=(function(r){Mu(e,r);function e(t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var a=r.call(this)||this;return a.usingCheckDigit=t,a.extendedMode=n,a.decodeRowResult="",a.counters=new Int32Array(9),a}return e.prototype.decodeRow=function(t,n,a){var i,o,s,u,c=this.counters;c.fill(0),this.decodeRowResult="";var l=e.findAsteriskPattern(n,c),f=n.getNextSet(l[1]),d=n.getSize(),h,v;do{e.recordPattern(n,f,c);var x=e.toNarrowWidePattern(c);if(x<0)throw new I;h=e.patternToChar(x),this.decodeRowResult+=h,v=f;try{for(var g=(i=void 0,Nr(c)),w=g.next();!w.done;w=g.next()){var y=w.value;f+=y}}catch(q){i={error:q}}finally{try{w&&!w.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}f=n.getNextSet(f)}while(h!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var _=0;try{for(var b=Nr(c),E=b.next();!E.done;E=b.next()){var y=E.value;_+=y}}catch(q){s={error:q}}finally{try{E&&!E.done&&(u=b.return)&&u.call(b)}finally{if(s)throw s.error}}var S=f-v-_;if(f!==d&&S*2<_)throw new I;if(this.usingCheckDigit){for(var O=this.decodeRowResult.length-1,N=0,T=0;T<O;T++)N+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(T));if(this.decodeRowResult.charAt(O)!==e.ALPHABET_STRING.charAt(N%43))throw new he;this.decodeRowResult=this.decodeRowResult.substring(0,O)}if(this.decodeRowResult.length===0)throw new I;var D;this.extendedMode?D=e.decodeExtended(this.decodeRowResult):D=this.decodeRowResult;var j=(l[1]+l[0])/2,L=v+_/2;return new Te(D,null,0,[new k(j,t),new k(L,t)],P.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,n){for(var a=t.getSize(),i=t.getNextSet(0),o=0,s=i,u=!1,c=n.length,l=i;l<a;l++)if(t.get(l)!==u)n[o]++;else{if(o===c-1){if(this.toNarrowWidePattern(n)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,s-Math.floor((l-s)/2)),s,!1))return[s,l];s+=n[0]+n[1],n.copyWithin(0,2,2+o-1),n[o-1]=0,n[o]=0,o--}else o++;n[o]=1,u=!u}throw new I},e.toNarrowWidePattern=function(t){var n,a,i=t.length,o=0,s;do{var u=2147483647;try{for(var c=(n=void 0,Nr(t)),l=c.next();!l.done;l=c.next()){var f=l.value;f<u&&f>o&&(u=f)}}catch(x){n={error:x}}finally{try{l&&!l.done&&(a=c.return)&&a.call(c)}finally{if(n)throw n.error}}o=u,s=0;for(var d=0,h=0,v=0;v<i;v++){var f=t[v];f>o&&(h|=1<<i-1-v,s++,d+=f)}if(s===3){for(var v=0;v<i&&s>0;v++){var f=t[v];if(f>o&&(s--,f*2>=d))return-1}return h}}while(s>3);return-1},e.patternToChar=function(t){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===t)return e.ALPHABET_STRING.charAt(n);if(t===e.ASTERISK_ENCODING)return"*";throw new I},e.decodeExtended=function(t){for(var n=t.length,a="",i=0;i<n;i++){var o=t.charAt(i);if(o==="+"||o==="$"||o==="%"||o==="/"){var s=t.charAt(i+1),u="\0";switch(o){case"+":if(s>="A"&&s<="Z")u=String.fromCharCode(s.charCodeAt(0)+32);else throw new R;break;case"$":if(s>="A"&&s<="Z")u=String.fromCharCode(s.charCodeAt(0)-64);else throw new R;break;case"%":if(s>="A"&&s<="E")u=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")u=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")u=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")u=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")u="\0";else if(s==="V")u="@";else if(s==="W")u="`";else if(s==="X"||s==="Y"||s==="Z")u="";else throw new R;break;case"/":if(s>="A"&&s<="O")u=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")u=":";else throw new R;break}a+=u,i++}else a+=o}return a},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e})(we),Bu=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Tr=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zn=(function(r){Bu(e,r);function e(){var t=r.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,n,a){var i,o,s,u,c=this.findAsteriskPattern(n),l=n.getNextSet(c[1]),f=n.getSize(),d=this.counters;d.fill(0),this.decodeRowResult="";var h,v;do{e.recordPattern(n,l,d);var x=this.toPattern(d);if(x<0)throw new I;h=this.patternToChar(x),this.decodeRowResult+=h,v=l;try{for(var g=(i=void 0,Tr(d)),w=g.next();!w.done;w=g.next()){var y=w.value;l+=y}}catch(T){i={error:T}}finally{try{w&&!w.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}l=n.getNextSet(l)}while(h!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var _=0;try{for(var b=Tr(d),E=b.next();!E.done;E=b.next()){var y=E.value;_+=y}}catch(T){s={error:T}}finally{try{E&&!E.done&&(u=b.return)&&u.call(b)}finally{if(s)throw s.error}}if(l===f||!n.get(l))throw new I;if(this.decodeRowResult.length<2)throw new I;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var S=this.decodeExtended(this.decodeRowResult),O=(c[1]+c[0])/2,N=v+_/2;return new Te(S,null,0,[new k(O,t),new k(N,t)],P.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var n=t.getSize(),a=t.getNextSet(0);this.counters.fill(0);for(var i=this.counters,o=a,s=!1,u=i.length,c=0,l=a;l<n;l++)if(t.get(l)!==s)i[c]++;else{if(c===u-1){if(this.toPattern(i)===e.ASTERISK_ENCODING)return new Int32Array([o,l]);o+=i[0]+i[1],i.copyWithin(0,2,2+c-1),i[c-1]=0,i[c]=0,c--}else c++;i[c]=1,s=!s}throw new I},e.prototype.toPattern=function(t){var n,a,i=0;try{for(var o=Tr(t),s=o.next();!s.done;s=o.next()){var u=s.value;i+=u}}catch(v){n={error:v}}finally{try{s&&!s.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}for(var c=0,l=t.length,f=0;f<l;f++){var d=Math.round(t[f]*9/i);if(d<1||d>4)return-1;if((f&1)===0)for(var h=0;h<d;h++)c=c<<1|1;else c<<=d}return c},e.prototype.patternToChar=function(t){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===t)return e.ALPHABET_STRING.charAt(n);throw new I},e.prototype.decodeExtended=function(t){for(var n=t.length,a="",i=0;i<n;i++){var o=t.charAt(i);if(o>="a"&&o<="d"){if(i>=n-1)throw new R;var s=t.charAt(i+1),u="\0";switch(o){case"d":if(s>="A"&&s<="Z")u=String.fromCharCode(s.charCodeAt(0)+32);else throw new R;break;case"a":if(s>="A"&&s<="Z")u=String.fromCharCode(s.charCodeAt(0)-64);else throw new R;break;case"b":if(s>="A"&&s<="E")u=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")u=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")u=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")u=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")u="\0";else if(s==="V")u="@";else if(s==="W")u="`";else if(s>="X"&&s<="Z")u="";else throw new R;break;case"c":if(s>="A"&&s<="O")u=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")u=":";else throw new R;break}a+=u,i++}else a+=o}return a},e.prototype.checkChecksums=function(t){var n=t.length;this.checkOneChecksum(t,n-2,20),this.checkOneChecksum(t,n-1,15)},e.prototype.checkOneChecksum=function(t,n,a){for(var i=1,o=0,s=n-1;s>=0;s--)o+=i*e.ALPHABET_STRING.indexOf(t.charAt(s)),++i>a&&(i=1);if(t.charAt(n)!==e.ALPHABET_STRING[o%47])throw new he},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e})(we),Lu=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Fu=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Yn=(function(r){Lu(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,n,a){var i,o,s=this.decodeStart(n),u=this.decodeEnd(n),c=new F;e.decodeMiddle(n,s[1],u[0],c);var l=c.toString(),f=null;a!=null&&(f=a.get(Q.ALLOWED_LENGTHS)),f==null&&(f=e.DEFAULT_ALLOWED_LENGTHS);var d=l.length,h=!1,v=0;try{for(var x=Fu(f),g=x.next();!g.done;g=x.next()){var w=g.value;if(d===w){h=!0;break}w>v&&(v=w)}}catch(b){i={error:b}}finally{try{g&&!g.done&&(o=x.return)&&o.call(x)}finally{if(i)throw i.error}}if(!h&&d>v&&(h=!0),!h)throw new R;var y=[new k(s[1],t),new k(u[0],t)],_=new Te(l,null,0,y,P.ITF,new Date().getTime());return _},e.decodeMiddle=function(t,n,a,i){var o=new Int32Array(10),s=new Int32Array(5),u=new Int32Array(5);for(o.fill(0),s.fill(0),u.fill(0);n<a;){we.recordPattern(t,n,o);for(var c=0;c<5;c++){var l=2*c;s[c]=o[l],u[c]=o[l+1]}var f=e.decodeDigit(s);i.append(f.toString()),f=this.decodeDigit(u),i.append(f.toString()),o.forEach(function(d){n+=d})}},e.prototype.decodeStart=function(t){var n=e.skipWhiteSpace(t),a=e.findGuardPattern(t,n,e.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(t,a[0]),a},e.prototype.validateQuietZone=function(t,n){var a=this.narrowLineWidth*10;a=a<n?a:n;for(var i=n-1;a>0&&i>=0&&!t.get(i);i--)a--;if(a!==0)throw new I},e.skipWhiteSpace=function(t){var n=t.getSize(),a=t.getNextSet(0);if(a===n)throw new I;return a},e.prototype.decodeEnd=function(t){t.reverse();try{var n=e.skipWhiteSpace(t),a=void 0;try{a=e.findGuardPattern(t,n,e.END_PATTERN_REVERSED[0])}catch(o){o instanceof I&&(a=e.findGuardPattern(t,n,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,a[0]);var i=a[0];return a[0]=t.getSize()-a[1],a[1]=t.getSize()-i,a}finally{t.reverse()}},e.findGuardPattern=function(t,n,a){var i=a.length,o=new Int32Array(i),s=t.getSize(),u=!1,c=0,l=n;o.fill(0);for(var f=n;f<s;f++)if(t.get(f)!==u)o[c]++;else{if(c===i-1){if(we.patternMatchVariance(o,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[l,f];l+=o[0]+o[1],te.arraycopy(o,2,o,0,c-1),o[c-1]=0,o[c]=0,c--}else c++;o[c]=1,u=!u}throw new I},e.decodeDigit=function(t){for(var n=e.MAX_AVG_VARIANCE,a=-1,i=e.PATTERNS.length,o=0;o<i;o++){var s=e.PATTERNS[o],u=we.patternMatchVariance(t,s,e.MAX_INDIVIDUAL_VARIANCE);u<n?(n=u,a=o):u===n&&(a=-1)}if(a>=0)return a%10;throw new I},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e})(we),ju=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Et=(function(r){ju(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var n=!1,a,i=0,o=Int32Array.from([0,0,0]);!n;){o=Int32Array.from([0,0,0]),a=e.findGuardPattern(t,i,!1,this.START_END_PATTERN,o);var s=a[0];i=a[1];var u=s-(i-s);u>=0&&(n=t.isRange(u,s,!1))}return a},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var n=t.length;if(n===0)return!1;var a=parseInt(t.charAt(n-1),10);return e.getStandardUPCEANChecksum(t.substring(0,n-1))===a},e.getStandardUPCEANChecksum=function(t){for(var n=t.length,a=0,i=n-1;i>=0;i-=2){var o=t.charAt(i).charCodeAt(0)-48;if(o<0||o>9)throw new R;a+=o}a*=3;for(var i=n-2;i>=0;i-=2){var o=t.charAt(i).charCodeAt(0)-48;if(o<0||o>9)throw new R;a+=o}return(1e3-a)%10},e.decodeEnd=function(t,n){return e.findGuardPattern(t,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,n,a,i){return this.findGuardPattern(t,n,a,i,new Int32Array(i.length))},e.findGuardPattern=function(t,n,a,i,o){var s=t.getSize();n=a?t.getNextUnset(n):t.getNextSet(n);for(var u=0,c=n,l=i.length,f=a,d=n;d<s;d++)if(t.get(d)!==f)o[u]++;else{if(u===l-1){if(we.patternMatchVariance(o,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([c,d]);c+=o[0]+o[1];for(var h=o.slice(2,o.length),v=0;v<u-1;v++)o[v]=h[v];o[u-1]=0,o[u]=0,u--}else u++;o[u]=1,f=!f}throw new I},e.decodeDigit=function(t,n,a,i){this.recordPattern(t,a,n);for(var o=this.MAX_AVG_VARIANCE,s=-1,u=i.length,c=0;c<u;c++){var l=i[c],f=we.patternMatchVariance(n,l,e.MAX_INDIVIDUAL_VARIANCE);f<o&&(o=f,s=c)}if(s>=0)return s;throw new I},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e})(we),Uu=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Vu=(function(){function r(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return r.prototype.decodeRow=function(e,t,n){var a=this.decodeRowStringBuffer,i=this.decodeMiddle(t,n,a),o=a.toString(),s=r.parseExtensionString(o),u=[new k((n[0]+n[1])/2,e),new k(i,e)],c=new Te(o,null,0,u,P.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&c.putAllMetadata(s),c},r.prototype.decodeMiddle=function(e,t,n){var a,i,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var s=e.getSize(),u=t[1],c=0,l=0;l<5&&u<s;l++){var f=Et.decodeDigit(e,o,u,Et.L_AND_G_PATTERNS);n+=String.fromCharCode(48+f%10);try{for(var d=(a=void 0,Uu(o)),h=d.next();!h.done;h=d.next()){var v=h.value;u+=v}}catch(g){a={error:g}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(a)throw a.error}}f>=10&&(c|=1<<4-l),l!==4&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(n.length!==5)throw new I;var x=this.determineCheckDigit(c);if(r.extensionChecksum(n.toString())!==x)throw new I;return u},r.extensionChecksum=function(e){for(var t=e.length,n=0,a=t-2;a>=0;a-=2)n+=e.charAt(a).charCodeAt(0)-48;n*=3;for(var a=t-1;a>=0;a-=2)n+=e.charAt(a).charCodeAt(0)-48;return n*=3,n%10},r.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new I},r.parseExtensionString=function(e){if(e.length!==5)return null;var t=r.parseExtension5String(e);return t==null?null:new Map([[Ie.SUGGESTED_PRICE,t]])},r.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="¬£";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var n=parseInt(e.substring(1)),a=(n/100).toString(),i=n%100,o=i<10?"0"+i:i.toString();return t+a+"."+o},r})(),Hu=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Gu=(function(){function r(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return r.prototype.decodeRow=function(e,t,n){var a=this.decodeRowStringBuffer,i=this.decodeMiddle(t,n,a),o=a.toString(),s=r.parseExtensionString(o),u=[new k((n[0]+n[1])/2,e),new k(i,e)],c=new Te(o,null,0,u,P.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&c.putAllMetadata(s),c},r.prototype.decodeMiddle=function(e,t,n){var a,i,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var s=e.getSize(),u=t[1],c=0,l=0;l<2&&u<s;l++){var f=Et.decodeDigit(e,o,u,Et.L_AND_G_PATTERNS);n+=String.fromCharCode(48+f%10);try{for(var d=(a=void 0,Hu(o)),h=d.next();!h.done;h=d.next()){var v=h.value;u+=v}}catch(x){a={error:x}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(a)throw a.error}}f>=10&&(c|=1<<1-l),l!==1&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(n.length!==2)throw new I;if(parseInt(n.toString())%4!==c)throw new I;return u},r.parseExtensionString=function(e){return e.length!==2?null:new Map([[Ie.ISSUE_NUMBER,parseInt(e)]])},r})(),$u=(function(){function r(){}return r.decodeRow=function(e,t,n){var a=Et.findGuardPattern(t,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var i=new Vu;return i.decodeRow(e,t,a)}catch{var o=new Gu;return o.decodeRow(e,t,a)}},r.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),r})(),Wu=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),ge=(function(r){Wu(e,r);function e(){var t=r.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(s){return Int32Array.from(s)});for(var n=10;n<20;n++){for(var a=e.L_PATTERNS[n-10],i=new Int32Array(a.length),o=0;o<a.length;o++)i[o]=a[a.length-o-1];e.L_AND_G_PATTERNS[n]=i}return t}return e.prototype.decodeRow=function(t,n,a){var i=e.findStartGuardPattern(n),o=a==null?null:a.get(Q.NEED_RESULT_POINT_CALLBACK);if(o!=null){var s=new k((i[0]+i[1])/2,t);o.foundPossibleResultPoint(s)}var u=this.decodeMiddle(n,i,this.decodeRowStringBuffer),c=u.rowOffset,l=u.resultString;if(o!=null){var f=new k(c,t);o.foundPossibleResultPoint(f)}var d=e.decodeEnd(n,c);if(o!=null){var h=new k((d[0]+d[1])/2,t);o.foundPossibleResultPoint(h)}var v=d[1],x=v+(v-d[0]);if(x>=n.getSize()||!n.isRange(v,x,!1))throw new I;var g=l.toString();if(g.length<8)throw new R;if(!e.checkChecksum(g))throw new he;var w=(i[1]+i[0])/2,y=(d[1]+d[0])/2,_=this.getBarcodeFormat(),b=[new k(w,t),new k(y,t)],E=new Te(g,null,0,b,_,new Date().getTime()),S=0;try{var O=$u.decodeRow(t,n,d[1]);E.putMetadata(Ie.UPC_EAN_EXTENSION,O.getText()),E.putAllMetadata(O.getResultMetadata()),E.addResultPoints(O.getResultPoints()),S=O.getText().length}catch{}var N=a==null?null:a.get(Q.ALLOWED_EAN_EXTENSIONS);if(N!=null){var T=!1;for(var D in N)if(S.toString()===D){T=!0;break}if(!T)throw new I}return _===P.EAN_13||P.UPC_A,E},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var n=t.length;if(n===0)return!1;var a=parseInt(t.charAt(n-1),10);return e.getStandardUPCEANChecksum(t.substring(0,n-1))===a},e.getStandardUPCEANChecksum=function(t){for(var n=t.length,a=0,i=n-1;i>=0;i-=2){var o=t.charAt(i).charCodeAt(0)-48;if(o<0||o>9)throw new R;a+=o}a*=3;for(var i=n-2;i>=0;i-=2){var o=t.charAt(i).charCodeAt(0)-48;if(o<0||o>9)throw new R;a+=o}return(1e3-a)%10},e.decodeEnd=function(t,n){return e.findGuardPattern(t,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e})(Et),Xu=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Zn=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tn=(function(r){Xu(e,r);function e(){var t=r.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,n,a){var i,o,s,u,c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;for(var l=t.getSize(),f=n[1],d=0,h=0;h<6&&f<l;h++){var v=ge.decodeDigit(t,c,f,ge.L_AND_G_PATTERNS);a+=String.fromCharCode(48+v%10);try{for(var x=(i=void 0,Zn(c)),g=x.next();!g.done;g=x.next()){var w=g.value;f+=w}}catch(E){i={error:E}}finally{try{g&&!g.done&&(o=x.return)&&o.call(x)}finally{if(i)throw i.error}}v>=10&&(d|=1<<5-h)}a=e.determineFirstDigit(a,d);var y=ge.findGuardPattern(t,f,!0,ge.MIDDLE_PATTERN,new Int32Array(ge.MIDDLE_PATTERN.length).fill(0));f=y[1];for(var h=0;h<6&&f<l;h++){var v=ge.decodeDigit(t,c,f,ge.L_PATTERNS);a+=String.fromCharCode(48+v);try{for(var _=(s=void 0,Zn(c)),b=_.next();!b.done;b=_.next()){var w=b.value;f+=w}}catch(O){s={error:O}}finally{try{b&&!b.done&&(u=_.return)&&u.call(_)}finally{if(s)throw s.error}}}return{rowOffset:f,resultString:a}},e.prototype.getBarcodeFormat=function(){return P.EAN_13},e.determineFirstDigit=function(t,n){for(var a=0;a<10;a++)if(n===this.FIRST_DIGIT_ENCODINGS[a])return t=String.fromCharCode(48+a)+t,t;throw new I},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e})(ge),zu=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Kn=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qn=(function(r){zu(e,r);function e(){var t=r.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,n,a){var i,o,s,u,c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;for(var l=t.getSize(),f=n[1],d=0;d<4&&f<l;d++){var h=ge.decodeDigit(t,c,f,ge.L_PATTERNS);a+=String.fromCharCode(48+h);try{for(var v=(i=void 0,Kn(c)),x=v.next();!x.done;x=v.next()){var g=x.value;f+=g}}catch(b){i={error:b}}finally{try{x&&!x.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}}var w=ge.findGuardPattern(t,f,!0,ge.MIDDLE_PATTERN,new Int32Array(ge.MIDDLE_PATTERN.length).fill(0));f=w[1];for(var d=0;d<4&&f<l;d++){var h=ge.decodeDigit(t,c,f,ge.L_PATTERNS);a+=String.fromCharCode(48+h);try{for(var y=(s=void 0,Kn(c)),_=y.next();!_.done;_=y.next()){var g=_.value;f+=g}}catch(S){s={error:S}}finally{try{_&&!_.done&&(u=y.return)&&u.call(y)}finally{if(s)throw s.error}}}return{rowOffset:f,resultString:a}},e.prototype.getBarcodeFormat=function(){return P.EAN_8},e})(ge),Yu=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Jn=(function(r){Yu(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.ean13Reader=new tn,t}return e.prototype.getBarcodeFormat=function(){return P.UPC_A},e.prototype.decode=function(t,n){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,n,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,n,a))},e.prototype.decodeMiddle=function(t,n,a){return this.ean13Reader.decodeMiddle(t,n,a)},e.prototype.maybeReturnResult=function(t){var n=t.getText();if(n.charAt(0)==="0"){var a=new Te(n.substring(1),null,null,t.getResultPoints(),P.UPC_A);return t.getResultMetadata()!=null&&a.putAllMetadata(t.getResultMetadata()),a}else throw new I},e.prototype.reset=function(){this.ean13Reader.reset()},e})(ge),Zu=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Ku=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Qn=(function(r){Zu(e,r);function e(){var t=r.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,n,a){var i,o,s=this.decodeMiddleCounters.map(function(g){return g});s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var u=t.getSize(),c=n[1],l=0,f=0;f<6&&c<u;f++){var d=e.decodeDigit(t,s,c,e.L_AND_G_PATTERNS);a+=String.fromCharCode(48+d%10);try{for(var h=(i=void 0,Ku(s)),v=h.next();!v.done;v=h.next()){var x=v.value;c+=x}}catch(g){i={error:g}}finally{try{v&&!v.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}d>=10&&(l|=1<<5-f)}return e.determineNumSysAndCheckDigit(new F(a),l),c},e.prototype.decodeEnd=function(t,n){return e.findGuardPatternWithoutCounters(t,n,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return ge.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,n){for(var a=0;a<=1;a++)for(var i=0;i<10;i++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][i]){t.insert(0,"0"+a),t.append("0"+i);return}throw I.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return P.UPC_E},e.convertUPCEtoUPCA=function(t){var n=t.slice(1,7).split("").map(function(o){return o.charCodeAt(0)}),a=new F;a.append(t.charAt(0));var i=n[5];switch(i){case 0:case 1:case 2:a.appendChars(n,0,2),a.append(i),a.append("0000"),a.appendChars(n,2,3);break;case 3:a.appendChars(n,0,3),a.append("00000"),a.appendChars(n,3,2);break;case 4:a.appendChars(n,0,4),a.append("00000"),a.append(n[4]);break;default:a.appendChars(n,0,5),a.append("0000"),a.append(i);break}return t.length>=8&&a.append(t.charAt(7)),a.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e})(ge),qu=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),ea=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Rr=(function(r){qu(e,r);function e(t){var n=r.call(this)||this,a=t==null?null:t.get(Q.POSSIBLE_FORMATS),i=[];return a!=null&&(a.indexOf(P.EAN_13)>-1&&i.push(new tn),a.indexOf(P.UPC_A)>-1&&i.push(new Jn),a.indexOf(P.EAN_8)>-1&&i.push(new qn),a.indexOf(P.UPC_E)>-1&&i.push(new Qn)),i.length===0&&(i.push(new tn),i.push(new Jn),i.push(new qn),i.push(new Qn)),n.readers=i,n}return e.prototype.decodeRow=function(t,n,a){var i,o;try{for(var s=ea(this.readers),u=s.next();!u.done;u=s.next()){var c=u.value;try{var l=c.decodeRow(t,n,a),f=l.getBarcodeFormat()===P.EAN_13&&l.getText().charAt(0)==="0",d=a==null?null:a.get(Q.POSSIBLE_FORMATS),h=d==null||d.includes(P.UPC_A);if(f&&h){var v=l.getRawBytes(),x=new Te(l.getText().substring(1),v,v?v.length:null,l.getResultPoints(),P.UPC_A);return x.putAllMetadata(l.getResultMetadata()),x}return l}catch{}}}catch(g){i={error:g}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}throw new I},e.prototype.reset=function(){var t,n;try{for(var a=ea(this.readers),i=a.next();!i.done;i=a.next()){var o=i.value;o.reset()}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}},e})(we),Ju=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Qu=(function(r){Ju(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,n,a){var i=this.getValidRowData(n);if(!i)throw new I;var o=this.codaBarDecodeRow(i.row);if(!o)throw new I;return new Te(o,null,0,[new k(i.left,t),new k(i.right,t)],P.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var n=t.toArray(),a=n.indexOf(!0);if(a===-1)return null;var i=n.lastIndexOf(!0);if(i<=a)return null;n=n.slice(a,i+1);for(var o=[],s=n[0],u=1,c=1;c<n.length;c++)n[c]===s?u++:(s=n[c],o.push(u),u=1);return o.push(u),o.length<23&&(o.length+1)%8!==0?null:{row:o,left:a,right:i}},e.prototype.codaBarDecodeRow=function(t){for(var n=[],a=Math.ceil(t.reduce(function(u,c){return(u+c)/2},0));t.length>0;){var i=t.splice(0,8).splice(0,7),o=i.map(function(u){return u<a?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[o]===void 0)return null;n.push(this.CODA_BAR_CHAR_SET[o])}var s=n.join("");return this.validCodaBarString(s)?s:null},e.prototype.validCodaBarString=function(t){var n=/^[A-D].{1,}[A-D]$/;return n.test(t)},e})(we),ec=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),tc=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dt=(function(r){ec(e,r);function e(){var t=r.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,n){for(var a=0;a<n.length;a++)if(we.patternMatchVariance(t,n[a],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return a;throw new I},e.count=function(t){return W.sum(new Int32Array(t))},e.increment=function(t,n){for(var a=0,i=n[0],o=1;o<t.length;o++)n[o]>i&&(i=n[o],a=o);t[a]++},e.decrement=function(t,n){for(var a=0,i=n[0],o=1;o<t.length;o++)n[o]<i&&(i=n[o],a=o);t[a]--},e.isFinderPattern=function(t){var n,a,i=t[0]+t[1],o=i+t[2]+t[3],s=i/o;if(s>=e.MIN_FINDER_PATTERN_RATIO&&s<=e.MAX_FINDER_PATTERN_RATIO){var u=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER;try{for(var l=tc(t),f=l.next();!f.done;f=l.next()){var d=f.value;d>c&&(c=d),d<u&&(u=d)}}catch(h){n={error:h}}finally{try{f&&!f.done&&(a=l.return)&&a.call(l)}finally{if(n)throw n.error}}return c<10*u}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e})(we),lr=(function(){function r(e,t){this.value=e,this.checksumPortion=t}return r.prototype.getValue=function(){return this.value},r.prototype.getChecksumPortion=function(){return this.checksumPortion},r.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},r.prototype.hashCode=function(){return this.value^this.checksumPortion},r})(),mi=(function(){function r(e,t,n,a,i){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new k(n,i)),this.resultPoints.push(new k(a,i))}return r.prototype.getValue=function(){return this.value},r.prototype.getStartEnd=function(){return this.startEnd},r.prototype.getResultPoints=function(){return this.resultPoints},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value},r.prototype.hashCode=function(){return this.value},r})(),rc=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yt=(function(){function r(){}return r.getRSSvalue=function(e,t,n){var a,i,o=0;try{for(var s=rc(e),u=s.next();!u.done;u=s.next()){var c=u.value;o+=c}}catch(y){a={error:y}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(a)throw a.error}}for(var l=0,f=0,d=e.length,h=0;h<d-1;h++){var v=void 0;for(v=1,f|=1<<h;v<e[h];v++,f&=~(1<<h)){var x=r.combins(o-v-1,d-h-2);if(n&&f===0&&o-v-(d-h-1)>=d-h-1&&(x-=r.combins(o-v-(d-h),d-h-2)),d-h-1>1){for(var g=0,w=o-v-(d-h-2);w>t;w--)g+=r.combins(o-v-w-1,d-h-3);x-=g*(d-1-h)}else o-v>t&&x--;l+=x}o-=v}return l},r.combins=function(e,t){var n,a;e-t>t?(a=t,n=e-t):(a=e-t,n=t);for(var i=1,o=1,s=e;s>n;s--)i*=s,o<=a&&(i/=o,o++);for(;o<=a;)i/=o,o++;return i},r})(),nc=(function(){function r(){}return r.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var n=12*t,a=new be(n),i=0,o=e[0],s=o.getRightChar().getValue(),u=11;u>=0;--u)(s&1<<u)!==0&&a.set(i),i++;for(var u=1;u<e.length;++u){for(var c=e[u],l=c.getLeftChar().getValue(),f=11;f>=0;--f)(l&1<<f)!==0&&a.set(i),i++;if(c.getRightChar()!==null)for(var d=c.getRightChar().getValue(),f=11;f>=0;--f)(d&1<<f)!==0&&a.set(i),i++}return a},r})(),lt=(function(){function r(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return r.prototype.getDecodedInformation=function(){return this.decodedInformation},r.prototype.isFinished=function(){return this.finished},r})(),yn=(function(){function r(e){this.newPosition=e}return r.prototype.getNewPosition=function(){return this.newPosition},r})(),ac=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),ze=(function(r){ac(e,r);function e(t,n){var a=r.call(this,t)||this;return a.value=n,a}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e})(yn),ic=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),ft=(function(r){ic(e,r);function e(t,n,a){var i=r.call(this,t)||this;return a?(i.remaining=!0,i.remainingValue=i.remainingValue):(i.remaining=!1,i.remainingValue=0),i.newString=n,i}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e})(yn),oc=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),mt=(function(r){oc(e,r);function e(t,n,a){var i=r.call(this,t)||this;if(n<0||n>10||a<0||a>10)throw new R;return i.firstDigit=n,i.secondDigit=a,i}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e})(yn),Jt=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sc=(function(){function r(){}return r.parseFieldsInGeneralPurpose=function(e){var t,n,a,i,o,s,u,c;if(!e)return null;if(e.length<2)throw new I;var l=e.substring(0,2);try{for(var f=Jt(r.TWO_DIGIT_DATA_LENGTH),d=f.next();!d.done;d=f.next()){var h=d.value;if(h[0]===l)return h[1]===r.VARIABLE_LENGTH?r.processVariableAI(2,h[2],e):r.processFixedAI(2,h[1],e)}}catch(S){t={error:S}}finally{try{d&&!d.done&&(n=f.return)&&n.call(f)}finally{if(t)throw t.error}}if(e.length<3)throw new I;var v=e.substring(0,3);try{for(var x=Jt(r.THREE_DIGIT_DATA_LENGTH),g=x.next();!g.done;g=x.next()){var h=g.value;if(h[0]===v)return h[1]===r.VARIABLE_LENGTH?r.processVariableAI(3,h[2],e):r.processFixedAI(3,h[1],e)}}catch(S){a={error:S}}finally{try{g&&!g.done&&(i=x.return)&&i.call(x)}finally{if(a)throw a.error}}try{for(var w=Jt(r.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),y=w.next();!y.done;y=w.next()){var h=y.value;if(h[0]===v)return h[1]===r.VARIABLE_LENGTH?r.processVariableAI(4,h[2],e):r.processFixedAI(4,h[1],e)}}catch(S){o={error:S}}finally{try{y&&!y.done&&(s=w.return)&&s.call(w)}finally{if(o)throw o.error}}if(e.length<4)throw new I;var _=e.substring(0,4);try{for(var b=Jt(r.FOUR_DIGIT_DATA_LENGTH),E=b.next();!E.done;E=b.next()){var h=E.value;if(h[0]===_)return h[1]===r.VARIABLE_LENGTH?r.processVariableAI(4,h[2],e):r.processFixedAI(4,h[1],e)}}catch(S){u={error:S}}finally{try{E&&!E.done&&(c=b.return)&&c.call(b)}finally{if(u)throw u.error}}throw new I},r.processFixedAI=function(e,t,n){if(n.length<e)throw new I;var a=n.substring(0,e);if(n.length<e+t)throw new I;var i=n.substring(e,e+t),o=n.substring(e+t),s="("+a+")"+i,u=r.parseFieldsInGeneralPurpose(o);return u==null?s:s+u},r.processVariableAI=function(e,t,n){var a=n.substring(0,e),i;n.length<e+t?i=n.length:i=e+t;var o=n.substring(e,i),s=n.substring(i),u="("+a+")"+o,c=r.parseFieldsInGeneralPurpose(s);return c==null?u:u+c},r.VARIABLE_LENGTH=[],r.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",r.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",r.VARIABLE_LENGTH,20],["22",r.VARIABLE_LENGTH,29],["30",r.VARIABLE_LENGTH,8],["37",r.VARIABLE_LENGTH,8],["90",r.VARIABLE_LENGTH,30],["91",r.VARIABLE_LENGTH,30],["92",r.VARIABLE_LENGTH,30],["93",r.VARIABLE_LENGTH,30],["94",r.VARIABLE_LENGTH,30],["95",r.VARIABLE_LENGTH,30],["96",r.VARIABLE_LENGTH,30],["97",r.VARIABLE_LENGTH,3],["98",r.VARIABLE_LENGTH,30],["99",r.VARIABLE_LENGTH,30]],r.THREE_DIGIT_DATA_LENGTH=[["240",r.VARIABLE_LENGTH,30],["241",r.VARIABLE_LENGTH,30],["242",r.VARIABLE_LENGTH,6],["250",r.VARIABLE_LENGTH,30],["251",r.VARIABLE_LENGTH,30],["253",r.VARIABLE_LENGTH,17],["254",r.VARIABLE_LENGTH,20],["400",r.VARIABLE_LENGTH,30],["401",r.VARIABLE_LENGTH,30],["402",17],["403",r.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",r.VARIABLE_LENGTH,20],["421",r.VARIABLE_LENGTH,15],["422",3],["423",r.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],r.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",r.VARIABLE_LENGTH,15],["391",r.VARIABLE_LENGTH,18],["392",r.VARIABLE_LENGTH,15],["393",r.VARIABLE_LENGTH,18],["703",r.VARIABLE_LENGTH,30]],r.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",r.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",r.VARIABLE_LENGTH,20],["8003",r.VARIABLE_LENGTH,30],["8004",r.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",r.VARIABLE_LENGTH,30],["8008",r.VARIABLE_LENGTH,12],["8018",18],["8020",r.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",r.VARIABLE_LENGTH,70],["8200",r.VARIABLE_LENGTH,70]],r})(),or=(function(){function r(e){this.buffer=new F,this.information=e}return r.prototype.decodeAllCodes=function(e,t){var n=t,a=null;do{var i=this.decodeGeneralPurposeField(n,a),o=sc.parseFieldsInGeneralPurpose(i.getNewString());if(o!=null&&e.append(o),i.isRemaining()?a=""+i.getRemainingValue():a=null,n===i.getNewPosition())break;n=i.getNewPosition()}while(!0);return e.toString()},r.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},r.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new mt(this.information.getSize(),mt.FNC1,mt.FNC1):new mt(this.information.getSize(),t-1,mt.FNC1)}var n=this.extractNumericValueFromBitArray(e,7),a=(n-8)/11,i=(n-8)%11;return new mt(e+7,a,i)},r.prototype.extractNumericValueFromBitArray=function(e,t){return r.extractNumericValueFromBitArray(this.information,e,t)},r.extractNumericValueFromBitArray=function(e,t,n){for(var a=0,i=0;i<n;++i)e.get(t+i)&&(a|=1<<n-i-1);return a},r.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var n=this.parseBlocks();return n!=null&&n.isRemaining()?new ft(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new ft(this.current.getPosition(),this.buffer.toString())},r.prototype.parseBlocks=function(){var e,t;do{var n=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var a=n!==this.current.getPosition();if(!a&&!e)break}while(!e);return t.getDecodedInformation()},r.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new ft(this.current.getPosition(),this.buffer.toString()):t=new ft(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new lt(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new ft(this.current.getPosition(),this.buffer.toString());return new lt(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new lt(!1)},r.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new ft(this.current.getPosition(),this.buffer.toString());return new lt(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new lt(!1)},r.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new ft(this.current.getPosition(),this.buffer.toString());return new lt(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new lt(!1)},r.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var a=this.extractNumericValueFromBitArray(e,8);return a>=232&&a<253},r.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new ze(e+5,ze.FNC1);if(t>=5&&t<15)return new ze(e+5,"0"+(t-5));var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new ze(e+7,""+(n+1));if(n>=90&&n<116)return new ze(e+7,""+(n+7));var a=this.extractNumericValueFromBitArray(e,8),i;switch(a){case 232:i="!";break;case 233:i='"';break;case 234:i="%";break;case 235:i="&";break;case 236:i="'";break;case 237:i="(";break;case 238:i=")";break;case 239:i="*";break;case 240:i="+";break;case 241:i=",";break;case 242:i="-";break;case 243:i=".";break;case 244:i="/";break;case 245:i=":";break;case 246:i=";";break;case 247:i="<";break;case 248:i="=";break;case 249:i=">";break;case 250:i="?";break;case 251:i="_";break;case 252:i=" ";break;default:throw new R}return new ze(e+8,i)},r.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},r.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new ze(e+5,ze.FNC1);if(t>=5&&t<15)return new ze(e+5,"0"+(t-5));var n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new ze(e+6,""+(n+33));var a;switch(n){case 58:a="*";break;case 59:a=",";break;case 60:a="-";break;case 61:a=".";break;case 62:a="/";break;default:throw new Xt("Decoding invalid alphanumeric value: "+n)}return new ze(e+6,a)},r.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},r.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},r.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},r})(),yi=(function(){function r(e){this.information=e,this.generalDecoder=new or(e)}return r.prototype.getInformation=function(){return this.information},r.prototype.getGeneralDecoder=function(){return this.generalDecoder},r})(),uc=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Ye=(function(r){uc(e,r);function e(t){return r.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,n){t.append("(01)");var a=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,n,a)},e.prototype.encodeCompressedGtinWithoutAI=function(t,n,a){for(var i=0;i<4;++i){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*i,10);o/100===0&&t.append("0"),o/10===0&&t.append("0"),t.append(o)}e.appendCheckDigit(t,a)},e.appendCheckDigit=function(t,n){for(var a=0,i=0;i<13;i++){var o=t.charAt(i+n).charCodeAt(0)-48;a+=(i&1)===0?3*o:o}a=10-a%10,a===10&&(a=0),t.append(a)},e.GTIN_SIZE=40,e})(yi),cc=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),lc=(function(r){cc(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new F;t.append("(01)");var n=t.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(a),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e})(Ye),fc=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),dc=(function(r){fc(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new F;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e})(yi),hc=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),sr=(function(r){hc(e,r);function e(t){return r.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,n,a){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,a);this.addWeightCode(t,i);for(var o=this.checkWeight(i),s=1e5,u=0;u<5;++u)o/s===0&&t.append("0"),s/=10;t.append(o)},e})(Ye),pc=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),wi=(function(r){pc(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+sr.GTIN_SIZE+e.WEIGHT_SIZE)throw new I;var t=new F;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+sr.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e})(sr),vc=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),xc=(function(r){vc(e,r);function e(t){return r.call(this,t)||this}return e.prototype.addWeightCode=function(t,n){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e})(wi),gc=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),mc=(function(r){gc(e,r);function e(t){return r.call(this,t)||this}return e.prototype.addWeightCode=function(t,n){n<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e})(wi),yc=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),wc=(function(r){yc(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Ye.GTIN_SIZE)throw new I;var t=new F;this.encodeCompressedGtin(t,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Ye.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(n),t.append(")");var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Ye.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(a.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e})(Ye),_c=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Ac=(function(r){_c(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Ye.GTIN_SIZE)throw new I;var t=new F;this.encodeCompressedGtin(t,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Ye.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(n),t.append(")");var a=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Ye.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);a/100===0&&t.append("0"),a/10===0&&t.append("0"),t.append(a);var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Ye.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e})(Ye),bc=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),at=(function(r){bc(e,r);function e(t,n,a){var i=r.call(this,t)||this;return i.dateCode=a,i.firstAIdigits=n,i}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new I;var t=new F;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,n){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(n,e.DATE_SIZE);if(a!==38400){t.append("("),t.append(this.dateCode),t.append(")");var i=a%32;a/=32;var o=a%12+1;a/=12;var s=a;s/10===0&&t.append("0"),t.append(s),o/10===0&&t.append("0"),t.append(o),i/10===0&&t.append("0"),t.append(i)}},e.prototype.addWeightCode=function(t,n){t.append("("),t.append(this.firstAIdigits),t.append(n/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e})(sr);function Ec(r){try{if(r.get(1))return new lc(r);if(!r.get(2))return new dc(r);var e=or.extractNumericValueFromBitArray(r,1,4);switch(e){case 4:return new xc(r);case 5:return new mc(r)}var t=or.extractNumericValueFromBitArray(r,1,5);switch(t){case 12:return new wc(r);case 13:return new Ac(r)}var n=or.extractNumericValueFromBitArray(r,1,7);switch(n){case 56:return new at(r,"310","11");case 57:return new at(r,"320","11");case 58:return new at(r,"310","13");case 59:return new at(r,"320","13");case 60:return new at(r,"310","15");case 61:return new at(r,"320","15");case 62:return new at(r,"310","17");case 63:return new at(r,"320","17")}}catch(a){throw console.log(a),new Xt("unknown decoder: "+r)}}var ta=(function(){function r(e,t,n,a){this.leftchar=e,this.rightchar=t,this.finderpattern=n,this.maybeLast=a}return r.prototype.mayBeLast=function(){return this.maybeLast},r.prototype.getLeftChar=function(){return this.leftchar},r.prototype.getRightChar=function(){return this.rightchar},r.prototype.getFinderPattern=function(){return this.finderpattern},r.prototype.mustBeLast=function(){return this.rightchar==null},r.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},r.equals=function(e,t){return e instanceof r?r.equalsOrNull(e.leftchar,t.leftchar)&&r.equalsOrNull(e.rightchar,t.rightchar)&&r.equalsOrNull(e.finderpattern,t.finderpattern):!1},r.equalsOrNull=function(e,t){return e===null?t===null:r.equals(e,t)},r.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},r})(),Cc=(function(){function r(e,t,n){this.pairs=e,this.rowNumber=t,this.wasReversed=n}return r.prototype.getPairs=function(){return this.pairs},r.prototype.getRowNumber=function(){return this.rowNumber},r.prototype.isReversed=function(){return this.wasReversed},r.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},r.prototype.toString=function(){return"{ "+this.pairs+" }"},r.prototype.equals=function(e,t){return e instanceof r?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},r.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var n;return e.forEach(function(a,i){t.forEach(function(o){a.getLeftChar().getValue()===o.getLeftChar().getValue()&&a.getRightChar().getValue()===o.getRightChar().getValue()&&a.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(n=!0)})}),n}},r})(),Sc=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),it=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ic=(function(r){Sc(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,n,a){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,n))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,n))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,n){for(var a=!1;!a;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,t))}catch(s){if(s instanceof I){if(!this.pairs.length)throw new I;a=!0}}if(this.checkChecksum())return this.pairs;var i;if(this.rows.length?i=!0:i=!1,this.storeRow(t,!1),i){var o=this.checkRowsBoolean(!1);if(o!=null||(o=this.checkRowsBoolean(!0),o!=null))return o}throw new I},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var n=null;try{n=this.checkRows(new Array,0)}catch(a){console.log(a)}return t&&(this.rows=this.rows.reverse()),n},e.prototype.checkRows=function(t,n){for(var a,i,o=n;o<this.rows.length;o++){var s=this.rows[o];this.pairs.length=0;try{for(var u=(a=void 0,it(t)),c=u.next();!c.done;c=u.next()){var l=c.value;this.pairs.push(l.getPairs())}}catch(d){a={error:d}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(a)throw a.error}}if(this.pairs.push(s.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var f=new Array(t);f.push(s);try{return this.checkRows(f,o+1)}catch(d){console.log(d)}}}throw new I},e.isValidSequence=function(t){var n,a;try{for(var i=it(e.FINDER_PATTERN_SEQUENCES),o=i.next();!o.done;o=i.next()){var s=o.value;if(!(t.length>s.length)){for(var u=!0,c=0;c<t.length;c++)if(t[c].getFinderPattern().getValue()!==s[c]){u=!1;break}if(u)return!0}}}catch(l){n={error:l}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}return!1},e.prototype.storeRow=function(t,n){for(var a=0,i=!1,o=!1;a<this.rows.length;){var s=this.rows[a];if(s.getRowNumber()>t){o=s.isEquivalent(this.pairs);break}i=s.isEquivalent(this.pairs),a++}o||i||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new Cc(this.pairs,t,n)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,n){var a,i,o,s,u,c;try{for(var l=it(n),f=l.next();!f.done;f=l.next()){var d=f.value;if(d.getPairs().length!==t.length){var h=!0;try{for(var v=(o=void 0,it(d.getPairs())),x=v.next();!x.done;x=v.next()){var g=x.value,w=!1;try{for(var y=(u=void 0,it(t)),_=y.next();!_.done;_=y.next()){var b=_.value;if(ta.equals(g,b)){w=!0;break}}}catch(E){u={error:E}}finally{try{_&&!_.done&&(c=y.return)&&c.call(y)}finally{if(u)throw u.error}}w||(h=!1)}}catch(E){o={error:E}}finally{try{x&&!x.done&&(s=v.return)&&s.call(v)}finally{if(o)throw o.error}}}}}catch(E){a={error:E}}finally{try{f&&!f.done&&(i=l.return)&&i.call(l)}finally{if(a)throw a.error}}},e.isPartialRow=function(t,n){var a,i,o,s,u,c;try{for(var l=it(n),f=l.next();!f.done;f=l.next()){var d=f.value,h=!0;try{for(var v=(o=void 0,it(t)),x=v.next();!x.done;x=v.next()){var g=x.value,w=!1;try{for(var y=(u=void 0,it(d.getPairs())),_=y.next();!_.done;_=y.next()){var b=_.value;if(g.equals(b)){w=!0;break}}}catch(E){u={error:E}}finally{try{_&&!_.done&&(c=y.return)&&c.call(y)}finally{if(u)throw u.error}}if(!w){h=!1;break}}}catch(E){o={error:E}}finally{try{x&&!x.done&&(s=v.return)&&s.call(v)}finally{if(o)throw o.error}}if(h)return!0}}catch(E){a={error:E}}finally{try{f&&!f.done&&(i=l.return)&&i.call(l)}finally{if(a)throw a.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var n=nc.buildBitArray(t),a=Ec(n),i=a.parseInformation(),o=t[0].getFinderPattern().getResultPoints(),s=t[t.length-1].getFinderPattern().getResultPoints(),u=[o[0],o[1],s[0],s[1]];return new Te(i,null,null,u,P.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),n=t.getLeftChar(),a=t.getRightChar();if(a===null)return!1;for(var i=a.getChecksumPortion(),o=2,s=1;s<this.pairs.size();++s){var u=this.pairs.get(s);i+=u.getLeftChar().getChecksumPortion(),o++;var c=u.getRightChar();c!=null&&(i+=c.getChecksumPortion(),o++)}i%=211;var l=211*(o-4)+i;return l===n.getValue()},e.getNextSecondBar=function(t,n){var a;return t.get(n)?(a=t.getNextUnset(n),a=t.getNextSet(a)):(a=t.getNextSet(n),a=t.getNextUnset(a)),a},e.prototype.retrieveNextPair=function(t,n,a){var i=n.length%2===0;this.startFromEven&&(i=!i);var o,s=!0,u=-1;do this.findNextPair(t,n,u),o=this.parseFoundFinderPattern(t,a,i),o===null?u=e.getNextSecondBar(t,this.startEnd[0]):s=!1;while(s);var c=this.decodeDataCharacter(t,o,i,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new I;var l;try{l=this.decodeDataCharacter(t,o,i,!1)}catch(f){l=null,console.log(f)}return new ta(c,l,o,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,n,a){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;var o=t.getSize(),s;if(a>=0)s=a;else if(this.isEmptyPair(n))s=0;else{var u=n[n.length-1];s=u.getFinderPattern().getStartEnd()[1]}var c=n.length%2!==0;this.startFromEven&&(c=!c);for(var l=!1;s<o&&(l=!t.get(s),!!l);)s++;for(var f=0,d=s,h=s;h<o;h++)if(t.get(h)!==l)i[f]++;else{if(f===3){if(c&&e.reverseCounters(i),e.isFinderPattern(i)){this.startEnd[0]=d,this.startEnd[1]=h;return}c&&e.reverseCounters(i),d+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,f--}else f++;i[f]=1,l=!l}throw new I},e.reverseCounters=function(t){for(var n=t.length,a=0;a<n/2;++a){var i=t[a];t[a]=t[n-a-1],t[n-a-1]=i}},e.prototype.parseFoundFinderPattern=function(t,n,a){var i,o,s;if(a){for(var u=this.startEnd[0]-1;u>=0&&!t.get(u);)u--;u++,i=this.startEnd[0]-u,o=u,s=this.startEnd[1]}else o=this.startEnd[0],s=t.getNextUnset(this.startEnd[1]+1),i=s-this.startEnd[1];var c=this.getDecodeFinderCounters();te.arraycopy(c,0,c,1,c.length-1),c[0]=i;var l;try{l=this.parseFinderValue(c,e.FINDER_PATTERNS)}catch{return null}return new mi(l,[o,s],o,s,n)},e.prototype.decodeDataCharacter=function(t,n,a,i){for(var o=this.getDataCharacterCounters(),s=0;s<o.length;s++)o[s]=0;if(i)e.recordPatternInReverse(t,n.getStartEnd()[0],o);else{e.recordPattern(t,n.getStartEnd()[1],o);for(var u=0,c=o.length-1;u<c;u++,c--){var l=o[u];o[u]=o[c],o[c]=l}}var f=17,d=W.sum(new Int32Array(o))/f,h=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(d-h)/h>.3)throw new I;for(var v=this.getOddCounts(),x=this.getEvenCounts(),g=this.getOddRoundingErrors(),w=this.getEvenRoundingErrors(),u=0;u<o.length;u++){var y=1*o[u]/d,_=y+.5;if(_<1){if(y<.3)throw new I;_=1}else if(_>8){if(y>8.7)throw new I;_=8}var b=u/2;(u&1)===0?(v[b]=_,g[b]=y-_):(x[b]=_,w[b]=y-_)}this.adjustOddEvenCounts(f);for(var E=4*n.getValue()+(a?0:2)+(i?0:1)-1,S=0,O=0,u=v.length-1;u>=0;u--){if(e.isNotA1left(n,a,i)){var N=e.WEIGHTS[E][2*u];O+=v[u]*N}S+=v[u]}for(var T=0,u=x.length-1;u>=0;u--)if(e.isNotA1left(n,a,i)){var N=e.WEIGHTS[E][2*u+1];T+=x[u]*N}var D=O+T;if((S&1)!==0||S>13||S<4)throw new I;var j=(13-S)/2,L=e.SYMBOL_WIDEST[j],q=9-L,B=yt.getRSSvalue(v,L,!0),H=yt.getRSSvalue(x,q,!1),ae=e.EVEN_TOTAL_SUBSET[j],oe=e.GSUM[j],pe=B*ae+H+oe;return new lr(pe,D)},e.isNotA1left=function(t,n,a){return!(t.getValue()===0&&n&&a)},e.prototype.adjustOddEvenCounts=function(t){var n=W.sum(new Int32Array(this.getOddCounts())),a=W.sum(new Int32Array(this.getEvenCounts())),i=!1,o=!1;n>13?o=!0:n<4&&(i=!0);var s=!1,u=!1;a>13?u=!0:a<4&&(s=!0);var c=n+a-t,l=(n&1)===1,f=(a&1)===0;if(c===1)if(l){if(f)throw new I;o=!0}else{if(!f)throw new I;u=!0}else if(c===-1)if(l){if(f)throw new I;i=!0}else{if(!f)throw new I;s=!0}else if(c===0){if(l){if(!f)throw new I;n<a?(i=!0,u=!0):(o=!0,s=!0)}else if(f)throw new I}else throw new I;if(i){if(o)throw new I;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(u)throw new I;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e})(dt),Oc=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Nc=(function(r){Oc(e,r);function e(t,n,a){var i=r.call(this,t,n)||this;return i.count=0,i.finderPattern=a,i}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e})(lr),Tc=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Dr=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ra=(function(r){Tc(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,n,a){var i,o,s,u,c=this.decodePair(n,!1,t,a);e.addOrTally(this.possibleLeftPairs,c),n.reverse();var l=this.decodePair(n,!0,t,a);e.addOrTally(this.possibleRightPairs,l),n.reverse();try{for(var f=Dr(this.possibleLeftPairs),d=f.next();!d.done;d=f.next()){var h=d.value;if(h.getCount()>1)try{for(var v=(s=void 0,Dr(this.possibleRightPairs)),x=v.next();!x.done;x=v.next()){var g=x.value;if(g.getCount()>1&&e.checkChecksum(h,g))return e.constructResult(h,g)}}catch(w){s={error:w}}finally{try{x&&!x.done&&(u=v.return)&&u.call(v)}finally{if(s)throw s.error}}}}catch(w){i={error:w}}finally{try{d&&!d.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}throw new I},e.addOrTally=function(t,n){var a,i;if(n!=null){var o=!1;try{for(var s=Dr(t),u=s.next();!u.done;u=s.next()){var c=u.value;if(c.getValue()===n.getValue()){c.incrementCount(),o=!0;break}}}catch(l){a={error:l}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(a)throw a.error}}o||t.push(n)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,n){for(var a=4537077*t.getValue()+n.getValue(),i=new String(a).toString(),o=new F,s=13-i.length;s>0;s--)o.append("0");o.append(i);for(var u=0,s=0;s<13;s++){var c=o.charAt(s).charCodeAt(0)-48;u+=(s&1)===0?3*c:c}u=10-u%10,u===10&&(u=0),o.append(u.toString());var l=t.getFinderPattern().getResultPoints(),f=n.getFinderPattern().getResultPoints();return new Te(o.toString(),null,0,[l[0],l[1],f[0],f[1]],P.RSS_14,new Date().getTime())},e.checkChecksum=function(t,n){var a=(t.getChecksumPortion()+16*n.getChecksumPortion())%79,i=9*t.getFinderPattern().getValue()+n.getFinderPattern().getValue();return i>72&&i--,i>8&&i--,a===i},e.prototype.decodePair=function(t,n,a,i){try{var o=this.findFinderPattern(t,n),s=this.parseFoundFinderPattern(t,a,n,o),u=i==null?null:i.get(Q.NEED_RESULT_POINT_CALLBACK);if(u!=null){var c=(o[0]+o[1])/2;n&&(c=t.getSize()-1-c),u.foundPossibleResultPoint(new k(c,a))}var l=this.decodeDataCharacter(t,s,!0),f=this.decodeDataCharacter(t,s,!1);return new Nc(1597*l.getValue()+f.getValue(),l.getChecksumPortion()+4*f.getChecksumPortion(),s)}catch{return null}},e.prototype.decodeDataCharacter=function(t,n,a){for(var i=this.getDataCharacterCounters(),o=0;o<i.length;o++)i[o]=0;if(a)we.recordPatternInReverse(t,n.getStartEnd()[0],i);else{we.recordPattern(t,n.getStartEnd()[1]+1,i);for(var s=0,u=i.length-1;s<u;s++,u--){var c=i[s];i[s]=i[u],i[u]=c}}for(var l=a?16:15,f=W.sum(new Int32Array(i))/l,d=this.getOddCounts(),h=this.getEvenCounts(),v=this.getOddRoundingErrors(),x=this.getEvenRoundingErrors(),s=0;s<i.length;s++){var g=i[s]/f,w=Math.floor(g+.5);w<1?w=1:w>8&&(w=8);var y=Math.floor(s/2);(s&1)===0?(d[y]=w,v[y]=g-w):(h[y]=w,x[y]=g-w)}this.adjustOddEvenCounts(a,l);for(var _=0,b=0,s=d.length-1;s>=0;s--)b*=9,b+=d[s],_+=d[s];for(var E=0,S=0,s=h.length-1;s>=0;s--)E*=9,E+=h[s],S+=h[s];var O=b+3*E;if(a){if((_&1)!==0||_>12||_<4)throw new I;var N=(12-_)/2,T=e.OUTSIDE_ODD_WIDEST[N],D=9-T,j=yt.getRSSvalue(d,T,!1),L=yt.getRSSvalue(h,D,!0),q=e.OUTSIDE_EVEN_TOTAL_SUBSET[N],B=e.OUTSIDE_GSUM[N];return new lr(j*q+L+B,O)}else{if((S&1)!==0||S>10||S<4)throw new I;var N=(10-S)/2,T=e.INSIDE_ODD_WIDEST[N],D=9-T,j=yt.getRSSvalue(d,T,!0),L=yt.getRSSvalue(h,D,!1),H=e.INSIDE_ODD_TOTAL_SUBSET[N],B=e.INSIDE_GSUM[N];return new lr(L*H+j+B,O)}},e.prototype.findFinderPattern=function(t,n){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var i=t.getSize(),o=!1,s=0;s<i&&(o=!t.get(s),n!==o);)s++;for(var u=0,c=s,l=s;l<i;l++)if(t.get(l)!==o)a[u]++;else{if(u===3){if(dt.isFinderPattern(a))return[c,l];c+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,u--}else u++;a[u]=1,o=!o}throw new I},e.prototype.parseFoundFinderPattern=function(t,n,a,i){for(var o=t.get(i[0]),s=i[0]-1;s>=0&&o!==t.get(s);)s--;s++;var u=i[0]-s,c=this.getDecodeFinderCounters(),l=new Int32Array(c.length);te.arraycopy(c,0,l,1,c.length-1),l[0]=u;var f=this.parseFinderValue(l,e.FINDER_PATTERNS),d=s,h=i[1];return a&&(d=t.getSize()-1-d,h=t.getSize()-1-h),new mi(f,[s,i[1]],d,h,n)},e.prototype.adjustOddEvenCounts=function(t,n){var a=W.sum(new Int32Array(this.getOddCounts())),i=W.sum(new Int32Array(this.getEvenCounts())),o=!1,s=!1,u=!1,c=!1;t?(a>12?s=!0:a<4&&(o=!0),i>12?c=!0:i<4&&(u=!0)):(a>11?s=!0:a<5&&(o=!0),i>10?c=!0:i<4&&(u=!0));var l=a+i-n,f=(a&1)===(t?1:0),d=(i&1)===1;if(l===1)if(f){if(d)throw new I;s=!0}else{if(!d)throw new I;c=!0}else if(l===-1)if(f){if(d)throw new I;o=!0}else{if(!d)throw new I;u=!0}else if(l===0){if(f){if(!d)throw new I;a<i?(o=!0,c=!0):(s=!0,u=!0)}else if(d)throw new I}else throw new I;if(o){if(s)throw new I;dt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&dt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),u){if(c)throw new I;dt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&dt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e})(dt),Rc=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),wt=(function(r){Rc(e,r);function e(t){var n=r.call(this)||this;n.readers=[];var a=t?t.get(Q.POSSIBLE_FORMATS):null,i=t&&t.get(Q.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,o=t&&t.get(Q.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return a&&((a.includes(P.EAN_13)||a.includes(P.UPC_A)||a.includes(P.EAN_8)||a.includes(P.UPC_E))&&n.readers.push(new Rr(t)),a.includes(P.CODE_39)&&n.readers.push(new Xn(i,o)),a.includes(P.CODE_93)&&n.readers.push(new zn),a.includes(P.CODE_128)&&n.readers.push(new Wn),a.includes(P.ITF)&&n.readers.push(new Yn),a.includes(P.CODABAR)&&n.readers.push(new Qu),a.includes(P.RSS_14)&&n.readers.push(new ra),a.includes(P.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new Ic))),n.readers.length===0&&(n.readers.push(new Rr(t)),n.readers.push(new Xn),n.readers.push(new zn),n.readers.push(new Rr(t)),n.readers.push(new Wn),n.readers.push(new Yn),n.readers.push(new ra)),n}return e.prototype.decodeRow=function(t,n,a){for(var i=0;i<this.readers.length;i++)try{return this.readers[i].decodeRow(t,n,a)}catch{}throw new I},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e})(we),Dc=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){Dc(e,r);function e(t,n){return t===void 0&&(t=500),r.call(this,new wt(n),t,n)||this}return e})(It);var na=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Y=(function(){function r(e,t,n){this.ecCodewords=e,this.ecBlocks=[t],n&&this.ecBlocks.push(n)}return r.prototype.getECCodewords=function(){return this.ecCodewords},r.prototype.getECBlocks=function(){return this.ecBlocks},r})(),X=(function(){function r(e,t){this.count=e,this.dataCodewords=t}return r.prototype.getCount=function(){return this.count},r.prototype.getDataCodewords=function(){return this.dataCodewords},r})(),Pc=(function(){function r(e,t,n,a,i,o){var s,u;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=n,this.dataRegionSizeRows=a,this.dataRegionSizeColumns=i,this.ecBlocks=o;var c=0,l=o.getECCodewords(),f=o.getECBlocks();try{for(var d=na(f),h=d.next();!h.done;h=d.next()){var v=h.value;c+=v.getCount()*(v.getDataCodewords()+l)}}catch(x){s={error:x}}finally{try{h&&!h.done&&(u=d.return)&&u.call(d)}finally{if(s)throw s.error}}this.totalCodewords=c}return r.prototype.getVersionNumber=function(){return this.versionNumber},r.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},r.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},r.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},r.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},r.prototype.getTotalCodewords=function(){return this.totalCodewords},r.prototype.getECBlocks=function(){return this.ecBlocks},r.getVersionForDimensions=function(e,t){var n,a;if((e&1)!==0||(t&1)!==0)throw new R;try{for(var i=na(r.VERSIONS),o=i.next();!o.done;o=i.next()){var s=o.value;if(s.symbolSizeRows===e&&s.symbolSizeColumns===t)return s}}catch(u){n={error:u}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}throw new R},r.prototype.toString=function(){return""+this.versionNumber},r.buildVersions=function(){return[new r(1,10,10,8,8,new Y(5,new X(1,3))),new r(2,12,12,10,10,new Y(7,new X(1,5))),new r(3,14,14,12,12,new Y(10,new X(1,8))),new r(4,16,16,14,14,new Y(12,new X(1,12))),new r(5,18,18,16,16,new Y(14,new X(1,18))),new r(6,20,20,18,18,new Y(18,new X(1,22))),new r(7,22,22,20,20,new Y(20,new X(1,30))),new r(8,24,24,22,22,new Y(24,new X(1,36))),new r(9,26,26,24,24,new Y(28,new X(1,44))),new r(10,32,32,14,14,new Y(36,new X(1,62))),new r(11,36,36,16,16,new Y(42,new X(1,86))),new r(12,40,40,18,18,new Y(48,new X(1,114))),new r(13,44,44,20,20,new Y(56,new X(1,144))),new r(14,48,48,22,22,new Y(68,new X(1,174))),new r(15,52,52,24,24,new Y(42,new X(2,102))),new r(16,64,64,14,14,new Y(56,new X(2,140))),new r(17,72,72,16,16,new Y(36,new X(4,92))),new r(18,80,80,18,18,new Y(48,new X(4,114))),new r(19,88,88,20,20,new Y(56,new X(4,144))),new r(20,96,96,22,22,new Y(68,new X(4,174))),new r(21,104,104,24,24,new Y(56,new X(6,136))),new r(22,120,120,18,18,new Y(68,new X(6,175))),new r(23,132,132,20,20,new Y(62,new X(8,163))),new r(24,144,144,22,22,new Y(62,new X(8,156),new X(2,155))),new r(25,8,18,6,16,new Y(7,new X(1,5))),new r(26,8,32,6,14,new Y(11,new X(1,10))),new r(27,12,26,10,24,new Y(14,new X(1,16))),new r(28,12,36,10,16,new Y(18,new X(1,22))),new r(29,16,36,14,16,new Y(24,new X(1,32))),new r(30,16,48,14,22,new Y(28,new X(1,49)))]},r.VERSIONS=r.buildVersions(),r})(),kc=(function(){function r(e){var t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new R;this.version=r.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Qe(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return r.prototype.getVersion=function(){return this.version},r.readVersion=function(e){var t=e.getHeight(),n=e.getWidth();return Pc.getVersionForDimensions(t,n)},r.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,n=4,a=0,i=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth(),s=!1,u=!1,c=!1,l=!1;do if(n===i&&a===0&&!s)e[t++]=this.readCorner1(i,o)&255,n-=2,a+=2,s=!0;else if(n===i-2&&a===0&&(o&3)!==0&&!u)e[t++]=this.readCorner2(i,o)&255,n-=2,a+=2,u=!0;else if(n===i+4&&a===2&&(o&7)===0&&!c)e[t++]=this.readCorner3(i,o)&255,n-=2,a+=2,c=!0;else if(n===i-2&&a===0&&(o&7)===4&&!l)e[t++]=this.readCorner4(i,o)&255,n-=2,a+=2,l=!0;else{do n<i&&a>=0&&!this.readMappingMatrix.get(a,n)&&(e[t++]=this.readUtah(n,a,i,o)&255),n-=2,a+=2;while(n>=0&&a<o);n+=1,a+=3;do n>=0&&a<o&&!this.readMappingMatrix.get(a,n)&&(e[t++]=this.readUtah(n,a,i,o)&255),n+=2,a-=2;while(n<i&&a>=0);n+=3,a+=1}while(n<i||a<o);if(t!==this.version.getTotalCodewords())throw new R;return e},r.prototype.readModule=function(e,t,n,a){return e<0&&(e+=n,t+=4-(n+4&7)),t<0&&(t+=a,e+=4-(a+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},r.prototype.readUtah=function(e,t,n,a){var i=0;return this.readModule(e-2,t-2,n,a)&&(i|=1),i<<=1,this.readModule(e-2,t-1,n,a)&&(i|=1),i<<=1,this.readModule(e-1,t-2,n,a)&&(i|=1),i<<=1,this.readModule(e-1,t-1,n,a)&&(i|=1),i<<=1,this.readModule(e-1,t,n,a)&&(i|=1),i<<=1,this.readModule(e,t-2,n,a)&&(i|=1),i<<=1,this.readModule(e,t-1,n,a)&&(i|=1),i<<=1,this.readModule(e,t,n,a)&&(i|=1),i},r.prototype.readCorner1=function(e,t){var n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,1,e,t)&&(n|=1),n<<=1,this.readModule(e-1,2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n},r.prototype.readCorner2=function(e,t){var n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-4,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n},r.prototype.readCorner3=function(e,t){var n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-3,e,t)&&(n|=1),n<<=1,this.readModule(1,t-2,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n},r.prototype.readCorner4=function(e,t){var n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n},r.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new M("Dimension of bitMatrix must match the version size");for(var a=this.version.getDataRegionSizeRows(),i=this.version.getDataRegionSizeColumns(),o=t/a|0,s=n/i|0,u=o*a,c=s*i,l=new Qe(c,u),f=0;f<o;++f)for(var d=f*a,h=0;h<s;++h)for(var v=h*i,x=0;x<a;++x)for(var g=f*(a+2)+1+x,w=d+x,y=0;y<i;++y){var _=h*(i+2)+1+y;if(e.get(_,g)){var b=v+y;l.set(b,w)}}return l},r})(),aa=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Mc=(function(){function r(e,t){this.numDataCodewords=e,this.codewords=t}return r.getDataBlocks=function(e,t){var n,a,i,o,s=t.getECBlocks(),u=0,c=s.getECBlocks();try{for(var l=aa(c),f=l.next();!f.done;f=l.next()){var d=f.value;u+=d.getCount()}}catch(B){n={error:B}}finally{try{f&&!f.done&&(a=l.return)&&a.call(l)}finally{if(n)throw n.error}}var h=new Array(u),v=0;try{for(var x=aa(c),g=x.next();!g.done;g=x.next())for(var d=g.value,w=0;w<d.getCount();w++){var y=d.getDataCodewords(),_=s.getECCodewords()+y;h[v++]=new r(y,new Uint8Array(_))}}catch(B){i={error:B}}finally{try{g&&!g.done&&(o=x.return)&&o.call(x)}finally{if(i)throw i.error}}for(var b=h[0].codewords.length,E=b-s.getECCodewords(),S=E-1,O=0,w=0;w<S;w++)for(var N=0;N<v;N++)h[N].codewords[w]=e[O++];for(var T=t.getVersionNumber()===24,D=T?8:v,N=0;N<D;N++)h[N].codewords[E-1]=e[O++];for(var j=h[0].codewords.length,w=E;w<j;w++)for(var N=0;N<v;N++){var L=T?(N+8)%v:N,q=T&&L>7?w-1:w;h[L].codewords[q]=e[O++]}if(O!==e.length)throw new M;return h},r.prototype.getNumDataCodewords=function(){return this.numDataCodewords},r.prototype.getCodewords=function(){return this.codewords},r})(),_i=(function(){function r(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return r.prototype.getBitOffset=function(){return this.bitOffset},r.prototype.getByteOffset=function(){return this.byteOffset},r.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new M(""+e);var t=0,n=this.bitOffset,a=this.byteOffset,i=this.bytes;if(n>0){var o=8-n,s=e<o?e:o,u=o-s,c=255>>8-s<<u;t=(i[a]&c)>>u,e-=s,n+=s,n===8&&(n=0,a++)}if(e>0){for(;e>=8;)t=t<<8|i[a]&255,a++,e-=8;if(e>0){var u=8-e,c=255>>u<<u;t=t<<e|(i[a]&c)>>u,n+=e}}return this.bitOffset=n,this.byteOffset=a,t},r.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},r})(),ve;(function(r){r[r.PAD_ENCODE=0]="PAD_ENCODE",r[r.ASCII_ENCODE=1]="ASCII_ENCODE",r[r.C40_ENCODE=2]="C40_ENCODE",r[r.TEXT_ENCODE=3]="TEXT_ENCODE",r[r.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",r[r.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",r[r.BASE256_ENCODE=6]="BASE256_ENCODE"})(ve||(ve={}));var Bc=(function(){function r(){}return r.decode=function(e){var t=new _i(e),n=new F,a=new F,i=new Array,o=ve.ASCII_ENCODE;do if(o===ve.ASCII_ENCODE)o=this.decodeAsciiSegment(t,n,a);else{switch(o){case ve.C40_ENCODE:this.decodeC40Segment(t,n);break;case ve.TEXT_ENCODE:this.decodeTextSegment(t,n);break;case ve.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,n);break;case ve.EDIFACT_ENCODE:this.decodeEdifactSegment(t,n);break;case ve.BASE256_ENCODE:this.decodeBase256Segment(t,n,i);break;default:throw new R}o=ve.ASCII_ENCODE}while(o!==ve.PAD_ENCODE&&t.available()>0);return a.length()>0&&n.append(a.toString()),new yr(e,n.toString(),i.length===0?null:i,null)},r.decodeAsciiSegment=function(e,t,n){var a=!1;do{var i=e.readBits(8);if(i===0)throw new R;if(i<=128)return a&&(i+=128),t.append(String.fromCharCode(i-1)),ve.ASCII_ENCODE;if(i===129)return ve.PAD_ENCODE;if(i<=229){var o=i-130;o<10&&t.append("0"),t.append(""+o)}else switch(i){case 230:return ve.C40_ENCODE;case 231:return ve.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:a=!0;break;case 236:t.append("[)>05"),n.insert(0,"");break;case 237:t.append("[)>06"),n.insert(0,"");break;case 238:return ve.ANSIX12_ENCODE;case 239:return ve.TEXT_ENCODE;case 240:return ve.EDIFACT_ENCODE;case 241:break;default:if(i!==254||e.available()!==0)throw new R;break}}while(e.available()>0);return ve.ASCII_ENCODE},r.decodeC40Segment=function(e,t){var n=!1,a=[],i=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),a);for(var s=0;s<3;s++){var u=a[s];switch(i){case 0:if(u<3)i=u+1;else if(u<this.C40_BASIC_SET_CHARS.length){var c=this.C40_BASIC_SET_CHARS[u];n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c)}else throw new R;break;case 1:n?(t.append(String.fromCharCode(u+128)),n=!1):t.append(String.fromCharCode(u)),i=0;break;case 2:if(u<this.C40_SHIFT2_SET_CHARS.length){var c=this.C40_SHIFT2_SET_CHARS[u];n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c)}else switch(u){case 27:t.append("");break;case 30:n=!0;break;default:throw new R}i=0;break;case 3:n?(t.append(String.fromCharCode(u+224)),n=!1):t.append(String.fromCharCode(u+96)),i=0;break;default:throw new R}}}while(e.available()>0)},r.decodeTextSegment=function(e,t){var n=!1,a=[],i=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),a);for(var s=0;s<3;s++){var u=a[s];switch(i){case 0:if(u<3)i=u+1;else if(u<this.TEXT_BASIC_SET_CHARS.length){var c=this.TEXT_BASIC_SET_CHARS[u];n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c)}else throw new R;break;case 1:n?(t.append(String.fromCharCode(u+128)),n=!1):t.append(String.fromCharCode(u)),i=0;break;case 2:if(u<this.TEXT_SHIFT2_SET_CHARS.length){var c=this.TEXT_SHIFT2_SET_CHARS[u];n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c)}else switch(u){case 27:t.append("");break;case 30:n=!0;break;default:throw new R}i=0;break;case 3:if(u<this.TEXT_SHIFT3_SET_CHARS.length){var c=this.TEXT_SHIFT3_SET_CHARS[u];n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c),i=0}else throw new R;break;default:throw new R}}}while(e.available()>0)},r.decodeAnsiX12Segment=function(e,t){var n=[];do{if(e.available()===8)return;var a=e.readBits(8);if(a===254)return;this.parseTwoBytes(a,e.readBits(8),n);for(var i=0;i<3;i++){var o=n[i];switch(o){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(o<14)t.append(String.fromCharCode(o+44));else if(o<40)t.append(String.fromCharCode(o+51));else throw new R;break}}}while(e.available()>0)},r.parseTwoBytes=function(e,t,n){var a=(e<<8)+t-1,i=Math.floor(a/1600);n[0]=i,a-=i*1600,i=Math.floor(a/40),n[1]=i,n[2]=a-i*40},r.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var a=e.readBits(6);if(a===31){var i=8-e.getBitOffset();i!==8&&e.readBits(i);return}(a&32)===0&&(a|=64),t.append(String.fromCharCode(a))}}while(e.available()>0)},r.decodeBase256Segment=function(e,t,n){var a=1+e.getByteOffset(),i=this.unrandomize255State(e.readBits(8),a++),o;if(i===0?o=e.available()/8|0:i<250?o=i:o=250*(i-249)+this.unrandomize255State(e.readBits(8),a++),o<0)throw new R;for(var s=new Uint8Array(o),u=0;u<o;u++){if(e.available()<8)throw new R;s[u]=this.unrandomize255State(e.readBits(8),a++)}n.push(s);try{t.append(We.decode(s,V.ISO88591))}catch(c){throw new Xt("Platform does not support required encoding: "+c.message)}},r.unrandomize255State=function(e,t){var n=149*t%255+1,a=e-n;return a>=0?a:a+256},r.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],r.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],r.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],r.TEXT_SHIFT2_SET_CHARS=r.C40_SHIFT2_SET_CHARS,r.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],r})(),Lc=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Fc=(function(){function r(){this.rsDecoder=new wr(Le.DATA_MATRIX_FIELD_256)}return r.prototype.decode=function(e){var t,n,a=new kc(e),i=a.getVersion(),o=a.readCodewords(),s=Mc.getDataBlocks(o,i),u=0;try{for(var c=Lc(s),l=c.next();!l.done;l=c.next()){var f=l.value;u+=f.getNumDataCodewords()}}catch(_){t={error:_}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}for(var d=new Uint8Array(u),h=s.length,v=0;v<h;v++){var x=s[v],g=x.getCodewords(),w=x.getNumDataCodewords();this.correctErrors(g,w);for(var y=0;y<w;y++)d[y*h+v]=g[y]}return Bc.decode(d)},r.prototype.correctErrors=function(e,t){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new he}for(var a=0;a<t;a++)e[a]=n[a]},r})(),jc=(function(){function r(e){this.image=e,this.rectangleDetector=new en(this.image)}return r.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new I;t=this.shiftToModuleCenter(t);var n=t[0],a=t[1],i=t[2],o=t[3],s=this.transitionsBetween(n,o)+1,u=this.transitionsBetween(i,o)+1;(s&1)===1&&(s+=1),(u&1)===1&&(u+=1),4*s<7*u&&4*u<7*s&&(s=u=Math.max(s,u));var c=r.sampleGrid(this.image,n,a,i,o,s,u);return new gn(c,[n,a,i,o])},r.shiftPoint=function(e,t,n){var a=(t.getX()-e.getX())/(n+1),i=(t.getY()-e.getY())/(n+1);return new k(e.getX()+a,e.getY()+i)},r.moveAway=function(e,t,n){var a=e.getX(),i=e.getY();return a<t?a-=1:a+=1,i<n?i-=1:i+=1,new k(a,i)},r.prototype.detectSolid1=function(e){var t=e[0],n=e[1],a=e[3],i=e[2],o=this.transitionsBetween(t,n),s=this.transitionsBetween(n,a),u=this.transitionsBetween(a,i),c=this.transitionsBetween(i,t),l=o,f=[i,t,n,a];return l>s&&(l=s,f[0]=t,f[1]=n,f[2]=a,f[3]=i),l>u&&(l=u,f[0]=n,f[1]=a,f[2]=i,f[3]=t),l>c&&(f[0]=a,f[1]=i,f[2]=t,f[3]=n),f},r.prototype.detectSolid2=function(e){var t=e[0],n=e[1],a=e[2],i=e[3],o=this.transitionsBetween(t,i),s=r.shiftPoint(n,a,(o+1)*4),u=r.shiftPoint(a,n,(o+1)*4),c=this.transitionsBetween(s,t),l=this.transitionsBetween(u,i);return c<l?(e[0]=t,e[1]=n,e[2]=a,e[3]=i):(e[0]=n,e[1]=a,e[2]=i,e[3]=t),e},r.prototype.correctTopRight=function(e){var t=e[0],n=e[1],a=e[2],i=e[3],o=this.transitionsBetween(t,i),s=this.transitionsBetween(n,i),u=r.shiftPoint(t,n,(s+1)*4),c=r.shiftPoint(a,n,(o+1)*4);o=this.transitionsBetween(u,i),s=this.transitionsBetween(c,i);var l=new k(i.getX()+(a.getX()-n.getX())/(o+1),i.getY()+(a.getY()-n.getY())/(o+1)),f=new k(i.getX()+(t.getX()-n.getX())/(s+1),i.getY()+(t.getY()-n.getY())/(s+1));if(!this.isValid(l))return this.isValid(f)?f:null;if(!this.isValid(f))return l;var d=this.transitionsBetween(u,l)+this.transitionsBetween(c,l),h=this.transitionsBetween(u,f)+this.transitionsBetween(c,f);return d>h?l:f},r.prototype.shiftToModuleCenter=function(e){var t=e[0],n=e[1],a=e[2],i=e[3],o=this.transitionsBetween(t,i)+1,s=this.transitionsBetween(a,i)+1,u=r.shiftPoint(t,n,s*4),c=r.shiftPoint(a,n,o*4);o=this.transitionsBetween(u,i)+1,s=this.transitionsBetween(c,i)+1,(o&1)===1&&(o+=1),(s&1)===1&&(s+=1);var l=(t.getX()+n.getX()+a.getX()+i.getX())/4,f=(t.getY()+n.getY()+a.getY()+i.getY())/4;t=r.moveAway(t,l,f),n=r.moveAway(n,l,f),a=r.moveAway(a,l,f),i=r.moveAway(i,l,f);var d,h;return u=r.shiftPoint(t,n,s*4),u=r.shiftPoint(u,i,o*4),d=r.shiftPoint(n,t,s*4),d=r.shiftPoint(d,a,o*4),c=r.shiftPoint(a,i,s*4),c=r.shiftPoint(c,n,o*4),h=r.shiftPoint(i,a,s*4),h=r.shiftPoint(h,t,o*4),[u,d,c,h]},r.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},r.sampleGrid=function(e,t,n,a,i,o,s){var u=mn.getInstance();return u.sampleGrid(e,o,s,.5,.5,o-.5,.5,o-.5,s-.5,.5,s-.5,t.getX(),t.getY(),i.getX(),i.getY(),a.getX(),a.getY(),n.getX(),n.getY())},r.prototype.transitionsBetween=function(e,t){var n=Math.trunc(e.getX()),a=Math.trunc(e.getY()),i=Math.trunc(t.getX()),o=Math.trunc(t.getY()),s=Math.abs(o-a)>Math.abs(i-n);if(s){var u=n;n=a,a=u,u=i,i=o,o=u}for(var c=Math.abs(i-n),l=Math.abs(o-a),f=-c/2,d=a<o?1:-1,h=n<i?1:-1,v=0,x=this.image.get(s?a:n,s?n:a),g=n,w=a;g!==i;g+=h){var y=this.image.get(s?w:g,s?g:w);if(y!==x&&(v++,x=y),f+=l,f>0){if(w===o)break;w+=d,f-=c}}return v},r})(),fr=(function(){function r(){this.decoder=new Fc}return r.prototype.decode=function(e,t){t===void 0&&(t=null);var n,a;if(t!=null&&t.has(Q.PURE_BARCODE)){var i=r.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(i),a=r.NO_POINTS}else{var o=new jc(e.getBlackMatrix()).detect();n=this.decoder.decode(o.getBits()),a=o.getPoints()}var s=n.getRawBytes(),u=new Te(n.getText(),s,8*s.length,a,P.DATA_MATRIX,te.currentTimeMillis()),c=n.getByteSegments();c!=null&&u.putMetadata(Ie.BYTE_SEGMENTS,c);var l=n.getECLevel();return l!=null&&u.putMetadata(Ie.ERROR_CORRECTION_LEVEL,l),u},r.prototype.reset=function(){},r.extractPureBits=function(e){var t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t==null||n==null)throw new I;var a=this.moduleSize(t,e),i=t[1],o=n[1],s=t[0],u=n[0],c=(u-s+1)/a,l=(o-i+1)/a;if(c<=0||l<=0)throw new I;var f=a/2;i+=f,s+=f;for(var d=new Qe(c,l),h=0;h<l;h++)for(var v=i+h*a,x=0;x<c;x++)e.get(s+x*a,v)&&d.set(x,h);return d},r.moduleSize=function(e,t){for(var n=t.getWidth(),a=e[0],i=e[1];a<n&&t.get(a,i);)a++;if(a===n)throw new I;var o=a-e[0];if(o===0)throw new I;return o},r.NO_POINTS=[],r})(),Uc=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){Uc(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new fr,t)||this}return e})(It);var _t;(function(r){r[r.L=0]="L",r[r.M=1]="M",r[r.Q=2]="Q",r[r.H=3]="H"})(_t||(_t={}));var Vc=(function(){function r(e,t,n){this.value=e,this.stringValue=t,this.bits=n,r.FOR_BITS.set(n,this),r.FOR_VALUE.set(e,this)}return r.prototype.getValue=function(){return this.value},r.prototype.getBits=function(){return this.bits},r.fromString=function(e){switch(e){case"L":return r.L;case"M":return r.M;case"Q":return r.Q;case"H":return r.H;default:throw new de(e+"not available")}},r.prototype.toString=function(){return this.stringValue},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value},r.forBits=function(e){if(e<0||e>=r.FOR_BITS.size)throw new M;return r.FOR_BITS.get(e)},r.FOR_BITS=new Map,r.FOR_VALUE=new Map,r.L=new r(_t.L,"L",1),r.M=new r(_t.M,"M",0),r.Q=new r(_t.Q,"Q",3),r.H=new r(_t.H,"H",2),r})(),Hc=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ai=(function(){function r(e){this.errorCorrectionLevel=Vc.forBits(e>>3&3),this.dataMask=e&7}return r.numBitsDiffering=function(e,t){return U.bitCount(e^t)},r.decodeFormatInformation=function(e,t){var n=r.doDecodeFormatInformation(e,t);return n!==null?n:r.doDecodeFormatInformation(e^r.FORMAT_INFO_MASK_QR,t^r.FORMAT_INFO_MASK_QR)},r.doDecodeFormatInformation=function(e,t){var n,a,i=Number.MAX_SAFE_INTEGER,o=0;try{for(var s=Hc(r.FORMAT_INFO_DECODE_LOOKUP),u=s.next();!u.done;u=s.next()){var c=u.value,l=c[0];if(l===e||l===t)return new r(c[1]);var f=r.numBitsDiffering(e,l);f<i&&(o=c[1],i=f),e!==t&&(f=r.numBitsDiffering(t,l),f<i&&(o=c[1],i=f))}}catch(d){n={error:d}}finally{try{u&&!u.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}return i<=3?new r(o):null},r.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},r.prototype.getDataMask=function(){return this.dataMask},r.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},r.FORMAT_INFO_MASK_QR=21522,r.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],r})(),Gc=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},C=(function(){function r(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return r.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},r.prototype.getNumBlocks=function(){var e,t,n=0,a=this.ecBlocks;try{for(var i=Gc(a),o=i.next();!o.done;o=i.next()){var s=o.value;n+=s.getCount()}}catch(u){e={error:u}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n},r.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},r.prototype.getECBlocks=function(){return this.ecBlocks},r})(),m=(function(){function r(e,t){this.count=e,this.dataCodewords=t}return r.prototype.getCount=function(){return this.count},r.prototype.getDataCodewords=function(){return this.dataCodewords},r})(),$c=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pt=(function(){function r(e,t){for(var n,a,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=i;var s=0,u=i[0].getECCodewordsPerBlock(),c=i[0].getECBlocks();try{for(var l=$c(c),f=l.next();!f.done;f=l.next()){var d=f.value;s+=d.getCount()*(d.getDataCodewords()+u)}}catch(h){n={error:h}}finally{try{f&&!f.done&&(a=l.return)&&a.call(l)}finally{if(n)throw n.error}}this.totalCodewords=s}return r.prototype.getVersionNumber=function(){return this.versionNumber},r.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},r.prototype.getTotalCodewords=function(){return this.totalCodewords},r.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},r.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},r.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new R;try{return this.getVersionForNumber((e-17)/4)}catch{throw new R}},r.getVersionForNumber=function(e){if(e<1||e>40)throw new M;return r.VERSIONS[e-1]},r.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,n=0,a=0;a<r.VERSION_DECODE_INFO.length;a++){var i=r.VERSION_DECODE_INFO[a];if(i===e)return r.getVersionForNumber(a+7);var o=Ai.numBitsDiffering(e,i);o<t&&(n=a+7,t=o)}return t<=3?r.getVersionForNumber(n):null},r.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new Qe(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,a=0;a<n;a++)for(var i=this.alignmentPatternCenters[a]-2,o=0;o<n;o++)a===0&&(o===0||o===n-1)||a===n-1&&o===0||t.setRegion(this.alignmentPatternCenters[o]-2,i,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},r.prototype.toString=function(){return""+this.versionNumber},r.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),r.VERSIONS=[new r(1,new Int32Array(0),new C(7,new m(1,19)),new C(10,new m(1,16)),new C(13,new m(1,13)),new C(17,new m(1,9))),new r(2,Int32Array.from([6,18]),new C(10,new m(1,34)),new C(16,new m(1,28)),new C(22,new m(1,22)),new C(28,new m(1,16))),new r(3,Int32Array.from([6,22]),new C(15,new m(1,55)),new C(26,new m(1,44)),new C(18,new m(2,17)),new C(22,new m(2,13))),new r(4,Int32Array.from([6,26]),new C(20,new m(1,80)),new C(18,new m(2,32)),new C(26,new m(2,24)),new C(16,new m(4,9))),new r(5,Int32Array.from([6,30]),new C(26,new m(1,108)),new C(24,new m(2,43)),new C(18,new m(2,15),new m(2,16)),new C(22,new m(2,11),new m(2,12))),new r(6,Int32Array.from([6,34]),new C(18,new m(2,68)),new C(16,new m(4,27)),new C(24,new m(4,19)),new C(28,new m(4,15))),new r(7,Int32Array.from([6,22,38]),new C(20,new m(2,78)),new C(18,new m(4,31)),new C(18,new m(2,14),new m(4,15)),new C(26,new m(4,13),new m(1,14))),new r(8,Int32Array.from([6,24,42]),new C(24,new m(2,97)),new C(22,new m(2,38),new m(2,39)),new C(22,new m(4,18),new m(2,19)),new C(26,new m(4,14),new m(2,15))),new r(9,Int32Array.from([6,26,46]),new C(30,new m(2,116)),new C(22,new m(3,36),new m(2,37)),new C(20,new m(4,16),new m(4,17)),new C(24,new m(4,12),new m(4,13))),new r(10,Int32Array.from([6,28,50]),new C(18,new m(2,68),new m(2,69)),new C(26,new m(4,43),new m(1,44)),new C(24,new m(6,19),new m(2,20)),new C(28,new m(6,15),new m(2,16))),new r(11,Int32Array.from([6,30,54]),new C(20,new m(4,81)),new C(30,new m(1,50),new m(4,51)),new C(28,new m(4,22),new m(4,23)),new C(24,new m(3,12),new m(8,13))),new r(12,Int32Array.from([6,32,58]),new C(24,new m(2,92),new m(2,93)),new C(22,new m(6,36),new m(2,37)),new C(26,new m(4,20),new m(6,21)),new C(28,new m(7,14),new m(4,15))),new r(13,Int32Array.from([6,34,62]),new C(26,new m(4,107)),new C(22,new m(8,37),new m(1,38)),new C(24,new m(8,20),new m(4,21)),new C(22,new m(12,11),new m(4,12))),new r(14,Int32Array.from([6,26,46,66]),new C(30,new m(3,115),new m(1,116)),new C(24,new m(4,40),new m(5,41)),new C(20,new m(11,16),new m(5,17)),new C(24,new m(11,12),new m(5,13))),new r(15,Int32Array.from([6,26,48,70]),new C(22,new m(5,87),new m(1,88)),new C(24,new m(5,41),new m(5,42)),new C(30,new m(5,24),new m(7,25)),new C(24,new m(11,12),new m(7,13))),new r(16,Int32Array.from([6,26,50,74]),new C(24,new m(5,98),new m(1,99)),new C(28,new m(7,45),new m(3,46)),new C(24,new m(15,19),new m(2,20)),new C(30,new m(3,15),new m(13,16))),new r(17,Int32Array.from([6,30,54,78]),new C(28,new m(1,107),new m(5,108)),new C(28,new m(10,46),new m(1,47)),new C(28,new m(1,22),new m(15,23)),new C(28,new m(2,14),new m(17,15))),new r(18,Int32Array.from([6,30,56,82]),new C(30,new m(5,120),new m(1,121)),new C(26,new m(9,43),new m(4,44)),new C(28,new m(17,22),new m(1,23)),new C(28,new m(2,14),new m(19,15))),new r(19,Int32Array.from([6,30,58,86]),new C(28,new m(3,113),new m(4,114)),new C(26,new m(3,44),new m(11,45)),new C(26,new m(17,21),new m(4,22)),new C(26,new m(9,13),new m(16,14))),new r(20,Int32Array.from([6,34,62,90]),new C(28,new m(3,107),new m(5,108)),new C(26,new m(3,41),new m(13,42)),new C(30,new m(15,24),new m(5,25)),new C(28,new m(15,15),new m(10,16))),new r(21,Int32Array.from([6,28,50,72,94]),new C(28,new m(4,116),new m(4,117)),new C(26,new m(17,42)),new C(28,new m(17,22),new m(6,23)),new C(30,new m(19,16),new m(6,17))),new r(22,Int32Array.from([6,26,50,74,98]),new C(28,new m(2,111),new m(7,112)),new C(28,new m(17,46)),new C(30,new m(7,24),new m(16,25)),new C(24,new m(34,13))),new r(23,Int32Array.from([6,30,54,78,102]),new C(30,new m(4,121),new m(5,122)),new C(28,new m(4,47),new m(14,48)),new C(30,new m(11,24),new m(14,25)),new C(30,new m(16,15),new m(14,16))),new r(24,Int32Array.from([6,28,54,80,106]),new C(30,new m(6,117),new m(4,118)),new C(28,new m(6,45),new m(14,46)),new C(30,new m(11,24),new m(16,25)),new C(30,new m(30,16),new m(2,17))),new r(25,Int32Array.from([6,32,58,84,110]),new C(26,new m(8,106),new m(4,107)),new C(28,new m(8,47),new m(13,48)),new C(30,new m(7,24),new m(22,25)),new C(30,new m(22,15),new m(13,16))),new r(26,Int32Array.from([6,30,58,86,114]),new C(28,new m(10,114),new m(2,115)),new C(28,new m(19,46),new m(4,47)),new C(28,new m(28,22),new m(6,23)),new C(30,new m(33,16),new m(4,17))),new r(27,Int32Array.from([6,34,62,90,118]),new C(30,new m(8,122),new m(4,123)),new C(28,new m(22,45),new m(3,46)),new C(30,new m(8,23),new m(26,24)),new C(30,new m(12,15),new m(28,16))),new r(28,Int32Array.from([6,26,50,74,98,122]),new C(30,new m(3,117),new m(10,118)),new C(28,new m(3,45),new m(23,46)),new C(30,new m(4,24),new m(31,25)),new C(30,new m(11,15),new m(31,16))),new r(29,Int32Array.from([6,30,54,78,102,126]),new C(30,new m(7,116),new m(7,117)),new C(28,new m(21,45),new m(7,46)),new C(30,new m(1,23),new m(37,24)),new C(30,new m(19,15),new m(26,16))),new r(30,Int32Array.from([6,26,52,78,104,130]),new C(30,new m(5,115),new m(10,116)),new C(28,new m(19,47),new m(10,48)),new C(30,new m(15,24),new m(25,25)),new C(30,new m(23,15),new m(25,16))),new r(31,Int32Array.from([6,30,56,82,108,134]),new C(30,new m(13,115),new m(3,116)),new C(28,new m(2,46),new m(29,47)),new C(30,new m(42,24),new m(1,25)),new C(30,new m(23,15),new m(28,16))),new r(32,Int32Array.from([6,34,60,86,112,138]),new C(30,new m(17,115)),new C(28,new m(10,46),new m(23,47)),new C(30,new m(10,24),new m(35,25)),new C(30,new m(19,15),new m(35,16))),new r(33,Int32Array.from([6,30,58,86,114,142]),new C(30,new m(17,115),new m(1,116)),new C(28,new m(14,46),new m(21,47)),new C(30,new m(29,24),new m(19,25)),new C(30,new m(11,15),new m(46,16))),new r(34,Int32Array.from([6,34,62,90,118,146]),new C(30,new m(13,115),new m(6,116)),new C(28,new m(14,46),new m(23,47)),new C(30,new m(44,24),new m(7,25)),new C(30,new m(59,16),new m(1,17))),new r(35,Int32Array.from([6,30,54,78,102,126,150]),new C(30,new m(12,121),new m(7,122)),new C(28,new m(12,47),new m(26,48)),new C(30,new m(39,24),new m(14,25)),new C(30,new m(22,15),new m(41,16))),new r(36,Int32Array.from([6,24,50,76,102,128,154]),new C(30,new m(6,121),new m(14,122)),new C(28,new m(6,47),new m(34,48)),new C(30,new m(46,24),new m(10,25)),new C(30,new m(2,15),new m(64,16))),new r(37,Int32Array.from([6,28,54,80,106,132,158]),new C(30,new m(17,122),new m(4,123)),new C(28,new m(29,46),new m(14,47)),new C(30,new m(49,24),new m(10,25)),new C(30,new m(24,15),new m(46,16))),new r(38,Int32Array.from([6,32,58,84,110,136,162]),new C(30,new m(4,122),new m(18,123)),new C(28,new m(13,46),new m(32,47)),new C(30,new m(48,24),new m(14,25)),new C(30,new m(42,15),new m(32,16))),new r(39,Int32Array.from([6,26,54,82,110,138,166]),new C(30,new m(20,117),new m(4,118)),new C(28,new m(40,47),new m(7,48)),new C(30,new m(43,24),new m(22,25)),new C(30,new m(10,15),new m(67,16))),new r(40,Int32Array.from([6,30,58,86,114,142,170]),new C(30,new m(19,118),new m(6,119)),new C(28,new m(18,47),new m(31,48)),new C(30,new m(34,24),new m(34,25)),new C(30,new m(20,15),new m(61,16)))],r})(),_e;(function(r){r[r.DATA_MASK_000=0]="DATA_MASK_000",r[r.DATA_MASK_001=1]="DATA_MASK_001",r[r.DATA_MASK_010=2]="DATA_MASK_010",r[r.DATA_MASK_011=3]="DATA_MASK_011",r[r.DATA_MASK_100=4]="DATA_MASK_100",r[r.DATA_MASK_101=5]="DATA_MASK_101",r[r.DATA_MASK_110=6]="DATA_MASK_110",r[r.DATA_MASK_111=7]="DATA_MASK_111"})(_e||(_e={}));var ia=(function(){function r(e,t){this.value=e,this.isMasked=t}return r.prototype.unmaskBitMatrix=function(e,t){for(var n=0;n<t;n++)for(var a=0;a<t;a++)this.isMasked(n,a)&&e.flip(a,n)},r.values=new Map([[_e.DATA_MASK_000,new r(_e.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[_e.DATA_MASK_001,new r(_e.DATA_MASK_001,function(e,t){return(e&1)===0})],[_e.DATA_MASK_010,new r(_e.DATA_MASK_010,function(e,t){return t%3===0})],[_e.DATA_MASK_011,new r(_e.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[_e.DATA_MASK_100,new r(_e.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[_e.DATA_MASK_101,new r(_e.DATA_MASK_101,function(e,t){return e*t%6===0})],[_e.DATA_MASK_110,new r(_e.DATA_MASK_110,function(e,t){return e*t%6<3})],[_e.DATA_MASK_111,new r(_e.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),r})(),Wc=(function(){function r(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new R;this.bitMatrix=e}return r.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);for(var a=this.bitMatrix.getHeight(),i=0,o=a-7,n=a-1;n>=o;n--)i=this.copyBit(8,n,i);for(var t=a-8;t<a;t++)i=this.copyBit(t,8,i);if(this.parsedFormatInfo=Ai.decodeFormatInformation(e,i),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new R},r.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return pt.getVersionForNumber(t);for(var n=0,a=e-11,i=5;i>=0;i--)for(var o=e-9;o>=a;o--)n=this.copyBit(o,i,n);var s=pt.decodeVersionInformation(n);if(s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;n=0;for(var o=5;o>=0;o--)for(var i=e-9;i>=a;i--)n=this.copyBit(o,i,n);if(s=pt.decodeVersionInformation(n),s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;throw new R},r.prototype.copyBit=function(e,t,n){var a=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return a?n<<1|1:n<<1},r.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),n=ia.values.get(e.getDataMask()),a=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,a);for(var i=t.buildFunctionPattern(),o=!0,s=new Uint8Array(t.getTotalCodewords()),u=0,c=0,l=0,f=a-1;f>0;f-=2){f===6&&f--;for(var d=0;d<a;d++)for(var h=o?a-1-d:d,v=0;v<2;v++)i.get(f-v,h)||(l++,c<<=1,this.bitMatrix.get(f-v,h)&&(c|=1),l===8&&(s[u++]=c,l=0,c=0));o=!o}if(u!==t.getTotalCodewords())throw new R;return s},r.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=ia.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},r.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},r.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,n=e.getWidth();t<n;t++)for(var a=t+1,i=e.getHeight();a<i;a++)e.get(t,a)!==e.get(a,t)&&(e.flip(a,t),e.flip(t,a))},r})(),oa=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xc=(function(){function r(e,t){this.numDataCodewords=e,this.codewords=t}return r.getDataBlocks=function(e,t,n){var a,i,o,s;if(e.length!==t.getTotalCodewords())throw new M;var u=t.getECBlocksForLevel(n),c=0,l=u.getECBlocks();try{for(var f=oa(l),d=f.next();!d.done;d=f.next()){var h=d.value;c+=h.getCount()}}catch(q){a={error:q}}finally{try{d&&!d.done&&(i=f.return)&&i.call(f)}finally{if(a)throw a.error}}var v=new Array(c),x=0;try{for(var g=oa(l),w=g.next();!w.done;w=g.next())for(var h=w.value,y=0;y<h.getCount();y++){var _=h.getDataCodewords(),b=u.getECCodewordsPerBlock()+_;v[x++]=new r(_,new Uint8Array(b))}}catch(q){o={error:q}}finally{try{w&&!w.done&&(s=g.return)&&s.call(g)}finally{if(o)throw o.error}}for(var E=v[0].codewords.length,S=v.length-1;S>=0;){var O=v[S].codewords.length;if(O===E)break;S--}S++;for(var N=E-u.getECCodewordsPerBlock(),T=0,y=0;y<N;y++)for(var D=0;D<x;D++)v[D].codewords[y]=e[T++];for(var D=S;D<x;D++)v[D].codewords[N]=e[T++];for(var j=v[0].codewords.length,y=N;y<j;y++)for(var D=0;D<x;D++){var L=D<S?y:y+1;v[D].codewords[L]=e[T++]}return v},r.prototype.getNumDataCodewords=function(){return this.numDataCodewords},r.prototype.getCodewords=function(){return this.codewords},r})(),He;(function(r){r[r.TERMINATOR=0]="TERMINATOR",r[r.NUMERIC=1]="NUMERIC",r[r.ALPHANUMERIC=2]="ALPHANUMERIC",r[r.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",r[r.BYTE=4]="BYTE",r[r.ECI=5]="ECI",r[r.KANJI=6]="KANJI",r[r.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",r[r.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",r[r.HANZI=9]="HANZI"})(He||(He={}));var ne=(function(){function r(e,t,n,a){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=n,this.bits=a,r.FOR_BITS.set(a,this),r.FOR_VALUE.set(e,this)}return r.forBits=function(e){var t=r.FOR_BITS.get(e);if(t===void 0)throw new M;return t},r.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),n;return t<=9?n=0:t<=26?n=1:n=2,this.characterCountBitsForVersions[n]},r.prototype.getValue=function(){return this.value},r.prototype.getBits=function(){return this.bits},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value},r.prototype.toString=function(){return this.stringValue},r.FOR_BITS=new Map,r.FOR_VALUE=new Map,r.TERMINATOR=new r(He.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),r.NUMERIC=new r(He.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),r.ALPHANUMERIC=new r(He.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),r.STRUCTURED_APPEND=new r(He.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),r.BYTE=new r(He.BYTE,"BYTE",Int32Array.from([8,16,16]),4),r.ECI=new r(He.ECI,"ECI",Int32Array.from([0,0,0]),7),r.KANJI=new r(He.KANJI,"KANJI",Int32Array.from([8,10,12]),8),r.FNC1_FIRST_POSITION=new r(He.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),r.FNC1_SECOND_POSITION=new r(He.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),r.HANZI=new r(He.HANZI,"HANZI",Int32Array.from([8,10,12]),13),r})(),zc=(function(){function r(){}return r.decode=function(e,t,n,a){var i=new _i(e),o=new F,s=new Array,u=-1,c=-1;try{var l=null,f=!1,d=void 0;do{if(i.available()<4)d=ne.TERMINATOR;else{var h=i.readBits(4);d=ne.forBits(h)}switch(d){case ne.TERMINATOR:break;case ne.FNC1_FIRST_POSITION:case ne.FNC1_SECOND_POSITION:f=!0;break;case ne.STRUCTURED_APPEND:if(i.available()<16)throw new R;u=i.readBits(8),c=i.readBits(8);break;case ne.ECI:var v=r.parseECIValue(i);if(l=me.getCharacterSetECIByValue(v),l===null)throw new R;break;case ne.HANZI:var x=i.readBits(4),g=i.readBits(d.getCharacterCountBits(t));x===r.GB2312_SUBSET&&r.decodeHanziSegment(i,o,g);break;default:var w=i.readBits(d.getCharacterCountBits(t));switch(d){case ne.NUMERIC:r.decodeNumericSegment(i,o,w);break;case ne.ALPHANUMERIC:r.decodeAlphanumericSegment(i,o,w,f);break;case ne.BYTE:r.decodeByteSegment(i,o,w,l,s,a);break;case ne.KANJI:r.decodeKanjiSegment(i,o,w);break;default:throw new R}break}}while(d!==ne.TERMINATOR)}catch{throw new R}return new yr(e,o.toString(),s.length===0?null:s,n===null?null:n.toString(),u,c)},r.decodeHanziSegment=function(e,t,n){if(n*13>e.available())throw new R;for(var a=new Uint8Array(2*n),i=0;n>0;){var o=e.readBits(13),s=o/96<<8&4294967295|o%96;s<959?s+=41377:s+=42657,a[i]=s>>8&255,a[i+1]=s&255,i+=2,n--}try{t.append(We.decode(a,V.GB2312))}catch(u){throw new R(u)}},r.decodeKanjiSegment=function(e,t,n){if(n*13>e.available())throw new R;for(var a=new Uint8Array(2*n),i=0;n>0;){var o=e.readBits(13),s=o/192<<8&4294967295|o%192;s<7936?s+=33088:s+=49472,a[i]=s>>8,a[i+1]=s,i+=2,n--}try{t.append(We.decode(a,V.SHIFT_JIS))}catch(u){throw new R(u)}},r.decodeByteSegment=function(e,t,n,a,i,o){if(8*n>e.available())throw new R;for(var s=new Uint8Array(n),u=0;u<n;u++)s[u]=e.readBits(8);var c;a===null?c=V.guessEncoding(s,o):c=a.getName();try{t.append(We.decode(s,c))}catch(l){throw new R(l)}i.push(s)},r.toAlphaNumericChar=function(e){if(e>=r.ALPHANUMERIC_CHARS.length)throw new R;return r.ALPHANUMERIC_CHARS[e]},r.decodeAlphanumericSegment=function(e,t,n,a){for(var i=t.length();n>1;){if(e.available()<11)throw new R;var o=e.readBits(11);t.append(r.toAlphaNumericChar(Math.floor(o/45))),t.append(r.toAlphaNumericChar(o%45)),n-=2}if(n===1){if(e.available()<6)throw new R;t.append(r.toAlphaNumericChar(e.readBits(6)))}if(a)for(var s=i;s<t.length();s++)t.charAt(s)==="%"&&(s<t.length()-1&&t.charAt(s+1)==="%"?t.deleteCharAt(s+1):t.setCharAt(s,""))},r.decodeNumericSegment=function(e,t,n){for(;n>=3;){if(e.available()<10)throw new R;var a=e.readBits(10);if(a>=1e3)throw new R;t.append(r.toAlphaNumericChar(Math.floor(a/100))),t.append(r.toAlphaNumericChar(Math.floor(a/10)%10)),t.append(r.toAlphaNumericChar(a%10)),n-=3}if(n===2){if(e.available()<7)throw new R;var i=e.readBits(7);if(i>=100)throw new R;t.append(r.toAlphaNumericChar(Math.floor(i/10))),t.append(r.toAlphaNumericChar(i%10))}else if(n===1){if(e.available()<4)throw new R;var o=e.readBits(4);if(o>=10)throw new R;t.append(r.toAlphaNumericChar(o))}},r.parseECIValue=function(e){var t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){var n=e.readBits(8);return(t&63)<<8&4294967295|n}if((t&224)===192){var a=e.readBits(16);return(t&31)<<16&4294967295|a}throw new R},r.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",r.GB2312_SUBSET=1,r})(),bi=(function(){function r(e){this.mirrored=e}return r.prototype.isMirrored=function(){return this.mirrored},r.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},r})(),sa=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Yc=(function(){function r(){this.rsDecoder=new wr(Le.QR_CODE_FIELD_256)}return r.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(Qe.parseFromBooleanArray(e),t)},r.prototype.decodeBitMatrix=function(e,t){var n=new Wc(e),a=null;try{return this.decodeBitMatrixParser(n,t)}catch(o){a=o}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var i=this.decodeBitMatrixParser(n,t);return i.setOther(new bi(!0)),i}catch(o){throw a!==null?a:o}},r.prototype.decodeBitMatrixParser=function(e,t){var n,a,i,o,s=e.readVersion(),u=e.readFormatInformation().getErrorCorrectionLevel(),c=e.readCodewords(),l=Xc.getDataBlocks(c,s,u),f=0;try{for(var d=sa(l),h=d.next();!h.done;h=d.next()){var v=h.value;f+=v.getNumDataCodewords()}}catch(S){n={error:S}}finally{try{h&&!h.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}var x=new Uint8Array(f),g=0;try{for(var w=sa(l),y=w.next();!y.done;y=w.next()){var v=y.value,_=v.getCodewords(),b=v.getNumDataCodewords();this.correctErrors(_,b);for(var E=0;E<b;E++)x[g++]=_[E]}}catch(S){i={error:S}}finally{try{y&&!y.done&&(o=w.return)&&o.call(w)}finally{if(i)throw i.error}}return zc.decode(x,s,u,t)},r.prototype.correctErrors=function(e,t){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new he}for(var a=0;a<t;a++)e[a]=n[a]},r})(),Zc=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Kc=(function(r){Zc(e,r);function e(t,n,a){var i=r.call(this,t,n)||this;return i.estimatedModuleSize=a,i}return e.prototype.aboutEquals=function(t,n,a){if(Math.abs(n-this.getY())<=t&&Math.abs(a-this.getX())<=t){var i=Math.abs(t-this.estimatedModuleSize);return i<=1||i<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,n,a){var i=(this.getX()+n)/2,o=(this.getY()+t)/2,s=(this.estimatedModuleSize+a)/2;return new e(i,o,s)},e})(k),qc=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Jc=(function(){function r(e,t,n,a,i,o,s){this.image=e,this.startX=t,this.startY=n,this.width=a,this.height=i,this.moduleSize=o,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return r.prototype.find=function(){for(var e=this.startX,t=this.height,n=this.width,a=e+n,i=this.startY+t/2,o=new Int32Array(3),s=this.image,u=0;u<t;u++){var c=i+((u&1)===0?Math.floor((u+1)/2):-Math.floor((u+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var l=e;l<a&&!s.get(l,c);)l++;for(var f=0;l<a;){if(s.get(l,c))if(f===1)o[1]++;else if(f===2){if(this.foundPatternCross(o)){var d=this.handlePossibleCenter(o,c,l);if(d!==null)return d}o[0]=o[2],o[1]=1,o[2]=0,f=1}else o[++f]++;else f===1&&f++,o[f]++;l++}if(this.foundPatternCross(o)){var d=this.handlePossibleCenter(o,c,a);if(d!==null)return d}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new I},r.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},r.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,n=t/2,a=0;a<3;a++)if(Math.abs(t-e[a])>=n)return!1;return!0},r.prototype.crossCheckVertical=function(e,t,n,a){var i=this.image,o=i.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var u=e;u>=0&&i.get(t,u)&&s[1]<=n;)s[1]++,u--;if(u<0||s[1]>n)return NaN;for(;u>=0&&!i.get(t,u)&&s[0]<=n;)s[0]++,u--;if(s[0]>n)return NaN;for(u=e+1;u<o&&i.get(t,u)&&s[1]<=n;)s[1]++,u++;if(u===o||s[1]>n)return NaN;for(;u<o&&!i.get(t,u)&&s[2]<=n;)s[2]++,u++;if(s[2]>n)return NaN;var c=s[0]+s[1]+s[2];return 5*Math.abs(c-a)>=2*a?NaN:this.foundPatternCross(s)?r.centerFromEnd(s,u):NaN},r.prototype.handlePossibleCenter=function(e,t,n){var a,i,o=e[0]+e[1]+e[2],s=r.centerFromEnd(e,n),u=this.crossCheckVertical(t,s,2*e[1],o);if(!isNaN(u)){var c=(e[0]+e[1]+e[2])/3;try{for(var l=qc(this.possibleCenters),f=l.next();!f.done;f=l.next()){var d=f.value;if(d.aboutEquals(c,u,s))return d.combineEstimate(u,s,c)}}catch(v){a={error:v}}finally{try{f&&!f.done&&(i=l.return)&&i.call(l)}finally{if(a)throw a.error}}var h=new Kc(s,u,c);this.possibleCenters.push(h),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(h)}return null},r})(),Qc=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),el=(function(r){Qc(e,r);function e(t,n,a,i){var o=r.call(this,t,n)||this;return o.estimatedModuleSize=a,o.count=i,i===void 0&&(o.count=1),o}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,n,a){if(Math.abs(n-this.getY())<=t&&Math.abs(a-this.getX())<=t){var i=Math.abs(t-this.estimatedModuleSize);return i<=1||i<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,n,a){var i=this.count+1,o=(this.count*this.getX()+n)/i,s=(this.count*this.getY()+t)/i,u=(this.count*this.estimatedModuleSize+a)/i;return new e(o,s,u,i)},e})(k),tl=(function(){function r(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return r.prototype.getBottomLeft=function(){return this.bottomLeft},r.prototype.getTopLeft=function(){return this.topLeft},r.prototype.getTopRight=function(){return this.topRight},r})(),Dt=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rl=(function(){function r(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return r.prototype.getImage=function(){return this.image},r.prototype.getPossibleCenters=function(){return this.possibleCenters},r.prototype.find=function(e){var t=e!=null&&e.get(Q.TRY_HARDER)!==void 0,n=e!=null&&e.get(Q.PURE_BARCODE)!==void 0,a=this.image,i=a.getHeight(),o=a.getWidth(),s=Math.floor(3*i/(4*r.MAX_MODULES));(s<r.MIN_SKIP||t)&&(s=r.MIN_SKIP);for(var u=!1,c=new Int32Array(5),l=s-1;l<i&&!u;l+=s){c[0]=0,c[1]=0,c[2]=0,c[3]=0,c[4]=0;for(var f=0,d=0;d<o;d++)if(a.get(d,l))(f&1)===1&&f++,c[f]++;else if((f&1)===0)if(f===4)if(r.foundPatternCross(c)){var h=this.handlePossibleCenter(c,l,d,n);if(h===!0)if(s=2,this.hasSkipped===!0)u=this.haveMultiplyConfirmedCenters();else{var v=this.findRowSkip();v>c[2]&&(l+=v-c[2]-s,d=o-1)}else{c[0]=c[2],c[1]=c[3],c[2]=c[4],c[3]=1,c[4]=0,f=3;continue}f=0,c[0]=0,c[1]=0,c[2]=0,c[3]=0,c[4]=0}else c[0]=c[2],c[1]=c[3],c[2]=c[4],c[3]=1,c[4]=0,f=3;else c[++f]++;else c[f]++;if(r.foundPatternCross(c)){var h=this.handlePossibleCenter(c,l,o,n);h===!0&&(s=c[0],this.hasSkipped&&(u=this.haveMultiplyConfirmedCenters()))}}var x=this.selectBestPatterns();return k.orderBestPatterns(x),new tl(x)},r.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},r.foundPatternCross=function(e){for(var t=0,n=0;n<5;n++){var a=e[n];if(a===0)return!1;t+=a}if(t<7)return!1;var i=t/7,o=i/2;return Math.abs(i-e[0])<o&&Math.abs(i-e[1])<o&&Math.abs(3*i-e[2])<3*o&&Math.abs(i-e[3])<o&&Math.abs(i-e[4])<o},r.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},r.prototype.crossCheckDiagonal=function(e,t,n,a){for(var i=this.getCrossCheckStateCount(),o=0,s=this.image;e>=o&&t>=o&&s.get(t-o,e-o);)i[2]++,o++;if(e<o||t<o)return!1;for(;e>=o&&t>=o&&!s.get(t-o,e-o)&&i[1]<=n;)i[1]++,o++;if(e<o||t<o||i[1]>n)return!1;for(;e>=o&&t>=o&&s.get(t-o,e-o)&&i[0]<=n;)i[0]++,o++;if(i[0]>n)return!1;var u=s.getHeight(),c=s.getWidth();for(o=1;e+o<u&&t+o<c&&s.get(t+o,e+o);)i[2]++,o++;if(e+o>=u||t+o>=c)return!1;for(;e+o<u&&t+o<c&&!s.get(t+o,e+o)&&i[3]<n;)i[3]++,o++;if(e+o>=u||t+o>=c||i[3]>=n)return!1;for(;e+o<u&&t+o<c&&s.get(t+o,e+o)&&i[4]<n;)i[4]++,o++;if(i[4]>=n)return!1;var l=i[0]+i[1]+i[2]+i[3]+i[4];return Math.abs(l-a)<2*a&&r.foundPatternCross(i)},r.prototype.crossCheckVertical=function(e,t,n,a){for(var i=this.image,o=i.getHeight(),s=this.getCrossCheckStateCount(),u=e;u>=0&&i.get(t,u);)s[2]++,u--;if(u<0)return NaN;for(;u>=0&&!i.get(t,u)&&s[1]<=n;)s[1]++,u--;if(u<0||s[1]>n)return NaN;for(;u>=0&&i.get(t,u)&&s[0]<=n;)s[0]++,u--;if(s[0]>n)return NaN;for(u=e+1;u<o&&i.get(t,u);)s[2]++,u++;if(u===o)return NaN;for(;u<o&&!i.get(t,u)&&s[3]<n;)s[3]++,u++;if(u===o||s[3]>=n)return NaN;for(;u<o&&i.get(t,u)&&s[4]<n;)s[4]++,u++;if(s[4]>=n)return NaN;var c=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(c-a)>=2*a?NaN:r.foundPatternCross(s)?r.centerFromEnd(s,u):NaN},r.prototype.crossCheckHorizontal=function(e,t,n,a){for(var i=this.image,o=i.getWidth(),s=this.getCrossCheckStateCount(),u=e;u>=0&&i.get(u,t);)s[2]++,u--;if(u<0)return NaN;for(;u>=0&&!i.get(u,t)&&s[1]<=n;)s[1]++,u--;if(u<0||s[1]>n)return NaN;for(;u>=0&&i.get(u,t)&&s[0]<=n;)s[0]++,u--;if(s[0]>n)return NaN;for(u=e+1;u<o&&i.get(u,t);)s[2]++,u++;if(u===o)return NaN;for(;u<o&&!i.get(u,t)&&s[3]<n;)s[3]++,u++;if(u===o||s[3]>=n)return NaN;for(;u<o&&i.get(u,t)&&s[4]<n;)s[4]++,u++;if(s[4]>=n)return NaN;var c=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(c-a)>=a?NaN:r.foundPatternCross(s)?r.centerFromEnd(s,u):NaN},r.prototype.handlePossibleCenter=function(e,t,n,a){var i=e[0]+e[1]+e[2]+e[3]+e[4],o=r.centerFromEnd(e,n),s=this.crossCheckVertical(t,Math.floor(o),e[2],i);if(!isNaN(s)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(s),e[2],i),!isNaN(o)&&(!a||this.crossCheckDiagonal(Math.floor(s),Math.floor(o),e[2],i)))){for(var u=i/7,c=!1,l=this.possibleCenters,f=0,d=l.length;f<d;f++){var h=l[f];if(h.aboutEquals(u,s,o)){l[f]=h.combineEstimate(s,o,u),c=!0;break}}if(!c){var v=new el(o,s,u);l.push(v),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(v)}return!0}return!1},r.prototype.findRowSkip=function(){var e,t,n=this.possibleCenters.length;if(n<=1)return 0;var a=null;try{for(var i=Dt(this.possibleCenters),o=i.next();!o.done;o=i.next()){var s=o.value;if(s.getCount()>=r.CENTER_QUORUM)if(a==null)a=s;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-s.getX())-Math.abs(a.getY()-s.getY()))/2)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return 0},r.prototype.haveMultiplyConfirmedCenters=function(){var e,t,n,a,i=0,o=0,s=this.possibleCenters.length;try{for(var u=Dt(this.possibleCenters),c=u.next();!c.done;c=u.next()){var l=c.value;l.getCount()>=r.CENTER_QUORUM&&(i++,o+=l.getEstimatedModuleSize())}}catch(x){e={error:x}}finally{try{c&&!c.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}if(i<3)return!1;var f=o/s,d=0;try{for(var h=Dt(this.possibleCenters),v=h.next();!v.done;v=h.next()){var l=v.value;d+=Math.abs(l.getEstimatedModuleSize()-f)}}catch(x){n={error:x}}finally{try{v&&!v.done&&(a=h.return)&&a.call(h)}finally{if(n)throw n.error}}return d<=.05*o},r.prototype.selectBestPatterns=function(){var e,t,n,a,i=this.possibleCenters.length;if(i<3)throw new I;var o=this.possibleCenters,s;if(i>3){var u=0,c=0;try{for(var l=Dt(this.possibleCenters),f=l.next();!f.done;f=l.next()){var d=f.value,h=d.getEstimatedModuleSize();u+=h,c+=h*h}}catch(E){e={error:E}}finally{try{f&&!f.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}s=u/i;var v=Math.sqrt(c/i-s*s);o.sort(function(E,S){var O=Math.abs(S.getEstimatedModuleSize()-s),N=Math.abs(E.getEstimatedModuleSize()-s);return O<N?-1:O>N?1:0});for(var x=Math.max(.2*s,v),g=0;g<o.length&&o.length>3;g++){var w=o[g];Math.abs(w.getEstimatedModuleSize()-s)>x&&(o.splice(g,1),g--)}}if(o.length>3){var u=0;try{for(var y=Dt(o),_=y.next();!_.done;_=y.next()){var b=_.value;u+=b.getEstimatedModuleSize()}}catch(S){n={error:S}}finally{try{_&&!_.done&&(a=y.return)&&a.call(y)}finally{if(n)throw n.error}}s=u/o.length,o.sort(function(S,O){if(O.getCount()===S.getCount()){var N=Math.abs(O.getEstimatedModuleSize()-s),T=Math.abs(S.getEstimatedModuleSize()-s);return N<T?1:N>T?-1:0}else return O.getCount()-S.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]},r.CENTER_QUORUM=2,r.MIN_SKIP=3,r.MAX_MODULES=57,r})(),nl=(function(){function r(e){this.image=e}return r.prototype.getImage=function(){return this.image},r.prototype.getResultPointCallback=function(){return this.resultPointCallback},r.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(Q.NEED_RESULT_POINT_CALLBACK);var t=new rl(this.image,this.resultPointCallback),n=t.find(e);return this.processFinderPatternInfo(n)},r.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),n=e.getTopRight(),a=e.getBottomLeft(),i=this.calculateModuleSize(t,n,a);if(i<1)throw new I("No pattern found in proccess finder.");var o=r.computeDimension(t,n,a,i),s=pt.getProvisionalVersionForDimension(o),u=s.getDimensionForVersion()-7,c=null;if(s.getAlignmentPatternCenters().length>0)for(var l=n.getX()-t.getX()+a.getX(),f=n.getY()-t.getY()+a.getY(),d=1-3/u,h=Math.floor(t.getX()+d*(l-t.getX())),v=Math.floor(t.getY()+d*(f-t.getY())),x=4;x<=16;x<<=1)try{c=this.findAlignmentInRegion(i,h,v,x);break}catch(_){if(!(_ instanceof I))throw _}var g=r.createTransform(t,n,a,c,o),w=r.sampleGrid(this.image,g,o),y;return c===null?y=[a,t,n]:y=[a,t,n,c],new gn(w,y)},r.createTransform=function(e,t,n,a,i){var o=i-3.5,s,u,c,l;return a!==null?(s=a.getX(),u=a.getY(),c=o-3,l=c):(s=t.getX()-e.getX()+n.getX(),u=t.getY()-e.getY()+n.getY(),c=o,l=o),gi.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,c,l,3.5,o,e.getX(),e.getY(),t.getX(),t.getY(),s,u,n.getX(),n.getY())},r.sampleGrid=function(e,t,n){var a=mn.getInstance();return a.sampleGridWithTransform(e,n,n,t)},r.computeDimension=function(e,t,n,a){var i=W.round(k.distance(e,t)/a),o=W.round(k.distance(e,n)/a),s=Math.floor((i+o)/2)+7;switch(s&3){case 0:s++;break;case 2:s--;break;case 3:throw new I("Dimensions could be not found.")}return s},r.prototype.calculateModuleSize=function(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2},r.prototype.calculateModuleSizeOneWay=function(e,t){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?a/7:isNaN(a)?n/7:(n+a)/14},r.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,n,a){var i=this.sizeOfBlackWhiteBlackRun(e,t,n,a),o=1,s=e-(n-e);s<0?(o=e/(e-s),s=0):s>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(s-e),s=this.image.getWidth()-1);var u=Math.floor(t-(a-t)*o);return o=1,u<0?(o=t/(t-u),u=0):u>=this.image.getHeight()&&(o=(this.image.getHeight()-1-t)/(u-t),u=this.image.getHeight()-1),s=Math.floor(e+(s-e)*o),i+=this.sizeOfBlackWhiteBlackRun(e,t,s,u),i-1},r.prototype.sizeOfBlackWhiteBlackRun=function(e,t,n,a){var i=Math.abs(a-t)>Math.abs(n-e);if(i){var o=e;e=t,t=o,o=n,n=a,a=o}for(var s=Math.abs(n-e),u=Math.abs(a-t),c=-s/2,l=e<n?1:-1,f=t<a?1:-1,d=0,h=n+l,v=e,x=t;v!==h;v+=l){var g=i?x:v,w=i?v:x;if(d===1===this.image.get(g,w)){if(d===2)return W.distance(v,x,e,t);d++}if(c+=u,c>0){if(x===a)break;x+=f,c-=s}}return d===2?W.distance(n+l,a,e,t):NaN},r.prototype.findAlignmentInRegion=function(e,t,n,a){var i=Math.floor(a*e),o=Math.max(0,t-i),s=Math.min(this.image.getWidth()-1,t+i);if(s-o<e*3)throw new I("Alignment top exceeds estimated module size.");var u=Math.max(0,n-i),c=Math.min(this.image.getHeight()-1,n+i);if(c-u<e*3)throw new I("Alignment bottom exceeds estimated module size.");var l=new Jc(this.image,o,u,s-o,c-u,e,this.resultPointCallback);return l.find()},r})(),dr=(function(){function r(){this.decoder=new Yc}return r.prototype.getDecoder=function(){return this.decoder},r.prototype.decode=function(e,t){var n,a;if(t!=null&&t.get(Q.PURE_BARCODE)!==void 0){var i=r.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(i,t),a=r.NO_POINTS}else{var o=new nl(e.getBlackMatrix()).detect(t);n=this.decoder.decodeBitMatrix(o.getBits(),t),a=o.getPoints()}n.getOther()instanceof bi&&n.getOther().applyMirroredCorrection(a);var s=new Te(n.getText(),n.getRawBytes(),void 0,a,P.QR_CODE,void 0),u=n.getByteSegments();u!==null&&s.putMetadata(Ie.BYTE_SEGMENTS,u);var c=n.getECLevel();return c!==null&&s.putMetadata(Ie.ERROR_CORRECTION_LEVEL,c),n.hasStructuredAppend()&&(s.putMetadata(Ie.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),s.putMetadata(Ie.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),s},r.prototype.reset=function(){},r.extractPureBits=function(e){var t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t===null||n===null)throw new I;var a=this.moduleSize(t,e),i=t[1],o=n[1],s=t[0],u=n[0];if(s>=u||i>=o)throw new I;if(o-i!==u-s&&(u=s+(o-i),u>=e.getWidth()))throw new I;var c=Math.round((u-s+1)/a),l=Math.round((o-i+1)/a);if(c<=0||l<=0)throw new I;if(l!==c)throw new I;var f=Math.floor(a/2);i+=f,s+=f;var d=s+Math.floor((c-1)*a)-u;if(d>0){if(d>f)throw new I;s-=d}var h=i+Math.floor((l-1)*a)-o;if(h>0){if(h>f)throw new I;i-=h}for(var v=new Qe(c,l),x=0;x<l;x++)for(var g=i+Math.floor(x*a),w=0;w<c;w++)e.get(s+Math.floor(w*a),g)&&v.set(w,x);return v},r.moduleSize=function(e,t){for(var n=t.getHeight(),a=t.getWidth(),i=e[0],o=e[1],s=!0,u=0;i<a&&o<n;){if(s!==t.get(i,o)){if(++u===5)break;s=!s}i++,o++}if(i===a||o===n)throw new I;return(i-e[0])/7},r.NO_POINTS=new Array,r})(),al=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},G=(function(){function r(){}return r.prototype.PDF417Common=function(){},r.getBitCountSum=function(e){return W.sum(e)},r.toIntArray=function(e){var t,n;if(e==null||!e.length)return r.EMPTY_INT_ARRAY;var a=new Int32Array(e.length),i=0;try{for(var o=al(e),s=o.next();!s.done;s=o.next()){var u=s.value;a[i++]=u}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return a},r.getCodeword=function(e){var t=ye.binarySearch(r.SYMBOL_TABLE,e&262143);return t<0?-1:(r.CODEWORD_TABLE[t]-1)%r.NUMBER_OF_CODEWORDS},r.NUMBER_OF_CODEWORDS=929,r.MAX_CODEWORDS_IN_BARCODE=r.NUMBER_OF_CODEWORDS-1,r.MIN_ROWS_IN_BARCODE=3,r.MAX_ROWS_IN_BARCODE=90,r.MODULES_IN_CODEWORD=17,r.MODULES_IN_STOP_PATTERN=18,r.BARS_IN_MODULE=8,r.EMPTY_INT_ARRAY=new Int32Array([]),r.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),r.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),r})(),il=(function(){function r(e,t){this.bits=e,this.points=t}return r.prototype.getBits=function(){return this.bits},r.prototype.getPoints=function(){return this.points},r})(),ol=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sl=(function(){function r(){}return r.detectMultiple=function(e,t,n){var a=e.getBlackMatrix(),i=r.detect(n,a);return i.length||(a=a.clone(),a.rotate180(),i=r.detect(n,a)),new il(a,i)},r.detect=function(e,t){for(var n,a,i=new Array,o=0,s=0,u=!1;o<t.getHeight();){var c=r.findVertices(t,o,s);if(c[0]==null&&c[3]==null){if(!u)break;u=!1,s=0;try{for(var l=(n=void 0,ol(i)),f=l.next();!f.done;f=l.next()){var d=f.value;d[1]!=null&&(o=Math.trunc(Math.max(o,d[1].getY()))),d[3]!=null&&(o=Math.max(o,Math.trunc(d[3].getY())))}}catch(h){n={error:h}}finally{try{f&&!f.done&&(a=l.return)&&a.call(l)}finally{if(n)throw n.error}}o+=r.ROW_STEP;continue}if(u=!0,i.push(c),!e)break;c[2]!=null?(s=Math.trunc(c[2].getX()),o=Math.trunc(c[2].getY())):(s=Math.trunc(c[4].getX()),o=Math.trunc(c[4].getY()))}return i},r.findVertices=function(e,t,n){var a=e.getHeight(),i=e.getWidth(),o=new Array(8);return r.copyToResult(o,r.findRowsWithPattern(e,a,i,t,n,r.START_PATTERN),r.INDEXES_START_PATTERN),o[4]!=null&&(n=Math.trunc(o[4].getX()),t=Math.trunc(o[4].getY())),r.copyToResult(o,r.findRowsWithPattern(e,a,i,t,n,r.STOP_PATTERN),r.INDEXES_STOP_PATTERN),o},r.copyToResult=function(e,t,n){for(var a=0;a<n.length;a++)e[n[a]]=t[a]},r.findRowsWithPattern=function(e,t,n,a,i,o){for(var s=new Array(4),u=!1,c=new Int32Array(o.length);a<t;a+=r.ROW_STEP){var l=r.findGuardPattern(e,i,a,n,!1,o,c);if(l!=null){for(;a>0;){var f=r.findGuardPattern(e,i,--a,n,!1,o,c);if(f!=null)l=f;else{a++;break}}s[0]=new k(l[0],a),s[1]=new k(l[1],a),u=!0;break}}var d=a+1;if(u){for(var h=0,f=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);d<t;d++){var l=r.findGuardPattern(e,f[0],d,n,!1,o,c);if(l!=null&&Math.abs(f[0]-l[0])<r.MAX_PATTERN_DRIFT&&Math.abs(f[1]-l[1])<r.MAX_PATTERN_DRIFT)f=l,h=0;else{if(h>r.SKIPPED_ROW_COUNT_MAX)break;h++}}d-=h+1,s[2]=new k(f[0],d),s[3]=new k(f[1],d)}return d-a<r.BARCODE_MIN_HEIGHT&&ye.fill(s,null),s},r.findGuardPattern=function(e,t,n,a,i,o,s){ye.fillWithin(s,0,s.length,0);for(var u=t,c=0;e.get(u,n)&&u>0&&c++<r.MAX_PIXEL_DRIFT;)u--;for(var l=u,f=0,d=o.length,h=i;l<a;l++){var v=e.get(l,n);if(v!==h)s[f]++;else{if(f===d-1){if(r.patternMatchVariance(s,o,r.MAX_INDIVIDUAL_VARIANCE)<r.MAX_AVG_VARIANCE)return new Int32Array([u,l]);u+=s[0]+s[1],te.arraycopy(s,2,s,0,f-1),s[f-1]=0,s[f]=0,f--}else f++;s[f]=1,h=!h}}return f===d-1&&r.patternMatchVariance(s,o,r.MAX_INDIVIDUAL_VARIANCE)<r.MAX_AVG_VARIANCE?new Int32Array([u,l-1]):null},r.patternMatchVariance=function(e,t,n){for(var a=e.length,i=0,o=0,s=0;s<a;s++)i+=e[s],o+=t[s];if(i<o)return 1/0;var u=i/o;n*=u;for(var c=0,l=0;l<a;l++){var f=e[l],d=t[l]*u,h=f>d?f-d:d-f;if(h>n)return 1/0;c+=h}return c/i},r.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),r.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),r.MAX_AVG_VARIANCE=.42,r.MAX_INDIVIDUAL_VARIANCE=.8,r.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),r.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),r.MAX_PIXEL_DRIFT=3,r.MAX_PATTERN_DRIFT=5,r.SKIPPED_ROW_COUNT_MAX=25,r.ROW_STEP=5,r.BARCODE_MIN_HEIGHT=10,r})(),ul=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ht=(function(){function r(e,t){if(t.length===0)throw new M;this.field=e;var n=t.length;if(n>1&&t[0]===0){for(var a=1;a<n&&t[a]===0;)a++;a===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-a),te.arraycopy(t,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return r.prototype.getCoefficients=function(){return this.coefficients},r.prototype.getDegree=function(){return this.coefficients.length-1},r.prototype.isZero=function(){return this.coefficients[0]===0},r.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},r.prototype.evaluateAt=function(e){var t,n;if(e===0)return this.getCoefficient(0);if(e===1){var a=0;try{for(var i=ul(this.coefficients),o=i.next();!o.done;o=i.next()){var s=o.value;a=this.field.add(a,s)}}catch(f){t={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return a}for(var u=this.coefficients[0],c=this.coefficients.length,l=1;l<c;l++)u=this.field.add(this.field.multiply(e,u),this.coefficients[l]);return u},r.prototype.add=function(e){if(!this.field.equals(e.field))throw new M("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,n=e.coefficients;if(t.length>n.length){var a=t;t=n,n=a}var i=new Int32Array(n.length),o=n.length-t.length;te.arraycopy(n,0,i,0,o);for(var s=o;s<n.length;s++)i[s]=this.field.add(t[s-o],n[s]);return new r(this.field,i)},r.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new M("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},r.prototype.multiply=function(e){return e instanceof r?this.multiplyOther(e):this.multiplyScalar(e)},r.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new M("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new r(this.field,new Int32Array([0]));for(var t=this.coefficients,n=t.length,a=e.coefficients,i=a.length,o=new Int32Array(n+i-1),s=0;s<n;s++)for(var u=t[s],c=0;c<i;c++)o[s+c]=this.field.add(o[s+c],this.field.multiply(u,a[c]));return new r(this.field,o)},r.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),n=0;n<e;n++)t[n]=this.field.subtract(0,this.coefficients[n]);return new r(this.field,t)},r.prototype.multiplyScalar=function(e){if(e===0)return new r(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,n=new Int32Array(t),a=0;a<t;a++)n[a]=this.field.multiply(this.coefficients[a],e);return new r(this.field,n)},r.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new M;if(t===0)return new r(this.field,new Int32Array([0]));for(var n=this.coefficients.length,a=new Int32Array(n+e),i=0;i<n;i++)a[i]=this.field.multiply(this.coefficients[i],t);return new r(this.field,a)},r.prototype.toString=function(){for(var e=new F,t=this.getDegree();t>=0;t--){var n=this.getCoefficient(t);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(t===0||n!==1)&&e.append(n),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},r})(),cl=(function(){function r(){}return r.prototype.add=function(e,t){return(e+t)%this.modulus},r.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},r.prototype.exp=function(e){return this.expTable[e]},r.prototype.log=function(e){if(e===0)throw new M;return this.logTable[e]},r.prototype.inverse=function(e){if(e===0)throw new xi;return this.expTable[this.modulus-this.logTable[e]-1]},r.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},r.prototype.getSize=function(){return this.modulus},r.prototype.equals=function(e){return e===this},r})(),ll=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),fl=(function(r){ll(e,r);function e(t,n){var a=r.call(this)||this;a.modulus=t,a.expTable=new Int32Array(t),a.logTable=new Int32Array(t);for(var i=1,o=0;o<t;o++)a.expTable[o]=i,i=i*n%t;for(var o=0;o<t-1;o++)a.logTable[a.expTable[o]]=o;return a.zero=new ht(a,new Int32Array([0])),a.one=new ht(a,new Int32Array([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,n){if(t<0)throw new M;if(n===0)return this.zero;var a=new Int32Array(t+1);return a[0]=n,new ht(this,a)},e.PDF417_GF=new e(G.NUMBER_OF_CODEWORDS,3),e})(cl),dl=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hl=(function(){function r(){this.field=fl.PDF417_GF}return r.prototype.decode=function(e,t,n){for(var a,i,o=new ht(this.field,e),s=new Int32Array(t),u=!1,c=t;c>0;c--){var l=o.evaluateAt(this.field.exp(c));s[t-c]=l,l!==0&&(u=!0)}if(!u)return 0;var f=this.field.getOne();if(n!=null)try{for(var d=dl(n),h=d.next();!h.done;h=d.next()){var v=h.value,x=this.field.exp(e.length-1-v),g=new ht(this.field,new Int32Array([this.field.subtract(0,x),1]));f=f.multiply(g)}}catch(N){a={error:N}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(a)throw a.error}}for(var w=new ht(this.field,s),y=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),w,t),_=y[0],b=y[1],E=this.findErrorLocations(_),S=this.findErrorMagnitudes(b,_,E),c=0;c<E.length;c++){var O=e.length-1-this.field.log(E[c]);if(O<0)throw he.getChecksumInstance();e[O]=this.field.subtract(e[O],S[c])}return E.length},r.prototype.runEuclideanAlgorithm=function(e,t,n){if(e.getDegree()<t.getDegree()){var a=e;e=t,t=a}for(var i=e,o=t,s=this.field.getZero(),u=this.field.getOne();o.getDegree()>=Math.round(n/2);){var c=i,l=s;if(i=o,s=u,i.isZero())throw he.getChecksumInstance();o=c;for(var f=this.field.getZero(),d=i.getCoefficient(i.getDegree()),h=this.field.inverse(d);o.getDegree()>=i.getDegree()&&!o.isZero();){var v=o.getDegree()-i.getDegree(),x=this.field.multiply(o.getCoefficient(o.getDegree()),h);f=f.add(this.field.buildMonomial(v,x)),o=o.subtract(i.multiplyByMonomial(v,x))}u=f.multiply(s).subtract(l).negative()}var g=u.getCoefficient(0);if(g===0)throw he.getChecksumInstance();var w=this.field.inverse(g),y=u.multiply(w),_=o.multiply(w);return[y,_]},r.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),n=new Int32Array(t),a=0,i=1;i<this.field.getSize()&&a<t;i++)e.evaluateAt(i)===0&&(n[a]=this.field.inverse(i),a++);if(a!==t)throw he.getChecksumInstance();return n},r.prototype.findErrorMagnitudes=function(e,t,n){for(var a=t.getDegree(),i=new Int32Array(a),o=1;o<=a;o++)i[a-o]=this.field.multiply(o,t.getCoefficient(o));for(var s=new ht(this.field,i),u=n.length,c=new Int32Array(u),o=0;o<u;o++){var l=this.field.inverse(n[o]),f=this.field.subtract(0,e.evaluateAt(l)),d=this.field.inverse(s.evaluateAt(l));c[o]=this.field.multiply(f,d)}return c},r})(),rn=(function(){function r(e,t,n,a,i){e instanceof r?this.constructor_2(e):this.constructor_1(e,t,n,a,i)}return r.prototype.constructor_1=function(e,t,n,a,i){var o=t==null||n==null,s=a==null||i==null;if(o&&s)throw new I;o?(t=new k(0,a.getY()),n=new k(0,i.getY())):s&&(a=new k(e.getWidth()-1,t.getY()),i=new k(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=t,this.bottomLeft=n,this.topRight=a,this.bottomRight=i,this.minX=Math.trunc(Math.min(t.getX(),n.getX())),this.maxX=Math.trunc(Math.max(a.getX(),i.getX())),this.minY=Math.trunc(Math.min(t.getY(),a.getY())),this.maxY=Math.trunc(Math.max(n.getY(),i.getY()))},r.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},r.merge=function(e,t){return e==null?t:t==null?e:new r(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},r.prototype.addMissingRows=function(e,t,n){var a=this.topLeft,i=this.bottomLeft,o=this.topRight,s=this.bottomRight;if(e>0){var u=n?this.topLeft:this.topRight,c=Math.trunc(u.getY()-e);c<0&&(c=0);var l=new k(u.getX(),c);n?a=l:o=l}if(t>0){var f=n?this.bottomLeft:this.bottomRight,d=Math.trunc(f.getY()+t);d>=this.image.getHeight()&&(d=this.image.getHeight()-1);var h=new k(f.getX(),d);n?i=h:s=h}return new r(this.image,a,i,o,s)},r.prototype.getMinX=function(){return this.minX},r.prototype.getMaxX=function(){return this.maxX},r.prototype.getMinY=function(){return this.minY},r.prototype.getMaxY=function(){return this.maxY},r.prototype.getTopLeft=function(){return this.topLeft},r.prototype.getTopRight=function(){return this.topRight},r.prototype.getBottomLeft=function(){return this.bottomLeft},r.prototype.getBottomRight=function(){return this.bottomRight},r})(),pl=(function(){function r(e,t,n,a){this.columnCount=e,this.errorCorrectionLevel=a,this.rowCountUpperPart=t,this.rowCountLowerPart=n,this.rowCount=t+n}return r.prototype.getColumnCount=function(){return this.columnCount},r.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},r.prototype.getRowCount=function(){return this.rowCount},r.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},r.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},r})(),wn=(function(){function r(){this.buffer=""}return r.form=function(e,t){var n=-1;function a(o,s,u,c,l,f){if(o==="%%")return"%";if(t[++n]!==void 0){o=c?parseInt(c.substr(1)):void 0;var d=l?parseInt(l.substr(1)):void 0,h;switch(f){case"s":h=t[n];break;case"c":h=t[n][0];break;case"f":h=parseFloat(t[n]).toFixed(o);break;case"p":h=parseFloat(t[n]).toPrecision(o);break;case"e":h=parseFloat(t[n]).toExponential(o);break;case"x":h=parseInt(t[n]).toString(d||16);break;case"d":h=parseFloat(parseInt(t[n],d||10).toPrecision(o)).toFixed(0);break}h=typeof h=="object"?JSON.stringify(h):(+h).toString(d);for(var v=parseInt(u),x=u&&u[0]+""=="0"?"0":" ";h.length<v;)h=s!==void 0?h+x:x+h;return h}}var i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,a)},r.prototype.format=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.buffer+=r.form(e,t)},r.prototype.toString=function(){return this.buffer},r})(),vl=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ei=(function(){function r(e){this.boundingBox=new rn(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return r.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var n=1;n<r.MAX_NEARBY_DISTANCE;n++){var a=this.imageRowToCodewordIndex(e)-n;if(a>=0&&(t=this.codewords[a],t!=null)||(a=this.imageRowToCodewordIndex(e)+n,a<this.codewords.length&&(t=this.codewords[a],t!=null)))return t}return null},r.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},r.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},r.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},r.prototype.getBoundingBox=function(){return this.boundingBox},r.prototype.getCodewords=function(){return this.codewords},r.prototype.toString=function(){var e,t,n=new wn,a=0;try{for(var i=vl(this.codewords),o=i.next();!o.done;o=i.next()){var s=o.value;if(s==null){n.format("%3d:    |   %n",a++);continue}n.format("%3d: %3d|%3d%n",a++,s.getRowNumber(),s.getValue())}}catch(u){e={error:u}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n.toString()},r.MAX_NEARBY_DISTANCE=5,r})(),xl=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gl=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),a,i=[],o;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(t=n.return)&&t.call(n)}finally{if(o)throw o.error}}return i},Lt=(function(){function r(){this.values=new Map}return r.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},r.prototype.getValue=function(){var e,t,n=-1,a=new Array,i=function(f,d){var h={getKey:function(){return f},getValue:function(){return d}};h.getValue()>n?(n=h.getValue(),a=[],a.push(h.getKey())):h.getValue()===n&&a.push(h.getKey())};try{for(var o=xl(this.values.entries()),s=o.next();!s.done;s=o.next()){var u=gl(s.value,2),c=u[0],l=u[1];i(c,l)}}catch(f){e={error:f}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return G.toIntArray(a)},r.prototype.getConfidence=function(e){return this.values.get(e)},r})(),ml=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Pr=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ua=(function(r){ml(e,r);function e(t,n){var a=r.call(this,t)||this;return a._isLeft=n,a}return e.prototype.setRowNumbers=function(){var t,n;try{for(var a=Pr(this.getCodewords()),i=a.next();!i.done;i=a.next()){var o=i.value;o?.setRowNumberAsRowIndicatorColumn()}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,t);for(var a=this.getBoundingBox(),i=this._isLeft?a.getTopLeft():a.getTopRight(),o=this._isLeft?a.getBottomLeft():a.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),u=this.imageRowToCodewordIndex(Math.trunc(o.getY())),c=-1,l=1,f=0,d=s;d<u;d++)if(n[d]!=null){var h=n[d],v=h.getRowNumber()-c;if(v===0)f++;else if(v===1)l=Math.max(l,f),f=1,c=h.getRowNumber();else if(v<0||h.getRowNumber()>=t.getRowCount()||v>d)n[d]=null;else{var x=void 0;l>2?x=(l-2)*v:x=v;for(var g=x>=d,w=1;w<=x&&!g;w++)g=n[d-w]!=null;g?n[d]=null:(c=h.getRowNumber(),f=1)}}},e.prototype.getRowHeights=function(){var t,n,a=this.getBarcodeMetadata();if(a==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(a);var i=new Int32Array(a.getRowCount());try{for(var o=Pr(this.getCodewords()),s=o.next();!s.done;s=o.next()){var u=s.value;if(u!=null){var c=u.getRowNumber();if(c>=i.length)continue;i[c]++}}}catch(l){t={error:l}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var n=this.getBoundingBox(),a=this._isLeft?n.getTopLeft():n.getTopRight(),i=this._isLeft?n.getBottomLeft():n.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(a.getY())),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),u=this.getCodewords(),c=-1,l=o;l<s;l++)if(u[l]!=null){var f=u[l];f.setRowNumberAsRowIndicatorColumn();var d=f.getRowNumber()-c;d===0||(d===1?c=f.getRowNumber():f.getRowNumber()>=t.getRowCount()?u[l]=null:c=f.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,n,a=this.getCodewords(),i=new Lt,o=new Lt,s=new Lt,u=new Lt;try{for(var c=Pr(a),l=c.next();!l.done;l=c.next()){var f=l.value;if(f!=null){f.setRowNumberAsRowIndicatorColumn();var d=f.getValue()%30,h=f.getRowNumber();switch(this._isLeft||(h+=2),h%3){case 0:o.setValue(d*3+1);break;case 1:u.setValue(d/3),s.setValue(d%3);break;case 2:i.setValue(d+1);break}}}}catch(x){t={error:x}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}if(i.getValue().length===0||o.getValue().length===0||s.getValue().length===0||u.getValue().length===0||i.getValue()[0]<1||o.getValue()[0]+s.getValue()[0]<G.MIN_ROWS_IN_BARCODE||o.getValue()[0]+s.getValue()[0]>G.MAX_ROWS_IN_BARCODE)return null;var v=new pl(i.getValue()[0],o.getValue()[0],s.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(a,v),v},e.prototype.removeIncorrectCodewords=function(t,n){for(var a=0;a<t.length;a++){var i=t[a];if(t[a]!=null){var o=i.getValue()%30,s=i.getRowNumber();if(s>n.getRowCount()){t[a]=null;continue}switch(this._isLeft||(s+=2),s%3){case 0:o*3+1!==n.getRowCountUpperPart()&&(t[a]=null);break;case 1:(Math.trunc(o/3)!==n.getErrorCorrectionLevel()||o%3!==n.getRowCountLowerPart())&&(t[a]=null);break;case 2:o+1!==n.getColumnCount()&&(t[a]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+r.prototype.toString.call(this)},e})(Ei),yl=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wl=(function(){function r(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return r.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=G.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},r.prototype.adjustIndicatorColumnRowNumbers=function(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},r.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var n=this.detectionResultColumns[t].getCodewords(),a=0;a<n.length;a++)n[a]!=null&&(n[a].hasValidRowNumber()||this.adjustRowNumbers(t,a,n));return e},r.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},r.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(e[n]!=null&&t[n]!=null&&e[n].getRowNumber()===t[n].getRowNumber())for(var a=1;a<=this.barcodeColumnCount;a++){var i=this.detectionResultColumns[a].getCodewords()[n];i!=null&&(i.setRowNumber(e[n].getRowNumber()),i.hasValidRowNumber()||(this.detectionResultColumns[a].getCodewords()[n]=null))}}},r.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<t.length;n++)if(t[n]!=null)for(var a=t[n].getRowNumber(),i=0,o=this.barcodeColumnCount+1;o>0&&i<this.ADJUST_ROW_NUMBER_SKIP;o--){var s=this.detectionResultColumns[o].getCodewords()[n];s!=null&&(i=r.adjustRowNumberIfValid(a,i,s),s.hasValidRowNumber()||e++)}return e},r.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),n=0;n<t.length;n++)if(t[n]!=null)for(var a=t[n].getRowNumber(),i=0,o=1;o<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;o++){var s=this.detectionResultColumns[o].getCodewords()[n];s!=null&&(i=r.adjustRowNumberIfValid(a,i,s),s.hasValidRowNumber()||e++)}return e},r.adjustRowNumberIfValid=function(e,t,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),t=0):++t),t},r.prototype.adjustRowNumbers=function(e,t,n){var a,i;if(this.detectionResultColumns[e-1]!=null){var o=n[t],s=this.detectionResultColumns[e-1].getCodewords(),u=s;this.detectionResultColumns[e+1]!=null&&(u=this.detectionResultColumns[e+1].getCodewords());var c=new Array(14);c[2]=s[t],c[3]=u[t],t>0&&(c[0]=n[t-1],c[4]=s[t-1],c[5]=u[t-1]),t>1&&(c[8]=n[t-2],c[10]=s[t-2],c[11]=u[t-2]),t<n.length-1&&(c[1]=n[t+1],c[6]=s[t+1],c[7]=u[t+1]),t<n.length-2&&(c[9]=n[t+2],c[12]=s[t+2],c[13]=u[t+2]);try{for(var l=yl(c),f=l.next();!f.done;f=l.next()){var d=f.value;if(r.adjustRowNumber(o,d))return}}catch(h){a={error:h}}finally{try{f&&!f.done&&(i=l.return)&&i.call(l)}finally{if(a)throw a.error}}}},r.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},r.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},r.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},r.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},r.prototype.setBoundingBox=function(e){this.boundingBox=e},r.prototype.getBoundingBox=function(){return this.boundingBox},r.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},r.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},r.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new wn,n=0;n<e.getCodewords().length;n++){t.format("CW %3d:",n);for(var a=0;a<this.barcodeColumnCount+2;a++){if(this.detectionResultColumns[a]==null){t.format("    |   ");continue}var i=this.detectionResultColumns[a].getCodewords()[n];if(i==null){t.format("    |   ");continue}t.format(" %3d|%3d",i.getRowNumber(),i.getValue())}t.format("%n")}return t.toString()},r})(),_l=(function(){function r(e,t,n,a){this.rowNumber=r.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(n),this.value=Math.trunc(a)}return r.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},r.prototype.isValidRowNumber=function(e){return e!==r.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},r.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},r.prototype.getWidth=function(){return this.endX-this.startX},r.prototype.getStartX=function(){return this.startX},r.prototype.getEndX=function(){return this.endX},r.prototype.getBucket=function(){return this.bucket},r.prototype.getValue=function(){return this.value},r.prototype.getRowNumber=function(){return this.rowNumber},r.prototype.setRowNumber=function(e){this.rowNumber=e},r.prototype.toString=function(){return this.rowNumber+"|"+this.value},r.BARCODE_ROW_UNKNOWN=-1,r})(),Al=(function(){function r(){}return r.initialize=function(){for(var e=0;e<G.SYMBOL_TABLE.length;e++)for(var t=G.SYMBOL_TABLE[e],n=t&1,a=0;a<G.BARS_IN_MODULE;a++){for(var i=0;(t&1)===n;)i+=1,t>>=1;n=t&1,r.RATIOS_TABLE[e]||(r.RATIOS_TABLE[e]=new Array(G.BARS_IN_MODULE)),r.RATIOS_TABLE[e][G.BARS_IN_MODULE-a-1]=Math.fround(i/G.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},r.getDecodedValue=function(e){var t=r.getDecodedCodewordValue(r.sampleBitCounts(e));return t!==-1?t:r.getClosestDecodedValue(e)},r.sampleBitCounts=function(e){for(var t=W.sum(e),n=new Int32Array(G.BARS_IN_MODULE),a=0,i=0,o=0;o<G.MODULES_IN_CODEWORD;o++){var s=t/(2*G.MODULES_IN_CODEWORD)+o*t/G.MODULES_IN_CODEWORD;i+e[a]<=s&&(i+=e[a],a++),n[a]++}return n},r.getDecodedCodewordValue=function(e){var t=r.getBitValue(e);return G.getCodeword(t)===-1?-1:t},r.getBitValue=function(e){for(var t=0,n=0;n<e.length;n++)for(var a=0;a<e[n];a++)t=t<<1|(n%2===0?1:0);return Math.trunc(t)},r.getClosestDecodedValue=function(e){var t=W.sum(e),n=new Array(G.BARS_IN_MODULE);if(t>1)for(var a=0;a<n.length;a++)n[a]=Math.fround(e[a]/t);var i=Qr.MAX_VALUE,o=-1;this.bSymbolTableReady||r.initialize();for(var s=0;s<r.RATIOS_TABLE.length;s++){for(var u=0,c=r.RATIOS_TABLE[s],l=0;l<G.BARS_IN_MODULE;l++){var f=Math.fround(c[l]-n[l]);if(u+=Math.fround(f*f),u>=i)break}u<i&&(i=u,o=G.SYMBOL_TABLE[s])}return o},r.bSymbolTableReady=!1,r.RATIOS_TABLE=new Array(G.SYMBOL_TABLE.length).map(function(e){return new Array(G.BARS_IN_MODULE)}),r})(),bl=(function(){function r(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return r.prototype.getSegmentIndex=function(){return this.segmentIndex},r.prototype.setSegmentIndex=function(e){this.segmentIndex=e},r.prototype.getFileId=function(){return this.fileId},r.prototype.setFileId=function(e){this.fileId=e},r.prototype.getOptionalData=function(){return this.optionalData},r.prototype.setOptionalData=function(e){this.optionalData=e},r.prototype.isLastSegment=function(){return this.lastSegment},r.prototype.setLastSegment=function(e){this.lastSegment=e},r.prototype.getSegmentCount=function(){return this.segmentCount},r.prototype.setSegmentCount=function(e){this.segmentCount=e},r.prototype.getSender=function(){return this.sender||null},r.prototype.setSender=function(e){this.sender=e},r.prototype.getAddressee=function(){return this.addressee||null},r.prototype.setAddressee=function(e){this.addressee=e},r.prototype.getFileName=function(){return this.fileName},r.prototype.setFileName=function(e){this.fileName=e},r.prototype.getFileSize=function(){return this.fileSize},r.prototype.setFileSize=function(e){this.fileSize=e},r.prototype.getChecksum=function(){return this.checksum},r.prototype.setChecksum=function(e){this.checksum=e},r.prototype.getTimestamp=function(){return this.timestamp},r.prototype.setTimestamp=function(e){this.timestamp=e},r})(),ca=(function(){function r(){}return r.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},r})(),El=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Cl=(function(r){El(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="NullPointerException",e})(Fe),Sl=(function(){function r(){}return r.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},r.prototype.writeBytesOffset=function(e,t,n){if(e==null)throw new Cl;if(t<0||t>e.length||n<0||t+n>e.length||t+n<0)throw new xn;if(n===0)return;for(var a=0;a<n;a++)this.write(e[t+a])},r.prototype.flush=function(){},r.prototype.close=function(){},r})(),Il=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Ol=(function(r){Il(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e})(Fe),Nl=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Tl=(function(r){Nl(e,r);function e(t){t===void 0&&(t=32);var n=r.call(this)||this;if(n.count=0,t<0)throw new M("Negative initial size: "+t);return n.buf=new Uint8Array(t),n}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var n=this.buf.length,a=n<<1;if(a-t<0&&(a=t),a<0){if(t<0)throw new Ol;a=U.MAX_VALUE}this.buf=ye.copyOfUint8Array(this.buf,a)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,n,a){if(n<0||n>t.length||a<0||n+a-t.length>0)throw new xn;this.ensureCapacity(this.count+a),te.arraycopy(t,n,this.buf,this.count,a),this.count+=a},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return ye.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e})(Sl),J;(function(r){r[r.ALPHA=0]="ALPHA",r[r.LOWER=1]="LOWER",r[r.MIXED=2]="MIXED",r[r.PUNCT=3]="PUNCT",r[r.ALPHA_SHIFT=4]="ALPHA_SHIFT",r[r.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(J||(J={}));function Ci(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var Qt;function ot(r){if(typeof Qt>"u"&&(Qt=Ci()),Qt===null)throw new Error("BigInt is not supported!");return Qt(r)}function Rl(){var r=[];r[0]=ot(1);var e=ot(900);r[1]=e;for(var t=2;t<16;t++)r[t]=r[t-1]*e;return r}var Dl=(function(){function r(){}return r.decode=function(e,t){var n=new F(""),a=me.ISO8859_1;n.enableDecoding(a);for(var i=1,o=e[i++],s=new bl;i<e[0];){switch(o){case r.TEXT_COMPACTION_MODE_LATCH:i=r.textCompaction(e,i,n);break;case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:i=r.byteCompaction(o,e,a,i,n);break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[i++]);break;case r.NUMERIC_COMPACTION_MODE_LATCH:i=r.numericCompaction(e,i,n);break;case r.ECI_CHARSET:me.getCharacterSetECIByValue(e[i++]);break;case r.ECI_GENERAL_PURPOSE:i+=2;break;case r.ECI_USER_DEFINED:i++;break;case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=r.decodeMacroBlock(e,i,s);break;case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:throw new R;default:i--,i=r.textCompaction(e,i,n);break}if(i<e.length)o=e[i++];else throw R.getFormatInstance()}if(n.length()===0)throw R.getFormatInstance();var u=new yr(null,n.toString(),null,t);return u.setOther(s),u},r.decodeMacroBlock=function(e,t,n){if(t+r.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw R.getFormatInstance();for(var a=new Int32Array(r.NUMBER_OF_SEQUENCE_CODEWORDS),i=0;i<r.NUMBER_OF_SEQUENCE_CODEWORDS;i++,t++)a[i]=e[t];n.setSegmentIndex(U.parseInt(r.decodeBase900toBase10(a,r.NUMBER_OF_SEQUENCE_CODEWORDS)));var o=new F;t=r.textCompaction(e,t,o),n.setFileId(o.toString());var s=-1;for(e[t]===r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=t+1);t<e[0];)switch(e[t]){case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case r.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var u=new F;t=r.textCompaction(e,t+1,u),n.setFileName(u.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var c=new F;t=r.textCompaction(e,t+1,c),n.setSender(c.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var l=new F;t=r.textCompaction(e,t+1,l),n.setAddressee(l.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var f=new F;t=r.numericCompaction(e,t+1,f),n.setSegmentCount(U.parseInt(f.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var d=new F;t=r.numericCompaction(e,t+1,d),n.setTimestamp(ca.parseLong(d.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var h=new F;t=r.numericCompaction(e,t+1,h),n.setChecksum(U.parseInt(h.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var v=new F;t=r.numericCompaction(e,t+1,v),n.setFileSize(ca.parseLong(v.toString()));break;default:throw R.getFormatInstance()}break;case r.MACRO_PDF417_TERMINATOR:t++,n.setLastSegment(!0);break;default:throw R.getFormatInstance()}if(s!==-1){var x=t-s;n.isLastSegment()&&x--,n.setOptionalData(ye.copyOfRange(e,s,s+x))}return t},r.textCompaction=function(e,t,n){for(var a=new Int32Array((e[0]-t)*2),i=new Int32Array((e[0]-t)*2),o=0,s=!1;t<e[0]&&!s;){var u=e[t++];if(u<r.TEXT_COMPACTION_MODE_LATCH)a[o]=u/30,a[o+1]=u%30,o+=2;else switch(u){case r.TEXT_COMPACTION_MODE_LATCH:a[o++]=r.TEXT_COMPACTION_MODE_LATCH;break;case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:t--,s=!0;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a[o]=r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,u=e[t++],i[o]=u,o++;break}}return r.decodeTextCompaction(a,i,o,n),t},r.decodeTextCompaction=function(e,t,n,a){for(var i=J.ALPHA,o=J.ALPHA,s=0;s<n;){var u=e[s],c="";switch(i){case J.ALPHA:if(u<26)c=String.fromCharCode(65+u);else switch(u){case 26:c=" ";break;case r.LL:i=J.LOWER;break;case r.ML:i=J.MIXED;break;case r.PS:o=i,i=J.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(t[s]);break;case r.TEXT_COMPACTION_MODE_LATCH:i=J.ALPHA;break}break;case J.LOWER:if(u<26)c=String.fromCharCode(97+u);else switch(u){case 26:c=" ";break;case r.AS:o=i,i=J.ALPHA_SHIFT;break;case r.ML:i=J.MIXED;break;case r.PS:o=i,i=J.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(t[s]);break;case r.TEXT_COMPACTION_MODE_LATCH:i=J.ALPHA;break}break;case J.MIXED:if(u<r.PL)c=r.MIXED_CHARS[u];else switch(u){case r.PL:i=J.PUNCT;break;case 26:c=" ";break;case r.LL:i=J.LOWER;break;case r.AL:i=J.ALPHA;break;case r.PS:o=i,i=J.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(t[s]);break;case r.TEXT_COMPACTION_MODE_LATCH:i=J.ALPHA;break}break;case J.PUNCT:if(u<r.PAL)c=r.PUNCT_CHARS[u];else switch(u){case r.PAL:i=J.ALPHA;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(t[s]);break;case r.TEXT_COMPACTION_MODE_LATCH:i=J.ALPHA;break}break;case J.ALPHA_SHIFT:if(i=o,u<26)c=String.fromCharCode(65+u);else switch(u){case 26:c=" ";break;case r.TEXT_COMPACTION_MODE_LATCH:i=J.ALPHA;break}break;case J.PUNCT_SHIFT:if(i=o,u<r.PAL)c=r.PUNCT_CHARS[u];else switch(u){case r.PAL:i=J.ALPHA;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(t[s]);break;case r.TEXT_COMPACTION_MODE_LATCH:i=J.ALPHA;break}break}c!==""&&a.append(c),s++}},r.byteCompaction=function(e,t,n,a,i){var o=new Tl,s=0,u=0,c=!1;switch(e){case r.BYTE_COMPACTION_MODE_LATCH:for(var l=new Int32Array(6),f=t[a++];a<t[0]&&!c;)switch(l[s++]=f,u=900*u+f,f=t[a++],f){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:a--,c=!0;break;default:if(s%5===0&&s>0){for(var d=0;d<6;++d)o.write(Number(ot(u)>>ot(8*(5-d))));u=0,s=0}break}a===t[0]&&f<r.TEXT_COMPACTION_MODE_LATCH&&(l[s++]=f);for(var h=0;h<s;h++)o.write(l[h]);break;case r.BYTE_COMPACTION_MODE_LATCH_6:for(;a<t[0]&&!c;){var v=t[a++];if(v<r.TEXT_COMPACTION_MODE_LATCH)s++,u=900*u+v;else switch(v){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:a--,c=!0;break}if(s%5===0&&s>0){for(var d=0;d<6;++d)o.write(Number(ot(u)>>ot(8*(5-d))));u=0,s=0}}break}return i.append(We.decode(o.toByteArray(),n)),a},r.numericCompaction=function(e,t,n){for(var a=0,i=!1,o=new Int32Array(r.MAX_NUMERIC_CODEWORDS);t<e[0]&&!i;){var s=e[t++];if(t===e[0]&&(i=!0),s<r.TEXT_COMPACTION_MODE_LATCH)o[a]=s,a++;else switch(s){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:t--,i=!0;break}(a%r.MAX_NUMERIC_CODEWORDS===0||s===r.NUMERIC_COMPACTION_MODE_LATCH||i)&&a>0&&(n.append(r.decodeBase900toBase10(o,a)),a=0)}return t},r.decodeBase900toBase10=function(e,t){for(var n=ot(0),a=0;a<t;a++)n+=r.EXP900[t-a-1]*ot(e[a]);var i=n.toString();if(i.charAt(0)!=="1")throw new R;return i.substring(1)},r.TEXT_COMPACTION_MODE_LATCH=900,r.BYTE_COMPACTION_MODE_LATCH=901,r.NUMERIC_COMPACTION_MODE_LATCH=902,r.BYTE_COMPACTION_MODE_LATCH_6=924,r.ECI_USER_DEFINED=925,r.ECI_GENERAL_PURPOSE=926,r.ECI_CHARSET=927,r.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,r.MACRO_PDF417_TERMINATOR=922,r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,r.MAX_NUMERIC_CODEWORDS=15,r.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,r.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,r.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,r.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,r.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,r.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,r.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,r.PL=25,r.LL=27,r.AS=27,r.ML=28,r.AL=28,r.PS=29,r.PAL=29,r.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,r.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",r.EXP900=Ci()?Rl():[],r.NUMBER_OF_SEQUENCE_CODEWORDS=2,r})(),Pt=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Pl=(function(){function r(){}return r.decode=function(e,t,n,a,i,o,s){for(var u=new rn(e,t,n,a,i),c=null,l=null,f,d=!0;;d=!1){if(t!=null&&(c=r.getRowIndicatorColumn(e,u,t,!0,o,s)),a!=null&&(l=r.getRowIndicatorColumn(e,u,a,!1,o,s)),f=r.merge(c,l),f==null)throw I.getNotFoundInstance();var h=f.getBoundingBox();if(d&&h!=null&&(h.getMinY()<u.getMinY()||h.getMaxY()>u.getMaxY()))u=h;else break}f.setBoundingBox(u);var v=f.getBarcodeColumnCount()+1;f.setDetectionResultColumn(0,c),f.setDetectionResultColumn(v,l);for(var x=c!=null,g=1;g<=v;g++){var w=x?g:v-g;if(f.getDetectionResultColumn(w)===void 0){var y=void 0;w===0||w===v?y=new ua(u,w===0):y=new Ei(u),f.setDetectionResultColumn(w,y);for(var _=-1,b=_,E=u.getMinY();E<=u.getMaxY();E++){if(_=r.getStartColumn(f,w,E,x),_<0||_>u.getMaxX()){if(b===-1)continue;_=b}var S=r.detectCodeword(e,u.getMinX(),u.getMaxX(),x,_,E,o,s);S!=null&&(y.setCodeword(E,S),b=_,o=Math.min(o,S.getWidth()),s=Math.max(s,S.getWidth()))}}}return r.createDecoderResult(f)},r.merge=function(e,t){if(e==null&&t==null)return null;var n=r.getBarcodeMetadata(e,t);if(n==null)return null;var a=rn.merge(r.adjustBoundingBox(e),r.adjustBoundingBox(t));return new wl(n,a)},r.adjustBoundingBox=function(e){var t,n;if(e==null)return null;var a=e.getRowHeights();if(a==null)return null;var i=r.getMax(a),o=0;try{for(var s=Pt(a),u=s.next();!u.done;u=s.next()){var c=u.value;if(o+=i-c,c>0)break}}catch(h){t={error:h}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}for(var l=e.getCodewords(),f=0;o>0&&l[f]==null;f++)o--;for(var d=0,f=a.length-1;f>=0&&(d+=i-a[f],!(a[f]>0));f--);for(var f=l.length-1;d>0&&l[f]==null;f--)d--;return e.getBoundingBox().addMissingRows(o,d,e.isLeft())},r.getMax=function(e){var t,n,a=-1;try{for(var i=Pt(e),o=i.next();!o.done;o=i.next()){var s=o.value;a=Math.max(a,s)}}catch(u){t={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return a},r.getBarcodeMetadata=function(e,t){var n;if(e==null||(n=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var a;return t==null||(a=t.getBarcodeMetadata())==null?n:n.getColumnCount()!==a.getColumnCount()&&n.getErrorCorrectionLevel()!==a.getErrorCorrectionLevel()&&n.getRowCount()!==a.getRowCount()?null:n},r.getRowIndicatorColumn=function(e,t,n,a,i,o){for(var s=new ua(t,a),u=0;u<2;u++)for(var c=u===0?1:-1,l=Math.trunc(Math.trunc(n.getX())),f=Math.trunc(Math.trunc(n.getY()));f<=t.getMaxY()&&f>=t.getMinY();f+=c){var d=r.detectCodeword(e,0,e.getWidth(),a,l,f,i,o);d!=null&&(s.setCodeword(f,d),a?l=d.getStartX():l=d.getEndX())}return s},r.adjustCodewordCount=function(e,t){var n=t[0][1],a=n.getValue(),i=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-r.getNumberOfECCodeWords(e.getBarcodeECLevel());if(a.length===0){if(i<1||i>G.MAX_CODEWORDS_IN_BARCODE)throw I.getNotFoundInstance();n.setValue(i)}else a[0]!==i&&n.setValue(i)},r.createDecoderResult=function(e){var t=r.createBarcodeMatrix(e);r.adjustCodewordCount(e,t);for(var n=new Array,a=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),i=[],o=new Array,s=0;s<e.getBarcodeRowCount();s++)for(var u=0;u<e.getBarcodeColumnCount();u++){var c=t[s][u+1].getValue(),l=s*e.getBarcodeColumnCount()+u;c.length===0?n.push(l):c.length===1?a[l]=c[0]:(o.push(l),i.push(c))}for(var f=new Array(i.length),d=0;d<f.length;d++)f[d]=i[d];return r.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),a,G.toIntArray(n),G.toIntArray(o),f)},r.createDecoderResultFromAmbiguousValues=function(e,t,n,a,i){for(var o=new Int32Array(a.length),s=100;s-- >0;){for(var u=0;u<o.length;u++)t[a[u]]=i[u][o[u]];try{return r.decodeCodewords(t,e,n)}catch(l){var c=l instanceof he;if(!c)throw l}if(o.length===0)throw he.getChecksumInstance();for(var u=0;u<o.length;u++)if(o[u]<i[u].length-1){o[u]++;break}else if(o[u]=0,u===o.length-1)throw he.getChecksumInstance()}throw he.getChecksumInstance()},r.createBarcodeMatrix=function(e){for(var t,n,a,i,o=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),s=0;s<o.length;s++)for(var u=0;u<o[s].length;u++)o[s][u]=new Lt;var c=0;try{for(var l=Pt(e.getDetectionResultColumns()),f=l.next();!f.done;f=l.next()){var d=f.value;if(d!=null)try{for(var h=(a=void 0,Pt(d.getCodewords())),v=h.next();!v.done;v=h.next()){var x=v.value;if(x!=null){var g=x.getRowNumber();if(g>=0){if(g>=o.length)continue;o[g][c].setValue(x.getValue())}}}}catch(w){a={error:w}}finally{try{v&&!v.done&&(i=h.return)&&i.call(h)}finally{if(a)throw a.error}}c++}}catch(w){t={error:w}}finally{try{f&&!f.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}return o},r.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},r.getStartColumn=function(e,t,n,a){var i,o,s=a?1:-1,u=null;if(r.isValidBarcodeColumn(e,t-s)&&(u=e.getDetectionResultColumn(t-s).getCodeword(n)),u!=null)return a?u.getEndX():u.getStartX();if(u=e.getDetectionResultColumn(t).getCodewordNearby(n),u!=null)return a?u.getStartX():u.getEndX();if(r.isValidBarcodeColumn(e,t-s)&&(u=e.getDetectionResultColumn(t-s).getCodewordNearby(n)),u!=null)return a?u.getEndX():u.getStartX();for(var c=0;r.isValidBarcodeColumn(e,t-s);){t-=s;try{for(var l=(i=void 0,Pt(e.getDetectionResultColumn(t).getCodewords())),f=l.next();!f.done;f=l.next()){var d=f.value;if(d!=null)return(a?d.getEndX():d.getStartX())+s*c*(d.getEndX()-d.getStartX())}}catch(h){i={error:h}}finally{try{f&&!f.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}c++}return a?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},r.detectCodeword=function(e,t,n,a,i,o,s,u){i=r.adjustCodewordStartColumn(e,t,n,a,i,o);var c=r.getModuleBitCount(e,t,n,a,i,o);if(c==null)return null;var l,f=W.sum(c);if(a)l=i+f;else{for(var d=0;d<c.length/2;d++){var h=c[d];c[d]=c[c.length-1-d],c[c.length-1-d]=h}l=i,i=l-f}if(!r.checkCodewordSkew(f,s,u))return null;var v=Al.getDecodedValue(c),x=G.getCodeword(v);return x===-1?null:new _l(i,l,r.getCodewordBucketNumber(v),x)},r.getModuleBitCount=function(e,t,n,a,i,o){for(var s=i,u=new Int32Array(8),c=0,l=a?1:-1,f=a;(a?s<n:s>=t)&&c<u.length;)e.get(s,o)===f?(u[c]++,s+=l):(c++,f=!f);return c===u.length||s===(a?n:t)&&c===u.length-1?u:null},r.getNumberOfECCodeWords=function(e){return 2<<e},r.adjustCodewordStartColumn=function(e,t,n,a,i,o){for(var s=i,u=a?-1:1,c=0;c<2;c++){for(;(a?s>=t:s<n)&&a===e.get(s,o);){if(Math.abs(i-s)>r.CODEWORD_SKEW_SIZE)return i;s+=u}u=-u,a=!a}return s},r.checkCodewordSkew=function(e,t,n){return t-r.CODEWORD_SKEW_SIZE<=e&&e<=n+r.CODEWORD_SKEW_SIZE},r.decodeCodewords=function(e,t,n){if(e.length===0)throw R.getFormatInstance();var a=1<<t+1,i=r.correctErrors(e,n,a);r.verifyCodewordCount(e,a);var o=Dl.decode(e,""+t);return o.setErrorsCorrected(i),o.setErasures(n.length),o},r.correctErrors=function(e,t,n){if(t!=null&&t.length>n/2+r.MAX_ERRORS||n<0||n>r.MAX_EC_CODEWORDS)throw he.getChecksumInstance();return r.errorCorrection.decode(e,n,t)},r.verifyCodewordCount=function(e,t){if(e.length<4)throw R.getFormatInstance();var n=e[0];if(n>e.length)throw R.getFormatInstance();if(n===0)if(t<e.length)e[0]=e.length-t;else throw R.getFormatInstance()},r.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),n=0,a=t.length-1;!((e&1)!==n&&(n=e&1,a--,a<0));)t[a]++,e>>=1;return t},r.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},r.getCodewordBucketNumber_number=function(e){return r.getCodewordBucketNumber(r.getBitCountForCodeword(e))},r.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},r.toString=function(e){for(var t=new wn,n=0;n<e.length;n++){t.format("Row %2d: ",n);for(var a=0;a<e[n].length;a++){var i=e[n][a];i.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",i.getValue()[0],i.getConfidence(i.getValue()[0]))}t.format("%n")}return t.toString()},r.CODEWORD_SKEW_SIZE=2,r.MAX_ERRORS=3,r.MAX_EC_CODEWORDS=512,r.errorCorrection=new hl,r})(),kl=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hr=(function(){function r(){}return r.prototype.decode=function(e,t){t===void 0&&(t=null);var n=r.decode(e,t,!1);if(n==null||n.length===0||n[0]==null)throw I.getNotFoundInstance();return n[0]},r.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return r.decode(e,t,!0)}catch(n){throw n instanceof R||n instanceof he?I.getNotFoundInstance():n}},r.decode=function(e,t,n){var a,i,o=new Array,s=sl.detectMultiple(e,t,n);try{for(var u=kl(s.getPoints()),c=u.next();!c.done;c=u.next()){var l=c.value,f=Pl.decode(s.getBits(),l[4],l[5],l[6],l[7],r.getMinCodewordWidth(l),r.getMaxCodewordWidth(l)),d=new Te(f.getText(),f.getRawBytes(),void 0,l,P.PDF_417);d.putMetadata(Ie.ERROR_CORRECTION_LEVEL,f.getECLevel());var h=f.getOther();h!=null&&d.putMetadata(Ie.PDF417_EXTRA_METADATA,h),o.push(d)}}catch(v){a={error:v}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(a)throw a.error}}return o.map(function(v){return v})},r.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},r.getMinWidth=function(e,t){return e==null||t==null?U.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},r.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(r.getMaxWidth(e[0],e[4]),r.getMaxWidth(e[6],e[2])*G.MODULES_IN_CODEWORD/G.MODULES_IN_STOP_PATTERN),Math.max(r.getMaxWidth(e[1],e[5]),r.getMaxWidth(e[7],e[3])*G.MODULES_IN_CODEWORD/G.MODULES_IN_STOP_PATTERN)))},r.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(r.getMinWidth(e[0],e[4]),r.getMinWidth(e[6],e[2])*G.MODULES_IN_CODEWORD/G.MODULES_IN_STOP_PATTERN),Math.min(r.getMinWidth(e[1],e[5]),r.getMinWidth(e[7],e[3])*G.MODULES_IN_CODEWORD/G.MODULES_IN_STOP_PATTERN)))},r.prototype.reset=function(){},r})(),Ml=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),la=(function(r){Ml(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ReaderException",e})(Fe),fa=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Si=(function(){function r(){}return r.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},r.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},r.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(Q.TRY_HARDER)!==void 0,n=e==null?null:e.get(Q.POSSIBLE_FORMATS),a=new Array;if(n!=null){var i=n.some(function(o){return o===P.UPC_A||o===P.UPC_E||o===P.EAN_13||o===P.EAN_8||o===P.CODABAR||o===P.CODE_39||o===P.CODE_93||o===P.CODE_128||o===P.ITF||o===P.RSS_14||o===P.RSS_EXPANDED});i&&!t&&a.push(new wt(e)),n.includes(P.QR_CODE)&&a.push(new dr),n.includes(P.DATA_MATRIX)&&a.push(new fr),n.includes(P.AZTEC)&&a.push(new cr),n.includes(P.PDF_417)&&a.push(new hr),i&&t&&a.push(new wt(e))}a.length===0&&(t||a.push(new wt(e)),a.push(new dr),a.push(new fr),a.push(new cr),a.push(new hr),t&&a.push(new wt(e))),this.readers=a},r.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var n=fa(this.readers),a=n.next();!a.done;a=n.next()){var i=a.value;i.reset()}}catch(o){e={error:o}}finally{try{a&&!a.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},r.prototype.decodeInternal=function(e){var t,n;if(this.readers===null)throw new la("No readers where selected, nothing can be read.");try{for(var a=fa(this.readers),i=a.next();!i.done;i=a.next()){var o=i.value;try{return o.decode(e,this.hints)}catch(s){if(s instanceof la)continue}}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}throw new I("No MultiFormat Readers were able to detect the code.")},r})(),Bl=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){Bl(e,r);function e(t,n){t===void 0&&(t=null),n===void 0&&(n=500);var a=this,i=new Si;return i.setHints(t),a=r.call(this,i,n)||this,a}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e})(It);var Ll=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){Ll(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new hr,t)||this}return e})(It);var Fl=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){Fl(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new dr,t)||this}return e})(It);var nn;(function(r){r[r.ERROR_CORRECTION=0]="ERROR_CORRECTION",r[r.CHARACTER_SET=1]="CHARACTER_SET",r[r.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",r[r.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",r[r.MIN_SIZE=4]="MIN_SIZE",r[r.MAX_SIZE=5]="MAX_SIZE",r[r.MARGIN=6]="MARGIN",r[r.PDF417_COMPACT=7]="PDF417_COMPACT",r[r.PDF417_COMPACTION=8]="PDF417_COMPACTION",r[r.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",r[r.AZTEC_LAYERS=10]="AZTEC_LAYERS",r[r.QR_VERSION=11]="QR_VERSION",r[r.GS1_FORMAT=12]="GS1_FORMAT",r[r.FORCE_C40=13]="FORCE_C40"})(nn||(nn={}));const er=nn;var Ii=(function(){function r(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new st(e,Int32Array.from([1])))}return r.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var n=t[t.length-1],a=this.field,i=t.length;i<=e;i++){var o=n.multiply(new st(a,Int32Array.from([1,a.exp(i-1+a.getGeneratorBase())])));t.push(o),n=o}return t[e]},r.prototype.encode=function(e,t){if(t===0)throw new M("No error correction bytes");var n=e.length-t;if(n<=0)throw new M("No data bytes provided");var a=this.buildGenerator(t),i=new Int32Array(n);te.arraycopy(e,0,i,0,n);var o=new st(this.field,i);o=o.multiplyByMonomial(t,1);for(var s=o.divide(a)[1],u=s.getCoefficients(),c=t-u.length,l=0;l<c;l++)e[n+l]=0;te.arraycopy(u,0,e,n+c,u.length)},r})(),Ft=(function(){function r(){}return r.applyMaskPenaltyRule1=function(e){return r.applyMaskPenaltyRule1Internal(e,!0)+r.applyMaskPenaltyRule1Internal(e,!1)},r.applyMaskPenaltyRule2=function(e){for(var t=0,n=e.getArray(),a=e.getWidth(),i=e.getHeight(),o=0;o<i-1;o++)for(var s=n[o],u=0;u<a-1;u++){var c=s[u];c===s[u+1]&&c===n[o+1][u]&&c===n[o+1][u+1]&&t++}return r.N2*t},r.applyMaskPenaltyRule3=function(e){for(var t=0,n=e.getArray(),a=e.getWidth(),i=e.getHeight(),o=0;o<i;o++)for(var s=0;s<a;s++){var u=n[o];s+6<a&&u[s]===1&&u[s+1]===0&&u[s+2]===1&&u[s+3]===1&&u[s+4]===1&&u[s+5]===0&&u[s+6]===1&&(r.isWhiteHorizontal(u,s-4,s)||r.isWhiteHorizontal(u,s+7,s+11))&&t++,o+6<i&&n[o][s]===1&&n[o+1][s]===0&&n[o+2][s]===1&&n[o+3][s]===1&&n[o+4][s]===1&&n[o+5][s]===0&&n[o+6][s]===1&&(r.isWhiteVertical(n,s,o-4,o)||r.isWhiteVertical(n,s,o+7,o+11))&&t++}return t*r.N3},r.isWhiteHorizontal=function(e,t,n){t=Math.max(t,0),n=Math.min(n,e.length);for(var a=t;a<n;a++)if(e[a]===1)return!1;return!0},r.isWhiteVertical=function(e,t,n,a){n=Math.max(n,0),a=Math.min(a,e.length);for(var i=n;i<a;i++)if(e[i][t]===1)return!1;return!0},r.applyMaskPenaltyRule4=function(e){for(var t=0,n=e.getArray(),a=e.getWidth(),i=e.getHeight(),o=0;o<i;o++)for(var s=n[o],u=0;u<a;u++)s[u]===1&&t++;var c=e.getHeight()*e.getWidth(),l=Math.floor(Math.abs(t*2-c)*10/c);return l*r.N4},r.getDataMaskBit=function(e,t,n){var a,i;switch(e){case 0:a=n+t&1;break;case 1:a=n&1;break;case 2:a=t%3;break;case 3:a=(n+t)%3;break;case 4:a=Math.floor(n/2)+Math.floor(t/3)&1;break;case 5:i=n*t,a=(i&1)+i%3;break;case 6:i=n*t,a=(i&1)+i%3&1;break;case 7:i=n*t,a=i%3+(n+t&1)&1;break;default:throw new M("Invalid mask pattern: "+e)}return a===0},r.applyMaskPenaltyRule1Internal=function(e,t){for(var n=0,a=t?e.getHeight():e.getWidth(),i=t?e.getWidth():e.getHeight(),o=e.getArray(),s=0;s<a;s++){for(var u=0,c=-1,l=0;l<i;l++){var f=t?o[s][l]:o[l][s];f===c?u++:(u>=5&&(n+=r.N1+(u-5)),u=1,c=f)}u>=5&&(n+=r.N1+(u-5))}return n},r.N1=3,r.N2=3,r.N3=40,r.N4=10,r})(),jl=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ul=(function(){function r(e,t){this.width=e,this.height=t;for(var n=new Array(t),a=0;a!==t;a++)n[a]=new Uint8Array(e);this.bytes=n}return r.prototype.getHeight=function(){return this.height},r.prototype.getWidth=function(){return this.width},r.prototype.get=function(e,t){return this.bytes[t][e]},r.prototype.getArray=function(){return this.bytes},r.prototype.setNumber=function(e,t,n){this.bytes[t][e]=n},r.prototype.setBoolean=function(e,t,n){this.bytes[t][e]=n?1:0},r.prototype.clear=function(e){var t,n;try{for(var a=jl(this.bytes),i=a.next();!i.done;i=a.next()){var o=i.value;ye.fill(o,e)}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var n=0,a=this.height;n<a;++n)for(var i=this.bytes[n],o=t.bytes[n],s=0,u=this.width;s<u;++s)if(i[s]!==o[s])return!1;return!0},r.prototype.toString=function(){for(var e=new F,t=0,n=this.height;t<n;++t){for(var a=this.bytes[t],i=0,o=this.width;i<o;++i)switch(a[i]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},r})(),an=(function(){function r(){this.maskPattern=-1}return r.prototype.getMode=function(){return this.mode},r.prototype.getECLevel=function(){return this.ecLevel},r.prototype.getVersion=function(){return this.version},r.prototype.getMaskPattern=function(){return this.maskPattern},r.prototype.getMatrix=function(){return this.matrix},r.prototype.toString=function(){var e=new F;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},r.prototype.setMode=function(e){this.mode=e},r.prototype.setECLevel=function(e){this.ecLevel=e},r.prototype.setVersion=function(e){this.version=e},r.prototype.setMaskPattern=function(e){this.maskPattern=e},r.prototype.setMatrix=function(e){this.matrix=e},r.isValidMaskPattern=function(e){return e>=0&&e<r.NUM_MASK_PATTERNS},r.NUM_MASK_PATTERNS=8,r})(),Vl=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),re=(function(r){Vl(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="WriterException",e})(Fe),da=(function(){function r(){}return r.clearMatrix=function(e){e.clear(255)},r.buildMatrix=function(e,t,n,a,i){r.clearMatrix(i),r.embedBasicPatterns(n,i),r.embedTypeInfo(t,a,i),r.maybeEmbedVersionInfo(n,i),r.embedDataBits(e,a,i)},r.embedBasicPatterns=function(e,t){r.embedPositionDetectionPatternsAndSeparators(t),r.embedDarkDotAtLeftBottomCorner(t),r.maybeEmbedPositionAdjustmentPatterns(e,t),r.embedTimingPatterns(t)},r.embedTypeInfo=function(e,t,n){var a=new be;r.makeTypeInfoBits(e,t,a);for(var i=0,o=a.getSize();i<o;++i){var s=a.get(a.getSize()-1-i),u=r.TYPE_INFO_COORDINATES[i],c=u[0],l=u[1];if(n.setBoolean(c,l,s),i<8){var f=n.getWidth()-i-1,d=8;n.setBoolean(f,d,s)}else{var f=8,d=n.getHeight()-7+(i-8);n.setBoolean(f,d,s)}}},r.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var n=new be;r.makeVersionInfoBits(e,n);for(var a=17,i=0;i<6;++i)for(var o=0;o<3;++o){var s=n.get(a);a--,t.setBoolean(i,t.getHeight()-11+o,s),t.setBoolean(t.getHeight()-11+o,i,s)}}},r.embedDataBits=function(e,t,n){for(var a=0,i=-1,o=n.getWidth()-1,s=n.getHeight()-1;o>0;){for(o===6&&(o-=1);s>=0&&s<n.getHeight();){for(var u=0;u<2;++u){var c=o-u;if(r.isEmpty(n.get(c,s))){var l=void 0;a<e.getSize()?(l=e.get(a),++a):l=!1,t!==255&&Ft.getDataMaskBit(t,c,s)&&(l=!l),n.setBoolean(c,s,l)}}s+=i}i=-i,s+=i,o-=2}if(a!==e.getSize())throw new re("Not all bits consumed: "+a+"/"+e.getSize())},r.findMSBSet=function(e){return 32-U.numberOfLeadingZeros(e)},r.calculateBCHCode=function(e,t){if(t===0)throw new M("0 polynomial");var n=r.findMSBSet(t);for(e<<=n-1;r.findMSBSet(e)>=n;)e^=t<<r.findMSBSet(e)-n;return e},r.makeTypeInfoBits=function(e,t,n){if(!an.isValidMaskPattern(t))throw new re("Invalid mask pattern");var a=e.getBits()<<3|t;n.appendBits(a,5);var i=r.calculateBCHCode(a,r.TYPE_INFO_POLY);n.appendBits(i,10);var o=new be;if(o.appendBits(r.TYPE_INFO_MASK_PATTERN,15),n.xor(o),n.getSize()!==15)throw new re("should not happen but we got: "+n.getSize())},r.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var n=r.calculateBCHCode(e.getVersionNumber(),r.VERSION_INFO_POLY);if(t.appendBits(n,12),t.getSize()!==18)throw new re("should not happen but we got: "+t.getSize())},r.isEmpty=function(e){return e===255},r.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var n=(t+1)%2;r.isEmpty(e.get(t,6))&&e.setNumber(t,6,n),r.isEmpty(e.get(6,t))&&e.setNumber(6,t,n)}},r.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new re;e.setNumber(8,e.getHeight()-8,1)},r.embedHorizontalSeparationPattern=function(e,t,n){for(var a=0;a<8;++a){if(!r.isEmpty(n.get(e+a,t)))throw new re;n.setNumber(e+a,t,0)}},r.embedVerticalSeparationPattern=function(e,t,n){for(var a=0;a<7;++a){if(!r.isEmpty(n.get(e,t+a)))throw new re;n.setNumber(e,t+a,0)}},r.embedPositionAdjustmentPattern=function(e,t,n){for(var a=0;a<5;++a)for(var i=r.POSITION_ADJUSTMENT_PATTERN[a],o=0;o<5;++o)n.setNumber(e+o,t+a,i[o])},r.embedPositionDetectionPattern=function(e,t,n){for(var a=0;a<7;++a)for(var i=r.POSITION_DETECTION_PATTERN[a],o=0;o<7;++o)n.setNumber(e+o,t+a,i[o])},r.embedPositionDetectionPatternsAndSeparators=function(e){var t=r.POSITION_DETECTION_PATTERN[0].length;r.embedPositionDetectionPattern(0,0,e),r.embedPositionDetectionPattern(e.getWidth()-t,0,e),r.embedPositionDetectionPattern(0,e.getWidth()-t,e);var n=8;r.embedHorizontalSeparationPattern(0,n-1,e),r.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),r.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);var a=7;r.embedVerticalSeparationPattern(a,0,e),r.embedVerticalSeparationPattern(e.getHeight()-a-1,0,e),r.embedVerticalSeparationPattern(a,e.getHeight()-a,e)},r.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,a=r.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],i=0,o=a.length;i!==o;i++){var s=a[i];if(s>=0)for(var u=0;u!==o;u++){var c=a[u];c>=0&&r.isEmpty(t.get(c,s))&&r.embedPositionAdjustmentPattern(c-2,s-2,t)}}},r.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),r.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),r.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),r.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),r.VERSION_INFO_POLY=7973,r.TYPE_INFO_POLY=1335,r.TYPE_INFO_MASK_PATTERN=21522,r})(),Hl=(function(){function r(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return r.prototype.getDataBytes=function(){return this.dataBytes},r.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},r})(),ha=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function r(){}return r.calculateMaskPenalty=function(e){return Ft.applyMaskPenaltyRule1(e)+Ft.applyMaskPenaltyRule2(e)+Ft.applyMaskPenaltyRule3(e)+Ft.applyMaskPenaltyRule4(e)},r.encode=function(e,t,n){n===void 0&&(n=null);var a=r.DEFAULT_BYTE_MODE_ENCODING,i=n!==null&&n.get(er.CHARACTER_SET)!==void 0;i&&(a=n.get(er.CHARACTER_SET).toString());var o=this.chooseMode(e,a),s=new be;if(o===ne.BYTE&&(i||r.DEFAULT_BYTE_MODE_ENCODING!==a)){var u=me.getCharacterSetECIByName(a);u!==void 0&&this.appendECI(u,s)}this.appendModeInfo(o,s);var c=new be;this.appendBytes(e,o,c,a);var l;if(n!==null&&n.get(er.QR_VERSION)!==void 0){var f=Number.parseInt(n.get(er.QR_VERSION).toString(),10);l=pt.getVersionForNumber(f);var d=this.calculateBitsNeeded(o,s,c,l);if(!this.willFit(d,l,t))throw new re("Data too big for requested version")}else l=this.recommendVersion(t,o,s,c);var h=new be;h.appendBitArray(s);var v=o===ne.BYTE?c.getSizeInBytes():e.length;this.appendLengthInfo(v,l,o,h),h.appendBitArray(c);var x=l.getECBlocksForLevel(t),g=l.getTotalCodewords()-x.getTotalECCodewords();this.terminateBits(g,h);var w=this.interleaveWithECBytes(h,l.getTotalCodewords(),g,x.getNumBlocks()),y=new an;y.setECLevel(t),y.setMode(o),y.setVersion(l);var _=l.getDimensionForVersion(),b=new Ul(_,_),E=this.chooseMaskPattern(w,t,l,b);return y.setMaskPattern(E),da.buildMatrix(w,t,l,E,b),y.setMatrix(b),y},r.recommendVersion=function(e,t,n,a){var i=this.calculateBitsNeeded(t,n,a,pt.getVersionForNumber(1)),o=this.chooseVersion(i,e),s=this.calculateBitsNeeded(t,n,a,o);return this.chooseVersion(s,e)},r.calculateBitsNeeded=function(e,t,n,a){return t.getSize()+e.getCharacterCountBits(a)+n.getSize()},r.getAlphanumericCode=function(e){return e<r.ALPHANUMERIC_TABLE.length?r.ALPHANUMERIC_TABLE[e]:-1},r.chooseMode=function(e,t){if(t===void 0&&(t=null),me.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return ne.KANJI;for(var n=!1,a=!1,i=0,o=e.length;i<o;++i){var s=e.charAt(i);if(r.isDigit(s))n=!0;else if(this.getAlphanumericCode(s.charCodeAt(0))!==-1)a=!0;else return ne.BYTE}return a?ne.ALPHANUMERIC:n?ne.NUMERIC:ne.BYTE},r.isOnlyDoubleByteKanji=function(e){var t;try{t=We.encode(e,me.SJIS)}catch{return!1}var n=t.length;if(n%2!==0)return!1;for(var a=0;a<n;a+=2){var i=t[a]&255;if((i<129||i>159)&&(i<224||i>235))return!1}return!0},r.chooseMaskPattern=function(e,t,n,a){for(var i=Number.MAX_SAFE_INTEGER,o=-1,s=0;s<an.NUM_MASK_PATTERNS;s++){da.buildMatrix(e,t,n,s,a);var u=this.calculateMaskPenalty(a);u<i&&(i=u,o=s)}return o},r.chooseVersion=function(e,t){for(var n=1;n<=40;n++){var a=pt.getVersionForNumber(n);if(r.willFit(e,a,t))return a}throw new re("Data too big")},r.willFit=function(e,t,n){var a=t.getTotalCodewords(),i=t.getECBlocksForLevel(n),o=i.getTotalECCodewords(),s=a-o,u=(e+7)/8;return s>=u},r.terminateBits=function(e,t){var n=e*8;if(t.getSize()>n)throw new re("data bits cannot fit in the QR Code"+t.getSize()+" > "+n);for(var a=0;a<4&&t.getSize()<n;++a)t.appendBit(!1);var i=t.getSize()&7;if(i>0)for(var a=i;a<8;a++)t.appendBit(!1);for(var o=e-t.getSizeInBytes(),a=0;a<o;++a)t.appendBits((a&1)===0?236:17,8);if(t.getSize()!==n)throw new re("Bits size does not equal capacity")},r.getNumDataBytesAndNumECBytesForBlockID=function(e,t,n,a,i,o){if(a>=n)throw new re("Block ID too large");var s=e%n,u=n-s,c=Math.floor(e/n),l=c+1,f=Math.floor(t/n),d=f+1,h=c-f,v=l-d;if(h!==v)throw new re("EC bytes mismatch");if(n!==u+s)throw new re("RS blocks mismatch");if(e!==(f+h)*u+(d+v)*s)throw new re("Total bytes mismatch");a<u?(i[0]=f,o[0]=h):(i[0]=d,o[0]=v)},r.interleaveWithECBytes=function(e,t,n,a){var i,o,s,u;if(e.getSizeInBytes()!==n)throw new re("Number of bits and data bytes does not match");for(var c=0,l=0,f=0,d=new Array,h=0;h<a;++h){var v=new Int32Array(1),x=new Int32Array(1);r.getNumDataBytesAndNumECBytesForBlockID(t,n,a,h,v,x);var g=v[0],w=new Uint8Array(g);e.toBytes(8*c,w,0,g);var y=r.generateECBytes(w,x[0]);d.push(new Hl(w,y)),l=Math.max(l,g),f=Math.max(f,y.length),c+=v[0]}if(n!==c)throw new re("Data bytes does not match offset");for(var _=new be,h=0;h<l;++h)try{for(var b=(i=void 0,ha(d)),E=b.next();!E.done;E=b.next()){var S=E.value,w=S.getDataBytes();h<w.length&&_.appendBits(w[h],8)}}catch(D){i={error:D}}finally{try{E&&!E.done&&(o=b.return)&&o.call(b)}finally{if(i)throw i.error}}for(var h=0;h<f;++h)try{for(var O=(s=void 0,ha(d)),N=O.next();!N.done;N=O.next()){var S=N.value,y=S.getErrorCorrectionBytes();h<y.length&&_.appendBits(y[h],8)}}catch(D){s={error:D}}finally{try{N&&!N.done&&(u=O.return)&&u.call(O)}finally{if(s)throw s.error}}if(t!==_.getSizeInBytes())throw new re("Interleaving error: "+t+" and "+_.getSizeInBytes()+" differ.");return _},r.generateECBytes=function(e,t){for(var n=e.length,a=new Int32Array(n+t),i=0;i<n;i++)a[i]=e[i]&255;new Ii(Le.QR_CODE_FIELD_256).encode(a,t);for(var o=new Uint8Array(t),i=0;i<t;i++)o[i]=a[n+i];return o},r.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},r.appendLengthInfo=function(e,t,n,a){var i=n.getCharacterCountBits(t);if(e>=1<<i)throw new re(e+" is bigger than "+((1<<i)-1));a.appendBits(e,i)},r.appendBytes=function(e,t,n,a){switch(t){case ne.NUMERIC:r.appendNumericBytes(e,n);break;case ne.ALPHANUMERIC:r.appendAlphanumericBytes(e,n);break;case ne.BYTE:r.append8BitBytes(e,n,a);break;case ne.KANJI:r.appendKanjiBytes(e,n);break;default:throw new re("Invalid mode: "+t)}},r.getDigit=function(e){return e.charCodeAt(0)-48},r.isDigit=function(e){var t=r.getDigit(e);return t>=0&&t<=9},r.appendNumericBytes=function(e,t){for(var n=e.length,a=0;a<n;){var i=r.getDigit(e.charAt(a));if(a+2<n){var o=r.getDigit(e.charAt(a+1)),s=r.getDigit(e.charAt(a+2));t.appendBits(i*100+o*10+s,10),a+=3}else if(a+1<n){var o=r.getDigit(e.charAt(a+1));t.appendBits(i*10+o,7),a+=2}else t.appendBits(i,4),a++}},r.appendAlphanumericBytes=function(e,t){for(var n=e.length,a=0;a<n;){var i=r.getAlphanumericCode(e.charCodeAt(a));if(i===-1)throw new re;if(a+1<n){var o=r.getAlphanumericCode(e.charCodeAt(a+1));if(o===-1)throw new re;t.appendBits(i*45+o,11),a+=2}else t.appendBits(i,6),a++}},r.append8BitBytes=function(e,t,n){var a;try{a=We.encode(e,n)}catch(u){throw new re(u)}for(var i=0,o=a.length;i!==o;i++){var s=a[i];t.appendBits(s,8)}},r.appendKanjiBytes=function(e,t){var n;try{n=We.encode(e,me.SJIS)}catch(f){throw new re(f)}for(var a=n.length,i=0;i<a;i+=2){var o=n[i]&255,s=n[i+1]&255,u=o<<8&4294967295|s,c=-1;if(u>=33088&&u<=40956?c=u-33088:u>=57408&&u<=60351&&(c=u-49472),c===-1)throw new re("Invalid byte sequence");var l=(c>>8)*192+(c&255);t.appendBits(l,13)}},r.appendECI=function(e,t){t.appendBits(ne.ECI.getBits(),4),t.appendBits(e.getValue(),8)},r.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),r.DEFAULT_BYTE_MODE_ENCODING=me.UTF8.getName(),r})();var Gl=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){Gl(e,r);function e(t,n,a,i,o,s,u,c){var l=r.call(this,s,u)||this;if(l.yuvData=t,l.dataWidth=n,l.dataHeight=a,l.left=i,l.top=o,i+s>n||o+u>a)throw new M("Crop rectangle does not fit within image data.");return c&&l.reverseHorizontal(s,u),l}return e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new M("Requested row is outside the image: "+t);var a=this.getWidth();(n==null||n.length<a)&&(n=new Uint8ClampedArray(a));var i=(t+this.top)*this.dataWidth+this.left;return te.arraycopy(this.yuvData,i,n,0,a),n},e.prototype.getMatrix=function(){var t=this.getWidth(),n=this.getHeight();if(t===this.dataWidth&&n===this.dataHeight)return this.yuvData;var a=t*n,i=new Uint8ClampedArray(a),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return te.arraycopy(this.yuvData,o,i,0,a),i;for(var s=0;s<n;s++){var u=s*t;te.arraycopy(this.yuvData,o,i,u,t),o+=this.dataWidth}return i},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,a,i){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+n,a,i,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(t*n),i=this.yuvData,o=this.top*this.dataWidth+this.left,s=0;s<n;s++){for(var u=s*t,c=0;c<t;c++){var l=i[o+c*e.THUMBNAIL_SCALE_FACTOR]&255;a[u+c]=4278190080|l*65793}o+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return a},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,n){for(var a=this.yuvData,i=0,o=this.top*this.dataWidth+this.left;i<n;i++,o+=this.dataWidth)for(var s=o+t/2,u=o,c=o+t-1;u<s;u++,c--){var l=a[u];a[u]=a[c],a[c]=l}},e.prototype.invert=function(){return new mr(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(Wt);var $l=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){$l(e,r);function e(t,n,a,i,o,s,u){var c=r.call(this,n,a)||this;if(c.dataWidth=i,c.dataHeight=o,c.left=s,c.top=u,t.BYTES_PER_ELEMENT===4){for(var l=n*a,f=new Uint8ClampedArray(l),d=0;d<l;d++){var h=t[d],v=h>>16&255,x=h>>7&510,g=h&255;f[d]=(v+x+g)/4&255}c.luminances=f}else c.luminances=t;if(i===void 0&&(c.dataWidth=n),o===void 0&&(c.dataHeight=a),s===void 0&&(c.left=0),u===void 0&&(c.top=0),c.left+n>c.dataWidth||c.top+a>c.dataHeight)throw new M("Crop rectangle does not fit within image data.");return c}return e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new M("Requested row is outside the image: "+t);var a=this.getWidth();(n==null||n.length<a)&&(n=new Uint8ClampedArray(a));var i=(t+this.top)*this.dataWidth+this.left;return te.arraycopy(this.luminances,i,n,0,a),n},e.prototype.getMatrix=function(){var t=this.getWidth(),n=this.getHeight();if(t===this.dataWidth&&n===this.dataHeight)return this.luminances;var a=t*n,i=new Uint8ClampedArray(a),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return te.arraycopy(this.luminances,o,i,0,a),i;for(var s=0;s<n;s++){var u=s*t;te.arraycopy(this.luminances,o,i,u,t),o+=this.dataWidth}return i},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,a,i){return new e(this.luminances,a,i,this.dataWidth,this.dataHeight,this.left+t,this.top+n)},e.prototype.invert=function(){return new mr(this)},e})(Wt);var Wl=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Xl=(function(r){Wl(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e})(me),zl=(function(){function r(){}return r.ISO_8859_1=me.ISO8859_1,r})(),on,Yl=301,Zl=function(r,e){for(var t=1,n=0;n<255;n++)e[n]=t,r[t]=n,t*=2,t>=256&&(t^=Yl);return{LOG:r,ALOG:e}};on=Zl([],[]),on.LOG;on.ALOG;var pa;(function(r){r[r.FORCE_NONE=0]="FORCE_NONE",r[r.FORCE_SQUARE=1]="FORCE_SQUARE",r[r.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(pa||(pa={}));var va=129,Oi=230,Kl=231,ql=235,Jl=236,Ql=237,e0=238,t0=239,r0=240,kr=254,n0=254,xa="[)>05",ga="[)>06",ma="",K=0,Se=1,Pe=2,xe=3,Ae=4,Ne=5,a0=(function(){function r(){}return r.prototype.getEncodingMode=function(){return K},r.prototype.encode=function(e){var t=Ze.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var n=e.getCurrentChar(),a=Ze.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode())switch(a){case Ne:e.writeCodeword(Kl),e.signalEncoderChange(Ne);return;case Se:e.writeCodeword(Oi),e.signalEncoderChange(Se);return;case xe:e.writeCodeword(e0),e.signalEncoderChange(xe);break;case Pe:e.writeCodeword(t0),e.signalEncoderChange(Pe);break;case Ae:e.writeCodeword(r0),e.signalEncoderChange(Ae);break;default:throw new Error("Illegal mode: "+a)}else Ze.isExtendedASCII(n)?(e.writeCodeword(ql),e.writeCodeword(n-128+1),e.pos++):(e.writeCodeword(n+1),e.pos++)}},r.prototype.encodeASCIIDigits=function(e,t){if(Ze.isDigit(e)&&Ze.isDigit(t)){var n=(e-48)*10+(t-48);return n+130}throw new Error("not digits: "+e+t)},r})(),i0=(function(){function r(){}return r.prototype.getEncodingMode=function(){return Ne},r.prototype.encode=function(e){var t=new F;for(t.append(0);e.hasMoreCharacters();){var n=e.getCurrentChar();t.append(n),e.pos++;var a=Ze.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){e.signalEncoderChange(K);break}}var i=t.length()-1,o=1,s=e.getCodewordCount()+i+o;e.updateSymbolInfo(s);var u=e.getSymbolInfo().getDataCapacity()-s>0;if(e.hasMoreCharacters()||u)if(i<=249)t.setCharAt(0,V.getCharAt(i));else if(i<=1555)t.setCharAt(0,V.getCharAt(Math.floor(i/250)+249)),t.insert(1,V.getCharAt(i%250));else throw new Error("Message length not in valid ranges: "+i);for(var c=0,n=t.length();c<n;c++)e.writeCodeword(this.randomize255State(t.charAt(c).charCodeAt(0),e.getCodewordCount()+1))},r.prototype.randomize255State=function(e,t){var n=149*t%255+1,a=e+n;return a<=255?a:a-256},r})(),_n=(function(){function r(){}return r.prototype.getEncodingMode=function(){return Se},r.prototype.encodeMaximal=function(e){for(var t=new F,n=0,a=e.pos,i=0;e.hasMoreCharacters();){var o=e.getCurrentChar();e.pos++,n=this.encodeChar(o,t),t.length()%3===0&&(a=e.pos,i=t.length())}if(i!==t.length()){var s=Math.floor(t.length()/3*2),u=Math.floor(e.getCodewordCount()+s+1);e.updateSymbolInfo(u);var c=e.getSymbolInfo().getDataCapacity()-u,l=Math.floor(t.length()%3);(l===2&&c!==2||l===1&&(n>3||c!==1))&&(e.pos=a)}t.length()>0&&e.writeCodeword(Oi),this.handleEOD(e,t)},r.prototype.encode=function(e){for(var t=new F;e.hasMoreCharacters();){var n=e.getCurrentChar();e.pos++;var a=this.encodeChar(n,t),i=Math.floor(t.length()/3)*2,o=e.getCodewordCount()+i;e.updateSymbolInfo(o);var s=e.getSymbolInfo().getDataCapacity()-o;if(!e.hasMoreCharacters()){var u=new F;for(t.length()%3===2&&s!==2&&(a=this.backtrackOneCharacter(e,t,u,a));t.length()%3===1&&(a>3||s!==1);)a=this.backtrackOneCharacter(e,t,u,a);break}var c=t.length();if(c%3===0){var l=Ze.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(l!==this.getEncodingMode()){e.signalEncoderChange(K);break}}}this.handleEOD(e,t)},r.prototype.backtrackOneCharacter=function(e,t,n,a){var i=t.length(),o=t.toString().substring(0,i-a);t.setLengthToZero(),t.append(o),e.pos--;var s=e.getCurrentChar();return a=this.encodeChar(s,n),e.resetSymbolInfo(),a},r.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var n=t.toString().substring(3);t.setLengthToZero(),t.append(n)},r.prototype.handleEOD=function(e,t){var n=Math.floor(t.length()/3*2),a=t.length()%3,i=e.getCodewordCount()+n;e.updateSymbolInfo(i);var o=e.getSymbolInfo().getDataCapacity()-i;if(a===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(kr)}else if(o===1&&a===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(kr),e.pos--}else if(a===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(o>0||e.hasMoreCharacters())&&e.writeCodeword(kr)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(K)},r.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var n=2;return n+=this.encodeChar(e-128,t),n},r.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,n=t/256,a=t%256,i=new F;return i.append(n),i.append(a),i.toString()},r})(),o0=(function(){function r(){}return r.prototype.getEncodingMode=function(){return Ae},r.prototype.encode=function(e){for(var t=new F;e.hasMoreCharacters();){var n=e.getCurrentChar();this.encodeChar(n,t),e.pos++;var a=t.length();if(a>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var i=t.toString().substring(4);t.setLengthToZero(),t.append(i);var o=Ze.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){e.signalEncoderChange(K);break}}}t.append(V.getCharAt(31)),this.handleEOD(e,t)},r.prototype.handleEOD=function(e,t){try{var n=t.length();if(n===0)return;if(n===1){e.updateSymbolInfo();var a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),i=e.getRemainingCharacters();if(i>a&&(e.updateSymbolInfo(e.getCodewordCount()+1),a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),i<=a&&a<=2)return}if(n>4)throw new Error("Count must not exceed 4");var o=n-1,s=this.encodeToCodewords(t.toString()),u=!e.hasMoreCharacters(),c=u&&o<=2;if(o<=2){e.updateSymbolInfo(e.getCodewordCount()+o);var a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();a>=3&&(c=!1,e.updateSymbolInfo(e.getCodewordCount()+s.length))}c?(e.resetSymbolInfo(),e.pos-=o):e.writeCodewords(s)}finally{e.signalEncoderChange(K)}},r.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(V.getCharAt(e-64)):Ze.illegalCharacter(V.getCharAt(e))},r.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var n=e.charAt(0).charCodeAt(0),a=t>=2?e.charAt(1).charCodeAt(0):0,i=t>=3?e.charAt(2).charCodeAt(0):0,o=t>=4?e.charAt(3).charCodeAt(0):0,s=(n<<18)+(a<<12)+(i<<6)+o,u=s>>16&255,c=s>>8&255,l=s&255,f=new F;return f.append(u),t>=2&&f.append(c),t>=3&&f.append(l),f.toString()},r})(),s0=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),u0=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},z=(function(){function r(e,t,n,a,i,o,s,u){s===void 0&&(s=0),u===void 0&&(u=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=n,this.matrixWidth=a,this.matrixHeight=i,this.dataRegions=o,this.rsBlockData=s,this.rsBlockError=u}return r.lookup=function(e,t,n,a,i){var o,s;t===void 0&&(t=0),n===void 0&&(n=null),a===void 0&&(a=null),i===void 0&&(i=!0);try{for(var u=u0(l0),c=u.next();!c.done;c=u.next()){var l=c.value;if(!(t===1&&l.rectangular)&&!(t===2&&!l.rectangular)&&!(n!=null&&(l.getSymbolWidth()<n.getWidth()||l.getSymbolHeight()<n.getHeight()))&&!(a!=null&&(l.getSymbolWidth()>a.getWidth()||l.getSymbolHeight()>a.getHeight()))&&e<=l.dataCapacity)return l}}catch(f){o={error:f}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(o)throw o.error}}if(i)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},r.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},r.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},r.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},r.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},r.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},r.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},r.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},r.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},r.prototype.getDataCapacity=function(){return this.dataCapacity},r.prototype.getErrorCodewords=function(){return this.errorCodewords},r.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},r.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},r})(),c0=(function(r){s0(e,r);function e(){return r.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e})(z),l0=[new z(!1,3,5,8,8,1),new z(!1,5,7,10,10,1),new z(!0,5,7,16,6,1),new z(!1,8,10,12,12,1),new z(!0,10,11,14,6,2),new z(!1,12,12,14,14,1),new z(!0,16,14,24,10,1),new z(!1,18,14,16,16,1),new z(!1,22,18,18,18,1),new z(!0,22,18,16,10,2),new z(!1,30,20,20,20,1),new z(!0,32,24,16,14,2),new z(!1,36,24,22,22,1),new z(!1,44,28,24,24,1),new z(!0,49,28,22,14,2),new z(!1,62,36,14,14,4),new z(!1,86,42,16,16,4),new z(!1,114,48,18,18,4),new z(!1,144,56,20,20,4),new z(!1,174,68,22,22,4),new z(!1,204,84,24,24,4,102,42),new z(!1,280,112,14,14,16,140,56),new z(!1,368,144,16,16,16,92,36),new z(!1,456,192,18,18,16,114,48),new z(!1,576,224,20,20,16,144,56),new z(!1,696,272,22,22,16,174,68),new z(!1,816,336,24,24,16,136,56),new z(!1,1050,408,18,18,36,175,68),new z(!1,1304,496,20,20,36,163,62),new c0],f0=(function(){function r(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(s){return s.charCodeAt(0)}),n=new F,a=0,i=t.length;a<i;a++){var o=String.fromCharCode(t[a]&255);if(o==="?"&&e.charAt(a)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(o)}this.msg=n.toString(),this.shape=0,this.codewords=new F,this.newEncoding=-1}return r.prototype.setSymbolShape=function(e){this.shape=e},r.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},r.prototype.getMessage=function(){return this.msg},r.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},r.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},r.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},r.prototype.getCodewords=function(){return this.codewords},r.prototype.writeCodewords=function(e){this.codewords.append(e)},r.prototype.writeCodeword=function(e){this.codewords.append(e)},r.prototype.getCodewordCount=function(){return this.codewords.length()},r.prototype.getNewEncoding=function(){return this.newEncoding},r.prototype.signalEncoderChange=function(e){this.newEncoding=e},r.prototype.resetEncoderSignal=function(){this.newEncoding=-1},r.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},r.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},r.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},r.prototype.getSymbolInfo=function(){return this.symbolInfo},r.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=z.lookup(e,this.shape,this.minSize,this.maxSize,!0))},r.prototype.resetSymbolInfo=function(){this.symbolInfo=null},r})(),d0=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),h0=(function(r){d0(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return xe},e.prototype.encode=function(t){for(var n=new F;t.hasMoreCharacters();){var a=t.getCurrentChar();t.pos++,this.encodeChar(a,n);var i=n.length();if(i%3===0){this.writeNextTriplet(t,n);var o=Ze.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){t.signalEncoderChange(K);break}}}this.handleEOD(t,n)},e.prototype.encodeChar=function(t,n){switch(t){case 13:n.append(0);break;case 42:n.append(1);break;case 62:n.append(2);break;case 32:n.append(3);break;default:t>=48&&t<=57?n.append(t-48+4):t>=65&&t<=90?n.append(t-65+14):Ze.illegalCharacter(V.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,n){t.updateSymbolInfo();var a=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),i=n.length();t.pos-=i,(t.getRemainingCharacters()>1||a>1||t.getRemainingCharacters()!==a)&&t.writeCodeword(n0),t.getNewEncoding()<0&&t.signalEncoderChange(K)},e})(_n),p0=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),v0=(function(r){p0(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Pe},e.prototype.encodeChar=function(t,n){if(t===32)return n.append(3),1;if(t>=48&&t<=57)return n.append(t-48+4),1;if(t>=97&&t<=122)return n.append(t-97+14),1;if(t<32)return n.append(0),n.append(t),2;if(t<=47)return n.append(1),n.append(t-33),2;if(t<=64)return n.append(1),n.append(t-58+15),2;if(t>=91&&t<=95)return n.append(1),n.append(t-91+22),2;if(t===96)return n.append(2),n.append(0),2;if(t<=90)return n.append(2),n.append(t-65+1),2;if(t<=127)return n.append(2),n.append(t-123+27),2;n.append("1");var a=2;return a+=this.encodeChar(t-128,n),a},e})(_n),Ze=(function(){function r(){}return r.randomize253State=function(e){var t=149*e%253+1,n=va+t;return n<=254?n:n-254},r.encodeHighLevel=function(e,t,n,a,i){t===void 0&&(t=0),n===void 0&&(n=null),a===void 0&&(a=null),i===void 0&&(i=!1);var o=new _n,s=[new a0,o,new v0,new h0,new o0,new i0],u=new f0(e);u.setSymbolShape(t),u.setSizeConstraints(n,a),e.startsWith(xa)&&e.endsWith(ma)?(u.writeCodeword(Jl),u.setSkipAtEnd(2),u.pos+=xa.length):e.startsWith(ga)&&e.endsWith(ma)&&(u.writeCodeword(Ql),u.setSkipAtEnd(2),u.pos+=ga.length);var c=K;for(i&&(o.encodeMaximal(u),c=u.getNewEncoding(),u.resetEncoderSignal());u.hasMoreCharacters();)s[c].encode(u),u.getNewEncoding()>=0&&(c=u.getNewEncoding(),u.resetEncoderSignal());var l=u.getCodewordCount();u.updateSymbolInfo();var f=u.getSymbolInfo().getDataCapacity();l<f&&c!==K&&c!==Ne&&c!==Ae&&u.writeCodeword("√æ");var d=u.getCodewords();for(d.length()<f&&d.append(va);d.length()<f;)d.append(this.randomize253State(d.length()+1));return u.getCodewords().toString()},r.lookAheadTest=function(e,t,n){var a=this.lookAheadTestIntern(e,t,n);if(n===xe&&a===xe){for(var i=Math.min(t+3,e.length),o=t;o<i;o++)if(!this.isNativeX12(e.charCodeAt(o)))return K}else if(n===Ae&&a===Ae){for(var i=Math.min(t+4,e.length),o=t;o<i;o++)if(!this.isNativeEDIFACT(e.charCodeAt(o)))return K}return a},r.lookAheadTestIntern=function(e,t,n){if(t>=e.length)return n;var a;n===K?a=[0,1,1,1,1,1.25]:(a=[1,2,2,2,2,2.25],a[n]=0);for(var i=0,o=new Uint8Array(6),s=[];;){if(t+i===e.length){ye.fill(o,0),ye.fill(s,0);var u=this.findMinimums(a,s,U.MAX_VALUE,o),c=this.getMinimumCount(o);if(s[K]===u)return K;if(c===1){if(o[Ne]>0)return Ne;if(o[Ae]>0)return Ae;if(o[Pe]>0)return Pe;if(o[xe]>0)return xe}return Se}var l=e.charCodeAt(t+i);if(i++,this.isDigit(l)?a[K]+=.5:this.isExtendedASCII(l)?(a[K]=Math.ceil(a[K]),a[K]+=2):(a[K]=Math.ceil(a[K]),a[K]++),this.isNativeC40(l)?a[Se]+=2/3:this.isExtendedASCII(l)?a[Se]+=8/3:a[Se]+=4/3,this.isNativeText(l)?a[Pe]+=2/3:this.isExtendedASCII(l)?a[Pe]+=8/3:a[Pe]+=4/3,this.isNativeX12(l)?a[xe]+=2/3:this.isExtendedASCII(l)?a[xe]+=13/3:a[xe]+=10/3,this.isNativeEDIFACT(l)?a[Ae]+=3/4:this.isExtendedASCII(l)?a[Ae]+=17/4:a[Ae]+=13/4,this.isSpecialB256(l)?a[Ne]+=4:a[Ne]++,i>=4){if(ye.fill(o,0),ye.fill(s,0),this.findMinimums(a,s,U.MAX_VALUE,o),s[K]<this.min(s[Ne],s[Se],s[Pe],s[xe],s[Ae]))return K;if(s[Ne]<s[K]||s[Ne]+1<this.min(s[Se],s[Pe],s[xe],s[Ae]))return Ne;if(s[Ae]+1<this.min(s[Ne],s[Se],s[Pe],s[xe],s[K]))return Ae;if(s[Pe]+1<this.min(s[Ne],s[Se],s[Ae],s[xe],s[K]))return Pe;if(s[xe]+1<this.min(s[Ne],s[Se],s[Ae],s[Pe],s[K]))return xe;if(s[Se]+1<this.min(s[K],s[Ne],s[Ae],s[Pe])){if(s[Se]<s[xe])return Se;if(s[Se]===s[xe]){for(var f=t+i+1;f<e.length;){var d=e.charCodeAt(f);if(this.isX12TermSep(d))return xe;if(!this.isNativeX12(d))break;f++}return Se}}}}},r.min=function(e,t,n,a,i){var o=Math.min(e,Math.min(t,Math.min(n,a)));return i===void 0?o:Math.min(o,i)},r.findMinimums=function(e,t,n,a){for(var i=0;i<6;i++){var o=t[i]=Math.ceil(e[i]);n>o&&(n=o,ye.fill(a,0)),n===o&&(a[i]=a[i]+1)}return n},r.getMinimumCount=function(e){for(var t=0,n=0;n<6;n++)t+=e[n];return t||0},r.isDigit=function(e){return e>=48&&e<=57},r.isExtendedASCII=function(e){return e>=128&&e<=255},r.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},r.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},r.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},r.isX12TermSep=function(e){return e===13||e===42||e===62},r.isNativeEDIFACT=function(e){return e>=32&&e<=94},r.isSpecialB256=function(e){return!1},r.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var n=e.length,a=t;a<n&&this.isDigit(e.charCodeAt(a));)a++;return a-t},r.illegalCharacter=function(e){var t=U.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},r})(),Mr=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ya=(function(){function r(e){this.charset=e,this.name=e.name}return r.prototype.canEncode=function(e){try{return We.encode(e,this.charset)!=null}catch{return!1}},r})(),x0=(function(){function r(e,t,n){var a,i,o,s,u,c;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(T){return new ya(Xl.forName(T))}),this.encoders=[];var l=[];l.push(new ya(zl.ISO_8859_1));for(var f=t!=null&&t.name.startsWith("UTF"),d=0;d<e.length;d++){var h=!1;try{for(var v=(a=void 0,Mr(l)),x=v.next();!x.done;x=v.next()){var g=x.value,w=e.charAt(d),y=w.charCodeAt(0);if(y===n||g.canEncode(w)){h=!0;break}}}catch(T){a={error:T}}finally{try{x&&!x.done&&(i=v.return)&&i.call(v)}finally{if(a)throw a.error}}if(!h)try{for(var _=(o=void 0,Mr(this.ENCODERS)),b=_.next();!b.done;b=_.next()){var g=b.value;if(g.canEncode(e.charAt(d))){l.push(g),h=!0;break}}}catch(T){o={error:T}}finally{try{b&&!b.done&&(s=_.return)&&s.call(_)}finally{if(o)throw o.error}}h||(f=!0)}if(l.length===1&&!f)this.encoders=[l[0]];else{this.encoders=[];var E=0;try{for(var S=Mr(l),O=S.next();!O.done;O=S.next()){var g=O.value;this.encoders[E++]=g}}catch(T){u={error:T}}finally{try{O&&!O.done&&(c=S.return)&&c.call(S)}finally{if(u)throw u.error}}}var N=-1;if(t!=null){for(var d=0;d<this.encoders.length;d++)if(this.encoders[d]!=null&&t.name===this.encoders[d].name){N=d;break}}this.priorityEncoderIndex=N}return r.prototype.length=function(){return this.encoders.length},r.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},r.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},r.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},r.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},r.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},r.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return We.encode(V.getCharAt(e),this.encoders[t].name)},r})(),g0=3,m0=(function(){function r(e,t,n){this.fnc1=n;var a=new x0(e,t,n);if(a.length()===1)for(var i=0;i<this.bytes.length;i++){var o=e.charAt(i).charCodeAt(0);this.bytes[i]=o===n?1e3:o}else this.bytes=this.encodeMinimally(e,a,n)}return r.prototype.getFNC1Character=function(){return this.fnc1},r.prototype.length=function(){return this.bytes.length},r.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var n=0;n<t;n++)if(this.isECI(e+n))return!1;return!0},r.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},r.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var n=new F,a=e;a<t;a++){if(this.isECI(a))throw new Error("value at "+a+" is not a character but an ECI");n.append(this.charAt(a))}return n.toString()},r.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},r.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},r.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},r.prototype.addEdge=function(e,t,n){(e[t][n.encoderIndex]==null||e[t][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(e[t][n.encoderIndex]=n)},r.prototype.addEdges=function(e,t,n,a,i,o){var s=e.charAt(a).charCodeAt(0),u=0,c=t.length();t.getPriorityEncoderIndex()>=0&&(s===o||t.canEncode(s,t.getPriorityEncoderIndex()))&&(u=t.getPriorityEncoderIndex(),c=u+1);for(var l=u;l<c;l++)(s===o||t.canEncode(s,l))&&this.addEdge(n,a+1,new wa(s,t,l,i,o))},r.prototype.encodeMinimally=function(e,t,n){var a=e.length,i=new wa[a+1][t.length()];this.addEdges(e,t,i,0,null,n);for(var o=1;o<=a;o++){for(var s=0;s<t.length();s++)i[o][s]!=null&&o<a&&this.addEdges(e,t,i,o,i[o][s],n);for(var s=0;s<t.length();s++)i[o-1][s]=null}for(var u=-1,c=U.MAX_VALUE,s=0;s<t.length();s++)if(i[a][s]!=null){var l=i[a][s];l.cachedTotalSize<c&&(c=l.cachedTotalSize,u=s)}if(u<0)throw new Error('Failed to encode "'+e+'"');for(var f=[],d=i[a][u];d!=null;){if(d.isFNC1())f.unshift(1e3);else for(var h=t.encode(d.c,d.encoderIndex),o=h.length-1;o>=0;o--)f.unshift(h[o]&255);var v=d.previous===null?0:d.previous.encoderIndex;v!==d.encoderIndex&&f.unshift(256+t.getECIValue(d.encoderIndex)),d=d.previous}for(var x=[],o=0;o<x.length;o++)x[o]=f[o];return x},r})(),wa=(function(){function r(e,t,n,a,i){this.c=e,this.encoderSet=t,this.encoderIndex=n,this.previous=a,this.fnc1=i,this.c=e===i?1e3:e;var o=this.isFNC1()?1:t.encode(e,n).length,s=a===null?0:a.encoderIndex;s!==n&&(o+=g0),a!=null&&(o+=a.cachedTotalSize),this.cachedTotalSize=o}return r.prototype.isFNC1=function(){return this.c===1e3},r})(),y0=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();var _a;(function(r){r[r.ASCII=0]="ASCII",r[r.C40=1]="C40",r[r.TEXT=2]="TEXT",r[r.X12=3]="X12",r[r.EDF=4]="EDF",r[r.B256=5]="B256"})(_a||(_a={}));(function(r){y0(e,r);function e(t,n,a,i,o){var s=r.call(this,t,n,a)||this;return s.shape=i,s.macroId=o,s}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(m0);var w0=(function(){function r(){}return r.prototype.isCompact=function(){return this.compact},r.prototype.setCompact=function(e){this.compact=e},r.prototype.getSize=function(){return this.size},r.prototype.setSize=function(e){this.size=e},r.prototype.getLayers=function(){return this.layers},r.prototype.setLayers=function(e){this.layers=e},r.prototype.getCodeWords=function(){return this.codeWords},r.prototype.setCodeWords=function(e){this.codeWords=e},r.prototype.getMatrix=function(){return this.matrix},r.prototype.setMatrix=function(e){this.matrix=e},r})(),Aa=(function(){function r(){}return r.singletonList=function(e){return[e]},r.min=function(e,t){return e.sort(t)[0]},r})(),_0=(function(){function r(e){this.previous=e}return r.prototype.getPrevious=function(){return this.previous},r})(),A0=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),An=(function(r){A0(e,r);function e(t,n,a){var i=r.call(this,t)||this;return i.value=n,i.bitCount=a,i}return e.prototype.appendTo=function(t,n){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,n){return new e(this,t,n)},e.prototype.addBinaryShift=function(t,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,n)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+U.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e})(_0),b0=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),E0=(function(r){b0(e,r);function e(t,n,a){var i=r.call(this,t,0,0)||this;return i.binaryShiftStart=n,i.binaryShiftByteCount=a,i}return e.prototype.appendTo=function(t,n){for(var a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):a===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(n[this.binaryShiftStart+a],8)},e.prototype.addBinaryShift=function(t,n){return new e(this,t,n)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e})(An);function C0(r,e,t){return new E0(r,e,t)}function kt(r,e,t){return new An(r,e,t)}var S0=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],ut=0,pr=1,$e=2,Ni=3,Je=4,I0=new An(null,0,0),Br=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],O0=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function N0(r){var e,t;try{for(var n=O0(r),a=n.next();!a.done;a=n.next()){var i=a.value;ye.fill(i,-1)}}catch(o){e={error:o}}finally{try{a&&!a.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r[ut][Je]=0,r[pr][Je]=0,r[pr][ut]=28,r[Ni][Je]=0,r[$e][Je]=0,r[$e][ut]=15,r}var Ti=N0(ye.createInt32Array(6,6)),T0=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},R0=(function(){function r(e,t,n,a){this.token=e,this.mode=t,this.binaryShiftByteCount=n,this.bitCount=a}return r.prototype.getMode=function(){return this.mode},r.prototype.getToken=function(){return this.token},r.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},r.prototype.getBitCount=function(){return this.bitCount},r.prototype.latchAndAppend=function(e,t){var n=this.bitCount,a=this.token;if(e!==this.mode){var i=Br[this.mode][e];a=kt(a,i&65535,i>>16),n+=i>>16}var o=e===$e?4:5;return a=kt(a,t,o),new r(a,e,0,n+o)},r.prototype.shiftAndAppend=function(e,t){var n=this.token,a=this.mode===$e?4:5;return n=kt(n,Ti[this.mode][e],a),n=kt(n,t,5),new r(n,this.mode,0,this.bitCount+a+5)},r.prototype.addBinaryShiftChar=function(e){var t=this.token,n=this.mode,a=this.bitCount;if(this.mode===Je||this.mode===$e){var i=Br[n][ut];t=kt(t,i&65535,i>>16),a+=i>>16,n=ut}var o=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,s=new r(t,n,this.binaryShiftByteCount+1,a+o);return s.binaryShiftByteCount===2078&&(s=s.endBinaryShift(e+1)),s},r.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=C0(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new r(t,this.mode,0,this.bitCount)},r.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(Br[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=r.calculateBinaryShiftCost(e)-r.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},r.prototype.toBitArray=function(e){for(var t,n,a=[],i=this.endBinaryShift(e.length).token;i!==null;i=i.getPrevious())a.unshift(i);var o=new be;try{for(var s=T0(a),u=s.next();!u.done;u=s.next()){var c=u.value;c.appendTo(o,e)}}catch(l){t={error:l}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return o},r.prototype.toString=function(){return V.format("%s bits=%d bytes=%d",S0[this.mode],this.bitCount,this.binaryShiftByteCount)},r.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},r.INITIAL_STATE=new r(I0,ut,0,0),r})();function D0(r){var e=V.getCharCode(" "),t=V.getCharCode("."),n=V.getCharCode(",");r[ut][e]=1;for(var a=V.getCharCode("Z"),i=V.getCharCode("A"),o=i;o<=a;o++)r[ut][o]=o-i+2;r[pr][e]=1;for(var s=V.getCharCode("z"),u=V.getCharCode("a"),o=u;o<=s;o++)r[pr][o]=o-u+2;r[$e][e]=1;for(var c=V.getCharCode("9"),l=V.getCharCode("0"),o=l;o<=c;o++)r[$e][o]=o-l+2;r[$e][n]=12,r[$e][t]=13;for(var f=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],d=0;d<f.length;d++)r[Ni][V.getCharCode(f[d])]=d;for(var h=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],d=0;d<h.length;d++)V.getCharCode(h[d])>0&&(r[Je][V.getCharCode(h[d])]=d);return r}var Lr=D0(ye.createInt32Array(5,256)),tr=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},P0=(function(){function r(e){this.text=e}return r.prototype.encode=function(){for(var e=V.getCharCode(" "),t=V.getCharCode(`
`),n=Aa.singletonList(R0.INITIAL_STATE),a=0;a<this.text.length;a++){var i=void 0,o=a+1<this.text.length?this.text[a+1]:0;switch(this.text[a]){case V.getCharCode("\r"):i=o===t?2:0;break;case V.getCharCode("."):i=o===e?3:0;break;case V.getCharCode(","):i=o===e?4:0;break;case V.getCharCode(":"):i=o===e?5:0;break;default:i=0}i>0?(n=r.updateStateListForPair(n,a,i),a++):n=this.updateStateListForChar(n,a)}var s=Aa.min(n,function(u,c){return u.getBitCount()-c.getBitCount()});return s.toBitArray(this.text)},r.prototype.updateStateListForChar=function(e,t){var n,a,i=[];try{for(var o=tr(e),s=o.next();!s.done;s=o.next()){var u=s.value;this.updateStateForChar(u,t,i)}}catch(c){n={error:c}}finally{try{s&&!s.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}return r.simplifyStates(i)},r.prototype.updateStateForChar=function(e,t,n){for(var a=this.text[t]&255,i=Lr[e.getMode()][a]>0,o=null,s=0;s<=Je;s++){var u=Lr[s][a];if(u>0){if(o==null&&(o=e.endBinaryShift(t)),!i||s===e.getMode()||s===$e){var c=o.latchAndAppend(s,u);n.push(c)}if(!i&&Ti[e.getMode()][s]>=0){var l=o.shiftAndAppend(s,u);n.push(l)}}}if(e.getBinaryShiftByteCount()>0||Lr[e.getMode()][a]===0){var f=e.addBinaryShiftChar(t);n.push(f)}},r.updateStateListForPair=function(e,t,n){var a,i,o=[];try{for(var s=tr(e),u=s.next();!u.done;u=s.next()){var c=u.value;this.updateStateForPair(c,t,n,o)}}catch(l){a={error:l}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(a)throw a.error}}return this.simplifyStates(o)},r.updateStateForPair=function(e,t,n,a){var i=e.endBinaryShift(t);if(a.push(i.latchAndAppend(Je,n)),e.getMode()!==Je&&a.push(i.shiftAndAppend(Je,n)),n===3||n===4){var o=i.latchAndAppend($e,16-n).latchAndAppend($e,1);a.push(o)}if(e.getBinaryShiftByteCount()>0){var s=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);a.push(s)}},r.simplifyStates=function(e){var t,n,a,i,o=[];try{for(var s=tr(e),u=s.next();!u.done;u=s.next()){var c=u.value,l=!0,f=function(g){if(g.isBetterThanOrEqualTo(c))return l=!1,"break";c.isBetterThanOrEqualTo(g)&&(o=o.filter(function(w){return w!==g}))};try{for(var d=(a=void 0,tr(o)),h=d.next();!h.done;h=d.next()){var v=h.value,x=f(v);if(x==="break")break}}catch(g){a={error:g}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(a)throw a.error}}l&&o.push(c)}}catch(g){t={error:g}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return o},r})(),k0=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function r(){}return r.encodeBytes=function(e){return r.encode(e,r.DEFAULT_EC_PERCENT,r.DEFAULT_AZTEC_LAYERS)},r.encode=function(e,t,n){var a=new P0(e).encode(),i=U.truncDivision(a.getSize()*t,100)+11,o=a.getSize()+i,s,u,c,l,f;if(n!==r.DEFAULT_AZTEC_LAYERS){if(s=n<0,u=Math.abs(n),u>(s?r.MAX_NB_BITS_COMPACT:r.MAX_NB_BITS))throw new M(V.format("Illegal value %s for layers",n));c=r.totalBitsInLayer(u,s),l=r.WORD_SIZE[u];var d=c-c%l;if(f=r.stuffBits(a,l),f.getSize()+i>d)throw new M("Data to large for user specified layer");if(s&&f.getSize()>l*64)throw new M("Data to large for user specified layer")}else{l=0,f=null;for(var h=0;;h++){if(h>r.MAX_NB_BITS)throw new M("Data too large for an Aztec code");if(s=h<=3,u=s?h+1:h,c=r.totalBitsInLayer(u,s),!(o>c)){(f==null||l!==r.WORD_SIZE[u])&&(l=r.WORD_SIZE[u],f=r.stuffBits(a,l));var d=c-c%l;if(!(s&&f.getSize()>l*64)&&f.getSize()+i<=d)break}}}var v=r.generateCheckWords(f,c,l),x=f.getSize()/l,g=r.generateModeMessage(s,u,x),w=(s?11:14)+u*4,y=new Int32Array(w),_;if(s){_=w;for(var h=0;h<y.length;h++)y[h]=h}else{_=w+1+2*U.truncDivision(U.truncDivision(w,2)-1,15);for(var b=U.truncDivision(w,2),E=U.truncDivision(_,2),h=0;h<b;h++){var S=h+U.truncDivision(h,15);y[b-h-1]=E-S-1,y[b+h]=E+S+1}}for(var O=new Qe(_),h=0,N=0;h<u;h++){for(var T=(u-h)*4+(s?9:12),D=0;D<T;D++)for(var j=D*2,L=0;L<2;L++)v.get(N+j+L)&&O.set(y[h*2+L],y[h*2+D]),v.get(N+T*2+j+L)&&O.set(y[h*2+D],y[w-1-h*2-L]),v.get(N+T*4+j+L)&&O.set(y[w-1-h*2-L],y[w-1-h*2-D]),v.get(N+T*6+j+L)&&O.set(y[w-1-h*2-D],y[h*2+L]);N+=T*8}if(r.drawModeMessage(O,s,_,g),s)r.drawBullsEye(O,U.truncDivision(_,2),5);else{r.drawBullsEye(O,U.truncDivision(_,2),7);for(var h=0,D=0;h<U.truncDivision(w,2)-1;h+=15,D+=16)for(var L=U.truncDivision(_,2)&1;L<_;L+=2)O.set(U.truncDivision(_,2)-D,L),O.set(U.truncDivision(_,2)+D,L),O.set(L,U.truncDivision(_,2)-D),O.set(L,U.truncDivision(_,2)+D)}var q=new w0;return q.setCompact(s),q.setSize(_),q.setLayers(u),q.setCodeWords(x),q.setMatrix(O),q},r.drawBullsEye=function(e,t,n){for(var a=0;a<n;a+=2)for(var i=t-a;i<=t+a;i++)e.set(i,t-a),e.set(i,t+a),e.set(t-a,i),e.set(t+a,i);e.set(t-n,t-n),e.set(t-n+1,t-n),e.set(t-n,t-n+1),e.set(t+n,t-n),e.set(t+n,t-n+1),e.set(t+n,t+n-1)},r.generateModeMessage=function(e,t,n){var a=new be;return e?(a.appendBits(t-1,2),a.appendBits(n-1,6),a=r.generateCheckWords(a,28,4)):(a.appendBits(t-1,5),a.appendBits(n-1,11),a=r.generateCheckWords(a,40,4)),a},r.drawModeMessage=function(e,t,n,a){var i=U.truncDivision(n,2);if(t)for(var o=0;o<7;o++){var s=i-3+o;a.get(o)&&e.set(s,i-5),a.get(o+7)&&e.set(i+5,s),a.get(20-o)&&e.set(s,i+5),a.get(27-o)&&e.set(i-5,s)}else for(var o=0;o<10;o++){var s=i-5+o+U.truncDivision(o,5);a.get(o)&&e.set(s,i-7),a.get(o+10)&&e.set(i+7,s),a.get(29-o)&&e.set(s,i+7),a.get(39-o)&&e.set(i-7,s)}},r.generateCheckWords=function(e,t,n){var a,i,o=e.getSize()/n,s=new Ii(r.getGF(n)),u=U.truncDivision(t,n),c=r.bitsToWords(e,n,u);s.encode(c,u-o);var l=t%n,f=new be;f.appendBits(0,l);try{for(var d=k0(Array.from(c)),h=d.next();!h.done;h=d.next()){var v=h.value;f.appendBits(v,n)}}catch(x){a={error:x}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(a)throw a.error}}return f},r.bitsToWords=function(e,t,n){var a=new Int32Array(n),i,o;for(i=0,o=e.getSize()/t;i<o;i++){for(var s=0,u=0;u<t;u++)s|=e.get(i*t+u)?1<<t-u-1:0;a[i]=s}return a},r.getGF=function(e){switch(e){case 4:return Le.AZTEC_PARAM;case 6:return Le.AZTEC_DATA_6;case 8:return Le.AZTEC_DATA_8;case 10:return Le.AZTEC_DATA_10;case 12:return Le.AZTEC_DATA_12;default:throw new M("Unsupported word size "+e)}},r.stuffBits=function(e,t){for(var n=new be,a=e.getSize(),i=(1<<t)-2,o=0;o<a;o+=t){for(var s=0,u=0;u<t;u++)(o+u>=a||e.get(o+u))&&(s|=1<<t-1-u);(s&i)===i?(n.appendBits(s&i,t),o--):(s&i)===0?(n.appendBits(s|1,t),o--):n.appendBits(s,t)}return n},r.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},r.DEFAULT_EC_PERCENT=33,r.DEFAULT_AZTEC_LAYERS=0,r.MAX_NB_BITS=32,r.MAX_NB_BITS_COMPACT=4,r.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),r})();var M0=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),B0=(function(r){M0(e,r);function e(t){var n=r.call(this,t.width,t.height)||this;return n.canvas=t,n.tempCanvasElement=null,n.buffer=e.makeBufferFromCanvasImageData(t),n}return e.makeBufferFromCanvasImageData=function(t){var n;try{n=t.getContext("2d",{willReadFrequently:!0})}catch{n=t.getContext("2d")}if(!n)throw new Error("Couldn't get canvas context.");var a=n.getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(a.data,t.width,t.height)},e.toGrayscaleBuffer=function(t,n,a){for(var i=new Uint8ClampedArray(n*a),o=0,s=0,u=t.length;o<u;o+=4,s++){var c=void 0,l=t[o+3];if(l===0)c=255;else{var f=t[o],d=t[o+1],h=t[o+2];c=306*f+601*d+117*h+512>>10}i[s]=c}return i},e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new M("Requested row is outside the image: "+t);var a=this.getWidth(),i=t*a;return n===null?n=this.buffer.slice(i,i+a):(n.length<a&&(n=new Uint8ClampedArray(a)),n.set(this.buffer.slice(i,i+a))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,a,i){return r.prototype.crop.call(this,t,n,a,i),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new mr(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var n=this.getTempCanvasElement();if(!n)throw new Error("Could not create a Canvas element.");var a=t*e.DEGREE_TO_RADIANS,i=this.canvas.width,o=this.canvas.height,s=Math.ceil(Math.abs(Math.cos(a))*i+Math.abs(Math.sin(a))*o),u=Math.ceil(Math.abs(Math.sin(a))*i+Math.abs(Math.cos(a))*o);n.width=s,n.height=u;var c=n.getContext("2d");if(!c)throw new Error("Could not create a Canvas Context element.");return c.translate(s/2,u/2),c.rotate(a),c.drawImage(this.canvas,i/-2,o/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.DEGREE_TO_RADIANS=Math.PI/180,e})(Wt);function Ri(){return typeof navigator<"u"}function L0(){return Ri()&&!!navigator.mediaDevices}function F0(){return!!(L0()&&navigator.mediaDevices.enumerateDevices)}var At=function(){return At=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},At.apply(this,arguments)},le=function(r,e,t,n){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function s(l){try{c(n.next(l))}catch(f){o(f)}}function u(l){try{c(n.throw(l))}catch(f){o(f)}}function c(l){l.done?i(l.value):a(l.value).then(s,u)}c((n=n.apply(r,e||[])).next())})},fe=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,a&&(i=c[0]&2?a.return:c[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,c[1])).done)return i;switch(a=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,a=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){t.label=c[1];break}if(c[0]===6&&t.label<i[1]){t.label=i[1],i=c;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(c);break}i[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(l){c=[6,l],a=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Fr=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},j0={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},Ot=(function(){function r(e,t,n){t===void 0&&(t=new Map),n===void 0&&(n={}),this.reader=e,this.hints=t,this.options=At(At({},j0),n)}return Object.defineProperty(r.prototype,"possibleFormats",{set:function(e){this.hints.set(Q.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),r.addVideoSource=function(e,t){try{e.srcObject=t}catch{console.error("got interrupted by new loading request")}},r.mediaStreamSetTorch=function(e,t){return le(this,void 0,void 0,function(){return fe(this,function(n){switch(n.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:t?"flash":"off",torch:!!t}]})];case 1:return n.sent(),[2]}})})},r.mediaStreamIsTorchCompatible=function(e){var t,n,a=e.getVideoTracks();try{for(var i=Fr(a),o=i.next();!o.done;o=i.next()){var s=o.value;if(r.mediaStreamIsTorchCompatibleTrack(s))return!0}}catch(u){t={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return!1},r.mediaStreamIsTorchCompatibleTrack=function(e){try{var t=e.getCapabilities();return"torch"in t}catch(n){return console.error(n),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},r.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},r.getMediaElement=function(e,t){var n=document.getElementById(e);if(!n)throw new de("element with id '".concat(e,"' not found"));if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new de("element with id '".concat(e,"' must be an ").concat(t," element"));return n},r.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return r.getMediaElement(e,"video");if(!e&&typeof document<"u"){var t=document.createElement("video");return t.width=200,t.height=200,t}throw new Error("Couldn't get videoElement from videoSource!")},r.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return r.getMediaElement(e,"img");if(typeof e>"u"){var t=document.createElement("img");return t.width=200,t.height=200,t}throw new Error("Couldn't get imageElement from imageSource!")},r.prepareVideoElement=function(e){var t=r.createVideoElement(e);return t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},r.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},r.createBinaryBitmapFromCanvas=function(e){var t=new B0(e),n=new vi(t);return new pi(n)},r.drawImageOnCanvas=function(e,t){e.drawImage(t,0,0)},r.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},r.createCaptureCanvas=function(e){if(!e)throw new de("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var t=document.createElement("canvas"),n=r.getMediaElementDimensions(e),a=n.width,i=n.height;return t.style.width=a+"px",t.style.height=i+"px",t.width=a,t.height=i,t},r.tryPlayVideo=function(e){return le(this,void 0,void 0,function(){var t;return fe(this,function(n){switch(n.label){case 0:if(e?.ended)return console.error("Trying to play video that has ended."),[2,!1];if(r.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.play()];case 2:return n.sent(),[2,!0];case 3:return t=n.sent(),console.warn("It was not possible to play the video.",t),[2,!1];case 4:return[2]}})})},r.createCanvasFromMediaElement=function(e){var t=r.createCaptureCanvas(e),n=t.getContext("2d");if(!n)throw new Error("Couldn't find Canvas 2D Context.");return r.drawImageOnCanvas(n,e),t},r.createBinaryBitmapFromMediaElem=function(e){var t=r.createCanvasFromMediaElement(e);return r.createBinaryBitmapFromCanvas(t)},r.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},r.listVideoInputDevices=function(){return le(this,void 0,void 0,function(){var e,t,n,a,i,o,s,u,c,l,f,d;return fe(this,function(h){switch(h.label){case 0:if(!Ri())throw new Error("Can't enumerate devices, navigator is not present.");if(!F0())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=h.sent(),t=[];try{for(n=Fr(e),a=n.next();!a.done;a=n.next())i=a.value,o=i.kind==="video"?"videoinput":i.kind,o==="videoinput"&&(s=i.deviceId||i.id,u=i.label||"Video device ".concat(t.length+1),c=i.groupId,l={deviceId:s,label:u,kind:o,groupId:c},t.push(l))}catch(v){f={error:v}}finally{try{a&&!a.done&&(d=n.return)&&d.call(n)}finally{if(f)throw f.error}}return[2,t]}})})},r.findDeviceById=function(e){return le(this,void 0,void 0,function(){var t;return fe(this,function(n){switch(n.label){case 0:return[4,r.listVideoInputDevices()];case 1:return t=n.sent(),t?[2,t.find(function(a){return a.deviceId===e})]:[2]}})})},r.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},r.releaseAllStreams=function(){r.streamTracker.length!==0&&r.streamTracker.forEach(function(e){e.getTracks().forEach(function(t){return t.stop()})}),r.streamTracker=[]},r.playVideoOnLoadAsync=function(e,t){return le(this,void 0,void 0,function(){var n;return fe(this,function(a){switch(a.label){case 0:return[4,r.tryPlayVideo(e)];case 1:return n=a.sent(),n?[2,!0]:[2,new Promise(function(i,o){var s=setTimeout(function(){r.isVideoPlaying(e)||(o(!1),e.removeEventListener("canplay",u))},t),u=function(){r.tryPlayVideo(e).then(function(c){clearTimeout(s),e.removeEventListener("canplay",u),i(c)})};e.addEventListener("canplay",u)})]}})})},r.attachStreamToVideo=function(e,t,n){return n===void 0&&(n=5e3),le(this,void 0,void 0,function(){var a;return fe(this,function(i){switch(i.label){case 0:return a=r.prepareVideoElement(t),r.addVideoSource(a,e),[4,r.playVideoOnLoadAsync(a,n)];case 1:return i.sent(),[2,a]}})})},r._waitImageLoad=function(e){return new Promise(function(t,n){var a=1e4,i=setTimeout(function(){r.isImageLoaded(e)||(e.removeEventListener("load",o),n())},a),o=function(){clearTimeout(i),e.removeEventListener("load",o),t()};e.addEventListener("load",o)})},r.checkCallbackFnOrThrow=function(e){if(!e)throw new de("`callbackFn` is a required parameter, you cannot capture results without it.")},r.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(t){return t.stop()}),e=void 0},r.prototype.decode=function(e){var t=r.createCanvasFromMediaElement(e);return this.decodeFromCanvas(t)},r.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},r.prototype.decodeFromCanvas=function(e){var t=r.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(t)},r.prototype.decodeFromImageElement=function(e){return le(this,void 0,void 0,function(){var t;return fe(this,function(n){switch(n.label){case 0:if(!e)throw new de("An image element must be provided.");return t=r.prepareImageElement(e),[4,this._decodeOnLoadImage(t)];case 1:return[2,n.sent()]}})})},r.prototype.decodeFromImageUrl=function(e){return le(this,void 0,void 0,function(){var t;return fe(this,function(n){switch(n.label){case 0:if(!e)throw new de("An URL must be provided.");t=r.prepareImageElement(),t.src=e,n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.decodeFromImageElement(t)];case 2:return[2,n.sent()];case 3:return r.destroyImageElement(t),[7];case 4:return[2]}})})},r.prototype.decodeFromConstraints=function(e,t,n){return le(this,void 0,void 0,function(){var a,i;return fe(this,function(o){switch(o.label){case 0:return r.checkCallbackFnOrThrow(n),[4,this.getUserMedia(e)];case 1:a=o.sent(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.decodeFromStream(a,t,n)];case 3:return[2,o.sent()];case 4:throw i=o.sent(),r.disposeMediaStream(a),i;case 5:return[2]}})})},r.prototype.decodeFromStream=function(e,t,n){return le(this,void 0,void 0,function(){var a,i,o,s,u,c,l,f,d,h=this;return fe(this,function(v){switch(v.label){case 0:return r.checkCallbackFnOrThrow(n),a=this.options.tryPlayVideoTimeout,[4,r.attachStreamToVideo(e,t,a)];case 1:return i=v.sent(),o=function(){r.disposeMediaStream(e),r.cleanVideoSource(i)},s=this.scan(i,n,o),u=e.getVideoTracks(),c=At(At({},s),{stop:function(){s.stop()},streamVideoConstraintsApply:function(x,g){return le(this,void 0,void 0,function(){var w,y,_,b,E,S,O;return fe(this,function(N){switch(N.label){case 0:w=g?u.filter(g):u,N.label=1;case 1:N.trys.push([1,6,7,8]),y=Fr(w),_=y.next(),N.label=2;case 2:return _.done?[3,5]:(b=_.value,[4,b.applyConstraints(x)]);case 3:N.sent(),N.label=4;case 4:return _=y.next(),[3,2];case 5:return[3,8];case 6:return E=N.sent(),S={error:E},[3,8];case 7:try{_&&!_.done&&(O=y.return)&&O.call(y)}finally{if(S)throw S.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(x){return u.find(x).getConstraints()},streamVideoSettingsGet:function(x){return u.find(x).getSettings()},streamVideoCapabilitiesGet:function(x){return u.find(x).getCapabilities()}}),l=r.mediaStreamIsTorchCompatible(e),l&&(f=u?.find(function(x){return r.mediaStreamIsTorchCompatibleTrack(x)}),d=function(x){return le(h,void 0,void 0,function(){return fe(this,function(g){switch(g.label){case 0:return[4,r.mediaStreamSetTorch(f,x)];case 1:return g.sent(),[2]}})})},c.switchTorch=d,c.stop=function(){return le(h,void 0,void 0,function(){return fe(this,function(x){switch(x.label){case 0:return s.stop(),[4,d(!1)];case 1:return x.sent(),[2]}})})}),[2,c]}})})},r.prototype.decodeFromVideoDevice=function(e,t,n){return le(this,void 0,void 0,function(){var a,i;return fe(this,function(o){switch(o.label){case 0:return r.checkCallbackFnOrThrow(n),e?a={deviceId:{exact:e}}:a={facingMode:"environment"},i={video:a},[4,this.decodeFromConstraints(i,t,n)];case 1:return[2,o.sent()]}})})},r.prototype.decodeFromVideoElement=function(e,t){return le(this,void 0,void 0,function(){var n,a;return fe(this,function(i){switch(i.label){case 0:if(r.checkCallbackFnOrThrow(t),!e)throw new de("A video element must be provided.");return n=r.prepareVideoElement(e),a=this.options.tryPlayVideoTimeout,[4,r.playVideoOnLoadAsync(n,a)];case 1:return i.sent(),[2,this.scan(n,t)]}})})},r.prototype.decodeFromVideoUrl=function(e,t){return le(this,void 0,void 0,function(){var n,a,i,o;return fe(this,function(s){switch(s.label){case 0:if(r.checkCallbackFnOrThrow(t),!e)throw new de("An URL must be provided.");return n=r.prepareVideoElement(),n.src=e,a=function(){r.cleanVideoSource(n)},i=this.options.tryPlayVideoTimeout,[4,r.playVideoOnLoadAsync(n,i)];case 1:return s.sent(),o=this.scan(n,t,a),[2,o]}})})},r.prototype.decodeOnceFromConstraints=function(e,t){return le(this,void 0,void 0,function(){var n;return fe(this,function(a){switch(a.label){case 0:return[4,this.getUserMedia(e)];case 1:return n=a.sent(),[4,this.decodeOnceFromStream(n,t)];case 2:return[2,a.sent()]}})})},r.prototype.decodeOnceFromStream=function(e,t){return le(this,void 0,void 0,function(){var n,a,i;return fe(this,function(o){switch(o.label){case 0:return n=!!t,[4,r.attachStreamToVideo(e,t)];case 1:a=o.sent(),o.label=2;case 2:return o.trys.push([2,,4,5]),[4,this.scanOneResult(a)];case 3:return i=o.sent(),[2,i];case 4:return n||r.cleanVideoSource(a),[7];case 5:return[2]}})})},r.prototype.decodeOnceFromVideoDevice=function(e,t){return le(this,void 0,void 0,function(){var n,a;return fe(this,function(i){switch(i.label){case 0:return e?n={deviceId:{exact:e}}:n={facingMode:"environment"},a={video:n},[4,this.decodeOnceFromConstraints(a,t)];case 1:return[2,i.sent()]}})})},r.prototype.decodeOnceFromVideoElement=function(e){return le(this,void 0,void 0,function(){var t,n;return fe(this,function(a){switch(a.label){case 0:if(!e)throw new de("A video element must be provided.");return t=r.prepareVideoElement(e),n=this.options.tryPlayVideoTimeout,[4,r.playVideoOnLoadAsync(t,n)];case 1:return a.sent(),[4,this.scanOneResult(t)];case 2:return[2,a.sent()]}})})},r.prototype.decodeOnceFromVideoUrl=function(e){return le(this,void 0,void 0,function(){var t,n;return fe(this,function(a){switch(a.label){case 0:if(!e)throw new de("An URL must be provided.");t=r.prepareVideoElement(),t.src=e,n=this.decodeOnceFromVideoElement(t),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,n];case 2:return[2,a.sent()];case 3:return r.cleanVideoSource(t),[7];case 4:return[2]}})})},r.prototype.scanOneResult=function(e,t,n,a){var i=this;return t===void 0&&(t=!0),n===void 0&&(n=!0),a===void 0&&(a=!0),new Promise(function(o,s){i.scan(e,function(u,c,l){if(u){o(u),l.stop();return}if(c){if(c instanceof I&&t||c instanceof he&&n||c instanceof R&&a)return;l.stop(),s(c)}})})},r.prototype.scan=function(e,t,n){var a=this;r.checkCallbackFnOrThrow(t);var i=r.createCaptureCanvas(e),o;try{o=i.getContext("2d",{willReadFrequently:!0})}catch{o=i.getContext("2d")}if(!o)throw new Error("Couldn't create canvas for visual element scan.");var s=function(){o=void 0,i=void 0},u=!1,c,l=function(){u=!0,clearTimeout(c),s(),n&&n()},f={stop:l},d=function(){if(!u)try{r.drawImageOnCanvas(o,e);var h=a.decodeFromCanvas(i);t(h,void 0,f),c=setTimeout(d,a.options.delayBetweenScanSuccess)}catch(w){t(void 0,w,f);var v=w instanceof he,x=w instanceof R,g=w instanceof I;if(v||x||g){c=setTimeout(d,a.options.delayBetweenScanAttempts);return}s(),n&&n(w)}};return d(),f},r.prototype._decodeOnLoadImage=function(e){return le(this,void 0,void 0,function(){var t;return fe(this,function(n){switch(n.label){case 0:return t=r.isImageLoaded(e),t?[3,2]:[4,r._waitImageLoad(e)];case 1:n.sent(),n.label=2;case 2:return[2,this.decode(e)]}})})},r.prototype.getUserMedia=function(e){return le(this,void 0,void 0,function(){var t;return fe(this,function(n){switch(n.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return t=n.sent(),r.streamTracker.push(t),[2,t]}})})},r.streamTracker=[],r})(),U0=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){U0(e,r);function e(t,n){return r.call(this,new cr,t,n)||this}return e})(Ot);var V0=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){V0(e,r);function e(t,n){return r.call(this,new wt(t),t,n)||this}return e})(Ot);var H0=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){H0(e,r);function e(t,n){return r.call(this,new fr,t,n)||this}return e})(Ot);var G0=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),ba=(function(r){G0(e,r);function e(t,n){var a=this,i=new Si;return i.setHints(t),a=r.call(this,i,t,n)||this,a.reader=i,a}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(t){this.hints.set(Q.POSSIBLE_FORMATS,t),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e.prototype.setHints=function(t){this.hints=t,this.reader.setHints(this.hints)},e})(Ot),$0=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){$0(e,r);function e(t,n){return r.call(this,new hr,t,n)||this}return e})(Ot);var W0=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){W0(e,r);function e(t,n){return r.call(this,new dr,t,n)||this}return e})(Ot);const jr=1e3,X0=[P.QR_CODE,P.CODE_128,P.CODE_39,P.CODE_93,P.ITF,P.EAN_13,P.EAN_8,P.UPC_A,P.UPC_E,P.UPC_EAN_EXTENSION];function z0(r){if(!r)return!1;if(`${r.name||""}`.toLowerCase().includes("notfound"))return!0;const t=`${r.message||""}`.toLowerCase();return t.includes("no multiformat readers")||t.includes("not found")}function Y0({open:r,onClose:e,onDetected:t}){const n=A.useRef(null),a=A.useRef(null),i=A.useRef(null),[o,s]=A.useState([]),[u,c]=A.useState(""),[l,f]=A.useState(!1),[d,h]=A.useState(""),[v,x]=A.useState(""),g=A.useRef(0),w=A.useRef(0),y=A.useCallback(()=>{a.current?.stop(),a.current=null,i.current?.reset?.(),i.current=null},[]);return A.useEffect(()=>{if(!r){y(),s([]),c(""),h(""),x(""),w.current=0,g.current=0,f(!1);return}let _=!1;async function b(){h("");try{if(!navigator?.mediaDevices?.getUserMedia){h("This browser does not support camera access. Please try a different browser."),x(""),f(!1);return}if(f(!0),x("Requesting camera access‚Ä¶"),(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(O=>O.stop()),_)return;const S=await ba.listVideoInputDevices();if(_)return;if(s(S),!S.length){h("No camera devices were detected. Please connect a camera and try again."),f(!1);return}c(O=>O||S[0]?.deviceId||""),x("")}catch(E){console.error("Barcode scanner: unable to enumerate video devices",E),_||(E?.name==="NotAllowedError"||E?.name==="SecurityError"?h("Camera access was denied. Please allow camera permissions in your browser settings and try again."):h("Unable to access the camera. Please check browser permissions and try again."),x(""),f(!1))}}return b(),()=>{_=!0,y()}},[r,y]),A.useEffect(()=>{if(!r||!u)return;const _=new Map;_.set(Q.POSSIBLE_FORMATS,X0),_.set(Q.TRY_HARDER,!0);const b=new ba(_,jr);i.current=b;let E=!0;return w.current=0,g.current=0,f(!0),h(""),x("Preparing camera‚Ä¶"),b.decodeFromVideoDevice(u,n.current,(S,O,N)=>{if(E){if(S){const T=S.getText?.()||"";T&&t?.(T),N?.stop(),e?.()}if(O){if(z0(O)){const D=Date.now();if(D-g.current>=jr){g.current=D;const j=w.current+1;w.current=j,x(`Still scanning‚Ä¶ attempt ${j}.`)}h("");return}console.error("Barcode scanner: decode error",O),h("Unable to read the barcode. Try holding the product steady and ensure it fills the frame.");const T=Date.now();if(T-g.current>=jr){g.current=T;const D=w.current+1;w.current=D,x(`Retrying in a second‚Ä¶ attempt ${D}.`)}}}}).then(S=>{if(!E){S?.stop();return}a.current=S,f(!1),x("Scanning for a barcode‚Ä¶")}).catch(S=>{E&&(console.error("Barcode scanner: failed to start video stream",S),h("Unable to start the camera stream. Please verify permissions and refresh the page."),f(!1))}),()=>{E=!1,f(!1),y()}},[u,e,t,r,y]),r?p.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/70 px-4 py-8",children:p.jsxs("div",{className:"relative w-full max-w-2xl rounded-3xl bg-white p-6 shadow-xl dark:bg-slate-900",children:[p.jsx("button",{type:"button",onClick:e,className:"absolute right-4 top-4 inline-flex h-9 w-9 items-center justify-center rounded-full bg-slate-100 text-slate-600 hover:bg-slate-200 focus:outline-none focus:ring-2 focus:ring-brand-500 dark:bg-slate-800 dark:text-slate-200 dark:hover:bg-slate-700","aria-label":"Close barcode scanner",children:p.jsx(to,{className:"h-5 w-5"})}),p.jsxs("div",{className:"flex flex-col gap-4",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Scan a barcode"}),p.jsx("p",{className:"mt-1 text-sm text-slate-600 dark:text-slate-300",children:"Allow camera access so we can scan the product barcode and look it up for you."})]}),o.length>1&&p.jsxs("label",{className:"flex flex-col gap-1 text-sm text-slate-700 dark:text-slate-200",children:["Camera",p.jsx("select",{className:"rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",value:u,onChange:_=>c(_.target.value),children:o.map(_=>p.jsx("option",{value:_.deviceId,children:_.label||`Camera ${_.deviceId.slice(-4)}`},_.deviceId))})]}),p.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-black shadow-inner",children:[p.jsx("video",{ref:n,className:"h-full w-full object-cover",autoPlay:!0,muted:!0,playsInline:!0}),l&&p.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900/60",children:p.jsx("span",{className:"rounded-full bg-white/90 px-4 py-2 text-sm font-medium text-slate-700 shadow",children:"Initializing camera‚Ä¶"})})]}),p.jsxs("div",{className:"flex flex-col gap-2",children:[d&&p.jsx("p",{className:"rounded-xl border border-amber-300 bg-amber-50 px-3 py-2 text-sm text-amber-700 dark:border-amber-500/60 dark:bg-amber-500/10 dark:text-amber-200",children:d}),p.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:v||"Once a barcode is detected it will automatically populate the chat."})]})]})]})}):null}const Ea={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var Ca={};const Ur=typeof import.meta<"u"&&Ea?Ea:void 0,Vr=typeof globalThis<"u"&&Ca?Ca:void 0;function Z0(r){if(Ur&&Ur[r]!==void 0)return Ur[r];if(Vr&&Vr[r]!==void 0)return Vr[r]}const K0=(Z0("VITE_CHAT_BASE_URL")||"https://groq-endpoint.louispaulet13.workers.dev").replace(/\/$/,"");function Hr(r="",e=180){if(!r)return"";const t=String(r).trim();return t.length<=e?t:`${t.slice(0,e)}...`}async function Di(r,e,{signal:t,model:n,baseUrl:a}={}){const i=r?.logLabel||"Chat",o=(a||r?.defaultBaseUrl||K0||"").replace(/\/$/,"");if(!o)throw new Error("Missing chat service base URL. Set VITE_CHAT_BASE_URL or provide an override.");const s=`${o}/chat`,u=typeof performance<"u"&&typeof performance.now=="function"?performance.now():Date.now(),l=e?.[e.length-1]?.content||"";console.log(`[${i}] ‚Üí POST %s ‚Äî model: %s ‚Äî prompt: %s`,s,n||"default",Hr(l,160));const f=n?{model:n,messages:e}:{messages:e};let d;try{d=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f),signal:t})}catch(y){throw new Error(`Request to ${i} service failed: ${y?.message||y}`)}const h=typeof performance<"u"&&typeof performance.now=="function"?performance.now():Date.now(),v=Math.round(h-u);let x="",g;if(typeof d.text=="function"){x=await d.text();try{g=JSON.parse(x)}catch{g=void 0}}else if(typeof d.json=="function"){g=await d.json();try{x=JSON.stringify(g)}catch{x="[object Object]"}}if(!d.ok){const y=d.statusText||"Unknown error",_=Hr(x||y,200);throw new Error(`Remote chat service returned ${d.status}: ${_}`)}if(!g)try{g=JSON.parse(x)}catch{throw new Error("Remote chat service returned invalid JSON")}let w=g?.choices?.[0]?.message?.content;if(!w&&typeof g?.output_text=="string"&&(w=g.output_text),w=typeof w=="string"?w.trim():"",!w)throw new Error("Remote chat service returned an empty message");return console.log(`[${i}] ‚Üê %s %d in %dms ‚Äî response: %s`,s,d.status,v,Hr(w,160)),{content:w,payload:g,status:d.status,duration:v,baseUrl:o}}const bn="allergy_notes",q0="allergyfinder_conversations",vr="allin_profile_name",bt="allin_chat_counts",Pi="allergyfinder",J0="allin_conversations_",Q0=["allergyfinder","stlviewer","pokedex"],En=3600*24*365,ki=2,ef=220,sn=3500;function _r(){return typeof document>"u"?null:document}function Ar(r){const e=_r();if(!e||!e.cookie)return"";const n=e.cookie.split("; ").find(a=>a.startsWith(`${r}=`));return n?n.split("=").slice(1).join("="):""}function br(r,e,t=En){const n=_r();if(!n)return;const a=encodeURIComponent(e),i=["path=/",`max-age=${t}`];n.cookie=`${r}=${a}; ${i.join("; ")}`}function rt(r){const e=_r();e&&(e.cookie=`${r}=; path=/; max-age=0`)}function Ht(){try{return decodeURIComponent(Ar(bn))}catch{return""}}function Mi(r,e=En){br(bn,r,e)}function Sa(){const r=Ht();return r?r.split(/\r?\n/).map(e=>e.replace(/^[-*+\s]+/,"").trim()).filter(e=>e.length>0).length:0}function tf(r){const e=r?.role==="assistant"?"assistant":"user",n=(typeof r?.content=="string"?r.content:"").slice(0,ef);if(!n)return null;const a=typeof r?.timestamp=="number"&&Number.isFinite(r.timestamp)?Math.round(r.timestamp):Date.now(),i={role:e,content:n,timestamp:a};return r?.sources&&Array.isArray(r.sources)&&r.sources.length>0&&(i.sources=r.sources.slice(0,2)),r?.error&&(i.error=!0),i}function rf(r){if(!r)return null;const t=(Array.isArray(r.messages)?r.messages:[]).slice(-6).map(tf).filter(Boolean);if(t.length===0)return null;const n=typeof r.title=="string"&&r.title.trim()?r.title.trim().slice(0,60):"Saved chat",a={id:typeof r.id=="string"?r.id:void 0,title:n,messages:t};return r?.createdAt&&(a.createdAt=r.createdAt),a}function Bi(r){return(Array.isArray(r)?r:[]).filter(Boolean).slice(0,ki).map(rf).filter(Boolean)}function Cn(r){return!r||r===Pi?q0:`${J0}${r}`}function Li(r){const e=Cn(r),t=Ar(e);if(!t)return[];try{const n=JSON.parse(decodeURIComponent(t));return Bi(n)}catch{return[]}}function Gr(r,e){const t=Cn(r),n=Bi(e);if(n.length===0){rt(t),In(r);return}let a=JSON.stringify(n);if(a.length>sn){const i=n.slice(0,1);if(a=JSON.stringify(i),a.length>sn){rt(t);return}}br(t,a),Fi(r,n.length)}function un(r){const e=Cn(r);rt(e),In(r)}function nf(){un(Pi)}function Er(){const r=Ar(bt);if(!r)return{};try{const e=decodeURIComponent(r),t=JSON.parse(e);if(t&&typeof t=="object")return t}catch{}return{}}function Sn(r){if(!r||Object.keys(r).length===0){rt(bt);return}try{const e=JSON.stringify(r);if(e.length>sn){rt(bt);return}br(bt,e)}catch{rt(bt)}}function Ia(){const r=Er(),e={allergyfinder:Number.parseInt(r.allergyfinder,10)||0,stlviewer:Number.parseInt(r.stlviewer,10)||0,pokedex:Number.parseInt(r.pokedex,10)||0};return Q0.forEach(t=>{if(e[t]===0){const n=Li(t);n.length>0&&(e[t]=n.length)}}),e}function af(r){if(!r)return;const e=Er();e[r]=(Number.parseInt(e[r],10)||0)+1,Sn(e)}function Fi(r,e){if(!r)return;const t=Math.max(0,Number(e)||0),n=Er(),a=Number.parseInt(n[r],10)||0;t===0&&a===0||t<=a||(n[r]=t,Sn(n))}function In(r){const e=Er();!r||!(r in e)||(delete e[r],Sn(e))}function of(){rt(bt)}function sf(){const r=Ar(vr);if(!r)return"";try{return decodeURIComponent(r)}catch{return""}}function Oa(r,e=En){if(!r){rt(vr);return}br(vr,r,e)}function uf(){rt(vr)}function cf(){const r=_r();!r||!r.cookie||r.cookie.split(";").forEach(e=>{const t=e.indexOf("="),n=t>-1?e.slice(0,t).trim():e.trim();n&&(r.cookie=`${n}=; path=/; max-age=0`)})}const lf=/„Äê[^„Äë]+„Äë/g;function ff(r){return r&&r.replace(lf,"")}function df(r,e){let t=e||"";return t&&(r?.id==="allergyfinder"&&(t=ff(t)),t.trim())}const Na=/openfoodfacts\.org\/(?:[a-z]{2}\/)?produit\/(\d{6,})/gi,Ta=/\b(\d{8,18})\b/g;function hf(r){if(!r)return null;const e=String(r);Na.lastIndex=0;let t;for(;t=Na.exec(e);){const o=t[1];if(o)return o}const n=e.replace(/[^0-9]/g,""),a=e.replace(/[0-9\s-]/g,"");if(n.length>=8&&n.length<=18&&!a)return n;Ta.lastIndex=0;const i=Ta.exec(e);return i&&i[1]?i[1]:null}async function pf(r,e,{signal:t}={}){const n=typeof r=="string"?r.trim().replace(/\/$/,""):"";if(!n||!e)return null;const a=`${n}/flavor-finder/${encodeURIComponent(e)}`;console.log(`Calling flavor finder API: ${a}`);let i;try{i=await fetch(a,{method:"GET",headers:{Accept:"application/json"},signal:t})}catch(u){const c=new Error(`Flavor Finder request failed: ${u?.message||u}`);throw c.cause=u,c}const o=await i.text();let s;try{s=JSON.parse(o)}catch{s=null}if(console.log("Flavor finder response:",s),!i.ok){const u=new Error(`Flavor Finder returned ${i.status}`);throw u.status=i.status,u.body=o,u}return s||null}function jt(r){return r==null?"":Array.isArray(r)?r.map(e=>e==null?"":typeof e=="string"?e.trim():typeof e=="number"||typeof e=="boolean"?String(e):"").filter(Boolean).join(", "):typeof r=="number"||typeof r=="boolean"?String(r):typeof r=="string"?r.trim():""}function Ve(r,e,t){const n=jt(t);n&&r.push(`${e}: ${n}`)}function vf(r,e){const t=Array.isArray(e?.products)?e.products:[];if(!r||t.length===0)return null;const n=[`OpenFoodFacts product context for barcode ${r}:`],a=jt(e?.resolvedUrl);a&&n.push(`Resolved URL: ${a}`);const i=jt(e?.resolvedSlug);i&&n.push(`Resolved slug: ${i}`);const o=jt(e?.sources);o&&n.push(`Sources: ${o}`);const s=3;return t.slice(0,s).forEach((u,c)=>{const l=jt(u?.name||u?.genericName||u?.generic_name||u?.product_name)||`Product ${c+1}`,f=`Product ${c+1}: ${l}`;n.push(f);const d=[];Ve(d,"Brands",u?.brands),Ve(d,"Quantity",u?.quantity),Ve(d,"Serving size",u?.servingSize||u?.serving_size),Ve(d,"Nutri-Score",u?.nutriscore||u?.nutrition_grade),Ve(d,"NOVA group",u?.nova),Ve(d,"Labels",u?.labels),Ve(d,"Categories",u?.categories),Ve(d,"Ingredients",u?.ingredients),Ve(d,"Allergens",u?.allergens),Ve(d,"Traces",u?.traces),Ve(d,"Additives",u?.additives),Ve(d,"Ingredients analysis",u?.ingredientsAnalysis||u?.ingredients_analysis),d.length>0&&d.forEach(h=>{n.push(`  - ${h}`)})}),t.length>s&&n.push(`(+ ${t.length-s} additional products omitted)`),n.join(`
`)}async function xf(r,e,{signal:t}={}){const n=hf(e);if(!n)return null;const a=await pf(r,n,{signal:t});if(!a)return null;const i=vf(n,a);return i?{code:n,summary:i,payload:a}:null}const gf=new Set(["allergyfinder","stlviewer","pokedex"]);function mf(r){const e=(r||"").trim();if(!e)throw new Error("Endpoint is required.");return e.replace(/\/$/,"")}function yf(r,e){const t=r?[{role:"system",content:r}]:[],n=(e||[]).filter(a=>a.role==="user"||a.role==="assistant").map(a=>({role:a.role,content:a.content}));return[...t,...n]}function ji(){return`conv-${Math.random().toString(16).slice(2,6)}-${Date.now()}`}function On(r,e){return{role:"assistant",name:e,timestamp:Date.now(),content:r?.greeting||`Hello from ${e}`}}function rr(r,e){return{id:ji(),title:"New chat",messages:[On(r,e)]}}function wf(r,e,t){return!Array.isArray(r)||r.length===0?[]:r.map((n,a)=>{const i=typeof n?.id=="string"?n.id:ji(),o=typeof n?.title=="string"&&n.title.trim()?n.title.trim():`Saved chat ${a+1}`,s=Array.isArray(n?.messages)?n.messages:[],u=s.length>0?s.map(c=>{const l=c?.role==="assistant"?"assistant":"user",f=typeof c?.content=="string"?c.content:"";return{role:l,content:f,name:l==="assistant"?t:"You",timestamp:typeof c?.timestamp=="number"&&Number.isFinite(c.timestamp)?c.timestamp:Date.now(),streaming:!1,error:!!c?.error,sources:Array.isArray(c?.sources)?c.sources:void 0}}):[On(e,t)];return{id:i,title:o,messages:u}}).filter(n=>Array.isArray(n.messages)&&n.messages.length>0)}function _f(r){const e=r?.name||"Groq Assistant",t=r?.defaultModel||r?.modelOptions?.[0]||"openai/gpt-oss-20b",n=A.useMemo(()=>{const B=r?.defaultBaseUrl||"";return B?B.replace(/\/$/,""):""},[r]),[a,i]=A.useState(t),[o,s]=A.useState(n),[u,c]=A.useState(()=>[rr(r,e)]),[l,f]=A.useState(()=>u[0]?.id),[d,h]=A.useState(""),[v,x]=A.useState(!1),g=A.useRef(null),w=A.useRef(!1),y=!!r?.id&&gf.has(r.id),_=!!r?.enableBarcodeScanner;A.useEffect(()=>{let B=[],H=!1;if(y){const ae=Li(r.id),oe=wf(ae,r,e);oe.length>0&&(B=oe,H=!0,Fi(r?.id,oe.length))}if(B.length===0&&(B=[rr(r,e)],y&&Gr(r.id,B)),c(B),f(B[0]?.id),h(""),i(r?.defaultModel||r?.modelOptions?.[0]||"openai/gpt-oss-20b"),s((r?.defaultBaseUrl||"").replace(/\/$/,"")),g.current){try{g.current.abort()}catch{}g.current=null}x(!1),w.current=H},[r,e,y]);const E=A.useMemo(()=>u.find(B=>B.id===l)||u[0],[u,l])?.messages||[],S=r?.promptPlaceholder||"Ask anything...";A.useEffect(()=>{if(y){if(w.current){w.current=!1;return}Gr(r.id,u)}},[u,r?.id,y]);function O(B,H){c(ae=>ae.map(oe=>oe.id===B?{...oe,title:H?.trim()?H.trim():oe.title}:oe))}function N(){if(v)return;const B=rr(r,e);c(H=>{const ae=[B,...H];return y?ae.slice(0,ki):ae}),f(B.id),h("")}function T(){if(v)return;const B=On(r,e);c(H=>H.map(ae=>ae.id===l?{...ae,title:"New chat",messages:[B]}:ae))}function D(){if(v)return;const B=rr(r,e);c([B]),f(B.id),h(""),y&&(Gr(r.id,[B]),w.current=!0)}function j(){if(v){try{g.current?.abort()}catch{}g.current=null,x(!1),c(B=>B.map(H=>{if(H.id!==l)return H;const ae=[...H.messages],oe=ae.length-1;return oe>=0&&ae[oe].role==="assistant"&&(ae[oe]={...ae[oe],content:"Request cancelled.",streaming:!1,error:!0}),{...H,messages:ae}}))}}async function L(B){const H=(typeof B=="string"?B:d).trim();if(!H||v)return;const oe={role:"user",name:"You",timestamp:Date.now(),content:H},pe=!!r?.id&&!E.some(ke=>ke.role==="user");let zt;try{const ke=r?.allowBaseUrlOverride?o:r?.defaultBaseUrl||o;zt=mf(ke)}catch(ke){c(Ee=>Ee.map(Oe=>{if(Oe.id!==l)return Oe;const gt=Oe.title==="New chat"&&H.slice(0,30)||Oe.title;return{...Oe,title:gt,messages:[...Oe.messages,oe,{role:"assistant",name:e,timestamp:Date.now(),content:`Warning: ${ke.message}`,error:!0}]}})),h("");return}c(ke=>ke.map(Ee=>{if(Ee.id!==l)return Ee;const Oe=Ee.title==="New chat"&&H.slice(0,30)||Ee.title;return{...Ee,title:Oe,messages:[...Ee.messages,oe,{role:"assistant",name:e,timestamp:Date.now(),content:"",streaming:!0}]}})),h(""),x(!0);const Yt=new AbortController;g.current=Yt;try{pe&&af(r.id);const ke=[...E,oe];let Ee=r?.systemPrompt;if(r?.id==="allergyfinder"){const ee=Ht();ee&&(Ee=[Ee,"User allergy notes saved via the Allergy Cookie Editor (markdown format):",ee].filter(Boolean).join(`

`))}let Oe=Ee;if(r?.id==="allergyfinder")try{const ee=await xf(zt,H,{signal:Yt.signal});ee?.summary?c(Me=>Me.map(ue=>{if(ue.id!==l)return ue;const ce=[...ue.messages],Ue=ce.length-1;return Ue>=0&&ce[Ue].role==="assistant"&&(ce[Ue]={...ce[Ue],content:ee.summary,streaming:!1,error:!1}),{...ue,messages:ce}})):Oe=[Oe,"I couldn't find any product with that barcode."].filter(Boolean).join(`

`)}catch(ee){ee?.name!=="AbortError"&&(console.error(`[${r?.logLabel||"Chat"}] flavor finder lookup failed`,ee),c(Me=>Me.map(ue=>{if(ue.id!==l)return ue;const ce=[...ue.messages],Ue=ce.length-1;return Ue>=0&&ce[Ue].role==="assistant"&&(ce[Ue]={...ce[Ue],content:"I couldn't find any product with that barcode.",streaming:!1,error:!0}),{...ue,messages:ce}})))}const gt=yf(Oe,ke),$=await Di(r,gt,{signal:Yt.signal,model:a,baseUrl:zt});s($.baseUrl);const se=df(r,$.content);c(ee=>ee.map(Me=>{if(Me.id!==l)return Me;const ue=[...Me.messages],ce=ue.length-1;return ce>=0&&ue[ce].role==="assistant"&&(ue[ce]={...ue[ce],content:se,streaming:!1,error:!1}),{...Me,messages:ue}}))}catch(ke){const Ee=ke?.name==="AbortError",Oe=Ee?"Request cancelled.":`Unable to reach the service. ${ke?.message||"Please try again."}`;Ee||console.error(`[${r?.logLabel||"Chat"}] request failed`,ke),c(gt=>gt.map($=>{if($.id!==l)return $;const se=[...$.messages],ee=se.length-1;return ee>=0&&se[ee].role==="assistant"&&(se[ee]={...se[ee],content:Oe,streaming:!1,error:!0}),{...$,messages:se}}))}finally{g.current=null,x(!1)}}const q=o||r?.defaultBaseUrl||"";return{activeId:l,assistantName:e,baseUrl:o,conversations:u,enableBarcodeScanner:_,endpointDisplay:q,handleClear:T,handleFlushHistory:D,handleNewConversation:N,handleRename:O,handleSend:L,handleStop:j,loading:v,messages:E,model:a,persistConversations:y,placeholder:S,prompt:d,setActiveId:f,setModel:i,setPrompt:h}}function Ra({experience:r}){const{activeId:e,assistantName:t,conversations:n,enableBarcodeScanner:a,endpointDisplay:i,handleClear:o,handleFlushHistory:s,handleNewConversation:u,handleRename:c,handleSend:l,handleStop:f,loading:d,messages:h,model:v,persistConversations:x,placeholder:g,prompt:w,setActiveId:y,setModel:_,setPrompt:b}=_f(r),[E,S]=A.useState(!1);function O(N){if(!a)return;const T=`${N}`.trim();T&&(S(!1),b(T),l(T))}return p.jsxs("div",{className:"grid gap-6 md:grid-cols-12",children:[p.jsx("aside",{className:"md:col-span-4 lg:col-span-3",children:p.jsx(Gs,{conversations:n,activeId:e,onSelect:y,onNew:u,onRename:c,onFlushHistory:x?s:void 0,disableNew:d,disableFlush:d})}),p.jsxs("section",{className:"md:col-span-8 lg:col-span-9 flex flex-col gap-4",children:[p.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white/80 p-4 shadow-sm dark:border-slate-800 dark:bg-slate-900/60",children:[p.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-end lg:justify-between",children:[p.jsxs("div",{className:"space-y-1",children:[p.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Session settings"}),p.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Select a model and endpoint for this workspace."})]}),p.jsx("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end",children:p.jsx(Qs,{value:v,onChange:_,options:r?.modelOptions||[]})})]}),p.jsxs("div",{className:"mt-3 grid gap-2 text-xs text-slate-500 dark:text-slate-400 sm:grid-cols-2",children:[p.jsxs("div",{children:[p.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-300",children:"Assistant"}),": ",t]}),p.jsxs("div",{children:[p.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-300",children:"Endpoint"}),": ",i||"Not configured"]})]})]}),p.jsx(qs,{experience:r,messages:h}),p.jsx(Js,{value:w,onChange:b,onSend:l,onStop:f,onClear:o,loading:d,placeholder:g,onOpenScanner:a?()=>S(!0):void 0})]}),a&&p.jsx(Y0,{open:E,onClose:()=>S(!1),onDetected:O})]})}const Af=`- Peanuts
- Shellfish
- Dairy
- Eggs
- Sesame
- Tree nuts`;function bf(){const[r,e]=A.useState(""),[t,n]=A.useState(null),a=A.useMemo(()=>Af,[]);A.useEffect(()=>{const s=Ht();e(s)},[]);function i(s){s.preventDefault(),Mi(r||""),n({type:"success",message:"Allergy notes saved to cookie. ‚úÖ"})}function o(){cf(),e(""),n({type:"warning",message:"All cookies cleared for this site. ‚ö†Ô∏è"})}return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"rounded-2xl border border-emerald-100 bg-emerald-50/60 p-6 text-emerald-900 dark:border-emerald-500/40 dark:bg-emerald-900/30 dark:text-emerald-100",children:[p.jsx("h2",{className:"text-xl font-semibold",children:"Allergy Cookie Editor üç™"}),p.jsx("p",{className:"mt-2 text-sm text-emerald-900/80 dark:text-emerald-100/80",children:"üìù Save a markdown list of allergens you or your household need to watch out for. The notes are stored in a browser cookie so you can quickly reference or reuse them when chatting with the assistant."})]}),p.jsxs("form",{className:"space-y-4",onSubmit:i,children:[p.jsxs("label",{className:"block space-y-2",htmlFor:"allergy-cookie-textarea",children:[p.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Allergy list üìã"}),p.jsx("textarea",{id:"allergy-cookie-textarea",name:"allergy-notes",value:r,onChange:s=>e(s.target.value),placeholder:a,rows:10,className:"w-full rounded-2xl border border-slate-300 bg-white/80 p-4 font-mono text-sm text-slate-800 placeholder:text-slate-400 focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-400 dark:border-slate-700 dark:bg-slate-900/60 dark:text-slate-100 dark:placeholder:text-slate-500 dark:focus:border-emerald-300 dark:focus:ring-emerald-300","aria-describedby":"allergy-cookie-helper"})]}),p.jsx("p",{id:"allergy-cookie-helper",className:"text-xs text-slate-500 dark:text-slate-400",children:`Tip: This information is stored in the "${bn}" browser cookie. Use markdown lists, headings, or bold text to organise allergens by family members. üí°`}),p.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[p.jsx("button",{type:"submit",className:"inline-flex items-center gap-2 rounded-xl bg-emerald-600 px-4 py-2 text-sm font-medium text-white shadow-sm transition hover:bg-emerald-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-emerald-500 disabled:opacity-50",children:"Save Cookie üíæ"}),p.jsx("button",{type:"button",onClick:o,className:"inline-flex items-center gap-2 rounded-xl border border-slate-300 px-4 py-2 text-sm font-medium text-slate-700 transition hover:border-slate-400 hover:bg-slate-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-slate-400 dark:border-slate-600 dark:text-slate-200 dark:hover:border-slate-500 dark:hover:bg-slate-800 dark:focus-visible:outline-slate-500",children:"Delete All Cookies üßπ"}),t?p.jsx("span",{role:"status",className:`text-sm ${t.type==="success"?"text-emerald-600 dark:text-emerald-300":"text-amber-600 dark:text-amber-300"}`,children:t.message}):null]})]})]})}const Da="inline-flex items-center rounded-xl px-4 py-2 text-sm font-medium transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2";function Pa(){return p.jsxs("nav",{"aria-label":"AllergyFinder sections",className:"flex flex-wrap items-center gap-2",children:[p.jsx(Ge,{to:"/allergyfinder",end:!0,className:({isActive:r})=>`${Da} ${r?"bg-emerald-600 text-white focus-visible:outline-emerald-400":"border border-transparent bg-white/80 text-emerald-700 hover:border-emerald-200 hover:bg-emerald-50 focus-visible:outline-emerald-300 dark:bg-slate-900/60 dark:text-emerald-200 dark:hover:bg-emerald-900/40"}`,children:"Chat Assistant"}),p.jsx(Ge,{to:"/allergyfinder/cookies",className:({isActive:r})=>`${Da} ${r?"bg-emerald-600 text-white focus-visible:outline-emerald-400":"border border-transparent bg-white/80 text-emerald-700 hover:border-emerald-200 hover:bg-emerald-50 focus-visible:outline-emerald-300 dark:bg-slate-900/60 dark:text-emerald-200 dark:hover:bg-emerald-900/40"}`,children:"Allergy Cookie Editor"})]})}const $r={allergyfinder:"AllergyFinder",stlviewer:"STL Studio",pokedex:"Pok√©dex"},ka=["Curious","Vigilant","Bright","Calm","Resilient","Swift","Gentle","Lively","Mindful","Radiant"],Ma=["Aviator","Guardian","Navigator","Trailblazer","Harvest","Aurora","Sentinel","Voyager","Caretaker","Beacon"];function Ba(){const r=ka[Math.floor(Math.random()*ka.length)],e=Ma[Math.floor(Math.random()*Ma.length)];return`${r} ${e}`}function La(r,e=12){return r?r.split(/\r?\n/).map(t=>t.replace(/^[-*+\s]+/,"").trim()).filter(Boolean).slice(0,e):[]}function Ef(){const[r,e]=A.useState(""),[t,n]=A.useState(()=>Ia()),[a,i]=A.useState(()=>Sa()),[o,s]=A.useState(()=>La(Ht()));A.useEffect(()=>{let v=sf();v||(v=Ba(),Oa(v)),e(v),u()},[]);function u(){n(Ia()),i(Sa()),s(La(Ht()))}function c(){const v=Ba();Oa(v),e(v)}function l(){uf(),e("")}function f(v){un(v),In(v),u()}function d(){of(),Object.keys($r).forEach(v=>{un(v)}),u()}function h(){Mi(""),nf(),u()}return p.jsxs("div",{className:"space-y-10",children:[p.jsxs("section",{className:"rounded-3xl border border-emerald-200 bg-emerald-50/70 p-6 text-emerald-900 dark:border-emerald-500/40 dark:bg-emerald-900/30 dark:text-emerald-100",children:[p.jsx("h2",{className:"text-2xl font-semibold",children:"User Profile üë§"}),p.jsx("p",{className:"mt-2 text-sm text-emerald-900/80 dark:text-emerald-100/80",children:"üîê The application generates a display alias so you can save notes without revealing personal details. Your profile name lives in a browser cookie on this device."}),p.jsxs("div",{className:"mt-6 flex flex-wrap items-center gap-4",children:[p.jsx("div",{className:"rounded-2xl bg-white/80 px-5 py-4 text-lg font-semibold text-emerald-700 shadow-sm dark:bg-slate-900/40 dark:text-emerald-200",children:r||"No profile name stored"}),p.jsx("button",{type:"button",onClick:c,className:"inline-flex items-center rounded-xl bg-emerald-600 px-4 py-2 text-sm font-medium text-white shadow-sm transition hover:bg-emerald-500",children:"Generate New Alias üé≤"}),p.jsx("button",{type:"button",onClick:l,className:"inline-flex items-center rounded-xl bg-red-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-red-500",children:"Remove Profile Cookie üóëÔ∏è"})]}),p.jsx("p",{className:"mt-3 rounded-2xl border border-red-300 bg-red-50/80 p-3 text-sm text-red-700 dark:border-red-700 dark:bg-red-900/30 dark:text-red-200",children:"Important: Removing the profile cookie deletes the saved alias immediately. The next time you open this page a new randomly generated name will appear. ‚ö†Ô∏è"})]}),p.jsxs("section",{className:"space-y-4",children:[p.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[p.jsx("h3",{className:"text-xl font-semibold text-slate-800 dark:text-slate-100",children:"Saved Allergies üóÇÔ∏è"}),p.jsx(vt,{to:"/allergyfinder/cookies",className:"inline-flex items-center rounded-xl bg-emerald-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-emerald-500",children:"Edit Allergy List ‚úçÔ∏è"})]}),p.jsxs("div",{className:"rounded-3xl border border-emerald-200 bg-white/85 p-5 shadow-sm dark:border-emerald-500/40 dark:bg-emerald-900/20",children:[p.jsx("div",{className:"text-3xl font-bold text-emerald-700 dark:text-emerald-200",children:a}),p.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Allergens listed across your saved markdown notes. üìä"}),p.jsx("div",{className:"mt-4 rounded-2xl border border-emerald-200 bg-emerald-50/60 p-4 text-sm text-emerald-900 dark:border-emerald-500/30 dark:bg-emerald-900/40 dark:text-emerald-100",children:o.length>0?p.jsxs("ul",{className:"list-disc space-y-1 pl-5",children:[o.map(v=>p.jsx("li",{children:v},v)),a>o.length?p.jsxs("li",{className:"italic text-emerald-700/80 dark:text-emerald-200/80",children:["‚Ä¶and ",a-o.length," more allergens saved. ‚ûï"]}):null]}):p.jsx("div",{className:"italic text-emerald-700/80 dark:text-emerald-200/80",children:"No allergy notes saved yet. üïí"})}),p.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-3",children:[p.jsx("button",{type:"button",onClick:h,className:"inline-flex items-center rounded-xl bg-red-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-red-500",children:"Delete Allergy Notes & Saved Chats üßπ"}),p.jsx("p",{className:"rounded-xl border border-red-300 bg-red-50/80 px-4 py-2 text-xs text-red-700 dark:border-red-700 dark:bg-red-900/30 dark:text-red-200",children:"Important: This removes the allergy notes cookie and any saved AllergyFinder conversations from this browser. ‚ö†Ô∏è"})]})]})]}),p.jsxs("section",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-xl font-semibold text-slate-800 dark:text-slate-100",children:"Chat Activity üìà"}),p.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"We snapshot how many conversations you have started in each demo. Counts are stored locally in a cookie. üßÆ"})]}),p.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:Object.entries(t).map(([v,x])=>p.jsxs("div",{className:"space-y-3 rounded-3xl border border-slate-200 bg-white/85 p-5 shadow-sm transition hover:border-slate-300 dark:border-slate-700 dark:bg-slate-900/60 dark:hover:border-slate-600",children:[p.jsx("div",{className:"text-sm font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-400",children:$r[v]||v}),p.jsx("div",{className:"text-4xl font-bold text-slate-900 dark:text-slate-100",children:x}),p.jsxs("button",{type:"button",onClick:()=>f(v),className:"inline-flex items-center rounded-xl bg-red-600 px-3 py-2 text-xs font-semibold uppercase tracking-wide text-white shadow-sm transition hover:bg-red-500",children:["Delete ",$r[v]||v," History üóëÔ∏è"]}),p.jsx("p",{className:"rounded-lg border border-red-200 bg-red-50/80 p-2 text-xs text-red-700 dark:border-red-700 dark:bg-red-900/30 dark:text-red-200",children:"Important: This deletes the saved cookie for this experience. Any stored conversations and counters are permanently removed from this browser. ‚ö†Ô∏è"})]},v))}),p.jsxs("div",{className:"flex flex-wrap gap-3",children:[p.jsx("button",{type:"button",onClick:d,className:"inline-flex items-center rounded-xl bg-red-700 px-4 py-2 text-sm font-semibold uppercase tracking-wide text-white shadow-sm transition hover:bg-red-600",children:"Delete All Saved Chat History üßΩ"}),p.jsx("p",{className:"rounded-xl border border-red-300 bg-red-50/90 px-4 py-2 text-xs text-red-700 dark:border-red-700 dark:bg-red-900/40 dark:text-red-200",children:"Important: This deletes every saved chat cookie across AllergyFinder, STL Studio, and the Pok√©dex on this device. ‚ö†Ô∏è"})]})]})]})}function Cf(){return p.jsxs("div",{className:"space-y-8",children:[p.jsx("section",{className:"rounded-3xl border border-brand-200 bg-gradient-to-r from-brand-500/10 to-brand-600/10 px-8 py-10 text-slate-900 shadow-lg dark:border-brand-500/30 dark:from-brand-500/20 dark:to-brand-700/20 dark:text-slate-100",children:p.jsxs("div",{className:"space-y-3",children:[p.jsx("span",{className:"inline-flex items-center rounded-full bg-white/70 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-brand-700 dark:bg-slate-900/60 dark:text-brand-200",children:"Profile"}),p.jsx("h1",{className:"text-3xl font-semibold sm:text-4xl",children:"User Preferences & Stats"}),p.jsx("p",{className:"max-w-2xl text-sm text-slate-700 dark:text-slate-300",children:"Manage your generated alias, review chat counters across experiences, and clear local cookies for allergy notes and saved conversations. Everything shown here lives only in your browser ‚Äî we do not store personal health information, we keep no server-side logs, and this workspace is operated with GDPR compliance in mind."})]})}),p.jsx(Ef,{})]})}function Fa({isActive:r}){return`inline-flex items-center rounded-full border px-3 py-1.5 text-sm font-medium transition border-slate-300 text-slate-700 hover:border-amber-500 hover:text-amber-600 dark:border-slate-700 dark:text-slate-200 ${r?"bg-gradient-to-r from-yellow-400 to-amber-600 text-white border-transparent shadow":""}`}function ja(){return p.jsxs("nav",{className:"flex flex-wrap items-center gap-2",children:[p.jsx(Ge,{to:"/objectmaker",className:Fa,end:!0,children:"Builder"}),p.jsx(Ge,{to:"/objectmaker/zoo",className:Fa,children:"Zoo"})]})}function Sf({baseUrl:r,setBaseUrl:e,model:t,setModel:n,experience:a}){function i(o){const s=(o||"").trim();return s?s.replace(/\/$/,""):""}return p.jsx("section",{className:"md:col-span-12",children:p.jsx("div",{className:"rounded-xl border border-slate-200 bg-white/80 p-3 dark:border-slate-800 dark:bg-slate-900/60",children:p.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between",children:[p.jsxs("div",{className:"space-y-1",children:[p.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Service settings"}),p.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Configure model and base URL for object creation."})]}),p.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row",children:[p.jsxs("label",{className:"block text-sm",children:[p.jsx("span",{className:"block text-[10px] uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Model"}),p.jsx("select",{className:"mt-1 block w-56 rounded-md border border-slate-300 bg-white px-2 py-2 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",value:t,onChange:o=>n(o.target.value),children:(a?.modelOptions||[]).map(o=>p.jsx("option",{value:o,children:o},o))})]}),p.jsxs("label",{className:"block text-sm",children:[p.jsx("span",{className:"block text-[10px] uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Service base URL"}),p.jsx("input",{type:"url",value:r,onChange:o=>e(o.target.value),onBlur:o=>e(i(o.target.value)),className:"mt-1 block w-72 rounded-md border border-slate-300 bg-white px-2 py-2 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",placeholder:"https://your-endpoint.example"})]})]})]})})})}function If({prompt:r,setPrompt:e,chatMessages:t,chatLoading:n,onSend:a,onAdopt:i}){const o=!!r.trim()&&!n,u=!![...t].reverse().find(f=>f.role==="assistant"),c=f=>{f.key==="Enter"&&!f.shiftKey&&(f.preventDefault(),o&&a())},l=f=>{f.preventDefault(),o&&a()};return p.jsxs("section",{className:"md:col-span-5 space-y-4",children:[p.jsx("div",{className:"rounded-xl border border-slate-200 bg-white/80 p-4 shadow-sm dark:border-slate-800 dark:bg-slate-900/60",children:p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Assistant Schema Builder"}),p.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Describe the object you want. The assistant will propose a single JSON schema."})]}),p.jsxs("form",{onSubmit:l,className:"flex flex-col gap-2",children:[p.jsx("textarea",{value:r,onChange:f=>e(f.target.value),onKeyDown:c,rows:3,spellCheck:!1,className:"block w-full rounded-lg border border-slate-300 bg-white/90 p-3 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-2 focus:ring-amber-500/60 dark:border-slate-700 dark:bg-slate-900/60 dark:text-slate-100",placeholder:"Ask for a schema idea‚Ä¶"}),p.jsx("div",{className:"flex flex-wrap items-center justify-end gap-2",children:p.jsx("button",{type:"submit",disabled:!o,className:"inline-flex items-center gap-1 rounded-md bg-amber-600 px-3 py-1.5 text-sm font-semibold text-white shadow transition-colors hover:bg-amber-500 disabled:opacity-50",children:n?"Sending‚Ä¶":p.jsxs(p.Fragment,{children:[p.jsx("span",{children:"Send to assistant"}),p.jsx(Wa,{className:"h-4 w-4","aria-hidden":"true"})]})})})]})]})}),p.jsxs("div",{className:"rounded-xl border border-amber-200 bg-amber-50/80 p-4 shadow-sm dark:border-amber-500/40 dark:bg-amber-500/10",children:[p.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[p.jsxs("div",{children:[p.jsx("h4",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Apply the assistant schema"}),p.jsx("p",{className:"text-xs text-amber-900/80 dark:text-amber-200/80",children:"Review the latest assistant reply below. When it looks good, send it to the Schema Setup card so you can validate and fine-tune it."})]}),p.jsxs("button",{type:"button",onClick:i,disabled:!u,className:"inline-flex items-center gap-1 rounded-md border border-amber-600 px-3 py-1.5 text-sm font-medium text-amber-700 transition-colors hover:bg-amber-100 disabled:opacity-50 dark:border-amber-400 dark:text-amber-200 dark:hover:bg-amber-500/20",children:[p.jsx(Xa,{className:"h-4 w-4","aria-hidden":"true"}),"Send to Schema Setup"]})]}),p.jsx("div",{className:"mt-3 max-h-64 space-y-2 overflow-auto",children:t.length?t.map((f,d)=>p.jsxs("div",{className:`rounded-md border p-2 text-sm ${f.role==="user"?"border-amber-200 bg-white text-slate-800 dark:border-amber-400/40 dark:bg-amber-500/10":"border-amber-300 bg-amber-100/80 text-amber-900 dark:border-amber-400/60 dark:bg-amber-500/20 dark:text-amber-50"}`,children:[p.jsx("div",{className:"mb-1 text-[10px] uppercase tracking-wide text-amber-600 dark:text-amber-200/80",children:f.role}),p.jsx("div",{className:"whitespace-pre-wrap break-words",children:f.content})]},d)):p.jsx("div",{className:"rounded-md border border-dashed border-amber-300 p-3 text-xs text-amber-700 dark:border-amber-400/50 dark:text-amber-200",children:"No assistant replies yet. Ask the assistant for a schema to get started."})}),u?null:p.jsx("p",{className:"mt-2 text-[11px] font-medium text-amber-800/80 dark:text-amber-200/70",children:"Send a prompt to the assistant first‚Äîthen this button will push the suggested schema into the editor."})]})]})}function Of({value:r,onChange:e,rows:t=10,placeholder:n}){return p.jsx("textarea",{value:r,onChange:a=>e(a.target.value),rows:t,spellCheck:!1,className:"mt-1 block w-full rounded-lg border border-slate-300 bg-white/90 p-2 font-mono text-[13px] text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-900/60 dark:text-slate-100",placeholder:n})}function Nf({value:r}){const e=A.useMemo(()=>{try{return JSON.stringify(r,null,2)}catch{return""}},[r]);return p.jsx("pre",{className:"max-h-80 overflow-auto rounded-lg border border-slate-200 bg-slate-50 p-3 text-xs text-slate-800 dark:border-slate-700 dark:bg-slate-900/50 dark:text-slate-200",children:e})}function Tf({structureText:r,setStructureText:e,onValidate:t,objectType:n,setObjectType:a,objectName:i,setObjectName:o,createPrompt:s,setCreatePrompt:u,systemText:c,setSystemText:l,temperature:f,setTemperature:d,strictMode:h,setStrictMode:v,onCreate:x,createLoading:g,error:w,resultObj:y,structureStatus:_}){const[b,E]=A.useState(""),S=A.useRef(null);A.useEffect(()=>()=>{S.current&&(clearTimeout(S.current),S.current=null)},[]);async function O(){if(y){try{const N=JSON.stringify(y,null,2);if(typeof navigator<"u"&&navigator.clipboard?.writeText)await navigator.clipboard.writeText(N);else{const T=document.createElement("textarea");T.value=N,T.setAttribute("readonly",""),T.style.position="absolute",T.style.left="-9999px",document.body.appendChild(T),T.select(),document.execCommand("copy"),document.body.removeChild(T)}E("Copied!")}catch(N){console.error("Copy failed",N),E("Copy failed")}S.current&&clearTimeout(S.current),S.current=setTimeout(()=>{E(""),S.current=null},2e3)}}return p.jsxs("section",{className:"md:col-span-7 space-y-4",children:[p.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white/80 p-4 shadow-sm dark:border-slate-800 dark:bg-slate-900/60",children:[p.jsxs("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-start sm:justify-between",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Schema Setup"}),p.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Define and validate the JSON Schema before attempting generation."})]}),_?p.jsxs("div",{className:"flex items-center gap-1 text-xs font-medium text-emerald-600 dark:text-emerald-400",children:[p.jsx(ro,{className:"h-4 w-4","aria-hidden":"true"}),p.jsx("span",{children:_})]}):null]}),p.jsxs("div",{className:"mt-3 space-y-3",children:[p.jsx(Of,{value:r,onChange:e,rows:16,placeholder:'{"type":"object","properties":{"name":{"type":"string"},"toppings":{"type":"array","items":{"type":"string"}}}}'}),p.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[p.jsx("button",{type:"button",onClick:t,className:"rounded-md bg-amber-600 px-3 py-1.5 text-sm font-medium text-white shadow hover:bg-amber-500",children:"Validate JSON"}),p.jsxs("label",{className:"text-sm text-slate-600 dark:text-slate-300",children:[p.jsx("span",{className:"mr-1",children:"Type"}),p.jsx("input",{value:n,onChange:N=>a(N.target.value),className:"rounded-md border border-slate-300 bg-white px-2 py-1 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",placeholder:"pizza | hot_sauce | car"})]}),p.jsxs("label",{className:"text-sm text-slate-600 dark:text-slate-300",children:[p.jsx("span",{className:"mr-1",children:"Object Name (optional)"}),p.jsx("input",{value:i,onChange:N=>o(N.target.value),className:"rounded-md border border-slate-300 bg-white px-2 py-1 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",placeholder:"diavola"})]})]}),p.jsxs("label",{className:"block text-sm",children:[p.jsx("span",{className:"mr-1 text-slate-600 dark:text-slate-300",children:"System Instruction"}),p.jsx("input",{value:c,onChange:N=>l(N.target.value),className:"mt-1 block w-full rounded-md border border-slate-300 bg-white px-2 py-2 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",placeholder:"You create a pizza object that conforms strictly to the provided JSON Schema; return only JSON."})]})]})]}),p.jsx("div",{className:"rounded-xl border border-slate-200 bg-white/80 p-4 shadow-sm dark:border-slate-800 dark:bg-slate-900/60",children:p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Generation Request"}),p.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Craft the prompt and run the request after your schema looks right."})]}),p.jsxs("label",{className:"block text-sm",children:[p.jsx("span",{className:"mr-1 text-slate-600 dark:text-slate-300",children:"User Prompt"}),p.jsx("input",{value:s,onChange:N=>u(N.target.value),className:"mt-1 block w-full rounded-md border border-slate-300 bg-white px-2 py-2 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",placeholder:"Describe the instance to create (e.g., 'A Margherita with basil and fresh mozzarella')"})]}),p.jsxs("div",{className:"flex flex-wrap gap-3",children:[p.jsxs("label",{className:"text-sm text-slate-600 dark:text-slate-300",children:[p.jsx("span",{className:"mr-1",children:"Temperature"}),p.jsx("input",{type:"number",value:f,onChange:N=>d(N.target.value),min:"0",max:"2",step:"0.1",className:"mt-1 block w-24 rounded-md border border-slate-300 bg-white px-2 py-1 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100"})]}),p.jsxs("label",{className:"text-sm text-slate-600 dark:text-slate-300",children:[p.jsx("span",{className:"mr-1",children:"Strict mode"}),p.jsxs("select",{value:h,onChange:N=>v(N.target.value),className:"mt-1 block rounded-md border border-slate-300 bg-white px-2 py-1 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",children:[p.jsx("option",{value:"auto",children:"Auto (service decides)"}),p.jsx("option",{value:"true",children:"Force strict validation"}),p.jsx("option",{value:"false",children:"Relaxed validation"})]})]}),p.jsx("div",{className:"ml-auto flex items-end",children:p.jsx("button",{type:"button",onClick:x,disabled:g,className:"rounded-md bg-amber-700 px-4 py-2 text-sm font-semibold text-white shadow hover:bg-amber-600 disabled:opacity-50",children:g?"Creating‚Ä¶":"Create Object"})})]}),w?p.jsx("div",{className:"rounded-md border border-red-300 bg-red-50 p-2 text-sm text-red-800 dark:border-red-800/60 dark:bg-red-900/40 dark:text-red-200",children:w}):null]})}),p.jsxs("section",{className:"rounded-xl border border-slate-200 bg-white/60 p-4 shadow-sm dark:border-slate-800 dark:bg-slate-900/50",children:[p.jsxs("div",{className:"flex items-center justify-between gap-2",children:[p.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Last Created Object"}),y?p.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 dark:text-slate-400",children:[b?p.jsx("span",{children:b}):null,p.jsxs("button",{type:"button",onClick:O,className:"inline-flex items-center gap-1 rounded-md border border-slate-300 px-2 py-1 text-xs font-medium text-slate-700 transition-colors hover:bg-slate-100 dark:border-slate-600 dark:text-slate-200 dark:hover:bg-slate-800",children:[p.jsx(Xa,{className:"h-4 w-4","aria-hidden":"true"}),"Copy JSON"]})]}):null]}),p.jsx("div",{className:"mt-3",children:y?p.jsx(Nf,{value:y}):p.jsx("div",{className:"rounded-lg border border-dashed border-slate-300 bg-white/60 p-4 text-sm text-slate-500 dark:border-slate-700 dark:bg-slate-900/60 dark:text-slate-400",children:"No object created yet. The response from /obj will appear here."})})]})]})}function Nn(r){if(!r)return null;try{const e=JSON.parse(r);if(e&&typeof e=="object")return e}catch{return null}return null}function Rf(r){if(!r)return null;const e=/```(?:json)?\s*([\s\S]*?)```/i,t=r.match(e);return!t||!t[1]?null:Nn(t[1].trim())}function Df(r){if(!r)return null;const e=String(r),t=e.indexOf("{");if(t<0)return null;let n=0;for(let a=t;a<e.length;a++){const i=e[a];if(i==="{")n++;else if(i==="}"&&(n--,n===0)){const o=e.slice(t,a+1),s=Nn(o);if(s)return s}}return null}function Pf(r){return Nn(r)||Rf(r)||Df(r)}const Tn="objectmaker_zoo_v1";function Rn(){try{return globalThis.localStorage||null}catch{return null}}function Ui(){const r=Rn();if(!r)return[];try{const e=r.getItem(Tn);if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch{return[]}}function Vi(r){const e=Rn();if(e)try{e.setItem(Tn,JSON.stringify(r||[]))}catch{}}function kf(r){const e=Ui();e.unshift(r),Vi(e)}function Mf(){const r=Rn();if(r)try{r.removeItem(Tn)}catch{}}function Bf(r){const e=new Map;for(const t of r||[]){const n=(t?.type||"object").toString();e.has(n)||e.set(n,[]),e.get(n).push(t)}return e}const Ua={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var Va={};const Wr=typeof import.meta<"u"&&Ua?Ua:void 0,Xr=typeof globalThis<"u"&&Va?Va:void 0;function Hi(r){if(r){if(Wr&&Wr[r]!==void 0)return Wr[r];if(Xr&&Xr[r]!==void 0)return Xr[r]}}const Lf=(Hi("VITE_CHAT_BASE_URL")||"https://groq-endpoint.louispaulet13.workers.dev").replace(/\/$/,"");function Ff(r="",e=160){const t=(r||"").toString().trim();return t.length<=e?t:`${t.slice(0,e)}...`}function jf(r){if(!r||typeof r!="object")return r;try{const e=JSON.parse(JSON.stringify(r)),t=n=>{if(!(!n||typeof n!="object")){if(n.type==="object"){n.additionalProperties!==!1&&(n.additionalProperties=!1);const a=n.properties&&typeof n.properties=="object"?n.properties:{},i=Object.keys(a);if(i.length){const u=Array.isArray(n.required)?n.required.filter(l=>typeof l=="string"):[],c=new Set([...u,...i]);n.required=Array.from(c)}Object.values(a).forEach(t);const o=n.patternProperties&&typeof n.patternProperties=="object"?n.patternProperties:{};Object.values(o).forEach(t);const s=n.dependencies&&typeof n.dependencies=="object"?n.dependencies:{};Object.values(s).forEach(u=>{u&&typeof u=="object"&&t(u)})}"format"in n&&delete n.format,n.items&&(Array.isArray(n.items)?n.items.forEach(t):t(n.items));for(const a of["allOf","anyOf","oneOf"])Array.isArray(n[a])&&n[a].forEach(t);for(const a of["not","if","then","else"])n[a]&&typeof n[a]=="object"&&t(n[a]);for(const a of["definitions","$defs"])n[a]&&typeof n[a]=="object"&&Object.values(n[a]).forEach(t)}};return t(e),e}catch{return r}}function Uf(r){const e=(r||"").toString().trim();return e?e.replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_-]/g,"").toLowerCase():""}async function Vf({baseUrl:r,structure:e,model:t,objectType:n,prompt:a,system:i,temperature:o,strict:s}={}){const u=(r||Lf||"").replace(/\/$/,"");if(!u)throw new Error("Missing service base URL for /obj");const c=(Hi("VITE_OBJECTMAKER_OBJ_PATH")||"").trim(),l=Uf(n||e&&e.type),f=E=>E?l?E.replace("{type}",l).replace(":type",l).replace("%s",l):E.includes("{type}")||E.includes(":type")||E.includes("%s")?null:E:null;let d=[];if(c){const E=f(c);E?d.push(E.startsWith("/")?E:`/${E}`):l&&d.push(c.replace(/\/?$/,"/")+l)}l&&d.push(`/obj/${l}`,`/object/${l}`,`/objects/${l}`),l||d.push("/obj","/object","/objects"),d=Array.from(new Set(d.filter(Boolean).map(E=>E.startsWith("/")?E:`/${E}`)));const h=(a||"").toString().trim();if(!h)throw new Error("Object prompt is required to call /obj");const v="You are an object maker. Produce a single JSON object that strictly conforms to the provided JSON Schema. Do not include commentary or markdown. Only return the JSON object.",x=(i||v).toString().trim()||v,w={schema:jf(e),system:x,user:h},y=typeof o=="number"?o:Number.parseFloat(o);Number.isFinite(y)&&(w.temperature=y),t&&(w.model=t),typeof s=="boolean"&&(w.strict=s);const _=[w];let b=null;for(const E of d){const S=`${u}${E}`;let O=null;for(const N of _)try{const T=await fetch(S,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)}),D=await T.text();if(!T.ok){const L=Ff(D);if(T.status===404){O=null;break}O=new Error(`HTTP ${T.status}: ${L} (path ${S})`);continue}let j;try{j=JSON.parse(D)}catch{j=null}if(!j||typeof j!="object")throw new Error("Invalid JSON response from object endpoint");return{payload:j,status:T.status,baseUrl:u,path:E}}catch(T){O=T}if(O)throw O;b=b||new Error(`HTTP 404: endpoint not found at ${S}`)}throw b||new Error("Object creation failed")}const Ha="You are an object maker. Produce a single JSON object that strictly conforms to the provided JSON Schema. Do not include commentary or markdown. Only return the JSON object.",Gi={type:"object",additionalProperties:!1,properties:{name:{type:"string"},size:{type:"string",enum:["small","medium","large"]},crust:{type:"string"},cheese:{type:"string"},toppings:{type:"array",items:{type:"string"}}},required:["name","size","crust","cheese","toppings"]},Hf=JSON.stringify(Gi,null,2),Gf="make a delicious spicy pizza that respects this schema",$f="pizza",Wf="";function Xf(r,e){const t=e?[{role:"system",content:e}]:[],n=(r||[]).filter(a=>a&&(a.role==="user"||a.role==="assistant")).map(a=>({role:a.role,content:a.content}));return[...t,...n]}function zr(r){const e=(r||"").trim();return e?e.replace(/\/$/,""):""}function $i(r){if(!r||typeof r!="object")return{schema:r,changed:!1};let e=!1;const t=JSON.parse(JSON.stringify(r)),n=a=>{if(!(!a||typeof a!="object")){if(a.type==="object"){a.additionalProperties!==!1&&(a.additionalProperties=!1,e=!0);const i=a.properties&&typeof a.properties=="object"?a.properties:{},o=Object.keys(i);if(o.length){const c=Array.isArray(a.required)?a.required.filter(d=>typeof d=="string"):[],l=new Set(c),f=l.size;for(const d of o)l.add(d);(l.size!==f||c.length!==l.size)&&(a.required=Array.from(l),e=!0)}Object.values(i).forEach(n);const s=a.patternProperties&&typeof a.patternProperties=="object"?a.patternProperties:{};Object.values(s).forEach(n);const u=a.dependencies&&typeof a.dependencies=="object"?a.dependencies:{};Object.values(u).forEach(c=>{c&&typeof c=="object"&&n(c)})}"format"in a&&(delete a.format,e=!0),a.items&&(Array.isArray(a.items)?a.items.forEach(n):n(a.items));for(const i of["allOf","anyOf","oneOf"])Array.isArray(a[i])&&a[i].forEach(n);for(const i of["not","if","then","else"])a[i]&&typeof a[i]=="object"&&n(a[i]);for(const i of["definitions","$defs"])a[i]&&typeof a[i]=="object"&&Object.values(a[i]).forEach(n)}};return n(t),{schema:t,changed:e}}function zf(r,e,t){if(e)return e;const n=JSON.parse(r);if(!n||typeof n!="object")throw new Error("Structure must be a JSON object");if(n.type!=="object")throw new Error('Schema must declare "type":"object"');return t(n),n}function Ga(r,e,t,n,a){const i=$i(r);return i.changed&&(e(i.schema),t(JSON.stringify(i.schema,null,2)),n(a)),i.schema}function Yf(r){const[e,t]=A.useState(r?.defaultModel||r?.modelOptions?.[0]),[n,a]=A.useState(zr(r?.defaultBaseUrl)),[i,o]=A.useState(""),[s,u]=A.useState(!1),[c,l]=A.useState([]),[f,d]=A.useState(Hf),[h,v]=A.useState(Gi),[x,g]=A.useState(""),[w,y]=A.useState(!1),[_,b]=A.useState(null),[E,S]=A.useState($f),[O,N]=A.useState(Wf),[T,D]=A.useState(Gf),[j,L]=A.useState(Ha),[q,B]=A.useState("0"),[H,ae]=A.useState("auto"),[oe,pe]=A.useState("");return{experience:r,model:e,setModel:t,baseUrl:n,setBaseUrl:$=>a($),prompt:i,setPrompt:o,chatLoading:s,chatMessages:c,sendToChat:async()=>{const $=i.trim();if(!$||s)return;pe("");const se=[...c,{role:"user",content:$,timestamp:Date.now()}];l(se),o(""),u(!0);try{const ee=Xf(se,r?.systemPrompt),ue={role:"assistant",content:(await Di(r,ee,{model:e,baseUrl:zr(n)})).content,timestamp:Date.now()};l(ce=>[...ce,ue])}catch(ee){pe(ee?.message||"Chat failed")}finally{u(!1)}},tryAdoptAssistantJson:()=>{const $=[...c].reverse().find(Me=>Me.role==="assistant");if(!$){pe("No assistant message to extract JSON from.");return}const se=Pf($.content);if(!se){pe("Could not extract JSON. Ensure the assistant returns a single JSON object.");return}if(se?.type!=="object"){pe('Schema must declare "type":"object".');return}const ee=Ga(se,v,d,g,"Schema adopted from assistant");g("Schema adopted from assistant"),d(JSON.stringify(ee,null,2)),v(ee),pe("")},structureText:f,setStructureText:$=>{d($),v(null),g("")},validateStructure:()=>{pe("");try{const $=JSON.parse(f);if(!$||typeof $!="object")throw new Error("Not an object");if($.type!=="object")throw new Error('Schema must declare "type":"object"');const se=$i($);v(se.schema),se.changed&&d(JSON.stringify(se.schema,null,2)),g(se.changed?"Schema valid (normalized unsupported keywords)":"Schema valid")}catch($){v(null),pe(`Invalid JSON: ${$?.message||"parse error"}`),g("")}},structureStatus:x,objectType:E,setObjectType:S,objectName:O,setObjectName:N,createPrompt:T,setCreatePrompt:D,systemText:j,setSystemText:L,temperature:q,setTemperature:B,strictMode:H,setStrictMode:ae,handleCreate:async()=>{pe(""),b(null);let $;try{$=zf(f,h,v)}catch(ue){pe(ue.message);return}const se=(E||$?.type||"").toString().trim();if(!se){pe('Type is required to call /obj/{type}. Fill the Type field or include "type" in your structure.');return}const ee=T.trim();if(!ee){pe("Provide a user prompt for the object generation request.");return}const Me=j.trim()||Ha;$=Ga($,v,d,g,"Schema normalized before create (unsupported keywords removed)"),y(!0);try{const ue=zr(n),ce=Number.parseFloat(q),Ue=H==="true"?!0:H==="false"?!1:void 0,{payload:Nt}=await Vf({baseUrl:ue,structure:$,model:e,objectType:se,prompt:ee,system:Me,temperature:Number.isFinite(ce)?ce:void 0,strict:Ue});b(Nt);const Dn=(se||Nt?.type||$?.type||"object").toString(),Wi=(Nt?.name||O||Nt?.title||Dn).toString();kf({id:`obj-${Date.now().toString(16)}`,type:Dn,title:Wi,createdAt:Date.now(),structure:$,result:Nt,conversation:c,prompt:ee,system:Me,temperature:Number.isFinite(ce)?ce:void 0,strict:Ue})}catch(ue){pe(ue?.message||"Object creation failed")}finally{y(!1)}},createLoading:w,error:oe,resultObj:_}}function Zf(){const r=Ds("objectmaker"),e=Yf(r);return p.jsx("div",{className:"space-y-8",children:p.jsxs("div",{className:"grid gap-6 md:grid-cols-12",children:[p.jsx(Sf,{baseUrl:e.baseUrl,setBaseUrl:e.setBaseUrl,model:e.model,setModel:e.setModel,experience:r,objectType:e.objectType}),p.jsx(If,{prompt:e.prompt,setPrompt:e.setPrompt,chatMessages:e.chatMessages,chatLoading:e.chatLoading,onSend:e.sendToChat,onAdopt:e.tryAdoptAssistantJson}),p.jsx(Tf,{structureText:e.structureText,setStructureText:e.setStructureText,onValidate:e.validateStructure,objectType:e.objectType,setObjectType:e.setObjectType,objectName:e.objectName,setObjectName:e.setObjectName,createPrompt:e.createPrompt,setCreatePrompt:e.setCreatePrompt,systemText:e.systemText,setSystemText:e.setSystemText,temperature:e.temperature,setTemperature:e.setTemperature,strictMode:e.strictMode,setStrictMode:e.setStrictMode,onCreate:e.handleCreate,createLoading:e.createLoading,error:e.error,resultObj:e.resultObj,structureStatus:e.structureStatus})]})})}function Kf({entry:r,onDelete:e}){const[t,n]=A.useState(!1),a=new Date(r.createdAt);return p.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white/80 p-3 shadow-sm dark:border-slate-800 dark:bg-slate-900/60",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"space-y-0.5",children:[p.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-100",children:r.title}),p.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:a.toLocaleString()})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{className:"rounded-md border border-slate-300 px-2 py-1 text-xs text-slate-700 hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-800/60",onClick:()=>n(i=>!i),children:t?"Hide":"View"}),p.jsx("button",{className:"rounded-md border border-red-300 px-2 py-1 text-xs text-red-700 hover:bg-red-50 dark:border-red-800 dark:text-red-300 dark:hover:bg-red-900/30",onClick:e,children:"Delete"})]})]}),t?p.jsxs("div",{className:"mt-3 grid gap-3 lg:grid-cols-2",children:[p.jsxs("div",{children:[p.jsx("div",{className:"mb-1 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"Result"}),p.jsx("pre",{className:"max-h-72 overflow-auto rounded-md border border-slate-200 bg-slate-50 p-2 text-[12px] text-slate-800 dark:border-slate-700 dark:bg-slate-900/50 dark:text-slate-200",children:JSON.stringify(r.result,null,2)})]}),p.jsxs("div",{children:[p.jsx("div",{className:"mb-1 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"Structure"}),p.jsx("pre",{className:"max-h-72 overflow-auto rounded-md border border-slate-200 bg-slate-50 p-2 text-[12px] text-slate-800 dark:border-slate-700 dark:bg-slate-900/50 dark:text-slate-200",children:JSON.stringify(r.structure,null,2)})]}),p.jsxs("div",{className:"lg:col-span-2",children:[p.jsx("div",{className:"mb-1 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"Conversation"}),p.jsx("div",{className:"max-h-56 space-y-2 overflow-auto",children:(r.conversation||[]).map((i,o)=>p.jsxs("div",{className:`rounded-md p-2 text-[12px] ${i.role==="user"?"bg-yellow-50 text-slate-800 dark:bg-yellow-500/10":"bg-slate-50 text-slate-700 dark:bg-slate-800/50 dark:text-slate-200"}`,children:[p.jsx("div",{className:"mb-1 text-[10px] uppercase tracking-wide text-slate-500 dark:text-slate-400",children:i.role}),p.jsx("div",{className:"whitespace-pre-wrap break-words",children:i.content})]},o))})]})]}):null]})}function qf(){const[r,e]=A.useState(()=>Ui()),t=A.useMemo(()=>Bf(r),[r]);function n(i){const o=r.filter(s=>s!==i);e(o),Vi(o)}function a(){Mf(),e([])}return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h3",{className:"text-base font-semibold text-slate-800 dark:text-slate-100",children:"Object Zoo ü¶æ"}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(vt,{to:"/objectmaker",className:"rounded-md border border-slate-300 px-3 py-1.5 text-sm text-slate-700 hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-800/60",children:"Back to Builder üõ†Ô∏è"}),r.length>0?p.jsx("button",{onClick:a,className:"rounded-md border border-red-300 px-3 py-1.5 text-sm font-medium text-red-700 hover:bg-red-50 dark:border-red-800 dark:text-red-300 dark:hover:bg-red-900/30",children:"Delete all saved objects üßπ"}):null]})]}),r.length===0?p.jsx("div",{className:"rounded-xl border border-slate-200 bg-white/70 p-6 text-sm text-slate-500 dark:border-slate-800 dark:bg-slate-900/60 dark:text-slate-400",children:"No entries yet. Create objects in the Builder and they will appear here grouped by type. üìù"}):null,[...t.entries()].map(([i,o])=>p.jsxs("section",{className:"space-y-3",children:[p.jsx("div",{className:"flex items-center justify-between",children:p.jsxs("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:[i," ‚Äî ",o.length," üì¶"]})}),p.jsx("div",{className:"grid gap-3 md:grid-cols-2",children:o.map(s=>p.jsx(Kf,{entry:s,onDelete:()=>n(s)},s.id))})]},i))]})}function Jf(){return p.jsx(ks,{children:p.jsx(bs,{children:p.jsx(js,{children:p.jsxs(es,{children:[p.jsx(qe,{path:"/",element:p.jsx(Vs,{})}),Vt.map(r=>r.id==="allergyfinder"?p.jsxs(A.Fragment,{children:[p.jsx(qe,{path:r.path,element:p.jsx(Rt,{experience:r,navigation:p.jsx(Pa,{}),children:p.jsx(Ra,{experience:r})})}),p.jsx(qe,{path:`${r.path}/cookies`,element:p.jsx(Rt,{experience:r,navigation:p.jsx(Pa,{}),children:p.jsx(bf,{})})})]},r.id):r.id==="objectmaker"?p.jsxs(A.Fragment,{children:[p.jsx(qe,{path:r.path,element:p.jsx(Rt,{experience:r,navigation:p.jsx(ja,{}),children:p.jsx(Zf,{})})}),p.jsx(qe,{path:`${r.path}/zoo`,element:p.jsx(Rt,{experience:r,navigation:p.jsx(ja,{}),children:p.jsx(qf,{})})})]},r.id):p.jsx(qe,{path:r.path,element:p.jsx(Rt,{experience:r,children:p.jsx(Ra,{experience:r})})},r.id)),p.jsx(qe,{path:"/profile",element:p.jsx(Cf,{})}),p.jsx(qe,{path:"/about",element:p.jsx(Hs,{})}),p.jsx(qe,{path:"*",element:p.jsx(Jo,{to:"/",replace:!0})})]})})})})}no.createRoot(document.getElementById("root")).render(p.jsx(ao.StrictMode,{children:p.jsx(Jf,{})}));
