const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/STLViewer-BFvRvb-k.js","assets/stl-CiNzZTSe.js","assets/react-CBvpcIy-.js","assets/markdown-VSOJ9Hrc.js","assets/c4Diagram-15b5d702-BDtK7OUg.js","assets/svgDrawCommon-3ba9043b-CQTONDlE.js","assets/flowDiagram-cbd28bf7-B4zT7_Ld.js","assets/flowDb-7c981674-C6Y1Ey4u.js","assets/graph-CgsiplGu.js","assets/layout-BXd3X6uS.js","assets/styles-2ab5d517-B-pZFupW.js","assets/index-6079d271-DpRgUm75.js","assets/clone-j0Ej8MHo.js","assets/edges-332bd1c7-Hhc0ViFW.js","assets/createText-d213de94-mdQxVaSl.js","assets/line-C0y95IfR.js","assets/array-BKyUJesY.js","assets/path-CbwjOpE9.js","assets/channel-CBCn9pFk.js","assets/flowDiagram-v2-ffc7f31a-Pc5EjOhl.js","assets/erDiagram-880f2ed8-DdX2qLMW.js","assets/gitGraphDiagram-21fc4d3e-BWwLNY3l.js","assets/ganttDiagram-04f9e578-Cmvk1tT3.js","assets/linear-DS7Yb4Nq.js","assets/init-Gi6I4Gst.js","assets/infoDiagram-4a4f5b27-CKex5BaD.js","assets/pieDiagram-421022e6-Va9sC7AY.js","assets/arc-qOPxUxtu.js","assets/ordinal-Cboi1Yqb.js","assets/quadrantDiagram-0957ecba-wVU8lUI_.js","assets/xychartDiagram-b6496bcd-EmkEWI-y.js","assets/requirementDiagram-23d650b8-CNyHGkV6.js","assets/sequenceDiagram-17ac3bff-B9bG5-dd.js","assets/classDiagram-d40c83e7-BnsV2bUW.js","assets/styles-5f03d8d2-CCismOfi.js","assets/classDiagram-v2-d5a6b087-Bl_tjhlA.js","assets/stateDiagram-9c5f0230-Bj2U7053.js","assets/styles-edf9a4b0-B-LHp2py.js","assets/stateDiagram-v2-51a3dcff-hgrWHN9i.js","assets/journeyDiagram-29694f62-C-rZoJ4a.js","assets/flowchart-elk-definition-36e2d292-BCaQoej5.js","assets/timeline-definition-7e6b55e7-CQGNBDdj.js","assets/mindmap-definition-ac74a2e8-CCaaNTEa.js","assets/sankeyDiagram-23345273-BtOm1w59.js","assets/Tableau10-B-NsZVaP.js","assets/blockDiagram-68f4deed-Bu75VDEl.js"])))=>i.map(i=>d[i]);
import{a as b,j as c,F as Ku,b as Dp,c as Rp,d as Lp,e as dn,f as Mp,g as Zu,h as Pp,i as Fp,k as $p,l as Ju,m as Up,n as Qu,o as zp,p as Zr,q as eh,s as Hp,t as Gp,u as Vp,R as qp}from"./react-CBvpcIy-.js";import{_ as Ne}from"./stl-CiNzZTSe.js";import{H as xt,j as th,t as rh,p as nh,a as Wp,b as ah,m as Xp,d as ih,c as Rs,g as Yp,e as Jr}from"./markdown-VSOJ9Hrc.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();/**
 * react-router v7.9.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Zl="popstate";function Kp(e={}){function t(a,i){let{pathname:o="/",search:s="",hash:l=""}=jr(a.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Xo("",{pathname:o,search:s,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(a,i){let o=a.document.querySelector("base"),s="";if(o&&o.getAttribute("href")){let l=a.location.href,d=l.indexOf("#");s=d===-1?l:l.slice(0,d)}return s+"#"+(typeof i=="string"?i:Wn(i))}function n(a,i){Et(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(i)})`)}return Jp(t,r,n,e)}function Ee(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Et(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Zp(){return Math.random().toString(36).substring(2,10)}function Jl(e,t){return{usr:e.state,key:e.key,idx:t}}function Xo(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?jr(t):t,state:r,key:t&&t.key||n||Zp()}}function Wn({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function jr(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function Jp(e,t,r,n={}){let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,s="POP",l=null,d=u();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function u(){return(o.state||{idx:null}).idx}function h(){s="POP";let x=u(),y=x==null?null:x-d;d=x,l&&l({action:s,location:g.location,delta:y})}function f(x,y){s="PUSH";let v=Xo(g.location,x,y);r&&r(v,x),d=u()+1;let w=Jl(v,d),S=g.createHref(v);try{o.pushState(w,"",S)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;a.location.assign(S)}i&&l&&l({action:s,location:g.location,delta:1})}function p(x,y){s="REPLACE";let v=Xo(g.location,x,y);r&&r(v,x),d=u();let w=Jl(v,d),S=g.createHref(v);o.replaceState(w,"",S),i&&l&&l({action:s,location:g.location,delta:0})}function m(x){return Qp(x)}let g={get action(){return s},get location(){return e(a,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return a.addEventListener(Zl,h),l=x,()=>{a.removeEventListener(Zl,h),l=null}},createHref(x){return t(a,x)},createURL:m,encodeLocation(x){let y=m(x);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:p,go(x){return o.go(x)}};return g}function Qp(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Ee(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:Wn(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function oh(e,t,r="/"){return e1(e,t,r,!1)}function e1(e,t,r,n){let a=typeof t=="string"?jr(t):t,i=rr(a.pathname||"/",r);if(i==null)return null;let o=sh(e);t1(o);let s=null;for(let l=0;s==null&&l<o.length;++l){let d=h1(i);s=d1(o[l],d,n)}return s}function sh(e,t=[],r=[],n="",a=!1){let i=(o,s,l=a,d)=>{let u={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(n)&&l)return;Ee(u.relativePath.startsWith(n),`Absolute route path "${u.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(n.length)}let h=er([n,u.relativePath]),f=r.concat(u);o.children&&o.children.length>0&&(Ee(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),sh(o.children,t,f,h,l)),!(o.path==null&&!o.index)&&t.push({path:h,score:l1(h,o.index),routesMeta:f})};return e.forEach((o,s)=>{if(o.path===""||!o.path?.includes("?"))i(o,s);else for(let l of lh(o.path))i(o,s,!0,l)}),t}function lh(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=lh(n.join("/")),s=[];return s.push(...o.map(l=>l===""?i:[i,l].join("/"))),a&&s.push(...o),s.map(l=>e.startsWith("/")&&l===""?"/":l)}function t1(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:c1(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var r1=/^:[\w-]+$/,n1=3,a1=2,i1=1,o1=10,s1=-2,Ql=e=>e==="*";function l1(e,t){let r=e.split("/"),n=r.length;return r.some(Ql)&&(n+=s1),t&&(n+=a1),r.filter(a=>!Ql(a)).reduce((a,i)=>a+(r1.test(i)?n1:i===""?i1:o1),n)}function c1(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function d1(e,t,r=!1){let{routesMeta:n}=e,a={},i="/",o=[];for(let s=0;s<n.length;++s){let l=n[s],d=s===n.length-1,u=i==="/"?t:t.slice(i.length)||"/",h=Ka({path:l.relativePath,caseSensitive:l.caseSensitive,end:d},u),f=l.route;if(!h&&d&&r&&!n[n.length-1].route.index&&(h=Ka({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!h)return null;Object.assign(a,h.params),o.push({params:a,pathname:er([i,h.pathname]),pathnameBase:g1(er([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=er([i,h.pathnameBase]))}return o}function Ka(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=u1(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),s=a.slice(1);return{params:n.reduce((d,{paramName:u,isOptional:h},f)=>{if(u==="*"){let m=s[f]||"";o=i.slice(0,i.length-m.length).replace(/(.)\/+$/,"$1")}const p=s[f];return h&&!p?d[u]=void 0:d[u]=(p||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function u1(e,t=!1,r=!0){Et(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,s,l)=>(n.push({paramName:s,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function h1(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Et(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function rr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function f1(e,t="/"){let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?jr(e):e;return{pathname:r?r.startsWith("/")?r:p1(r,t):t,search:x1(n),hash:v1(a)}}function p1(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function uo(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function m1(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Ls(e){let t=m1(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function Ms(e,t,r,n=!1){let a;typeof e=="string"?a=jr(e):(a={...e},Ee(!a.pathname||!a.pathname.includes("?"),uo("?","pathname","search",a)),Ee(!a.pathname||!a.pathname.includes("#"),uo("#","pathname","hash",a)),Ee(!a.search||!a.search.includes("#"),uo("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,s;if(o==null)s=r;else{let h=t.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;a.pathname=f.join("/")}s=h>=0?t[h]:"/"}let l=f1(a,s),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(d||u)&&(l.pathname+="/"),l}var er=e=>e.join("/").replace(/\/\/+/g,"/"),g1=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),x1=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,v1=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function y1(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var ch=["POST","PUT","PATCH","DELETE"];new Set(ch);var b1=["GET",...ch];new Set(b1);var un=b.createContext(null);un.displayName="DataRouter";var Ri=b.createContext(null);Ri.displayName="DataRouterState";b.createContext(!1);var dh=b.createContext({isTransitioning:!1});dh.displayName="ViewTransition";var w1=b.createContext(new Map);w1.displayName="Fetchers";var _1=b.createContext(null);_1.displayName="Await";var Lt=b.createContext(null);Lt.displayName="Navigation";var aa=b.createContext(null);aa.displayName="Location";var qt=b.createContext({outlet:null,matches:[],isDataRoute:!1});qt.displayName="Route";var Ps=b.createContext(null);Ps.displayName="RouteError";function C1(e,{relative:t}={}){Ee(hn(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=b.useContext(Lt),{hash:a,pathname:i,search:o}=ia(e,{relative:t}),s=i;return r!=="/"&&(s=i==="/"?r:er([r,i])),n.createHref({pathname:s,search:o,hash:a})}function hn(){return b.useContext(aa)!=null}function ar(){return Ee(hn(),"useLocation() may be used only in the context of a <Router> component."),b.useContext(aa).location}var uh="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function hh(e){b.useContext(Lt).static||b.useLayoutEffect(e)}function fh(){let{isDataRoute:e}=b.useContext(qt);return e?L1():S1()}function S1(){Ee(hn(),"useNavigate() may be used only in the context of a <Router> component.");let e=b.useContext(un),{basename:t,navigator:r}=b.useContext(Lt),{matches:n}=b.useContext(qt),{pathname:a}=ar(),i=JSON.stringify(Ls(n)),o=b.useRef(!1);return hh(()=>{o.current=!0}),b.useCallback((l,d={})=>{if(Et(o.current,uh),!o.current)return;if(typeof l=="number"){r.go(l);return}let u=Ms(l,JSON.parse(i),a,d.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:er([t,u.pathname])),(d.replace?r.replace:r.push)(u,d.state,d)},[t,r,i,a,e])}b.createContext(null);function ia(e,{relative:t}={}){let{matches:r}=b.useContext(qt),{pathname:n}=ar(),a=JSON.stringify(Ls(r));return b.useMemo(()=>Ms(e,JSON.parse(a),n,t==="path"),[e,a,n,t])}function A1(e,t){return ph(e,t)}function ph(e,t,r,n,a){Ee(hn(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=b.useContext(Lt),{matches:o}=b.useContext(qt),s=o[o.length-1],l=s?s.params:{},d=s?s.pathname:"/",u=s?s.pathnameBase:"/",h=s&&s.route;{let v=h&&h.path||"";mh(d,!h||v.endsWith("*")||v.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${v}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${v}"> to <Route path="${v==="/"?"*":`${v}/*`}">.`)}let f=ar(),p;if(t){let v=typeof t=="string"?jr(t):t;Ee(u==="/"||v.pathname?.startsWith(u),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${v.pathname}" was given in the \`location\` prop.`),p=v}else p=f;let m=p.pathname||"/",g=m;if(u!=="/"){let v=u.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(v.length).join("/")}let x=oh(e,{pathname:g});Et(h||x!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),Et(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=I1(x&&x.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:er([u,i.encodeLocation?i.encodeLocation(v.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?u:er([u,i.encodeLocation?i.encodeLocation(v.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:v.pathnameBase])})),o,r,n,a);return t&&y?b.createElement(aa.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},y):y}function k1(){let e=R1(),t=y1(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=b.createElement(b.Fragment,null,b.createElement("p",null,"ðŸ’¿ Hey developer ðŸ‘‹"),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:i},"ErrorBoundary")," or"," ",b.createElement("code",{style:i},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},t),r?b.createElement("pre",{style:a},r):null,o)}var E1=b.createElement(k1,null),N1=class extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?b.createElement(qt.Provider,{value:this.props.routeContext},b.createElement(Ps.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function T1({routeContext:e,match:t,children:r}){let n=b.useContext(un);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),b.createElement(qt.Provider,{value:e},r)}function I1(e,t=[],r=null,n=null,a=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,o=r?.errors;if(o!=null){let d=i.findIndex(u=>u.route.id&&o?.[u.route.id]!==void 0);Ee(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,d+1))}let s=!1,l=-1;if(r)for(let d=0;d<i.length;d++){let u=i[d];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=d),u.route.id){let{loaderData:h,errors:f}=r,p=u.route.loader&&!h.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||p){s=!0,l>=0?i=i.slice(0,l+1):i=[i[0]];break}}}return i.reduceRight((d,u,h)=>{let f,p=!1,m=null,g=null;r&&(f=o&&u.route.id?o[u.route.id]:void 0,m=u.route.errorElement||E1,s&&(l<0&&h===0?(mh("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,g=null):l===h&&(p=!0,g=u.route.hydrateFallbackElement||null)));let x=t.concat(i.slice(0,h+1)),y=()=>{let v;return f?v=m:p?v=g:u.route.Component?v=b.createElement(u.route.Component,null):u.route.element?v=u.route.element:v=d,b.createElement(T1,{match:u,routeContext:{outlet:d,matches:x,isDataRoute:r!=null},children:v})};return r&&(u.route.ErrorBoundary||u.route.errorElement||h===0)?b.createElement(N1,{location:r.location,revalidation:r.revalidation,component:m,error:f,children:y(),routeContext:{outlet:null,matches:x,isDataRoute:!0},unstable_onError:n}):y()},null)}function Fs(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function O1(e){let t=b.useContext(un);return Ee(t,Fs(e)),t}function B1(e){let t=b.useContext(Ri);return Ee(t,Fs(e)),t}function j1(e){let t=b.useContext(qt);return Ee(t,Fs(e)),t}function $s(e){let t=j1(e),r=t.matches[t.matches.length-1];return Ee(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function D1(){return $s("useRouteId")}function R1(){let e=b.useContext(Ps),t=B1("useRouteError"),r=$s("useRouteError");return e!==void 0?e:t.errors?.[r]}function L1(){let{router:e}=O1("useNavigate"),t=$s("useNavigate"),r=b.useRef(!1);return hh(()=>{r.current=!0}),b.useCallback(async(a,i={})=>{Et(r.current,uh),r.current&&(typeof a=="number"?e.navigate(a):await e.navigate(a,{fromRouteId:t,...i}))},[e,t])}var ec={};function mh(e,t,r){!t&&!ec[e]&&(ec[e]=!0,Et(!1,r))}b.memo(M1);function M1({routes:e,future:t,state:r,unstable_onError:n}){return ph(e,void 0,r,n,t)}function P1({to:e,replace:t,state:r,relative:n}){Ee(hn(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=b.useContext(Lt);Et(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=b.useContext(qt),{pathname:o}=ar(),s=fh(),l=Ms(e,Ls(i),o,n==="path"),d=JSON.stringify(l);return b.useEffect(()=>{s(JSON.parse(d),{replace:t,state:r,relative:n})},[s,d,n,t,r]),null}function ke(e){Ee(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function F1({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:a,static:i=!1}){Ee(!hn(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),s=b.useMemo(()=>({basename:o,navigator:a,static:i,future:{}}),[o,a,i]);typeof r=="string"&&(r=jr(r));let{pathname:l="/",search:d="",hash:u="",state:h=null,key:f="default"}=r,p=b.useMemo(()=>{let m=rr(l,o);return m==null?null:{location:{pathname:m,search:d,hash:u,state:h,key:f},navigationType:n}},[o,l,d,u,h,f,n]);return Et(p!=null,`<Router basename="${o}"> is not able to match the URL "${l}${d}${u}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:b.createElement(Lt.Provider,{value:s},b.createElement(aa.Provider,{children:t,value:p}))}function $1({children:e,location:t}){return A1(Yo(e),t)}function Yo(e,t=[]){let r=[];return b.Children.forEach(e,(n,a)=>{if(!b.isValidElement(n))return;let i=[...t,a];if(n.type===b.Fragment){r.push.apply(r,Yo(n.props.children,i));return}Ee(n.type===ke,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ee(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Yo(n.props.children,i)),r.push(o)}),r}var Da="get",Ra="application/x-www-form-urlencoded";function Li(e){return e!=null&&typeof e.tagName=="string"}function U1(e){return Li(e)&&e.tagName.toLowerCase()==="button"}function z1(e){return Li(e)&&e.tagName.toLowerCase()==="form"}function H1(e){return Li(e)&&e.tagName.toLowerCase()==="input"}function G1(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function V1(e,t){return e.button===0&&(!t||t==="_self")&&!G1(e)}var ga=null;function q1(){if(ga===null)try{new FormData(document.createElement("form"),0),ga=!1}catch{ga=!0}return ga}var W1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ho(e){return e!=null&&!W1.has(e)?(Et(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ra}"`),null):e}function X1(e,t){let r,n,a,i,o;if(z1(e)){let s=e.getAttribute("action");n=s?rr(s,t):null,r=e.getAttribute("method")||Da,a=ho(e.getAttribute("enctype"))||Ra,i=new FormData(e)}else if(U1(e)||H1(e)&&(e.type==="submit"||e.type==="image")){let s=e.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||s.getAttribute("action");if(n=l?rr(l,t):null,r=e.getAttribute("formmethod")||s.getAttribute("method")||Da,a=ho(e.getAttribute("formenctype"))||ho(s.getAttribute("enctype"))||Ra,i=new FormData(s,e),!q1()){let{name:d,type:u,value:h}=e;if(u==="image"){let f=d?`${d}.`:"";i.append(`${f}x`,"0"),i.append(`${f}y`,"0")}else d&&i.append(d,h)}}else{if(Li(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Da,n=null,a=Ra,o=e}return i&&a==="text/plain"&&(o=i,i=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Us(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Y1(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&rr(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function K1(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Z1(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function J1(e,t,r){let n=await Promise.all(e.map(async a=>{let i=t.routes[a.route.id];if(i){let o=await K1(i,r);return o.links?o.links():[]}return[]}));return rm(n.flat(1).filter(Z1).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function tc(e,t,r,n,a,i){let o=(l,d)=>r[d]?l.route.id!==r[d].route.id:!0,s=(l,d)=>r[d].pathname!==l.pathname||r[d].route.path?.endsWith("*")&&r[d].params["*"]!==l.params["*"];return i==="assets"?t.filter((l,d)=>o(l,d)||s(l,d)):i==="data"?t.filter((l,d)=>{let u=n.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(o(l,d)||s(l,d))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function Q1(e,t,{includeHydrateFallback:r}={}){return em(e.map(n=>{let a=t.routes[n.route.id];if(!a)return[];let i=[a.module];return a.clientActionModule&&(i=i.concat(a.clientActionModule)),a.clientLoaderModule&&(i=i.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(i=i.concat(a.hydrateFallbackModule)),a.imports&&(i=i.concat(a.imports)),i}).flat(1))}function em(e){return[...new Set(e)]}function tm(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function rm(e,t){let r=new Set;return new Set(t),e.reduce((n,a)=>{let i=JSON.stringify(tm(a));return r.has(i)||(r.add(i),n.push({key:i,link:a})),n},[])}function gh(){let e=b.useContext(un);return Us(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function nm(){let e=b.useContext(Ri);return Us(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var zs=b.createContext(void 0);zs.displayName="FrameworkContext";function xh(){let e=b.useContext(zs);return Us(e,"You must render this element inside a <HydratedRouter> element"),e}function am(e,t){let r=b.useContext(zs),[n,a]=b.useState(!1),[i,o]=b.useState(!1),{onFocus:s,onBlur:l,onMouseEnter:d,onMouseLeave:u,onTouchStart:h}=t,f=b.useRef(null);b.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let g=y=>{y.forEach(v=>{o(v.isIntersecting)})},x=new IntersectionObserver(g,{threshold:.5});return f.current&&x.observe(f.current),()=>{x.disconnect()}}},[e]),b.useEffect(()=>{if(n){let g=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(g)}}},[n]);let p=()=>{a(!0)},m=()=>{a(!1),o(!1)};return r?e!=="intent"?[i,f,{}]:[i,f,{onFocus:bn(s,p),onBlur:bn(l,m),onMouseEnter:bn(d,p),onMouseLeave:bn(u,m),onTouchStart:bn(h,p)}]:[!1,f,{}]}function bn(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function im({page:e,...t}){let{router:r}=gh(),n=b.useMemo(()=>oh(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?b.createElement(sm,{page:e,matches:n,...t}):null}function om(e){let{manifest:t,routeModules:r}=xh(),[n,a]=b.useState([]);return b.useEffect(()=>{let i=!1;return J1(e,t,r).then(o=>{i||a(o)}),()=>{i=!0}},[e,t,r]),n}function sm({page:e,matches:t,...r}){let n=ar(),{manifest:a,routeModules:i}=xh(),{basename:o}=gh(),{loaderData:s,matches:l}=nm(),d=b.useMemo(()=>tc(e,t,l,a,n,"data"),[e,t,l,a,n]),u=b.useMemo(()=>tc(e,t,l,a,n,"assets"),[e,t,l,a,n]),h=b.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let m=new Set,g=!1;if(t.forEach(y=>{let v=a.routes[y.route.id];!v||!v.hasLoader||(!d.some(w=>w.route.id===y.route.id)&&y.route.id in s&&i[y.route.id]?.shouldRevalidate||v.hasClientLoader?g=!0:m.add(y.route.id))}),m.size===0)return[];let x=Y1(e,o,"data");return g&&m.size>0&&x.searchParams.set("_routes",t.filter(y=>m.has(y.route.id)).map(y=>y.route.id).join(",")),[x.pathname+x.search]},[o,s,n,a,d,t,e,i]),f=b.useMemo(()=>Q1(u,a),[u,a]),p=om(u);return b.createElement(b.Fragment,null,h.map(m=>b.createElement("link",{key:m,rel:"prefetch",as:"fetch",href:m,...r})),f.map(m=>b.createElement("link",{key:m,rel:"modulepreload",href:m,...r})),p.map(({key:m,link:g})=>b.createElement("link",{key:m,nonce:r.nonce,...g})))}function lm(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var vh=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{vh&&(window.__reactRouterVersion="7.9.3")}catch{}function cm({basename:e,children:t,window:r}){let n=b.useRef();n.current==null&&(n.current=Kp({window:r,v5Compat:!0}));let a=n.current,[i,o]=b.useState({action:a.action,location:a.location}),s=b.useCallback(l=>{b.startTransition(()=>o(l))},[o]);return b.useLayoutEffect(()=>a.listen(s),[a,s]),b.createElement(F1,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:a})}var yh=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Oe=b.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:a,reloadDocument:i,replace:o,state:s,target:l,to:d,preventScrollReset:u,viewTransition:h,...f},p){let{basename:m}=b.useContext(Lt),g=typeof d=="string"&&yh.test(d),x,y=!1;if(typeof d=="string"&&g&&(x=d,vh))try{let B=new URL(window.location.href),E=d.startsWith("//")?new URL(B.protocol+d):new URL(d),I=rr(E.pathname,m);E.origin===B.origin&&I!=null?d=I+E.search+E.hash:y=!0}catch{Et(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=C1(d,{relative:a}),[w,S,C]=am(n,f),k=hm(d,{replace:o,state:s,target:l,preventScrollReset:u,relative:a,viewTransition:h});function A(B){t&&t(B),B.defaultPrevented||k(B)}let N=b.createElement("a",{...f,...C,href:x||v,onClick:y||i?t:A,ref:lm(p,S),target:l,"data-discover":!g&&r==="render"?"true":void 0});return w&&!g?b.createElement(b.Fragment,null,N,b.createElement(im,{page:v})):N});Oe.displayName="Link";var st=b.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:a=!1,style:i,to:o,viewTransition:s,children:l,...d},u){let h=ia(o,{relative:d.relative}),f=ar(),p=b.useContext(Ri),{navigator:m,basename:g}=b.useContext(Lt),x=p!=null&&xm(h)&&s===!0,y=m.encodeLocation?m.encodeLocation(h).pathname:h.pathname,v=f.pathname,w=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;r||(v=v.toLowerCase(),w=w?w.toLowerCase():null,y=y.toLowerCase()),w&&g&&(w=rr(w,g)||w);const S=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let C=v===y||!a&&v.startsWith(y)&&v.charAt(S)==="/",k=w!=null&&(w===y||!a&&w.startsWith(y)&&w.charAt(y.length)==="/"),A={isActive:C,isPending:k,isTransitioning:x},N=C?t:void 0,B;typeof n=="function"?B=n(A):B=[n,C?"active":null,k?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let E=typeof i=="function"?i(A):i;return b.createElement(Oe,{...d,"aria-current":N,className:B,ref:u,style:E,to:o,viewTransition:s},typeof l=="function"?l(A):l)});st.displayName="NavLink";var dm=b.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:a,state:i,method:o=Da,action:s,onSubmit:l,relative:d,preventScrollReset:u,viewTransition:h,...f},p)=>{let m=mm(),g=gm(s,{relative:d}),x=o.toLowerCase()==="get"?"get":"post",y=typeof s=="string"&&yh.test(s),v=w=>{if(l&&l(w),w.defaultPrevented)return;w.preventDefault();let S=w.nativeEvent.submitter,C=S?.getAttribute("formmethod")||o;m(S||w.currentTarget,{fetcherKey:t,method:C,navigate:r,replace:a,state:i,relative:d,preventScrollReset:u,viewTransition:h})};return b.createElement("form",{ref:p,method:x,action:g,onSubmit:n?l:v,...f,"data-discover":!y&&e==="render"?"true":void 0})});dm.displayName="Form";function um(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bh(e){let t=b.useContext(un);return Ee(t,um(e)),t}function hm(e,{target:t,replace:r,state:n,preventScrollReset:a,relative:i,viewTransition:o}={}){let s=fh(),l=ar(),d=ia(e,{relative:i});return b.useCallback(u=>{if(V1(u,t)){u.preventDefault();let h=r!==void 0?r:Wn(l)===Wn(d);s(e,{replace:h,state:n,preventScrollReset:a,relative:i,viewTransition:o})}},[l,s,d,r,n,t,e,a,i,o])}var fm=0,pm=()=>`__${String(++fm)}__`;function mm(){let{router:e}=bh("useSubmit"),{basename:t}=b.useContext(Lt),r=D1();return b.useCallback(async(n,a={})=>{let{action:i,method:o,encType:s,formData:l,body:d}=X1(n,t);if(a.navigate===!1){let u=a.fetcherKey||pm();await e.fetch(u,r,a.action||i,{preventScrollReset:a.preventScrollReset,formData:l,body:d,formMethod:a.method||o,formEncType:a.encType||s,flushSync:a.flushSync})}else await e.navigate(a.action||i,{preventScrollReset:a.preventScrollReset,formData:l,body:d,formMethod:a.method||o,formEncType:a.encType||s,replace:a.replace,state:a.state,fromRouteId:r,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,t,r])}function gm(e,{relative:t}={}){let{basename:r}=b.useContext(Lt),n=b.useContext(qt);Ee(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),i={...ia(e||".",{relative:t})},o=ar();if(e==null){i.search=o.search;let s=new URLSearchParams(i.search),l=s.getAll("index");if(l.some(u=>u==="")){s.delete("index"),l.filter(h=>h).forEach(h=>s.append("index",h));let u=s.toString();i.search=u?`?${u}`:""}}return(!e||e===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:er([r,i.pathname])),Wn(i)}function xm(e,{relative:t}={}){let r=b.useContext(dh);Ee(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=bh("useViewTransitionState"),a=ia(e,{relative:t});if(!r.isTransitioning)return!1;let i=rr(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=rr(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Ka(a.pathname,o)!=null||Ka(a.pathname,i)!=null}function vm(){return c.jsxs("div",{className:"space-y-3",children:[c.jsxs("p",{className:"text-base text-white/90",children:["ðŸš© Flag Foundry stress-tests the ",c.jsx("code",{className:"rounded bg-white/10 px-1 py-0.5",children:"/svg"})," route by rebuilding national flags at a controlled pace, showing how an LLM keeps the required shapes and color rules in line."]}),c.jsx("p",{className:"text-sm text-white/80",children:"Queue flag prompts for the SVG worker and it streams a new European flag every two seconds, paired with the Unicode reference for quick accuracy checks."}),c.jsxs("p",{className:"text-sm text-white/80",children:["ðŸ§  This page looks at how much flag detail"," ",c.jsx("a",{href:"https://en.wikipedia.org/wiki/LLaMA_(language_model)",className:"underline decoration-dotted underline-offset-2 text-white transition hover:text-white/80",target:"_blank",rel:"noreferrer",children:"LLaMAÂ 3Â 70B"}),"Â can recover within a 1024-token budget. Simple layouts are easy wins; intricate layouts push the limit."]})]})}var rc={};const fo=typeof globalThis<"u"&&rc?rc:void 0;function _t(e){if(e&&fo&&fo[e]!==void 0)return fo[e]}const et=(_t("VITE_CHAT_BASE_URL")||"https://groq-endpoint.louispaulet13.workers.dev").replace(/\/$/,""),fn=[{id:"allergyfinder",path:"/allergyfinder",name:"AllergyFinder",headline:"Allergy Assistant",description:"Use Groq to explore ingredient lists, highlight allergens, and triage food questions with product context.",badge:"Nutrition",heroGradient:"from-emerald-500 to-teal-500",panelAccent:"bg-emerald-100 text-emerald-900 dark:bg-emerald-500/20 dark:text-emerald-200",navAccent:{gradient:"from-emerald-500 to-teal-500",hover:"hover:bg-emerald-500/10 hover:text-emerald-600 hover:border-emerald-400/60 dark:hover:bg-emerald-500/20 dark:hover:text-emerald-200 dark:hover:border-emerald-400/60",focus:"focus-visible:ring-emerald-500/40"},defaultModel:"openai/gpt-oss-20b",modelOptions:["openai/gpt-oss-20b","openai/gpt-oss-120b"],greeting:"Hi! Ask me about allergens in any food and I'll look it up for you.",promptPlaceholder:"Ask about allergens in a recipe or packaged food...",systemPrompt:["You are an allergy assistant that uses product data to answer questions about food allergens.","Use the provided context when it is relevant and be transparent about any gaps.","When a barcode is available, share the product page URL.","Encourage users to double-check packaging for medical decisions.","When allergy notes from the Allergy Cookie Editor are supplied, treat them as authoritative user-provided context and surface relevant reminders proactively."].join(" "),allowBaseUrlOverride:!1,enableStlViewer:!1,enableBarcodeScanner:!0,logLabel:"AllergyFinder",defaultBaseUrl:(_t("VITE_ALLERGY_CHAT_BASE_URL")||et).replace(/\/$/,"")},{id:"objectmaker",path:"/objectmaker",name:"Object Maker",headline:"Design JSON â†’ Create Objects",description:"Handcraft a JSON structure or ask the assistant to propose one, then call the /obj endpoint to instantiate concrete objects. Save results and browse them in the Zoo.",badge:"Builder",heroGradient:"from-yellow-400 to-amber-600",panelAccent:"bg-yellow-100 text-yellow-900 dark:bg-yellow-500/20 dark:text-yellow-200",navAccent:{gradient:"from-yellow-400 to-amber-600",hover:"hover:bg-yellow-500/10 hover:text-amber-600 hover:border-amber-400/60 dark:hover:bg-yellow-500/20 dark:hover:text-yellow-200 dark:hover:border-amber-400/60",focus:"focus-visible:ring-yellow-500/40"},defaultModel:"openai/gpt-oss-20b",modelOptions:["openai/gpt-oss-20b","openai/gpt-oss-120b"],greeting:'Describe an object you want (e.g., pizza, hot sauce, car). I will propose a JSON Schema with type "object" and useful properties.',promptPlaceholder:"Describe the JSON Schema you wantâ€¦",systemPrompt:["You help design concise JSON Schema definitions (draft-agnostic) for a single object.",'Always return exactly one JSON object that is a JSON Schema with top-level "type":"object" and a "properties" map.','Prefer simple types (string, number, integer, boolean, array, object). Include "items" for arrays. Avoid examples or prose.','Avoid unsupported JSON Schema keywords such as "format", "$ref", or vendor-specific extensions. Express constraints with enums or descriptions instead.',"Do not include markdown fences or backticks. Return only the JSON Schema object."].join(" "),allowBaseUrlOverride:!1,enableStlViewer:!1,logLabel:"Object Maker",defaultBaseUrl:(_t("VITE_OBJECTMAKER_CHAT_BASE_URL")||et).replace(/\/$/,"")},{id:"stlviewer",path:"/stlviewer",name:"STL Studio",headline:"3D Printing Copilot",description:"Chat about STL files, design tweaks, and 3D printing tips while previewing models inline.",badge:"3D",heroGradient:"from-indigo-500 to-slate-700",panelAccent:"bg-indigo-100 text-indigo-900 dark:bg-indigo-500/20 dark:text-indigo-200",navAccent:{gradient:"from-indigo-500 to-slate-700",hover:"hover:bg-indigo-500/10 hover:text-indigo-400 hover:border-indigo-400/60 dark:hover:bg-indigo-500/20 dark:hover:text-indigo-200 dark:hover:border-indigo-400/60",focus:"focus-visible:ring-indigo-500/40"},defaultModel:"openai/gpt-oss-20b",modelOptions:["openai/gpt-oss-20b","openai/gpt-oss-120b"],greeting:"Hi! Ask me anything about STL models or 3D printing workflows.",promptPlaceholder:"Need help with an STL? Ask about fixes, slicing, or design tweaks...",systemPrompt:["You are a helpful AI assistant who understands STL files and 3D printing workflows.","Provide concise, practical answers and include tips for viewing or tweaking STL content when relevant."].join(" "),allowBaseUrlOverride:!1,enableStlViewer:!0,logLabel:"STL Studio",defaultBaseUrl:(_t("VITE_STL_CHAT_BASE_URL")||et).replace(/\/$/,"")},{id:"pokedex",path:"/pokedex",name:"Pokedex",headline:"Concise Pokemon Companion",description:"Ask for typings, strengths, weaknesses, and quick lore delivered by a remote Pokedex service.",badge:"Pokemon",heroGradient:"from-rose-500 to-orange-500",panelAccent:"bg-rose-100 text-rose-900 dark:bg-rose-500/20 dark:text-rose-200",navAccent:{gradient:"from-rose-500 to-orange-500",hover:"hover:bg-rose-500/10 hover:text-rose-500 hover:border-rose-400/60 dark:hover:bg-rose-500/20 dark:hover:text-rose-200 dark:hover:border-rose-400/60",focus:"focus-visible:ring-rose-500/40"},defaultModel:"openai/gpt-oss-20b",modelOptions:["openai/gpt-oss-20b","openai/gpt-oss-120b"],greeting:"Hi! Ask me about any Pokemon and I will fetch quick Pokedex facts.",promptPlaceholder:"Example: What are Gengar strengths and weaknesses?",systemPrompt:["You are a remote Pokedex assistant. Answer questions about Pokemon in two or three sentences.","Highlight typings, notable strengths or weaknesses, and other concise Pokedex facts.","If the question falls outside Pokemon, politely redirect the user."].join(" "),allowBaseUrlOverride:!0,enableStlViewer:!1,logLabel:"Pokedex",defaultBaseUrl:(_t("VITE_POKEDEX_CHAT_BASE_URL")||et).replace(/\/$/,"")},{id:"imagegen",path:"/imagegen",name:"Flux Image Lab",headline:"Prompt â†’ Flux image in seconds",description:"Send prompts to the Groq-hosted Flux endpoint, preview the returned image, and keep a cookie-backed gallery of recent hits.",badge:"Images",heroGradient:"from-sky-500 to-cyan-600",panelAccent:"bg-sky-100 text-sky-900 dark:bg-sky-500/20 dark:text-sky-200",navAccent:{gradient:"from-sky-500 to-cyan-600",hover:"hover:bg-sky-500/10 hover:text-sky-600 hover:border-sky-400/60 dark:hover:bg-sky-500/20 dark:hover:text-sky-200 dark:hover:border-sky-400/60",focus:"focus-visible:ring-sky-500/40"},defaultModel:"flux-image-endpoint",modelOptions:["Flux image endpoint"],imageApiBaseUrl:(_t("VITE_IMAGE_API_BASE_URL")||et).replace(/\/$/,""),allowBaseUrlOverride:!1,enableStlViewer:!1,enableBarcodeScanner:!1,logLabel:"ImageGen"},{id:"svglab",path:"/svg-lab",name:"SVG Prompt Lab",headline:"Sketch vector art from pure text instructions.",description:"Feed prompts into the /svg worker endpoint, preview the returned artwork inline, and keep a cookie-backed gallery of your favorite prompts.",badge:"Vector",heroGradient:"from-violet-500 to-purple-600",panelAccent:"bg-violet-100 text-violet-900 dark:bg-violet-500/20 dark:text-violet-200",navAccent:{gradient:"from-violet-500 to-purple-600",hover:"hover:bg-violet-500/10 hover:text-violet-600 hover:border-violet-400/60 dark:hover:bg-violet-500/20 dark:hover:text-violet-200 dark:hover:border-violet-400/60",focus:"focus-visible:ring-violet-500/40"},defaultModel:"svg-route",modelOptions:["SVG worker route"],allowBaseUrlOverride:!1,enableStlViewer:!1,enableBarcodeScanner:!1,logLabel:"SVGLab",svgApiBaseUrl:(_t("VITE_SVG_API_BASE_URL")||et).replace(/\/$/,"")},{id:"flagfoundry",path:"/flag-foundry",name:"Flag Foundry",headline:"Throttle /svg calls to rebuild national flags.",description:"Queue flag prompts for the SVG worker, loading a new European flag every two seconds with a Unicode reference for accuracy checks.",badge:"Atlas",heroGradient:"from-sky-500 to-blue-600",panelAccent:"bg-sky-100 text-sky-900 dark:bg-sky-500/20 dark:text-sky-200",heroContent:vm,navAccent:{gradient:"from-sky-500 to-blue-600",hover:"hover:bg-sky-500/10 hover:text-sky-600 hover:border-sky-400/60 dark:hover:bg-sky-500/20 dark:hover:text-sky-200 dark:hover:border-sky-400/60",focus:"focus-visible:ring-sky-500/40"},defaultModel:"svg-route",modelOptions:["SVG worker route"],allowBaseUrlOverride:!1,enableStlViewer:!1,enableBarcodeScanner:!1,logLabel:"FlagFoundry",svgApiBaseUrl:(_t("VITE_SVG_API_BASE_URL")||et).replace(/\/$/,"")},{id:"mermaidstudio",path:"/mermaid-studio",name:"Mermaid Display",headline:"Draft Mermaid syntax and render diagrams in an instant workspace.",description:"Type Mermaid definitions, press render, and archive every previous diagram in a cookie-backed gallery for quick reference.",badge:"Diagram",heroGradient:"from-cyan-500 to-emerald-500",panelAccent:"bg-cyan-100 text-cyan-900 dark:bg-cyan-500/20 dark:text-cyan-200",navAccent:{gradient:"from-cyan-500 to-emerald-500",hover:"hover:bg-cyan-500/10 hover:text-emerald-600 hover:border-cyan-400/60 dark:hover:bg-cyan-500/20 dark:hover:text-emerald-200 dark:hover:border-cyan-400/60",focus:"focus-visible:ring-cyan-500/40"},logLabel:"MermaidDisplay",defaultModel:"openai/gpt-oss-20b",modelOptions:["openai/gpt-oss-20b","openai/gpt-oss-120b"],defaultBaseUrl:(_t("VITE_MERMAID_OBJ_BASE_URL")||et).replace(/\/$/,""),allowBaseUrlOverride:!1},{id:"pizzamaker",path:"/pizza-maker",name:"Pizza Maker",headline:"Design your dream pie, then let Groq plate it.",description:"Select sauces, cheeses, toppings, and art direction. Groq converts your build into a luxe image prompt and renders the pie.",badge:"Culinary",heroGradient:"from-orange-500 to-red-500",panelAccent:"bg-orange-100 text-orange-900 dark:bg-orange-500/20 dark:text-orange-200",navAccent:{gradient:"from-orange-500 to-red-500",hover:"hover:bg-orange-500/10 hover:text-orange-600 hover:border-orange-400/60 dark:hover:bg-orange-500/20 dark:hover:text-orange-200 dark:hover:border-orange-400/60",focus:"focus-visible:ring-orange-500/40"},defaultModel:"openai/gpt-oss-20b",modelOptions:["openai/gpt-oss-20b","openai/gpt-oss-120b"],greeting:"Craving something specific? Dial in your toppings and we will stage the perfect pizza photo.",promptPlaceholder:"Describe the pizza mood you want to captureâ€¦",systemPrompt:["You are a culinary art director who helps users plan photorealistic pizza imagery.","Reference the provided configuration faithfully and suggest plating or styling ideas when asked."].join(" "),allowBaseUrlOverride:!1,enableStlViewer:!1,enableBarcodeScanner:!1,logLabel:"PizzaMaker",imageApiBaseUrl:(_t("VITE_IMAGE_API_BASE_URL")||et).replace(/\/$/,""),defaultBaseUrl:et},{id:"carmaker",path:"/car-maker",name:"Car Maker",headline:"Style a hero car and Groq will stage the scene.",description:"Select the brand, finish, camera angle, and cinematic backdrop. Groq transforms it into a luxe prompt and renders the ride.",badge:"Automotive",heroGradient:"from-slate-900 via-sky-800 to-cyan-600",panelAccent:"bg-slate-900 text-white dark:bg-slate-900 dark:text-slate-100",navAccent:{gradient:"from-slate-900 via-sky-800 to-cyan-600",hover:"hover:bg-slate-900/10 hover:text-slate-900 hover:border-slate-700/60 dark:hover:bg-slate-900/30 dark:hover:text-slate-100 dark:hover:border-slate-500/60",focus:"focus-visible:ring-slate-900/40"},defaultModel:"openai/gpt-oss-20b",modelOptions:["openai/gpt-oss-20b","openai/gpt-oss-120b"],greeting:"Ready to spec a show-stopping hero car? Tune the exterior and I will help stage it.",promptPlaceholder:"Describe the vibe you want for this hero car shotâ€¦",systemPrompt:["You are an automotive concept stylist who helps users craft photorealistic hero car imagery.","Only discuss visible exterior design, stance, lighting, and setting."].join(" "),allowBaseUrlOverride:!1,enableStlViewer:!1,enableBarcodeScanner:!1,logLabel:"CarMaker",imageApiBaseUrl:(_t("VITE_IMAGE_API_BASE_URL")||et).replace(/\/$/,""),defaultBaseUrl:et},{id:"pongshowdown",path:"/pong-showdown",name:"Pong Showdown",headline:"Arcade rallies with Groq-styled palettes.",description:"Watch an autonomous Pong match where every paddle hit or score triggers a Groq /obj request for a brand-new colorway.",badge:"Arcade",heroGradient:"from-emerald-500 to-sky-500",panelAccent:"bg-emerald-100 text-emerald-900 dark:bg-emerald-500/20 dark:text-emerald-200",navAccent:{gradient:"from-emerald-500 to-sky-500",hover:"hover:bg-emerald-500/10 hover:text-emerald-600 hover:border-emerald-400/60 dark:hover:bg-emerald-500/20 dark:hover:text-emerald-200 dark:hover:border-emerald-400/60",focus:"focus-visible:ring-emerald-500/40"},defaultModel:"meta-llama/llama-4-maverick-17b-128e-instruct",modelOptions:["meta-llama/llama-4-maverick-17b-128e-instruct","meta-llama/llama-4-scout-17b-16e-instruct"],allowBaseUrlOverride:!1,enableStlViewer:!1,enableBarcodeScanner:!1,logLabel:"PongShowdown",defaultBaseUrl:et},{id:"newsanalyzer",path:"/newsanalyzer",name:"NewsÂ Analyzer",headline:"Real-time News Analysis",description:"Explore and analyze real-time news feeds from various sources, powered by a Cloudflare Worker.",badge:"News",heroGradient:"from-blue-500 to-sky-600",panelAccent:"bg-blue-100 text-blue-900 dark:bg-blue-500/20 dark:text-blue-200",navAccent:{gradient:"from-blue-500 to-sky-600",hover:"hover:bg-blue-500/10 hover:text-blue-600 hover:border-blue-400/60 dark:hover:bg-blue-500/20 dark:hover:text-blue-200 dark:hover:border-blue-400/60",focus:"focus-visible:ring-blue-500/40"},defaultModel:"openai/gpt-oss-20b",modelOptions:["openai/gpt-oss-20b","openai/gpt-oss-120b"],greeting:"Welcome to the News Analyzer. Select your topics and let's see what's happening.",promptPlaceholder:"Ask a question about the news...",systemPrompt:["You are a news analysis assistant.","Use the provided news articles to answer questions and provide summaries.","Be neutral and objective in your analysis."].join(" "),allowBaseUrlOverride:!0,enableStlViewer:!1,enableBarcodeScanner:!1,logLabel:"NewsAnalyzer",defaultBaseUrl:(_t("VITE_NEWS_BASE_URL")||et).replace(/\/$/,"")},{id:"sixdegrees",path:"/six-degrees",name:"Six Degrees Of",headline:"Watch a message morph through six parody passes.",description:"Start with any sentence and see how Groq remixes it into six escalating parodies, delivered one beat at a time.",badge:"Remix",heroGradient:"from-fuchsia-500 to-purple-600",panelAccent:"bg-fuchsia-100 text-fuchsia-900 dark:bg-fuchsia-500/20 dark:text-fuchsia-200",navAccent:{gradient:"from-fuchsia-500 to-purple-600",hover:"hover:bg-fuchsia-500/10 hover:text-fuchsia-600 hover:border-fuchsia-400/60 dark:hover:bg-fuchsia-500/20 dark:hover:text-fuchsia-200 dark:hover:border-fuchsia-400/60",focus:"focus-visible:ring-fuchsia-500/40"},defaultModel:"openai/gpt-oss-20b",modelOptions:["openai/gpt-oss-20b","openai/gpt-oss-120b"],systemPrompt:["You are a playful parody writer. When given any text you respond with a witty parody of it.","Keep responses concise (2-4 sentences) and ensure they clearly riff on the original idea.","Match the length of the original message as closely as possibleâ€”no more than about 20% longer than the user's input.","Avoid quoting the original verbatim; reshape it with humor and creative twists."].join(" "),allowBaseUrlOverride:!1,enableStlViewer:!1,enableBarcodeScanner:!1,logLabel:"SixDegrees",defaultBaseUrl:et}];function Mi(e){return fn.find(t=>t.id===e)}const wh=b.createContext({theme:"light",setTheme:()=>{}});function ym(){if(typeof window>"u")return"light";try{return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}catch{return"light"}}function bm({children:e}){const[t,r]=b.useState(()=>{try{const a=localStorage.getItem("theme");if(a==="light"||a==="dark")return a}catch{}return ym()});b.useEffect(()=>{try{localStorage.setItem("theme",t)}catch{}const a=document.documentElement;t==="dark"?a.classList.add("dark"):a.classList.remove("dark")},[t]);const n=b.useMemo(()=>({theme:t,setTheme:r}),[t]);return c.jsx(wh.Provider,{value:n,children:e})}function wm(){return b.useContext(wh)}function _m(){const{theme:e,setTheme:t}=wm(),r=e==="dark";return c.jsxs("button",{type:"button",onClick:()=>t(r?"light":"dark"),className:"inline-flex items-center gap-2 rounded-md border border-slate-300 bg-white/80 px-3 py-2 text-sm font-medium text-slate-700 shadow-sm hover:bg-slate-50 dark:border-slate-700 dark:bg-slate-800/70 dark:text-slate-100",title:"Toggle theme",children:[r?c.jsx(Dp,{className:"h-5 w-5"}):c.jsx(Rp,{className:"h-5 w-5"}),c.jsx("span",{className:"hidden sm:inline",children:r?"LightÂ mode":"DarkÂ mode"})]})}function nc({isActive:e}){const t="inline-flex items-center rounded-full border px-4 py-2 text-sm font-medium transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-slate-900",r="focus-visible:ring-brand-500/40";return e?`${t} border-transparent bg-brand-600 text-white shadow ${r}`:`${t} border-slate-300 bg-white/70 text-slate-600 hover:border-brand-500/60 hover:bg-brand-500/10 hover:text-brand-600 dark:border-slate-700 dark:bg-slate-900/60 dark:text-slate-300 dark:hover:text-white ${r}`}function Cm(e){const t=e?.gradient||"from-brand-500 to-brand-600",r=e?.hover||"hover:bg-brand-500/10 hover:text-brand-600 hover:border-brand-400/60",n=e?.focus||"focus-visible:ring-brand-500/40";return({isActive:a})=>{const i="inline-flex items-center rounded-full border px-4 py-2 text-sm font-medium transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-slate-900";return a?`${i} border-transparent bg-gradient-to-r ${t} text-white shadow ${n}`:`${i} border-slate-300 bg-white/70 text-slate-600 ${r} dark:border-slate-700 dark:bg-slate-900/60 dark:text-slate-300 dark:hover:text-white ${n}`}}function ac({isActive:e}){return`inline-flex items-center rounded-full border border-slate-300 px-3 py-1 text-xs font-medium text-slate-600 transition hover:border-brand-500 hover:text-brand-600 dark:border-slate-600 dark:text-slate-300 ${e?"bg-brand-600 text-white border-brand-600 shadow-sm":""}`}function Sm({isActive:e}){const t="inline-flex h-11 w-11 items-center justify-center rounded-full border text-slate-600 transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500/40 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:text-slate-200 dark:focus-visible:ring-offset-slate-900";return e?`${t} border-brand-500 bg-brand-600 text-white shadow`:`${t} border-slate-300 bg-white/80 hover:border-brand-500/60 hover:bg-brand-500/10 hover:text-brand-600 dark:border-slate-700 dark:bg-slate-800/70`}function Am({children:e}){return c.jsxs("div",{className:"min-h-screen flex flex-col",children:[c.jsx("header",{className:"sticky top-0 z-20 border-b border-slate-200 bg-white/80 backdrop-blur supports-[backdrop-filter]:bg-white/70 dark:border-slate-800 dark:bg-slate-900/70",children:c.jsxs("div",{className:"mx-auto flex w-full max-w-6xl items-center justify-between gap-4 px-4 py-4 sm:px-6 lg:px-8",children:[c.jsxs(st,{to:"/",className:"flex items-center gap-3",children:[c.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-xl bg-brand-600 text-white text-lg font-semibold",children:"llI"}),c.jsxs("div",{className:"leading-tight",children:[c.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Groq"}),c.jsx("div",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"AllIn Studio"})]})]}),c.jsxs("nav",{className:"hidden items-center gap-2 md:flex",children:[c.jsx(st,{to:"/",className:nc,end:!0,children:"Overview"}),fn.filter(t=>t.id!=="objectmaker"&&t.id!=="stlviewer"&&t.id!=="sixdegrees"&&t.id!=="imagegen"&&t.id!=="svglab"&&t.id!=="flagfoundry"&&t.id!=="pizzamaker"&&t.id!=="carmaker"&&t.id!=="mermaidstudio"&&t.id!=="pongshowdown").map(t=>c.jsx(st,{to:t.path,className:Cm(t.navAccent),children:t.name},t.id)),c.jsx(st,{to:"/about",className:nc,children:"About"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs(st,{to:"/profile",className:Sm,title:"Profile options",children:[c.jsx(Ku,{className:"h-5 w-5"}),c.jsx("span",{className:"sr-only",children:"Profile options"})]}),c.jsx(_m,{})]})]})}),c.jsx("main",{className:"flex-1",children:c.jsx("div",{className:"mx-auto w-full max-w-6xl px-4 py-8 sm:px-6 lg:px-8",children:e})}),c.jsx("footer",{className:"mt-auto border-t border-slate-200 bg-white/80 py-6 text-sm text-slate-600 backdrop-blur supports-[backdrop-filter]:bg-white/70 dark:border-slate-800 dark:bg-slate-900/70 dark:text-slate-300",children:c.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-2 px-4 text-center sm:flex-row sm:items-center sm:justify-between sm:px-6 lg:px-8 sm:text-left",children:[c.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-x-3 gap-y-2 sm:justify-start",children:[c.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-x-2 gap-y-1 sm:justify-start",children:[c.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:"Groq AllIn Studio"}),c.jsx("span",{className:"text-xs uppercase tracking-wide text-slate-400 dark:text-slate-500",children:"Unified Workspace âš™ï¸"})]}),c.jsx(st,{to:"/",className:ac,end:!0,children:"Overview"}),c.jsx(st,{to:"/about",className:ac,children:"About"})]}),c.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Fast chats powered by Groqâ€™s API Â· Built with React, Vite, and Tailwind CSS âš¡ï¸"})]})})]})}const Jt=[{name:"Gosper Loop Garden",description:"A classic glider gun keeps launching ships that wrap around the toroidal edge.",cells:[[5,1],[5,2],[6,1],[6,2],[5,11],[6,11],[7,11],[4,12],[3,13],[3,14],[8,12],[9,13],[9,14],[6,15],[4,16],[8,16],[5,17],[6,17],[7,17],[6,18],[3,21],[4,21],[5,21],[3,22],[4,22],[5,22],[2,23],[6,23],[1,25],[2,25],[6,25],[7,25],[3,35],[4,35],[3,36],[4,36]]},{name:"Pulsar Observatory",description:"Twin pulsars breathe in sync while stabilizers keep the rhythm steady.",cells:[[2,8],[2,9],[2,10],[2,14],[2,15],[2,16],[4,6],[4,11],[4,13],[4,18],[5,6],[5,11],[5,13],[5,18],[6,6],[6,11],[6,13],[6,18],[7,8],[7,9],[7,10],[7,14],[7,15],[7,16],[9,8],[9,9],[9,10],[9,14],[9,15],[9,16],[10,6],[10,11],[10,13],[10,18],[11,6],[11,11],[11,13],[11,18],[12,6],[12,11],[12,13],[12,18],[14,8],[14,9],[14,10],[14,14],[14,15],[14,16],[16,8],[16,9],[16,10],[16,14],[16,15],[16,16],[3,24],[3,25],[4,24],[4,25],[13,24],[13,25],[14,24],[14,25]]},{name:"Spaceship Carousel",description:"Four lightweight spaceships chase each other on a seamless neon grid.",cells:[[2,3],[2,4],[3,2],[4,2],[5,2],[5,5],[2,5],[3,6],[4,6],[5,6],[16,10],[16,11],[15,12],[14,12],[13,12],[13,9],[16,9],[15,8],[14,8],[13,8],[6,30],[6,31],[7,32],[7,33],[7,34],[8,29],[9,29],[9,34],[8,35],[6,34],[12,20],[12,21],[11,22],[11,23],[11,24],[10,19],[9,19],[9,24],[10,25],[12,24]]},{name:"Pentadecathlon Runway",description:"A period-15 backbone oscillates between narrow and wide beams like a gated particle accelerator.",cells:[[0,2],[0,7],[1,0],[1,1],[1,3],[1,4],[1,5],[1,6],[1,8],[1,9],[2,2],[2,7]]},{name:"Queen Bee Shuttle",description:"Catalyzed queen bees shuttle sparks between stabilizers for a graceful period-30 cycle.",cells:[[0,9],[1,7],[1,9],[2,6],[2,8],[3,0],[3,1],[3,5],[3,8],[3,20],[3,21],[4,0],[4,1],[4,6],[4,8],[4,20],[4,21],[5,7],[5,9],[6,9]]},{name:"Simkin Workshop",description:"A compact period-120 glider gun quietly forges ships that wrap around the torus for ages.",cells:[[0,0],[0,1],[0,7],[0,8],[1,0],[1,1],[1,7],[1,8],[3,4],[3,5],[4,4],[4,5],[9,22],[9,23],[9,25],[9,26],[10,21],[10,27],[11,21],[11,28],[11,31],[11,32],[12,21],[12,22],[12,23],[12,27],[12,31],[12,32],[13,26],[17,20],[17,21],[18,20],[19,21],[19,22],[19,23],[20,23]]},{name:"Spaceship Squadron",description:"Light, middle, and heavyweight spaceships sprint eastward in formation for a c/2 flyby.",cells:[[4,4],[4,7],[5,8],[6,4],[6,8],[7,5],[7,6],[7,7],[7,8],[14,8],[15,6],[15,10],[16,11],[17,6],[17,11],[18,7],[18,8],[18,9],[18,10],[18,11],[24,10],[24,11],[25,8],[25,13],[26,14],[27,8],[27,14],[28,9],[28,10],[28,11],[28,12],[28,13],[28,14]]},{name:"Glider Pinwheel",description:"Four gliders peel away in opposite diagonals, sketching a pinwheel of c/4 ships.",cells:[[12,13],[12,19],[13,14],[13,18],[14,12],[14,13],[14,14],[14,18],[14,19],[14,20],[18,12],[18,13],[18,14],[18,18],[18,19],[18,20],[19,14],[19,18],[20,13],[20,19]]},{name:"Snowflake Stillness",description:"Nine detached blocks crystalize into a snowflake still life that never changes shape.",cells:[[6,6],[6,7],[6,9],[6,10],[6,12],[6,13],[7,6],[7,7],[7,9],[7,10],[7,12],[7,13],[9,6],[9,7],[9,9],[9,10],[9,12],[9,13],[10,6],[10,7],[10,9],[10,10],[10,12],[10,13],[12,6],[12,7],[12,9],[12,10],[12,12],[12,13],[13,6],[13,7],[13,9],[13,10],[13,12],[13,13]]},{name:"Switch Engine Trail",description:"A classic block-laying switch engine carves a diagonal debris trail over hundreds of ticks.",cells:[[0,18],[1,1],[1,2],[1,3],[1,12],[1,18],[2,0],[2,4],[2,11],[2,19],[3,1],[3,2],[3,12],[3,13],[3,14],[3,15],[3,18],[3,19],[4,3],[4,4],[4,6],[4,7],[4,17],[4,18],[4,19],[5,5],[5,6],[5,18],[5,20],[6,19],[6,27],[6,28],[7,19],[7,27],[7,28],[18,7],[18,8],[19,7],[19,8],[26,15],[26,16],[27,15],[27,16]]}],km=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]];function Em(e,t){return e<=0||t<=0?[]:Array.from({length:e},()=>Array(t).fill(0))}function Nm(e,t,r){if(!Array.isArray(e)||!e.length||t<=0||r<=0)return[];const n=e.map(([p])=>p),a=e.map(([,p])=>p),i=Math.min(...n),o=Math.max(...n),s=Math.min(...a),l=Math.max(...a),d=o-i+1,u=l-s+1,h=Math.floor((t-d)/2)-i,f=Math.floor((r-u)/2)-s;return e.map(([p,m])=>[((p+h)%t+t)%t,((m+f)%r+r)%r])}function Za(e,t,r,n={}){const{center:a=!0}=n,i=Number.isFinite(t)?Math.max(0,Math.floor(t)):0,o=Number.isFinite(r)?Math.max(0,Math.floor(r)):0;if(i===0||o===0)return[];const s=Em(i,o),l=Array.isArray(e?.cells)?e.cells:[];return(a?Nm(l,i,o):l).forEach(([u,h])=>{const f=(u%i+i)%i,p=(h%o+o)%o;s[f][p]=1}),s}function Ko(e,t={}){const{wrap:r=!0}=t,n=e.length;if(n===0)return[];const a=e[0]?.length??0;return a===0?Array.from({length:n},()=>[]):e.map((i,o)=>i.map((s,l)=>{const d=km.reduce((u,[h,f])=>{let p=o+h,m=l+f;return r?(p=(p+n)%n,m=(m+a)%a,u+e[p][m]):p<0||p>=n||m<0||m>=a?u:u+e[p][m]},0);return s?d===2||d===3?1:0:d===3?1:0}))}function Tm(e){return e.reduce((t,r)=>t+r.reduce((n,a)=>n+(a?1:0),0),0)}const ic=22,po=44,Im=260;function Om(){const e=b.useMemo(()=>Math.floor(Math.random()*Jt.length),[]),[t,r]=b.useState(e),[n,a]=b.useState(()=>Za(Jt[e],ic,po)),[i,o]=b.useState(0);b.useEffect(()=>{a(Za(Jt[t],ic,po)),o(0)},[t]),b.useEffect(()=>{const d=window.setInterval(()=>{a(u=>Ko(u)),o(u=>u+1)},Im);return()=>{window.clearInterval(d)}},[]);const s=()=>{r(d=>(d+1)%Jt.length)},l=Jt[t];return c.jsxs("section",{className:"relative overflow-hidden rounded-[2.5rem] border border-slate-200 bg-slate-900/95 px-6 py-7 text-white shadow-xl transition hover:shadow-2xl dark:border-slate-700 sm:px-10 sm:py-10",children:[c.jsx("div",{className:"pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(56,189,248,0.35),_transparent_55%)]","aria-hidden":!0}),c.jsxs("div",{className:"relative z-10 space-y-6",children:[c.jsxs("div",{className:"flex flex-col gap-5 lg:flex-row lg:items-start lg:justify-between",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"inline-flex items-center gap-2 rounded-full bg-white/10 px-4 py-1 text-xs font-semibold uppercase tracking-[0.35em] text-sky-200",children:"ðŸ§¬ Ambient Simulation"}),c.jsx("h2",{className:"text-2xl font-semibold sm:text-3xl",children:"Life Loop Observatory"}),c.jsx("p",{className:"max-w-2xl text-sm text-slate-200",children:"Watch a Conway's Game of Life preset evolve on a toroidal grid. Ready for custom dimensions or speed ramps? Hop into the Game of Life Lab for hands-on controls."})]}),c.jsxs("div",{className:"flex flex-col gap-2 self-start sm:flex-row sm:items-center",children:[c.jsxs("button",{type:"button",onClick:s,className:"inline-flex items-center justify-center gap-2 rounded-full bg-white/12 px-4 py-2 text-xs font-semibold uppercase tracking-[0.3em] text-white shadow-sm transition hover:bg-white/20",children:["Reset & Shuffle Pattern",c.jsx("span",{"aria-hidden":!0,children:"â†»"})]}),c.jsxs(Oe,{to:"/game-of-life-lab",className:"inline-flex items-center justify-center gap-2 rounded-full bg-sky-400 px-5 py-2 text-sm font-semibold text-slate-900 shadow-lg transition hover:bg-sky-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-900 focus-visible:ring-sky-200",children:["Launch Game of Life Lab",c.jsx("span",{"aria-hidden":!0,children:"â†’"})]})]})]}),c.jsxs("div",{className:"relative overflow-hidden rounded-[2.25rem] border border-white/10 bg-gradient-to-br from-slate-900 via-slate-900/80 to-slate-800 p-5 shadow-lg",children:[c.jsx("div",{className:"pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_center,_rgba(14,116,144,0.3),_transparent_70%)]","aria-hidden":!0}),c.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-3",children:[c.jsx("div",{className:"grid gap-[3px] rounded-2xl border border-white/5 bg-slate-900/80 p-4 shadow-inner",style:{gridTemplateColumns:`repeat(${po}, minmax(0, 1fr))`},children:n.map((d,u)=>d.map((h,f)=>c.jsx("div",{className:`h-3 w-3 rounded-[0.45rem] transition-all duration-300 sm:h-4 sm:w-4 ${h?"bg-sky-300 shadow-[0_0_8px_rgba(125,211,252,0.7)]":"bg-white/5"}`},`${u}-${f}`)))}),c.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4 text-xs uppercase tracking-[0.35em] text-slate-300",children:[c.jsxs("span",{className:"rounded-full border border-white/20 px-3 py-1 font-semibold",children:["Preset Â· ",l.name]}),c.jsxs("span",{className:"rounded-full border border-white/10 px-3 py-1 font-semibold",children:["Gen ",i.toLocaleString()]})]}),c.jsx("p",{className:"max-w-2xl text-center text-xs text-slate-300/80",children:l.description})]})]})]})]})}const Bm={allergyfinder:c.jsxs(c.Fragment,{children:[c.jsx("p",{children:"ðŸ›¡ï¸ AllergyFinder taps into Open Food Facts so it can examine ingredient panels in context. Bring your saved allergen profile into the conversation and the assistant highlights risky ingredients, suggests safe alternatives, and drafts grocery lists that respect your preferences. Transparency comes first: responses call out when product data is missing or when you should double-check real-world packaging. ðŸ§¾"}),c.jsx("p",{children:"Use it for meal planning, quick label triage, or inspiration when you are cooking for friends with different dietary needs. Because it runs on Groq-accelerated LLMs, you get near-instant summaries even for lengthy ingredient lists. ðŸš€"})]}),imagegen:c.jsxs(c.Fragment,{children:[c.jsx("p",{children:"ðŸŽ¬ Flux Image Lab sends prompts directly to Groq-hosted Flux endpoints and streams back high-fidelity renders within a heartbeat. Dial in lens styles, lighting, and art direction while the assistant suggests extra flourishâ€”think props, color palettes, or camera modifiers that make the output pop. Every render lands in a sticky gallery so you can remix a prior shot with one click. ðŸ–¼ï¸"}),c.jsx("p",{children:"The workspace is tuned for creative sprints: it keeps your last prompt ready, exposes seed values for reproducibility, and exports image metadata for downstream pipelines. Whether you are art directing concept pieces or prototyping marketing visuals, Flux Image Lab compresses the ideation cycle down to seconds. âš¡ï¸"})]}),objectmaker:c.jsxs(c.Fragment,{children:[c.jsxs("p",{children:["ðŸ§  Object Maker is a workspace for structured creativity. Start with a conversational brief and the assistant drafts JSON schemas that describe imaginative artifactsâ€”anything from a pizza, to a track-ready car, to a curated ice cream flight. Once the schema looks right, you can call the",c.jsx("code",{className:"rounded bg-slate-900/80 px-1 py-0.5 text-[0.7rem] text-white",children:"/obj"})," endpoint to spin up dozens of variants that adhere to the structure. The workflow is grounded in Groq hosted",c.jsx("span",{className:"font-medium",children:" openai/gpt-oss-20b"})," and ",c.jsx("span",{className:"font-medium",children:"openai/gpt-oss-120b"}),"models, keeping generation fast while your schema evolves. âš™ï¸"]}),c.jsx("p",{children:"Each session curates a â€œZooâ€ of finished creations so you can revisit, iterate, and compare outputs. The aim is to demonstrate how reliable JSON scaffolding unlocks downstream tooling: the sharper the schema, the more dependable the generated objects. Image generation integrations are planned, but today is about perfecting the structured prompt. ðŸ—‚ï¸"})]}),stlviewer:c.jsxs(c.Fragment,{children:[c.jsx("p",{children:"ðŸ§© STL Studio preserves the original 3D printing workflow. The assistant can draft STL snippets, explain mesh edits, and, thanks to the embedded viewer, render models directly inside the chat transcript. Share a design tweak, paste an STL file, and see the preview update without leaving the conversation. ðŸ–¥ï¸"}),c.jsx("p",{children:"It is ideal for rapid iteration on printable parts, offering slicing tips, material suggestions, and context-aware troubleshooting. Whether you are validating overhangs or collaborating on a new gadget, the mix of text guidance and inline visuals keeps the feedback loop tight. ðŸ”"})]}),pokedex:c.jsxs(c.Fragment,{children:[c.jsx("p",{children:"ðŸ“˜ The PokÃ©dex workspace is a focused encyclopedia for trainers. Ask about any PokÃ©mon and you will get typings, strengths, weaknesses, and a bite-sized lore blurb sourced from our remote service. It is tuned to stay in-universe: off-topic questions politely steer you back to the PokÃ©dex. ðŸŽ“"}),c.jsx("p",{children:"Combine it with team-building sessions or quick reminders before a battle. Because the base URL is configurable, you can point the workspace at experimental datasets or community-maintained entries while keeping the same interface. ðŸ”„"})]}),svglab:c.jsxs(c.Fragment,{children:[c.jsxs("p",{children:["ðŸŽ¨ SVG Prompt Lab turns the paint-by-text demo into a polished studio. Type instructions (â€œdraw a rocket in a frame, make the stars sparkleâ€) and the UI relays them to the ",c.jsx("code",{className:"rounded bg-slate-900/80 px-1 py-0.5 text-[0.7rem] text-white",children:"/svg"}),"worker route. The JSON response includes the raw markup and a ready-to-use data URL so you can preview the artwork in seconds."]}),c.jsx("p",{children:"Every generation automatically lands in a cookie-backed gallery. Tap a tile to reload its markup, copy the SVG source, and remix the prompt. It is a fast way to prototype iconography or onboarding illustrations while the LLM does the coordinate math for you. âœï¸"})]}),mermaidstudio:c.jsxs(c.Fragment,{children:[c.jsx("p",{children:"ðŸ§­ Mermaid Display is a diagramming console for rapid flowcharting. Drop in Mermaid syntax, tap render, and watch the canvas refresh instantlyâ€”perfect for sequencing pipelines, swim lanes, or onboarding walkthroughs without leaving the browser."}),c.jsx("p",{children:"Every time you iterate on the prompt, the previous diagram slides into a cookie-backed gallery with a live SVG preview. Build a playlist of saved flows, reload them with one click, and keep experimenting with zero setup. ðŸ—‚ï¸"})]}),flagfoundry:c.jsxs(c.Fragment,{children:[c.jsxs("p",{children:["ðŸš© Flag Foundry adapts the SVG Prompt Lab flow for vexillology fans. It now covers every sovereign flag, grouped by continent. Europe auto-queues while the rest wait for your click so you can pace the ",c.jsx("code",{className:"rounded bg-slate-900/80 px-1 py-0.5 text-[0.7rem] text-white",children:"/svg"})," route two seconds at a time."]}),c.jsxs("p",{children:["Each card pairs the AI generated SVG with a Unicode-rendered reference flag using ",c.jsx("code",{className:"rounded bg-slate-900/80 px-1 py-0.5 text-[0.7rem] text-white",children:"react-country-flag"}),", making it easy to compare palettes and ratios while the gallery fills in real timeâ€”whether you trigger a single region or the entire planet. ðŸŒ"]})]}),pizzamaker:c.jsxs(c.Fragment,{children:[c.jsx("p",{children:"ðŸ• Pizza Maker feels like running your own test kitchen. Choose sauces, cheeses, toppings, and surface treatments while the assistant suggests inventive combinationsâ€”truffle honey on a blistered crust, charred broccolini with smoked mozzarella, or a Detroit-style corner slice with an HDR drizzle. Every configuration becomes a lush prompt that Groq sends to the Flux image backend for plating. ðŸ”¥"}),c.jsx("p",{children:"As soon as the render lands, you can tweak the brief and spin up variants to compare crust textures, camera angles, or prop styling. Save favorites, export the art direction notes, and share a mood board with your team. It is ideal for restaurants, food stylists, or anyone craving a hyper-real hero shot. ðŸ“¸"})]}),carmaker:c.jsxs(c.Fragment,{children:[c.jsx("p",{children:"ðŸš— Car Maker doubles as a concept studio for automotive storytellers. Start by selecting a marque, paint finish, and performance stance, then layer in cinematic lighting cues like dusk reflections or rain-slick asphalt. The assistant keeps recommendations grounded in automotive vocabularyâ€”splitters, wheel fitment, aero kitsâ€”so each prompt reads like a creative brief a photographer would love. ðŸŒ†"}),c.jsx("p",{children:"Once generated, swap environments, colorways, or camera focal lengths to craft an entire campaign from a single session. The gallery remembers your best looks and surfaces the prompt metadata for future shoots. Great for designers pitching concept decks, agencies iterating mood boards, or fans dreaming up their next build. ðŸ"})]}),sixdegrees:c.jsxs(c.Fragment,{children:[c.jsx("p",{children:"ðŸŽ­ Six Degrees Of is a parody escalator. Drop in any sentence and we will send it through six rapid-fire parodies, each one riffing only on what came immediately before it. The responses show up one-by-one so you can watch the humor mutate in real time. â±ï¸"}),c.jsx("p",{children:"Under the hood it taps the same Groq-accelerated chat endpoint, but with a playful system prompt that keeps each remix short, witty, and distinct from the original. Use it for creative warm-ups, writing prompts, or just a quick laugh between tasks. ðŸ˜„"})]}),newsanalyzer:c.jsxs(c.Fragment,{children:[c.jsx("p",{children:"ðŸ—žï¸ News Analyzer connects to a Cloudflare Worker that aggregates live articles, quotes, and metadata from across the web. Start by filtering the beats you care aboutâ€”markets, climate, geopoliticsâ€”and the assistant contextualizes the incoming headlines with timelines, related coverage, and source links. It is a rapid way to separate the signal from the noise. ðŸ“Š"}),c.jsx("p",{children:"Ask for comparisons, bullet summaries, or follow-up questions and the assistant grounds responses in the fetched documents, noting when context is thin or evolving. Pin the conversations you want to revisit and export briefings for stakeholders. Analysts, comms teams, and curious readers all get a high-velocity newsroom companion. ðŸ“°"})]}),pongshowdown:c.jsxs(c.Fragment,{children:[c.jsxs("p",{children:["ðŸ•¹ï¸ Pong Showdown is an autonomous rally where Groq-hosted LLAMA 4 models restyle the court in real time. Every paddle deflection or out-of-bounds point calls the",c.jsx("code",{className:"rounded bg-slate-900/80 px-1 py-0.5 text-[0.7rem] text-white",children:"/obj"})," endpoint with a schema demanding labeled colors and usage prompts. The response paints the background, paddles, ball, and scoreboard with fresh hex values the instant the rally continues."]}),c.jsx("p",{children:"Use it as a living demo of structured outputs driving UI state. The paddles run on simple AI while the Groq workers keep the palette energetic and legibleâ€”perfect for showcasing how deterministic schemas and low-latency inference can remix an experience mid-game. ðŸŽ¨"})]})},jm={allergyfinder:["chat-based","data-connected","safety-first"],imagegen:["image-based","flux-powered","gallery-backed"],objectmaker:["chat-based","schema-first","automation-ready"],stlviewer:["chat-based","3d-workflow","viewer-embedded"],pokedex:["chat-based","fandom","api-powered"],svglab:["text-to-svg","gallery-backed","promptable"],mermaidstudio:["diagramming","mermaid","cookie-gallery"],flagfoundry:["image-based","svg-automation","slow-drip"],pizzamaker:["image-based","guided-prompts","culinary"],carmaker:["image-based","cinematic","automotive"],newsanalyzer:["chat-based","data-connected","real-time"],sixdegrees:["chat-based","humor","sequential"],pongshowdown:["arcade","structured-output","llama-4"]},Dm=Object.fromEntries(fn.map(e=>[e.id,e])),Zo=[{id:"specialists",title:"Specialist Assistants",description:"Domain experts that deliver answers with context, transparency, and speed.",experienceIds:["allergyfinder","newsanalyzer"]},{id:"builders",title:"Schema & 3D Labs",description:"Structured creativity hubs for JSON schematics and printable meshes.",experienceIds:["objectmaker","stlviewer"]},{id:"svg",title:"SVG Studios",description:"Vector-first workspaces for programmatic art and evolving flags.",experienceIds:["svglab","flagfoundry"]},{id:"diagramming",title:"Diagram Studios",description:"Prompt Mermaid to map flows and keep every render close by.",experienceIds:["mermaidstudio"]},{id:"visuals",title:"Visual Launchpads",description:"Image-first workflows that stage cinematic scenes and product-ready art.",experienceIds:["imagegen","pizzamaker","carmaker"]},{id:"play",title:"Play & Discovery",description:"Lighthearted sandboxes for fandoms, remixing, and storytelling breaks.",experienceIds:["pokedex","sixdegrees","pongshowdown"]}],Rm=new Set(Zo.flatMap(e=>e.experienceIds)),oc=fn.map(e=>e.id).filter(e=>!Rm.has(e)),Lm=oc.length?[...Zo,{id:"fresh",title:"Fresh Drops",description:"New experiments and utilities that just landed in the studio.",experienceIds:oc}]:Zo,Mm=c.jsxs(c.Fragment,{children:[c.jsxs("p",{children:["Conway's Game of Life is a zero-player cellular automaton where each generation springs from the last. A four-rule system lets gliders, pulsars, and guns emerge from simple seedsâ€”no human steering. Brush up on the origin story on"," ",c.jsx("a",{href:"https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life",target:"_blank",rel:"noreferrer",className:"font-semibold text-sky-600 underline-offset-2 transition hover:underline dark:text-sky-300",children:"Wikipedia"}),"."]}),c.jsx("p",{children:"The Game of Life Lab lets you dial in the matrix size, swap curated presets, and modulate the simulation clock from slow motion to warp speed. Centered seeds wrap around a toroidal grid so spaceships never fall off the edge."}),c.jsxs("ul",{className:"ml-4 list-disc space-y-2 text-slate-600 dark:text-slate-300",children:[c.jsx("li",{children:"Pause, resume, or step one generation at a time for frame-by-frame analysis."}),c.jsx("li",{children:"Track active-cell stats in real time to see how density shifts across the surface."}),c.jsx("li",{children:"Experiment with oscillators, glider guns, and looped spaceships in one quick workspace."})]})]}),sc=["cellular-automaton","toroidal-grid","live-controls"];function Pm(){return c.jsxs("div",{className:"space-y-12",children:[c.jsxs("section",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-brand-600 to-indigo-700 px-8 py-12 text-white shadow-xl",children:[c.jsxs("div",{className:"max-w-5xl space-y-6",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"text-sm uppercase tracking-[0.3em] text-white/80",children:"Groq Studio"}),c.jsx("h1",{className:"text-3xl font-semibold sm:text-4xl",children:"All experiences in one workspace."}),c.jsx("p",{className:"text-base text-white/90",children:"Launch the assistants that fit your workflowâ€”whether you are prototyping JSON schemas, staging cinematic imagery, or diving into trusted domain research. âš¡ï¸"})]}),c.jsx("div",{className:"grid gap-4 pt-2 sm:grid-cols-2",children:Lm.map(e=>c.jsxs("div",{className:"group relative overflow-hidden rounded-2xl border border-white/10 bg-white/10 p-5 shadow-sm backdrop-blur transition hover:border-white/20 hover:bg-white/15",children:[c.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-br from-white/5 via-white/0 to-white/10 opacity-0 transition group-hover:opacity-100","aria-hidden":!0}),c.jsxs("div",{className:"relative space-y-3",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold text-white",children:e.title}),c.jsx("p",{className:"text-sm text-white/80",children:e.description})]}),c.jsxs("div",{className:"flex flex-wrap gap-2 pt-1",children:[e.experienceIds.map(t=>Dm[t]).filter(Boolean).map(t=>c.jsxs(Oe,{to:t.path,className:"inline-flex items-center gap-1 rounded-full bg-white/90 px-3 py-1.5 text-xs font-semibold text-slate-900 transition hover:bg-white",children:[c.jsx("span",{children:t.name}),c.jsx("span",{"aria-hidden":!0,children:"â†—"})]},t.id)),e.id==="play"?c.jsxs(Oe,{to:"/game-of-life-lab",className:"inline-flex items-center gap-1 rounded-full bg-white/90 px-3 py-1.5 text-xs font-semibold text-slate-900 transition hover:bg-white",children:[c.jsx("span",{children:"Game of Life Lab"}),c.jsx("span",{"aria-hidden":!0,children:"â†—"})]}):null]})]})]},e.id))}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 pt-4",children:[c.jsxs(Oe,{to:"/dalle-vs-flux",className:"inline-flex items-center gap-2 rounded-full bg-white px-4 py-2 text-sm font-semibold text-brand-600 shadow transition hover:bg-brand-50",children:["View the DALLÂ·E 3 vs Flux comparison",c.jsx("span",{"aria-hidden":!0,children:"â†’"})]}),c.jsx("span",{className:"inline-flex items-center gap-2 rounded-full border border-dashed border-white/40 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-white/80",children:"New spotlight"})]})]}),c.jsx("div",{className:"absolute -right-24 -top-24 h-56 w-56 rounded-full bg-white/10 blur-3xl","aria-hidden":!0})]}),c.jsxs("section",{className:"relative overflow-hidden rounded-[2.75rem] border border-cyan-200 bg-white/90 px-6 py-8 shadow-sm transition hover:shadow-xl dark:border-cyan-800 dark:bg-slate-900/80 sm:px-8 sm:py-10",children:[c.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(6,182,212,0.18),_transparent_60%)] dark:bg-[radial-gradient(circle_at_top,_rgba(59,130,246,0.22),_transparent_65%)]","aria-hidden":!0}),c.jsxs("div",{className:"relative z-10 grid gap-6 lg:grid-cols-[minmax(0,1.2fr)_minmax(0,1fr)] lg:items-center",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("p",{className:"inline-flex items-center gap-2 rounded-full bg-cyan-500/10 px-4 py-1 text-xs font-semibold uppercase tracking-[0.35em] text-cyan-600 dark:text-cyan-300",children:"ðŸ§­ New Â· Diagramming"}),c.jsx("h2",{className:"text-2xl font-semibold text-slate-900 dark:text-slate-100",children:"Mermaid Display"}),c.jsx("p",{className:"text-sm leading-relaxed text-slate-600 dark:text-slate-300",children:"Compose Mermaid syntax, press render, and watch the canvas update without leaving the AllIn shell. Perfect for flowcharts, customer journeys, and system diagrams that need to evolve in seconds."}),c.jsx("p",{className:"text-sm leading-relaxed text-slate-600 dark:text-slate-300",children:"Each iteration sweeps the previous diagram into a cookie-backed gallery, complete with live SVG thumbnails so you can revisit every branch of your idea."}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[c.jsxs(Oe,{to:"/mermaid-studio",className:"inline-flex items-center gap-2 rounded-full bg-cyan-600 px-4 py-2 text-sm font-semibold text-white shadow transition hover:bg-cyan-500",children:["Open Mermaid Display",c.jsx("span",{"aria-hidden":!0,children:"â†’"})]}),c.jsx("span",{className:"inline-flex items-center gap-2 rounded-full border border-dashed border-cyan-500/40 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-cyan-600 dark:text-cyan-300",children:"Cookie-backed gallery"})]})]}),c.jsx("div",{className:"relative hidden justify-center lg:flex",children:c.jsxs("div",{className:"relative w-full max-w-sm overflow-hidden rounded-3xl border border-cyan-200 bg-white/90 p-6 text-left shadow-sm dark:border-cyan-700 dark:bg-slate-900/80",children:[c.jsx("div",{className:"absolute -top-6 right-6 h-20 w-20 rounded-full bg-cyan-500/20 blur-3xl","aria-hidden":!0}),c.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-cyan-500 dark:text-cyan-300",children:"Sample prompt"}),c.jsx("pre",{className:"mt-3 rounded-2xl bg-slate-900/90 p-4 text-[0.7rem] leading-relaxed text-cyan-100",children:`graph TD
  Idea[Sketch prompt]
  Idea --> Review{Happy with it?}
  Review -- Yes --> Render[Render diagram]
  Review -- No --> Iterate[Adjust prompt]`}),c.jsx("p",{className:"mt-4 text-xs text-slate-500 dark:text-slate-400",children:"Rendering saves the previous diagram to the gallery so you can compare every iteration."})]})})]})]}),c.jsx(Om,{}),c.jsxs("section",{className:"relative overflow-hidden rounded-[2.75rem] border border-slate-200 bg-white/90 px-6 py-8 shadow-sm transition hover:shadow-xl dark:border-slate-800 dark:bg-slate-900/80 sm:px-8 sm:py-10",children:[c.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(99,102,241,0.08),_transparent_60%)] dark:bg-[radial-gradient(circle_at_top,_rgba(99,102,241,0.18),_transparent_65%)]","aria-hidden":!0}),c.jsxs("div",{className:"relative z-10 grid gap-6 lg:grid-cols-[minmax(0,1.2fr)_minmax(0,1fr)] lg:items-center",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("p",{className:"inline-flex items-center gap-2 rounded-full bg-brand-500/10 px-4 py-1 text-xs font-semibold uppercase tracking-[0.35em] text-brand-600 dark:text-brand-300",children:"ðŸ§¤ Pop-up Â· Satirical"}),c.jsx("h2",{className:"text-2xl font-semibold text-slate-900 dark:text-slate-100",children:"Second-Hand Food Market"}),c.jsx("p",{className:"text-sm leading-relaxed text-slate-600 dark:text-slate-300",children:"Browse a cursed catalogue of pre-loved cuisine featuring seven-eighths of a pizza, artisanal bath water, and other hygienically questionable delights. The storefront leans into cozy flea-market vibes while staying inside the AllIn shell."}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[c.jsxs(Oe,{to:"/second-hand-food-market",className:"inline-flex items-center gap-2 rounded-full bg-brand-600 px-4 py-2 text-sm font-semibold text-white shadow transition hover:bg-brand-500",children:["Visit the market",c.jsx("span",{"aria-hidden":!0,children:"â†’"})]}),c.jsx("span",{className:"inline-flex items-center gap-2 rounded-full border border-dashed border-brand-500/40 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-brand-600 dark:text-brand-300",children:"Curses included"})]})]}),c.jsx("div",{className:"relative hidden justify-center lg:flex",children:c.jsxs("div",{className:"relative w-full max-w-sm overflow-hidden rounded-3xl border border-slate-200 bg-slate-50/80 p-6 text-left shadow-sm dark:border-slate-700 dark:bg-slate-900/80",children:[c.jsx("div",{className:"absolute -top-8 right-4 h-16 w-16 rounded-full bg-brand-500/20 blur-2xl","aria-hidden":!0}),c.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400 dark:text-slate-500",children:"Sample listings"}),c.jsxs("ul",{className:"mt-4 space-y-3 text-sm text-slate-600 dark:text-slate-300",children:[c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx("span",{"aria-hidden":!0,children:"ðŸ•"}),c.jsxs("span",{children:[c.jsx("span",{className:"font-semibold",children:"Foot-Stomped Pizza"}),c.jsx("span",{className:"block text-xs text-slate-500 dark:text-slate-400",children:"Pairs best with a tetanus shot."})]})]}),c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx("span",{"aria-hidden":!0,children:"ðŸ¥¤"}),c.jsxs("span",{children:[c.jsx("span",{className:"font-semibold",children:"Lipstick Latte (Half)"}),c.jsx("span",{className:"block text-xs text-slate-500 dark:text-slate-400",children:"Now with bonus secrets."})]})]}),c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx("span",{"aria-hidden":!0,children:"ðŸ§´"}),c.jsxs("span",{children:[c.jsx("span",{className:"font-semibold",children:"Bath Water Vial"}),c.jsx("span",{className:"block text-xs text-slate-500 dark:text-slate-400",children:"Serve chilled. Question why later."})]})]})]})]})})]})]}),c.jsxs("section",{className:"relative mx-auto max-w-6xl overflow-hidden rounded-[2.75rem] bg-gradient-to-br from-emerald-500 via-cyan-500 to-sky-500 px-6 py-8 text-white shadow-xl sm:px-8 sm:py-10",children:[c.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.25),_transparent_55%)]","aria-hidden":!0}),c.jsxs("div",{className:"relative z-10 grid gap-6 lg:grid-cols-[minmax(0,1.4fr)_minmax(0,1fr)] lg:items-center",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-white/80",children:"Spotlight Â· New utility"}),c.jsx("h2",{className:"text-2xl font-semibold sm:text-3xl",children:"BHP â€” Bank Holiday Planner"}),c.jsxs("p",{className:"text-sm leading-relaxed text-white/80",children:["Optimize your paid leave around official bank holidays for the USA, UK, France, Spain, and Italy. BHP prepares a strict",c.jsx("code",{className:"mx-1 rounded bg-white/20 px-1 py-0.5 text-[0.7rem] font-semibold text-white",children:"/obj"}),"schema request so the assistant can return PTO blocks, totals, and a comparison against randomly scattered leave days."]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[c.jsxs(Oe,{to:"/bank-holiday-planner",className:"inline-flex items-center gap-2 rounded-full bg-white px-4 py-2 text-sm font-semibold text-emerald-700 shadow transition hover:bg-emerald-50",children:["Launch planner",c.jsx("span",{"aria-hidden":!0,children:"â†’"})]}),c.jsx("span",{className:"inline-flex items-center gap-2 rounded-full bg-white/20 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-white/80",children:"Calendar heatmap included"})]})]}),c.jsx("div",{className:"relative hidden justify-center lg:flex",children:c.jsxs("div",{className:"relative w-full max-w-xs rounded-3xl border border-white/25 bg-white/10 p-6 text-left shadow-lg",children:[c.jsx("div",{className:"absolute -top-10 right-6 h-20 w-20 rounded-full bg-white/10 blur-2xl","aria-hidden":!0}),c.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-white/70",children:"Sample itinerary"}),c.jsxs("div",{className:"mt-4 space-y-4",children:[c.jsxs("div",{className:"rounded-2xl bg-white/10 p-3 shadow-sm",children:[c.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-white/60",children:"Stretch"}),c.jsx("p",{className:"text-lg font-semibold text-white",children:"Apr 27 â†’ May 12"}),c.jsx("p",{className:"text-xs text-white/70",children:"Wrap two long weekends into a 16 day break."})]}),c.jsxs("dl",{className:"grid grid-cols-2 gap-3 text-white",children:[c.jsxs("div",{children:[c.jsx("dt",{className:"text-[0.65rem] uppercase tracking-[0.3em] text-white/60",children:"PTO Used"}),c.jsx("dd",{className:"text-xl font-semibold",children:"6 days"})]}),c.jsxs("div",{children:[c.jsx("dt",{className:"text-[0.65rem] uppercase tracking-[0.3em] text-white/60",children:"Coverage"}),c.jsx("dd",{className:"text-xl font-semibold",children:"16 days"})]}),c.jsxs("div",{className:"col-span-2",children:[c.jsx("dt",{className:"text-[0.65rem] uppercase tracking-[0.3em] text-white/60",children:"Next best option"}),c.jsx("dd",{className:"text-sm text-white/75",children:"4 PTO days Â· 11 days off total â€” BHP highlights why the top plan wins."})]})]})]})]})})]})]}),c.jsxs("section",{className:"space-y-10",children:[c.jsxs("header",{className:"space-y-3",children:[c.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Deep dive into each workspace âœ¨"}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Every experience shares the core Groq Studio shell, but the long-form briefs below highlight their data sources, inline tools, and standout workflows so you can choose the right copilot for the moment. ðŸŽ¯"})]}),c.jsxs("div",{className:"space-y-8",children:[fn.map(e=>{const t=Bm[e.id]??c.jsx("p",{children:e.description}),r=jm[e.id]??[],n=Array.isArray(e.modelOptions)?e.modelOptions:[];return c.jsxs("article",{className:"group relative overflow-hidden rounded-3xl border border-slate-200 bg-white/90 p-8 shadow-sm transition hover:shadow-xl dark:border-slate-800 dark:bg-slate-900",children:[c.jsxs("div",{className:"pointer-events-none absolute inset-0 opacity-0 transition-opacity group-hover:opacity-100","aria-hidden":!0,children:[c.jsx("div",{className:"absolute -top-20 right-0 h-40 w-40 rounded-full bg-brand-500/10 blur-3xl"}),c.jsx("div",{className:"absolute -bottom-24 left-6 h-36 w-36 rounded-full bg-slate-400/10 blur-3xl"})]}),c.jsxs("div",{className:"relative space-y-5",children:[c.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("div",{className:`h-1 w-16 rounded-full bg-gradient-to-r ${e.heroGradient}`,"aria-hidden":!0}),c.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:e.name})]}),c.jsx("span",{className:`inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold ${e.panelAccent}`,children:e.badge}),c.jsxs(Oe,{to:e.path,className:"ml-auto inline-flex items-center gap-2 rounded-full border border-slate-300 px-3 py-1 text-sm font-medium text-slate-700 transition hover:border-brand-500 hover:bg-brand-50 hover:text-brand-600 dark:border-slate-700 dark:text-slate-200 dark:hover:border-brand-400/60 dark:hover:bg-brand-500/10",children:["Enter workspace",c.jsx("span",{"aria-hidden":!0,children:"â†’"})]})]}),c.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:e.headline}),c.jsx("div",{className:"space-y-3 text-sm leading-relaxed text-slate-600 dark:text-slate-300",children:t}),r.length>0&&c.jsx("div",{className:"flex flex-wrap gap-2 pt-2",children:r.map(a=>c.jsx("span",{className:"inline-flex items-center rounded-full border border-slate-200 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-500 dark:border-slate-700 dark:text-slate-300",children:a},a))}),n.length>0&&c.jsx("div",{className:"text-xs uppercase tracking-wider text-slate-400 dark:text-slate-500",children:n.join(" â€¢ ")})]})]},e.id)}),c.jsxs("article",{className:"group relative overflow-hidden rounded-3xl border border-slate-200 bg-white/90 p-8 shadow-sm transition hover:shadow-xl dark:border-slate-800 dark:bg-slate-900",children:[c.jsxs("div",{className:"pointer-events-none absolute inset-0 opacity-0 transition-opacity group-hover:opacity-100","aria-hidden":!0,children:[c.jsx("div",{className:"absolute -top-20 right-0 h-40 w-40 rounded-full bg-fuchsia-500/10 blur-3xl"}),c.jsx("div",{className:"absolute -bottom-24 left-6 h-36 w-36 rounded-full bg-amber-400/10 blur-3xl"})]}),c.jsxs("div",{className:"relative space-y-5",children:[c.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("div",{className:"h-1 w-16 rounded-full bg-gradient-to-r from-fuchsia-500 via-amber-400 to-rose-500","aria-hidden":!0}),c.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Flux vs DALLÂ·E Comparison Lab"})]}),c.jsx("span",{className:"inline-flex items-center rounded-full bg-fuchsia-100 px-3 py-1 text-xs font-semibold text-fuchsia-800 dark:bg-fuchsia-500/20 dark:text-fuchsia-200",children:"Research drop"}),c.jsxs(Oe,{to:"/dalle-vs-flux",className:"ml-auto inline-flex items-center gap-2 rounded-full border border-slate-300 px-3 py-1 text-sm font-medium text-slate-700 transition hover:border-fuchsia-500 hover:bg-fuchsia-50 hover:text-fuchsia-600 dark:border-slate-700 dark:text-slate-200 dark:hover:border-fuchsia-400/60 dark:hover:bg-fuchsia-500/10",children:["Open comparison",c.jsx("span",{"aria-hidden":!0,children:"â†’"})]})]}),c.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"See how Groq-hosted Flux Schnell stacks up against OpenAIâ€™s latest DALLÂ·E 3 release across shared prompts, styles, and budgets."}),c.jsxs("div",{className:"space-y-3 text-sm leading-relaxed text-slate-600 dark:text-slate-300",children:[c.jsx("p",{children:"We logged 186 matched prompts and streamed both renders via public endpoints. Flux Schnell ran on GroqCloud for free, while the DALLÂ·E 3 set consumed $30 of credits â€” a practical look at cost-per-image trade-offs."}),c.jsx("p",{children:"The gallery batches ten comparisons per page for quick scanning, and every tile links to the original export so you can inspect details, brushwork, and color handling up close."})]}),c.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[c.jsx("span",{className:"inline-flex items-center rounded-full border border-slate-200 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-500 dark:border-slate-700 dark:text-slate-300",children:"image-benchmark"}),c.jsx("span",{className:"inline-flex items-center rounded-full border border-slate-200 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-500 dark:border-slate-700 dark:text-slate-300",children:"pagination-ready"}),c.jsx("span",{className:"inline-flex items-center rounded-full border border-slate-200 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-500 dark:border-slate-700 dark:text-slate-300",children:"cost-transparency"})]}),c.jsx("div",{className:"text-xs uppercase tracking-wider text-slate-400 dark:text-slate-500",children:"Flux Schnell (GroqCloud) â€¢ DALLÂ·E 3 (OpenAI) â€¢ 186 prompts tracked"})]})]}),c.jsxs("article",{className:"group relative overflow-hidden rounded-3xl border border-slate-200 bg-white/90 p-8 shadow-sm transition hover:shadow-xl dark:border-slate-800 dark:bg-slate-900",children:[c.jsxs("div",{className:"pointer-events-none absolute inset-0 opacity-0 transition-opacity group-hover:opacity-100","aria-hidden":!0,children:[c.jsx("div",{className:"absolute -top-20 right-0 h-40 w-40 rounded-full bg-sky-500/10 blur-3xl"}),c.jsx("div",{className:"absolute -bottom-24 left-6 h-36 w-36 rounded-full bg-cyan-400/10 blur-3xl"})]}),c.jsxs("div",{className:"relative space-y-5",children:[c.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("div",{className:"h-1 w-16 rounded-full bg-gradient-to-r from-sky-500 to-cyan-400","aria-hidden":!0}),c.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Game of Life Lab"})]}),c.jsx("span",{className:"inline-flex items-center rounded-full bg-sky-100 px-3 py-1 text-xs font-semibold text-sky-800 dark:bg-sky-500/20 dark:text-sky-200",children:"Lab"}),c.jsxs(Oe,{to:"/game-of-life-lab",className:"ml-auto inline-flex items-center gap-2 rounded-full border border-slate-300 px-3 py-1 text-sm font-medium text-slate-700 transition hover:border-sky-500 hover:bg-sky-50 hover:text-sky-600 dark:border-slate-700 dark:text-slate-200 dark:hover:border-sky-400/60 dark:hover:bg-sky-500/10",children:["Enter workspace",c.jsx("span",{"aria-hidden":!0,children:"â†’"})]})]}),c.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Explore Conway's classic automaton with live controls and toroidal wrap."}),c.jsx("div",{className:"space-y-3 text-sm leading-relaxed text-slate-600 dark:text-slate-300",children:Mm}),sc.length>0&&c.jsx("div",{className:"flex flex-wrap gap-2 pt-2",children:sc.map(e=>c.jsx("span",{className:"inline-flex items-center rounded-full border border-slate-200 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-500 dark:border-slate-700 dark:text-slate-300",children:e},e))}),c.jsx("div",{className:"text-xs uppercase tracking-wider text-slate-400 dark:text-slate-500",children:"Toroidal wrap â€¢ Live controls â€¢ Preset seeds"})]})]})]})]})]})}function gt({experience:e,children:t,navigation:r}){if(!e)return c.jsx("div",{className:"rounded-2xl border border-red-200 bg-red-50 p-6 text-red-700 dark:border-red-800 dark:bg-red-900/40 dark:text-red-200",children:"Experience not found."});const n=e.heroContent;return c.jsxs("div",{className:"space-y-8",children:[c.jsxs("section",{className:`relative overflow-hidden rounded-3xl bg-gradient-to-br px-8 py-10 text-white shadow-lg ${e.heroGradient}`,children:[c.jsxs("div",{className:"max-w-3xl space-y-4",children:[c.jsx("span",{className:"inline-flex items-center rounded-full bg-black/20 px-3 py-1 text-xs uppercase tracking-wide",children:e.badge}),c.jsx("h1",{className:"text-3xl font-semibold sm:text-4xl",children:e.name}),n?c.jsx(n,{experience:e}):c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"text-base text-white/90",children:e.headline}),c.jsx("p",{className:"text-sm text-white/80",children:e.description})]})]}),c.jsx("div",{className:"absolute -right-20 bottom-0 top-0 w-64 bg-white/10 blur-3xl","aria-hidden":!0})]}),r?c.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white/80 px-4 py-3 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:r}):null,c.jsx("div",{children:t})]})}const Fm=[{method:"POST",path:"/chat",badge:"Conversational core",description:"Primary endpoint used by every experience. The frontend appends /chat to the configured base URL and sends OpenAI-style chat payloads; the worker can augment requests with product lookups before returning Groq responses.",emoji:"ðŸ’¬"},{method:"GET",path:"/flavor-finder/<foodOrBarcode>",badge:"Allergy scout",description:"Helper route that fetches allergy metadata on demand, perfect for debugging the worker's ingredient sourcing without loading the full UI.",emoji:"ðŸ”Ž"},{method:"GET",path:"/news/<category>",badge:"Curated headlines",description:"Curated newsfeed powering the News Analyzer experience. The worker aggregates trusted sources per category and returns normalized JSON so the UI can render headlines instantly.",emoji:"ðŸ—žï¸"},{method:"GET",path:"/svg/<prompt> & /svg_deluxe/<prompt>",badge:"Vector foundry",description:"SVG rendering routes used by the Prompt Lab and Flag Foundry. /svg streams LlamaÂ 3 inline markup, while /svg_deluxe taps oss-120B for high-token animated canvases.",emoji:"ðŸ§µ"},{method:"GET",path:"/flux/<prompt>",badge:"Visual studio",description:"Image generator backing Pizza Maker, Car Maker, and the Flux playground. The worker orchestrates Groq's Flux models and normalizes the resulting gallery payloads.",emoji:"ðŸ–¼ï¸"},{method:"POST",path:"/obj/<type> (and /object*/ variants)",badge:"Structured maker",description:"Structured generation endpoint consumed by Object Maker. It accepts a JSON schema, user prompt, and optional model parameters, then returns a compliant object.",emoji:"ðŸ§©"}];function $m(){return c.jsxs("div",{className:"space-y-12",children:[c.jsx("section",{className:"rounded-3xl bg-gradient-to-br from-slate-900 via-brand-700 to-indigo-600 px-8 py-12 text-white shadow-xl",children:c.jsxs("div",{className:"max-w-3xl space-y-4",children:[c.jsx("p",{className:"text-sm uppercase tracking-[0.3em] text-white/70",children:"About Groq AllIn Studio"}),c.jsx("h1",{className:"text-3xl font-semibold sm:text-4xl",children:"Louis Paulet's Groq AllIn Studio ðŸ¤"}),c.jsx("p",{className:"text-base text-white/90",children:"Groq AllIn Studio is a personal initiative by Louis Paulet, Data Scientist at Checkout.com. The project explores how GroqCloud services can support focused conversational tools while complementing his production work. Each module tests practical applications, latency-sensitive interfaces, and the supporting infrastructure required to run them responsibly. ðŸ”"}),c.jsx(Oe,{to:"/",className:"inline-flex items-center rounded-full bg-white/90 px-4 py-2 text-sm font-medium text-slate-900 transition hover:bg-white",children:"Back to Overview"})]})}),c.jsxs("section",{className:"grid gap-8 md:grid-cols-3",children:[c.jsxs("article",{className:"space-y-3 rounded-2xl border border-slate-200 bg-white/80 p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900/70",children:[c.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"1. Frontend studio ðŸ–¥ï¸"}),c.jsxs("p",{className:"text-sm leading-relaxed text-slate-600 dark:text-slate-400",children:["The ",c.jsx("code",{children:"all_in/"})," workspace is the production React shell that unifies the PokÃ©dex, AllergyFinder, STL Viewer, and Object Maker experiences for deployment. It is the only project that ships live, while reusing shared chat and UI components across each tab."]})]}),c.jsxs("article",{className:"space-y-3 rounded-2xl border border-slate-200 bg-white/80 p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900/70",children:[c.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"2. Cloudflare worker backend â˜ï¸"}),c.jsx("p",{className:"text-sm leading-relaxed text-slate-600 dark:text-slate-400",children:"â˜ï¸ A dedicated Cloudflare Worker powers the Groq backend. Every chat in the studio tunnels through this worker, which enriches prompts with tools like product lookups before relaying Groq responses."})]}),c.jsxs("article",{className:"space-y-3 rounded-2xl border border-slate-200 bg-white/80 p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900/70",children:[c.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"3. Applied research space ðŸ§ª"}),c.jsx("p",{className:"text-sm leading-relaxed text-slate-600 dark:text-slate-400",children:"ðŸ”¬ The studio hosts a rotating set of exploratory prompts and prototypes that examine new interaction patterns. It is the venue for trying emerging Groq capabilities, refining responsible guardrails, and translating lessons back into production-quality solutions."})]})]}),c.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900/70",children:[c.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Why the worker matters ðŸ› ï¸"}),c.jsx("p",{className:"mt-3 text-sm leading-relaxed text-slate-600 dark:text-slate-400",children:"Louis designed the worker to carry its own intelligence. Beyond proxying Groq models, it can query product data when a chat session asks about allergens, providing the same product evidence that powers the dedicated AllergyFinder experience. ðŸ§ "}),c.jsx("p",{className:"mt-3 text-sm leading-relaxed text-slate-600 dark:text-slate-400",children:"The Object Maker tooling leans on the worker too: schema brainstorming happens through the chat endpoint, then the structured output endpoint turns those schemas into real JSON objects. ðŸ§¾"})]}),c.jsxs("section",{className:"relative overflow-hidden rounded-3xl border border-slate-200 bg-gradient-to-br from-slate-950 via-indigo-900 to-brand-700 p-8 text-white shadow-xl dark:border-slate-800",children:[c.jsx("div",{className:"absolute -top-20 -right-16 h-56 w-56 rounded-full bg-white/10 blur-3xl","aria-hidden":"true"}),c.jsx("div",{className:"absolute -bottom-24 -left-10 h-64 w-64 rounded-full bg-brand-400/20 blur-3xl","aria-hidden":"true"}),c.jsxs("div",{className:"relative",children:[c.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-white/60",children:"Worker capabilities"}),c.jsx("h2",{className:"mt-2 text-2xl font-semibold sm:text-3xl",children:"Supported worker routes ðŸš¦"})]}),c.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-white/20 bg-white/10 px-4 py-1 text-xs font-medium text-white/80 backdrop-blur",children:[c.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-400"}),"Always-on tunnel to GroqCloud"]})]}),c.jsx("p",{className:"mt-4 max-w-2xl text-sm leading-relaxed text-white/80",children:"Each route is tuned for a specialized jobâ€”from conversational routing to asset generationâ€”so experiments feel crisp without any custom wiring. Tap into them directly or through the studio experiences to unlock the same low-latency magic."}),c.jsx("div",{className:"mt-8 grid gap-4 md:grid-cols-2 xl:grid-cols-3",children:Fm.map(e=>c.jsxs("div",{className:"group relative overflow-hidden rounded-2xl border border-white/10 bg-white/5 p-6 shadow-lg backdrop-blur-sm transition-all duration-300 hover:-translate-y-1 hover:border-white/30 hover:bg-white/10",children:[c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsx("span",{className:"rounded-full border border-white/20 bg-white/10 px-3 py-1 font-semibold uppercase tracking-widest text-white",children:e.method}),c.jsx("span",{className:"text-xl","aria-hidden":"true",children:e.emoji})]}),c.jsx("p",{className:"mt-4 text-lg font-semibold text-white",children:e.path}),c.jsxs("p",{className:"mt-2 inline-flex items-center gap-2 text-xs font-medium uppercase tracking-[0.2em] text-white/60",children:[c.jsx("span",{className:"h-1 w-6 rounded-full bg-brand-300/60 transition-all duration-300 group-hover:w-12 group-hover:bg-brand-200"}),e.badge]}),c.jsx("p",{className:"mt-3 text-sm leading-relaxed text-white/80",children:e.description})]},e.path))}),c.jsx("p",{className:"mt-8 text-sm leading-relaxed text-white/80",children:"The worker keeps each experiment consistent, ensuring the studio remains reliable even as new ideas are introduced. ðŸ“ˆ"})]})]})]})}function Um({conversations:e,activeId:t,onSelect:r,onNew:n,onRename:a,onFlushHistory:i,disableNew:o=!1,disableFlush:s=!1}){const[l,d]=b.useState(null),[u,h]=b.useState("");return c.jsxs("div",{className:"h-full rounded-2xl border border-slate-200 bg-white/80 p-3 shadow-sm dark:border-slate-800 dark:bg-slate-900/60",children:[c.jsxs("button",{type:"button",onClick:n,disabled:o,className:"mb-3 inline-flex w-full items-center justify-center gap-2 rounded-xl bg-brand-600 px-3 py-2 text-sm font-medium text-white transition hover:bg-brand-700 disabled:cursor-not-allowed disabled:bg-brand-600/60",children:[c.jsx(Lp,{className:"h-5 w-5"})," New chat"]}),i?c.jsxs("button",{type:"button",onClick:i,disabled:s,className:"mb-4 inline-flex w-full items-center justify-center gap-2 rounded-xl border border-slate-300 px-3 py-2 text-sm font-medium text-slate-600 transition hover:border-slate-400 hover:bg-slate-50 disabled:cursor-not-allowed disabled:text-slate-400 dark:border-slate-700 dark:text-slate-300 dark:hover:border-slate-600 dark:hover:bg-slate-800",children:[c.jsx(dn,{className:"h-5 w-5"})," Delete saved chats"]}):null,c.jsx("div",{className:"space-y-1",children:e.map(f=>c.jsxs("div",{className:`group flex items-center justify-between rounded-xl border px-3 py-2 text-sm transition ${f.id===t?"border-brand-600 bg-brand-50 text-brand-700 dark:border-brand-500 dark:bg-slate-800 dark:text-brand-300":"border-slate-200 text-slate-600 hover:bg-slate-50 dark:border-slate-700 dark:text-slate-300 dark:hover:bg-slate-800"}`,onClick:()=>r?.(f.id),children:[l===f.id?c.jsx("form",{onSubmit:p=>{p.preventDefault(),a?.(f.id,u||f.title),d(null)},className:"flex grow items-center gap-2",children:c.jsx("input",{autoFocus:!0,className:"w-full rounded-md border border-slate-300 px-2 py-1 text-sm text-slate-700 focus:border-brand-500 focus:outline-none focus:ring-1 focus:ring-brand-500 dark:border-slate-600 dark:bg-slate-800 dark:text-slate-100",defaultValue:f.title,onChange:p=>h(p.target.value),onBlur:()=>d(null)})}):c.jsx("div",{className:"truncate pr-2 text-sm font-medium",children:f.title}),c.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),d(f.id),h(f.title)},className:"invisible rounded-md p-1 text-slate-500 transition group-hover:visible hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-700",title:"Rename",children:c.jsx(Mp,{className:"h-4 w-4"})})]},f.id))})]})}xt.registerLanguage("javascript",th);xt.registerLanguage("js",th);xt.registerLanguage("typescript",rh);xt.registerLanguage("ts",rh);xt.registerLanguage("python",nh);xt.registerLanguage("py",nh);xt.registerLanguage("json",Wp);xt.registerLanguage("bash",ah);xt.registerLanguage("sh",ah);xt.registerLanguage("markdown",Xp);ih.setOptions({breaks:!0,highlight(e,t){try{return t&&xt.getLanguage(t)?xt.highlight(e,{language:t}).value:xt.highlightAuto(e).value}catch{return e}}});function zm(e){const t=ih.parse(e||"");return Rs.sanitize(t)}function Hm(e){return(typeof e=="number"?new Date(e):e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}class Gm extends b.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("ErrorBoundary caught",t,r)}render(){return this.state.hasError?c.jsx("div",{className:"h-64 grid place-items-center text-sm text-red-600 dark:text-red-400",children:"Failed to render 3D preview."}):this.props.children}}const Vm=b.lazy(()=>Ne(()=>import("./STLViewer-BFvRvb-k.js"),__vite__mapDeps([0,1,2,3])));function qm(e){if(!e)return[];const t=[],r=/(https?:\/\/\S+?\.stl)\b/gi,n=new Set;let a;for(;(a=r.exec(e))!==null;)n.add(a[1]);for(const u of n)t.push({type:"url",url:u});const i=e.toLowerCase(),o=/```([^\n`]*)\n([\s\S]*?)```/g;let s;for(;(s=o.exec(e))!==null;){const u=(s[1]||"").trim().toLowerCase(),h=s[2]||"",f=h.toLowerCase(),p=(f.match(/facet normal/g)||[]).length;(u==="stl"||f.startsWith("solid")||p>=4&&f.includes("vertex"))&&t.push({type:"text",text:h.trim()})}const l=(i.match(/facet normal/g)||[]).length;return(/(\n|^)\s*solid\b/.test(i)&&l>=1||l>=4&&i.includes("vertex"))&&(t.some(u=>u.type==="text")||t.push({type:"text",text:e.trim()})),t}function Wm({experience:e,role:t,content:r,name:n,timestamp:a,streaming:i=!1,showAvatar:o=!0,showName:s=!0}){const l=t==="user",d=!!e?.enableStlViewer,u=b.useMemo(()=>d?qm(r):[],[r,d]),h=b.useMemo(()=>{if(!d)return!1;const f=(r||"").toLowerCase();return[f.includes(".stl"),f.includes("facet normal"),f.includes("vertex "),f.includes("outer loop")].filter(Boolean).length>=2},[r,d]);return c.jsxs("div",{className:`flex ${l?"justify-end":"justify-start"}`,children:[!l&&o&&c.jsx("div",{className:"mr-2 mt-1 h-7 w-7 shrink-0 rounded-full bg-brand-600 text-white",children:c.jsx("div",{className:"grid h-full w-full place-items-center",children:c.jsx(Zu,{className:"h-4 w-4"})})}),c.jsxs("div",{className:l?"max-w-[80%] rounded-2xl bg-indigo-600 px-4 py-2 text-sm text-white shadow":"max-w-[80%] rounded-2xl border border-slate-200 bg-white px-4 py-2 text-sm text-slate-800 shadow-sm dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",children:[s&&c.jsxs("div",{className:`mb-1 text-xs ${l?"text-indigo-100/80":"text-slate-500 dark:text-slate-400"}`,children:[n," â€¢ ",Hm(a)]}),l?c.jsx("div",{className:"whitespace-pre-wrap",children:r}):c.jsx("div",{className:"prose",dangerouslySetInnerHTML:{__html:zm(r)}}),d&&u.length>0&&!i&&c.jsx("div",{className:"mt-2",children:c.jsx(Gm,{children:c.jsx(b.Suspense,{fallback:c.jsx("div",{className:"h-64 grid place-items-center text-slate-500",children:"Loading 3D viewerâ€¦ â³"}),children:c.jsx(Vm,{source:u[0]})})})}),d&&u.length>0&&i&&c.jsx("div",{className:"mt-2 text-xs text-slate-500",children:"3D preview will appear when the response finishesâ€¦ ðŸ›°ï¸"}),d&&u.length===0&&!i&&h&&c.jsx("div",{className:"mt-2 text-xs text-amber-600 dark:text-amber-400",children:"The response looks like STL content but may be incomplete. Wrap it in a fenced block (```stl â€¦ ```), or include full facets so the preview can render correctly. ðŸ§±"})]}),l&&o&&c.jsx("div",{className:"ml-2 mt-1 h-7 w-7 shrink-0 rounded-full bg-slate-200 text-slate-600",children:c.jsx("div",{className:"grid h-full w-full place-items-center",children:c.jsx(Ku,{className:"h-4 w-4"})})})]})}function Xm(e){return e.map((t,r,n)=>{const a=r>0?n[r-1]:null,i=r<n.length-1?n[r+1]:null,o=!a||a.role!==t.role,s=!i||i.role!==t.role;return{...t,isFirstOfGroup:o,isLastOfGroup:s}})}function Ym({experience:e,messages:t}){const r=b.useRef(null);return b.useEffect(()=>{r.current?.scrollIntoView({behavior:"smooth",block:"end"})},[t]),c.jsx("div",{className:"h-[65vh] overflow-y-auto rounded-2xl border border-slate-200 bg-white/80 p-4 shadow-sm thin-scrollbar dark:border-slate-800 dark:bg-slate-900/60",children:c.jsxs("div",{className:"flex flex-col gap-3",children:[Xm(t).map((n,a)=>c.jsx(Wm,{experience:e,role:n.role,content:n.content,name:n.name,timestamp:n.timestamp,streaming:n.streaming,showAvatar:n.isFirstOfGroup,showName:n.isFirstOfGroup,sources:n.sources},a)),c.jsx("div",{ref:r})]})})}function Km({value:e,onChange:t,onSend:r,onStop:n,loading:a,onClear:i,placeholder:o,onOpenScanner:s}){return c.jsx("form",{onSubmit:l=>{l.preventDefault(),a||r?.(e)},className:"sticky bottom-0 w-full",children:c.jsxs("div",{className:"flex items-end gap-2 rounded-2xl border border-slate-200 bg-white/90 p-2 shadow-sm backdrop-blur dark:border-slate-700 dark:bg-slate-900/60",children:[c.jsx("textarea",{className:"block w-full resize-none rounded-xl border-none bg-transparent p-3 text-sm text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-brand-600/60 dark:bg-slate-800/70 dark:text-slate-100 dark:placeholder-slate-400",rows:2,value:e,onChange:l=>t?.(l.target.value),placeholder:o||"Ask anything... (Shift+Enter for newline)",onKeyDown:l=>{l.key==="Enter"&&!l.shiftKey&&(l.preventDefault(),a||r?.(e))}}),c.jsx("div",{className:"flex items-center gap-2 pr-1",children:a?c.jsx("button",{type:"button",onClick:n,className:"inline-flex items-center rounded-xl bg-slate-200 px-3 py-2 text-slate-700 hover:bg-slate-300 dark:bg-slate-800 dark:text-slate-100 dark:hover:bg-slate-700",title:"Stop",children:c.jsx(Pp,{className:"h-5 w-5"})}):c.jsxs(c.Fragment,{children:[s&&c.jsx("button",{type:"button",onClick:()=>s?.(),className:"inline-flex items-center rounded-xl bg-slate-100 px-3 py-2 text-slate-700 hover:bg-slate-200 dark:bg-slate-800/80 dark:text-slate-200 dark:hover:bg-slate-700",title:"Scan barcode",children:c.jsx(Fp,{className:"h-5 w-5"})}),c.jsx("button",{type:"button",onClick:i,className:"inline-flex items-center rounded-xl bg-slate-100 px-3 py-2 text-slate-700 hover:bg-slate-200 dark:bg-slate-800/80 dark:text-slate-200 dark:hover:bg-slate-700",title:"Clear",children:c.jsx($p,{className:"h-5 w-5"})}),c.jsx("button",{type:"submit",disabled:!e.trim(),className:"inline-flex items-center rounded-xl bg-brand-600 px-4 py-2 text-white shadow hover:bg-brand-700 disabled:opacity-60",title:"Send",children:c.jsx(Ju,{className:"h-5 w-5"})})]})})]})})}function Zm({value:e,onChange:t,options:r=[]}){const n=r.length>0?r:[e];return c.jsxs("label",{className:"block text-sm",children:[c.jsx("span",{className:"block text-xs font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Model"}),c.jsx("select",{className:"mt-1 block w-56 rounded-md border border-slate-300 bg-white px-2 py-2 text-sm text-slate-800 focus:border-brand-500 focus:outline-none focus:ring-1 focus:ring-brand-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",value:e,onChange:a=>t?.(a.target.value),children:n.map(a=>c.jsx("option",{value:a,children:a},a))})]})}function Jm(e,t){var r=Object.setPrototypeOf;r?r(e,t):e.__proto__=t}function Qm(e,t){t===void 0&&(t=e.constructor);var r=Error.captureStackTrace;r&&r(e,t)}var eg=(function(){var e=function(r,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(a[o]=i[o])},e(r,n)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),tg=(function(e){eg(t,e);function t(r,n){var a=this.constructor,i=e.call(this,r,n)||this;return Object.defineProperty(i,"name",{value:a.name,enumerable:!1,configurable:!0}),Jm(i,a.prototype),Qm(i),i}return t})(Error),rg=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),ht=(function(e){rg(t,e);function t(r){r===void 0&&(r=void 0);var n=e.call(this,r)||this;return n.message=r,n}return t.prototype.getKind=function(){var r=this.constructor;return r.kind},t.kind="Exception",t})(tg),ng=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Be=(function(e){ng(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.kind="ArgumentException",t})(ht),ag=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),ee=(function(e){ag(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.kind="IllegalArgumentException",t})(ht),_h=(function(){function e(t){if(this.binarizer=t,t===null)throw new ee("Binarizer must be non-null.")}return e.prototype.getWidth=function(){return this.binarizer.getWidth()},e.prototype.getHeight=function(){return this.binarizer.getHeight()},e.prototype.getBlackRow=function(t,r){return this.binarizer.getBlackRow(t,r)},e.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},e.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},e.prototype.crop=function(t,r,n,a){var i=this.binarizer.getLuminanceSource().crop(t,r,n,a);return new e(this.binarizer.createBinarizer(i))},e.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},e.prototype.rotateCounterClockwise=function(){var t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new e(this.binarizer.createBinarizer(t))},e.prototype.rotateCounterClockwise45=function(){var t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new e(this.binarizer.createBinarizer(t))},e.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},e})(),ig=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),De=(function(e){ig(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.getChecksumInstance=function(){return new t},t.kind="ChecksumException",t})(ht),og=(function(){function e(t){this.source=t}return e.prototype.getLuminanceSource=function(){return this.source},e.prototype.getWidth=function(){return this.source.getWidth()},e.prototype.getHeight=function(){return this.source.getHeight()},e})(),_e=(function(){function e(){}return e.arraycopy=function(t,r,n,a,i){for(;i--;)n[a++]=t[r++]},e.currentTimeMillis=function(){return Date.now()},e})(),sg=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Hs=(function(e){sg(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.kind="IndexOutOfBoundsException",t})(ht),lg=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),lc=(function(e){lg(t,e);function t(r,n){r===void 0&&(r=void 0),n===void 0&&(n=void 0);var a=e.call(this,n)||this;return a.index=r,a.message=n,a}return t.kind="ArrayIndexOutOfBoundsException",t})(Hs),cg=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},$e=(function(){function e(){}return e.fill=function(t,r){for(var n=0,a=t.length;n<a;n++)t[n]=r},e.fillWithin=function(t,r,n,a){e.rangeCheck(t.length,r,n);for(var i=r;i<n;i++)t[i]=a},e.rangeCheck=function(t,r,n){if(r>n)throw new ee("fromIndex("+r+") > toIndex("+n+")");if(r<0)throw new lc(r);if(n>t)throw new lc(n)},e.asList=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t},e.create=function(t,r,n){var a=Array.from({length:t});return a.map(function(i){return Array.from({length:r}).fill(n)})},e.createInt32Array=function(t,r,n){var a=Array.from({length:t});return a.map(function(i){return Int32Array.from({length:r}).fill(n)})},e.equals=function(t,r){if(!t||!r||!t.length||!r.length||t.length!==r.length)return!1;for(var n=0,a=t.length;n<a;n++)if(t[n]!==r[n])return!1;return!0},e.hashCode=function(t){var r,n;if(t===null)return 0;var a=1;try{for(var i=cg(t),o=i.next();!o.done;o=i.next()){var s=o.value;a=31*a+s}}catch(l){r={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a},e.fillUint8Array=function(t,r){for(var n=0;n!==t.length;n++)t[n]=r},e.copyOf=function(t,r){return t.slice(0,r)},e.copyOfUint8Array=function(t,r){if(t.length<=r){var n=new Uint8Array(r);return n.set(t),n}return t.slice(0,r)},e.copyOfRange=function(t,r,n){var a=n-r,i=new Int32Array(a);return _e.arraycopy(t,r,i,0,a),i},e.binarySearch=function(t,r,n){n===void 0&&(n=e.numberComparator);for(var a=0,i=t.length-1;a<=i;){var o=i+a>>1,s=n(r,t[o]);if(s>0)a=o+1;else if(s<0)i=o-1;else return o}return-a-1},e.numberComparator=function(t,r){return t-r},e})(),le=(function(){function e(){}return e.numberOfTrailingZeros=function(t){var r;if(t===0)return 32;var n=31;return r=t<<16,r!==0&&(n-=16,t=r),r=t<<8,r!==0&&(n-=8,t=r),r=t<<4,r!==0&&(n-=4,t=r),r=t<<2,r!==0&&(n-=2,t=r),n-(t<<1>>>31)},e.numberOfLeadingZeros=function(t){if(t===0)return 32;var r=1;return t>>>16||(r+=16,t<<=16),t>>>24||(r+=8,t<<=8),t>>>28||(r+=4,t<<=4),t>>>30||(r+=2,t<<=2),r-=t>>>31,r},e.toHexString=function(t){return t.toString(16)},e.toBinaryString=function(t){return String(parseInt(String(t),2))},e.bitCount=function(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t=t+(t>>>8),t=t+(t>>>16),t&63},e.truncDivision=function(t,r){return Math.trunc(t/r)},e.parseInt=function(t,r){return r===void 0&&(r=void 0),parseInt(t,r)},e.MIN_VALUE_32_BITS=-2147483648,e.MAX_VALUE=Number.MAX_SAFE_INTEGER,e})(),Ge=(function(){function e(t,r){t===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,r==null?this.bits=e.makeArray(t):this.bits=r)}return e.prototype.getSize=function(){return this.size},e.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},e.prototype.ensureCapacity=function(t){if(t>this.bits.length*32){var r=e.makeArray(t);_e.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}},e.prototype.get=function(t){return(this.bits[Math.floor(t/32)]&1<<(t&31))!==0},e.prototype.set=function(t){this.bits[Math.floor(t/32)]|=1<<(t&31)},e.prototype.flip=function(t){this.bits[Math.floor(t/32)]^=1<<(t&31)},e.prototype.getNextSet=function(t){var r=this.size;if(t>=r)return r;var n=this.bits,a=Math.floor(t/32),i=n[a];i&=~((1<<(t&31))-1);for(var o=n.length;i===0;){if(++a===o)return r;i=n[a]}var s=a*32+le.numberOfTrailingZeros(i);return s>r?r:s},e.prototype.getNextUnset=function(t){var r=this.size;if(t>=r)return r;var n=this.bits,a=Math.floor(t/32),i=~n[a];i&=~((1<<(t&31))-1);for(var o=n.length;i===0;){if(++a===o)return r;i=~n[a]}var s=a*32+le.numberOfTrailingZeros(i);return s>r?r:s},e.prototype.setBulk=function(t,r){this.bits[Math.floor(t/32)]=r},e.prototype.setRange=function(t,r){if(r<t||t<0||r>this.size)throw new ee;if(r!==t){r--;for(var n=Math.floor(t/32),a=Math.floor(r/32),i=this.bits,o=n;o<=a;o++){var s=o>n?0:t&31,l=o<a?31:r&31,d=(2<<l)-(1<<s);i[o]|=d}}},e.prototype.clear=function(){for(var t=this.bits.length,r=this.bits,n=0;n<t;n++)r[n]=0},e.prototype.isRange=function(t,r,n){if(r<t||t<0||r>this.size)throw new ee;if(r===t)return!0;r--;for(var a=Math.floor(t/32),i=Math.floor(r/32),o=this.bits,s=a;s<=i;s++){var l=s>a?0:t&31,d=s<i?31:r&31,u=(2<<d)-(1<<l)&4294967295;if((o[s]&u)!==(n?u:0))return!1}return!0},e.prototype.appendBit=function(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},e.prototype.appendBits=function(t,r){if(r<0||r>32)throw new ee("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(var n=r;n>0;n--)this.appendBit((t>>n-1&1)===1)},e.prototype.appendBitArray=function(t){var r=t.size;this.ensureCapacity(this.size+r);for(var n=0;n<r;n++)this.appendBit(t.get(n))},e.prototype.xor=function(t){if(this.size!==t.size)throw new ee("Sizes don't match");for(var r=this.bits,n=0,a=r.length;n<a;n++)r[n]^=t.bits[n]},e.prototype.toBytes=function(t,r,n,a){for(var i=0;i<a;i++){for(var o=0,s=0;s<8;s++)this.get(t)&&(o|=1<<7-s),t++;r[n+i]=o}},e.prototype.getBitArray=function(){return this.bits},e.prototype.reverse=function(){for(var t=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),n=r+1,a=this.bits,i=0;i<n;i++){var o=a[i];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,t[r-i]=o}if(this.size!==n*32){for(var s=n*32-this.size,l=t[0]>>>s,i=1;i<n;i++){var d=t[i];l|=d<<32-s,t[i-1]=l,l=d>>>s}t[n-1]=l}this.bits=t},e.makeArray=function(t){return new Int32Array(Math.floor((t+31)/32))},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var r=t;return this.size===r.size&&$e.equals(this.bits,r.bits)},e.prototype.hashCode=function(){return 31*this.size+$e.hashCode(this.bits)},e.prototype.toString=function(){for(var t="",r=0,n=this.size;r<n;r++)(r&7)===0&&(t+=" "),t+=this.get(r)?"X":".";return t},e.prototype.clone=function(){return new e(this.size,this.bits.slice())},e.prototype.toArray=function(){for(var t=[],r=0,n=this.size;r<n;r++)t.push(this.get(r));return t},e})(),Jo;(function(e){e[e.OTHER=0]="OTHER",e[e.PURE_BARCODE=1]="PURE_BARCODE",e[e.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",e[e.TRY_HARDER=3]="TRY_HARDER",e[e.CHARACTER_SET=4]="CHARACTER_SET",e[e.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",e[e.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",e[e.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",e[e.ASSUME_GS1=8]="ASSUME_GS1",e[e.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",e[e.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",e[e.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(Jo||(Jo={}));const we=Jo;var dg=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),H=(function(e){dg(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.getFormatInstance=function(){return new t},t.kind="FormatException",t})(ht),ug=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},xe;(function(e){e[e.Cp437=0]="Cp437",e[e.ISO8859_1=1]="ISO8859_1",e[e.ISO8859_2=2]="ISO8859_2",e[e.ISO8859_3=3]="ISO8859_3",e[e.ISO8859_4=4]="ISO8859_4",e[e.ISO8859_5=5]="ISO8859_5",e[e.ISO8859_6=6]="ISO8859_6",e[e.ISO8859_7=7]="ISO8859_7",e[e.ISO8859_8=8]="ISO8859_8",e[e.ISO8859_9=9]="ISO8859_9",e[e.ISO8859_10=10]="ISO8859_10",e[e.ISO8859_11=11]="ISO8859_11",e[e.ISO8859_13=12]="ISO8859_13",e[e.ISO8859_14=13]="ISO8859_14",e[e.ISO8859_15=14]="ISO8859_15",e[e.ISO8859_16=15]="ISO8859_16",e[e.SJIS=16]="SJIS",e[e.Cp1250=17]="Cp1250",e[e.Cp1251=18]="Cp1251",e[e.Cp1252=19]="Cp1252",e[e.Cp1256=20]="Cp1256",e[e.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",e[e.UTF8=22]="UTF8",e[e.ASCII=23]="ASCII",e[e.Big5=24]="Big5",e[e.GB18030=25]="GB18030",e[e.EUC_KR=26]="EUC_KR"})(xe||(xe={}));var Fe=(function(){function e(t,r,n){for(var a,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];this.valueIdentifier=t,this.name=n,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=o,e.VALUE_IDENTIFIER_TO_ECI.set(t,this),e.NAME_TO_ECI.set(n,this);for(var l=this.values,d=0,u=l.length;d!==u;d++){var h=l[d];e.VALUES_TO_ECI.set(h,this)}try{for(var f=ug(o),p=f.next();!p.done;p=f.next()){var m=p.value;e.NAME_TO_ECI.set(m,this)}}catch(g){a={error:g}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(a)throw a.error}}}return e.prototype.getValueIdentifier=function(){return this.valueIdentifier},e.prototype.getName=function(){return this.name},e.prototype.getValue=function(){return this.values[0]},e.getCharacterSetECIByValue=function(t){if(t<0||t>=900)throw new H("incorect value");var r=e.VALUES_TO_ECI.get(t);if(r===void 0)throw new H("incorect value");return r},e.getCharacterSetECIByName=function(t){var r=e.NAME_TO_ECI.get(t);if(r===void 0)throw new H("incorect value");return r},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var r=t;return this.getName()===r.getName()},e.VALUE_IDENTIFIER_TO_ECI=new Map,e.VALUES_TO_ECI=new Map,e.NAME_TO_ECI=new Map,e.Cp437=new e(xe.Cp437,Int32Array.from([0,2]),"Cp437"),e.ISO8859_1=new e(xe.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),e.ISO8859_2=new e(xe.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),e.ISO8859_3=new e(xe.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),e.ISO8859_4=new e(xe.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),e.ISO8859_5=new e(xe.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),e.ISO8859_6=new e(xe.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),e.ISO8859_7=new e(xe.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),e.ISO8859_8=new e(xe.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),e.ISO8859_9=new e(xe.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),e.ISO8859_10=new e(xe.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),e.ISO8859_11=new e(xe.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),e.ISO8859_13=new e(xe.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),e.ISO8859_14=new e(xe.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),e.ISO8859_15=new e(xe.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),e.ISO8859_16=new e(xe.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),e.SJIS=new e(xe.SJIS,20,"SJIS","Shift_JIS"),e.Cp1250=new e(xe.Cp1250,21,"Cp1250","windows-1250"),e.Cp1251=new e(xe.Cp1251,22,"Cp1251","windows-1251"),e.Cp1252=new e(xe.Cp1252,23,"Cp1252","windows-1252"),e.Cp1256=new e(xe.Cp1256,24,"Cp1256","windows-1256"),e.UnicodeBigUnmarked=new e(xe.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),e.UTF8=new e(xe.UTF8,26,"UTF8","UTF-8"),e.ASCII=new e(xe.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),e.Big5=new e(xe.Big5,28,"Big5"),e.GB18030=new e(xe.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),e.EUC_KR=new e(xe.EUC_KR,30,"EUC_KR","EUC-KR"),e})(),hg=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),La=(function(e){hg(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.kind="UnsupportedOperationException",t})(ht),kt=(function(){function e(){}return e.decode=function(t,r){var n=this.encodingName(r);return this.customDecoder?this.customDecoder(t,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(t,n):new TextDecoder(n).decode(t)},e.shouldDecodeOnFallback=function(t){return!e.isBrowser()&&t==="ISO-8859-1"},e.encode=function(t,r){var n=this.encodingName(r);return this.customEncoder?this.customEncoder(t,n):typeof TextEncoder>"u"?this.encodeFallback(t):new TextEncoder().encode(t)},e.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},e.encodingName=function(t){return typeof t=="string"?t:t.getName()},e.encodingCharacterSet=function(t){return t instanceof Fe?t:Fe.getCharacterSetECIByName(t)},e.decodeFallback=function(t,r){var n=this.encodingCharacterSet(r);if(e.isDecodeFallbackSupported(n)){for(var a="",i=0,o=t.length;i<o;i++){var s=t[i].toString(16);s.length<2&&(s="0"+s),a+="%"+s}return decodeURIComponent(a)}if(n.equals(Fe.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new La("Encoding "+this.encodingName(r)+" not supported by fallback.")},e.isDecodeFallbackSupported=function(t){return t.equals(Fe.UTF8)||t.equals(Fe.ISO8859_1)||t.equals(Fe.ASCII)},e.encodeFallback=function(t){for(var r=btoa(unescape(encodeURIComponent(t))),n=r.split(""),a=[],i=0;i<n.length;i++)a.push(n[i].charCodeAt(0));return new Uint8Array(a)},e})(),de=(function(){function e(){}return e.castAsNonUtf8Char=function(t,r){r===void 0&&(r=null);var n=r?r.getName():this.ISO88591;return kt.decode(new Uint8Array([t]),n)},e.guessEncoding=function(t,r){if(r!=null&&r.get(we.CHARACTER_SET)!==void 0)return r.get(we.CHARACTER_SET).toString();for(var n=t.length,a=!0,i=!0,o=!0,s=0,l=0,d=0,u=0,h=0,f=0,p=0,m=0,g=0,x=0,y=0,v=t.length>3&&t[0]===239&&t[1]===187&&t[2]===191,w=0;w<n&&(a||i||o);w++){var S=t[w]&255;o&&(s>0?(S&128)===0?o=!1:s--:(S&128)!==0&&((S&64)===0?o=!1:(s++,(S&32)===0?l++:(s++,(S&16)===0?d++:(s++,(S&8)===0?u++:o=!1))))),a&&(S>127&&S<160?a=!1:S>159&&(S<192||S===215||S===247)&&y++),i&&(h>0?S<64||S===127||S>252?i=!1:h--:S===128||S===160||S>239?i=!1:S>160&&S<224?(f++,m=0,p++,p>g&&(g=p)):S>127?(h++,p=0,m++,m>x&&(x=m)):(p=0,m=0))}return o&&s>0&&(o=!1),i&&h>0&&(i=!1),o&&(v||l+d+u>0)?e.UTF8:i&&(e.ASSUME_SHIFT_JIS||g>=3||x>=3)?e.SHIFT_JIS:a&&i?g===2&&f===2||y*10>=n?e.SHIFT_JIS:e.ISO88591:a?e.ISO88591:i?e.SHIFT_JIS:o?e.UTF8:e.PLATFORM_DEFAULT_ENCODING},e.format=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a=-1;function i(s,l,d,u,h,f){if(s==="%%")return"%";if(r[++a]!==void 0){s=u?parseInt(u.substr(1)):void 0;var p=h?parseInt(h.substr(1)):void 0,m;switch(f){case"s":m=r[a];break;case"c":m=r[a][0];break;case"f":m=parseFloat(r[a]).toFixed(s);break;case"p":m=parseFloat(r[a]).toPrecision(s);break;case"e":m=parseFloat(r[a]).toExponential(s);break;case"x":m=parseInt(r[a]).toString(p||16);break;case"d":m=parseFloat(parseInt(r[a],p||10).toPrecision(s)).toFixed(0);break}m=typeof m=="object"?JSON.stringify(m):(+m).toString(p);for(var g=parseInt(d),x=d&&d[0]+""=="0"?"0":" ";m.length<g;)m=l!==void 0?m+x:x+m;return m}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(o,i)},e.getBytes=function(t,r){return kt.encode(t,r)},e.getCharCode=function(t,r){return r===void 0&&(r=0),t.charCodeAt(r)},e.getCharAt=function(t){return String.fromCharCode(t)},e.SHIFT_JIS=Fe.SJIS.getName(),e.GB2312="GB2312",e.ISO88591=Fe.ISO8859_1.getName(),e.EUC_JP="EUC_JP",e.UTF8=Fe.UTF8.getName(),e.PLATFORM_DEFAULT_ENCODING=e.UTF8,e.ASSUME_SHIFT_JIS=!1,e})(),se=(function(){function e(t){t===void 0&&(t=""),this.value=t}return e.prototype.enableDecoding=function(t){return this.encoding=t,this},e.prototype.append=function(t){return typeof t=="string"?this.value+=t.toString():this.encoding?this.value+=de.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this},e.prototype.appendChars=function(t,r,n){for(var a=r;r<r+n;a++)this.append(t[a]);return this},e.prototype.length=function(){return this.value.length},e.prototype.charAt=function(t){return this.value.charAt(t)},e.prototype.deleteCharAt=function(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)},e.prototype.setCharAt=function(t,r){this.value=this.value.substr(0,t)+r+this.value.substr(t+1)},e.prototype.substring=function(t,r){return this.value.substring(t,r)},e.prototype.setLengthToZero=function(){this.value=""},e.prototype.toString=function(){return this.value},e.prototype.insert=function(t,r){this.value=this.value.substring(0,t)+r+this.value.substring(t)},e})(),Ht=(function(){function e(t,r,n,a){if(this.width=t,this.height=r,this.rowSize=n,this.bits=a,r==null&&(r=t),this.height=r,t<1||r<1)throw new ee("Both dimensions must be greater than 0");n==null&&(n=Math.floor((t+31)/32)),this.rowSize=n,a==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return e.parseFromBooleanArray=function(t){for(var r=t.length,n=t[0].length,a=new e(n,r),i=0;i<r;i++)for(var o=t[i],s=0;s<n;s++)o[s]&&a.set(s,i);return a},e.parseFromString=function(t,r,n){if(t===null)throw new ee("stringRepresentation cannot be null");for(var a=new Array(t.length),i=0,o=0,s=-1,l=0,d=0;d<t.length;)if(t.charAt(d)===`
`||t.charAt(d)==="\r"){if(i>o){if(s===-1)s=i-o;else if(i-o!==s)throw new ee("row lengths do not match");o=i,l++}d++}else if(t.substring(d,d+r.length)===r)d+=r.length,a[i]=!0,i++;else if(t.substring(d,d+n.length)===n)d+=n.length,a[i]=!1,i++;else throw new ee("illegal character encountered: "+t.substring(d));if(i>o){if(s===-1)s=i-o;else if(i-o!==s)throw new ee("row lengths do not match");l++}for(var u=new e(s,l),h=0;h<i;h++)a[h]&&u.set(Math.floor(h%s),Math.floor(h/s));return u},e.prototype.get=function(t,r){var n=r*this.rowSize+Math.floor(t/32);return(this.bits[n]>>>(t&31)&1)!==0},e.prototype.set=function(t,r){var n=r*this.rowSize+Math.floor(t/32);this.bits[n]|=1<<(t&31)&4294967295},e.prototype.unset=function(t,r){var n=r*this.rowSize+Math.floor(t/32);this.bits[n]&=~(1<<(t&31)&4294967295)},e.prototype.flip=function(t,r){var n=r*this.rowSize+Math.floor(t/32);this.bits[n]^=1<<(t&31)&4294967295},e.prototype.xor=function(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new ee("input matrix dimensions do not match");for(var r=new Ge(Math.floor(this.width/32)+1),n=this.rowSize,a=this.bits,i=0,o=this.height;i<o;i++)for(var s=i*n,l=t.getRow(i,r).getBitArray(),d=0;d<n;d++)a[s+d]^=l[d]},e.prototype.clear=function(){for(var t=this.bits,r=t.length,n=0;n<r;n++)t[n]=0},e.prototype.setRegion=function(t,r,n,a){if(r<0||t<0)throw new ee("Left and top must be nonnegative");if(a<1||n<1)throw new ee("Height and width must be at least 1");var i=t+n,o=r+a;if(o>this.height||i>this.width)throw new ee("The region must fit inside the matrix");for(var s=this.rowSize,l=this.bits,d=r;d<o;d++)for(var u=d*s,h=t;h<i;h++)l[u+Math.floor(h/32)]|=1<<(h&31)&4294967295},e.prototype.getRow=function(t,r){r==null||r.getSize()<this.width?r=new Ge(this.width):r.clear();for(var n=this.rowSize,a=this.bits,i=t*n,o=0;o<n;o++)r.setBulk(o*32,a[i+o]);return r},e.prototype.setRow=function(t,r){_e.arraycopy(r.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)},e.prototype.rotate180=function(){for(var t=this.getWidth(),r=this.getHeight(),n=new Ge(t),a=new Ge(t),i=0,o=Math.floor((r+1)/2);i<o;i++)n=this.getRow(i,n),a=this.getRow(r-1-i,a),n.reverse(),a.reverse(),this.setRow(i,a),this.setRow(r-1-i,n)},e.prototype.getEnclosingRectangle=function(){for(var t=this.width,r=this.height,n=this.rowSize,a=this.bits,i=t,o=r,s=-1,l=-1,d=0;d<r;d++)for(var u=0;u<n;u++){var h=a[d*n+u];if(h!==0){if(d<o&&(o=d),d>l&&(l=d),u*32<i){for(var f=0;(h<<31-f&4294967295)===0;)f++;u*32+f<i&&(i=u*32+f)}if(u*32+31>s){for(var f=31;!(h>>>f);)f--;u*32+f>s&&(s=u*32+f)}}}return s<i||l<o?null:Int32Array.from([i,o,s-i+1,l-o+1])},e.prototype.getTopLeftOnBit=function(){for(var t=this.rowSize,r=this.bits,n=0;n<r.length&&r[n]===0;)n++;if(n===r.length)return null;for(var a=n/t,i=n%t*32,o=r[n],s=0;(o<<31-s&4294967295)===0;)s++;return i+=s,Int32Array.from([i,a])},e.prototype.getBottomRightOnBit=function(){for(var t=this.rowSize,r=this.bits,n=r.length-1;n>=0&&r[n]===0;)n--;if(n<0)return null;for(var a=Math.floor(n/t),i=Math.floor(n%t)*32,o=r[n],s=31;!(o>>>s);)s--;return i+=s,Int32Array.from([i,a])},e.prototype.getWidth=function(){return this.width},e.prototype.getHeight=function(){return this.height},e.prototype.getRowSize=function(){return this.rowSize},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var r=t;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&$e.equals(this.bits,r.bits)},e.prototype.hashCode=function(){var t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+$e.hashCode(this.bits),t},e.prototype.toString=function(t,r,n){return t===void 0&&(t="X "),r===void 0&&(r="  "),n===void 0&&(n=`
`),this.buildToString(t,r,n)},e.prototype.buildToString=function(t,r,n){for(var a=new se,i=0,o=this.height;i<o;i++){for(var s=0,l=this.width;s<l;s++)a.append(this.get(s,i)?t:r);a.append(n)}return a.toString()},e.prototype.clone=function(){return new e(this.width,this.height,this.rowSize,this.bits.slice())},e})(),fg=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),D=(function(e){fg(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.getNotFoundInstance=function(){return new t},t.kind="NotFoundException",t})(ht),pg=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),mg=(function(e){pg(t,e);function t(r){var n=e.call(this,r)||this;return n.luminances=t.EMPTY,n.buckets=new Int32Array(t.LUMINANCE_BUCKETS),n}return t.prototype.getBlackRow=function(r,n){var a=this.getLuminanceSource(),i=a.getWidth();n==null||n.getSize()<i?n=new Ge(i):n.clear(),this.initArrays(i);for(var o=a.getRow(r,this.luminances),s=this.buckets,l=0;l<i;l++)s[(o[l]&255)>>t.LUMINANCE_SHIFT]++;var d=t.estimateBlackPoint(s);if(i<3)for(var l=0;l<i;l++)(o[l]&255)<d&&n.set(l);else for(var u=o[0]&255,h=o[1]&255,l=1;l<i-1;l++){var f=o[l+1]&255;(h*4-u-f)/2<d&&n.set(l),u=h,h=f}return n},t.prototype.getBlackMatrix=function(){var r=this.getLuminanceSource(),n=r.getWidth(),a=r.getHeight(),i=new Ht(n,a);this.initArrays(n);for(var o=this.buckets,s=1;s<5;s++)for(var l=Math.floor(a*s/5),d=r.getRow(l,this.luminances),u=Math.floor(n*4/5),h=Math.floor(n/5);h<u;h++){var f=d[h]&255;o[f>>t.LUMINANCE_SHIFT]++}for(var p=t.estimateBlackPoint(o),m=r.getMatrix(),s=0;s<a;s++)for(var g=s*n,h=0;h<n;h++){var f=m[g+h]&255;f<p&&i.set(h,s)}return i},t.prototype.createBinarizer=function(r){return new t(r)},t.prototype.initArrays=function(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));for(var n=this.buckets,a=0;a<t.LUMINANCE_BUCKETS;a++)n[a]=0},t.estimateBlackPoint=function(r){for(var n=r.length,a=0,i=0,o=0,s=0;s<n;s++)r[s]>o&&(i=s,o=r[s]),r[s]>a&&(a=r[s]);for(var l=0,d=0,s=0;s<n;s++){var u=s-i,h=r[s]*u*u;h>d&&(l=s,d=h)}if(i>l){var f=i;i=l,l=f}if(l-i<=n/16)throw new D;for(var p=l-1,m=-1,s=l-1;s>i;s--){var g=s-i,h=g*g*(l-s)*(a-r[s]);h>m&&(p=s,m=h)}return p<<t.LUMINANCE_SHIFT},t.LUMINANCE_BITS=5,t.LUMINANCE_SHIFT=8-t.LUMINANCE_BITS,t.LUMINANCE_BUCKETS=1<<t.LUMINANCE_BITS,t.EMPTY=Uint8ClampedArray.from([0]),t})(og),gg=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Ch=(function(e){gg(t,e);function t(r){var n=e.call(this,r)||this;return n.matrix=null,n}return t.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var r=this.getLuminanceSource(),n=r.getWidth(),a=r.getHeight();if(n>=t.MINIMUM_DIMENSION&&a>=t.MINIMUM_DIMENSION){var i=r.getMatrix(),o=n>>t.BLOCK_SIZE_POWER;(n&t.BLOCK_SIZE_MASK)!==0&&o++;var s=a>>t.BLOCK_SIZE_POWER;(a&t.BLOCK_SIZE_MASK)!==0&&s++;var l=t.calculateBlackPoints(i,o,s,n,a),d=new Ht(n,a);t.calculateThresholdForBlock(i,o,s,n,a,l,d),this.matrix=d}else this.matrix=e.prototype.getBlackMatrix.call(this);return this.matrix},t.prototype.createBinarizer=function(r){return new t(r)},t.calculateThresholdForBlock=function(r,n,a,i,o,s,l){for(var d=o-t.BLOCK_SIZE,u=i-t.BLOCK_SIZE,h=0;h<a;h++){var f=h<<t.BLOCK_SIZE_POWER;f>d&&(f=d);for(var p=t.cap(h,2,a-3),m=0;m<n;m++){var g=m<<t.BLOCK_SIZE_POWER;g>u&&(g=u);for(var x=t.cap(m,2,n-3),y=0,v=-2;v<=2;v++){var w=s[p+v];y+=w[x-2]+w[x-1]+w[x]+w[x+1]+w[x+2]}var S=y/25;t.thresholdBlock(r,g,f,S,i,l)}}},t.cap=function(r,n,a){return r<n?n:r>a?a:r},t.thresholdBlock=function(r,n,a,i,o,s){for(var l=0,d=a*o+n;l<t.BLOCK_SIZE;l++,d+=o)for(var u=0;u<t.BLOCK_SIZE;u++)(r[d+u]&255)<=i&&s.set(n+u,a+l)},t.calculateBlackPoints=function(r,n,a,i,o){for(var s=o-t.BLOCK_SIZE,l=i-t.BLOCK_SIZE,d=new Array(a),u=0;u<a;u++){d[u]=new Int32Array(n);var h=u<<t.BLOCK_SIZE_POWER;h>s&&(h=s);for(var f=0;f<n;f++){var p=f<<t.BLOCK_SIZE_POWER;p>l&&(p=l);for(var m=0,g=255,x=0,y=0,v=h*i+p;y<t.BLOCK_SIZE;y++,v+=i){for(var w=0;w<t.BLOCK_SIZE;w++){var S=r[v+w]&255;m+=S,S<g&&(g=S),S>x&&(x=S)}if(x-g>t.MIN_DYNAMIC_RANGE)for(y++,v+=i;y<t.BLOCK_SIZE;y++,v+=i)for(var w=0;w<t.BLOCK_SIZE;w++)m+=r[v+w]&255}var C=m>>t.BLOCK_SIZE_POWER*2;if(x-g<=t.MIN_DYNAMIC_RANGE&&(C=g/2,u>0&&f>0)){var k=(d[u-1][f]+2*d[u][f-1]+d[u-1][f-1])/4;g<k&&(C=k)}d[u][f]=C}}return d},t.BLOCK_SIZE_POWER=3,t.BLOCK_SIZE=1<<t.BLOCK_SIZE_POWER,t.BLOCK_SIZE_MASK=t.BLOCK_SIZE-1,t.MINIMUM_DIMENSION=t.BLOCK_SIZE*5,t.MIN_DYNAMIC_RANGE=24,t})(mg),oa=(function(){function e(t,r){this.width=t,this.height=r}return e.prototype.getWidth=function(){return this.width},e.prototype.getHeight=function(){return this.height},e.prototype.isCropSupported=function(){return!1},e.prototype.crop=function(t,r,n,a){throw new La("This luminance source does not support cropping.")},e.prototype.isRotateSupported=function(){return!1},e.prototype.rotateCounterClockwise=function(){throw new La("This luminance source does not support rotation by 90 degrees.")},e.prototype.rotateCounterClockwise45=function(){throw new La("This luminance source does not support rotation by 45 degrees.")},e.prototype.toString=function(){for(var t=new Uint8ClampedArray(this.width),r=new se,n=0;n<this.height;n++){for(var a=this.getRow(n,t),i=0;i<this.width;i++){var o=a[i]&255,s=void 0;o<64?s="#":o<128?s="+":o<192?s=".":s=" ",r.append(s)}r.append(`
`)}return r.toString()},e})(),xg=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Pi=(function(e){xg(t,e);function t(r){var n=e.call(this,r.getWidth(),r.getHeight())||this;return n.delegate=r,n}return t.prototype.getRow=function(r,n){for(var a=this.delegate.getRow(r,n),i=this.getWidth(),o=0;o<i;o++)a[o]=255-(a[o]&255);return a},t.prototype.getMatrix=function(){for(var r=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(n),i=0;i<n;i++)a[i]=255-(r[i]&255);return a},t.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},t.prototype.crop=function(r,n,a,i){return new t(this.delegate.crop(r,n,a,i))},t.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},t.prototype.invert=function(){return this.delegate},t.prototype.rotateCounterClockwise=function(){return new t(this.delegate.rotateCounterClockwise())},t.prototype.rotateCounterClockwise45=function(){return new t(this.delegate.rotateCounterClockwise45())},t})(oa),vg=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),yg=(function(e){vg(t,e);function t(r,n){n===void 0&&(n=!1);var a=e.call(this,r.width,r.height)||this;return a.canvas=r,a.tempCanvasElement=null,a.buffer=t.makeBufferFromCanvasImageData(r,n),a}return t.makeBufferFromCanvasImageData=function(r,n){n===void 0&&(n=!1);var a=r.getContext("2d").getImageData(0,0,r.width,r.height);return t.toGrayscaleBuffer(a.data,r.width,r.height,n)},t.toGrayscaleBuffer=function(r,n,a,i){i===void 0&&(i=!1);var o=new Uint8ClampedArray(n*a);if(t.FRAME_INDEX=!t.FRAME_INDEX,t.FRAME_INDEX||!i)for(var s=0,l=0,d=r.length;s<d;s+=4,l++){var u=void 0,h=r[s+3];if(h===0)u=255;else{var f=r[s],p=r[s+1],m=r[s+2];u=306*f+601*p+117*m+512>>10}o[l]=u}else for(var s=0,l=0,g=r.length;s<g;s+=4,l++){var u=void 0,h=r[s+3];if(h===0)u=255;else{var f=r[s],p=r[s+1],m=r[s+2];u=306*f+601*p+117*m+512>>10}o[l]=255-u}return o},t.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new ee("Requested row is outside the image: "+r);var a=this.getWidth(),i=r*a;return n===null?n=this.buffer.slice(i,i+a):(n.length<a&&(n=new Uint8ClampedArray(a)),n.set(this.buffer.slice(i,i+a))),n},t.prototype.getMatrix=function(){return this.buffer},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(r,n,a,i){return e.prototype.crop.call(this,r,n,a,i),this},t.prototype.isRotateSupported=function(){return!0},t.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},t.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},t.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},t.prototype.rotate=function(r){var n=this.getTempCanvasElement(),a=n.getContext("2d"),i=r*t.DEGREE_TO_RADIANS,o=this.canvas.width,s=this.canvas.height,l=Math.ceil(Math.abs(Math.cos(i))*o+Math.abs(Math.sin(i))*s),d=Math.ceil(Math.abs(Math.sin(i))*o+Math.abs(Math.cos(i))*s);return n.width=l,n.height=d,a.translate(l/2,d/2),a.rotate(i),a.drawImage(this.canvas,o/-2,s/-2),this.buffer=t.makeBufferFromCanvasImageData(n),this},t.prototype.invert=function(){return new Pi(this)},t.DEGREE_TO_RADIANS=Math.PI/180,t.FRAME_INDEX=!0,t})(oa),bg=(function(){function e(t,r,n){this.deviceId=t,this.label=r,this.kind="videoinput",this.groupId=n||void 0}return e.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},e})(),tt=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function s(u){try{d(n.next(u))}catch(h){o(h)}}function l(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(s,l)}d((n=n.apply(e,t||[])).next())})},rt=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(d){return function(u){return l([d,u])}}function l(d){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(i=d[0]&2?a.return:d[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,d[1])).done)return i;switch(a=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,a=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){r.label=d[1];break}if(d[0]===6&&r.label<i[1]){r.label=i[1],i=d;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(d);break}i[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(u){d=[6,u],a=0}finally{n=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},wg=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},pn=(function(){function e(t,r,n){r===void 0&&(r=500),this.reader=t,this.timeBetweenScansMillis=r,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(e.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(t){this._timeBetweenDecodingAttempts=t<0?0:t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hints",{get:function(){return this._hints},set:function(t){this._hints=t||null},enumerable:!1,configurable:!0}),e.prototype.listVideoInputDevices=function(){return tt(this,void 0,void 0,function(){var t,r,n,a,i,o,s,l,d,u,h,f;return rt(this,function(p){switch(p.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:t=p.sent(),r=[];try{for(n=wg(t),a=n.next();!a.done;a=n.next())i=a.value,o=i.kind==="video"?"videoinput":i.kind,o==="videoinput"&&(s=i.deviceId||i.id,l=i.label||"Video device "+(r.length+1),d=i.groupId,u={deviceId:s,label:l,kind:o,groupId:d},r.push(u))}catch(m){h={error:m}}finally{try{a&&!a.done&&(f=n.return)&&f.call(n)}finally{if(h)throw h.error}}return[2,r]}})})},e.prototype.getVideoInputDevices=function(){return tt(this,void 0,void 0,function(){var t;return rt(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=r.sent(),[2,t.map(function(n){return new bg(n.deviceId,n.label)})]}})})},e.prototype.findDeviceById=function(t){return tt(this,void 0,void 0,function(){var r;return rt(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(a){return a.deviceId===t})]:[2,null]}})})},e.prototype.decodeFromInputVideoDevice=function(t,r){return tt(this,void 0,void 0,function(){return rt(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(t,r)];case 1:return[2,n.sent()]}})})},e.prototype.decodeOnceFromVideoDevice=function(t,r){return tt(this,void 0,void 0,function(){var n,a;return rt(this,function(i){switch(i.label){case 0:return this.reset(),t?n={deviceId:{exact:t}}:n={facingMode:"environment"},a={video:n},[4,this.decodeOnceFromConstraints(a,r)];case 1:return[2,i.sent()]}})})},e.prototype.decodeOnceFromConstraints=function(t,r){return tt(this,void 0,void 0,function(){var n;return rt(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(t)];case 1:return n=a.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,a.sent()]}})})},e.prototype.decodeOnceFromStream=function(t,r){return tt(this,void 0,void 0,function(){var n,a;return rt(this,function(i){switch(i.label){case 0:return this.reset(),[4,this.attachStreamToVideo(t,r)];case 1:return n=i.sent(),[4,this.decodeOnce(n)];case 2:return a=i.sent(),[2,a]}})})},e.prototype.decodeFromInputVideoDeviceContinuously=function(t,r,n){return tt(this,void 0,void 0,function(){return rt(this,function(a){switch(a.label){case 0:return[4,this.decodeFromVideoDevice(t,r,n)];case 1:return[2,a.sent()]}})})},e.prototype.decodeFromVideoDevice=function(t,r,n){return tt(this,void 0,void 0,function(){var a,i;return rt(this,function(o){switch(o.label){case 0:return t?a={deviceId:{exact:t}}:a={facingMode:"environment"},i={video:a},[4,this.decodeFromConstraints(i,r,n)];case 1:return[2,o.sent()]}})})},e.prototype.decodeFromConstraints=function(t,r,n){return tt(this,void 0,void 0,function(){var a;return rt(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(t)];case 1:return a=i.sent(),[4,this.decodeFromStream(a,r,n)];case 2:return[2,i.sent()]}})})},e.prototype.decodeFromStream=function(t,r,n){return tt(this,void 0,void 0,function(){var a;return rt(this,function(i){switch(i.label){case 0:return this.reset(),[4,this.attachStreamToVideo(t,r)];case 1:return a=i.sent(),[4,this.decodeContinuously(a,n)];case 2:return[2,i.sent()]}})})},e.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},e.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},e.prototype.attachStreamToVideo=function(t,r){return tt(this,void 0,void 0,function(){var n;return rt(this,function(a){switch(a.label){case 0:return n=this.prepareVideoElement(r),this.addVideoSource(n,t),this.videoElement=n,this.stream=t,[4,this.playVideoOnLoadAsync(n)];case 1:return a.sent(),[2,n]}})})},e.prototype.playVideoOnLoadAsync=function(t){var r=this;return new Promise(function(n,a){return r.playVideoOnLoad(t,function(){return n()})})},e.prototype.playVideoOnLoad=function(t,r){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(t)},t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",r),this.tryPlayVideo(t)},e.prototype.isVideoPlaying=function(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2},e.prototype.tryPlayVideo=function(t){return tt(this,void 0,void 0,function(){return rt(this,function(r){switch(r.label){case 0:if(this.isVideoPlaying(t))return console.warn("Trying to play video that is already playing."),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,t.play()];case 2:return r.sent(),[3,4];case 3:return r.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},e.prototype.getMediaElement=function(t,r){var n=document.getElementById(t);if(!n)throw new Be("element with id '"+t+"' not found");if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new Be("element with id '"+t+"' must be an "+r+" element");return n},e.prototype.decodeFromImage=function(t,r){if(!t&&!r)throw new Be("either imageElement with a src set or an url must be provided");return r&&!t?this.decodeFromImageUrl(r):this.decodeFromImageElement(t)},e.prototype.decodeFromVideo=function(t,r){if(!t&&!r)throw new Be("Either an element with a src set or an URL must be provided");return r&&!t?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(t)},e.prototype.decodeFromVideoContinuously=function(t,r,n){if(t===void 0&&r===void 0)throw new Be("Either an element with a src set or an URL must be provided");return r&&!t?this.decodeFromVideoUrlContinuously(r,n):this.decodeFromVideoElementContinuously(t,n)},e.prototype.decodeFromImageElement=function(t){if(!t)throw new Be("An image element must be provided.");this.reset();var r=this.prepareImageElement(t);this.imageElement=r;var n;return this.isImageLoaded(r)?n=this.decodeOnce(r,!1,!0):n=this._decodeOnLoadImage(r),n},e.prototype.decodeFromVideoElement=function(t){var r=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(r)},e.prototype.decodeFromVideoElementContinuously=function(t,r){var n=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(n,r)},e.prototype._decodeFromVideoElementSetup=function(t){if(!t)throw new Be("A video element must be provided.");this.reset();var r=this.prepareVideoElement(t);return this.videoElement=r,r},e.prototype.decodeFromImageUrl=function(t){if(!t)throw new Be("An URL must be provided.");this.reset();var r=this.prepareImageElement();this.imageElement=r;var n=this._decodeOnLoadImage(r);return r.src=t,n},e.prototype.decodeFromVideoUrl=function(t){if(!t)throw new Be("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),n=this.decodeFromVideoElement(r);return r.src=t,n},e.prototype.decodeFromVideoUrlContinuously=function(t,r){if(!t)throw new Be("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),a=this.decodeFromVideoElementContinuously(n,r);return n.src=t,a},e.prototype._decodeOnLoadImage=function(t){var r=this;return new Promise(function(n,a){r.imageLoadedListener=function(){return r.decodeOnce(t,!1,!0).then(n,a)},t.addEventListener("load",r.imageLoadedListener)})},e.prototype._decodeOnLoadVideo=function(t){return tt(this,void 0,void 0,function(){return rt(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(t)];case 1:return r.sent(),[4,this.decodeOnce(t)];case 2:return[2,r.sent()]}})})},e.prototype._decodeOnLoadVideoContinuously=function(t,r){return tt(this,void 0,void 0,function(){return rt(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(t)];case 1:return n.sent(),this.decodeContinuously(t,r),[2]}})})},e.prototype.isImageLoaded=function(t){return!(!t.complete||t.naturalWidth===0)},e.prototype.prepareImageElement=function(t){var r;return typeof t>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof t=="string"&&(r=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(r=t),r},e.prototype.prepareVideoElement=function(t){var r;return!t&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof t=="string"&&(r=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(r=t),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},e.prototype.decodeOnce=function(t,r,n){var a=this;r===void 0&&(r=!0),n===void 0&&(n=!0),this._stopAsyncDecode=!1;var i=function(o,s){if(a._stopAsyncDecode){s(new D("Video stream has ended before any code could be detected.")),a._stopAsyncDecode=void 0;return}try{var l=a.decode(t);o(l)}catch(f){var d=r&&f instanceof D,u=f instanceof De||f instanceof H,h=u&&n;if(d||h)return setTimeout(i,a._timeBetweenDecodingAttempts,o,s);s(f)}};return new Promise(function(o,s){return i(o,s)})},e.prototype.decodeContinuously=function(t,r){var n=this;this._stopContinuousDecode=!1;var a=function(){if(n._stopContinuousDecode){n._stopContinuousDecode=void 0;return}try{var i=n.decode(t);r(i,null),setTimeout(a,n.timeBetweenScansMillis)}catch(l){r(null,l);var o=l instanceof De||l instanceof H,s=l instanceof D;(o||s)&&setTimeout(a,n._timeBetweenDecodingAttempts)}};a()},e.prototype.decode=function(t){var r=this.createBinaryBitmap(t);return this.decodeBitmap(r)},e.prototype.createBinaryBitmap=function(t){this.getCaptureCanvasContext(t);var r=!1;t instanceof HTMLVideoElement?(this.drawFrameOnCanvas(t),r=!0):this.drawImageOnCanvas(t);var n=this.getCaptureCanvas(t),a=new yg(n,r),i=new Ch(a);return new _h(i)},e.prototype.getCaptureCanvasContext=function(t){if(!this.captureCanvasContext){var r=this.getCaptureCanvas(t),n=void 0;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},e.prototype.getCaptureCanvas=function(t){if(!this.captureCanvas){var r=this.createCaptureCanvas(t);this.captureCanvas=r}return this.captureCanvas},e.prototype.drawFrameOnCanvas=function(t,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:t.videoWidth,sHeight:t.videoHeight,dx:0,dy:0,dWidth:t.videoWidth,dHeight:t.videoHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(t,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},e.prototype.drawImageOnCanvas=function(t,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:t.naturalWidth,sHeight:t.naturalHeight,dx:0,dy:0,dWidth:t.naturalWidth,dHeight:t.naturalHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(t,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},e.prototype.decodeBitmap=function(t){return this.reader.decode(t,this._hints)},e.prototype.createCaptureCanvas=function(t){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var r=document.createElement("canvas"),n,a;return typeof t<"u"&&(t instanceof HTMLVideoElement?(n=t.videoWidth,a=t.videoHeight):t instanceof HTMLImageElement&&(n=t.naturalWidth||t.width,a=t.naturalHeight||t.height)),r.style.width=n+"px",r.style.height=a+"px",r.width=n,r.height=a,r},e.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(t){return t.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},e.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},e.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},e.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},e.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},e.prototype.addVideoSource=function(t,r){try{t.srcObject=r}catch{t.src=URL.createObjectURL(r)}},e.prototype.cleanVideoSource=function(t){try{t.srcObject=null}catch{t.src=""}this.videoElement.removeAttribute("src")},e})(),Qe=(function(){function e(t,r,n,a,i,o){n===void 0&&(n=r==null?0:8*r.length),o===void 0&&(o=_e.currentTimeMillis()),this.text=t,this.rawBytes=r,this.numBits=n,this.resultPoints=a,this.format=i,this.timestamp=o,this.text=t,this.rawBytes=r,n==null?this.numBits=r==null?0:8*r.length:this.numBits=n,this.resultPoints=a,this.format=i,this.resultMetadata=null,o==null?this.timestamp=_e.currentTimeMillis():this.timestamp=o}return e.prototype.getText=function(){return this.text},e.prototype.getRawBytes=function(){return this.rawBytes},e.prototype.getNumBits=function(){return this.numBits},e.prototype.getResultPoints=function(){return this.resultPoints},e.prototype.getBarcodeFormat=function(){return this.format},e.prototype.getResultMetadata=function(){return this.resultMetadata},e.prototype.putMetadata=function(t,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(t,r)},e.prototype.putAllMetadata=function(t){t!==null&&(this.resultMetadata===null?this.resultMetadata=t:this.resultMetadata=new Map(t))},e.prototype.addResultPoints=function(t){var r=this.resultPoints;if(r===null)this.resultPoints=t;else if(t!==null&&t.length>0){var n=new Array(r.length+t.length);_e.arraycopy(r,0,n,0,r.length),_e.arraycopy(t,0,n,r.length,t.length),this.resultPoints=n}},e.prototype.getTimestamp=function(){return this.timestamp},e.prototype.toString=function(){return this.text},e})(),Qo;(function(e){e[e.AZTEC=0]="AZTEC",e[e.CODABAR=1]="CODABAR",e[e.CODE_39=2]="CODE_39",e[e.CODE_93=3]="CODE_93",e[e.CODE_128=4]="CODE_128",e[e.DATA_MATRIX=5]="DATA_MATRIX",e[e.EAN_8=6]="EAN_8",e[e.EAN_13=7]="EAN_13",e[e.ITF=8]="ITF",e[e.MAXICODE=9]="MAXICODE",e[e.PDF_417=10]="PDF_417",e[e.QR_CODE=11]="QR_CODE",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Qo||(Qo={}));const W=Qo;var es;(function(e){e[e.OTHER=0]="OTHER",e[e.ORIENTATION=1]="ORIENTATION",e[e.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",e[e.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",e[e.ISSUE_NUMBER=4]="ISSUE_NUMBER",e[e.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",e[e.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",e[e.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",e[e.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",e[e.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",e[e.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(es||(es={}));const We=es;var Fi=(function(){function e(t,r,n,a,i,o){i===void 0&&(i=-1),o===void 0&&(o=-1),this.rawBytes=t,this.text=r,this.byteSegments=n,this.ecLevel=a,this.structuredAppendSequenceNumber=i,this.structuredAppendParity=o,this.numBits=t==null?0:8*t.length}return e.prototype.getRawBytes=function(){return this.rawBytes},e.prototype.getNumBits=function(){return this.numBits},e.prototype.setNumBits=function(t){this.numBits=t},e.prototype.getText=function(){return this.text},e.prototype.getByteSegments=function(){return this.byteSegments},e.prototype.getECLevel=function(){return this.ecLevel},e.prototype.getErrorsCorrected=function(){return this.errorsCorrected},e.prototype.setErrorsCorrected=function(t){this.errorsCorrected=t},e.prototype.getErasures=function(){return this.erasures},e.prototype.setErasures=function(t){this.erasures=t},e.prototype.getOther=function(){return this.other},e.prototype.setOther=function(t){this.other=t},e.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},e.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},e.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},e})(),En=(function(){function e(){}return e.prototype.exp=function(t){return this.expTable[t]},e.prototype.log=function(t){if(t===0)throw new ee;return this.logTable[t]},e.addOrSubtract=function(t,r){return t^r},e})(),hr=(function(){function e(t,r){if(r.length===0)throw new ee;this.field=t;var n=r.length;if(n>1&&r[0]===0){for(var a=1;a<n&&r[a]===0;)a++;a===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-a),_e.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return e.prototype.getCoefficients=function(){return this.coefficients},e.prototype.getDegree=function(){return this.coefficients.length-1},e.prototype.isZero=function(){return this.coefficients[0]===0},e.prototype.getCoefficient=function(t){return this.coefficients[this.coefficients.length-1-t]},e.prototype.evaluateAt=function(t){if(t===0)return this.getCoefficient(0);var r=this.coefficients,n;if(t===1){n=0;for(var a=0,i=r.length;a!==i;a++){var o=r[a];n=En.addOrSubtract(n,o)}return n}n=r[0];for(var s=r.length,l=this.field,a=1;a<s;a++)n=En.addOrSubtract(l.multiply(t,n),r[a]);return n},e.prototype.addOrSubtract=function(t){if(!this.field.equals(t.field))throw new ee("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;var r=this.coefficients,n=t.coefficients;if(r.length>n.length){var a=r;r=n,n=a}var i=new Int32Array(n.length),o=n.length-r.length;_e.arraycopy(n,0,i,0,o);for(var s=o;s<n.length;s++)i[s]=En.addOrSubtract(r[s-o],n[s]);return new e(this.field,i)},e.prototype.multiply=function(t){if(!this.field.equals(t.field))throw new ee("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();for(var r=this.coefficients,n=r.length,a=t.coefficients,i=a.length,o=new Int32Array(n+i-1),s=this.field,l=0;l<n;l++)for(var d=r[l],u=0;u<i;u++)o[l+u]=En.addOrSubtract(o[l+u],s.multiply(d,a[u]));return new e(s,o)},e.prototype.multiplyScalar=function(t){if(t===0)return this.field.getZero();if(t===1)return this;for(var r=this.coefficients.length,n=this.field,a=new Int32Array(r),i=this.coefficients,o=0;o<r;o++)a[o]=n.multiply(i[o],t);return new e(n,a)},e.prototype.multiplyByMonomial=function(t,r){if(t<0)throw new ee;if(r===0)return this.field.getZero();for(var n=this.coefficients,a=n.length,i=new Int32Array(a+t),o=this.field,s=0;s<a;s++)i[s]=o.multiply(n[s],r);return new e(o,i)},e.prototype.divide=function(t){if(!this.field.equals(t.field))throw new ee("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new ee("Divide by 0");for(var r=this.field,n=r.getZero(),a=this,i=t.getCoefficient(t.getDegree()),o=r.inverse(i);a.getDegree()>=t.getDegree()&&!a.isZero();){var s=a.getDegree()-t.getDegree(),l=r.multiply(a.getCoefficient(a.getDegree()),o),d=t.multiplyByMonomial(s,l),u=r.buildMonomial(s,l);n=n.addOrSubtract(u),a=a.addOrSubtract(d)}return[n,a]},e.prototype.toString=function(){for(var t="",r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);if(n!==0){if(n<0?(t+=" - ",n=-n):t.length>0&&(t+=" + "),r===0||n!==1){var a=this.field.log(n);a===0?t+="1":a===1?t+="a":(t+="a^",t+=a)}r!==0&&(r===1?t+="x":(t+="x^",t+=r))}}return t},e})(),_g=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Sh=(function(e){_g(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.kind="ArithmeticException",t})(ht),Cg=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),ct=(function(e){Cg(t,e);function t(r,n,a){var i=e.call(this)||this;i.primitive=r,i.size=n,i.generatorBase=a;for(var o=new Int32Array(n),s=1,l=0;l<n;l++)o[l]=s,s*=2,s>=n&&(s^=r,s&=n-1);i.expTable=o;for(var d=new Int32Array(n),l=0;l<n-1;l++)d[o[l]]=l;return i.logTable=d,i.zero=new hr(i,Int32Array.from([0])),i.one=new hr(i,Int32Array.from([1])),i}return t.prototype.getZero=function(){return this.zero},t.prototype.getOne=function(){return this.one},t.prototype.buildMonomial=function(r,n){if(r<0)throw new ee;if(n===0)return this.zero;var a=new Int32Array(r+1);return a[0]=n,new hr(this,a)},t.prototype.inverse=function(r){if(r===0)throw new Sh;return this.expTable[this.size-this.logTable[r]-1]},t.prototype.multiply=function(r,n){return r===0||n===0?0:this.expTable[(this.logTable[r]+this.logTable[n])%(this.size-1)]},t.prototype.getSize=function(){return this.size},t.prototype.getGeneratorBase=function(){return this.generatorBase},t.prototype.toString=function(){return"GF(0x"+le.toHexString(this.primitive)+","+this.size+")"},t.prototype.equals=function(r){return r===this},t.AZTEC_DATA_12=new t(4201,4096,1),t.AZTEC_DATA_10=new t(1033,1024,1),t.AZTEC_DATA_6=new t(67,64,1),t.AZTEC_PARAM=new t(19,16,1),t.QR_CODE_FIELD_256=new t(285,256,0),t.DATA_MATRIX_FIELD_256=new t(301,256,1),t.AZTEC_DATA_8=t.DATA_MATRIX_FIELD_256,t.MAXICODE_FIELD_64=t.AZTEC_DATA_6,t})(En),Sg=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),xa=(function(e){Sg(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.kind="ReedSolomonException",t})(ht),Ag=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),sa=(function(e){Ag(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.kind="IllegalStateException",t})(ht),$i=(function(){function e(t){this.field=t}return e.prototype.decode=function(t,r){for(var n=this.field,a=new hr(n,t),i=new Int32Array(r),o=!0,s=0;s<r;s++){var l=a.evaluateAt(n.exp(s+n.getGeneratorBase()));i[i.length-1-s]=l,l!==0&&(o=!1)}if(!o)for(var d=new hr(n,i),u=this.runEuclideanAlgorithm(n.buildMonomial(r,1),d,r),h=u[0],f=u[1],p=this.findErrorLocations(h),m=this.findErrorMagnitudes(f,p),s=0;s<p.length;s++){var g=t.length-1-n.log(p[s]);if(g<0)throw new xa("Bad error location");t[g]=ct.addOrSubtract(t[g],m[s])}},e.prototype.runEuclideanAlgorithm=function(t,r,n){if(t.getDegree()<r.getDegree()){var a=t;t=r,r=a}for(var i=this.field,o=t,s=r,l=i.getZero(),d=i.getOne();s.getDegree()>=(n/2|0);){var u=o,h=l;if(o=s,l=d,o.isZero())throw new xa("r_{i-1} was zero");s=u;for(var f=i.getZero(),p=o.getCoefficient(o.getDegree()),m=i.inverse(p);s.getDegree()>=o.getDegree()&&!s.isZero();){var g=s.getDegree()-o.getDegree(),x=i.multiply(s.getCoefficient(s.getDegree()),m);f=f.addOrSubtract(i.buildMonomial(g,x)),s=s.addOrSubtract(o.multiplyByMonomial(g,x))}if(d=f.multiply(l).addOrSubtract(h),s.getDegree()>=o.getDegree())throw new sa("Division algorithm failed to reduce polynomial?")}var y=d.getCoefficient(0);if(y===0)throw new xa("sigmaTilde(0) was zero");var v=i.inverse(y),w=d.multiplyScalar(v),S=s.multiplyScalar(v);return[w,S]},e.prototype.findErrorLocations=function(t){var r=t.getDegree();if(r===1)return Int32Array.from([t.getCoefficient(1)]);for(var n=new Int32Array(r),a=0,i=this.field,o=1;o<i.getSize()&&a<r;o++)t.evaluateAt(o)===0&&(n[a]=i.inverse(o),a++);if(a!==r)throw new xa("Error locator degree does not match number of roots");return n},e.prototype.findErrorMagnitudes=function(t,r){for(var n=r.length,a=new Int32Array(n),i=this.field,o=0;o<n;o++){for(var s=i.inverse(r[o]),l=1,d=0;d<n;d++)if(o!==d){var u=i.multiply(r[d],s),h=(u&1)===0?u|1:u&-2;l=i.multiply(l,h)}a[o]=i.multiply(t.evaluateAt(s),i.inverse(l)),i.getGeneratorBase()!==0&&(a[o]=i.multiply(a[o],s))}return a},e})(),Ve;(function(e){e[e.UPPER=0]="UPPER",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.DIGIT=3]="DIGIT",e[e.PUNCT=4]="PUNCT",e[e.BINARY=5]="BINARY"})(Ve||(Ve={}));var cc=(function(){function e(){}return e.prototype.decode=function(t){this.ddata=t;var r=t.getBits(),n=this.extractBits(r),a=this.correctBits(n),i=e.convertBoolArrayToByteArray(a),o=e.getEncodedData(a),s=new Fi(i,o,null,null);return s.setNumBits(a.length),s},e.highLevelDecode=function(t){return this.getEncodedData(t)},e.getEncodedData=function(t){for(var r=t.length,n=Ve.UPPER,a=Ve.UPPER,i="",o=0;o<r;)if(a===Ve.BINARY){if(r-o<5)break;var s=e.readCode(t,o,5);if(o+=5,s===0){if(r-o<11)break;s=e.readCode(t,o,11)+31,o+=11}for(var l=0;l<s;l++){if(r-o<8){o=r;break}var d=e.readCode(t,o,8);i+=de.castAsNonUtf8Char(d),o+=8}a=n}else{var u=a===Ve.DIGIT?4:5;if(r-o<u)break;var d=e.readCode(t,o,u);o+=u;var h=e.getCharacter(a,d);h.startsWith("CTRL_")?(n=a,a=e.getTable(h.charAt(5)),h.charAt(6)==="L"&&(n=a)):(i+=h,a=n)}return i},e.getTable=function(t){switch(t){case"L":return Ve.LOWER;case"P":return Ve.PUNCT;case"M":return Ve.MIXED;case"D":return Ve.DIGIT;case"B":return Ve.BINARY;case"U":default:return Ve.UPPER}},e.getCharacter=function(t,r){switch(t){case Ve.UPPER:return e.UPPER_TABLE[r];case Ve.LOWER:return e.LOWER_TABLE[r];case Ve.MIXED:return e.MIXED_TABLE[r];case Ve.PUNCT:return e.PUNCT_TABLE[r];case Ve.DIGIT:return e.DIGIT_TABLE[r];default:throw new sa("Bad table")}},e.prototype.correctBits=function(t){var r,n;this.ddata.getNbLayers()<=2?(n=6,r=ct.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,r=ct.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,r=ct.AZTEC_DATA_10):(n=12,r=ct.AZTEC_DATA_12);var a=this.ddata.getNbDatablocks(),i=t.length/n;if(i<a)throw new H;for(var o=t.length%n,s=new Int32Array(i),l=0;l<i;l++,o+=n)s[l]=e.readCode(t,o,n);try{var d=new $i(r);d.decode(s,i-a)}catch(x){throw new H(x)}for(var u=(1<<n)-1,h=0,l=0;l<a;l++){var f=s[l];if(f===0||f===u)throw new H;(f===1||f===u-1)&&h++}for(var p=new Array(a*n-h),m=0,l=0;l<a;l++){var f=s[l];if(f===1||f===u-1)p.fill(f>1,m,m+n-1),m+=n-1;else for(var g=n-1;g>=0;--g)p[m++]=(f&1<<g)!==0}return p},e.prototype.extractBits=function(t){var r=this.ddata.isCompact(),n=this.ddata.getNbLayers(),a=(r?11:14)+n*4,i=new Int32Array(a),o=new Array(this.totalBitsInLayer(n,r));if(r)for(var s=0;s<i.length;s++)i[s]=s;else for(var l=a+1+2*le.truncDivision(le.truncDivision(a,2)-1,15),d=a/2,u=le.truncDivision(l,2),s=0;s<d;s++){var h=s+le.truncDivision(s,15);i[d-s-1]=u-h-1,i[d+s]=u+h+1}for(var s=0,f=0;s<n;s++){for(var p=(n-s)*4+(r?9:12),m=s*2,g=a-1-m,x=0;x<p;x++)for(var y=x*2,v=0;v<2;v++)o[f+y+v]=t.get(i[m+v],i[m+x]),o[f+2*p+y+v]=t.get(i[m+x],i[g-v]),o[f+4*p+y+v]=t.get(i[g-v],i[g-x]),o[f+6*p+y+v]=t.get(i[g-x],i[m+v]);f+=p*8}return o},e.readCode=function(t,r,n){for(var a=0,i=r;i<r+n;i++)a<<=1,t[i]&&(a|=1);return a},e.readByte=function(t,r){var n=t.length-r;return n>=8?e.readCode(t,r,8):e.readCode(t,r,n)<<8-n},e.convertBoolArrayToByteArray=function(t){for(var r=new Uint8Array((t.length+7)/8),n=0;n<r.length;n++)r[n]=e.readByte(t,8*n);return r},e.prototype.totalBitsInLayer=function(t,r){return((r?88:112)+16*t)*t},e.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],e.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],e.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],e.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],e.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],e})(),he=(function(){function e(){}return e.round=function(t){return isNaN(t)?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0},e.distance=function(t,r,n,a){var i=t-n,o=r-a;return Math.sqrt(i*i+o*o)},e.sum=function(t){for(var r=0,n=0,a=t.length;n!==a;n++){var i=t[n];r+=i}return r},e})(),ts=(function(){function e(){}return e.floatToIntBits=function(t){return t},e.MAX_VALUE=Number.MAX_SAFE_INTEGER,e})(),X=(function(){function e(t,r){this.x=t,this.y=r}return e.prototype.getX=function(){return this.x},e.prototype.getY=function(){return this.y},e.prototype.equals=function(t){if(t instanceof e){var r=t;return this.x===r.x&&this.y===r.y}return!1},e.prototype.hashCode=function(){return 31*ts.floatToIntBits(this.x)+ts.floatToIntBits(this.y)},e.prototype.toString=function(){return"("+this.x+","+this.y+")"},e.orderBestPatterns=function(t){var r=this.distance(t[0],t[1]),n=this.distance(t[1],t[2]),a=this.distance(t[0],t[2]),i,o,s;if(n>=r&&n>=a?(o=t[0],i=t[1],s=t[2]):a>=n&&a>=r?(o=t[1],i=t[0],s=t[2]):(o=t[2],i=t[0],s=t[1]),this.crossProductZ(i,o,s)<0){var l=i;i=s,s=l}t[0]=i,t[1]=o,t[2]=s},e.distance=function(t,r){return he.distance(t.x,t.y,r.x,r.y)},e.crossProductZ=function(t,r,n){var a=r.x,i=r.y;return(n.x-a)*(t.y-i)-(n.y-i)*(t.x-a)},e})(),Gs=(function(){function e(t,r){this.bits=t,this.points=r}return e.prototype.getBits=function(){return this.bits},e.prototype.getPoints=function(){return this.points},e})(),kg=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Eg=(function(e){kg(t,e);function t(r,n,a,i,o){var s=e.call(this,r,n)||this;return s.compact=a,s.nbDatablocks=i,s.nbLayers=o,s}return t.prototype.getNbLayers=function(){return this.nbLayers},t.prototype.getNbDatablocks=function(){return this.nbDatablocks},t.prototype.isCompact=function(){return this.compact},t})(Gs),rs=(function(){function e(t,r,n,a){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),r==null&&(r=e.INIT_SIZE),n==null&&(n=t.getWidth()/2|0),a==null&&(a=t.getHeight()/2|0);var i=r/2|0;if(this.leftInit=n-i,this.rightInit=n+i,this.upInit=a-i,this.downInit=a+i,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new D}return e.prototype.detect=function(){for(var t=this.leftInit,r=this.rightInit,n=this.upInit,a=this.downInit,i=!1,o=!0,s=!1,l=!1,d=!1,u=!1,h=!1,f=this.width,p=this.height;o;){o=!1;for(var m=!0;(m||!l)&&r<f;)m=this.containsBlackPoint(n,a,r,!1),m?(r++,o=!0,l=!0):l||r++;if(r>=f){i=!0;break}for(var g=!0;(g||!d)&&a<p;)g=this.containsBlackPoint(t,r,a,!0),g?(a++,o=!0,d=!0):d||a++;if(a>=p){i=!0;break}for(var x=!0;(x||!u)&&t>=0;)x=this.containsBlackPoint(n,a,t,!1),x?(t--,o=!0,u=!0):u||t--;if(t<0){i=!0;break}for(var y=!0;(y||!h)&&n>=0;)y=this.containsBlackPoint(t,r,n,!0),y?(n--,o=!0,h=!0):h||n--;if(n<0){i=!0;break}o&&(s=!0)}if(!i&&s){for(var v=r-t,w=null,S=1;w===null&&S<v;S++)w=this.getBlackPointOnSegment(t,a-S,t+S,a);if(w==null)throw new D;for(var C=null,S=1;C===null&&S<v;S++)C=this.getBlackPointOnSegment(t,n+S,t+S,n);if(C==null)throw new D;for(var k=null,S=1;k===null&&S<v;S++)k=this.getBlackPointOnSegment(r,n+S,r-S,n);if(k==null)throw new D;for(var A=null,S=1;A===null&&S<v;S++)A=this.getBlackPointOnSegment(r,a-S,r-S,a);if(A==null)throw new D;return this.centerEdges(A,w,k,C)}else throw new D},e.prototype.getBlackPointOnSegment=function(t,r,n,a){for(var i=he.round(he.distance(t,r,n,a)),o=(n-t)/i,s=(a-r)/i,l=this.image,d=0;d<i;d++){var u=he.round(t+d*o),h=he.round(r+d*s);if(l.get(u,h))return new X(u,h)}return null},e.prototype.centerEdges=function(t,r,n,a){var i=t.getX(),o=t.getY(),s=r.getX(),l=r.getY(),d=n.getX(),u=n.getY(),h=a.getX(),f=a.getY(),p=e.CORR;return i<this.width/2?[new X(h-p,f+p),new X(s+p,l+p),new X(d-p,u-p),new X(i+p,o-p)]:[new X(h+p,f+p),new X(s+p,l-p),new X(d-p,u+p),new X(i-p,o-p)]},e.prototype.containsBlackPoint=function(t,r,n,a){var i=this.image;if(a){for(var o=t;o<=r;o++)if(i.get(o,n))return!0}else for(var s=t;s<=r;s++)if(i.get(n,s))return!0;return!1},e.INIT_SIZE=10,e.CORR=1,e})(),dc=(function(){function e(){}return e.checkAndNudgePoints=function(t,r){for(var n=t.getWidth(),a=t.getHeight(),i=!0,o=0;o<r.length&&i;o+=2){var s=Math.floor(r[o]),l=Math.floor(r[o+1]);if(s<-1||s>n||l<-1||l>a)throw new D;i=!1,s===-1?(r[o]=0,i=!0):s===n&&(r[o]=n-1,i=!0),l===-1?(r[o+1]=0,i=!0):l===a&&(r[o+1]=a-1,i=!0)}i=!0;for(var o=r.length-2;o>=0&&i;o-=2){var s=Math.floor(r[o]),l=Math.floor(r[o+1]);if(s<-1||s>n||l<-1||l>a)throw new D;i=!1,s===-1?(r[o]=0,i=!0):s===n&&(r[o]=n-1,i=!0),l===-1?(r[o+1]=0,i=!0):l===a&&(r[o+1]=a-1,i=!0)}},e})(),Ah=(function(){function e(t,r,n,a,i,o,s,l,d){this.a11=t,this.a21=r,this.a31=n,this.a12=a,this.a22=i,this.a32=o,this.a13=s,this.a23=l,this.a33=d}return e.quadrilateralToQuadrilateral=function(t,r,n,a,i,o,s,l,d,u,h,f,p,m,g,x){var y=e.quadrilateralToSquare(t,r,n,a,i,o,s,l),v=e.squareToQuadrilateral(d,u,h,f,p,m,g,x);return v.times(y)},e.prototype.transformPoints=function(t){for(var r=t.length,n=this.a11,a=this.a12,i=this.a13,o=this.a21,s=this.a22,l=this.a23,d=this.a31,u=this.a32,h=this.a33,f=0;f<r;f+=2){var p=t[f],m=t[f+1],g=i*p+l*m+h;t[f]=(n*p+o*m+d)/g,t[f+1]=(a*p+s*m+u)/g}},e.prototype.transformPointsWithValues=function(t,r){for(var n=this.a11,a=this.a12,i=this.a13,o=this.a21,s=this.a22,l=this.a23,d=this.a31,u=this.a32,h=this.a33,f=t.length,p=0;p<f;p++){var m=t[p],g=r[p],x=i*m+l*g+h;t[p]=(n*m+o*g+d)/x,r[p]=(a*m+s*g+u)/x}},e.squareToQuadrilateral=function(t,r,n,a,i,o,s,l){var d=t-n+i-s,u=r-a+o-l;if(d===0&&u===0)return new e(n-t,i-n,t,a-r,o-a,r,0,0,1);var h=n-i,f=s-i,p=a-o,m=l-o,g=h*m-f*p,x=(d*m-f*u)/g,y=(h*u-d*p)/g;return new e(n-t+x*n,s-t+y*s,t,a-r+x*a,l-r+y*l,r,x,y,1)},e.quadrilateralToSquare=function(t,r,n,a,i,o,s,l){return e.squareToQuadrilateral(t,r,n,a,i,o,s,l).buildAdjoint()},e.prototype.buildAdjoint=function(){return new e(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},e.prototype.times=function(t){return new e(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)},e})(),Ng=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Tg=(function(e){Ng(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.sampleGrid=function(r,n,a,i,o,s,l,d,u,h,f,p,m,g,x,y,v,w,S){var C=Ah.quadrilateralToQuadrilateral(i,o,s,l,d,u,h,f,p,m,g,x,y,v,w,S);return this.sampleGridWithTransform(r,n,a,C)},t.prototype.sampleGridWithTransform=function(r,n,a,i){if(n<=0||a<=0)throw new D;for(var o=new Ht(n,a),s=new Float32Array(2*n),l=0;l<a;l++){for(var d=s.length,u=l+.5,h=0;h<d;h+=2)s[h]=h/2+.5,s[h+1]=u;i.transformPoints(s),dc.checkAndNudgePoints(r,s);try{for(var h=0;h<d;h+=2)r.get(Math.floor(s[h]),Math.floor(s[h+1]))&&o.set(h/2,l)}catch{throw new D}}return o},t})(dc),Vs=(function(){function e(){}return e.setGridSampler=function(t){e.gridSampler=t},e.getInstance=function(){return e.gridSampler},e.gridSampler=new Tg,e})(),ot=(function(){function e(t,r){this.x=t,this.y=r}return e.prototype.toResultPoint=function(){return new X(this.getX(),this.getY())},e.prototype.getX=function(){return this.x},e.prototype.getY=function(){return this.y},e})(),Ig=(function(){function e(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}return e.prototype.detect=function(){return this.detectMirror(!1)},e.prototype.detectMirror=function(t){var r=this.getMatrixCenter(),n=this.getBullsEyeCorners(r);if(t){var a=n[0];n[0]=n[2],n[2]=a}this.extractParameters(n);var i=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),o=this.getMatrixCornerPoints(n);return new Eg(i,o,this.compact,this.nbDataBlocks,this.nbLayers)},e.prototype.extractParameters=function(t){if(!this.isValidPoint(t[0])||!this.isValidPoint(t[1])||!this.isValidPoint(t[2])||!this.isValidPoint(t[3]))throw new D;var r=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(t[0],t[1],r),this.sampleLine(t[1],t[2],r),this.sampleLine(t[2],t[3],r),this.sampleLine(t[3],t[0],r)]);this.shift=this.getRotation(n,r);for(var a=0,i=0;i<4;i++){var o=n[(this.shift+i)%4];this.compact?(a<<=7,a+=o>>1&127):(a<<=10,a+=(o>>2&992)+(o>>1&31))}var s=this.getCorrectedParameterData(a,this.compact);this.compact?(this.nbLayers=(s>>6)+1,this.nbDataBlocks=(s&63)+1):(this.nbLayers=(s>>11)+1,this.nbDataBlocks=(s&2047)+1)},e.prototype.getRotation=function(t,r){var n=0;t.forEach(function(i,o,s){var l=(i>>r-2<<1)+(i&1);n=(n<<3)+l}),n=((n&1)<<11)+(n>>1);for(var a=0;a<4;a++)if(le.bitCount(n^this.EXPECTED_CORNER_BITS[a])<=2)return a;throw new D},e.prototype.getCorrectedParameterData=function(t,r){var n,a;r?(n=7,a=2):(n=10,a=4);for(var i=n-a,o=new Int32Array(n),s=n-1;s>=0;--s)o[s]=t&15,t>>=4;try{var l=new $i(ct.AZTEC_PARAM);l.decode(o,i)}catch{throw new D}for(var d=0,s=0;s<a;s++)d=(d<<4)+o[s];return d},e.prototype.getBullsEyeCorners=function(t){var r=t,n=t,a=t,i=t,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var s=this.getFirstDifferent(r,o,1,-1),l=this.getFirstDifferent(n,o,1,1),d=this.getFirstDifferent(a,o,-1,1),u=this.getFirstDifferent(i,o,-1,-1);if(this.nbCenterLayers>2){var h=this.distancePoint(u,s)*this.nbCenterLayers/(this.distancePoint(i,r)*(this.nbCenterLayers+2));if(h<.75||h>1.25||!this.isWhiteOrBlackRectangle(s,l,d,u))break}r=s,n=l,a=d,i=u,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new D;this.compact=this.nbCenterLayers===5;var f=new X(r.getX()+.5,r.getY()-.5),p=new X(n.getX()+.5,n.getY()+.5),m=new X(a.getX()-.5,a.getY()+.5),g=new X(i.getX()-.5,i.getY()-.5);return this.expandSquare([f,p,m,g],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},e.prototype.getMatrixCenter=function(){var t,r,n,a;try{var i=new rs(this.image).detect();t=i[0],r=i[1],n=i[2],a=i[3]}catch{var o=this.image.getWidth()/2,s=this.image.getHeight()/2;t=this.getFirstDifferent(new ot(o+7,s-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new ot(o+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new ot(o-7,s+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new ot(o-7,s-7),!1,-1,-1).toResultPoint()}var l=he.round((t.getX()+a.getX()+r.getX()+n.getX())/4),d=he.round((t.getY()+a.getY()+r.getY()+n.getY())/4);try{var i=new rs(this.image,15,l,d).detect();t=i[0],r=i[1],n=i[2],a=i[3]}catch{t=this.getFirstDifferent(new ot(l+7,d-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new ot(l+7,d+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new ot(l-7,d+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new ot(l-7,d-7),!1,-1,-1).toResultPoint()}return l=he.round((t.getX()+a.getX()+r.getX()+n.getX())/4),d=he.round((t.getY()+a.getY()+r.getY()+n.getY())/4),new ot(l,d)},e.prototype.getMatrixCornerPoints=function(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())},e.prototype.sampleGrid=function(t,r,n,a,i){var o=Vs.getInstance(),s=this.getDimension(),l=s/2-this.nbCenterLayers,d=s/2+this.nbCenterLayers;return o.sampleGrid(t,s,s,l,l,d,l,d,d,l,d,r.getX(),r.getY(),n.getX(),n.getY(),a.getX(),a.getY(),i.getX(),i.getY())},e.prototype.sampleLine=function(t,r,n){for(var a=0,i=this.distanceResultPoint(t,r),o=i/n,s=t.getX(),l=t.getY(),d=o*(r.getX()-t.getX())/i,u=o*(r.getY()-t.getY())/i,h=0;h<n;h++)this.image.get(he.round(s+h*d),he.round(l+h*u))&&(a|=1<<n-h-1);return a},e.prototype.isWhiteOrBlackRectangle=function(t,r,n,a){var i=3;t=new ot(t.getX()-i,t.getY()+i),r=new ot(r.getX()-i,r.getY()-i),n=new ot(n.getX()+i,n.getY()-i),a=new ot(a.getX()+i,a.getY()+i);var o=this.getColor(a,t);if(o===0)return!1;var s=this.getColor(t,r);return s!==o||(s=this.getColor(r,n),s!==o)?!1:(s=this.getColor(n,a),s===o)},e.prototype.getColor=function(t,r){for(var n=this.distancePoint(t,r),a=(r.getX()-t.getX())/n,i=(r.getY()-t.getY())/n,o=0,s=t.getX(),l=t.getY(),d=this.image.get(t.getX(),t.getY()),u=Math.ceil(n),h=0;h<u;h++)s+=a,l+=i,this.image.get(he.round(s),he.round(l))!==d&&o++;var f=o/n;return f>.1&&f<.9?0:f<=.1===d?1:-1},e.prototype.getFirstDifferent=function(t,r,n,a){for(var i=t.getX()+n,o=t.getY()+a;this.isValid(i,o)&&this.image.get(i,o)===r;)i+=n,o+=a;for(i-=n,o-=a;this.isValid(i,o)&&this.image.get(i,o)===r;)i+=n;for(i-=n;this.isValid(i,o)&&this.image.get(i,o)===r;)o+=a;return o-=a,new ot(i,o)},e.prototype.expandSquare=function(t,r,n){var a=n/(2*r),i=t[0].getX()-t[2].getX(),o=t[0].getY()-t[2].getY(),s=(t[0].getX()+t[2].getX())/2,l=(t[0].getY()+t[2].getY())/2,d=new X(s+a*i,l+a*o),u=new X(s-a*i,l-a*o);i=t[1].getX()-t[3].getX(),o=t[1].getY()-t[3].getY(),s=(t[1].getX()+t[3].getX())/2,l=(t[1].getY()+t[3].getY())/2;var h=new X(s+a*i,l+a*o),f=new X(s-a*i,l-a*o),p=[d,h,u,f];return p},e.prototype.isValid=function(t,r){return t>=0&&t<this.image.getWidth()&&r>0&&r<this.image.getHeight()},e.prototype.isValidPoint=function(t){var r=he.round(t.getX()),n=he.round(t.getY());return this.isValid(r,n)},e.prototype.distancePoint=function(t,r){return he.distance(t.getX(),t.getY(),r.getX(),r.getY())},e.prototype.distanceResultPoint=function(t,r){return he.distance(t.getX(),t.getY(),r.getX(),r.getY())},e.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(le.truncDivision(this.nbLayers-4,8)+1)+15},e})(),Ja=(function(){function e(){}return e.prototype.decode=function(t,r){r===void 0&&(r=null);var n=null,a=new Ig(t.getBlackMatrix()),i=null,o=null;try{var s=a.detectMirror(!1);i=s.getPoints(),this.reportFoundResultPoints(r,i),o=new cc().decode(s)}catch(h){n=h}if(o==null)try{var s=a.detectMirror(!0);i=s.getPoints(),this.reportFoundResultPoints(r,i),o=new cc().decode(s)}catch(h){throw n??h}var l=new Qe(o.getText(),o.getRawBytes(),o.getNumBits(),i,W.AZTEC,_e.currentTimeMillis()),d=o.getByteSegments();d!=null&&l.putMetadata(We.BYTE_SEGMENTS,d);var u=o.getECLevel();return u!=null&&l.putMetadata(We.ERROR_CORRECTION_LEVEL,u),l},e.prototype.reportFoundResultPoints=function(t,r){if(t!=null){var n=t.get(we.NEED_RESULT_POINT_CALLBACK);n!=null&&r.forEach(function(a,i,o){n.foundPossibleResultPoint(a)})}},e.prototype.reset=function(){},e})(),Og=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(e){Og(t,e);function t(r){return r===void 0&&(r=500),e.call(this,new Ja,r)||this}return t})(pn);var Ue=(function(){function e(){}return e.prototype.decode=function(t,r){try{return this.doDecode(t,r)}catch{var n=r&&r.get(we.TRY_HARDER)===!0;if(n&&t.isRotateSupported()){var a=t.rotateCounterClockwise(),i=this.doDecode(a,r),o=i.getResultMetadata(),s=270;o!==null&&o.get(We.ORIENTATION)===!0&&(s=s+o.get(We.ORIENTATION)%360),i.putMetadata(We.ORIENTATION,s);var l=i.getResultPoints();if(l!==null)for(var d=a.getHeight(),u=0;u<l.length;u++)l[u]=new X(d-l[u].getY()-1,l[u].getX());return i}else throw new D}},e.prototype.reset=function(){},e.prototype.doDecode=function(t,r){var n=t.getWidth(),a=t.getHeight(),i=new Ge(n),o=r&&r.get(we.TRY_HARDER)===!0,s=Math.max(1,a>>(o?8:5)),l;o?l=a:l=15;for(var d=Math.trunc(a/2),u=0;u<l;u++){var h=Math.trunc((u+1)/2),f=(u&1)===0,p=d+s*(f?h:-h);if(p<0||p>=a)break;try{i=t.getBlackRow(p,i)}catch{continue}for(var m=function(v){if(v===1&&(i.reverse(),r&&r.get(we.NEED_RESULT_POINT_CALLBACK)===!0)){var w=new Map;r.forEach(function(k,A){return w.set(A,k)}),w.delete(we.NEED_RESULT_POINT_CALLBACK),r=w}try{var S=g.decodeRow(p,i,r);if(v===1){S.putMetadata(We.ORIENTATION,180);var C=S.getResultPoints();C!==null&&(C[0]=new X(n-C[0].getX()-1,C[0].getY()),C[1]=new X(n-C[1].getX()-1,C[1].getY()))}return{value:S}}catch{}},g=this,x=0;x<2;x++){var y=m(x);if(typeof y=="object")return y.value}}throw new D},e.recordPattern=function(t,r,n){for(var a=n.length,i=0;i<a;i++)n[i]=0;var o=t.getSize();if(r>=o)throw new D;for(var s=!t.get(r),l=0,d=r;d<o;){if(t.get(d)!==s)n[l]++;else{if(++l===a)break;n[l]=1,s=!s}d++}if(!(l===a||l===a-1&&d===o))throw new D},e.recordPatternInReverse=function(t,r,n){for(var a=n.length,i=t.get(r);r>0&&a>=0;)t.get(--r)!==i&&(a--,i=!i);if(a>=0)throw new D;e.recordPattern(t,r+1,n)},e.patternMatchVariance=function(t,r,n){for(var a=t.length,i=0,o=0,s=0;s<a;s++)i+=t[s],o+=r[s];if(i<o)return Number.POSITIVE_INFINITY;var l=i/o;n*=l;for(var d=0,u=0;u<a;u++){var h=t[u],f=r[u]*l,p=h>f?h-f:f-h;if(p>n)return Number.POSITIVE_INFINITY;d+=p}return d/i},e})(),Bg=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),uc=(function(e){Bg(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.findStartPattern=function(r){for(var n=r.getSize(),a=r.getNextSet(0),i=0,o=Int32Array.from([0,0,0,0,0,0]),s=a,l=!1,d=6,u=a;u<n;u++)if(r.get(u)!==l)o[i]++;else{if(i===d-1){for(var h=t.MAX_AVG_VARIANCE,f=-1,p=t.CODE_START_A;p<=t.CODE_START_C;p++){var m=Ue.patternMatchVariance(o,t.CODE_PATTERNS[p],t.MAX_INDIVIDUAL_VARIANCE);m<h&&(h=m,f=p)}if(f>=0&&r.isRange(Math.max(0,s-(u-s)/2),s,!1))return Int32Array.from([s,u,f]);s+=o[0]+o[1],o=o.slice(2,o.length),o[i-1]=0,o[i]=0,i--}else i++;o[i]=1,l=!l}throw new D},t.decodeCode=function(r,n,a){Ue.recordPattern(r,a,n);for(var i=t.MAX_AVG_VARIANCE,o=-1,s=0;s<t.CODE_PATTERNS.length;s++){var l=t.CODE_PATTERNS[s],d=this.patternMatchVariance(n,l,t.MAX_INDIVIDUAL_VARIANCE);d<i&&(i=d,o=s)}if(o>=0)return o;throw new D},t.prototype.decodeRow=function(r,n,a){var i=a&&a.get(we.ASSUME_GS1)===!0,o=t.findStartPattern(n),s=o[2],l=0,d=new Uint8Array(20);d[l++]=s;var u;switch(s){case t.CODE_START_A:u=t.CODE_CODE_A;break;case t.CODE_START_B:u=t.CODE_CODE_B;break;case t.CODE_START_C:u=t.CODE_CODE_C;break;default:throw new H}for(var h=!1,f=!1,p="",m=o[0],g=o[1],x=Int32Array.from([0,0,0,0,0,0]),y=0,v=0,w=s,S=0,C=!0,k=!1,A=!1;!h;){var N=f;switch(f=!1,y=v,v=t.decodeCode(n,x,g),d[l++]=v,v!==t.CODE_STOP&&(C=!0),v!==t.CODE_STOP&&(S++,w+=S*v),m=g,g+=x.reduce(function(U,$){return U+$},0),v){case t.CODE_START_A:case t.CODE_START_B:case t.CODE_START_C:throw new H}switch(u){case t.CODE_CODE_A:if(v<64)A===k?p+=String.fromCharCode(32+v):p+=String.fromCharCode(32+v+128),A=!1;else if(v<96)A===k?p+=String.fromCharCode(v-64):p+=String.fromCharCode(v+64),A=!1;else switch(v!==t.CODE_STOP&&(C=!1),v){case t.CODE_FNC_1:i&&(p.length===0?p+="]C1":p+="");break;case t.CODE_FNC_2:case t.CODE_FNC_3:break;case t.CODE_FNC_4_A:!k&&A?(k=!0,A=!1):k&&A?(k=!1,A=!1):A=!0;break;case t.CODE_SHIFT:f=!0,u=t.CODE_CODE_B;break;case t.CODE_CODE_B:u=t.CODE_CODE_B;break;case t.CODE_CODE_C:u=t.CODE_CODE_C;break;case t.CODE_STOP:h=!0;break}break;case t.CODE_CODE_B:if(v<96)A===k?p+=String.fromCharCode(32+v):p+=String.fromCharCode(32+v+128),A=!1;else switch(v!==t.CODE_STOP&&(C=!1),v){case t.CODE_FNC_1:i&&(p.length===0?p+="]C1":p+="");break;case t.CODE_FNC_2:case t.CODE_FNC_3:break;case t.CODE_FNC_4_B:!k&&A?(k=!0,A=!1):k&&A?(k=!1,A=!1):A=!0;break;case t.CODE_SHIFT:f=!0,u=t.CODE_CODE_A;break;case t.CODE_CODE_A:u=t.CODE_CODE_A;break;case t.CODE_CODE_C:u=t.CODE_CODE_C;break;case t.CODE_STOP:h=!0;break}break;case t.CODE_CODE_C:if(v<100)v<10&&(p+="0"),p+=v;else switch(v!==t.CODE_STOP&&(C=!1),v){case t.CODE_FNC_1:i&&(p.length===0?p+="]C1":p+="");break;case t.CODE_CODE_A:u=t.CODE_CODE_A;break;case t.CODE_CODE_B:u=t.CODE_CODE_B;break;case t.CODE_STOP:h=!0;break}break}N&&(u=u===t.CODE_CODE_A?t.CODE_CODE_B:t.CODE_CODE_A)}var B=g-m;if(g=n.getNextUnset(g),!n.isRange(g,Math.min(n.getSize(),g+(g-m)/2),!1))throw new D;if(w-=S*y,w%103!==y)throw new De;var E=p.length;if(E===0)throw new D;E>0&&C&&(u===t.CODE_CODE_C?p=p.substring(0,E-2):p=p.substring(0,E-1));for(var I=(o[1]+o[0])/2,F=m+B/2,V=d.length,M=new Uint8Array(V),L=0;L<V;L++)M[L]=d[L];var R=[new X(I,r),new X(F,r)];return new Qe(p,M,0,R,W.CODE_128,new Date().getTime())},t.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],t.MAX_AVG_VARIANCE=.25,t.MAX_INDIVIDUAL_VARIANCE=.7,t.CODE_SHIFT=98,t.CODE_CODE_C=99,t.CODE_CODE_B=100,t.CODE_CODE_A=101,t.CODE_FNC_1=102,t.CODE_FNC_2=97,t.CODE_FNC_3=96,t.CODE_FNC_4_A=101,t.CODE_FNC_4_B=100,t.CODE_START_A=103,t.CODE_START_B=104,t.CODE_START_C=105,t.CODE_STOP=106,t})(Ue),jg=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),mo=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},hc=(function(e){jg(t,e);function t(r,n){r===void 0&&(r=!1),n===void 0&&(n=!1);var a=e.call(this)||this;return a.usingCheckDigit=r,a.extendedMode=n,a.decodeRowResult="",a.counters=new Int32Array(9),a}return t.prototype.decodeRow=function(r,n,a){var i,o,s,l,d=this.counters;d.fill(0),this.decodeRowResult="";var u=t.findAsteriskPattern(n,d),h=n.getNextSet(u[1]),f=n.getSize(),p,m;do{t.recordPattern(n,h,d);var g=t.toNarrowWidePattern(d);if(g<0)throw new D;p=t.patternToChar(g),this.decodeRowResult+=p,m=h;try{for(var x=(i=void 0,mo(d)),y=x.next();!y.done;y=x.next()){var v=y.value;h+=v}}catch(V){i={error:V}}finally{try{y&&!y.done&&(o=x.return)&&o.call(x)}finally{if(i)throw i.error}}h=n.getNextSet(h)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var w=0;try{for(var S=mo(d),C=S.next();!C.done;C=S.next()){var v=C.value;w+=v}}catch(V){s={error:V}}finally{try{C&&!C.done&&(l=S.return)&&l.call(S)}finally{if(s)throw s.error}}var k=h-m-w;if(h!==f&&k*2<w)throw new D;if(this.usingCheckDigit){for(var A=this.decodeRowResult.length-1,N=0,B=0;B<A;B++)N+=t.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(B));if(this.decodeRowResult.charAt(A)!==t.ALPHABET_STRING.charAt(N%43))throw new De;this.decodeRowResult=this.decodeRowResult.substring(0,A)}if(this.decodeRowResult.length===0)throw new D;var E;this.extendedMode?E=t.decodeExtended(this.decodeRowResult):E=this.decodeRowResult;var I=(u[1]+u[0])/2,F=m+w/2;return new Qe(E,null,0,[new X(I,r),new X(F,r)],W.CODE_39,new Date().getTime())},t.findAsteriskPattern=function(r,n){for(var a=r.getSize(),i=r.getNextSet(0),o=0,s=i,l=!1,d=n.length,u=i;u<a;u++)if(r.get(u)!==l)n[o]++;else{if(o===d-1){if(this.toNarrowWidePattern(n)===t.ASTERISK_ENCODING&&r.isRange(Math.max(0,s-Math.floor((u-s)/2)),s,!1))return[s,u];s+=n[0]+n[1],n.copyWithin(0,2,2+o-1),n[o-1]=0,n[o]=0,o--}else o++;n[o]=1,l=!l}throw new D},t.toNarrowWidePattern=function(r){var n,a,i=r.length,o=0,s;do{var l=2147483647;try{for(var d=(n=void 0,mo(r)),u=d.next();!u.done;u=d.next()){var h=u.value;h<l&&h>o&&(l=h)}}catch(g){n={error:g}}finally{try{u&&!u.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}o=l,s=0;for(var f=0,p=0,m=0;m<i;m++){var h=r[m];h>o&&(p|=1<<i-1-m,s++,f+=h)}if(s===3){for(var m=0;m<i&&s>0;m++){var h=r[m];if(h>o&&(s--,h*2>=f))return-1}return p}}while(s>3);return-1},t.patternToChar=function(r){for(var n=0;n<t.CHARACTER_ENCODINGS.length;n++)if(t.CHARACTER_ENCODINGS[n]===r)return t.ALPHABET_STRING.charAt(n);if(r===t.ASTERISK_ENCODING)return"*";throw new D},t.decodeExtended=function(r){for(var n=r.length,a="",i=0;i<n;i++){var o=r.charAt(i);if(o==="+"||o==="$"||o==="%"||o==="/"){var s=r.charAt(i+1),l="\0";switch(o){case"+":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)+32);else throw new H;break;case"$":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)-64);else throw new H;break;case"%":if(s>="A"&&s<="E")l=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")l=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")l=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")l="\0";else if(s==="V")l="@";else if(s==="W")l="`";else if(s==="X"||s==="Y"||s==="Z")l="";else throw new H;break;case"/":if(s>="A"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")l=":";else throw new H;break}a+=l,i++}else a+=o}return a},t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",t.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],t.ASTERISK_ENCODING=148,t})(Ue),Dg=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),go=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},fc=(function(e){Dg(t,e);function t(){var r=e.call(this)||this;return r.decodeRowResult="",r.counters=new Int32Array(6),r}return t.prototype.decodeRow=function(r,n,a){var i,o,s,l,d=this.findAsteriskPattern(n),u=n.getNextSet(d[1]),h=n.getSize(),f=this.counters;f.fill(0),this.decodeRowResult="";var p,m;do{t.recordPattern(n,u,f);var g=this.toPattern(f);if(g<0)throw new D;p=this.patternToChar(g),this.decodeRowResult+=p,m=u;try{for(var x=(i=void 0,go(f)),y=x.next();!y.done;y=x.next()){var v=y.value;u+=v}}catch(B){i={error:B}}finally{try{y&&!y.done&&(o=x.return)&&o.call(x)}finally{if(i)throw i.error}}u=n.getNextSet(u)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var w=0;try{for(var S=go(f),C=S.next();!C.done;C=S.next()){var v=C.value;w+=v}}catch(B){s={error:B}}finally{try{C&&!C.done&&(l=S.return)&&l.call(S)}finally{if(s)throw s.error}}if(u===h||!n.get(u))throw new D;if(this.decodeRowResult.length<2)throw new D;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var k=this.decodeExtended(this.decodeRowResult),A=(d[1]+d[0])/2,N=m+w/2;return new Qe(k,null,0,[new X(A,r),new X(N,r)],W.CODE_93,new Date().getTime())},t.prototype.findAsteriskPattern=function(r){var n=r.getSize(),a=r.getNextSet(0);this.counters.fill(0);for(var i=this.counters,o=a,s=!1,l=i.length,d=0,u=a;u<n;u++)if(r.get(u)!==s)i[d]++;else{if(d===l-1){if(this.toPattern(i)===t.ASTERISK_ENCODING)return new Int32Array([o,u]);o+=i[0]+i[1],i.copyWithin(0,2,2+d-1),i[d-1]=0,i[d]=0,d--}else d++;i[d]=1,s=!s}throw new D},t.prototype.toPattern=function(r){var n,a,i=0;try{for(var o=go(r),s=o.next();!s.done;s=o.next()){var l=s.value;i+=l}}catch(m){n={error:m}}finally{try{s&&!s.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}for(var d=0,u=r.length,h=0;h<u;h++){var f=Math.round(r[h]*9/i);if(f<1||f>4)return-1;if((h&1)===0)for(var p=0;p<f;p++)d=d<<1|1;else d<<=f}return d},t.prototype.patternToChar=function(r){for(var n=0;n<t.CHARACTER_ENCODINGS.length;n++)if(t.CHARACTER_ENCODINGS[n]===r)return t.ALPHABET_STRING.charAt(n);throw new D},t.prototype.decodeExtended=function(r){for(var n=r.length,a="",i=0;i<n;i++){var o=r.charAt(i);if(o>="a"&&o<="d"){if(i>=n-1)throw new H;var s=r.charAt(i+1),l="\0";switch(o){case"d":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)+32);else throw new H;break;case"a":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)-64);else throw new H;break;case"b":if(s>="A"&&s<="E")l=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")l=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")l=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")l="\0";else if(s==="V")l="@";else if(s==="W")l="`";else if(s>="X"&&s<="Z")l="";else throw new H;break;case"c":if(s>="A"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")l=":";else throw new H;break}a+=l,i++}else a+=o}return a},t.prototype.checkChecksums=function(r){var n=r.length;this.checkOneChecksum(r,n-2,20),this.checkOneChecksum(r,n-1,15)},t.prototype.checkOneChecksum=function(r,n,a){for(var i=1,o=0,s=n-1;s>=0;s--)o+=i*t.ALPHABET_STRING.indexOf(r.charAt(s)),++i>a&&(i=1);if(r.charAt(n)!==t.ALPHABET_STRING[o%47])throw new De},t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",t.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],t.ASTERISK_ENCODING=t.CHARACTER_ENCODINGS[47],t})(Ue),Rg=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Lg=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},pc=(function(e){Rg(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.narrowLineWidth=-1,r}return t.prototype.decodeRow=function(r,n,a){var i,o,s=this.decodeStart(n),l=this.decodeEnd(n),d=new se;t.decodeMiddle(n,s[1],l[0],d);var u=d.toString(),h=null;a!=null&&(h=a.get(we.ALLOWED_LENGTHS)),h==null&&(h=t.DEFAULT_ALLOWED_LENGTHS);var f=u.length,p=!1,m=0;try{for(var g=Lg(h),x=g.next();!x.done;x=g.next()){var y=x.value;if(f===y){p=!0;break}y>m&&(m=y)}}catch(S){i={error:S}}finally{try{x&&!x.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}if(!p&&f>m&&(p=!0),!p)throw new H;var v=[new X(s[1],r),new X(l[0],r)],w=new Qe(u,null,0,v,W.ITF,new Date().getTime());return w},t.decodeMiddle=function(r,n,a,i){var o=new Int32Array(10),s=new Int32Array(5),l=new Int32Array(5);for(o.fill(0),s.fill(0),l.fill(0);n<a;){Ue.recordPattern(r,n,o);for(var d=0;d<5;d++){var u=2*d;s[d]=o[u],l[d]=o[u+1]}var h=t.decodeDigit(s);i.append(h.toString()),h=this.decodeDigit(l),i.append(h.toString()),o.forEach(function(f){n+=f})}},t.prototype.decodeStart=function(r){var n=t.skipWhiteSpace(r),a=t.findGuardPattern(r,n,t.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(r,a[0]),a},t.prototype.validateQuietZone=function(r,n){var a=this.narrowLineWidth*10;a=a<n?a:n;for(var i=n-1;a>0&&i>=0&&!r.get(i);i--)a--;if(a!==0)throw new D},t.skipWhiteSpace=function(r){var n=r.getSize(),a=r.getNextSet(0);if(a===n)throw new D;return a},t.prototype.decodeEnd=function(r){r.reverse();try{var n=t.skipWhiteSpace(r),a=void 0;try{a=t.findGuardPattern(r,n,t.END_PATTERN_REVERSED[0])}catch(o){o instanceof D&&(a=t.findGuardPattern(r,n,t.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,a[0]);var i=a[0];return a[0]=r.getSize()-a[1],a[1]=r.getSize()-i,a}finally{r.reverse()}},t.findGuardPattern=function(r,n,a){var i=a.length,o=new Int32Array(i),s=r.getSize(),l=!1,d=0,u=n;o.fill(0);for(var h=n;h<s;h++)if(r.get(h)!==l)o[d]++;else{if(d===i-1){if(Ue.patternMatchVariance(o,a,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return[u,h];u+=o[0]+o[1],_e.arraycopy(o,2,o,0,d-1),o[d-1]=0,o[d]=0,d--}else d++;o[d]=1,l=!l}throw new D},t.decodeDigit=function(r){for(var n=t.MAX_AVG_VARIANCE,a=-1,i=t.PATTERNS.length,o=0;o<i;o++){var s=t.PATTERNS[o],l=Ue.patternMatchVariance(r,s,t.MAX_INDIVIDUAL_VARIANCE);l<n?(n=l,a=o):l===n&&(a=-1)}if(a>=0)return a%10;throw new D},t.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],t.MAX_AVG_VARIANCE=.38,t.MAX_INDIVIDUAL_VARIANCE=.5,t.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],t.START_PATTERN=Int32Array.from([1,1,1,1]),t.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],t})(Ue),Mg=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Qr=(function(e){Mg(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.decodeRowStringBuffer="",r}return t.findStartGuardPattern=function(r){for(var n=!1,a,i=0,o=Int32Array.from([0,0,0]);!n;){o=Int32Array.from([0,0,0]),a=t.findGuardPattern(r,i,!1,this.START_END_PATTERN,o);var s=a[0];i=a[1];var l=s-(i-s);l>=0&&(n=r.isRange(l,s,!1))}return a},t.checkChecksum=function(r){return t.checkStandardUPCEANChecksum(r)},t.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var a=parseInt(r.charAt(n-1),10);return t.getStandardUPCEANChecksum(r.substring(0,n-1))===a},t.getStandardUPCEANChecksum=function(r){for(var n=r.length,a=0,i=n-1;i>=0;i-=2){var o=r.charAt(i).charCodeAt(0)-48;if(o<0||o>9)throw new H;a+=o}a*=3;for(var i=n-2;i>=0;i-=2){var o=r.charAt(i).charCodeAt(0)-48;if(o<0||o>9)throw new H;a+=o}return(1e3-a)%10},t.decodeEnd=function(r,n){return t.findGuardPattern(r,n,!1,t.START_END_PATTERN,new Int32Array(t.START_END_PATTERN.length).fill(0))},t.findGuardPatternWithoutCounters=function(r,n,a,i){return this.findGuardPattern(r,n,a,i,new Int32Array(i.length))},t.findGuardPattern=function(r,n,a,i,o){var s=r.getSize();n=a?r.getNextUnset(n):r.getNextSet(n);for(var l=0,d=n,u=i.length,h=a,f=n;f<s;f++)if(r.get(f)!==h)o[l]++;else{if(l===u-1){if(Ue.patternMatchVariance(o,i,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return Int32Array.from([d,f]);d+=o[0]+o[1];for(var p=o.slice(2,o.length),m=0;m<l-1;m++)o[m]=p[m];o[l-1]=0,o[l]=0,l--}else l++;o[l]=1,h=!h}throw new D},t.decodeDigit=function(r,n,a,i){this.recordPattern(r,a,n);for(var o=this.MAX_AVG_VARIANCE,s=-1,l=i.length,d=0;d<l;d++){var u=i[d],h=Ue.patternMatchVariance(n,u,t.MAX_INDIVIDUAL_VARIANCE);h<o&&(o=h,s=d)}if(s>=0)return s;throw new D},t.MAX_AVG_VARIANCE=.48,t.MAX_INDIVIDUAL_VARIANCE=.7,t.START_END_PATTERN=Int32Array.from([1,1,1]),t.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),t.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),t.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],t})(Ue),Pg=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Fg=(function(){function e(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return e.prototype.decodeRow=function(t,r,n){var a=this.decodeRowStringBuffer,i=this.decodeMiddle(r,n,a),o=a.toString(),s=e.parseExtensionString(o),l=[new X((n[0]+n[1])/2,t),new X(i,t)],d=new Qe(o,null,0,l,W.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&d.putAllMetadata(s),d},e.prototype.decodeMiddle=function(t,r,n){var a,i,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var s=t.getSize(),l=r[1],d=0,u=0;u<5&&l<s;u++){var h=Qr.decodeDigit(t,o,l,Qr.L_AND_G_PATTERNS);n+=String.fromCharCode(48+h%10);try{for(var f=(a=void 0,Pg(o)),p=f.next();!p.done;p=f.next()){var m=p.value;l+=m}}catch(x){a={error:x}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(a)throw a.error}}h>=10&&(d|=1<<4-u),u!==4&&(l=t.getNextSet(l),l=t.getNextUnset(l))}if(n.length!==5)throw new D;var g=this.determineCheckDigit(d);if(e.extensionChecksum(n.toString())!==g)throw new D;return l},e.extensionChecksum=function(t){for(var r=t.length,n=0,a=r-2;a>=0;a-=2)n+=t.charAt(a).charCodeAt(0)-48;n*=3;for(var a=r-1;a>=0;a-=2)n+=t.charAt(a).charCodeAt(0)-48;return n*=3,n%10},e.prototype.determineCheckDigit=function(t){for(var r=0;r<10;r++)if(t===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new D},e.parseExtensionString=function(t){if(t.length!==5)return null;var r=e.parseExtension5String(t);return r==null?null:new Map([[We.SUGGESTED_PRICE,r]])},e.parseExtension5String=function(t){var r;switch(t.charAt(0)){case"0":r="Â£";break;case"5":r="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}var n=parseInt(t.substring(1)),a=(n/100).toString(),i=n%100,o=i<10?"0"+i:i.toString();return r+a+"."+o},e})(),$g=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ug=(function(){function e(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return e.prototype.decodeRow=function(t,r,n){var a=this.decodeRowStringBuffer,i=this.decodeMiddle(r,n,a),o=a.toString(),s=e.parseExtensionString(o),l=[new X((n[0]+n[1])/2,t),new X(i,t)],d=new Qe(o,null,0,l,W.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&d.putAllMetadata(s),d},e.prototype.decodeMiddle=function(t,r,n){var a,i,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var s=t.getSize(),l=r[1],d=0,u=0;u<2&&l<s;u++){var h=Qr.decodeDigit(t,o,l,Qr.L_AND_G_PATTERNS);n+=String.fromCharCode(48+h%10);try{for(var f=(a=void 0,$g(o)),p=f.next();!p.done;p=f.next()){var m=p.value;l+=m}}catch(g){a={error:g}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(a)throw a.error}}h>=10&&(d|=1<<1-u),u!==1&&(l=t.getNextSet(l),l=t.getNextUnset(l))}if(n.length!==2)throw new D;if(parseInt(n.toString())%4!==d)throw new D;return l},e.parseExtensionString=function(t){return t.length!==2?null:new Map([[We.ISSUE_NUMBER,parseInt(t)]])},e})(),zg=(function(){function e(){}return e.decodeRow=function(t,r,n){var a=Qr.findGuardPattern(r,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var i=new Fg;return i.decodeRow(t,r,a)}catch{var o=new Ug;return o.decodeRow(t,r,a)}},e.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),e})(),Hg=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Pe=(function(e){Hg(t,e);function t(){var r=e.call(this)||this;r.decodeRowStringBuffer="",t.L_AND_G_PATTERNS=t.L_PATTERNS.map(function(s){return Int32Array.from(s)});for(var n=10;n<20;n++){for(var a=t.L_PATTERNS[n-10],i=new Int32Array(a.length),o=0;o<a.length;o++)i[o]=a[a.length-o-1];t.L_AND_G_PATTERNS[n]=i}return r}return t.prototype.decodeRow=function(r,n,a){var i=t.findStartGuardPattern(n),o=a==null?null:a.get(we.NEED_RESULT_POINT_CALLBACK);if(o!=null){var s=new X((i[0]+i[1])/2,r);o.foundPossibleResultPoint(s)}var l=this.decodeMiddle(n,i,this.decodeRowStringBuffer),d=l.rowOffset,u=l.resultString;if(o!=null){var h=new X(d,r);o.foundPossibleResultPoint(h)}var f=t.decodeEnd(n,d);if(o!=null){var p=new X((f[0]+f[1])/2,r);o.foundPossibleResultPoint(p)}var m=f[1],g=m+(m-f[0]);if(g>=n.getSize()||!n.isRange(m,g,!1))throw new D;var x=u.toString();if(x.length<8)throw new H;if(!t.checkChecksum(x))throw new De;var y=(i[1]+i[0])/2,v=(f[1]+f[0])/2,w=this.getBarcodeFormat(),S=[new X(y,r),new X(v,r)],C=new Qe(x,null,0,S,w,new Date().getTime()),k=0;try{var A=zg.decodeRow(r,n,f[1]);C.putMetadata(We.UPC_EAN_EXTENSION,A.getText()),C.putAllMetadata(A.getResultMetadata()),C.addResultPoints(A.getResultPoints()),k=A.getText().length}catch{}var N=a==null?null:a.get(we.ALLOWED_EAN_EXTENSIONS);if(N!=null){var B=!1;for(var E in N)if(k.toString()===E){B=!0;break}if(!B)throw new D}return w===W.EAN_13||W.UPC_A,C},t.checkChecksum=function(r){return t.checkStandardUPCEANChecksum(r)},t.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var a=parseInt(r.charAt(n-1),10);return t.getStandardUPCEANChecksum(r.substring(0,n-1))===a},t.getStandardUPCEANChecksum=function(r){for(var n=r.length,a=0,i=n-1;i>=0;i-=2){var o=r.charAt(i).charCodeAt(0)-48;if(o<0||o>9)throw new H;a+=o}a*=3;for(var i=n-2;i>=0;i-=2){var o=r.charAt(i).charCodeAt(0)-48;if(o<0||o>9)throw new H;a+=o}return(1e3-a)%10},t.decodeEnd=function(r,n){return t.findGuardPattern(r,n,!1,t.START_END_PATTERN,new Int32Array(t.START_END_PATTERN.length).fill(0))},t})(Qr),Gg=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),mc=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ns=(function(e){Gg(t,e);function t(){var r=e.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return t.prototype.decodeMiddle=function(r,n,a){var i,o,s,l,d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;for(var u=r.getSize(),h=n[1],f=0,p=0;p<6&&h<u;p++){var m=Pe.decodeDigit(r,d,h,Pe.L_AND_G_PATTERNS);a+=String.fromCharCode(48+m%10);try{for(var g=(i=void 0,mc(d)),x=g.next();!x.done;x=g.next()){var y=x.value;h+=y}}catch(C){i={error:C}}finally{try{x&&!x.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}m>=10&&(f|=1<<5-p)}a=t.determineFirstDigit(a,f);var v=Pe.findGuardPattern(r,h,!0,Pe.MIDDLE_PATTERN,new Int32Array(Pe.MIDDLE_PATTERN.length).fill(0));h=v[1];for(var p=0;p<6&&h<u;p++){var m=Pe.decodeDigit(r,d,h,Pe.L_PATTERNS);a+=String.fromCharCode(48+m);try{for(var w=(s=void 0,mc(d)),S=w.next();!S.done;S=w.next()){var y=S.value;h+=y}}catch(A){s={error:A}}finally{try{S&&!S.done&&(l=w.return)&&l.call(w)}finally{if(s)throw s.error}}}return{rowOffset:h,resultString:a}},t.prototype.getBarcodeFormat=function(){return W.EAN_13},t.determineFirstDigit=function(r,n){for(var a=0;a<10;a++)if(n===this.FIRST_DIGIT_ENCODINGS[a])return r=String.fromCharCode(48+a)+r,r;throw new D},t.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],t})(Pe),Vg=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),gc=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},xc=(function(e){Vg(t,e);function t(){var r=e.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return t.prototype.decodeMiddle=function(r,n,a){var i,o,s,l,d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;for(var u=r.getSize(),h=n[1],f=0;f<4&&h<u;f++){var p=Pe.decodeDigit(r,d,h,Pe.L_PATTERNS);a+=String.fromCharCode(48+p);try{for(var m=(i=void 0,gc(d)),g=m.next();!g.done;g=m.next()){var x=g.value;h+=x}}catch(S){i={error:S}}finally{try{g&&!g.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}}var y=Pe.findGuardPattern(r,h,!0,Pe.MIDDLE_PATTERN,new Int32Array(Pe.MIDDLE_PATTERN.length).fill(0));h=y[1];for(var f=0;f<4&&h<u;f++){var p=Pe.decodeDigit(r,d,h,Pe.L_PATTERNS);a+=String.fromCharCode(48+p);try{for(var v=(s=void 0,gc(d)),w=v.next();!w.done;w=v.next()){var x=w.value;h+=x}}catch(k){s={error:k}}finally{try{w&&!w.done&&(l=v.return)&&l.call(v)}finally{if(s)throw s.error}}}return{rowOffset:h,resultString:a}},t.prototype.getBarcodeFormat=function(){return W.EAN_8},t})(Pe),qg=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),vc=(function(e){qg(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.ean13Reader=new ns,r}return t.prototype.getBarcodeFormat=function(){return W.UPC_A},t.prototype.decode=function(r,n){return this.maybeReturnResult(this.ean13Reader.decode(r))},t.prototype.decodeRow=function(r,n,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,n,a))},t.prototype.decodeMiddle=function(r,n,a){return this.ean13Reader.decodeMiddle(r,n,a)},t.prototype.maybeReturnResult=function(r){var n=r.getText();if(n.charAt(0)==="0"){var a=new Qe(n.substring(1),null,null,r.getResultPoints(),W.UPC_A);return r.getResultMetadata()!=null&&a.putAllMetadata(r.getResultMetadata()),a}else throw new D},t.prototype.reset=function(){this.ean13Reader.reset()},t})(Pe),Wg=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Xg=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},yc=(function(e){Wg(t,e);function t(){var r=e.call(this)||this;return r.decodeMiddleCounters=new Int32Array(4),r}return t.prototype.decodeMiddle=function(r,n,a){var i,o,s=this.decodeMiddleCounters.map(function(x){return x});s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var l=r.getSize(),d=n[1],u=0,h=0;h<6&&d<l;h++){var f=t.decodeDigit(r,s,d,t.L_AND_G_PATTERNS);a+=String.fromCharCode(48+f%10);try{for(var p=(i=void 0,Xg(s)),m=p.next();!m.done;m=p.next()){var g=m.value;d+=g}}catch(x){i={error:x}}finally{try{m&&!m.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}f>=10&&(u|=1<<5-h)}return t.determineNumSysAndCheckDigit(new se(a),u),d},t.prototype.decodeEnd=function(r,n){return t.findGuardPatternWithoutCounters(r,n,!0,t.MIDDLE_END_PATTERN)},t.prototype.checkChecksum=function(r){return Pe.checkChecksum(t.convertUPCEtoUPCA(r))},t.determineNumSysAndCheckDigit=function(r,n){for(var a=0;a<=1;a++)for(var i=0;i<10;i++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][i]){r.insert(0,"0"+a),r.append("0"+i);return}throw D.getNotFoundInstance()},t.prototype.getBarcodeFormat=function(){return W.UPC_E},t.convertUPCEtoUPCA=function(r){var n=r.slice(1,7).split("").map(function(o){return o.charCodeAt(0)}),a=new se;a.append(r.charAt(0));var i=n[5];switch(i){case 0:case 1:case 2:a.appendChars(n,0,2),a.append(i),a.append("0000"),a.appendChars(n,2,3);break;case 3:a.appendChars(n,0,3),a.append("00000"),a.appendChars(n,3,2);break;case 4:a.appendChars(n,0,4),a.append("00000"),a.append(n[4]);break;default:a.appendChars(n,0,5),a.append("0000"),a.append(i);break}return r.length>=8&&a.append(r.charAt(7)),a.toString()},t.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),t.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],t})(Pe),Yg=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),bc=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},xo=(function(e){Yg(t,e);function t(r){var n=e.call(this)||this,a=r==null?null:r.get(we.POSSIBLE_FORMATS),i=[];return a!=null&&(a.indexOf(W.EAN_13)>-1&&i.push(new ns),a.indexOf(W.UPC_A)>-1&&i.push(new vc),a.indexOf(W.EAN_8)>-1&&i.push(new xc),a.indexOf(W.UPC_E)>-1&&i.push(new yc)),i.length===0&&(i.push(new ns),i.push(new vc),i.push(new xc),i.push(new yc)),n.readers=i,n}return t.prototype.decodeRow=function(r,n,a){var i,o;try{for(var s=bc(this.readers),l=s.next();!l.done;l=s.next()){var d=l.value;try{var u=d.decodeRow(r,n,a),h=u.getBarcodeFormat()===W.EAN_13&&u.getText().charAt(0)==="0",f=a==null?null:a.get(we.POSSIBLE_FORMATS),p=f==null||f.includes(W.UPC_A);if(h&&p){var m=u.getRawBytes(),g=new Qe(u.getText().substring(1),m,m?m.length:null,u.getResultPoints(),W.UPC_A);return g.putAllMetadata(u.getResultMetadata()),g}return u}catch{}}}catch(x){i={error:x}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}throw new D},t.prototype.reset=function(){var r,n;try{for(var a=bc(this.readers),i=a.next();!i.done;i=a.next()){var o=i.value;o.reset()}}catch(s){r={error:s}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},t})(Ue),Kg=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Zg=(function(e){Kg(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},r}return t.prototype.decodeRow=function(r,n,a){var i=this.getValidRowData(n);if(!i)throw new D;var o=this.codaBarDecodeRow(i.row);if(!o)throw new D;return new Qe(o,null,0,[new X(i.left,r),new X(i.right,r)],W.CODABAR,new Date().getTime())},t.prototype.getValidRowData=function(r){var n=r.toArray(),a=n.indexOf(!0);if(a===-1)return null;var i=n.lastIndexOf(!0);if(i<=a)return null;n=n.slice(a,i+1);for(var o=[],s=n[0],l=1,d=1;d<n.length;d++)n[d]===s?l++:(s=n[d],o.push(l),l=1);return o.push(l),o.length<23&&(o.length+1)%8!==0?null:{row:o,left:a,right:i}},t.prototype.codaBarDecodeRow=function(r){for(var n=[],a=Math.ceil(r.reduce(function(l,d){return(l+d)/2},0));r.length>0;){var i=r.splice(0,8).splice(0,7),o=i.map(function(l){return l<a?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[o]===void 0)return null;n.push(this.CODA_BAR_CHAR_SET[o])}var s=n.join("");return this.validCodaBarString(s)?s:null},t.prototype.validCodaBarString=function(r){var n=/^[A-D].{1,}[A-D]$/;return n.test(r)},t})(Ue),Jg=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Qg=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},_r=(function(e){Jg(t,e);function t(){var r=e.call(this)||this;return r.decodeFinderCounters=new Int32Array(4),r.dataCharacterCounters=new Int32Array(8),r.oddRoundingErrors=new Array(4),r.evenRoundingErrors=new Array(4),r.oddCounts=new Array(r.dataCharacterCounters.length/2),r.evenCounts=new Array(r.dataCharacterCounters.length/2),r}return t.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},t.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},t.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},t.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},t.prototype.getOddCounts=function(){return this.oddCounts},t.prototype.getEvenCounts=function(){return this.evenCounts},t.prototype.parseFinderValue=function(r,n){for(var a=0;a<n.length;a++)if(Ue.patternMatchVariance(r,n[a],t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return a;throw new D},t.count=function(r){return he.sum(new Int32Array(r))},t.increment=function(r,n){for(var a=0,i=n[0],o=1;o<r.length;o++)n[o]>i&&(i=n[o],a=o);r[a]++},t.decrement=function(r,n){for(var a=0,i=n[0],o=1;o<r.length;o++)n[o]<i&&(i=n[o],a=o);r[a]--},t.isFinderPattern=function(r){var n,a,i=r[0]+r[1],o=i+r[2]+r[3],s=i/o;if(s>=t.MIN_FINDER_PATTERN_RATIO&&s<=t.MAX_FINDER_PATTERN_RATIO){var l=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;try{for(var u=Qg(r),h=u.next();!h.done;h=u.next()){var f=h.value;f>d&&(d=f),f<l&&(l=f)}}catch(p){n={error:p}}finally{try{h&&!h.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}return d<10*l}return!1},t.MAX_AVG_VARIANCE=.2,t.MAX_INDIVIDUAL_VARIANCE=.45,t.MIN_FINDER_PATTERN_RATIO=9.5/12,t.MAX_FINDER_PATTERN_RATIO=12.5/14,t})(Ue),Qa=(function(){function e(t,r){this.value=t,this.checksumPortion=r}return e.prototype.getValue=function(){return this.value},e.prototype.getChecksumPortion=function(){return this.checksumPortion},e.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var r=t;return this.value===r.value&&this.checksumPortion===r.checksumPortion},e.prototype.hashCode=function(){return this.value^this.checksumPortion},e})(),kh=(function(){function e(t,r,n,a,i){this.value=t,this.startEnd=r,this.value=t,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new X(n,i)),this.resultPoints.push(new X(a,i))}return e.prototype.getValue=function(){return this.value},e.prototype.getStartEnd=function(){return this.startEnd},e.prototype.getResultPoints=function(){return this.resultPoints},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var r=t;return this.value===r.value},e.prototype.hashCode=function(){return this.value},e})(),ex=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},$r=(function(){function e(){}return e.getRSSvalue=function(t,r,n){var a,i,o=0;try{for(var s=ex(t),l=s.next();!l.done;l=s.next()){var d=l.value;o+=d}}catch(v){a={error:v}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(a)throw a.error}}for(var u=0,h=0,f=t.length,p=0;p<f-1;p++){var m=void 0;for(m=1,h|=1<<p;m<t[p];m++,h&=~(1<<p)){var g=e.combins(o-m-1,f-p-2);if(n&&h===0&&o-m-(f-p-1)>=f-p-1&&(g-=e.combins(o-m-(f-p),f-p-2)),f-p-1>1){for(var x=0,y=o-m-(f-p-2);y>r;y--)x+=e.combins(o-m-y-1,f-p-3);g-=x*(f-1-p)}else o-m>r&&g--;u+=g}o-=m}return u},e.combins=function(t,r){var n,a;t-r>r?(a=r,n=t-r):(a=t-r,n=r);for(var i=1,o=1,s=t;s>n;s--)i*=s,o<=a&&(i/=o,o++);for(;o<=a;)i/=o,o++;return i},e})(),tx=(function(){function e(){}return e.buildBitArray=function(t){var r=t.length*2-1;t[t.length-1].getRightChar()==null&&(r-=1);for(var n=12*r,a=new Ge(n),i=0,o=t[0],s=o.getRightChar().getValue(),l=11;l>=0;--l)(s&1<<l)!==0&&a.set(i),i++;for(var l=1;l<t.length;++l){for(var d=t[l],u=d.getLeftChar().getValue(),h=11;h>=0;--h)(u&1<<h)!==0&&a.set(i),i++;if(d.getRightChar()!==null)for(var f=d.getRightChar().getValue(),h=11;h>=0;--h)(f&1<<h)!==0&&a.set(i),i++}return a},e})(),vr=(function(){function e(t,r){r?this.decodedInformation=null:(this.finished=t,this.decodedInformation=r)}return e.prototype.getDecodedInformation=function(){return this.decodedInformation},e.prototype.isFinished=function(){return this.finished},e})(),qs=(function(){function e(t){this.newPosition=t}return e.prototype.getNewPosition=function(){return this.newPosition},e})(),rx=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),It=(function(e){rx(t,e);function t(r,n){var a=e.call(this,r)||this;return a.value=n,a}return t.prototype.getValue=function(){return this.value},t.prototype.isFNC1=function(){return this.value===t.FNC1},t.FNC1="$",t})(qs),nx=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),yr=(function(e){nx(t,e);function t(r,n,a){var i=e.call(this,r)||this;return a?(i.remaining=!0,i.remainingValue=i.remainingValue):(i.remaining=!1,i.remainingValue=0),i.newString=n,i}return t.prototype.getNewString=function(){return this.newString},t.prototype.isRemaining=function(){return this.remaining},t.prototype.getRemainingValue=function(){return this.remainingValue},t})(qs),ax=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Mr=(function(e){ax(t,e);function t(r,n,a){var i=e.call(this,r)||this;if(n<0||n>10||a<0||a>10)throw new H;return i.firstDigit=n,i.secondDigit=a,i}return t.prototype.getFirstDigit=function(){return this.firstDigit},t.prototype.getSecondDigit=function(){return this.secondDigit},t.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},t.prototype.isFirstDigitFNC1=function(){return this.firstDigit===t.FNC1},t.prototype.isSecondDigitFNC1=function(){return this.secondDigit===t.FNC1},t.prototype.isAnyFNC1=function(){return this.firstDigit===t.FNC1||this.secondDigit===t.FNC1},t.FNC1=10,t})(qs),va=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ix=(function(){function e(){}return e.parseFieldsInGeneralPurpose=function(t){var r,n,a,i,o,s,l,d;if(!t)return null;if(t.length<2)throw new D;var u=t.substring(0,2);try{for(var h=va(e.TWO_DIGIT_DATA_LENGTH),f=h.next();!f.done;f=h.next()){var p=f.value;if(p[0]===u)return p[1]===e.VARIABLE_LENGTH?e.processVariableAI(2,p[2],t):e.processFixedAI(2,p[1],t)}}catch(k){r={error:k}}finally{try{f&&!f.done&&(n=h.return)&&n.call(h)}finally{if(r)throw r.error}}if(t.length<3)throw new D;var m=t.substring(0,3);try{for(var g=va(e.THREE_DIGIT_DATA_LENGTH),x=g.next();!x.done;x=g.next()){var p=x.value;if(p[0]===m)return p[1]===e.VARIABLE_LENGTH?e.processVariableAI(3,p[2],t):e.processFixedAI(3,p[1],t)}}catch(k){a={error:k}}finally{try{x&&!x.done&&(i=g.return)&&i.call(g)}finally{if(a)throw a.error}}try{for(var y=va(e.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),v=y.next();!v.done;v=y.next()){var p=v.value;if(p[0]===m)return p[1]===e.VARIABLE_LENGTH?e.processVariableAI(4,p[2],t):e.processFixedAI(4,p[1],t)}}catch(k){o={error:k}}finally{try{v&&!v.done&&(s=y.return)&&s.call(y)}finally{if(o)throw o.error}}if(t.length<4)throw new D;var w=t.substring(0,4);try{for(var S=va(e.FOUR_DIGIT_DATA_LENGTH),C=S.next();!C.done;C=S.next()){var p=C.value;if(p[0]===w)return p[1]===e.VARIABLE_LENGTH?e.processVariableAI(4,p[2],t):e.processFixedAI(4,p[1],t)}}catch(k){l={error:k}}finally{try{C&&!C.done&&(d=S.return)&&d.call(S)}finally{if(l)throw l.error}}throw new D},e.processFixedAI=function(t,r,n){if(n.length<t)throw new D;var a=n.substring(0,t);if(n.length<t+r)throw new D;var i=n.substring(t,t+r),o=n.substring(t+r),s="("+a+")"+i,l=e.parseFieldsInGeneralPurpose(o);return l==null?s:s+l},e.processVariableAI=function(t,r,n){var a=n.substring(0,t),i;n.length<t+r?i=n.length:i=t+r;var o=n.substring(t,i),s=n.substring(i),l="("+a+")"+o,d=e.parseFieldsInGeneralPurpose(s);return d==null?l:l+d},e.VARIABLE_LENGTH=[],e.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",e.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",e.VARIABLE_LENGTH,20],["22",e.VARIABLE_LENGTH,29],["30",e.VARIABLE_LENGTH,8],["37",e.VARIABLE_LENGTH,8],["90",e.VARIABLE_LENGTH,30],["91",e.VARIABLE_LENGTH,30],["92",e.VARIABLE_LENGTH,30],["93",e.VARIABLE_LENGTH,30],["94",e.VARIABLE_LENGTH,30],["95",e.VARIABLE_LENGTH,30],["96",e.VARIABLE_LENGTH,30],["97",e.VARIABLE_LENGTH,3],["98",e.VARIABLE_LENGTH,30],["99",e.VARIABLE_LENGTH,30]],e.THREE_DIGIT_DATA_LENGTH=[["240",e.VARIABLE_LENGTH,30],["241",e.VARIABLE_LENGTH,30],["242",e.VARIABLE_LENGTH,6],["250",e.VARIABLE_LENGTH,30],["251",e.VARIABLE_LENGTH,30],["253",e.VARIABLE_LENGTH,17],["254",e.VARIABLE_LENGTH,20],["400",e.VARIABLE_LENGTH,30],["401",e.VARIABLE_LENGTH,30],["402",17],["403",e.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",e.VARIABLE_LENGTH,20],["421",e.VARIABLE_LENGTH,15],["422",3],["423",e.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],e.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",e.VARIABLE_LENGTH,15],["391",e.VARIABLE_LENGTH,18],["392",e.VARIABLE_LENGTH,15],["393",e.VARIABLE_LENGTH,18],["703",e.VARIABLE_LENGTH,30]],e.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",e.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",e.VARIABLE_LENGTH,20],["8003",e.VARIABLE_LENGTH,30],["8004",e.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",e.VARIABLE_LENGTH,30],["8008",e.VARIABLE_LENGTH,12],["8018",18],["8020",e.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",e.VARIABLE_LENGTH,70],["8200",e.VARIABLE_LENGTH,70]],e})(),Ma=(function(){function e(t){this.buffer=new se,this.information=t}return e.prototype.decodeAllCodes=function(t,r){var n=r,a=null;do{var i=this.decodeGeneralPurposeField(n,a),o=ix.parseFieldsInGeneralPurpose(i.getNewString());if(o!=null&&t.append(o),i.isRemaining()?a=""+i.getRemainingValue():a=null,n===i.getNewPosition())break;n=i.getNewPosition()}while(!0);return t.toString()},e.prototype.isStillNumeric=function(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(var r=t;r<t+3;++r)if(this.information.get(r))return!0;return this.information.get(t+3)},e.prototype.decodeNumeric=function(t){if(t+7>this.information.getSize()){var r=this.extractNumericValueFromBitArray(t,4);return r===0?new Mr(this.information.getSize(),Mr.FNC1,Mr.FNC1):new Mr(this.information.getSize(),r-1,Mr.FNC1)}var n=this.extractNumericValueFromBitArray(t,7),a=(n-8)/11,i=(n-8)%11;return new Mr(t+7,a,i)},e.prototype.extractNumericValueFromBitArray=function(t,r){return e.extractNumericValueFromBitArray(this.information,t,r)},e.extractNumericValueFromBitArray=function(t,r,n){for(var a=0,i=0;i<n;++i)t.get(r+i)&&(a|=1<<n-i-1);return a},e.prototype.decodeGeneralPurposeField=function(t,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(t);var n=this.parseBlocks();return n!=null&&n.isRemaining()?new yr(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new yr(this.current.getPosition(),this.buffer.toString())},e.prototype.parseBlocks=function(){var t,r;do{var n=this.current.getPosition();this.current.isAlpha()?(r=this.parseAlphaBlock(),t=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),t=r.isFinished()):(r=this.parseNumericBlock(),t=r.isFinished());var a=n!==this.current.getPosition();if(!a&&!t)break}while(!t);return r.getDecodedInformation()},e.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){var r=void 0;return t.isSecondDigitFNC1()?r=new yr(this.current.getPosition(),this.buffer.toString()):r=new yr(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new vr(!0,r)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){var r=new yr(this.current.getPosition(),this.buffer.toString());return new vr(!0,r)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new vr(!1)},e.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){var r=new yr(this.current.getPosition(),this.buffer.toString());return new vr(!0,r)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new vr(!1)},e.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){var r=new yr(this.current.getPosition(),this.buffer.toString());return new vr(!0,r)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new vr(!1)},e.prototype.isStillIsoIec646=function(t){if(t+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(t,5);if(r>=5&&r<16)return!0;if(t+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(t,7);if(n>=64&&n<116)return!0;if(t+8>this.information.getSize())return!1;var a=this.extractNumericValueFromBitArray(t,8);return a>=232&&a<253},e.prototype.decodeIsoIec646=function(t){var r=this.extractNumericValueFromBitArray(t,5);if(r===15)return new It(t+5,It.FNC1);if(r>=5&&r<15)return new It(t+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(t,7);if(n>=64&&n<90)return new It(t+7,""+(n+1));if(n>=90&&n<116)return new It(t+7,""+(n+7));var a=this.extractNumericValueFromBitArray(t,8),i;switch(a){case 232:i="!";break;case 233:i='"';break;case 234:i="%";break;case 235:i="&";break;case 236:i="'";break;case 237:i="(";break;case 238:i=")";break;case 239:i="*";break;case 240:i="+";break;case 241:i=",";break;case 242:i="-";break;case 243:i=".";break;case 244:i="/";break;case 245:i=":";break;case 246:i=";";break;case 247:i="<";break;case 248:i="=";break;case 249:i=">";break;case 250:i="?";break;case 251:i="_";break;case 252:i=" ";break;default:throw new H}return new It(t+8,i)},e.prototype.isStillAlpha=function(t){if(t+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(t,5);if(r>=5&&r<16)return!0;if(t+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(t,6);return n>=16&&n<63},e.prototype.decodeAlphanumeric=function(t){var r=this.extractNumericValueFromBitArray(t,5);if(r===15)return new It(t+5,It.FNC1);if(r>=5&&r<15)return new It(t+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(t,6);if(n>=32&&n<58)return new It(t+6,""+(n+33));var a;switch(n){case 58:a="*";break;case 59:a=",";break;case 60:a="-";break;case 61:a=".";break;case 62:a="/";break;default:throw new sa("Decoding invalid alphanumeric value: "+n)}return new It(t+6,a)},e.prototype.isAlphaTo646ToAlphaLatch=function(t){if(t+1>this.information.getSize())return!1;for(var r=0;r<5&&r+t<this.information.getSize();++r)if(r===2){if(!this.information.get(t+2))return!1}else if(this.information.get(t+r))return!1;return!0},e.prototype.isAlphaOr646ToNumericLatch=function(t){if(t+3>this.information.getSize())return!1;for(var r=t;r<t+3;++r)if(this.information.get(r))return!1;return!0},e.prototype.isNumericToAlphaNumericLatch=function(t){if(t+1>this.information.getSize())return!1;for(var r=0;r<4&&r+t<this.information.getSize();++r)if(this.information.get(t+r))return!1;return!0},e})(),Eh=(function(){function e(t){this.information=t,this.generalDecoder=new Ma(t)}return e.prototype.getInformation=function(){return this.information},e.prototype.getGeneralDecoder=function(){return this.generalDecoder},e})(),ox=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Bt=(function(e){ox(t,e);function t(r){return e.call(this,r)||this}return t.prototype.encodeCompressedGtin=function(r,n){r.append("(01)");var a=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,n,a)},t.prototype.encodeCompressedGtinWithoutAI=function(r,n,a){for(var i=0;i<4;++i){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*i,10);o/100===0&&r.append("0"),o/10===0&&r.append("0"),r.append(o)}t.appendCheckDigit(r,a)},t.appendCheckDigit=function(r,n){for(var a=0,i=0;i<13;i++){var o=r.charAt(i+n).charCodeAt(0)-48;a+=(i&1)===0?3*o:o}a=10-a%10,a===10&&(a=0),r.append(a)},t.GTIN_SIZE=40,t})(Eh),sx=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),lx=(function(e){sx(t,e);function t(r){return e.call(this,r)||this}return t.prototype.parseInformation=function(){var r=new se;r.append("(01)");var n=r.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE,4);return r.append(a),this.encodeCompressedGtinWithoutAI(r,t.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(r,t.HEADER_SIZE+44)},t.HEADER_SIZE=4,t})(Bt),cx=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),dx=(function(e){cx(t,e);function t(r){return e.call(this,r)||this}return t.prototype.parseInformation=function(){var r=new se;return this.getGeneralDecoder().decodeAllCodes(r,t.HEADER_SIZE)},t.HEADER_SIZE=5,t})(Eh),ux=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Pa=(function(e){ux(t,e);function t(r){return e.call(this,r)||this}return t.prototype.encodeCompressedWeight=function(r,n,a){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,a);this.addWeightCode(r,i);for(var o=this.checkWeight(i),s=1e5,l=0;l<5;++l)o/s===0&&r.append("0"),s/=10;r.append(o)},t})(Bt),hx=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Nh=(function(e){hx(t,e);function t(r){return e.call(this,r)||this}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()!==t.HEADER_SIZE+Pa.GTIN_SIZE+t.WEIGHT_SIZE)throw new D;var r=new se;return this.encodeCompressedGtin(r,t.HEADER_SIZE),this.encodeCompressedWeight(r,t.HEADER_SIZE+Pa.GTIN_SIZE,t.WEIGHT_SIZE),r.toString()},t.HEADER_SIZE=5,t.WEIGHT_SIZE=15,t})(Pa),fx=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),px=(function(e){fx(t,e);function t(r){return e.call(this,r)||this}return t.prototype.addWeightCode=function(r,n){r.append("(3103)")},t.prototype.checkWeight=function(r){return r},t})(Nh),mx=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),gx=(function(e){mx(t,e);function t(r){return e.call(this,r)||this}return t.prototype.addWeightCode=function(r,n){n<1e4?r.append("(3202)"):r.append("(3203)")},t.prototype.checkWeight=function(r){return r<1e4?r:r-1e4},t})(Nh),xx=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),vx=(function(e){xx(t,e);function t(r){return e.call(this,r)||this}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()<t.HEADER_SIZE+Bt.GTIN_SIZE)throw new D;var r=new se;this.encodeCompressedGtin(r,t.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+Bt.GTIN_SIZE,t.LAST_DIGIT_SIZE);r.append("(392"),r.append(n),r.append(")");var a=this.getGeneralDecoder().decodeGeneralPurposeField(t.HEADER_SIZE+Bt.GTIN_SIZE+t.LAST_DIGIT_SIZE,null);return r.append(a.getNewString()),r.toString()},t.HEADER_SIZE=8,t.LAST_DIGIT_SIZE=2,t})(Bt),yx=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),bx=(function(e){yx(t,e);function t(r){return e.call(this,r)||this}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()<t.HEADER_SIZE+Bt.GTIN_SIZE)throw new D;var r=new se;this.encodeCompressedGtin(r,t.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+Bt.GTIN_SIZE,t.LAST_DIGIT_SIZE);r.append("(393"),r.append(n),r.append(")");var a=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+Bt.GTIN_SIZE+t.LAST_DIGIT_SIZE,t.FIRST_THREE_DIGITS_SIZE);a/100===0&&r.append("0"),a/10===0&&r.append("0"),r.append(a);var i=this.getGeneralDecoder().decodeGeneralPurposeField(t.HEADER_SIZE+Bt.GTIN_SIZE+t.LAST_DIGIT_SIZE+t.FIRST_THREE_DIGITS_SIZE,null);return r.append(i.getNewString()),r.toString()},t.HEADER_SIZE=8,t.LAST_DIGIT_SIZE=2,t.FIRST_THREE_DIGITS_SIZE=10,t})(Bt),wx=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),or=(function(e){wx(t,e);function t(r,n,a){var i=e.call(this,r)||this;return i.dateCode=a,i.firstAIdigits=n,i}return t.prototype.parseInformation=function(){if(this.getInformation().getSize()!==t.HEADER_SIZE+t.GTIN_SIZE+t.WEIGHT_SIZE+t.DATE_SIZE)throw new D;var r=new se;return this.encodeCompressedGtin(r,t.HEADER_SIZE),this.encodeCompressedWeight(r,t.HEADER_SIZE+t.GTIN_SIZE,t.WEIGHT_SIZE),this.encodeCompressedDate(r,t.HEADER_SIZE+t.GTIN_SIZE+t.WEIGHT_SIZE),r.toString()},t.prototype.encodeCompressedDate=function(r,n){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(n,t.DATE_SIZE);if(a!==38400){r.append("("),r.append(this.dateCode),r.append(")");var i=a%32;a/=32;var o=a%12+1;a/=12;var s=a;s/10===0&&r.append("0"),r.append(s),o/10===0&&r.append("0"),r.append(o),i/10===0&&r.append("0"),r.append(i)}},t.prototype.addWeightCode=function(r,n){r.append("("),r.append(this.firstAIdigits),r.append(n/1e5),r.append(")")},t.prototype.checkWeight=function(r){return r%1e5},t.HEADER_SIZE=8,t.WEIGHT_SIZE=20,t.DATE_SIZE=16,t})(Pa);function _x(e){try{if(e.get(1))return new lx(e);if(!e.get(2))return new dx(e);var t=Ma.extractNumericValueFromBitArray(e,1,4);switch(t){case 4:return new px(e);case 5:return new gx(e)}var r=Ma.extractNumericValueFromBitArray(e,1,5);switch(r){case 12:return new vx(e);case 13:return new bx(e)}var n=Ma.extractNumericValueFromBitArray(e,1,7);switch(n){case 56:return new or(e,"310","11");case 57:return new or(e,"320","11");case 58:return new or(e,"310","13");case 59:return new or(e,"320","13");case 60:return new or(e,"310","15");case 61:return new or(e,"320","15");case 62:return new or(e,"310","17");case 63:return new or(e,"320","17")}}catch(a){throw console.log(a),new sa("unknown decoder: "+e)}}var wc=(function(){function e(t,r,n,a){this.leftchar=t,this.rightchar=r,this.finderpattern=n,this.maybeLast=a}return e.prototype.mayBeLast=function(){return this.maybeLast},e.prototype.getLeftChar=function(){return this.leftchar},e.prototype.getRightChar=function(){return this.rightchar},e.prototype.getFinderPattern=function(){return this.finderpattern},e.prototype.mustBeLast=function(){return this.rightchar==null},e.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},e.equals=function(t,r){return t instanceof e?e.equalsOrNull(t.leftchar,r.leftchar)&&e.equalsOrNull(t.rightchar,r.rightchar)&&e.equalsOrNull(t.finderpattern,r.finderpattern):!1},e.equalsOrNull=function(t,r){return t===null?r===null:e.equals(t,r)},e.prototype.hashCode=function(){var t=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return t},e})(),Cx=(function(){function e(t,r,n){this.pairs=t,this.rowNumber=r,this.wasReversed=n}return e.prototype.getPairs=function(){return this.pairs},e.prototype.getRowNumber=function(){return this.rowNumber},e.prototype.isReversed=function(){return this.wasReversed},e.prototype.isEquivalent=function(t){return this.checkEqualitity(this,t)},e.prototype.toString=function(){return"{ "+this.pairs+" }"},e.prototype.equals=function(t,r){return t instanceof e?this.checkEqualitity(t,r)&&t.wasReversed===r.wasReversed:!1},e.prototype.checkEqualitity=function(t,r){if(!(!t||!r)){var n;return t.forEach(function(a,i){r.forEach(function(o){a.getLeftChar().getValue()===o.getLeftChar().getValue()&&a.getRightChar().getValue()===o.getRightChar().getValue()&&a.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(n=!0)})}),n}},e})(),Sx=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),sr=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ax=(function(e){Sx(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.pairs=new Array(t.MAX_PAIRS),r.rows=new Array,r.startEnd=[2],r}return t.prototype.decodeRow=function(r,n,a){this.pairs.length=0,this.startFromEven=!1;try{return t.constructResult(this.decodeRow2pairs(r,n))}catch{}return this.pairs.length=0,this.startFromEven=!0,t.constructResult(this.decodeRow2pairs(r,n))},t.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},t.prototype.decodeRow2pairs=function(r,n){for(var a=!1;!a;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,r))}catch(s){if(s instanceof D){if(!this.pairs.length)throw new D;a=!0}}if(this.checkChecksum())return this.pairs;var i;if(this.rows.length?i=!0:i=!1,this.storeRow(r,!1),i){var o=this.checkRowsBoolean(!1);if(o!=null||(o=this.checkRowsBoolean(!0),o!=null))return o}throw new D},t.prototype.checkRowsBoolean=function(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());var n=null;try{n=this.checkRows(new Array,0)}catch(a){console.log(a)}return r&&(this.rows=this.rows.reverse()),n},t.prototype.checkRows=function(r,n){for(var a,i,o=n;o<this.rows.length;o++){var s=this.rows[o];this.pairs.length=0;try{for(var l=(a=void 0,sr(r)),d=l.next();!d.done;d=l.next()){var u=d.value;this.pairs.push(u.getPairs())}}catch(f){a={error:f}}finally{try{d&&!d.done&&(i=l.return)&&i.call(l)}finally{if(a)throw a.error}}if(this.pairs.push(s.getPairs()),!!t.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var h=new Array(r);h.push(s);try{return this.checkRows(h,o+1)}catch(f){console.log(f)}}}throw new D},t.isValidSequence=function(r){var n,a;try{for(var i=sr(t.FINDER_PATTERN_SEQUENCES),o=i.next();!o.done;o=i.next()){var s=o.value;if(!(r.length>s.length)){for(var l=!0,d=0;d<r.length;d++)if(r[d].getFinderPattern().getValue()!==s[d]){l=!1;break}if(l)return!0}}}catch(u){n={error:u}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}return!1},t.prototype.storeRow=function(r,n){for(var a=0,i=!1,o=!1;a<this.rows.length;){var s=this.rows[a];if(s.getRowNumber()>r){o=s.isEquivalent(this.pairs);break}i=s.isEquivalent(this.pairs),a++}o||i||t.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new Cx(this.pairs,r,n)),this.removePartialRows(this.pairs,this.rows))},t.prototype.removePartialRows=function(r,n){var a,i,o,s,l,d;try{for(var u=sr(n),h=u.next();!h.done;h=u.next()){var f=h.value;if(f.getPairs().length!==r.length){var p=!0;try{for(var m=(o=void 0,sr(f.getPairs())),g=m.next();!g.done;g=m.next()){var x=g.value,y=!1;try{for(var v=(l=void 0,sr(r)),w=v.next();!w.done;w=v.next()){var S=w.value;if(wc.equals(x,S)){y=!0;break}}}catch(C){l={error:C}}finally{try{w&&!w.done&&(d=v.return)&&d.call(v)}finally{if(l)throw l.error}}y||(p=!1)}}catch(C){o={error:C}}finally{try{g&&!g.done&&(s=m.return)&&s.call(m)}finally{if(o)throw o.error}}}}}catch(C){a={error:C}}finally{try{h&&!h.done&&(i=u.return)&&i.call(u)}finally{if(a)throw a.error}}},t.isPartialRow=function(r,n){var a,i,o,s,l,d;try{for(var u=sr(n),h=u.next();!h.done;h=u.next()){var f=h.value,p=!0;try{for(var m=(o=void 0,sr(r)),g=m.next();!g.done;g=m.next()){var x=g.value,y=!1;try{for(var v=(l=void 0,sr(f.getPairs())),w=v.next();!w.done;w=v.next()){var S=w.value;if(x.equals(S)){y=!0;break}}}catch(C){l={error:C}}finally{try{w&&!w.done&&(d=v.return)&&d.call(v)}finally{if(l)throw l.error}}if(!y){p=!1;break}}}catch(C){o={error:C}}finally{try{g&&!g.done&&(s=m.return)&&s.call(m)}finally{if(o)throw o.error}}if(p)return!0}}catch(C){a={error:C}}finally{try{h&&!h.done&&(i=u.return)&&i.call(u)}finally{if(a)throw a.error}}return!1},t.prototype.getRows=function(){return this.rows},t.constructResult=function(r){var n=tx.buildBitArray(r),a=_x(n),i=a.parseInformation(),o=r[0].getFinderPattern().getResultPoints(),s=r[r.length-1].getFinderPattern().getResultPoints(),l=[o[0],o[1],s[0],s[1]];return new Qe(i,null,null,l,W.RSS_EXPANDED,null)},t.prototype.checkChecksum=function(){var r=this.pairs.get(0),n=r.getLeftChar(),a=r.getRightChar();if(a===null)return!1;for(var i=a.getChecksumPortion(),o=2,s=1;s<this.pairs.size();++s){var l=this.pairs.get(s);i+=l.getLeftChar().getChecksumPortion(),o++;var d=l.getRightChar();d!=null&&(i+=d.getChecksumPortion(),o++)}i%=211;var u=211*(o-4)+i;return u===n.getValue()},t.getNextSecondBar=function(r,n){var a;return r.get(n)?(a=r.getNextUnset(n),a=r.getNextSet(a)):(a=r.getNextSet(n),a=r.getNextUnset(a)),a},t.prototype.retrieveNextPair=function(r,n,a){var i=n.length%2===0;this.startFromEven&&(i=!i);var o,s=!0,l=-1;do this.findNextPair(r,n,l),o=this.parseFoundFinderPattern(r,a,i),o===null?l=t.getNextSecondBar(r,this.startEnd[0]):s=!1;while(s);var d=this.decodeDataCharacter(r,o,i,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new D;var u;try{u=this.decodeDataCharacter(r,o,i,!1)}catch(h){u=null,console.log(h)}return new wc(d,u,o,!0)},t.prototype.isEmptyPair=function(r){return r.length===0},t.prototype.findNextPair=function(r,n,a){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;var o=r.getSize(),s;if(a>=0)s=a;else if(this.isEmptyPair(n))s=0;else{var l=n[n.length-1];s=l.getFinderPattern().getStartEnd()[1]}var d=n.length%2!==0;this.startFromEven&&(d=!d);for(var u=!1;s<o&&(u=!r.get(s),!!u);)s++;for(var h=0,f=s,p=s;p<o;p++)if(r.get(p)!==u)i[h]++;else{if(h===3){if(d&&t.reverseCounters(i),t.isFinderPattern(i)){this.startEnd[0]=f,this.startEnd[1]=p;return}d&&t.reverseCounters(i),f+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,h--}else h++;i[h]=1,u=!u}throw new D},t.reverseCounters=function(r){for(var n=r.length,a=0;a<n/2;++a){var i=r[a];r[a]=r[n-a-1],r[n-a-1]=i}},t.prototype.parseFoundFinderPattern=function(r,n,a){var i,o,s;if(a){for(var l=this.startEnd[0]-1;l>=0&&!r.get(l);)l--;l++,i=this.startEnd[0]-l,o=l,s=this.startEnd[1]}else o=this.startEnd[0],s=r.getNextUnset(this.startEnd[1]+1),i=s-this.startEnd[1];var d=this.getDecodeFinderCounters();_e.arraycopy(d,0,d,1,d.length-1),d[0]=i;var u;try{u=this.parseFinderValue(d,t.FINDER_PATTERNS)}catch{return null}return new kh(u,[o,s],o,s,n)},t.prototype.decodeDataCharacter=function(r,n,a,i){for(var o=this.getDataCharacterCounters(),s=0;s<o.length;s++)o[s]=0;if(i)t.recordPatternInReverse(r,n.getStartEnd()[0],o);else{t.recordPattern(r,n.getStartEnd()[1],o);for(var l=0,d=o.length-1;l<d;l++,d--){var u=o[l];o[l]=o[d],o[d]=u}}var h=17,f=he.sum(new Int32Array(o))/h,p=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(f-p)/p>.3)throw new D;for(var m=this.getOddCounts(),g=this.getEvenCounts(),x=this.getOddRoundingErrors(),y=this.getEvenRoundingErrors(),l=0;l<o.length;l++){var v=1*o[l]/f,w=v+.5;if(w<1){if(v<.3)throw new D;w=1}else if(w>8){if(v>8.7)throw new D;w=8}var S=l/2;(l&1)===0?(m[S]=w,x[S]=v-w):(g[S]=w,y[S]=v-w)}this.adjustOddEvenCounts(h);for(var C=4*n.getValue()+(a?0:2)+(i?0:1)-1,k=0,A=0,l=m.length-1;l>=0;l--){if(t.isNotA1left(n,a,i)){var N=t.WEIGHTS[C][2*l];A+=m[l]*N}k+=m[l]}for(var B=0,l=g.length-1;l>=0;l--)if(t.isNotA1left(n,a,i)){var N=t.WEIGHTS[C][2*l+1];B+=g[l]*N}var E=A+B;if((k&1)!==0||k>13||k<4)throw new D;var I=(13-k)/2,F=t.SYMBOL_WIDEST[I],V=9-F,M=$r.getRSSvalue(m,F,!0),L=$r.getRSSvalue(g,V,!1),R=t.EVEN_TOTAL_SUBSET[I],U=t.GSUM[I],$=M*R+L+U;return new Qa($,E)},t.isNotA1left=function(r,n,a){return!(r.getValue()===0&&n&&a)},t.prototype.adjustOddEvenCounts=function(r){var n=he.sum(new Int32Array(this.getOddCounts())),a=he.sum(new Int32Array(this.getEvenCounts())),i=!1,o=!1;n>13?o=!0:n<4&&(i=!0);var s=!1,l=!1;a>13?l=!0:a<4&&(s=!0);var d=n+a-r,u=(n&1)===1,h=(a&1)===0;if(d===1)if(u){if(h)throw new D;o=!0}else{if(!h)throw new D;l=!0}else if(d===-1)if(u){if(h)throw new D;i=!0}else{if(!h)throw new D;s=!0}else if(d===0){if(u){if(!h)throw new D;n<a?(i=!0,l=!0):(o=!0,s=!0)}else if(h)throw new D}else throw new D;if(i){if(o)throw new D;t.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&t.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(l)throw new D;t.increment(this.getEvenCounts(),this.getOddRoundingErrors())}l&&t.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},t.SYMBOL_WIDEST=[7,5,4,3,1],t.EVEN_TOTAL_SUBSET=[4,20,52,104,204],t.GSUM=[0,348,1388,2948,3988],t.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],t.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],t.FINDER_PAT_A=0,t.FINDER_PAT_B=1,t.FINDER_PAT_C=2,t.FINDER_PAT_D=3,t.FINDER_PAT_E=4,t.FINDER_PAT_F=5,t.FINDER_PATTERN_SEQUENCES=[[t.FINDER_PAT_A,t.FINDER_PAT_A],[t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B],[t.FINDER_PAT_A,t.FINDER_PAT_C,t.FINDER_PAT_B,t.FINDER_PAT_D],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_C],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_D,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_D],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_E],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F]],t.MAX_PAIRS=11,t})(_r),kx=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Ex=(function(e){kx(t,e);function t(r,n,a){var i=e.call(this,r,n)||this;return i.count=0,i.finderPattern=a,i}return t.prototype.getFinderPattern=function(){return this.finderPattern},t.prototype.getCount=function(){return this.count},t.prototype.incrementCount=function(){this.count++},t})(Qa),Nx=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),vo=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},_c=(function(e){Nx(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.possibleLeftPairs=[],r.possibleRightPairs=[],r}return t.prototype.decodeRow=function(r,n,a){var i,o,s,l,d=this.decodePair(n,!1,r,a);t.addOrTally(this.possibleLeftPairs,d),n.reverse();var u=this.decodePair(n,!0,r,a);t.addOrTally(this.possibleRightPairs,u),n.reverse();try{for(var h=vo(this.possibleLeftPairs),f=h.next();!f.done;f=h.next()){var p=f.value;if(p.getCount()>1)try{for(var m=(s=void 0,vo(this.possibleRightPairs)),g=m.next();!g.done;g=m.next()){var x=g.value;if(x.getCount()>1&&t.checkChecksum(p,x))return t.constructResult(p,x)}}catch(y){s={error:y}}finally{try{g&&!g.done&&(l=m.return)&&l.call(m)}finally{if(s)throw s.error}}}}catch(y){i={error:y}}finally{try{f&&!f.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}throw new D},t.addOrTally=function(r,n){var a,i;if(n!=null){var o=!1;try{for(var s=vo(r),l=s.next();!l.done;l=s.next()){var d=l.value;if(d.getValue()===n.getValue()){d.incrementCount(),o=!0;break}}}catch(u){a={error:u}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(a)throw a.error}}o||r.push(n)}},t.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},t.constructResult=function(r,n){for(var a=4537077*r.getValue()+n.getValue(),i=new String(a).toString(),o=new se,s=13-i.length;s>0;s--)o.append("0");o.append(i);for(var l=0,s=0;s<13;s++){var d=o.charAt(s).charCodeAt(0)-48;l+=(s&1)===0?3*d:d}l=10-l%10,l===10&&(l=0),o.append(l.toString());var u=r.getFinderPattern().getResultPoints(),h=n.getFinderPattern().getResultPoints();return new Qe(o.toString(),null,0,[u[0],u[1],h[0],h[1]],W.RSS_14,new Date().getTime())},t.checkChecksum=function(r,n){var a=(r.getChecksumPortion()+16*n.getChecksumPortion())%79,i=9*r.getFinderPattern().getValue()+n.getFinderPattern().getValue();return i>72&&i--,i>8&&i--,a===i},t.prototype.decodePair=function(r,n,a,i){try{var o=this.findFinderPattern(r,n),s=this.parseFoundFinderPattern(r,a,n,o),l=i==null?null:i.get(we.NEED_RESULT_POINT_CALLBACK);if(l!=null){var d=(o[0]+o[1])/2;n&&(d=r.getSize()-1-d),l.foundPossibleResultPoint(new X(d,a))}var u=this.decodeDataCharacter(r,s,!0),h=this.decodeDataCharacter(r,s,!1);return new Ex(1597*u.getValue()+h.getValue(),u.getChecksumPortion()+4*h.getChecksumPortion(),s)}catch{return null}},t.prototype.decodeDataCharacter=function(r,n,a){for(var i=this.getDataCharacterCounters(),o=0;o<i.length;o++)i[o]=0;if(a)Ue.recordPatternInReverse(r,n.getStartEnd()[0],i);else{Ue.recordPattern(r,n.getStartEnd()[1]+1,i);for(var s=0,l=i.length-1;s<l;s++,l--){var d=i[s];i[s]=i[l],i[l]=d}}for(var u=a?16:15,h=he.sum(new Int32Array(i))/u,f=this.getOddCounts(),p=this.getEvenCounts(),m=this.getOddRoundingErrors(),g=this.getEvenRoundingErrors(),s=0;s<i.length;s++){var x=i[s]/h,y=Math.floor(x+.5);y<1?y=1:y>8&&(y=8);var v=Math.floor(s/2);(s&1)===0?(f[v]=y,m[v]=x-y):(p[v]=y,g[v]=x-y)}this.adjustOddEvenCounts(a,u);for(var w=0,S=0,s=f.length-1;s>=0;s--)S*=9,S+=f[s],w+=f[s];for(var C=0,k=0,s=p.length-1;s>=0;s--)C*=9,C+=p[s],k+=p[s];var A=S+3*C;if(a){if((w&1)!==0||w>12||w<4)throw new D;var N=(12-w)/2,B=t.OUTSIDE_ODD_WIDEST[N],E=9-B,I=$r.getRSSvalue(f,B,!1),F=$r.getRSSvalue(p,E,!0),V=t.OUTSIDE_EVEN_TOTAL_SUBSET[N],M=t.OUTSIDE_GSUM[N];return new Qa(I*V+F+M,A)}else{if((k&1)!==0||k>10||k<4)throw new D;var N=(10-k)/2,B=t.INSIDE_ODD_WIDEST[N],E=9-B,I=$r.getRSSvalue(f,B,!0),F=$r.getRSSvalue(p,E,!1),L=t.INSIDE_ODD_TOTAL_SUBSET[N],M=t.INSIDE_GSUM[N];return new Qa(F*L+I+M,A)}},t.prototype.findFinderPattern=function(r,n){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var i=r.getSize(),o=!1,s=0;s<i&&(o=!r.get(s),n!==o);)s++;for(var l=0,d=s,u=s;u<i;u++)if(r.get(u)!==o)a[l]++;else{if(l===3){if(_r.isFinderPattern(a))return[d,u];d+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,l--}else l++;a[l]=1,o=!o}throw new D},t.prototype.parseFoundFinderPattern=function(r,n,a,i){for(var o=r.get(i[0]),s=i[0]-1;s>=0&&o!==r.get(s);)s--;s++;var l=i[0]-s,d=this.getDecodeFinderCounters(),u=new Int32Array(d.length);_e.arraycopy(d,0,u,1,d.length-1),u[0]=l;var h=this.parseFinderValue(u,t.FINDER_PATTERNS),f=s,p=i[1];return a&&(f=r.getSize()-1-f,p=r.getSize()-1-p),new kh(h,[s,i[1]],f,p,n)},t.prototype.adjustOddEvenCounts=function(r,n){var a=he.sum(new Int32Array(this.getOddCounts())),i=he.sum(new Int32Array(this.getEvenCounts())),o=!1,s=!1,l=!1,d=!1;r?(a>12?s=!0:a<4&&(o=!0),i>12?d=!0:i<4&&(l=!0)):(a>11?s=!0:a<5&&(o=!0),i>10?d=!0:i<4&&(l=!0));var u=a+i-n,h=(a&1)===(r?1:0),f=(i&1)===1;if(u===1)if(h){if(f)throw new D;s=!0}else{if(!f)throw new D;d=!0}else if(u===-1)if(h){if(f)throw new D;o=!0}else{if(!f)throw new D;l=!0}else if(u===0){if(h){if(!f)throw new D;a<i?(o=!0,d=!0):(s=!0,l=!0)}else if(f)throw new D}else throw new D;if(o){if(s)throw new D;_r.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&_r.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(d)throw new D;_r.increment(this.getEvenCounts(),this.getOddRoundingErrors())}d&&_r.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},t.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],t.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],t.OUTSIDE_GSUM=[0,161,961,2015,2715],t.INSIDE_GSUM=[0,336,1036,1516],t.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],t.INSIDE_ODD_WIDEST=[2,4,6,8],t.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],t})(_r),Tx=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Ur=(function(e){Tx(t,e);function t(r){var n=e.call(this)||this;n.readers=[];var a=r?r.get(we.POSSIBLE_FORMATS):null,i=r&&r.get(we.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,o=r&&r.get(we.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return a&&((a.includes(W.EAN_13)||a.includes(W.UPC_A)||a.includes(W.EAN_8)||a.includes(W.UPC_E))&&n.readers.push(new xo(r)),a.includes(W.CODE_39)&&n.readers.push(new hc(i,o)),a.includes(W.CODE_93)&&n.readers.push(new fc),a.includes(W.CODE_128)&&n.readers.push(new uc),a.includes(W.ITF)&&n.readers.push(new pc),a.includes(W.CODABAR)&&n.readers.push(new Zg),a.includes(W.RSS_14)&&n.readers.push(new _c),a.includes(W.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new Ax))),n.readers.length===0&&(n.readers.push(new xo(r)),n.readers.push(new hc),n.readers.push(new fc),n.readers.push(new xo(r)),n.readers.push(new uc),n.readers.push(new pc),n.readers.push(new _c)),n}return t.prototype.decodeRow=function(r,n,a){for(var i=0;i<this.readers.length;i++)try{return this.readers[i].decodeRow(r,n,a)}catch{}throw new D},t.prototype.reset=function(){this.readers.forEach(function(r){return r.reset()})},t})(Ue),Ix=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(e){Ix(t,e);function t(r,n){return r===void 0&&(r=500),e.call(this,new Ur(n),r,n)||this}return t})(pn);var Cc=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},me=(function(){function e(t,r,n){this.ecCodewords=t,this.ecBlocks=[r],n&&this.ecBlocks.push(n)}return e.prototype.getECCodewords=function(){return this.ecCodewords},e.prototype.getECBlocks=function(){return this.ecBlocks},e})(),fe=(function(){function e(t,r){this.count=t,this.dataCodewords=r}return e.prototype.getCount=function(){return this.count},e.prototype.getDataCodewords=function(){return this.dataCodewords},e})(),Ox=(function(){function e(t,r,n,a,i,o){var s,l;this.versionNumber=t,this.symbolSizeRows=r,this.symbolSizeColumns=n,this.dataRegionSizeRows=a,this.dataRegionSizeColumns=i,this.ecBlocks=o;var d=0,u=o.getECCodewords(),h=o.getECBlocks();try{for(var f=Cc(h),p=f.next();!p.done;p=f.next()){var m=p.value;d+=m.getCount()*(m.getDataCodewords()+u)}}catch(g){s={error:g}}finally{try{p&&!p.done&&(l=f.return)&&l.call(f)}finally{if(s)throw s.error}}this.totalCodewords=d}return e.prototype.getVersionNumber=function(){return this.versionNumber},e.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},e.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},e.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},e.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},e.prototype.getTotalCodewords=function(){return this.totalCodewords},e.prototype.getECBlocks=function(){return this.ecBlocks},e.getVersionForDimensions=function(t,r){var n,a;if((t&1)!==0||(r&1)!==0)throw new H;try{for(var i=Cc(e.VERSIONS),o=i.next();!o.done;o=i.next()){var s=o.value;if(s.symbolSizeRows===t&&s.symbolSizeColumns===r)return s}}catch(l){n={error:l}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}throw new H},e.prototype.toString=function(){return""+this.versionNumber},e.buildVersions=function(){return[new e(1,10,10,8,8,new me(5,new fe(1,3))),new e(2,12,12,10,10,new me(7,new fe(1,5))),new e(3,14,14,12,12,new me(10,new fe(1,8))),new e(4,16,16,14,14,new me(12,new fe(1,12))),new e(5,18,18,16,16,new me(14,new fe(1,18))),new e(6,20,20,18,18,new me(18,new fe(1,22))),new e(7,22,22,20,20,new me(20,new fe(1,30))),new e(8,24,24,22,22,new me(24,new fe(1,36))),new e(9,26,26,24,24,new me(28,new fe(1,44))),new e(10,32,32,14,14,new me(36,new fe(1,62))),new e(11,36,36,16,16,new me(42,new fe(1,86))),new e(12,40,40,18,18,new me(48,new fe(1,114))),new e(13,44,44,20,20,new me(56,new fe(1,144))),new e(14,48,48,22,22,new me(68,new fe(1,174))),new e(15,52,52,24,24,new me(42,new fe(2,102))),new e(16,64,64,14,14,new me(56,new fe(2,140))),new e(17,72,72,16,16,new me(36,new fe(4,92))),new e(18,80,80,18,18,new me(48,new fe(4,114))),new e(19,88,88,20,20,new me(56,new fe(4,144))),new e(20,96,96,22,22,new me(68,new fe(4,174))),new e(21,104,104,24,24,new me(56,new fe(6,136))),new e(22,120,120,18,18,new me(68,new fe(6,175))),new e(23,132,132,20,20,new me(62,new fe(8,163))),new e(24,144,144,22,22,new me(62,new fe(8,156),new fe(2,155))),new e(25,8,18,6,16,new me(7,new fe(1,5))),new e(26,8,32,6,14,new me(11,new fe(1,10))),new e(27,12,26,10,24,new me(14,new fe(1,16))),new e(28,12,36,10,16,new me(18,new fe(1,22))),new e(29,16,36,14,16,new me(24,new fe(1,32))),new e(30,16,48,14,22,new me(28,new fe(1,49)))]},e.VERSIONS=e.buildVersions(),e})(),Bx=(function(){function e(t){var r=t.getHeight();if(r<8||r>144||(r&1)!==0)throw new H;this.version=e.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new Ht(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return e.prototype.getVersion=function(){return this.version},e.readVersion=function(t){var r=t.getHeight(),n=t.getWidth();return Ox.getVersionForDimensions(r,n)},e.prototype.readCodewords=function(){var t=new Int8Array(this.version.getTotalCodewords()),r=0,n=4,a=0,i=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth(),s=!1,l=!1,d=!1,u=!1;do if(n===i&&a===0&&!s)t[r++]=this.readCorner1(i,o)&255,n-=2,a+=2,s=!0;else if(n===i-2&&a===0&&(o&3)!==0&&!l)t[r++]=this.readCorner2(i,o)&255,n-=2,a+=2,l=!0;else if(n===i+4&&a===2&&(o&7)===0&&!d)t[r++]=this.readCorner3(i,o)&255,n-=2,a+=2,d=!0;else if(n===i-2&&a===0&&(o&7)===4&&!u)t[r++]=this.readCorner4(i,o)&255,n-=2,a+=2,u=!0;else{do n<i&&a>=0&&!this.readMappingMatrix.get(a,n)&&(t[r++]=this.readUtah(n,a,i,o)&255),n-=2,a+=2;while(n>=0&&a<o);n+=1,a+=3;do n>=0&&a<o&&!this.readMappingMatrix.get(a,n)&&(t[r++]=this.readUtah(n,a,i,o)&255),n+=2,a-=2;while(n<i&&a>=0);n+=3,a+=1}while(n<i||a<o);if(r!==this.version.getTotalCodewords())throw new H;return t},e.prototype.readModule=function(t,r,n,a){return t<0&&(t+=n,r+=4-(n+4&7)),r<0&&(r+=a,t+=4-(a+4&7)),this.readMappingMatrix.set(r,t),this.mappingBitMatrix.get(r,t)},e.prototype.readUtah=function(t,r,n,a){var i=0;return this.readModule(t-2,r-2,n,a)&&(i|=1),i<<=1,this.readModule(t-2,r-1,n,a)&&(i|=1),i<<=1,this.readModule(t-1,r-2,n,a)&&(i|=1),i<<=1,this.readModule(t-1,r-1,n,a)&&(i|=1),i<<=1,this.readModule(t-1,r,n,a)&&(i|=1),i<<=1,this.readModule(t,r-2,n,a)&&(i|=1),i<<=1,this.readModule(t,r-1,n,a)&&(i|=1),i<<=1,this.readModule(t,r,n,a)&&(i|=1),i},e.prototype.readCorner1=function(t,r){var n=0;return this.readModule(t-1,0,t,r)&&(n|=1),n<<=1,this.readModule(t-1,1,t,r)&&(n|=1),n<<=1,this.readModule(t-1,2,t,r)&&(n|=1),n<<=1,this.readModule(0,r-2,t,r)&&(n|=1),n<<=1,this.readModule(0,r-1,t,r)&&(n|=1),n<<=1,this.readModule(1,r-1,t,r)&&(n|=1),n<<=1,this.readModule(2,r-1,t,r)&&(n|=1),n<<=1,this.readModule(3,r-1,t,r)&&(n|=1),n},e.prototype.readCorner2=function(t,r){var n=0;return this.readModule(t-3,0,t,r)&&(n|=1),n<<=1,this.readModule(t-2,0,t,r)&&(n|=1),n<<=1,this.readModule(t-1,0,t,r)&&(n|=1),n<<=1,this.readModule(0,r-4,t,r)&&(n|=1),n<<=1,this.readModule(0,r-3,t,r)&&(n|=1),n<<=1,this.readModule(0,r-2,t,r)&&(n|=1),n<<=1,this.readModule(0,r-1,t,r)&&(n|=1),n<<=1,this.readModule(1,r-1,t,r)&&(n|=1),n},e.prototype.readCorner3=function(t,r){var n=0;return this.readModule(t-1,0,t,r)&&(n|=1),n<<=1,this.readModule(t-1,r-1,t,r)&&(n|=1),n<<=1,this.readModule(0,r-3,t,r)&&(n|=1),n<<=1,this.readModule(0,r-2,t,r)&&(n|=1),n<<=1,this.readModule(0,r-1,t,r)&&(n|=1),n<<=1,this.readModule(1,r-3,t,r)&&(n|=1),n<<=1,this.readModule(1,r-2,t,r)&&(n|=1),n<<=1,this.readModule(1,r-1,t,r)&&(n|=1),n},e.prototype.readCorner4=function(t,r){var n=0;return this.readModule(t-3,0,t,r)&&(n|=1),n<<=1,this.readModule(t-2,0,t,r)&&(n|=1),n<<=1,this.readModule(t-1,0,t,r)&&(n|=1),n<<=1,this.readModule(0,r-2,t,r)&&(n|=1),n<<=1,this.readModule(0,r-1,t,r)&&(n|=1),n<<=1,this.readModule(1,r-1,t,r)&&(n|=1),n<<=1,this.readModule(2,r-1,t,r)&&(n|=1),n<<=1,this.readModule(3,r-1,t,r)&&(n|=1),n},e.prototype.extractDataRegion=function(t){var r=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(t.getHeight()!==r)throw new ee("Dimension of bitMatrix must match the version size");for(var a=this.version.getDataRegionSizeRows(),i=this.version.getDataRegionSizeColumns(),o=r/a|0,s=n/i|0,l=o*a,d=s*i,u=new Ht(d,l),h=0;h<o;++h)for(var f=h*a,p=0;p<s;++p)for(var m=p*i,g=0;g<a;++g)for(var x=h*(a+2)+1+g,y=f+g,v=0;v<i;++v){var w=p*(i+2)+1+v;if(t.get(w,x)){var S=m+v;u.set(S,y)}}return u},e})(),Sc=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},jx=(function(){function e(t,r){this.numDataCodewords=t,this.codewords=r}return e.getDataBlocks=function(t,r){var n,a,i,o,s=r.getECBlocks(),l=0,d=s.getECBlocks();try{for(var u=Sc(d),h=u.next();!h.done;h=u.next()){var f=h.value;l+=f.getCount()}}catch(M){n={error:M}}finally{try{h&&!h.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}var p=new Array(l),m=0;try{for(var g=Sc(d),x=g.next();!x.done;x=g.next())for(var f=x.value,y=0;y<f.getCount();y++){var v=f.getDataCodewords(),w=s.getECCodewords()+v;p[m++]=new e(v,new Uint8Array(w))}}catch(M){i={error:M}}finally{try{x&&!x.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}for(var S=p[0].codewords.length,C=S-s.getECCodewords(),k=C-1,A=0,y=0;y<k;y++)for(var N=0;N<m;N++)p[N].codewords[y]=t[A++];for(var B=r.getVersionNumber()===24,E=B?8:m,N=0;N<E;N++)p[N].codewords[C-1]=t[A++];for(var I=p[0].codewords.length,y=C;y<I;y++)for(var N=0;N<m;N++){var F=B?(N+8)%m:N,V=B&&F>7?y-1:y;p[F].codewords[V]=t[A++]}if(A!==t.length)throw new ee;return p},e.prototype.getNumDataCodewords=function(){return this.numDataCodewords},e.prototype.getCodewords=function(){return this.codewords},e})(),Th=(function(){function e(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}return e.prototype.getBitOffset=function(){return this.bitOffset},e.prototype.getByteOffset=function(){return this.byteOffset},e.prototype.readBits=function(t){if(t<1||t>32||t>this.available())throw new ee(""+t);var r=0,n=this.bitOffset,a=this.byteOffset,i=this.bytes;if(n>0){var o=8-n,s=t<o?t:o,l=o-s,d=255>>8-s<<l;r=(i[a]&d)>>l,t-=s,n+=s,n===8&&(n=0,a++)}if(t>0){for(;t>=8;)r=r<<8|i[a]&255,a++,t-=8;if(t>0){var l=8-t,d=255>>l<<l;r=r<<t|(i[a]&d)>>l,n+=t}}return this.bitOffset=n,this.byteOffset=a,r},e.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},e})(),Le;(function(e){e[e.PAD_ENCODE=0]="PAD_ENCODE",e[e.ASCII_ENCODE=1]="ASCII_ENCODE",e[e.C40_ENCODE=2]="C40_ENCODE",e[e.TEXT_ENCODE=3]="TEXT_ENCODE",e[e.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",e[e.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",e[e.BASE256_ENCODE=6]="BASE256_ENCODE"})(Le||(Le={}));var Dx=(function(){function e(){}return e.decode=function(t){var r=new Th(t),n=new se,a=new se,i=new Array,o=Le.ASCII_ENCODE;do if(o===Le.ASCII_ENCODE)o=this.decodeAsciiSegment(r,n,a);else{switch(o){case Le.C40_ENCODE:this.decodeC40Segment(r,n);break;case Le.TEXT_ENCODE:this.decodeTextSegment(r,n);break;case Le.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,n);break;case Le.EDIFACT_ENCODE:this.decodeEdifactSegment(r,n);break;case Le.BASE256_ENCODE:this.decodeBase256Segment(r,n,i);break;default:throw new H}o=Le.ASCII_ENCODE}while(o!==Le.PAD_ENCODE&&r.available()>0);return a.length()>0&&n.append(a.toString()),new Fi(t,n.toString(),i.length===0?null:i,null)},e.decodeAsciiSegment=function(t,r,n){var a=!1;do{var i=t.readBits(8);if(i===0)throw new H;if(i<=128)return a&&(i+=128),r.append(String.fromCharCode(i-1)),Le.ASCII_ENCODE;if(i===129)return Le.PAD_ENCODE;if(i<=229){var o=i-130;o<10&&r.append("0"),r.append(""+o)}else switch(i){case 230:return Le.C40_ENCODE;case 231:return Le.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:a=!0;break;case 236:r.append("[)>05"),n.insert(0,"");break;case 237:r.append("[)>06"),n.insert(0,"");break;case 238:return Le.ANSIX12_ENCODE;case 239:return Le.TEXT_ENCODE;case 240:return Le.EDIFACT_ENCODE;case 241:break;default:if(i!==254||t.available()!==0)throw new H;break}}while(t.available()>0);return Le.ASCII_ENCODE},e.decodeC40Segment=function(t,r){var n=!1,a=[],i=0;do{if(t.available()===8)return;var o=t.readBits(8);if(o===254)return;this.parseTwoBytes(o,t.readBits(8),a);for(var s=0;s<3;s++){var l=a[s];switch(i){case 0:if(l<3)i=l+1;else if(l<this.C40_BASIC_SET_CHARS.length){var d=this.C40_BASIC_SET_CHARS[l];n?(r.append(String.fromCharCode(d.charCodeAt(0)+128)),n=!1):r.append(d)}else throw new H;break;case 1:n?(r.append(String.fromCharCode(l+128)),n=!1):r.append(String.fromCharCode(l)),i=0;break;case 2:if(l<this.C40_SHIFT2_SET_CHARS.length){var d=this.C40_SHIFT2_SET_CHARS[l];n?(r.append(String.fromCharCode(d.charCodeAt(0)+128)),n=!1):r.append(d)}else switch(l){case 27:r.append("");break;case 30:n=!0;break;default:throw new H}i=0;break;case 3:n?(r.append(String.fromCharCode(l+224)),n=!1):r.append(String.fromCharCode(l+96)),i=0;break;default:throw new H}}}while(t.available()>0)},e.decodeTextSegment=function(t,r){var n=!1,a=[],i=0;do{if(t.available()===8)return;var o=t.readBits(8);if(o===254)return;this.parseTwoBytes(o,t.readBits(8),a);for(var s=0;s<3;s++){var l=a[s];switch(i){case 0:if(l<3)i=l+1;else if(l<this.TEXT_BASIC_SET_CHARS.length){var d=this.TEXT_BASIC_SET_CHARS[l];n?(r.append(String.fromCharCode(d.charCodeAt(0)+128)),n=!1):r.append(d)}else throw new H;break;case 1:n?(r.append(String.fromCharCode(l+128)),n=!1):r.append(String.fromCharCode(l)),i=0;break;case 2:if(l<this.TEXT_SHIFT2_SET_CHARS.length){var d=this.TEXT_SHIFT2_SET_CHARS[l];n?(r.append(String.fromCharCode(d.charCodeAt(0)+128)),n=!1):r.append(d)}else switch(l){case 27:r.append("");break;case 30:n=!0;break;default:throw new H}i=0;break;case 3:if(l<this.TEXT_SHIFT3_SET_CHARS.length){var d=this.TEXT_SHIFT3_SET_CHARS[l];n?(r.append(String.fromCharCode(d.charCodeAt(0)+128)),n=!1):r.append(d),i=0}else throw new H;break;default:throw new H}}}while(t.available()>0)},e.decodeAnsiX12Segment=function(t,r){var n=[];do{if(t.available()===8)return;var a=t.readBits(8);if(a===254)return;this.parseTwoBytes(a,t.readBits(8),n);for(var i=0;i<3;i++){var o=n[i];switch(o){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(o<14)r.append(String.fromCharCode(o+44));else if(o<40)r.append(String.fromCharCode(o+51));else throw new H;break}}}while(t.available()>0)},e.parseTwoBytes=function(t,r,n){var a=(t<<8)+r-1,i=Math.floor(a/1600);n[0]=i,a-=i*1600,i=Math.floor(a/40),n[1]=i,n[2]=a-i*40},e.decodeEdifactSegment=function(t,r){do{if(t.available()<=16)return;for(var n=0;n<4;n++){var a=t.readBits(6);if(a===31){var i=8-t.getBitOffset();i!==8&&t.readBits(i);return}(a&32)===0&&(a|=64),r.append(String.fromCharCode(a))}}while(t.available()>0)},e.decodeBase256Segment=function(t,r,n){var a=1+t.getByteOffset(),i=this.unrandomize255State(t.readBits(8),a++),o;if(i===0?o=t.available()/8|0:i<250?o=i:o=250*(i-249)+this.unrandomize255State(t.readBits(8),a++),o<0)throw new H;for(var s=new Uint8Array(o),l=0;l<o;l++){if(t.available()<8)throw new H;s[l]=this.unrandomize255State(t.readBits(8),a++)}n.push(s);try{r.append(kt.decode(s,de.ISO88591))}catch(d){throw new sa("Platform does not support required encoding: "+d.message)}},e.unrandomize255State=function(t,r){var n=149*r%255+1,a=t-n;return a>=0?a:a+256},e.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],e.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],e.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],e.TEXT_SHIFT2_SET_CHARS=e.C40_SHIFT2_SET_CHARS,e.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],e})(),Rx=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Lx=(function(){function e(){this.rsDecoder=new $i(ct.DATA_MATRIX_FIELD_256)}return e.prototype.decode=function(t){var r,n,a=new Bx(t),i=a.getVersion(),o=a.readCodewords(),s=jx.getDataBlocks(o,i),l=0;try{for(var d=Rx(s),u=d.next();!u.done;u=d.next()){var h=u.value;l+=h.getNumDataCodewords()}}catch(w){r={error:w}}finally{try{u&&!u.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}for(var f=new Uint8Array(l),p=s.length,m=0;m<p;m++){var g=s[m],x=g.getCodewords(),y=g.getNumDataCodewords();this.correctErrors(x,y);for(var v=0;v<y;v++)f[v*p+m]=x[v]}return Dx.decode(f)},e.prototype.correctErrors=function(t,r){var n=new Int32Array(t);try{this.rsDecoder.decode(n,t.length-r)}catch{throw new De}for(var a=0;a<r;a++)t[a]=n[a]},e})(),Mx=(function(){function e(t){this.image=t,this.rectangleDetector=new rs(this.image)}return e.prototype.detect=function(){var t=this.rectangleDetector.detect(),r=this.detectSolid1(t);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new D;r=this.shiftToModuleCenter(r);var n=r[0],a=r[1],i=r[2],o=r[3],s=this.transitionsBetween(n,o)+1,l=this.transitionsBetween(i,o)+1;(s&1)===1&&(s+=1),(l&1)===1&&(l+=1),4*s<7*l&&4*l<7*s&&(s=l=Math.max(s,l));var d=e.sampleGrid(this.image,n,a,i,o,s,l);return new Gs(d,[n,a,i,o])},e.shiftPoint=function(t,r,n){var a=(r.getX()-t.getX())/(n+1),i=(r.getY()-t.getY())/(n+1);return new X(t.getX()+a,t.getY()+i)},e.moveAway=function(t,r,n){var a=t.getX(),i=t.getY();return a<r?a-=1:a+=1,i<n?i-=1:i+=1,new X(a,i)},e.prototype.detectSolid1=function(t){var r=t[0],n=t[1],a=t[3],i=t[2],o=this.transitionsBetween(r,n),s=this.transitionsBetween(n,a),l=this.transitionsBetween(a,i),d=this.transitionsBetween(i,r),u=o,h=[i,r,n,a];return u>s&&(u=s,h[0]=r,h[1]=n,h[2]=a,h[3]=i),u>l&&(u=l,h[0]=n,h[1]=a,h[2]=i,h[3]=r),u>d&&(h[0]=a,h[1]=i,h[2]=r,h[3]=n),h},e.prototype.detectSolid2=function(t){var r=t[0],n=t[1],a=t[2],i=t[3],o=this.transitionsBetween(r,i),s=e.shiftPoint(n,a,(o+1)*4),l=e.shiftPoint(a,n,(o+1)*4),d=this.transitionsBetween(s,r),u=this.transitionsBetween(l,i);return d<u?(t[0]=r,t[1]=n,t[2]=a,t[3]=i):(t[0]=n,t[1]=a,t[2]=i,t[3]=r),t},e.prototype.correctTopRight=function(t){var r=t[0],n=t[1],a=t[2],i=t[3],o=this.transitionsBetween(r,i),s=this.transitionsBetween(n,i),l=e.shiftPoint(r,n,(s+1)*4),d=e.shiftPoint(a,n,(o+1)*4);o=this.transitionsBetween(l,i),s=this.transitionsBetween(d,i);var u=new X(i.getX()+(a.getX()-n.getX())/(o+1),i.getY()+(a.getY()-n.getY())/(o+1)),h=new X(i.getX()+(r.getX()-n.getX())/(s+1),i.getY()+(r.getY()-n.getY())/(s+1));if(!this.isValid(u))return this.isValid(h)?h:null;if(!this.isValid(h))return u;var f=this.transitionsBetween(l,u)+this.transitionsBetween(d,u),p=this.transitionsBetween(l,h)+this.transitionsBetween(d,h);return f>p?u:h},e.prototype.shiftToModuleCenter=function(t){var r=t[0],n=t[1],a=t[2],i=t[3],o=this.transitionsBetween(r,i)+1,s=this.transitionsBetween(a,i)+1,l=e.shiftPoint(r,n,s*4),d=e.shiftPoint(a,n,o*4);o=this.transitionsBetween(l,i)+1,s=this.transitionsBetween(d,i)+1,(o&1)===1&&(o+=1),(s&1)===1&&(s+=1);var u=(r.getX()+n.getX()+a.getX()+i.getX())/4,h=(r.getY()+n.getY()+a.getY()+i.getY())/4;r=e.moveAway(r,u,h),n=e.moveAway(n,u,h),a=e.moveAway(a,u,h),i=e.moveAway(i,u,h);var f,p;return l=e.shiftPoint(r,n,s*4),l=e.shiftPoint(l,i,o*4),f=e.shiftPoint(n,r,s*4),f=e.shiftPoint(f,a,o*4),d=e.shiftPoint(a,i,s*4),d=e.shiftPoint(d,n,o*4),p=e.shiftPoint(i,a,s*4),p=e.shiftPoint(p,r,o*4),[l,f,d,p]},e.prototype.isValid=function(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()},e.sampleGrid=function(t,r,n,a,i,o,s){var l=Vs.getInstance();return l.sampleGrid(t,o,s,.5,.5,o-.5,.5,o-.5,s-.5,.5,s-.5,r.getX(),r.getY(),i.getX(),i.getY(),a.getX(),a.getY(),n.getX(),n.getY())},e.prototype.transitionsBetween=function(t,r){var n=Math.trunc(t.getX()),a=Math.trunc(t.getY()),i=Math.trunc(r.getX()),o=Math.trunc(r.getY()),s=Math.abs(o-a)>Math.abs(i-n);if(s){var l=n;n=a,a=l,l=i,i=o,o=l}for(var d=Math.abs(i-n),u=Math.abs(o-a),h=-d/2,f=a<o?1:-1,p=n<i?1:-1,m=0,g=this.image.get(s?a:n,s?n:a),x=n,y=a;x!==i;x+=p){var v=this.image.get(s?y:x,s?x:y);if(v!==g&&(m++,g=v),h+=u,h>0){if(y===o)break;y+=f,h-=d}}return m},e})(),ei=(function(){function e(){this.decoder=new Lx}return e.prototype.decode=function(t,r){r===void 0&&(r=null);var n,a;if(r!=null&&r.has(we.PURE_BARCODE)){var i=e.extractPureBits(t.getBlackMatrix());n=this.decoder.decode(i),a=e.NO_POINTS}else{var o=new Mx(t.getBlackMatrix()).detect();n=this.decoder.decode(o.getBits()),a=o.getPoints()}var s=n.getRawBytes(),l=new Qe(n.getText(),s,8*s.length,a,W.DATA_MATRIX,_e.currentTimeMillis()),d=n.getByteSegments();d!=null&&l.putMetadata(We.BYTE_SEGMENTS,d);var u=n.getECLevel();return u!=null&&l.putMetadata(We.ERROR_CORRECTION_LEVEL,u),l},e.prototype.reset=function(){},e.extractPureBits=function(t){var r=t.getTopLeftOnBit(),n=t.getBottomRightOnBit();if(r==null||n==null)throw new D;var a=this.moduleSize(r,t),i=r[1],o=n[1],s=r[0],l=n[0],d=(l-s+1)/a,u=(o-i+1)/a;if(d<=0||u<=0)throw new D;var h=a/2;i+=h,s+=h;for(var f=new Ht(d,u),p=0;p<u;p++)for(var m=i+p*a,g=0;g<d;g++)t.get(s+g*a,m)&&f.set(g,p);return f},e.moduleSize=function(t,r){for(var n=r.getWidth(),a=t[0],i=t[1];a<n&&r.get(a,i);)a++;if(a===n)throw new D;var o=a-t[0];if(o===0)throw new D;return o},e.NO_POINTS=[],e})(),Px=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(e){Px(t,e);function t(r){return r===void 0&&(r=500),e.call(this,new ei,r)||this}return t})(pn);var zr;(function(e){e[e.L=0]="L",e[e.M=1]="M",e[e.Q=2]="Q",e[e.H=3]="H"})(zr||(zr={}));var Fx=(function(){function e(t,r,n){this.value=t,this.stringValue=r,this.bits=n,e.FOR_BITS.set(n,this),e.FOR_VALUE.set(t,this)}return e.prototype.getValue=function(){return this.value},e.prototype.getBits=function(){return this.bits},e.fromString=function(t){switch(t){case"L":return e.L;case"M":return e.M;case"Q":return e.Q;case"H":return e.H;default:throw new Be(t+"not available")}},e.prototype.toString=function(){return this.stringValue},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var r=t;return this.value===r.value},e.forBits=function(t){if(t<0||t>=e.FOR_BITS.size)throw new ee;return e.FOR_BITS.get(t)},e.FOR_BITS=new Map,e.FOR_VALUE=new Map,e.L=new e(zr.L,"L",1),e.M=new e(zr.M,"M",0),e.Q=new e(zr.Q,"Q",3),e.H=new e(zr.H,"H",2),e})(),$x=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ih=(function(){function e(t){this.errorCorrectionLevel=Fx.forBits(t>>3&3),this.dataMask=t&7}return e.numBitsDiffering=function(t,r){return le.bitCount(t^r)},e.decodeFormatInformation=function(t,r){var n=e.doDecodeFormatInformation(t,r);return n!==null?n:e.doDecodeFormatInformation(t^e.FORMAT_INFO_MASK_QR,r^e.FORMAT_INFO_MASK_QR)},e.doDecodeFormatInformation=function(t,r){var n,a,i=Number.MAX_SAFE_INTEGER,o=0;try{for(var s=$x(e.FORMAT_INFO_DECODE_LOOKUP),l=s.next();!l.done;l=s.next()){var d=l.value,u=d[0];if(u===t||u===r)return new e(d[1]);var h=e.numBitsDiffering(t,u);h<i&&(o=d[1],i=h),t!==r&&(h=e.numBitsDiffering(r,u),h<i&&(o=d[1],i=h))}}catch(f){n={error:f}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}return i<=3?new e(o):null},e.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},e.prototype.getDataMask=function(){return this.dataMask},e.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var r=t;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask},e.FORMAT_INFO_MASK_QR=21522,e.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],e})(),Ux=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},O=(function(){function e(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.ecCodewordsPerBlock=t,this.ecBlocks=r}return e.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},e.prototype.getNumBlocks=function(){var t,r,n=0,a=this.ecBlocks;try{for(var i=Ux(a),o=i.next();!o.done;o=i.next()){var s=o.value;n+=s.getCount()}}catch(l){t={error:l}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return n},e.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},e.prototype.getECBlocks=function(){return this.ecBlocks},e})(),_=(function(){function e(t,r){this.count=t,this.dataCodewords=r}return e.prototype.getCount=function(){return this.count},e.prototype.getDataCodewords=function(){return this.dataCodewords},e})(),zx=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Er=(function(){function e(t,r){for(var n,a,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];this.versionNumber=t,this.alignmentPatternCenters=r,this.ecBlocks=i;var s=0,l=i[0].getECCodewordsPerBlock(),d=i[0].getECBlocks();try{for(var u=zx(d),h=u.next();!h.done;h=u.next()){var f=h.value;s+=f.getCount()*(f.getDataCodewords()+l)}}catch(p){n={error:p}}finally{try{h&&!h.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}this.totalCodewords=s}return e.prototype.getVersionNumber=function(){return this.versionNumber},e.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},e.prototype.getTotalCodewords=function(){return this.totalCodewords},e.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},e.prototype.getECBlocksForLevel=function(t){return this.ecBlocks[t.getValue()]},e.getProvisionalVersionForDimension=function(t){if(t%4!==1)throw new H;try{return this.getVersionForNumber((t-17)/4)}catch{throw new H}},e.getVersionForNumber=function(t){if(t<1||t>40)throw new ee;return e.VERSIONS[t-1]},e.decodeVersionInformation=function(t){for(var r=Number.MAX_SAFE_INTEGER,n=0,a=0;a<e.VERSION_DECODE_INFO.length;a++){var i=e.VERSION_DECODE_INFO[a];if(i===t)return e.getVersionForNumber(a+7);var o=Ih.numBitsDiffering(t,i);o<r&&(n=a+7,r=o)}return r<=3?e.getVersionForNumber(n):null},e.prototype.buildFunctionPattern=function(){var t=this.getDimensionForVersion(),r=new Ht(t);r.setRegion(0,0,9,9),r.setRegion(t-8,0,8,9),r.setRegion(0,t-8,9,8);for(var n=this.alignmentPatternCenters.length,a=0;a<n;a++)for(var i=this.alignmentPatternCenters[a]-2,o=0;o<n;o++)a===0&&(o===0||o===n-1)||a===n-1&&o===0||r.setRegion(this.alignmentPatternCenters[o]-2,i,5,5);return r.setRegion(6,9,1,t-17),r.setRegion(9,6,t-17,1),this.versionNumber>6&&(r.setRegion(t-11,0,3,6),r.setRegion(0,t-11,6,3)),r},e.prototype.toString=function(){return""+this.versionNumber},e.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),e.VERSIONS=[new e(1,new Int32Array(0),new O(7,new _(1,19)),new O(10,new _(1,16)),new O(13,new _(1,13)),new O(17,new _(1,9))),new e(2,Int32Array.from([6,18]),new O(10,new _(1,34)),new O(16,new _(1,28)),new O(22,new _(1,22)),new O(28,new _(1,16))),new e(3,Int32Array.from([6,22]),new O(15,new _(1,55)),new O(26,new _(1,44)),new O(18,new _(2,17)),new O(22,new _(2,13))),new e(4,Int32Array.from([6,26]),new O(20,new _(1,80)),new O(18,new _(2,32)),new O(26,new _(2,24)),new O(16,new _(4,9))),new e(5,Int32Array.from([6,30]),new O(26,new _(1,108)),new O(24,new _(2,43)),new O(18,new _(2,15),new _(2,16)),new O(22,new _(2,11),new _(2,12))),new e(6,Int32Array.from([6,34]),new O(18,new _(2,68)),new O(16,new _(4,27)),new O(24,new _(4,19)),new O(28,new _(4,15))),new e(7,Int32Array.from([6,22,38]),new O(20,new _(2,78)),new O(18,new _(4,31)),new O(18,new _(2,14),new _(4,15)),new O(26,new _(4,13),new _(1,14))),new e(8,Int32Array.from([6,24,42]),new O(24,new _(2,97)),new O(22,new _(2,38),new _(2,39)),new O(22,new _(4,18),new _(2,19)),new O(26,new _(4,14),new _(2,15))),new e(9,Int32Array.from([6,26,46]),new O(30,new _(2,116)),new O(22,new _(3,36),new _(2,37)),new O(20,new _(4,16),new _(4,17)),new O(24,new _(4,12),new _(4,13))),new e(10,Int32Array.from([6,28,50]),new O(18,new _(2,68),new _(2,69)),new O(26,new _(4,43),new _(1,44)),new O(24,new _(6,19),new _(2,20)),new O(28,new _(6,15),new _(2,16))),new e(11,Int32Array.from([6,30,54]),new O(20,new _(4,81)),new O(30,new _(1,50),new _(4,51)),new O(28,new _(4,22),new _(4,23)),new O(24,new _(3,12),new _(8,13))),new e(12,Int32Array.from([6,32,58]),new O(24,new _(2,92),new _(2,93)),new O(22,new _(6,36),new _(2,37)),new O(26,new _(4,20),new _(6,21)),new O(28,new _(7,14),new _(4,15))),new e(13,Int32Array.from([6,34,62]),new O(26,new _(4,107)),new O(22,new _(8,37),new _(1,38)),new O(24,new _(8,20),new _(4,21)),new O(22,new _(12,11),new _(4,12))),new e(14,Int32Array.from([6,26,46,66]),new O(30,new _(3,115),new _(1,116)),new O(24,new _(4,40),new _(5,41)),new O(20,new _(11,16),new _(5,17)),new O(24,new _(11,12),new _(5,13))),new e(15,Int32Array.from([6,26,48,70]),new O(22,new _(5,87),new _(1,88)),new O(24,new _(5,41),new _(5,42)),new O(30,new _(5,24),new _(7,25)),new O(24,new _(11,12),new _(7,13))),new e(16,Int32Array.from([6,26,50,74]),new O(24,new _(5,98),new _(1,99)),new O(28,new _(7,45),new _(3,46)),new O(24,new _(15,19),new _(2,20)),new O(30,new _(3,15),new _(13,16))),new e(17,Int32Array.from([6,30,54,78]),new O(28,new _(1,107),new _(5,108)),new O(28,new _(10,46),new _(1,47)),new O(28,new _(1,22),new _(15,23)),new O(28,new _(2,14),new _(17,15))),new e(18,Int32Array.from([6,30,56,82]),new O(30,new _(5,120),new _(1,121)),new O(26,new _(9,43),new _(4,44)),new O(28,new _(17,22),new _(1,23)),new O(28,new _(2,14),new _(19,15))),new e(19,Int32Array.from([6,30,58,86]),new O(28,new _(3,113),new _(4,114)),new O(26,new _(3,44),new _(11,45)),new O(26,new _(17,21),new _(4,22)),new O(26,new _(9,13),new _(16,14))),new e(20,Int32Array.from([6,34,62,90]),new O(28,new _(3,107),new _(5,108)),new O(26,new _(3,41),new _(13,42)),new O(30,new _(15,24),new _(5,25)),new O(28,new _(15,15),new _(10,16))),new e(21,Int32Array.from([6,28,50,72,94]),new O(28,new _(4,116),new _(4,117)),new O(26,new _(17,42)),new O(28,new _(17,22),new _(6,23)),new O(30,new _(19,16),new _(6,17))),new e(22,Int32Array.from([6,26,50,74,98]),new O(28,new _(2,111),new _(7,112)),new O(28,new _(17,46)),new O(30,new _(7,24),new _(16,25)),new O(24,new _(34,13))),new e(23,Int32Array.from([6,30,54,78,102]),new O(30,new _(4,121),new _(5,122)),new O(28,new _(4,47),new _(14,48)),new O(30,new _(11,24),new _(14,25)),new O(30,new _(16,15),new _(14,16))),new e(24,Int32Array.from([6,28,54,80,106]),new O(30,new _(6,117),new _(4,118)),new O(28,new _(6,45),new _(14,46)),new O(30,new _(11,24),new _(16,25)),new O(30,new _(30,16),new _(2,17))),new e(25,Int32Array.from([6,32,58,84,110]),new O(26,new _(8,106),new _(4,107)),new O(28,new _(8,47),new _(13,48)),new O(30,new _(7,24),new _(22,25)),new O(30,new _(22,15),new _(13,16))),new e(26,Int32Array.from([6,30,58,86,114]),new O(28,new _(10,114),new _(2,115)),new O(28,new _(19,46),new _(4,47)),new O(28,new _(28,22),new _(6,23)),new O(30,new _(33,16),new _(4,17))),new e(27,Int32Array.from([6,34,62,90,118]),new O(30,new _(8,122),new _(4,123)),new O(28,new _(22,45),new _(3,46)),new O(30,new _(8,23),new _(26,24)),new O(30,new _(12,15),new _(28,16))),new e(28,Int32Array.from([6,26,50,74,98,122]),new O(30,new _(3,117),new _(10,118)),new O(28,new _(3,45),new _(23,46)),new O(30,new _(4,24),new _(31,25)),new O(30,new _(11,15),new _(31,16))),new e(29,Int32Array.from([6,30,54,78,102,126]),new O(30,new _(7,116),new _(7,117)),new O(28,new _(21,45),new _(7,46)),new O(30,new _(1,23),new _(37,24)),new O(30,new _(19,15),new _(26,16))),new e(30,Int32Array.from([6,26,52,78,104,130]),new O(30,new _(5,115),new _(10,116)),new O(28,new _(19,47),new _(10,48)),new O(30,new _(15,24),new _(25,25)),new O(30,new _(23,15),new _(25,16))),new e(31,Int32Array.from([6,30,56,82,108,134]),new O(30,new _(13,115),new _(3,116)),new O(28,new _(2,46),new _(29,47)),new O(30,new _(42,24),new _(1,25)),new O(30,new _(23,15),new _(28,16))),new e(32,Int32Array.from([6,34,60,86,112,138]),new O(30,new _(17,115)),new O(28,new _(10,46),new _(23,47)),new O(30,new _(10,24),new _(35,25)),new O(30,new _(19,15),new _(35,16))),new e(33,Int32Array.from([6,30,58,86,114,142]),new O(30,new _(17,115),new _(1,116)),new O(28,new _(14,46),new _(21,47)),new O(30,new _(29,24),new _(19,25)),new O(30,new _(11,15),new _(46,16))),new e(34,Int32Array.from([6,34,62,90,118,146]),new O(30,new _(13,115),new _(6,116)),new O(28,new _(14,46),new _(23,47)),new O(30,new _(44,24),new _(7,25)),new O(30,new _(59,16),new _(1,17))),new e(35,Int32Array.from([6,30,54,78,102,126,150]),new O(30,new _(12,121),new _(7,122)),new O(28,new _(12,47),new _(26,48)),new O(30,new _(39,24),new _(14,25)),new O(30,new _(22,15),new _(41,16))),new e(36,Int32Array.from([6,24,50,76,102,128,154]),new O(30,new _(6,121),new _(14,122)),new O(28,new _(6,47),new _(34,48)),new O(30,new _(46,24),new _(10,25)),new O(30,new _(2,15),new _(64,16))),new e(37,Int32Array.from([6,28,54,80,106,132,158]),new O(30,new _(17,122),new _(4,123)),new O(28,new _(29,46),new _(14,47)),new O(30,new _(49,24),new _(10,25)),new O(30,new _(24,15),new _(46,16))),new e(38,Int32Array.from([6,32,58,84,110,136,162]),new O(30,new _(4,122),new _(18,123)),new O(28,new _(13,46),new _(32,47)),new O(30,new _(48,24),new _(14,25)),new O(30,new _(42,15),new _(32,16))),new e(39,Int32Array.from([6,26,54,82,110,138,166]),new O(30,new _(20,117),new _(4,118)),new O(28,new _(40,47),new _(7,48)),new O(30,new _(43,24),new _(22,25)),new O(30,new _(10,15),new _(67,16))),new e(40,Int32Array.from([6,30,58,86,114,142,170]),new O(30,new _(19,118),new _(6,119)),new O(28,new _(18,47),new _(31,48)),new O(30,new _(34,24),new _(34,25)),new O(30,new _(20,15),new _(61,16)))],e})(),ze;(function(e){e[e.DATA_MASK_000=0]="DATA_MASK_000",e[e.DATA_MASK_001=1]="DATA_MASK_001",e[e.DATA_MASK_010=2]="DATA_MASK_010",e[e.DATA_MASK_011=3]="DATA_MASK_011",e[e.DATA_MASK_100=4]="DATA_MASK_100",e[e.DATA_MASK_101=5]="DATA_MASK_101",e[e.DATA_MASK_110=6]="DATA_MASK_110",e[e.DATA_MASK_111=7]="DATA_MASK_111"})(ze||(ze={}));var Ac=(function(){function e(t,r){this.value=t,this.isMasked=r}return e.prototype.unmaskBitMatrix=function(t,r){for(var n=0;n<r;n++)for(var a=0;a<r;a++)this.isMasked(n,a)&&t.flip(a,n)},e.values=new Map([[ze.DATA_MASK_000,new e(ze.DATA_MASK_000,function(t,r){return(t+r&1)===0})],[ze.DATA_MASK_001,new e(ze.DATA_MASK_001,function(t,r){return(t&1)===0})],[ze.DATA_MASK_010,new e(ze.DATA_MASK_010,function(t,r){return r%3===0})],[ze.DATA_MASK_011,new e(ze.DATA_MASK_011,function(t,r){return(t+r)%3===0})],[ze.DATA_MASK_100,new e(ze.DATA_MASK_100,function(t,r){return(Math.floor(t/2)+Math.floor(r/3)&1)===0})],[ze.DATA_MASK_101,new e(ze.DATA_MASK_101,function(t,r){return t*r%6===0})],[ze.DATA_MASK_110,new e(ze.DATA_MASK_110,function(t,r){return t*r%6<3})],[ze.DATA_MASK_111,new e(ze.DATA_MASK_111,function(t,r){return(t+r+t*r%3&1)===0})]]),e})(),Hx=(function(){function e(t){var r=t.getHeight();if(r<21||(r&3)!==1)throw new H;this.bitMatrix=t}return e.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var t=0,r=0;r<6;r++)t=this.copyBit(r,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(var n=5;n>=0;n--)t=this.copyBit(8,n,t);for(var a=this.bitMatrix.getHeight(),i=0,o=a-7,n=a-1;n>=o;n--)i=this.copyBit(8,n,i);for(var r=a-8;r<a;r++)i=this.copyBit(r,8,i);if(this.parsedFormatInfo=Ih.decodeFormatInformation(t,i),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new H},e.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var t=this.bitMatrix.getHeight(),r=Math.floor((t-17)/4);if(r<=6)return Er.getVersionForNumber(r);for(var n=0,a=t-11,i=5;i>=0;i--)for(var o=t-9;o>=a;o--)n=this.copyBit(o,i,n);var s=Er.decodeVersionInformation(n);if(s!==null&&s.getDimensionForVersion()===t)return this.parsedVersion=s,s;n=0;for(var o=5;o>=0;o--)for(var i=t-9;i>=a;i--)n=this.copyBit(o,i,n);if(s=Er.decodeVersionInformation(n),s!==null&&s.getDimensionForVersion()===t)return this.parsedVersion=s,s;throw new H},e.prototype.copyBit=function(t,r,n){var a=this.isMirror?this.bitMatrix.get(r,t):this.bitMatrix.get(t,r);return a?n<<1|1:n<<1},e.prototype.readCodewords=function(){var t=this.readFormatInformation(),r=this.readVersion(),n=Ac.values.get(t.getDataMask()),a=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,a);for(var i=r.buildFunctionPattern(),o=!0,s=new Uint8Array(r.getTotalCodewords()),l=0,d=0,u=0,h=a-1;h>0;h-=2){h===6&&h--;for(var f=0;f<a;f++)for(var p=o?a-1-f:f,m=0;m<2;m++)i.get(h-m,p)||(u++,d<<=1,this.bitMatrix.get(h-m,p)&&(d|=1),u===8&&(s[l++]=d,u=0,d=0));o=!o}if(l!==r.getTotalCodewords())throw new H;return s},e.prototype.remask=function(){if(this.parsedFormatInfo!==null){var t=Ac.values.get(this.parsedFormatInfo.getDataMask()),r=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,r)}},e.prototype.setMirror=function(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t},e.prototype.mirror=function(){for(var t=this.bitMatrix,r=0,n=t.getWidth();r<n;r++)for(var a=r+1,i=t.getHeight();a<i;a++)t.get(r,a)!==t.get(a,r)&&(t.flip(a,r),t.flip(r,a))},e})(),kc=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Gx=(function(){function e(t,r){this.numDataCodewords=t,this.codewords=r}return e.getDataBlocks=function(t,r,n){var a,i,o,s;if(t.length!==r.getTotalCodewords())throw new ee;var l=r.getECBlocksForLevel(n),d=0,u=l.getECBlocks();try{for(var h=kc(u),f=h.next();!f.done;f=h.next()){var p=f.value;d+=p.getCount()}}catch(V){a={error:V}}finally{try{f&&!f.done&&(i=h.return)&&i.call(h)}finally{if(a)throw a.error}}var m=new Array(d),g=0;try{for(var x=kc(u),y=x.next();!y.done;y=x.next())for(var p=y.value,v=0;v<p.getCount();v++){var w=p.getDataCodewords(),S=l.getECCodewordsPerBlock()+w;m[g++]=new e(w,new Uint8Array(S))}}catch(V){o={error:V}}finally{try{y&&!y.done&&(s=x.return)&&s.call(x)}finally{if(o)throw o.error}}for(var C=m[0].codewords.length,k=m.length-1;k>=0;){var A=m[k].codewords.length;if(A===C)break;k--}k++;for(var N=C-l.getECCodewordsPerBlock(),B=0,v=0;v<N;v++)for(var E=0;E<g;E++)m[E].codewords[v]=t[B++];for(var E=k;E<g;E++)m[E].codewords[N]=t[B++];for(var I=m[0].codewords.length,v=N;v<I;v++)for(var E=0;E<g;E++){var F=E<k?v:v+1;m[E].codewords[F]=t[B++]}return m},e.prototype.getNumDataCodewords=function(){return this.numDataCodewords},e.prototype.getCodewords=function(){return this.codewords},e})(),Ct;(function(e){e[e.TERMINATOR=0]="TERMINATOR",e[e.NUMERIC=1]="NUMERIC",e[e.ALPHANUMERIC=2]="ALPHANUMERIC",e[e.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",e[e.BYTE=4]="BYTE",e[e.ECI=5]="ECI",e[e.KANJI=6]="KANJI",e[e.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",e[e.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",e[e.HANZI=9]="HANZI"})(Ct||(Ct={}));var Ae=(function(){function e(t,r,n,a){this.value=t,this.stringValue=r,this.characterCountBitsForVersions=n,this.bits=a,e.FOR_BITS.set(a,this),e.FOR_VALUE.set(t,this)}return e.forBits=function(t){var r=e.FOR_BITS.get(t);if(r===void 0)throw new ee;return r},e.prototype.getCharacterCountBits=function(t){var r=t.getVersionNumber(),n;return r<=9?n=0:r<=26?n=1:n=2,this.characterCountBitsForVersions[n]},e.prototype.getValue=function(){return this.value},e.prototype.getBits=function(){return this.bits},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var r=t;return this.value===r.value},e.prototype.toString=function(){return this.stringValue},e.FOR_BITS=new Map,e.FOR_VALUE=new Map,e.TERMINATOR=new e(Ct.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),e.NUMERIC=new e(Ct.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),e.ALPHANUMERIC=new e(Ct.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),e.STRUCTURED_APPEND=new e(Ct.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),e.BYTE=new e(Ct.BYTE,"BYTE",Int32Array.from([8,16,16]),4),e.ECI=new e(Ct.ECI,"ECI",Int32Array.from([0,0,0]),7),e.KANJI=new e(Ct.KANJI,"KANJI",Int32Array.from([8,10,12]),8),e.FNC1_FIRST_POSITION=new e(Ct.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),e.FNC1_SECOND_POSITION=new e(Ct.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),e.HANZI=new e(Ct.HANZI,"HANZI",Int32Array.from([8,10,12]),13),e})(),Vx=(function(){function e(){}return e.decode=function(t,r,n,a){var i=new Th(t),o=new se,s=new Array,l=-1,d=-1;try{var u=null,h=!1,f=void 0;do{if(i.available()<4)f=Ae.TERMINATOR;else{var p=i.readBits(4);f=Ae.forBits(p)}switch(f){case Ae.TERMINATOR:break;case Ae.FNC1_FIRST_POSITION:case Ae.FNC1_SECOND_POSITION:h=!0;break;case Ae.STRUCTURED_APPEND:if(i.available()<16)throw new H;l=i.readBits(8),d=i.readBits(8);break;case Ae.ECI:var m=e.parseECIValue(i);if(u=Fe.getCharacterSetECIByValue(m),u===null)throw new H;break;case Ae.HANZI:var g=i.readBits(4),x=i.readBits(f.getCharacterCountBits(r));g===e.GB2312_SUBSET&&e.decodeHanziSegment(i,o,x);break;default:var y=i.readBits(f.getCharacterCountBits(r));switch(f){case Ae.NUMERIC:e.decodeNumericSegment(i,o,y);break;case Ae.ALPHANUMERIC:e.decodeAlphanumericSegment(i,o,y,h);break;case Ae.BYTE:e.decodeByteSegment(i,o,y,u,s,a);break;case Ae.KANJI:e.decodeKanjiSegment(i,o,y);break;default:throw new H}break}}while(f!==Ae.TERMINATOR)}catch{throw new H}return new Fi(t,o.toString(),s.length===0?null:s,n===null?null:n.toString(),l,d)},e.decodeHanziSegment=function(t,r,n){if(n*13>t.available())throw new H;for(var a=new Uint8Array(2*n),i=0;n>0;){var o=t.readBits(13),s=o/96<<8&4294967295|o%96;s<959?s+=41377:s+=42657,a[i]=s>>8&255,a[i+1]=s&255,i+=2,n--}try{r.append(kt.decode(a,de.GB2312))}catch(l){throw new H(l)}},e.decodeKanjiSegment=function(t,r,n){if(n*13>t.available())throw new H;for(var a=new Uint8Array(2*n),i=0;n>0;){var o=t.readBits(13),s=o/192<<8&4294967295|o%192;s<7936?s+=33088:s+=49472,a[i]=s>>8,a[i+1]=s,i+=2,n--}try{r.append(kt.decode(a,de.SHIFT_JIS))}catch(l){throw new H(l)}},e.decodeByteSegment=function(t,r,n,a,i,o){if(8*n>t.available())throw new H;for(var s=new Uint8Array(n),l=0;l<n;l++)s[l]=t.readBits(8);var d;a===null?d=de.guessEncoding(s,o):d=a.getName();try{r.append(kt.decode(s,d))}catch(u){throw new H(u)}i.push(s)},e.toAlphaNumericChar=function(t){if(t>=e.ALPHANUMERIC_CHARS.length)throw new H;return e.ALPHANUMERIC_CHARS[t]},e.decodeAlphanumericSegment=function(t,r,n,a){for(var i=r.length();n>1;){if(t.available()<11)throw new H;var o=t.readBits(11);r.append(e.toAlphaNumericChar(Math.floor(o/45))),r.append(e.toAlphaNumericChar(o%45)),n-=2}if(n===1){if(t.available()<6)throw new H;r.append(e.toAlphaNumericChar(t.readBits(6)))}if(a)for(var s=i;s<r.length();s++)r.charAt(s)==="%"&&(s<r.length()-1&&r.charAt(s+1)==="%"?r.deleteCharAt(s+1):r.setCharAt(s,""))},e.decodeNumericSegment=function(t,r,n){for(;n>=3;){if(t.available()<10)throw new H;var a=t.readBits(10);if(a>=1e3)throw new H;r.append(e.toAlphaNumericChar(Math.floor(a/100))),r.append(e.toAlphaNumericChar(Math.floor(a/10)%10)),r.append(e.toAlphaNumericChar(a%10)),n-=3}if(n===2){if(t.available()<7)throw new H;var i=t.readBits(7);if(i>=100)throw new H;r.append(e.toAlphaNumericChar(Math.floor(i/10))),r.append(e.toAlphaNumericChar(i%10))}else if(n===1){if(t.available()<4)throw new H;var o=t.readBits(4);if(o>=10)throw new H;r.append(e.toAlphaNumericChar(o))}},e.parseECIValue=function(t){var r=t.readBits(8);if((r&128)===0)return r&127;if((r&192)===128){var n=t.readBits(8);return(r&63)<<8&4294967295|n}if((r&224)===192){var a=t.readBits(16);return(r&31)<<16&4294967295|a}throw new H},e.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",e.GB2312_SUBSET=1,e})(),Oh=(function(){function e(t){this.mirrored=t}return e.prototype.isMirrored=function(){return this.mirrored},e.prototype.applyMirroredCorrection=function(t){if(!(!this.mirrored||t===null||t.length<3)){var r=t[0];t[0]=t[2],t[2]=r}},e})(),Ec=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},qx=(function(){function e(){this.rsDecoder=new $i(ct.QR_CODE_FIELD_256)}return e.prototype.decodeBooleanArray=function(t,r){return this.decodeBitMatrix(Ht.parseFromBooleanArray(t),r)},e.prototype.decodeBitMatrix=function(t,r){var n=new Hx(t),a=null;try{return this.decodeBitMatrixParser(n,r)}catch(o){a=o}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var i=this.decodeBitMatrixParser(n,r);return i.setOther(new Oh(!0)),i}catch(o){throw a!==null?a:o}},e.prototype.decodeBitMatrixParser=function(t,r){var n,a,i,o,s=t.readVersion(),l=t.readFormatInformation().getErrorCorrectionLevel(),d=t.readCodewords(),u=Gx.getDataBlocks(d,s,l),h=0;try{for(var f=Ec(u),p=f.next();!p.done;p=f.next()){var m=p.value;h+=m.getNumDataCodewords()}}catch(k){n={error:k}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(n)throw n.error}}var g=new Uint8Array(h),x=0;try{for(var y=Ec(u),v=y.next();!v.done;v=y.next()){var m=v.value,w=m.getCodewords(),S=m.getNumDataCodewords();this.correctErrors(w,S);for(var C=0;C<S;C++)g[x++]=w[C]}}catch(k){i={error:k}}finally{try{v&&!v.done&&(o=y.return)&&o.call(y)}finally{if(i)throw i.error}}return Vx.decode(g,s,l,r)},e.prototype.correctErrors=function(t,r){var n=new Int32Array(t);try{this.rsDecoder.decode(n,t.length-r)}catch{throw new De}for(var a=0;a<r;a++)t[a]=n[a]},e})(),Wx=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Xx=(function(e){Wx(t,e);function t(r,n,a){var i=e.call(this,r,n)||this;return i.estimatedModuleSize=a,i}return t.prototype.aboutEquals=function(r,n,a){if(Math.abs(n-this.getY())<=r&&Math.abs(a-this.getX())<=r){var i=Math.abs(r-this.estimatedModuleSize);return i<=1||i<=this.estimatedModuleSize}return!1},t.prototype.combineEstimate=function(r,n,a){var i=(this.getX()+n)/2,o=(this.getY()+r)/2,s=(this.estimatedModuleSize+a)/2;return new t(i,o,s)},t})(X),Yx=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Kx=(function(){function e(t,r,n,a,i,o,s){this.image=t,this.startX=r,this.startY=n,this.width=a,this.height=i,this.moduleSize=o,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return e.prototype.find=function(){for(var t=this.startX,r=this.height,n=this.width,a=t+n,i=this.startY+r/2,o=new Int32Array(3),s=this.image,l=0;l<r;l++){var d=i+((l&1)===0?Math.floor((l+1)/2):-Math.floor((l+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var u=t;u<a&&!s.get(u,d);)u++;for(var h=0;u<a;){if(s.get(u,d))if(h===1)o[1]++;else if(h===2){if(this.foundPatternCross(o)){var f=this.handlePossibleCenter(o,d,u);if(f!==null)return f}o[0]=o[2],o[1]=1,o[2]=0,h=1}else o[++h]++;else h===1&&h++,o[h]++;u++}if(this.foundPatternCross(o)){var f=this.handlePossibleCenter(o,d,a);if(f!==null)return f}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new D},e.centerFromEnd=function(t,r){return r-t[2]-t[1]/2},e.prototype.foundPatternCross=function(t){for(var r=this.moduleSize,n=r/2,a=0;a<3;a++)if(Math.abs(r-t[a])>=n)return!1;return!0},e.prototype.crossCheckVertical=function(t,r,n,a){var i=this.image,o=i.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var l=t;l>=0&&i.get(r,l)&&s[1]<=n;)s[1]++,l--;if(l<0||s[1]>n)return NaN;for(;l>=0&&!i.get(r,l)&&s[0]<=n;)s[0]++,l--;if(s[0]>n)return NaN;for(l=t+1;l<o&&i.get(r,l)&&s[1]<=n;)s[1]++,l++;if(l===o||s[1]>n)return NaN;for(;l<o&&!i.get(r,l)&&s[2]<=n;)s[2]++,l++;if(s[2]>n)return NaN;var d=s[0]+s[1]+s[2];return 5*Math.abs(d-a)>=2*a?NaN:this.foundPatternCross(s)?e.centerFromEnd(s,l):NaN},e.prototype.handlePossibleCenter=function(t,r,n){var a,i,o=t[0]+t[1]+t[2],s=e.centerFromEnd(t,n),l=this.crossCheckVertical(r,s,2*t[1],o);if(!isNaN(l)){var d=(t[0]+t[1]+t[2])/3;try{for(var u=Yx(this.possibleCenters),h=u.next();!h.done;h=u.next()){var f=h.value;if(f.aboutEquals(d,l,s))return f.combineEstimate(l,s,d)}}catch(m){a={error:m}}finally{try{h&&!h.done&&(i=u.return)&&i.call(u)}finally{if(a)throw a.error}}var p=new Xx(s,l,d);this.possibleCenters.push(p),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(p)}return null},e})(),Zx=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Jx=(function(e){Zx(t,e);function t(r,n,a,i){var o=e.call(this,r,n)||this;return o.estimatedModuleSize=a,o.count=i,i===void 0&&(o.count=1),o}return t.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},t.prototype.getCount=function(){return this.count},t.prototype.aboutEquals=function(r,n,a){if(Math.abs(n-this.getY())<=r&&Math.abs(a-this.getX())<=r){var i=Math.abs(r-this.estimatedModuleSize);return i<=1||i<=this.estimatedModuleSize}return!1},t.prototype.combineEstimate=function(r,n,a){var i=this.count+1,o=(this.count*this.getX()+n)/i,s=(this.count*this.getY()+r)/i,l=(this.count*this.estimatedModuleSize+a)/i;return new t(o,s,l,i)},t})(X),Qx=(function(){function e(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}return e.prototype.getBottomLeft=function(){return this.bottomLeft},e.prototype.getTopLeft=function(){return this.topLeft},e.prototype.getTopRight=function(){return this.topRight},e})(),wn=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ev=(function(){function e(t,r){this.image=t,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}return e.prototype.getImage=function(){return this.image},e.prototype.getPossibleCenters=function(){return this.possibleCenters},e.prototype.find=function(t){var r=t!=null&&t.get(we.TRY_HARDER)!==void 0,n=t!=null&&t.get(we.PURE_BARCODE)!==void 0,a=this.image,i=a.getHeight(),o=a.getWidth(),s=Math.floor(3*i/(4*e.MAX_MODULES));(s<e.MIN_SKIP||r)&&(s=e.MIN_SKIP);for(var l=!1,d=new Int32Array(5),u=s-1;u<i&&!l;u+=s){d[0]=0,d[1]=0,d[2]=0,d[3]=0,d[4]=0;for(var h=0,f=0;f<o;f++)if(a.get(f,u))(h&1)===1&&h++,d[h]++;else if((h&1)===0)if(h===4)if(e.foundPatternCross(d)){var p=this.handlePossibleCenter(d,u,f,n);if(p===!0)if(s=2,this.hasSkipped===!0)l=this.haveMultiplyConfirmedCenters();else{var m=this.findRowSkip();m>d[2]&&(u+=m-d[2]-s,f=o-1)}else{d[0]=d[2],d[1]=d[3],d[2]=d[4],d[3]=1,d[4]=0,h=3;continue}h=0,d[0]=0,d[1]=0,d[2]=0,d[3]=0,d[4]=0}else d[0]=d[2],d[1]=d[3],d[2]=d[4],d[3]=1,d[4]=0,h=3;else d[++h]++;else d[h]++;if(e.foundPatternCross(d)){var p=this.handlePossibleCenter(d,u,o,n);p===!0&&(s=d[0],this.hasSkipped&&(l=this.haveMultiplyConfirmedCenters()))}}var g=this.selectBestPatterns();return X.orderBestPatterns(g),new Qx(g)},e.centerFromEnd=function(t,r){return r-t[4]-t[3]-t[2]/2},e.foundPatternCross=function(t){for(var r=0,n=0;n<5;n++){var a=t[n];if(a===0)return!1;r+=a}if(r<7)return!1;var i=r/7,o=i/2;return Math.abs(i-t[0])<o&&Math.abs(i-t[1])<o&&Math.abs(3*i-t[2])<3*o&&Math.abs(i-t[3])<o&&Math.abs(i-t[4])<o},e.prototype.getCrossCheckStateCount=function(){var t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t},e.prototype.crossCheckDiagonal=function(t,r,n,a){for(var i=this.getCrossCheckStateCount(),o=0,s=this.image;t>=o&&r>=o&&s.get(r-o,t-o);)i[2]++,o++;if(t<o||r<o)return!1;for(;t>=o&&r>=o&&!s.get(r-o,t-o)&&i[1]<=n;)i[1]++,o++;if(t<o||r<o||i[1]>n)return!1;for(;t>=o&&r>=o&&s.get(r-o,t-o)&&i[0]<=n;)i[0]++,o++;if(i[0]>n)return!1;var l=s.getHeight(),d=s.getWidth();for(o=1;t+o<l&&r+o<d&&s.get(r+o,t+o);)i[2]++,o++;if(t+o>=l||r+o>=d)return!1;for(;t+o<l&&r+o<d&&!s.get(r+o,t+o)&&i[3]<n;)i[3]++,o++;if(t+o>=l||r+o>=d||i[3]>=n)return!1;for(;t+o<l&&r+o<d&&s.get(r+o,t+o)&&i[4]<n;)i[4]++,o++;if(i[4]>=n)return!1;var u=i[0]+i[1]+i[2]+i[3]+i[4];return Math.abs(u-a)<2*a&&e.foundPatternCross(i)},e.prototype.crossCheckVertical=function(t,r,n,a){for(var i=this.image,o=i.getHeight(),s=this.getCrossCheckStateCount(),l=t;l>=0&&i.get(r,l);)s[2]++,l--;if(l<0)return NaN;for(;l>=0&&!i.get(r,l)&&s[1]<=n;)s[1]++,l--;if(l<0||s[1]>n)return NaN;for(;l>=0&&i.get(r,l)&&s[0]<=n;)s[0]++,l--;if(s[0]>n)return NaN;for(l=t+1;l<o&&i.get(r,l);)s[2]++,l++;if(l===o)return NaN;for(;l<o&&!i.get(r,l)&&s[3]<n;)s[3]++,l++;if(l===o||s[3]>=n)return NaN;for(;l<o&&i.get(r,l)&&s[4]<n;)s[4]++,l++;if(s[4]>=n)return NaN;var d=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(d-a)>=2*a?NaN:e.foundPatternCross(s)?e.centerFromEnd(s,l):NaN},e.prototype.crossCheckHorizontal=function(t,r,n,a){for(var i=this.image,o=i.getWidth(),s=this.getCrossCheckStateCount(),l=t;l>=0&&i.get(l,r);)s[2]++,l--;if(l<0)return NaN;for(;l>=0&&!i.get(l,r)&&s[1]<=n;)s[1]++,l--;if(l<0||s[1]>n)return NaN;for(;l>=0&&i.get(l,r)&&s[0]<=n;)s[0]++,l--;if(s[0]>n)return NaN;for(l=t+1;l<o&&i.get(l,r);)s[2]++,l++;if(l===o)return NaN;for(;l<o&&!i.get(l,r)&&s[3]<n;)s[3]++,l++;if(l===o||s[3]>=n)return NaN;for(;l<o&&i.get(l,r)&&s[4]<n;)s[4]++,l++;if(s[4]>=n)return NaN;var d=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(d-a)>=a?NaN:e.foundPatternCross(s)?e.centerFromEnd(s,l):NaN},e.prototype.handlePossibleCenter=function(t,r,n,a){var i=t[0]+t[1]+t[2]+t[3]+t[4],o=e.centerFromEnd(t,n),s=this.crossCheckVertical(r,Math.floor(o),t[2],i);if(!isNaN(s)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(s),t[2],i),!isNaN(o)&&(!a||this.crossCheckDiagonal(Math.floor(s),Math.floor(o),t[2],i)))){for(var l=i/7,d=!1,u=this.possibleCenters,h=0,f=u.length;h<f;h++){var p=u[h];if(p.aboutEquals(l,s,o)){u[h]=p.combineEstimate(s,o,l),d=!0;break}}if(!d){var m=new Jx(o,s,l);u.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return!0}return!1},e.prototype.findRowSkip=function(){var t,r,n=this.possibleCenters.length;if(n<=1)return 0;var a=null;try{for(var i=wn(this.possibleCenters),o=i.next();!o.done;o=i.next()){var s=o.value;if(s.getCount()>=e.CENTER_QUORUM)if(a==null)a=s;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-s.getX())-Math.abs(a.getY()-s.getY()))/2)}}catch(l){t={error:l}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return 0},e.prototype.haveMultiplyConfirmedCenters=function(){var t,r,n,a,i=0,o=0,s=this.possibleCenters.length;try{for(var l=wn(this.possibleCenters),d=l.next();!d.done;d=l.next()){var u=d.value;u.getCount()>=e.CENTER_QUORUM&&(i++,o+=u.getEstimatedModuleSize())}}catch(g){t={error:g}}finally{try{d&&!d.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}if(i<3)return!1;var h=o/s,f=0;try{for(var p=wn(this.possibleCenters),m=p.next();!m.done;m=p.next()){var u=m.value;f+=Math.abs(u.getEstimatedModuleSize()-h)}}catch(g){n={error:g}}finally{try{m&&!m.done&&(a=p.return)&&a.call(p)}finally{if(n)throw n.error}}return f<=.05*o},e.prototype.selectBestPatterns=function(){var t,r,n,a,i=this.possibleCenters.length;if(i<3)throw new D;var o=this.possibleCenters,s;if(i>3){var l=0,d=0;try{for(var u=wn(this.possibleCenters),h=u.next();!h.done;h=u.next()){var f=h.value,p=f.getEstimatedModuleSize();l+=p,d+=p*p}}catch(C){t={error:C}}finally{try{h&&!h.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}s=l/i;var m=Math.sqrt(d/i-s*s);o.sort(function(C,k){var A=Math.abs(k.getEstimatedModuleSize()-s),N=Math.abs(C.getEstimatedModuleSize()-s);return A<N?-1:A>N?1:0});for(var g=Math.max(.2*s,m),x=0;x<o.length&&o.length>3;x++){var y=o[x];Math.abs(y.getEstimatedModuleSize()-s)>g&&(o.splice(x,1),x--)}}if(o.length>3){var l=0;try{for(var v=wn(o),w=v.next();!w.done;w=v.next()){var S=w.value;l+=S.getEstimatedModuleSize()}}catch(k){n={error:k}}finally{try{w&&!w.done&&(a=v.return)&&a.call(v)}finally{if(n)throw n.error}}s=l/o.length,o.sort(function(k,A){if(A.getCount()===k.getCount()){var N=Math.abs(A.getEstimatedModuleSize()-s),B=Math.abs(k.getEstimatedModuleSize()-s);return N<B?1:N>B?-1:0}else return A.getCount()-k.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]},e.CENTER_QUORUM=2,e.MIN_SKIP=3,e.MAX_MODULES=57,e})(),tv=(function(){function e(t){this.image=t}return e.prototype.getImage=function(){return this.image},e.prototype.getResultPointCallback=function(){return this.resultPointCallback},e.prototype.detect=function(t){this.resultPointCallback=t==null?null:t.get(we.NEED_RESULT_POINT_CALLBACK);var r=new ev(this.image,this.resultPointCallback),n=r.find(t);return this.processFinderPatternInfo(n)},e.prototype.processFinderPatternInfo=function(t){var r=t.getTopLeft(),n=t.getTopRight(),a=t.getBottomLeft(),i=this.calculateModuleSize(r,n,a);if(i<1)throw new D("No pattern found in proccess finder.");var o=e.computeDimension(r,n,a,i),s=Er.getProvisionalVersionForDimension(o),l=s.getDimensionForVersion()-7,d=null;if(s.getAlignmentPatternCenters().length>0)for(var u=n.getX()-r.getX()+a.getX(),h=n.getY()-r.getY()+a.getY(),f=1-3/l,p=Math.floor(r.getX()+f*(u-r.getX())),m=Math.floor(r.getY()+f*(h-r.getY())),g=4;g<=16;g<<=1)try{d=this.findAlignmentInRegion(i,p,m,g);break}catch(w){if(!(w instanceof D))throw w}var x=e.createTransform(r,n,a,d,o),y=e.sampleGrid(this.image,x,o),v;return d===null?v=[a,r,n]:v=[a,r,n,d],new Gs(y,v)},e.createTransform=function(t,r,n,a,i){var o=i-3.5,s,l,d,u;return a!==null?(s=a.getX(),l=a.getY(),d=o-3,u=d):(s=r.getX()-t.getX()+n.getX(),l=r.getY()-t.getY()+n.getY(),d=o,u=o),Ah.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,d,u,3.5,o,t.getX(),t.getY(),r.getX(),r.getY(),s,l,n.getX(),n.getY())},e.sampleGrid=function(t,r,n){var a=Vs.getInstance();return a.sampleGridWithTransform(t,n,n,r)},e.computeDimension=function(t,r,n,a){var i=he.round(X.distance(t,r)/a),o=he.round(X.distance(t,n)/a),s=Math.floor((i+o)/2)+7;switch(s&3){case 0:s++;break;case 2:s--;break;case 3:throw new D("Dimensions could be not found.")}return s},e.prototype.calculateModuleSize=function(t,r,n){return(this.calculateModuleSizeOneWay(t,r)+this.calculateModuleSizeOneWay(t,n))/2},e.prototype.calculateModuleSizeOneWay=function(t,r){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(r.getX()),Math.floor(r.getY())),a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(n)?a/7:isNaN(a)?n/7:(n+a)/14},e.prototype.sizeOfBlackWhiteBlackRunBothWays=function(t,r,n,a){var i=this.sizeOfBlackWhiteBlackRun(t,r,n,a),o=1,s=t-(n-t);s<0?(o=t/(t-s),s=0):s>=this.image.getWidth()&&(o=(this.image.getWidth()-1-t)/(s-t),s=this.image.getWidth()-1);var l=Math.floor(r-(a-r)*o);return o=1,l<0?(o=r/(r-l),l=0):l>=this.image.getHeight()&&(o=(this.image.getHeight()-1-r)/(l-r),l=this.image.getHeight()-1),s=Math.floor(t+(s-t)*o),i+=this.sizeOfBlackWhiteBlackRun(t,r,s,l),i-1},e.prototype.sizeOfBlackWhiteBlackRun=function(t,r,n,a){var i=Math.abs(a-r)>Math.abs(n-t);if(i){var o=t;t=r,r=o,o=n,n=a,a=o}for(var s=Math.abs(n-t),l=Math.abs(a-r),d=-s/2,u=t<n?1:-1,h=r<a?1:-1,f=0,p=n+u,m=t,g=r;m!==p;m+=u){var x=i?g:m,y=i?m:g;if(f===1===this.image.get(x,y)){if(f===2)return he.distance(m,g,t,r);f++}if(d+=l,d>0){if(g===a)break;g+=h,d-=s}}return f===2?he.distance(n+u,a,t,r):NaN},e.prototype.findAlignmentInRegion=function(t,r,n,a){var i=Math.floor(a*t),o=Math.max(0,r-i),s=Math.min(this.image.getWidth()-1,r+i);if(s-o<t*3)throw new D("Alignment top exceeds estimated module size.");var l=Math.max(0,n-i),d=Math.min(this.image.getHeight()-1,n+i);if(d-l<t*3)throw new D("Alignment bottom exceeds estimated module size.");var u=new Kx(this.image,o,l,s-o,d-l,t,this.resultPointCallback);return u.find()},e})(),ti=(function(){function e(){this.decoder=new qx}return e.prototype.getDecoder=function(){return this.decoder},e.prototype.decode=function(t,r){var n,a;if(r!=null&&r.get(we.PURE_BARCODE)!==void 0){var i=e.extractPureBits(t.getBlackMatrix());n=this.decoder.decodeBitMatrix(i,r),a=e.NO_POINTS}else{var o=new tv(t.getBlackMatrix()).detect(r);n=this.decoder.decodeBitMatrix(o.getBits(),r),a=o.getPoints()}n.getOther()instanceof Oh&&n.getOther().applyMirroredCorrection(a);var s=new Qe(n.getText(),n.getRawBytes(),void 0,a,W.QR_CODE,void 0),l=n.getByteSegments();l!==null&&s.putMetadata(We.BYTE_SEGMENTS,l);var d=n.getECLevel();return d!==null&&s.putMetadata(We.ERROR_CORRECTION_LEVEL,d),n.hasStructuredAppend()&&(s.putMetadata(We.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),s.putMetadata(We.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),s},e.prototype.reset=function(){},e.extractPureBits=function(t){var r=t.getTopLeftOnBit(),n=t.getBottomRightOnBit();if(r===null||n===null)throw new D;var a=this.moduleSize(r,t),i=r[1],o=n[1],s=r[0],l=n[0];if(s>=l||i>=o)throw new D;if(o-i!==l-s&&(l=s+(o-i),l>=t.getWidth()))throw new D;var d=Math.round((l-s+1)/a),u=Math.round((o-i+1)/a);if(d<=0||u<=0)throw new D;if(u!==d)throw new D;var h=Math.floor(a/2);i+=h,s+=h;var f=s+Math.floor((d-1)*a)-l;if(f>0){if(f>h)throw new D;s-=f}var p=i+Math.floor((u-1)*a)-o;if(p>0){if(p>h)throw new D;i-=p}for(var m=new Ht(d,u),g=0;g<u;g++)for(var x=i+Math.floor(g*a),y=0;y<d;y++)t.get(s+Math.floor(y*a),x)&&m.set(y,g);return m},e.moduleSize=function(t,r){for(var n=r.getHeight(),a=r.getWidth(),i=t[0],o=t[1],s=!0,l=0;i<a&&o<n;){if(s!==r.get(i,o)){if(++l===5)break;s=!s}i++,o++}if(i===a||o===n)throw new D;return(i-t[0])/7},e.NO_POINTS=new Array,e})(),rv=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ue=(function(){function e(){}return e.prototype.PDF417Common=function(){},e.getBitCountSum=function(t){return he.sum(t)},e.toIntArray=function(t){var r,n;if(t==null||!t.length)return e.EMPTY_INT_ARRAY;var a=new Int32Array(t.length),i=0;try{for(var o=rv(t),s=o.next();!s.done;s=o.next()){var l=s.value;a[i++]=l}}catch(d){r={error:d}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a},e.getCodeword=function(t){var r=$e.binarySearch(e.SYMBOL_TABLE,t&262143);return r<0?-1:(e.CODEWORD_TABLE[r]-1)%e.NUMBER_OF_CODEWORDS},e.NUMBER_OF_CODEWORDS=929,e.MAX_CODEWORDS_IN_BARCODE=e.NUMBER_OF_CODEWORDS-1,e.MIN_ROWS_IN_BARCODE=3,e.MAX_ROWS_IN_BARCODE=90,e.MODULES_IN_CODEWORD=17,e.MODULES_IN_STOP_PATTERN=18,e.BARS_IN_MODULE=8,e.EMPTY_INT_ARRAY=new Int32Array([]),e.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),e.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),e})(),nv=(function(){function e(t,r){this.bits=t,this.points=r}return e.prototype.getBits=function(){return this.bits},e.prototype.getPoints=function(){return this.points},e})(),av=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},iv=(function(){function e(){}return e.detectMultiple=function(t,r,n){var a=t.getBlackMatrix(),i=e.detect(n,a);return i.length||(a=a.clone(),a.rotate180(),i=e.detect(n,a)),new nv(a,i)},e.detect=function(t,r){for(var n,a,i=new Array,o=0,s=0,l=!1;o<r.getHeight();){var d=e.findVertices(r,o,s);if(d[0]==null&&d[3]==null){if(!l)break;l=!1,s=0;try{for(var u=(n=void 0,av(i)),h=u.next();!h.done;h=u.next()){var f=h.value;f[1]!=null&&(o=Math.trunc(Math.max(o,f[1].getY()))),f[3]!=null&&(o=Math.max(o,Math.trunc(f[3].getY())))}}catch(p){n={error:p}}finally{try{h&&!h.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}o+=e.ROW_STEP;continue}if(l=!0,i.push(d),!t)break;d[2]!=null?(s=Math.trunc(d[2].getX()),o=Math.trunc(d[2].getY())):(s=Math.trunc(d[4].getX()),o=Math.trunc(d[4].getY()))}return i},e.findVertices=function(t,r,n){var a=t.getHeight(),i=t.getWidth(),o=new Array(8);return e.copyToResult(o,e.findRowsWithPattern(t,a,i,r,n,e.START_PATTERN),e.INDEXES_START_PATTERN),o[4]!=null&&(n=Math.trunc(o[4].getX()),r=Math.trunc(o[4].getY())),e.copyToResult(o,e.findRowsWithPattern(t,a,i,r,n,e.STOP_PATTERN),e.INDEXES_STOP_PATTERN),o},e.copyToResult=function(t,r,n){for(var a=0;a<n.length;a++)t[n[a]]=r[a]},e.findRowsWithPattern=function(t,r,n,a,i,o){for(var s=new Array(4),l=!1,d=new Int32Array(o.length);a<r;a+=e.ROW_STEP){var u=e.findGuardPattern(t,i,a,n,!1,o,d);if(u!=null){for(;a>0;){var h=e.findGuardPattern(t,i,--a,n,!1,o,d);if(h!=null)u=h;else{a++;break}}s[0]=new X(u[0],a),s[1]=new X(u[1],a),l=!0;break}}var f=a+1;if(l){for(var p=0,h=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);f<r;f++){var u=e.findGuardPattern(t,h[0],f,n,!1,o,d);if(u!=null&&Math.abs(h[0]-u[0])<e.MAX_PATTERN_DRIFT&&Math.abs(h[1]-u[1])<e.MAX_PATTERN_DRIFT)h=u,p=0;else{if(p>e.SKIPPED_ROW_COUNT_MAX)break;p++}}f-=p+1,s[2]=new X(h[0],f),s[3]=new X(h[1],f)}return f-a<e.BARCODE_MIN_HEIGHT&&$e.fill(s,null),s},e.findGuardPattern=function(t,r,n,a,i,o,s){$e.fillWithin(s,0,s.length,0);for(var l=r,d=0;t.get(l,n)&&l>0&&d++<e.MAX_PIXEL_DRIFT;)l--;for(var u=l,h=0,f=o.length,p=i;u<a;u++){var m=t.get(u,n);if(m!==p)s[h]++;else{if(h===f-1){if(e.patternMatchVariance(s,o,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return new Int32Array([l,u]);l+=s[0]+s[1],_e.arraycopy(s,2,s,0,h-1),s[h-1]=0,s[h]=0,h--}else h++;s[h]=1,p=!p}}return h===f-1&&e.patternMatchVariance(s,o,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE?new Int32Array([l,u-1]):null},e.patternMatchVariance=function(t,r,n){for(var a=t.length,i=0,o=0,s=0;s<a;s++)i+=t[s],o+=r[s];if(i<o)return 1/0;var l=i/o;n*=l;for(var d=0,u=0;u<a;u++){var h=t[u],f=r[u]*l,p=h>f?h-f:f-h;if(p>n)return 1/0;d+=p}return d/i},e.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),e.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),e.MAX_AVG_VARIANCE=.42,e.MAX_INDIVIDUAL_VARIANCE=.8,e.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),e.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),e.MAX_PIXEL_DRIFT=3,e.MAX_PATTERN_DRIFT=5,e.SKIPPED_ROW_COUNT_MAX=25,e.ROW_STEP=5,e.BARCODE_MIN_HEIGHT=10,e})(),ov=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Sr=(function(){function e(t,r){if(r.length===0)throw new ee;this.field=t;var n=r.length;if(n>1&&r[0]===0){for(var a=1;a<n&&r[a]===0;)a++;a===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-a),_e.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return e.prototype.getCoefficients=function(){return this.coefficients},e.prototype.getDegree=function(){return this.coefficients.length-1},e.prototype.isZero=function(){return this.coefficients[0]===0},e.prototype.getCoefficient=function(t){return this.coefficients[this.coefficients.length-1-t]},e.prototype.evaluateAt=function(t){var r,n;if(t===0)return this.getCoefficient(0);if(t===1){var a=0;try{for(var i=ov(this.coefficients),o=i.next();!o.done;o=i.next()){var s=o.value;a=this.field.add(a,s)}}catch(h){r={error:h}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a}for(var l=this.coefficients[0],d=this.coefficients.length,u=1;u<d;u++)l=this.field.add(this.field.multiply(t,l),this.coefficients[u]);return l},e.prototype.add=function(t){if(!this.field.equals(t.field))throw new ee("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;var r=this.coefficients,n=t.coefficients;if(r.length>n.length){var a=r;r=n,n=a}var i=new Int32Array(n.length),o=n.length-r.length;_e.arraycopy(n,0,i,0,o);for(var s=o;s<n.length;s++)i[s]=this.field.add(r[s-o],n[s]);return new e(this.field,i)},e.prototype.subtract=function(t){if(!this.field.equals(t.field))throw new ee("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())},e.prototype.multiply=function(t){return t instanceof e?this.multiplyOther(t):this.multiplyScalar(t)},e.prototype.multiplyOther=function(t){if(!this.field.equals(t.field))throw new ee("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new e(this.field,new Int32Array([0]));for(var r=this.coefficients,n=r.length,a=t.coefficients,i=a.length,o=new Int32Array(n+i-1),s=0;s<n;s++)for(var l=r[s],d=0;d<i;d++)o[s+d]=this.field.add(o[s+d],this.field.multiply(l,a[d]));return new e(this.field,o)},e.prototype.negative=function(){for(var t=this.coefficients.length,r=new Int32Array(t),n=0;n<t;n++)r[n]=this.field.subtract(0,this.coefficients[n]);return new e(this.field,r)},e.prototype.multiplyScalar=function(t){if(t===0)return new e(this.field,new Int32Array([0]));if(t===1)return this;for(var r=this.coefficients.length,n=new Int32Array(r),a=0;a<r;a++)n[a]=this.field.multiply(this.coefficients[a],t);return new e(this.field,n)},e.prototype.multiplyByMonomial=function(t,r){if(t<0)throw new ee;if(r===0)return new e(this.field,new Int32Array([0]));for(var n=this.coefficients.length,a=new Int32Array(n+t),i=0;i<n;i++)a[i]=this.field.multiply(this.coefficients[i],r);return new e(this.field,a)},e.prototype.toString=function(){for(var t=new se,r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);n!==0&&(n<0?(t.append(" - "),n=-n):t.length()>0&&t.append(" + "),(r===0||n!==1)&&t.append(n),r!==0&&(r===1?t.append("x"):(t.append("x^"),t.append(r))))}return t.toString()},e})(),sv=(function(){function e(){}return e.prototype.add=function(t,r){return(t+r)%this.modulus},e.prototype.subtract=function(t,r){return(this.modulus+t-r)%this.modulus},e.prototype.exp=function(t){return this.expTable[t]},e.prototype.log=function(t){if(t===0)throw new ee;return this.logTable[t]},e.prototype.inverse=function(t){if(t===0)throw new Sh;return this.expTable[this.modulus-this.logTable[t]-1]},e.prototype.multiply=function(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.modulus-1)]},e.prototype.getSize=function(){return this.modulus},e.prototype.equals=function(t){return t===this},e})(),lv=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),cv=(function(e){lv(t,e);function t(r,n){var a=e.call(this)||this;a.modulus=r,a.expTable=new Int32Array(r),a.logTable=new Int32Array(r);for(var i=1,o=0;o<r;o++)a.expTable[o]=i,i=i*n%r;for(var o=0;o<r-1;o++)a.logTable[a.expTable[o]]=o;return a.zero=new Sr(a,new Int32Array([0])),a.one=new Sr(a,new Int32Array([1])),a}return t.prototype.getZero=function(){return this.zero},t.prototype.getOne=function(){return this.one},t.prototype.buildMonomial=function(r,n){if(r<0)throw new ee;if(n===0)return this.zero;var a=new Int32Array(r+1);return a[0]=n,new Sr(this,a)},t.PDF417_GF=new t(ue.NUMBER_OF_CODEWORDS,3),t})(sv),dv=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},uv=(function(){function e(){this.field=cv.PDF417_GF}return e.prototype.decode=function(t,r,n){for(var a,i,o=new Sr(this.field,t),s=new Int32Array(r),l=!1,d=r;d>0;d--){var u=o.evaluateAt(this.field.exp(d));s[r-d]=u,u!==0&&(l=!0)}if(!l)return 0;var h=this.field.getOne();if(n!=null)try{for(var f=dv(n),p=f.next();!p.done;p=f.next()){var m=p.value,g=this.field.exp(t.length-1-m),x=new Sr(this.field,new Int32Array([this.field.subtract(0,g),1]));h=h.multiply(x)}}catch(N){a={error:N}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(a)throw a.error}}for(var y=new Sr(this.field,s),v=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),y,r),w=v[0],S=v[1],C=this.findErrorLocations(w),k=this.findErrorMagnitudes(S,w,C),d=0;d<C.length;d++){var A=t.length-1-this.field.log(C[d]);if(A<0)throw De.getChecksumInstance();t[A]=this.field.subtract(t[A],k[d])}return C.length},e.prototype.runEuclideanAlgorithm=function(t,r,n){if(t.getDegree()<r.getDegree()){var a=t;t=r,r=a}for(var i=t,o=r,s=this.field.getZero(),l=this.field.getOne();o.getDegree()>=Math.round(n/2);){var d=i,u=s;if(i=o,s=l,i.isZero())throw De.getChecksumInstance();o=d;for(var h=this.field.getZero(),f=i.getCoefficient(i.getDegree()),p=this.field.inverse(f);o.getDegree()>=i.getDegree()&&!o.isZero();){var m=o.getDegree()-i.getDegree(),g=this.field.multiply(o.getCoefficient(o.getDegree()),p);h=h.add(this.field.buildMonomial(m,g)),o=o.subtract(i.multiplyByMonomial(m,g))}l=h.multiply(s).subtract(u).negative()}var x=l.getCoefficient(0);if(x===0)throw De.getChecksumInstance();var y=this.field.inverse(x),v=l.multiply(y),w=o.multiply(y);return[v,w]},e.prototype.findErrorLocations=function(t){for(var r=t.getDegree(),n=new Int32Array(r),a=0,i=1;i<this.field.getSize()&&a<r;i++)t.evaluateAt(i)===0&&(n[a]=this.field.inverse(i),a++);if(a!==r)throw De.getChecksumInstance();return n},e.prototype.findErrorMagnitudes=function(t,r,n){for(var a=r.getDegree(),i=new Int32Array(a),o=1;o<=a;o++)i[a-o]=this.field.multiply(o,r.getCoefficient(o));for(var s=new Sr(this.field,i),l=n.length,d=new Int32Array(l),o=0;o<l;o++){var u=this.field.inverse(n[o]),h=this.field.subtract(0,t.evaluateAt(u)),f=this.field.inverse(s.evaluateAt(u));d[o]=this.field.multiply(h,f)}return d},e})(),as=(function(){function e(t,r,n,a,i){t instanceof e?this.constructor_2(t):this.constructor_1(t,r,n,a,i)}return e.prototype.constructor_1=function(t,r,n,a,i){var o=r==null||n==null,s=a==null||i==null;if(o&&s)throw new D;o?(r=new X(0,a.getY()),n=new X(0,i.getY())):s&&(a=new X(t.getWidth()-1,r.getY()),i=new X(t.getWidth()-1,n.getY())),this.image=t,this.topLeft=r,this.bottomLeft=n,this.topRight=a,this.bottomRight=i,this.minX=Math.trunc(Math.min(r.getX(),n.getX())),this.maxX=Math.trunc(Math.max(a.getX(),i.getX())),this.minY=Math.trunc(Math.min(r.getY(),a.getY())),this.maxY=Math.trunc(Math.max(n.getY(),i.getY()))},e.prototype.constructor_2=function(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()},e.merge=function(t,r){return t==null?r:r==null?t:new e(t.image,t.topLeft,t.bottomLeft,r.topRight,r.bottomRight)},e.prototype.addMissingRows=function(t,r,n){var a=this.topLeft,i=this.bottomLeft,o=this.topRight,s=this.bottomRight;if(t>0){var l=n?this.topLeft:this.topRight,d=Math.trunc(l.getY()-t);d<0&&(d=0);var u=new X(l.getX(),d);n?a=u:o=u}if(r>0){var h=n?this.bottomLeft:this.bottomRight,f=Math.trunc(h.getY()+r);f>=this.image.getHeight()&&(f=this.image.getHeight()-1);var p=new X(h.getX(),f);n?i=p:s=p}return new e(this.image,a,i,o,s)},e.prototype.getMinX=function(){return this.minX},e.prototype.getMaxX=function(){return this.maxX},e.prototype.getMinY=function(){return this.minY},e.prototype.getMaxY=function(){return this.maxY},e.prototype.getTopLeft=function(){return this.topLeft},e.prototype.getTopRight=function(){return this.topRight},e.prototype.getBottomLeft=function(){return this.bottomLeft},e.prototype.getBottomRight=function(){return this.bottomRight},e})(),hv=(function(){function e(t,r,n,a){this.columnCount=t,this.errorCorrectionLevel=a,this.rowCountUpperPart=r,this.rowCountLowerPart=n,this.rowCount=r+n}return e.prototype.getColumnCount=function(){return this.columnCount},e.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},e.prototype.getRowCount=function(){return this.rowCount},e.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},e.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},e})(),Ws=(function(){function e(){this.buffer=""}return e.form=function(t,r){var n=-1;function a(o,s,l,d,u,h){if(o==="%%")return"%";if(r[++n]!==void 0){o=d?parseInt(d.substr(1)):void 0;var f=u?parseInt(u.substr(1)):void 0,p;switch(h){case"s":p=r[n];break;case"c":p=r[n][0];break;case"f":p=parseFloat(r[n]).toFixed(o);break;case"p":p=parseFloat(r[n]).toPrecision(o);break;case"e":p=parseFloat(r[n]).toExponential(o);break;case"x":p=parseInt(r[n]).toString(f||16);break;case"d":p=parseFloat(parseInt(r[n],f||10).toPrecision(o)).toFixed(0);break}p=typeof p=="object"?JSON.stringify(p):(+p).toString(f);for(var m=parseInt(l),g=l&&l[0]+""=="0"?"0":" ";p.length<m;)p=s!==void 0?p+g:g+p;return p}}var i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(i,a)},e.prototype.format=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.buffer+=e.form(t,r)},e.prototype.toString=function(){return this.buffer},e})(),fv=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Bh=(function(){function e(t){this.boundingBox=new as(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}return e.prototype.getCodewordNearby=function(t){var r=this.getCodeword(t);if(r!=null)return r;for(var n=1;n<e.MAX_NEARBY_DISTANCE;n++){var a=this.imageRowToCodewordIndex(t)-n;if(a>=0&&(r=this.codewords[a],r!=null)||(a=this.imageRowToCodewordIndex(t)+n,a<this.codewords.length&&(r=this.codewords[a],r!=null)))return r}return null},e.prototype.imageRowToCodewordIndex=function(t){return t-this.boundingBox.getMinY()},e.prototype.setCodeword=function(t,r){this.codewords[this.imageRowToCodewordIndex(t)]=r},e.prototype.getCodeword=function(t){return this.codewords[this.imageRowToCodewordIndex(t)]},e.prototype.getBoundingBox=function(){return this.boundingBox},e.prototype.getCodewords=function(){return this.codewords},e.prototype.toString=function(){var t,r,n=new Ws,a=0;try{for(var i=fv(this.codewords),o=i.next();!o.done;o=i.next()){var s=o.value;if(s==null){n.format("%3d:    |   %n",a++);continue}n.format("%3d: %3d|%3d%n",a++,s.getRowNumber(),s.getValue())}}catch(l){t={error:l}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return n.toString()},e.MAX_NEARBY_DISTANCE=5,e})(),pv=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},mv=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},Nn=(function(){function e(){this.values=new Map}return e.prototype.setValue=function(t){t=Math.trunc(t);var r=this.values.get(t);r==null&&(r=0),r++,this.values.set(t,r)},e.prototype.getValue=function(){var t,r,n=-1,a=new Array,i=function(h,f){var p={getKey:function(){return h},getValue:function(){return f}};p.getValue()>n?(n=p.getValue(),a=[],a.push(p.getKey())):p.getValue()===n&&a.push(p.getKey())};try{for(var o=pv(this.values.entries()),s=o.next();!s.done;s=o.next()){var l=mv(s.value,2),d=l[0],u=l[1];i(d,u)}}catch(h){t={error:h}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return ue.toIntArray(a)},e.prototype.getConfidence=function(t){return this.values.get(t)},e})(),gv=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),yo=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Nc=(function(e){gv(t,e);function t(r,n){var a=e.call(this,r)||this;return a._isLeft=n,a}return t.prototype.setRowNumbers=function(){var r,n;try{for(var a=yo(this.getCodewords()),i=a.next();!i.done;i=a.next()){var o=i.value;o?.setRowNumberAsRowIndicatorColumn()}}catch(s){r={error:s}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},t.prototype.adjustCompleteIndicatorColumnRowNumbers=function(r){var n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,r);for(var a=this.getBoundingBox(),i=this._isLeft?a.getTopLeft():a.getTopRight(),o=this._isLeft?a.getBottomLeft():a.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),l=this.imageRowToCodewordIndex(Math.trunc(o.getY())),d=-1,u=1,h=0,f=s;f<l;f++)if(n[f]!=null){var p=n[f],m=p.getRowNumber()-d;if(m===0)h++;else if(m===1)u=Math.max(u,h),h=1,d=p.getRowNumber();else if(m<0||p.getRowNumber()>=r.getRowCount()||m>f)n[f]=null;else{var g=void 0;u>2?g=(u-2)*m:g=m;for(var x=g>=f,y=1;y<=g&&!x;y++)x=n[f-y]!=null;x?n[f]=null:(d=p.getRowNumber(),h=1)}}},t.prototype.getRowHeights=function(){var r,n,a=this.getBarcodeMetadata();if(a==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(a);var i=new Int32Array(a.getRowCount());try{for(var o=yo(this.getCodewords()),s=o.next();!s.done;s=o.next()){var l=s.value;if(l!=null){var d=l.getRowNumber();if(d>=i.length)continue;i[d]++}}}catch(u){r={error:u}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return i},t.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(r){for(var n=this.getBoundingBox(),a=this._isLeft?n.getTopLeft():n.getTopRight(),i=this._isLeft?n.getBottomLeft():n.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(a.getY())),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),l=this.getCodewords(),d=-1,u=o;u<s;u++)if(l[u]!=null){var h=l[u];h.setRowNumberAsRowIndicatorColumn();var f=h.getRowNumber()-d;f===0||(f===1?d=h.getRowNumber():h.getRowNumber()>=r.getRowCount()?l[u]=null:d=h.getRowNumber())}},t.prototype.getBarcodeMetadata=function(){var r,n,a=this.getCodewords(),i=new Nn,o=new Nn,s=new Nn,l=new Nn;try{for(var d=yo(a),u=d.next();!u.done;u=d.next()){var h=u.value;if(h!=null){h.setRowNumberAsRowIndicatorColumn();var f=h.getValue()%30,p=h.getRowNumber();switch(this._isLeft||(p+=2),p%3){case 0:o.setValue(f*3+1);break;case 1:l.setValue(f/3),s.setValue(f%3);break;case 2:i.setValue(f+1);break}}}}catch(g){r={error:g}}finally{try{u&&!u.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}if(i.getValue().length===0||o.getValue().length===0||s.getValue().length===0||l.getValue().length===0||i.getValue()[0]<1||o.getValue()[0]+s.getValue()[0]<ue.MIN_ROWS_IN_BARCODE||o.getValue()[0]+s.getValue()[0]>ue.MAX_ROWS_IN_BARCODE)return null;var m=new hv(i.getValue()[0],o.getValue()[0],s.getValue()[0],l.getValue()[0]);return this.removeIncorrectCodewords(a,m),m},t.prototype.removeIncorrectCodewords=function(r,n){for(var a=0;a<r.length;a++){var i=r[a];if(r[a]!=null){var o=i.getValue()%30,s=i.getRowNumber();if(s>n.getRowCount()){r[a]=null;continue}switch(this._isLeft||(s+=2),s%3){case 0:o*3+1!==n.getRowCountUpperPart()&&(r[a]=null);break;case 1:(Math.trunc(o/3)!==n.getErrorCorrectionLevel()||o%3!==n.getRowCountLowerPart())&&(r[a]=null);break;case 2:o+1!==n.getColumnCount()&&(r[a]=null);break}}}},t.prototype.isLeft=function(){return this._isLeft},t.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+e.prototype.toString.call(this)},t})(Bh),xv=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},vv=(function(){function e(t,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return e.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var t=ue.MAX_CODEWORDS_IN_BARCODE,r;do r=t,t=this.adjustRowNumbersAndGetCount();while(t>0&&t<r);return this.detectionResultColumns},e.prototype.adjustIndicatorColumnRowNumbers=function(t){t?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},e.prototype.adjustRowNumbersAndGetCount=function(){var t=this.adjustRowNumbersByRow();if(t===0)return 0;for(var r=1;r<this.barcodeColumnCount+1;r++)for(var n=this.detectionResultColumns[r].getCodewords(),a=0;a<n.length;a++)n[a]!=null&&(n[a].hasValidRowNumber()||this.adjustRowNumbers(r,a,n));return t},e.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var t=this.adjustRowNumbersFromLRI();return t+this.adjustRowNumbersFromRRI()},e.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var t=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<t.length;n++)if(t[n]!=null&&r[n]!=null&&t[n].getRowNumber()===r[n].getRowNumber())for(var a=1;a<=this.barcodeColumnCount;a++){var i=this.detectionResultColumns[a].getCodewords()[n];i!=null&&(i.setRowNumber(t[n].getRowNumber()),i.hasValidRowNumber()||(this.detectionResultColumns[a].getCodewords()[n]=null))}}},e.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var t=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var a=r[n].getRowNumber(),i=0,o=this.barcodeColumnCount+1;o>0&&i<this.ADJUST_ROW_NUMBER_SKIP;o--){var s=this.detectionResultColumns[o].getCodewords()[n];s!=null&&(i=e.adjustRowNumberIfValid(a,i,s),s.hasValidRowNumber()||t++)}return t},e.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var t=0,r=this.detectionResultColumns[0].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var a=r[n].getRowNumber(),i=0,o=1;o<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;o++){var s=this.detectionResultColumns[o].getCodewords()[n];s!=null&&(i=e.adjustRowNumberIfValid(a,i,s),s.hasValidRowNumber()||t++)}return t},e.adjustRowNumberIfValid=function(t,r,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(t)?(n.setRowNumber(t),r=0):++r),r},e.prototype.adjustRowNumbers=function(t,r,n){var a,i;if(this.detectionResultColumns[t-1]!=null){var o=n[r],s=this.detectionResultColumns[t-1].getCodewords(),l=s;this.detectionResultColumns[t+1]!=null&&(l=this.detectionResultColumns[t+1].getCodewords());var d=new Array(14);d[2]=s[r],d[3]=l[r],r>0&&(d[0]=n[r-1],d[4]=s[r-1],d[5]=l[r-1]),r>1&&(d[8]=n[r-2],d[10]=s[r-2],d[11]=l[r-2]),r<n.length-1&&(d[1]=n[r+1],d[6]=s[r+1],d[7]=l[r+1]),r<n.length-2&&(d[9]=n[r+2],d[12]=s[r+2],d[13]=l[r+2]);try{for(var u=xv(d),h=u.next();!h.done;h=u.next()){var f=h.value;if(e.adjustRowNumber(o,f))return}}catch(p){a={error:p}}finally{try{h&&!h.done&&(i=u.return)&&i.call(u)}finally{if(a)throw a.error}}}},e.adjustRowNumber=function(t,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===t.getBucket()?(t.setRowNumber(r.getRowNumber()),!0):!1},e.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},e.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},e.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},e.prototype.setBoundingBox=function(t){this.boundingBox=t},e.prototype.getBoundingBox=function(){return this.boundingBox},e.prototype.setDetectionResultColumn=function(t,r){this.detectionResultColumns[t]=r},e.prototype.getDetectionResultColumn=function(t){return this.detectionResultColumns[t]},e.prototype.toString=function(){var t=this.detectionResultColumns[0];t==null&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var r=new Ws,n=0;n<t.getCodewords().length;n++){r.format("CW %3d:",n);for(var a=0;a<this.barcodeColumnCount+2;a++){if(this.detectionResultColumns[a]==null){r.format("    |   ");continue}var i=this.detectionResultColumns[a].getCodewords()[n];if(i==null){r.format("    |   ");continue}r.format(" %3d|%3d",i.getRowNumber(),i.getValue())}r.format("%n")}return r.toString()},e})(),yv=(function(){function e(t,r,n,a){this.rowNumber=e.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(r),this.bucket=Math.trunc(n),this.value=Math.trunc(a)}return e.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},e.prototype.isValidRowNumber=function(t){return t!==e.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3},e.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},e.prototype.getWidth=function(){return this.endX-this.startX},e.prototype.getStartX=function(){return this.startX},e.prototype.getEndX=function(){return this.endX},e.prototype.getBucket=function(){return this.bucket},e.prototype.getValue=function(){return this.value},e.prototype.getRowNumber=function(){return this.rowNumber},e.prototype.setRowNumber=function(t){this.rowNumber=t},e.prototype.toString=function(){return this.rowNumber+"|"+this.value},e.BARCODE_ROW_UNKNOWN=-1,e})(),bv=(function(){function e(){}return e.initialize=function(){for(var t=0;t<ue.SYMBOL_TABLE.length;t++)for(var r=ue.SYMBOL_TABLE[t],n=r&1,a=0;a<ue.BARS_IN_MODULE;a++){for(var i=0;(r&1)===n;)i+=1,r>>=1;n=r&1,e.RATIOS_TABLE[t]||(e.RATIOS_TABLE[t]=new Array(ue.BARS_IN_MODULE)),e.RATIOS_TABLE[t][ue.BARS_IN_MODULE-a-1]=Math.fround(i/ue.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},e.getDecodedValue=function(t){var r=e.getDecodedCodewordValue(e.sampleBitCounts(t));return r!==-1?r:e.getClosestDecodedValue(t)},e.sampleBitCounts=function(t){for(var r=he.sum(t),n=new Int32Array(ue.BARS_IN_MODULE),a=0,i=0,o=0;o<ue.MODULES_IN_CODEWORD;o++){var s=r/(2*ue.MODULES_IN_CODEWORD)+o*r/ue.MODULES_IN_CODEWORD;i+t[a]<=s&&(i+=t[a],a++),n[a]++}return n},e.getDecodedCodewordValue=function(t){var r=e.getBitValue(t);return ue.getCodeword(r)===-1?-1:r},e.getBitValue=function(t){for(var r=0,n=0;n<t.length;n++)for(var a=0;a<t[n];a++)r=r<<1|(n%2===0?1:0);return Math.trunc(r)},e.getClosestDecodedValue=function(t){var r=he.sum(t),n=new Array(ue.BARS_IN_MODULE);if(r>1)for(var a=0;a<n.length;a++)n[a]=Math.fround(t[a]/r);var i=ts.MAX_VALUE,o=-1;this.bSymbolTableReady||e.initialize();for(var s=0;s<e.RATIOS_TABLE.length;s++){for(var l=0,d=e.RATIOS_TABLE[s],u=0;u<ue.BARS_IN_MODULE;u++){var h=Math.fround(d[u]-n[u]);if(l+=Math.fround(h*h),l>=i)break}l<i&&(i=l,o=ue.SYMBOL_TABLE[s])}return o},e.bSymbolTableReady=!1,e.RATIOS_TABLE=new Array(ue.SYMBOL_TABLE.length).map(function(t){return new Array(ue.BARS_IN_MODULE)}),e})(),wv=(function(){function e(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return e.prototype.getSegmentIndex=function(){return this.segmentIndex},e.prototype.setSegmentIndex=function(t){this.segmentIndex=t},e.prototype.getFileId=function(){return this.fileId},e.prototype.setFileId=function(t){this.fileId=t},e.prototype.getOptionalData=function(){return this.optionalData},e.prototype.setOptionalData=function(t){this.optionalData=t},e.prototype.isLastSegment=function(){return this.lastSegment},e.prototype.setLastSegment=function(t){this.lastSegment=t},e.prototype.getSegmentCount=function(){return this.segmentCount},e.prototype.setSegmentCount=function(t){this.segmentCount=t},e.prototype.getSender=function(){return this.sender||null},e.prototype.setSender=function(t){this.sender=t},e.prototype.getAddressee=function(){return this.addressee||null},e.prototype.setAddressee=function(t){this.addressee=t},e.prototype.getFileName=function(){return this.fileName},e.prototype.setFileName=function(t){this.fileName=t},e.prototype.getFileSize=function(){return this.fileSize},e.prototype.setFileSize=function(t){this.fileSize=t},e.prototype.getChecksum=function(){return this.checksum},e.prototype.setChecksum=function(t){this.checksum=t},e.prototype.getTimestamp=function(){return this.timestamp},e.prototype.setTimestamp=function(t){this.timestamp=t},e})(),Tc=(function(){function e(){}return e.parseLong=function(t,r){return r===void 0&&(r=void 0),parseInt(t,r)},e})(),_v=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Cv=(function(e){_v(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.kind="NullPointerException",t})(ht),Sv=(function(){function e(){}return e.prototype.writeBytes=function(t){this.writeBytesOffset(t,0,t.length)},e.prototype.writeBytesOffset=function(t,r,n){if(t==null)throw new Cv;if(r<0||r>t.length||n<0||r+n>t.length||r+n<0)throw new Hs;if(n===0)return;for(var a=0;a<n;a++)this.write(t[r+a])},e.prototype.flush=function(){},e.prototype.close=function(){},e})(),Av=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),kv=(function(e){Av(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(ht),Ev=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Nv=(function(e){Ev(t,e);function t(r){r===void 0&&(r=32);var n=e.call(this)||this;if(n.count=0,r<0)throw new ee("Negative initial size: "+r);return n.buf=new Uint8Array(r),n}return t.prototype.ensureCapacity=function(r){r-this.buf.length>0&&this.grow(r)},t.prototype.grow=function(r){var n=this.buf.length,a=n<<1;if(a-r<0&&(a=r),a<0){if(r<0)throw new kv;a=le.MAX_VALUE}this.buf=$e.copyOfUint8Array(this.buf,a)},t.prototype.write=function(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1},t.prototype.writeBytesOffset=function(r,n,a){if(n<0||n>r.length||a<0||n+a-r.length>0)throw new Hs;this.ensureCapacity(this.count+a),_e.arraycopy(r,n,this.buf,this.count,a),this.count+=a},t.prototype.writeTo=function(r){r.writeBytesOffset(this.buf,0,this.count)},t.prototype.reset=function(){this.count=0},t.prototype.toByteArray=function(){return $e.copyOfUint8Array(this.buf,this.count)},t.prototype.size=function(){return this.count},t.prototype.toString=function(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()},t.prototype.toString_void=function(){return new String(this.buf).toString()},t.prototype.toString_string=function(r){return new String(this.buf).toString()},t.prototype.toString_number=function(r){return new String(this.buf).toString()},t.prototype.close=function(){},t})(Sv),be;(function(e){e[e.ALPHA=0]="ALPHA",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.PUNCT=3]="PUNCT",e[e.ALPHA_SHIFT=4]="ALPHA_SHIFT",e[e.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(be||(be={}));function jh(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var ya;function cr(e){if(typeof ya>"u"&&(ya=jh()),ya===null)throw new Error("BigInt is not supported!");return ya(e)}function Tv(){var e=[];e[0]=cr(1);var t=cr(900);e[1]=t;for(var r=2;r<16;r++)e[r]=e[r-1]*t;return e}var Iv=(function(){function e(){}return e.decode=function(t,r){var n=new se(""),a=Fe.ISO8859_1;n.enableDecoding(a);for(var i=1,o=t[i++],s=new wv;i<t[0];){switch(o){case e.TEXT_COMPACTION_MODE_LATCH:i=e.textCompaction(t,i,n);break;case e.BYTE_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:i=e.byteCompaction(o,t,a,i,n);break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(t[i++]);break;case e.NUMERIC_COMPACTION_MODE_LATCH:i=e.numericCompaction(t,i,n);break;case e.ECI_CHARSET:Fe.getCharacterSetECIByValue(t[i++]);break;case e.ECI_GENERAL_PURPOSE:i+=2;break;case e.ECI_USER_DEFINED:i++;break;case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=e.decodeMacroBlock(t,i,s);break;case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:throw new H;default:i--,i=e.textCompaction(t,i,n);break}if(i<t.length)o=t[i++];else throw H.getFormatInstance()}if(n.length()===0)throw H.getFormatInstance();var l=new Fi(null,n.toString(),null,r);return l.setOther(s),l},e.decodeMacroBlock=function(t,r,n){if(r+e.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw H.getFormatInstance();for(var a=new Int32Array(e.NUMBER_OF_SEQUENCE_CODEWORDS),i=0;i<e.NUMBER_OF_SEQUENCE_CODEWORDS;i++,r++)a[i]=t[r];n.setSegmentIndex(le.parseInt(e.decodeBase900toBase10(a,e.NUMBER_OF_SEQUENCE_CODEWORDS)));var o=new se;r=e.textCompaction(t,r,o),n.setFileId(o.toString());var s=-1;for(t[r]===e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=r+1);r<t[0];)switch(t[r]){case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,t[r]){case e.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var l=new se;r=e.textCompaction(t,r+1,l),n.setFileName(l.toString());break;case e.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var d=new se;r=e.textCompaction(t,r+1,d),n.setSender(d.toString());break;case e.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var u=new se;r=e.textCompaction(t,r+1,u),n.setAddressee(u.toString());break;case e.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var h=new se;r=e.numericCompaction(t,r+1,h),n.setSegmentCount(le.parseInt(h.toString()));break;case e.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var f=new se;r=e.numericCompaction(t,r+1,f),n.setTimestamp(Tc.parseLong(f.toString()));break;case e.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var p=new se;r=e.numericCompaction(t,r+1,p),n.setChecksum(le.parseInt(p.toString()));break;case e.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var m=new se;r=e.numericCompaction(t,r+1,m),n.setFileSize(Tc.parseLong(m.toString()));break;default:throw H.getFormatInstance()}break;case e.MACRO_PDF417_TERMINATOR:r++,n.setLastSegment(!0);break;default:throw H.getFormatInstance()}if(s!==-1){var g=r-s;n.isLastSegment()&&g--,n.setOptionalData($e.copyOfRange(t,s,s+g))}return r},e.textCompaction=function(t,r,n){for(var a=new Int32Array((t[0]-r)*2),i=new Int32Array((t[0]-r)*2),o=0,s=!1;r<t[0]&&!s;){var l=t[r++];if(l<e.TEXT_COMPACTION_MODE_LATCH)a[o]=l/30,a[o+1]=l%30,o+=2;else switch(l){case e.TEXT_COMPACTION_MODE_LATCH:a[o++]=e.TEXT_COMPACTION_MODE_LATCH;break;case e.BYTE_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:case e.NUMERIC_COMPACTION_MODE_LATCH:case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:r--,s=!0;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a[o]=e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,l=t[r++],i[o]=l,o++;break}}return e.decodeTextCompaction(a,i,o,n),r},e.decodeTextCompaction=function(t,r,n,a){for(var i=be.ALPHA,o=be.ALPHA,s=0;s<n;){var l=t[s],d="";switch(i){case be.ALPHA:if(l<26)d=String.fromCharCode(65+l);else switch(l){case 26:d=" ";break;case e.LL:i=be.LOWER;break;case e.ML:i=be.MIXED;break;case e.PS:o=i,i=be.PUNCT_SHIFT;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:i=be.ALPHA;break}break;case be.LOWER:if(l<26)d=String.fromCharCode(97+l);else switch(l){case 26:d=" ";break;case e.AS:o=i,i=be.ALPHA_SHIFT;break;case e.ML:i=be.MIXED;break;case e.PS:o=i,i=be.PUNCT_SHIFT;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:i=be.ALPHA;break}break;case be.MIXED:if(l<e.PL)d=e.MIXED_CHARS[l];else switch(l){case e.PL:i=be.PUNCT;break;case 26:d=" ";break;case e.LL:i=be.LOWER;break;case e.AL:i=be.ALPHA;break;case e.PS:o=i,i=be.PUNCT_SHIFT;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:i=be.ALPHA;break}break;case be.PUNCT:if(l<e.PAL)d=e.PUNCT_CHARS[l];else switch(l){case e.PAL:i=be.ALPHA;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:i=be.ALPHA;break}break;case be.ALPHA_SHIFT:if(i=o,l<26)d=String.fromCharCode(65+l);else switch(l){case 26:d=" ";break;case e.TEXT_COMPACTION_MODE_LATCH:i=be.ALPHA;break}break;case be.PUNCT_SHIFT:if(i=o,l<e.PAL)d=e.PUNCT_CHARS[l];else switch(l){case e.PAL:i=be.ALPHA;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[s]);break;case e.TEXT_COMPACTION_MODE_LATCH:i=be.ALPHA;break}break}d!==""&&a.append(d),s++}},e.byteCompaction=function(t,r,n,a,i){var o=new Nv,s=0,l=0,d=!1;switch(t){case e.BYTE_COMPACTION_MODE_LATCH:for(var u=new Int32Array(6),h=r[a++];a<r[0]&&!d;)switch(u[s++]=h,l=900*l+h,h=r[a++],h){case e.TEXT_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH:case e.NUMERIC_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:a--,d=!0;break;default:if(s%5===0&&s>0){for(var f=0;f<6;++f)o.write(Number(cr(l)>>cr(8*(5-f))));l=0,s=0}break}a===r[0]&&h<e.TEXT_COMPACTION_MODE_LATCH&&(u[s++]=h);for(var p=0;p<s;p++)o.write(u[p]);break;case e.BYTE_COMPACTION_MODE_LATCH_6:for(;a<r[0]&&!d;){var m=r[a++];if(m<e.TEXT_COMPACTION_MODE_LATCH)s++,l=900*l+m;else switch(m){case e.TEXT_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH:case e.NUMERIC_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:a--,d=!0;break}if(s%5===0&&s>0){for(var f=0;f<6;++f)o.write(Number(cr(l)>>cr(8*(5-f))));l=0,s=0}}break}return i.append(kt.decode(o.toByteArray(),n)),a},e.numericCompaction=function(t,r,n){for(var a=0,i=!1,o=new Int32Array(e.MAX_NUMERIC_CODEWORDS);r<t[0]&&!i;){var s=t[r++];if(r===t[0]&&(i=!0),s<e.TEXT_COMPACTION_MODE_LATCH)o[a]=s,a++;else switch(s){case e.TEXT_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:r--,i=!0;break}(a%e.MAX_NUMERIC_CODEWORDS===0||s===e.NUMERIC_COMPACTION_MODE_LATCH||i)&&a>0&&(n.append(e.decodeBase900toBase10(o,a)),a=0)}return r},e.decodeBase900toBase10=function(t,r){for(var n=cr(0),a=0;a<r;a++)n+=e.EXP900[r-a-1]*cr(t[a]);var i=n.toString();if(i.charAt(0)!=="1")throw new H;return i.substring(1)},e.TEXT_COMPACTION_MODE_LATCH=900,e.BYTE_COMPACTION_MODE_LATCH=901,e.NUMERIC_COMPACTION_MODE_LATCH=902,e.BYTE_COMPACTION_MODE_LATCH_6=924,e.ECI_USER_DEFINED=925,e.ECI_GENERAL_PURPOSE=926,e.ECI_CHARSET=927,e.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,e.MACRO_PDF417_TERMINATOR=922,e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,e.MAX_NUMERIC_CODEWORDS=15,e.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,e.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,e.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,e.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,e.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,e.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,e.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,e.PL=25,e.LL=27,e.AS=27,e.ML=28,e.AL=28,e.PS=29,e.PAL=29,e.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,e.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",e.EXP900=jh()?Tv():[],e.NUMBER_OF_SEQUENCE_CODEWORDS=2,e})(),_n=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ov=(function(){function e(){}return e.decode=function(t,r,n,a,i,o,s){for(var l=new as(t,r,n,a,i),d=null,u=null,h,f=!0;;f=!1){if(r!=null&&(d=e.getRowIndicatorColumn(t,l,r,!0,o,s)),a!=null&&(u=e.getRowIndicatorColumn(t,l,a,!1,o,s)),h=e.merge(d,u),h==null)throw D.getNotFoundInstance();var p=h.getBoundingBox();if(f&&p!=null&&(p.getMinY()<l.getMinY()||p.getMaxY()>l.getMaxY()))l=p;else break}h.setBoundingBox(l);var m=h.getBarcodeColumnCount()+1;h.setDetectionResultColumn(0,d),h.setDetectionResultColumn(m,u);for(var g=d!=null,x=1;x<=m;x++){var y=g?x:m-x;if(h.getDetectionResultColumn(y)===void 0){var v=void 0;y===0||y===m?v=new Nc(l,y===0):v=new Bh(l),h.setDetectionResultColumn(y,v);for(var w=-1,S=w,C=l.getMinY();C<=l.getMaxY();C++){if(w=e.getStartColumn(h,y,C,g),w<0||w>l.getMaxX()){if(S===-1)continue;w=S}var k=e.detectCodeword(t,l.getMinX(),l.getMaxX(),g,w,C,o,s);k!=null&&(v.setCodeword(C,k),S=w,o=Math.min(o,k.getWidth()),s=Math.max(s,k.getWidth()))}}}return e.createDecoderResult(h)},e.merge=function(t,r){if(t==null&&r==null)return null;var n=e.getBarcodeMetadata(t,r);if(n==null)return null;var a=as.merge(e.adjustBoundingBox(t),e.adjustBoundingBox(r));return new vv(n,a)},e.adjustBoundingBox=function(t){var r,n;if(t==null)return null;var a=t.getRowHeights();if(a==null)return null;var i=e.getMax(a),o=0;try{for(var s=_n(a),l=s.next();!l.done;l=s.next()){var d=l.value;if(o+=i-d,d>0)break}}catch(p){r={error:p}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}for(var u=t.getCodewords(),h=0;o>0&&u[h]==null;h++)o--;for(var f=0,h=a.length-1;h>=0&&(f+=i-a[h],!(a[h]>0));h--);for(var h=u.length-1;f>0&&u[h]==null;h--)f--;return t.getBoundingBox().addMissingRows(o,f,t.isLeft())},e.getMax=function(t){var r,n,a=-1;try{for(var i=_n(t),o=i.next();!o.done;o=i.next()){var s=o.value;a=Math.max(a,s)}}catch(l){r={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a},e.getBarcodeMetadata=function(t,r){var n;if(t==null||(n=t.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();var a;return r==null||(a=r.getBarcodeMetadata())==null?n:n.getColumnCount()!==a.getColumnCount()&&n.getErrorCorrectionLevel()!==a.getErrorCorrectionLevel()&&n.getRowCount()!==a.getRowCount()?null:n},e.getRowIndicatorColumn=function(t,r,n,a,i,o){for(var s=new Nc(r,a),l=0;l<2;l++)for(var d=l===0?1:-1,u=Math.trunc(Math.trunc(n.getX())),h=Math.trunc(Math.trunc(n.getY()));h<=r.getMaxY()&&h>=r.getMinY();h+=d){var f=e.detectCodeword(t,0,t.getWidth(),a,u,h,i,o);f!=null&&(s.setCodeword(h,f),a?u=f.getStartX():u=f.getEndX())}return s},e.adjustCodewordCount=function(t,r){var n=r[0][1],a=n.getValue(),i=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-e.getNumberOfECCodeWords(t.getBarcodeECLevel());if(a.length===0){if(i<1||i>ue.MAX_CODEWORDS_IN_BARCODE)throw D.getNotFoundInstance();n.setValue(i)}else a[0]!==i&&n.setValue(i)},e.createDecoderResult=function(t){var r=e.createBarcodeMatrix(t);e.adjustCodewordCount(t,r);for(var n=new Array,a=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),i=[],o=new Array,s=0;s<t.getBarcodeRowCount();s++)for(var l=0;l<t.getBarcodeColumnCount();l++){var d=r[s][l+1].getValue(),u=s*t.getBarcodeColumnCount()+l;d.length===0?n.push(u):d.length===1?a[u]=d[0]:(o.push(u),i.push(d))}for(var h=new Array(i.length),f=0;f<h.length;f++)h[f]=i[f];return e.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),a,ue.toIntArray(n),ue.toIntArray(o),h)},e.createDecoderResultFromAmbiguousValues=function(t,r,n,a,i){for(var o=new Int32Array(a.length),s=100;s-- >0;){for(var l=0;l<o.length;l++)r[a[l]]=i[l][o[l]];try{return e.decodeCodewords(r,t,n)}catch(u){var d=u instanceof De;if(!d)throw u}if(o.length===0)throw De.getChecksumInstance();for(var l=0;l<o.length;l++)if(o[l]<i[l].length-1){o[l]++;break}else if(o[l]=0,l===o.length-1)throw De.getChecksumInstance()}throw De.getChecksumInstance()},e.createBarcodeMatrix=function(t){for(var r,n,a,i,o=Array.from({length:t.getBarcodeRowCount()},function(){return new Array(t.getBarcodeColumnCount()+2)}),s=0;s<o.length;s++)for(var l=0;l<o[s].length;l++)o[s][l]=new Nn;var d=0;try{for(var u=_n(t.getDetectionResultColumns()),h=u.next();!h.done;h=u.next()){var f=h.value;if(f!=null)try{for(var p=(a=void 0,_n(f.getCodewords())),m=p.next();!m.done;m=p.next()){var g=m.value;if(g!=null){var x=g.getRowNumber();if(x>=0){if(x>=o.length)continue;o[x][d].setValue(g.getValue())}}}}catch(y){a={error:y}}finally{try{m&&!m.done&&(i=p.return)&&i.call(p)}finally{if(a)throw a.error}}d++}}catch(y){r={error:y}}finally{try{h&&!h.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}return o},e.isValidBarcodeColumn=function(t,r){return r>=0&&r<=t.getBarcodeColumnCount()+1},e.getStartColumn=function(t,r,n,a){var i,o,s=a?1:-1,l=null;if(e.isValidBarcodeColumn(t,r-s)&&(l=t.getDetectionResultColumn(r-s).getCodeword(n)),l!=null)return a?l.getEndX():l.getStartX();if(l=t.getDetectionResultColumn(r).getCodewordNearby(n),l!=null)return a?l.getStartX():l.getEndX();if(e.isValidBarcodeColumn(t,r-s)&&(l=t.getDetectionResultColumn(r-s).getCodewordNearby(n)),l!=null)return a?l.getEndX():l.getStartX();for(var d=0;e.isValidBarcodeColumn(t,r-s);){r-=s;try{for(var u=(i=void 0,_n(t.getDetectionResultColumn(r).getCodewords())),h=u.next();!h.done;h=u.next()){var f=h.value;if(f!=null)return(a?f.getEndX():f.getStartX())+s*d*(f.getEndX()-f.getStartX())}}catch(p){i={error:p}}finally{try{h&&!h.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}d++}return a?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()},e.detectCodeword=function(t,r,n,a,i,o,s,l){i=e.adjustCodewordStartColumn(t,r,n,a,i,o);var d=e.getModuleBitCount(t,r,n,a,i,o);if(d==null)return null;var u,h=he.sum(d);if(a)u=i+h;else{for(var f=0;f<d.length/2;f++){var p=d[f];d[f]=d[d.length-1-f],d[d.length-1-f]=p}u=i,i=u-h}if(!e.checkCodewordSkew(h,s,l))return null;var m=bv.getDecodedValue(d),g=ue.getCodeword(m);return g===-1?null:new yv(i,u,e.getCodewordBucketNumber(m),g)},e.getModuleBitCount=function(t,r,n,a,i,o){for(var s=i,l=new Int32Array(8),d=0,u=a?1:-1,h=a;(a?s<n:s>=r)&&d<l.length;)t.get(s,o)===h?(l[d]++,s+=u):(d++,h=!h);return d===l.length||s===(a?n:r)&&d===l.length-1?l:null},e.getNumberOfECCodeWords=function(t){return 2<<t},e.adjustCodewordStartColumn=function(t,r,n,a,i,o){for(var s=i,l=a?-1:1,d=0;d<2;d++){for(;(a?s>=r:s<n)&&a===t.get(s,o);){if(Math.abs(i-s)>e.CODEWORD_SKEW_SIZE)return i;s+=l}l=-l,a=!a}return s},e.checkCodewordSkew=function(t,r,n){return r-e.CODEWORD_SKEW_SIZE<=t&&t<=n+e.CODEWORD_SKEW_SIZE},e.decodeCodewords=function(t,r,n){if(t.length===0)throw H.getFormatInstance();var a=1<<r+1,i=e.correctErrors(t,n,a);e.verifyCodewordCount(t,a);var o=Iv.decode(t,""+r);return o.setErrorsCorrected(i),o.setErasures(n.length),o},e.correctErrors=function(t,r,n){if(r!=null&&r.length>n/2+e.MAX_ERRORS||n<0||n>e.MAX_EC_CODEWORDS)throw De.getChecksumInstance();return e.errorCorrection.decode(t,n,r)},e.verifyCodewordCount=function(t,r){if(t.length<4)throw H.getFormatInstance();var n=t[0];if(n>t.length)throw H.getFormatInstance();if(n===0)if(r<t.length)t[0]=t.length-r;else throw H.getFormatInstance()},e.getBitCountForCodeword=function(t){for(var r=new Int32Array(8),n=0,a=r.length-1;!((t&1)!==n&&(n=t&1,a--,a<0));)r[a]++,t>>=1;return r},e.getCodewordBucketNumber=function(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)},e.getCodewordBucketNumber_number=function(t){return e.getCodewordBucketNumber(e.getBitCountForCodeword(t))},e.getCodewordBucketNumber_Int32Array=function(t){return(t[0]-t[2]+t[4]-t[6]+9)%9},e.toString=function(t){for(var r=new Ws,n=0;n<t.length;n++){r.format("Row %2d: ",n);for(var a=0;a<t[n].length;a++){var i=t[n][a];i.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",i.getValue()[0],i.getConfidence(i.getValue()[0]))}r.format("%n")}return r.toString()},e.CODEWORD_SKEW_SIZE=2,e.MAX_ERRORS=3,e.MAX_EC_CODEWORDS=512,e.errorCorrection=new uv,e})(),Bv=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ri=(function(){function e(){}return e.prototype.decode=function(t,r){r===void 0&&(r=null);var n=e.decode(t,r,!1);if(n==null||n.length===0||n[0]==null)throw D.getNotFoundInstance();return n[0]},e.prototype.decodeMultiple=function(t,r){r===void 0&&(r=null);try{return e.decode(t,r,!0)}catch(n){throw n instanceof H||n instanceof De?D.getNotFoundInstance():n}},e.decode=function(t,r,n){var a,i,o=new Array,s=iv.detectMultiple(t,r,n);try{for(var l=Bv(s.getPoints()),d=l.next();!d.done;d=l.next()){var u=d.value,h=Ov.decode(s.getBits(),u[4],u[5],u[6],u[7],e.getMinCodewordWidth(u),e.getMaxCodewordWidth(u)),f=new Qe(h.getText(),h.getRawBytes(),void 0,u,W.PDF_417);f.putMetadata(We.ERROR_CORRECTION_LEVEL,h.getECLevel());var p=h.getOther();p!=null&&f.putMetadata(We.PDF417_EXTRA_METADATA,p),o.push(f)}}catch(m){a={error:m}}finally{try{d&&!d.done&&(i=l.return)&&i.call(l)}finally{if(a)throw a.error}}return o.map(function(m){return m})},e.getMaxWidth=function(t,r){return t==null||r==null?0:Math.trunc(Math.abs(t.getX()-r.getX()))},e.getMinWidth=function(t,r){return t==null||r==null?le.MAX_VALUE:Math.trunc(Math.abs(t.getX()-r.getX()))},e.getMaxCodewordWidth=function(t){return Math.floor(Math.max(Math.max(e.getMaxWidth(t[0],t[4]),e.getMaxWidth(t[6],t[2])*ue.MODULES_IN_CODEWORD/ue.MODULES_IN_STOP_PATTERN),Math.max(e.getMaxWidth(t[1],t[5]),e.getMaxWidth(t[7],t[3])*ue.MODULES_IN_CODEWORD/ue.MODULES_IN_STOP_PATTERN)))},e.getMinCodewordWidth=function(t){return Math.floor(Math.min(Math.min(e.getMinWidth(t[0],t[4]),e.getMinWidth(t[6],t[2])*ue.MODULES_IN_CODEWORD/ue.MODULES_IN_STOP_PATTERN),Math.min(e.getMinWidth(t[1],t[5]),e.getMinWidth(t[7],t[3])*ue.MODULES_IN_CODEWORD/ue.MODULES_IN_STOP_PATTERN)))},e.prototype.reset=function(){},e})(),jv=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Ic=(function(e){jv(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.kind="ReaderException",t})(ht),Oc=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Dh=(function(){function e(){}return e.prototype.decode=function(t,r){return this.setHints(r),this.decodeInternal(t)},e.prototype.decodeWithState=function(t){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(t)},e.prototype.setHints=function(t){this.hints=t;var r=t!=null&&t.get(we.TRY_HARDER)!==void 0,n=t==null?null:t.get(we.POSSIBLE_FORMATS),a=new Array;if(n!=null){var i=n.some(function(o){return o===W.UPC_A||o===W.UPC_E||o===W.EAN_13||o===W.EAN_8||o===W.CODABAR||o===W.CODE_39||o===W.CODE_93||o===W.CODE_128||o===W.ITF||o===W.RSS_14||o===W.RSS_EXPANDED});i&&!r&&a.push(new Ur(t)),n.includes(W.QR_CODE)&&a.push(new ti),n.includes(W.DATA_MATRIX)&&a.push(new ei),n.includes(W.AZTEC)&&a.push(new Ja),n.includes(W.PDF_417)&&a.push(new ri),i&&r&&a.push(new Ur(t))}a.length===0&&(r||a.push(new Ur(t)),a.push(new ti),a.push(new ei),a.push(new Ja),a.push(new ri),r&&a.push(new Ur(t))),this.readers=a},e.prototype.reset=function(){var t,r;if(this.readers!==null)try{for(var n=Oc(this.readers),a=n.next();!a.done;a=n.next()){var i=a.value;i.reset()}}catch(o){t={error:o}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},e.prototype.decodeInternal=function(t){var r,n;if(this.readers===null)throw new Ic("No readers where selected, nothing can be read.");try{for(var a=Oc(this.readers),i=a.next();!i.done;i=a.next()){var o=i.value;try{return o.decode(t,this.hints)}catch(s){if(s instanceof Ic)continue}}}catch(s){r={error:s}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}throw new D("No MultiFormat Readers were able to detect the code.")},e})(),Dv=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(e){Dv(t,e);function t(r,n){r===void 0&&(r=null),n===void 0&&(n=500);var a=this,i=new Dh;return i.setHints(r),a=e.call(this,i,n)||this,a}return t.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},t})(pn);var Rv=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(e){Rv(t,e);function t(r){return r===void 0&&(r=500),e.call(this,new ri,r)||this}return t})(pn);var Lv=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(e){Lv(t,e);function t(r){return r===void 0&&(r=500),e.call(this,new ti,r)||this}return t})(pn);var is;(function(e){e[e.ERROR_CORRECTION=0]="ERROR_CORRECTION",e[e.CHARACTER_SET=1]="CHARACTER_SET",e[e.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",e[e.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",e[e.MIN_SIZE=4]="MIN_SIZE",e[e.MAX_SIZE=5]="MAX_SIZE",e[e.MARGIN=6]="MARGIN",e[e.PDF417_COMPACT=7]="PDF417_COMPACT",e[e.PDF417_COMPACTION=8]="PDF417_COMPACTION",e[e.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",e[e.AZTEC_LAYERS=10]="AZTEC_LAYERS",e[e.QR_VERSION=11]="QR_VERSION",e[e.GS1_FORMAT=12]="GS1_FORMAT",e[e.FORCE_C40=13]="FORCE_C40"})(is||(is={}));const ba=is;var Rh=(function(){function e(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new hr(t,Int32Array.from([1])))}return e.prototype.buildGenerator=function(t){var r=this.cachedGenerators;if(t>=r.length)for(var n=r[r.length-1],a=this.field,i=r.length;i<=t;i++){var o=n.multiply(new hr(a,Int32Array.from([1,a.exp(i-1+a.getGeneratorBase())])));r.push(o),n=o}return r[t]},e.prototype.encode=function(t,r){if(r===0)throw new ee("No error correction bytes");var n=t.length-r;if(n<=0)throw new ee("No data bytes provided");var a=this.buildGenerator(r),i=new Int32Array(n);_e.arraycopy(t,0,i,0,n);var o=new hr(this.field,i);o=o.multiplyByMonomial(r,1);for(var s=o.divide(a)[1],l=s.getCoefficients(),d=r-l.length,u=0;u<d;u++)t[n+u]=0;_e.arraycopy(l,0,t,n+d,l.length)},e})(),Tn=(function(){function e(){}return e.applyMaskPenaltyRule1=function(t){return e.applyMaskPenaltyRule1Internal(t,!0)+e.applyMaskPenaltyRule1Internal(t,!1)},e.applyMaskPenaltyRule2=function(t){for(var r=0,n=t.getArray(),a=t.getWidth(),i=t.getHeight(),o=0;o<i-1;o++)for(var s=n[o],l=0;l<a-1;l++){var d=s[l];d===s[l+1]&&d===n[o+1][l]&&d===n[o+1][l+1]&&r++}return e.N2*r},e.applyMaskPenaltyRule3=function(t){for(var r=0,n=t.getArray(),a=t.getWidth(),i=t.getHeight(),o=0;o<i;o++)for(var s=0;s<a;s++){var l=n[o];s+6<a&&l[s]===1&&l[s+1]===0&&l[s+2]===1&&l[s+3]===1&&l[s+4]===1&&l[s+5]===0&&l[s+6]===1&&(e.isWhiteHorizontal(l,s-4,s)||e.isWhiteHorizontal(l,s+7,s+11))&&r++,o+6<i&&n[o][s]===1&&n[o+1][s]===0&&n[o+2][s]===1&&n[o+3][s]===1&&n[o+4][s]===1&&n[o+5][s]===0&&n[o+6][s]===1&&(e.isWhiteVertical(n,s,o-4,o)||e.isWhiteVertical(n,s,o+7,o+11))&&r++}return r*e.N3},e.isWhiteHorizontal=function(t,r,n){r=Math.max(r,0),n=Math.min(n,t.length);for(var a=r;a<n;a++)if(t[a]===1)return!1;return!0},e.isWhiteVertical=function(t,r,n,a){n=Math.max(n,0),a=Math.min(a,t.length);for(var i=n;i<a;i++)if(t[i][r]===1)return!1;return!0},e.applyMaskPenaltyRule4=function(t){for(var r=0,n=t.getArray(),a=t.getWidth(),i=t.getHeight(),o=0;o<i;o++)for(var s=n[o],l=0;l<a;l++)s[l]===1&&r++;var d=t.getHeight()*t.getWidth(),u=Math.floor(Math.abs(r*2-d)*10/d);return u*e.N4},e.getDataMaskBit=function(t,r,n){var a,i;switch(t){case 0:a=n+r&1;break;case 1:a=n&1;break;case 2:a=r%3;break;case 3:a=(n+r)%3;break;case 4:a=Math.floor(n/2)+Math.floor(r/3)&1;break;case 5:i=n*r,a=(i&1)+i%3;break;case 6:i=n*r,a=(i&1)+i%3&1;break;case 7:i=n*r,a=i%3+(n+r&1)&1;break;default:throw new ee("Invalid mask pattern: "+t)}return a===0},e.applyMaskPenaltyRule1Internal=function(t,r){for(var n=0,a=r?t.getHeight():t.getWidth(),i=r?t.getWidth():t.getHeight(),o=t.getArray(),s=0;s<a;s++){for(var l=0,d=-1,u=0;u<i;u++){var h=r?o[s][u]:o[u][s];h===d?l++:(l>=5&&(n+=e.N1+(l-5)),l=1,d=h)}l>=5&&(n+=e.N1+(l-5))}return n},e.N1=3,e.N2=3,e.N3=40,e.N4=10,e})(),Mv=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Pv=(function(){function e(t,r){this.width=t,this.height=r;for(var n=new Array(r),a=0;a!==r;a++)n[a]=new Uint8Array(t);this.bytes=n}return e.prototype.getHeight=function(){return this.height},e.prototype.getWidth=function(){return this.width},e.prototype.get=function(t,r){return this.bytes[r][t]},e.prototype.getArray=function(){return this.bytes},e.prototype.setNumber=function(t,r,n){this.bytes[r][t]=n},e.prototype.setBoolean=function(t,r,n){this.bytes[r][t]=n?1:0},e.prototype.clear=function(t){var r,n;try{for(var a=Mv(this.bytes),i=a.next();!i.done;i=a.next()){var o=i.value;$e.fill(o,t)}}catch(s){r={error:s}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var r=t;if(this.width!==r.width||this.height!==r.height)return!1;for(var n=0,a=this.height;n<a;++n)for(var i=this.bytes[n],o=r.bytes[n],s=0,l=this.width;s<l;++s)if(i[s]!==o[s])return!1;return!0},e.prototype.toString=function(){for(var t=new se,r=0,n=this.height;r<n;++r){for(var a=this.bytes[r],i=0,o=this.width;i<o;++i)switch(a[i]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ");break}t.append(`
`)}return t.toString()},e})(),os=(function(){function e(){this.maskPattern=-1}return e.prototype.getMode=function(){return this.mode},e.prototype.getECLevel=function(){return this.ecLevel},e.prototype.getVersion=function(){return this.version},e.prototype.getMaskPattern=function(){return this.maskPattern},e.prototype.getMatrix=function(){return this.matrix},e.prototype.toString=function(){var t=new se;return t.append(`<<
`),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append(`
 ecLevel: `),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append(`
 version: `),t.append(this.version?this.version.toString():"null"),t.append(`
 maskPattern: `),t.append(this.maskPattern.toString()),this.matrix?(t.append(`
 matrix:
`),t.append(this.matrix.toString())):t.append(`
 matrix: null
`),t.append(`>>
`),t.toString()},e.prototype.setMode=function(t){this.mode=t},e.prototype.setECLevel=function(t){this.ecLevel=t},e.prototype.setVersion=function(t){this.version=t},e.prototype.setMaskPattern=function(t){this.maskPattern=t},e.prototype.setMatrix=function(t){this.matrix=t},e.isValidMaskPattern=function(t){return t>=0&&t<e.NUM_MASK_PATTERNS},e.NUM_MASK_PATTERNS=8,e})(),Fv=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Ce=(function(e){Fv(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.kind="WriterException",t})(ht),Bc=(function(){function e(){}return e.clearMatrix=function(t){t.clear(255)},e.buildMatrix=function(t,r,n,a,i){e.clearMatrix(i),e.embedBasicPatterns(n,i),e.embedTypeInfo(r,a,i),e.maybeEmbedVersionInfo(n,i),e.embedDataBits(t,a,i)},e.embedBasicPatterns=function(t,r){e.embedPositionDetectionPatternsAndSeparators(r),e.embedDarkDotAtLeftBottomCorner(r),e.maybeEmbedPositionAdjustmentPatterns(t,r),e.embedTimingPatterns(r)},e.embedTypeInfo=function(t,r,n){var a=new Ge;e.makeTypeInfoBits(t,r,a);for(var i=0,o=a.getSize();i<o;++i){var s=a.get(a.getSize()-1-i),l=e.TYPE_INFO_COORDINATES[i],d=l[0],u=l[1];if(n.setBoolean(d,u,s),i<8){var h=n.getWidth()-i-1,f=8;n.setBoolean(h,f,s)}else{var h=8,f=n.getHeight()-7+(i-8);n.setBoolean(h,f,s)}}},e.maybeEmbedVersionInfo=function(t,r){if(!(t.getVersionNumber()<7)){var n=new Ge;e.makeVersionInfoBits(t,n);for(var a=17,i=0;i<6;++i)for(var o=0;o<3;++o){var s=n.get(a);a--,r.setBoolean(i,r.getHeight()-11+o,s),r.setBoolean(r.getHeight()-11+o,i,s)}}},e.embedDataBits=function(t,r,n){for(var a=0,i=-1,o=n.getWidth()-1,s=n.getHeight()-1;o>0;){for(o===6&&(o-=1);s>=0&&s<n.getHeight();){for(var l=0;l<2;++l){var d=o-l;if(e.isEmpty(n.get(d,s))){var u=void 0;a<t.getSize()?(u=t.get(a),++a):u=!1,r!==255&&Tn.getDataMaskBit(r,d,s)&&(u=!u),n.setBoolean(d,s,u)}}s+=i}i=-i,s+=i,o-=2}if(a!==t.getSize())throw new Ce("Not all bits consumed: "+a+"/"+t.getSize())},e.findMSBSet=function(t){return 32-le.numberOfLeadingZeros(t)},e.calculateBCHCode=function(t,r){if(r===0)throw new ee("0 polynomial");var n=e.findMSBSet(r);for(t<<=n-1;e.findMSBSet(t)>=n;)t^=r<<e.findMSBSet(t)-n;return t},e.makeTypeInfoBits=function(t,r,n){if(!os.isValidMaskPattern(r))throw new Ce("Invalid mask pattern");var a=t.getBits()<<3|r;n.appendBits(a,5);var i=e.calculateBCHCode(a,e.TYPE_INFO_POLY);n.appendBits(i,10);var o=new Ge;if(o.appendBits(e.TYPE_INFO_MASK_PATTERN,15),n.xor(o),n.getSize()!==15)throw new Ce("should not happen but we got: "+n.getSize())},e.makeVersionInfoBits=function(t,r){r.appendBits(t.getVersionNumber(),6);var n=e.calculateBCHCode(t.getVersionNumber(),e.VERSION_INFO_POLY);if(r.appendBits(n,12),r.getSize()!==18)throw new Ce("should not happen but we got: "+r.getSize())},e.isEmpty=function(t){return t===255},e.embedTimingPatterns=function(t){for(var r=8;r<t.getWidth()-8;++r){var n=(r+1)%2;e.isEmpty(t.get(r,6))&&t.setNumber(r,6,n),e.isEmpty(t.get(6,r))&&t.setNumber(6,r,n)}},e.embedDarkDotAtLeftBottomCorner=function(t){if(t.get(8,t.getHeight()-8)===0)throw new Ce;t.setNumber(8,t.getHeight()-8,1)},e.embedHorizontalSeparationPattern=function(t,r,n){for(var a=0;a<8;++a){if(!e.isEmpty(n.get(t+a,r)))throw new Ce;n.setNumber(t+a,r,0)}},e.embedVerticalSeparationPattern=function(t,r,n){for(var a=0;a<7;++a){if(!e.isEmpty(n.get(t,r+a)))throw new Ce;n.setNumber(t,r+a,0)}},e.embedPositionAdjustmentPattern=function(t,r,n){for(var a=0;a<5;++a)for(var i=e.POSITION_ADJUSTMENT_PATTERN[a],o=0;o<5;++o)n.setNumber(t+o,r+a,i[o])},e.embedPositionDetectionPattern=function(t,r,n){for(var a=0;a<7;++a)for(var i=e.POSITION_DETECTION_PATTERN[a],o=0;o<7;++o)n.setNumber(t+o,r+a,i[o])},e.embedPositionDetectionPatternsAndSeparators=function(t){var r=e.POSITION_DETECTION_PATTERN[0].length;e.embedPositionDetectionPattern(0,0,t),e.embedPositionDetectionPattern(t.getWidth()-r,0,t),e.embedPositionDetectionPattern(0,t.getWidth()-r,t);var n=8;e.embedHorizontalSeparationPattern(0,n-1,t),e.embedHorizontalSeparationPattern(t.getWidth()-n,n-1,t),e.embedHorizontalSeparationPattern(0,t.getWidth()-n,t);var a=7;e.embedVerticalSeparationPattern(a,0,t),e.embedVerticalSeparationPattern(t.getHeight()-a-1,0,t),e.embedVerticalSeparationPattern(a,t.getHeight()-a,t)},e.maybeEmbedPositionAdjustmentPatterns=function(t,r){if(!(t.getVersionNumber()<2))for(var n=t.getVersionNumber()-1,a=e.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],i=0,o=a.length;i!==o;i++){var s=a[i];if(s>=0)for(var l=0;l!==o;l++){var d=a[l];d>=0&&e.isEmpty(r.get(d,s))&&e.embedPositionAdjustmentPattern(d-2,s-2,r)}}},e.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),e.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),e.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),e.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),e.VERSION_INFO_POLY=7973,e.TYPE_INFO_POLY=1335,e.TYPE_INFO_MASK_PATTERN=21522,e})(),$v=(function(){function e(t,r){this.dataBytes=t,this.errorCorrectionBytes=r}return e.prototype.getDataBytes=function(){return this.dataBytes},e.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},e})(),jc=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function e(){}return e.calculateMaskPenalty=function(t){return Tn.applyMaskPenaltyRule1(t)+Tn.applyMaskPenaltyRule2(t)+Tn.applyMaskPenaltyRule3(t)+Tn.applyMaskPenaltyRule4(t)},e.encode=function(t,r,n){n===void 0&&(n=null);var a=e.DEFAULT_BYTE_MODE_ENCODING,i=n!==null&&n.get(ba.CHARACTER_SET)!==void 0;i&&(a=n.get(ba.CHARACTER_SET).toString());var o=this.chooseMode(t,a),s=new Ge;if(o===Ae.BYTE&&(i||e.DEFAULT_BYTE_MODE_ENCODING!==a)){var l=Fe.getCharacterSetECIByName(a);l!==void 0&&this.appendECI(l,s)}this.appendModeInfo(o,s);var d=new Ge;this.appendBytes(t,o,d,a);var u;if(n!==null&&n.get(ba.QR_VERSION)!==void 0){var h=Number.parseInt(n.get(ba.QR_VERSION).toString(),10);u=Er.getVersionForNumber(h);var f=this.calculateBitsNeeded(o,s,d,u);if(!this.willFit(f,u,r))throw new Ce("Data too big for requested version")}else u=this.recommendVersion(r,o,s,d);var p=new Ge;p.appendBitArray(s);var m=o===Ae.BYTE?d.getSizeInBytes():t.length;this.appendLengthInfo(m,u,o,p),p.appendBitArray(d);var g=u.getECBlocksForLevel(r),x=u.getTotalCodewords()-g.getTotalECCodewords();this.terminateBits(x,p);var y=this.interleaveWithECBytes(p,u.getTotalCodewords(),x,g.getNumBlocks()),v=new os;v.setECLevel(r),v.setMode(o),v.setVersion(u);var w=u.getDimensionForVersion(),S=new Pv(w,w),C=this.chooseMaskPattern(y,r,u,S);return v.setMaskPattern(C),Bc.buildMatrix(y,r,u,C,S),v.setMatrix(S),v},e.recommendVersion=function(t,r,n,a){var i=this.calculateBitsNeeded(r,n,a,Er.getVersionForNumber(1)),o=this.chooseVersion(i,t),s=this.calculateBitsNeeded(r,n,a,o);return this.chooseVersion(s,t)},e.calculateBitsNeeded=function(t,r,n,a){return r.getSize()+t.getCharacterCountBits(a)+n.getSize()},e.getAlphanumericCode=function(t){return t<e.ALPHANUMERIC_TABLE.length?e.ALPHANUMERIC_TABLE[t]:-1},e.chooseMode=function(t,r){if(r===void 0&&(r=null),Fe.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(t))return Ae.KANJI;for(var n=!1,a=!1,i=0,o=t.length;i<o;++i){var s=t.charAt(i);if(e.isDigit(s))n=!0;else if(this.getAlphanumericCode(s.charCodeAt(0))!==-1)a=!0;else return Ae.BYTE}return a?Ae.ALPHANUMERIC:n?Ae.NUMERIC:Ae.BYTE},e.isOnlyDoubleByteKanji=function(t){var r;try{r=kt.encode(t,Fe.SJIS)}catch{return!1}var n=r.length;if(n%2!==0)return!1;for(var a=0;a<n;a+=2){var i=r[a]&255;if((i<129||i>159)&&(i<224||i>235))return!1}return!0},e.chooseMaskPattern=function(t,r,n,a){for(var i=Number.MAX_SAFE_INTEGER,o=-1,s=0;s<os.NUM_MASK_PATTERNS;s++){Bc.buildMatrix(t,r,n,s,a);var l=this.calculateMaskPenalty(a);l<i&&(i=l,o=s)}return o},e.chooseVersion=function(t,r){for(var n=1;n<=40;n++){var a=Er.getVersionForNumber(n);if(e.willFit(t,a,r))return a}throw new Ce("Data too big")},e.willFit=function(t,r,n){var a=r.getTotalCodewords(),i=r.getECBlocksForLevel(n),o=i.getTotalECCodewords(),s=a-o,l=(t+7)/8;return s>=l},e.terminateBits=function(t,r){var n=t*8;if(r.getSize()>n)throw new Ce("data bits cannot fit in the QR Code"+r.getSize()+" > "+n);for(var a=0;a<4&&r.getSize()<n;++a)r.appendBit(!1);var i=r.getSize()&7;if(i>0)for(var a=i;a<8;a++)r.appendBit(!1);for(var o=t-r.getSizeInBytes(),a=0;a<o;++a)r.appendBits((a&1)===0?236:17,8);if(r.getSize()!==n)throw new Ce("Bits size does not equal capacity")},e.getNumDataBytesAndNumECBytesForBlockID=function(t,r,n,a,i,o){if(a>=n)throw new Ce("Block ID too large");var s=t%n,l=n-s,d=Math.floor(t/n),u=d+1,h=Math.floor(r/n),f=h+1,p=d-h,m=u-f;if(p!==m)throw new Ce("EC bytes mismatch");if(n!==l+s)throw new Ce("RS blocks mismatch");if(t!==(h+p)*l+(f+m)*s)throw new Ce("Total bytes mismatch");a<l?(i[0]=h,o[0]=p):(i[0]=f,o[0]=m)},e.interleaveWithECBytes=function(t,r,n,a){var i,o,s,l;if(t.getSizeInBytes()!==n)throw new Ce("Number of bits and data bytes does not match");for(var d=0,u=0,h=0,f=new Array,p=0;p<a;++p){var m=new Int32Array(1),g=new Int32Array(1);e.getNumDataBytesAndNumECBytesForBlockID(r,n,a,p,m,g);var x=m[0],y=new Uint8Array(x);t.toBytes(8*d,y,0,x);var v=e.generateECBytes(y,g[0]);f.push(new $v(y,v)),u=Math.max(u,x),h=Math.max(h,v.length),d+=m[0]}if(n!==d)throw new Ce("Data bytes does not match offset");for(var w=new Ge,p=0;p<u;++p)try{for(var S=(i=void 0,jc(f)),C=S.next();!C.done;C=S.next()){var k=C.value,y=k.getDataBytes();p<y.length&&w.appendBits(y[p],8)}}catch(E){i={error:E}}finally{try{C&&!C.done&&(o=S.return)&&o.call(S)}finally{if(i)throw i.error}}for(var p=0;p<h;++p)try{for(var A=(s=void 0,jc(f)),N=A.next();!N.done;N=A.next()){var k=N.value,v=k.getErrorCorrectionBytes();p<v.length&&w.appendBits(v[p],8)}}catch(E){s={error:E}}finally{try{N&&!N.done&&(l=A.return)&&l.call(A)}finally{if(s)throw s.error}}if(r!==w.getSizeInBytes())throw new Ce("Interleaving error: "+r+" and "+w.getSizeInBytes()+" differ.");return w},e.generateECBytes=function(t,r){for(var n=t.length,a=new Int32Array(n+r),i=0;i<n;i++)a[i]=t[i]&255;new Rh(ct.QR_CODE_FIELD_256).encode(a,r);for(var o=new Uint8Array(r),i=0;i<r;i++)o[i]=a[n+i];return o},e.appendModeInfo=function(t,r){r.appendBits(t.getBits(),4)},e.appendLengthInfo=function(t,r,n,a){var i=n.getCharacterCountBits(r);if(t>=1<<i)throw new Ce(t+" is bigger than "+((1<<i)-1));a.appendBits(t,i)},e.appendBytes=function(t,r,n,a){switch(r){case Ae.NUMERIC:e.appendNumericBytes(t,n);break;case Ae.ALPHANUMERIC:e.appendAlphanumericBytes(t,n);break;case Ae.BYTE:e.append8BitBytes(t,n,a);break;case Ae.KANJI:e.appendKanjiBytes(t,n);break;default:throw new Ce("Invalid mode: "+r)}},e.getDigit=function(t){return t.charCodeAt(0)-48},e.isDigit=function(t){var r=e.getDigit(t);return r>=0&&r<=9},e.appendNumericBytes=function(t,r){for(var n=t.length,a=0;a<n;){var i=e.getDigit(t.charAt(a));if(a+2<n){var o=e.getDigit(t.charAt(a+1)),s=e.getDigit(t.charAt(a+2));r.appendBits(i*100+o*10+s,10),a+=3}else if(a+1<n){var o=e.getDigit(t.charAt(a+1));r.appendBits(i*10+o,7),a+=2}else r.appendBits(i,4),a++}},e.appendAlphanumericBytes=function(t,r){for(var n=t.length,a=0;a<n;){var i=e.getAlphanumericCode(t.charCodeAt(a));if(i===-1)throw new Ce;if(a+1<n){var o=e.getAlphanumericCode(t.charCodeAt(a+1));if(o===-1)throw new Ce;r.appendBits(i*45+o,11),a+=2}else r.appendBits(i,6),a++}},e.append8BitBytes=function(t,r,n){var a;try{a=kt.encode(t,n)}catch(l){throw new Ce(l)}for(var i=0,o=a.length;i!==o;i++){var s=a[i];r.appendBits(s,8)}},e.appendKanjiBytes=function(t,r){var n;try{n=kt.encode(t,Fe.SJIS)}catch(h){throw new Ce(h)}for(var a=n.length,i=0;i<a;i+=2){var o=n[i]&255,s=n[i+1]&255,l=o<<8&4294967295|s,d=-1;if(l>=33088&&l<=40956?d=l-33088:l>=57408&&l<=60351&&(d=l-49472),d===-1)throw new Ce("Invalid byte sequence");var u=(d>>8)*192+(d&255);r.appendBits(u,13)}},e.appendECI=function(t,r){r.appendBits(Ae.ECI.getBits(),4),r.appendBits(t.getValue(),8)},e.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),e.DEFAULT_BYTE_MODE_ENCODING=Fe.UTF8.getName(),e})();var Uv=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(e){Uv(t,e);function t(r,n,a,i,o,s,l,d){var u=e.call(this,s,l)||this;if(u.yuvData=r,u.dataWidth=n,u.dataHeight=a,u.left=i,u.top=o,i+s>n||o+l>a)throw new ee("Crop rectangle does not fit within image data.");return d&&u.reverseHorizontal(s,l),u}return t.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new ee("Requested row is outside the image: "+r);var a=this.getWidth();(n==null||n.length<a)&&(n=new Uint8ClampedArray(a));var i=(r+this.top)*this.dataWidth+this.left;return _e.arraycopy(this.yuvData,i,n,0,a),n},t.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.yuvData;var a=r*n,i=new Uint8ClampedArray(a),o=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return _e.arraycopy(this.yuvData,o,i,0,a),i;for(var s=0;s<n;s++){var l=s*r;_e.arraycopy(this.yuvData,o,i,l,r),o+=this.dataWidth}return i},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(r,n,a,i){return new t(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+n,a,i,!1)},t.prototype.renderThumbnail=function(){for(var r=this.getWidth()/t.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/t.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(r*n),i=this.yuvData,o=this.top*this.dataWidth+this.left,s=0;s<n;s++){for(var l=s*r,d=0;d<r;d++){var u=i[o+d*t.THUMBNAIL_SCALE_FACTOR]&255;a[l+d]=4278190080|u*65793}o+=this.dataWidth*t.THUMBNAIL_SCALE_FACTOR}return a},t.prototype.getThumbnailWidth=function(){return this.getWidth()/t.THUMBNAIL_SCALE_FACTOR},t.prototype.getThumbnailHeight=function(){return this.getHeight()/t.THUMBNAIL_SCALE_FACTOR},t.prototype.reverseHorizontal=function(r,n){for(var a=this.yuvData,i=0,o=this.top*this.dataWidth+this.left;i<n;i++,o+=this.dataWidth)for(var s=o+r/2,l=o,d=o+r-1;l<s;l++,d--){var u=a[l];a[l]=a[d],a[d]=u}},t.prototype.invert=function(){return new Pi(this)},t.THUMBNAIL_SCALE_FACTOR=2,t})(oa);var zv=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(e){zv(t,e);function t(r,n,a,i,o,s,l){var d=e.call(this,n,a)||this;if(d.dataWidth=i,d.dataHeight=o,d.left=s,d.top=l,r.BYTES_PER_ELEMENT===4){for(var u=n*a,h=new Uint8ClampedArray(u),f=0;f<u;f++){var p=r[f],m=p>>16&255,g=p>>7&510,x=p&255;h[f]=(m+g+x)/4&255}d.luminances=h}else d.luminances=r;if(i===void 0&&(d.dataWidth=n),o===void 0&&(d.dataHeight=a),s===void 0&&(d.left=0),l===void 0&&(d.top=0),d.left+n>d.dataWidth||d.top+a>d.dataHeight)throw new ee("Crop rectangle does not fit within image data.");return d}return t.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new ee("Requested row is outside the image: "+r);var a=this.getWidth();(n==null||n.length<a)&&(n=new Uint8ClampedArray(a));var i=(r+this.top)*this.dataWidth+this.left;return _e.arraycopy(this.luminances,i,n,0,a),n},t.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.luminances;var a=r*n,i=new Uint8ClampedArray(a),o=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return _e.arraycopy(this.luminances,o,i,0,a),i;for(var s=0;s<n;s++){var l=s*r;_e.arraycopy(this.luminances,o,i,l,r),o+=this.dataWidth}return i},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(r,n,a,i){return new t(this.luminances,a,i,this.dataWidth,this.dataHeight,this.left+r,this.top+n)},t.prototype.invert=function(){return new Pi(this)},t})(oa);var Hv=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Gv=(function(e){Hv(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.forName=function(r){return this.getCharacterSetECIByName(r)},t})(Fe),Vv=(function(){function e(){}return e.ISO_8859_1=Fe.ISO8859_1,e})(),ss,qv=301,Wv=function(e,t){for(var r=1,n=0;n<255;n++)t[n]=r,e[r]=n,r*=2,r>=256&&(r^=qv);return{LOG:e,ALOG:t}};ss=Wv([],[]),ss.LOG;ss.ALOG;var Dc;(function(e){e[e.FORCE_NONE=0]="FORCE_NONE",e[e.FORCE_SQUARE=1]="FORCE_SQUARE",e[e.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(Dc||(Dc={}));var Rc=129,Lh=230,Xv=231,Yv=235,Kv=236,Zv=237,Jv=238,Qv=239,ey=240,bo=254,ty=254,Lc="[)>05",Mc="[)>06",Pc="",ve=0,qe=1,nt=2,Me=3,He=4,Ye=5,ry=(function(){function e(){}return e.prototype.getEncodingMode=function(){return ve},e.prototype.encode=function(t){var r=jt.determineConsecutiveDigitCount(t.getMessage(),t.pos);if(r>=2)t.writeCodeword(this.encodeASCIIDigits(t.getMessage().charCodeAt(t.pos),t.getMessage().charCodeAt(t.pos+1))),t.pos+=2;else{var n=t.getCurrentChar(),a=jt.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(a!==this.getEncodingMode())switch(a){case Ye:t.writeCodeword(Xv),t.signalEncoderChange(Ye);return;case qe:t.writeCodeword(Lh),t.signalEncoderChange(qe);return;case Me:t.writeCodeword(Jv),t.signalEncoderChange(Me);break;case nt:t.writeCodeword(Qv),t.signalEncoderChange(nt);break;case He:t.writeCodeword(ey),t.signalEncoderChange(He);break;default:throw new Error("Illegal mode: "+a)}else jt.isExtendedASCII(n)?(t.writeCodeword(Yv),t.writeCodeword(n-128+1),t.pos++):(t.writeCodeword(n+1),t.pos++)}},e.prototype.encodeASCIIDigits=function(t,r){if(jt.isDigit(t)&&jt.isDigit(r)){var n=(t-48)*10+(r-48);return n+130}throw new Error("not digits: "+t+r)},e})(),ny=(function(){function e(){}return e.prototype.getEncodingMode=function(){return Ye},e.prototype.encode=function(t){var r=new se;for(r.append(0);t.hasMoreCharacters();){var n=t.getCurrentChar();r.append(n),t.pos++;var a=jt.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){t.signalEncoderChange(ve);break}}var i=r.length()-1,o=1,s=t.getCodewordCount()+i+o;t.updateSymbolInfo(s);var l=t.getSymbolInfo().getDataCapacity()-s>0;if(t.hasMoreCharacters()||l)if(i<=249)r.setCharAt(0,de.getCharAt(i));else if(i<=1555)r.setCharAt(0,de.getCharAt(Math.floor(i/250)+249)),r.insert(1,de.getCharAt(i%250));else throw new Error("Message length not in valid ranges: "+i);for(var d=0,n=r.length();d<n;d++)t.writeCodeword(this.randomize255State(r.charAt(d).charCodeAt(0),t.getCodewordCount()+1))},e.prototype.randomize255State=function(t,r){var n=149*r%255+1,a=t+n;return a<=255?a:a-256},e})(),Xs=(function(){function e(){}return e.prototype.getEncodingMode=function(){return qe},e.prototype.encodeMaximal=function(t){for(var r=new se,n=0,a=t.pos,i=0;t.hasMoreCharacters();){var o=t.getCurrentChar();t.pos++,n=this.encodeChar(o,r),r.length()%3===0&&(a=t.pos,i=r.length())}if(i!==r.length()){var s=Math.floor(r.length()/3*2),l=Math.floor(t.getCodewordCount()+s+1);t.updateSymbolInfo(l);var d=t.getSymbolInfo().getDataCapacity()-l,u=Math.floor(r.length()%3);(u===2&&d!==2||u===1&&(n>3||d!==1))&&(t.pos=a)}r.length()>0&&t.writeCodeword(Lh),this.handleEOD(t,r)},e.prototype.encode=function(t){for(var r=new se;t.hasMoreCharacters();){var n=t.getCurrentChar();t.pos++;var a=this.encodeChar(n,r),i=Math.floor(r.length()/3)*2,o=t.getCodewordCount()+i;t.updateSymbolInfo(o);var s=t.getSymbolInfo().getDataCapacity()-o;if(!t.hasMoreCharacters()){var l=new se;for(r.length()%3===2&&s!==2&&(a=this.backtrackOneCharacter(t,r,l,a));r.length()%3===1&&(a>3||s!==1);)a=this.backtrackOneCharacter(t,r,l,a);break}var d=r.length();if(d%3===0){var u=jt.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(u!==this.getEncodingMode()){t.signalEncoderChange(ve);break}}}this.handleEOD(t,r)},e.prototype.backtrackOneCharacter=function(t,r,n,a){var i=r.length(),o=r.toString().substring(0,i-a);r.setLengthToZero(),r.append(o),t.pos--;var s=t.getCurrentChar();return a=this.encodeChar(s,n),t.resetSymbolInfo(),a},e.prototype.writeNextTriplet=function(t,r){t.writeCodewords(this.encodeToCodewords(r.toString()));var n=r.toString().substring(3);r.setLengthToZero(),r.append(n)},e.prototype.handleEOD=function(t,r){var n=Math.floor(r.length()/3*2),a=r.length()%3,i=t.getCodewordCount()+n;t.updateSymbolInfo(i);var o=t.getSymbolInfo().getDataCapacity()-i;if(a===2){for(r.append("\0");r.length()>=3;)this.writeNextTriplet(t,r);t.hasMoreCharacters()&&t.writeCodeword(bo)}else if(o===1&&a===1){for(;r.length()>=3;)this.writeNextTriplet(t,r);t.hasMoreCharacters()&&t.writeCodeword(bo),t.pos--}else if(a===0){for(;r.length()>=3;)this.writeNextTriplet(t,r);(o>0||t.hasMoreCharacters())&&t.writeCodeword(bo)}else throw new Error("Unexpected case. Please report!");t.signalEncoderChange(ve)},e.prototype.encodeChar=function(t,r){if(t===32)return r.append(3),1;if(t>=48&&t<=57)return r.append(t-48+4),1;if(t>=65&&t<=90)return r.append(t-65+14),1;if(t<32)return r.append(0),r.append(t),2;if(t<=47)return r.append(1),r.append(t-33),2;if(t<=64)return r.append(1),r.append(t-58+15),2;if(t<=95)return r.append(1),r.append(t-91+22),2;if(t<=127)return r.append(2),r.append(t-96),2;r.append("1");var n=2;return n+=this.encodeChar(t-128,r),n},e.prototype.encodeToCodewords=function(t){var r=1600*t.charCodeAt(0)+40*t.charCodeAt(1)+t.charCodeAt(2)+1,n=r/256,a=r%256,i=new se;return i.append(n),i.append(a),i.toString()},e})(),ay=(function(){function e(){}return e.prototype.getEncodingMode=function(){return He},e.prototype.encode=function(t){for(var r=new se;t.hasMoreCharacters();){var n=t.getCurrentChar();this.encodeChar(n,r),t.pos++;var a=r.length();if(a>=4){t.writeCodewords(this.encodeToCodewords(r.toString()));var i=r.toString().substring(4);r.setLengthToZero(),r.append(i);var o=jt.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){t.signalEncoderChange(ve);break}}}r.append(de.getCharAt(31)),this.handleEOD(t,r)},e.prototype.handleEOD=function(t,r){try{var n=r.length();if(n===0)return;if(n===1){t.updateSymbolInfo();var a=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),i=t.getRemainingCharacters();if(i>a&&(t.updateSymbolInfo(t.getCodewordCount()+1),a=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount()),i<=a&&a<=2)return}if(n>4)throw new Error("Count must not exceed 4");var o=n-1,s=this.encodeToCodewords(r.toString()),l=!t.hasMoreCharacters(),d=l&&o<=2;if(o<=2){t.updateSymbolInfo(t.getCodewordCount()+o);var a=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount();a>=3&&(d=!1,t.updateSymbolInfo(t.getCodewordCount()+s.length))}d?(t.resetSymbolInfo(),t.pos-=o):t.writeCodewords(s)}finally{t.signalEncoderChange(ve)}},e.prototype.encodeChar=function(t,r){t>=32&&t<=63?r.append(t):t>=64&&t<=94?r.append(de.getCharAt(t-64)):jt.illegalCharacter(de.getCharAt(t))},e.prototype.encodeToCodewords=function(t){var r=t.length;if(r===0)throw new Error("StringBuilder must not be empty");var n=t.charAt(0).charCodeAt(0),a=r>=2?t.charAt(1).charCodeAt(0):0,i=r>=3?t.charAt(2).charCodeAt(0):0,o=r>=4?t.charAt(3).charCodeAt(0):0,s=(n<<18)+(a<<12)+(i<<6)+o,l=s>>16&255,d=s>>8&255,u=s&255,h=new se;return h.append(l),r>=2&&h.append(d),r>=3&&h.append(u),h.toString()},e})(),iy=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),oy=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},pe=(function(){function e(t,r,n,a,i,o,s,l){s===void 0&&(s=0),l===void 0&&(l=0),this.rectangular=t,this.dataCapacity=r,this.errorCodewords=n,this.matrixWidth=a,this.matrixHeight=i,this.dataRegions=o,this.rsBlockData=s,this.rsBlockError=l}return e.lookup=function(t,r,n,a,i){var o,s;r===void 0&&(r=0),n===void 0&&(n=null),a===void 0&&(a=null),i===void 0&&(i=!0);try{for(var l=oy(ly),d=l.next();!d.done;d=l.next()){var u=d.value;if(!(r===1&&u.rectangular)&&!(r===2&&!u.rectangular)&&!(n!=null&&(u.getSymbolWidth()<n.getWidth()||u.getSymbolHeight()<n.getHeight()))&&!(a!=null&&(u.getSymbolWidth()>a.getWidth()||u.getSymbolHeight()>a.getHeight()))&&t<=u.dataCapacity)return u}}catch(h){o={error:h}}finally{try{d&&!d.done&&(s=l.return)&&s.call(l)}finally{if(o)throw o.error}}if(i)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+t);return null},e.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},e.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},e.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},e.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},e.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},e.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},e.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},e.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},e.prototype.getDataCapacity=function(){return this.dataCapacity},e.prototype.getErrorCodewords=function(){return this.errorCodewords},e.prototype.getDataLengthForInterleavedBlock=function(t){return this.rsBlockData},e.prototype.getErrorLengthForInterleavedBlock=function(t){return this.rsBlockError},e})(),sy=(function(e){iy(t,e);function t(){return e.call(this,!1,1558,620,22,22,36,-1,62)||this}return t.prototype.getInterleavedBlockCount=function(){return 10},t.prototype.getDataLengthForInterleavedBlock=function(r){return r<=8?156:155},t})(pe),ly=[new pe(!1,3,5,8,8,1),new pe(!1,5,7,10,10,1),new pe(!0,5,7,16,6,1),new pe(!1,8,10,12,12,1),new pe(!0,10,11,14,6,2),new pe(!1,12,12,14,14,1),new pe(!0,16,14,24,10,1),new pe(!1,18,14,16,16,1),new pe(!1,22,18,18,18,1),new pe(!0,22,18,16,10,2),new pe(!1,30,20,20,20,1),new pe(!0,32,24,16,14,2),new pe(!1,36,24,22,22,1),new pe(!1,44,28,24,24,1),new pe(!0,49,28,22,14,2),new pe(!1,62,36,14,14,4),new pe(!1,86,42,16,16,4),new pe(!1,114,48,18,18,4),new pe(!1,144,56,20,20,4),new pe(!1,174,68,22,22,4),new pe(!1,204,84,24,24,4,102,42),new pe(!1,280,112,14,14,16,140,56),new pe(!1,368,144,16,16,16,92,36),new pe(!1,456,192,18,18,16,114,48),new pe(!1,576,224,20,20,16,144,56),new pe(!1,696,272,22,22,16,174,68),new pe(!1,816,336,24,24,16,136,56),new pe(!1,1050,408,18,18,36,175,68),new pe(!1,1304,496,20,20,36,163,62),new sy],cy=(function(){function e(t){this.msg=t,this.pos=0,this.skipAtEnd=0;for(var r=t.split("").map(function(s){return s.charCodeAt(0)}),n=new se,a=0,i=r.length;a<i;a++){var o=String.fromCharCode(r[a]&255);if(o==="?"&&t.charAt(a)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(o)}this.msg=n.toString(),this.shape=0,this.codewords=new se,this.newEncoding=-1}return e.prototype.setSymbolShape=function(t){this.shape=t},e.prototype.setSizeConstraints=function(t,r){this.minSize=t,this.maxSize=r},e.prototype.getMessage=function(){return this.msg},e.prototype.setSkipAtEnd=function(t){this.skipAtEnd=t},e.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},e.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},e.prototype.getCodewords=function(){return this.codewords},e.prototype.writeCodewords=function(t){this.codewords.append(t)},e.prototype.writeCodeword=function(t){this.codewords.append(t)},e.prototype.getCodewordCount=function(){return this.codewords.length()},e.prototype.getNewEncoding=function(){return this.newEncoding},e.prototype.signalEncoderChange=function(t){this.newEncoding=t},e.prototype.resetEncoderSignal=function(){this.newEncoding=-1},e.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},e.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},e.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},e.prototype.getSymbolInfo=function(){return this.symbolInfo},e.prototype.updateSymbolInfo=function(t){t===void 0&&(t=this.getCodewordCount()),(this.symbolInfo==null||t>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=pe.lookup(t,this.shape,this.minSize,this.maxSize,!0))},e.prototype.resetSymbolInfo=function(){this.symbolInfo=null},e})(),dy=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),uy=(function(e){dy(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getEncodingMode=function(){return Me},t.prototype.encode=function(r){for(var n=new se;r.hasMoreCharacters();){var a=r.getCurrentChar();r.pos++,this.encodeChar(a,n);var i=n.length();if(i%3===0){this.writeNextTriplet(r,n);var o=jt.lookAheadTest(r.getMessage(),r.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){r.signalEncoderChange(ve);break}}}this.handleEOD(r,n)},t.prototype.encodeChar=function(r,n){switch(r){case 13:n.append(0);break;case 42:n.append(1);break;case 62:n.append(2);break;case 32:n.append(3);break;default:r>=48&&r<=57?n.append(r-48+4):r>=65&&r<=90?n.append(r-65+14):jt.illegalCharacter(de.getCharAt(r));break}return 1},t.prototype.handleEOD=function(r,n){r.updateSymbolInfo();var a=r.getSymbolInfo().getDataCapacity()-r.getCodewordCount(),i=n.length();r.pos-=i,(r.getRemainingCharacters()>1||a>1||r.getRemainingCharacters()!==a)&&r.writeCodeword(ty),r.getNewEncoding()<0&&r.signalEncoderChange(ve)},t})(Xs),hy=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),fy=(function(e){hy(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getEncodingMode=function(){return nt},t.prototype.encodeChar=function(r,n){if(r===32)return n.append(3),1;if(r>=48&&r<=57)return n.append(r-48+4),1;if(r>=97&&r<=122)return n.append(r-97+14),1;if(r<32)return n.append(0),n.append(r),2;if(r<=47)return n.append(1),n.append(r-33),2;if(r<=64)return n.append(1),n.append(r-58+15),2;if(r>=91&&r<=95)return n.append(1),n.append(r-91+22),2;if(r===96)return n.append(2),n.append(0),2;if(r<=90)return n.append(2),n.append(r-65+1),2;if(r<=127)return n.append(2),n.append(r-123+27),2;n.append("1");var a=2;return a+=this.encodeChar(r-128,n),a},t})(Xs),jt=(function(){function e(){}return e.randomize253State=function(t){var r=149*t%253+1,n=Rc+r;return n<=254?n:n-254},e.encodeHighLevel=function(t,r,n,a,i){r===void 0&&(r=0),n===void 0&&(n=null),a===void 0&&(a=null),i===void 0&&(i=!1);var o=new Xs,s=[new ry,o,new fy,new uy,new ay,new ny],l=new cy(t);l.setSymbolShape(r),l.setSizeConstraints(n,a),t.startsWith(Lc)&&t.endsWith(Pc)?(l.writeCodeword(Kv),l.setSkipAtEnd(2),l.pos+=Lc.length):t.startsWith(Mc)&&t.endsWith(Pc)&&(l.writeCodeword(Zv),l.setSkipAtEnd(2),l.pos+=Mc.length);var d=ve;for(i&&(o.encodeMaximal(l),d=l.getNewEncoding(),l.resetEncoderSignal());l.hasMoreCharacters();)s[d].encode(l),l.getNewEncoding()>=0&&(d=l.getNewEncoding(),l.resetEncoderSignal());var u=l.getCodewordCount();l.updateSymbolInfo();var h=l.getSymbolInfo().getDataCapacity();u<h&&d!==ve&&d!==Ye&&d!==He&&l.writeCodeword("Ã¾");var f=l.getCodewords();for(f.length()<h&&f.append(Rc);f.length()<h;)f.append(this.randomize253State(f.length()+1));return l.getCodewords().toString()},e.lookAheadTest=function(t,r,n){var a=this.lookAheadTestIntern(t,r,n);if(n===Me&&a===Me){for(var i=Math.min(r+3,t.length),o=r;o<i;o++)if(!this.isNativeX12(t.charCodeAt(o)))return ve}else if(n===He&&a===He){for(var i=Math.min(r+4,t.length),o=r;o<i;o++)if(!this.isNativeEDIFACT(t.charCodeAt(o)))return ve}return a},e.lookAheadTestIntern=function(t,r,n){if(r>=t.length)return n;var a;n===ve?a=[0,1,1,1,1,1.25]:(a=[1,2,2,2,2,2.25],a[n]=0);for(var i=0,o=new Uint8Array(6),s=[];;){if(r+i===t.length){$e.fill(o,0),$e.fill(s,0);var l=this.findMinimums(a,s,le.MAX_VALUE,o),d=this.getMinimumCount(o);if(s[ve]===l)return ve;if(d===1){if(o[Ye]>0)return Ye;if(o[He]>0)return He;if(o[nt]>0)return nt;if(o[Me]>0)return Me}return qe}var u=t.charCodeAt(r+i);if(i++,this.isDigit(u)?a[ve]+=.5:this.isExtendedASCII(u)?(a[ve]=Math.ceil(a[ve]),a[ve]+=2):(a[ve]=Math.ceil(a[ve]),a[ve]++),this.isNativeC40(u)?a[qe]+=2/3:this.isExtendedASCII(u)?a[qe]+=8/3:a[qe]+=4/3,this.isNativeText(u)?a[nt]+=2/3:this.isExtendedASCII(u)?a[nt]+=8/3:a[nt]+=4/3,this.isNativeX12(u)?a[Me]+=2/3:this.isExtendedASCII(u)?a[Me]+=13/3:a[Me]+=10/3,this.isNativeEDIFACT(u)?a[He]+=3/4:this.isExtendedASCII(u)?a[He]+=17/4:a[He]+=13/4,this.isSpecialB256(u)?a[Ye]+=4:a[Ye]++,i>=4){if($e.fill(o,0),$e.fill(s,0),this.findMinimums(a,s,le.MAX_VALUE,o),s[ve]<this.min(s[Ye],s[qe],s[nt],s[Me],s[He]))return ve;if(s[Ye]<s[ve]||s[Ye]+1<this.min(s[qe],s[nt],s[Me],s[He]))return Ye;if(s[He]+1<this.min(s[Ye],s[qe],s[nt],s[Me],s[ve]))return He;if(s[nt]+1<this.min(s[Ye],s[qe],s[He],s[Me],s[ve]))return nt;if(s[Me]+1<this.min(s[Ye],s[qe],s[He],s[nt],s[ve]))return Me;if(s[qe]+1<this.min(s[ve],s[Ye],s[He],s[nt])){if(s[qe]<s[Me])return qe;if(s[qe]===s[Me]){for(var h=r+i+1;h<t.length;){var f=t.charCodeAt(h);if(this.isX12TermSep(f))return Me;if(!this.isNativeX12(f))break;h++}return qe}}}}},e.min=function(t,r,n,a,i){var o=Math.min(t,Math.min(r,Math.min(n,a)));return i===void 0?o:Math.min(o,i)},e.findMinimums=function(t,r,n,a){for(var i=0;i<6;i++){var o=r[i]=Math.ceil(t[i]);n>o&&(n=o,$e.fill(a,0)),n===o&&(a[i]=a[i]+1)}return n},e.getMinimumCount=function(t){for(var r=0,n=0;n<6;n++)r+=t[n];return r||0},e.isDigit=function(t){return t>=48&&t<=57},e.isExtendedASCII=function(t){return t>=128&&t<=255},e.isNativeC40=function(t){return t===32||t>=48&&t<=57||t>=65&&t<=90},e.isNativeText=function(t){return t===32||t>=48&&t<=57||t>=97&&t<=122},e.isNativeX12=function(t){return this.isX12TermSep(t)||t===32||t>=48&&t<=57||t>=65&&t<=90},e.isX12TermSep=function(t){return t===13||t===42||t===62},e.isNativeEDIFACT=function(t){return t>=32&&t<=94},e.isSpecialB256=function(t){return!1},e.determineConsecutiveDigitCount=function(t,r){r===void 0&&(r=0);for(var n=t.length,a=r;a<n&&this.isDigit(t.charCodeAt(a));)a++;return a-r},e.illegalCharacter=function(t){var r=le.toHexString(t.charCodeAt(0));throw r="0000".substring(0,4-r.length)+r,new Error("Illegal character: "+t+" (0x"+r+")")},e})(),wo=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Fc=(function(){function e(t){this.charset=t,this.name=t.name}return e.prototype.canEncode=function(t){try{return kt.encode(t,this.charset)!=null}catch{return!1}},e})(),py=(function(){function e(t,r,n){var a,i,o,s,l,d;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(B){return new Fc(Gv.forName(B))}),this.encoders=[];var u=[];u.push(new Fc(Vv.ISO_8859_1));for(var h=r!=null&&r.name.startsWith("UTF"),f=0;f<t.length;f++){var p=!1;try{for(var m=(a=void 0,wo(u)),g=m.next();!g.done;g=m.next()){var x=g.value,y=t.charAt(f),v=y.charCodeAt(0);if(v===n||x.canEncode(y)){p=!0;break}}}catch(B){a={error:B}}finally{try{g&&!g.done&&(i=m.return)&&i.call(m)}finally{if(a)throw a.error}}if(!p)try{for(var w=(o=void 0,wo(this.ENCODERS)),S=w.next();!S.done;S=w.next()){var x=S.value;if(x.canEncode(t.charAt(f))){u.push(x),p=!0;break}}}catch(B){o={error:B}}finally{try{S&&!S.done&&(s=w.return)&&s.call(w)}finally{if(o)throw o.error}}p||(h=!0)}if(u.length===1&&!h)this.encoders=[u[0]];else{this.encoders=[];var C=0;try{for(var k=wo(u),A=k.next();!A.done;A=k.next()){var x=A.value;this.encoders[C++]=x}}catch(B){l={error:B}}finally{try{A&&!A.done&&(d=k.return)&&d.call(k)}finally{if(l)throw l.error}}}var N=-1;if(r!=null){for(var f=0;f<this.encoders.length;f++)if(this.encoders[f]!=null&&r.name===this.encoders[f].name){N=f;break}}this.priorityEncoderIndex=N}return e.prototype.length=function(){return this.encoders.length},e.prototype.getCharsetName=function(t){if(!(t<this.length()))throw new Error("index must be less than length");return this.encoders[t].name},e.prototype.getCharset=function(t){if(!(t<this.length()))throw new Error("index must be less than length");return this.encoders[t].charset},e.prototype.getECIValue=function(t){return this.encoders[t].charset.getValueIdentifier()},e.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},e.prototype.canEncode=function(t,r){if(!(r<this.length()))throw new Error("index must be less than length");return!0},e.prototype.encode=function(t,r){if(!(r<this.length()))throw new Error("index must be less than length");return kt.encode(de.getCharAt(t),this.encoders[r].name)},e})(),my=3,gy=(function(){function e(t,r,n){this.fnc1=n;var a=new py(t,r,n);if(a.length()===1)for(var i=0;i<this.bytes.length;i++){var o=t.charAt(i).charCodeAt(0);this.bytes[i]=o===n?1e3:o}else this.bytes=this.encodeMinimally(t,a,n)}return e.prototype.getFNC1Character=function(){return this.fnc1},e.prototype.length=function(){return this.bytes.length},e.prototype.haveNCharacters=function(t,r){if(t+r-1>=this.bytes.length)return!1;for(var n=0;n<r;n++)if(this.isECI(t+n))return!1;return!0},e.prototype.charAt=function(t){if(t<0||t>=this.length())throw new Error(""+t);if(this.isECI(t))throw new Error("value at "+t+" is not a character but an ECI");return this.isFNC1(t)?this.fnc1:this.bytes[t]},e.prototype.subSequence=function(t,r){if(t<0||t>r||r>this.length())throw new Error(""+t);for(var n=new se,a=t;a<r;a++){if(this.isECI(a))throw new Error("value at "+a+" is not a character but an ECI");n.append(this.charAt(a))}return n.toString()},e.prototype.isECI=function(t){if(t<0||t>=this.length())throw new Error(""+t);return this.bytes[t]>255&&this.bytes[t]<=999},e.prototype.isFNC1=function(t){if(t<0||t>=this.length())throw new Error(""+t);return this.bytes[t]===1e3},e.prototype.getECIValue=function(t){if(t<0||t>=this.length())throw new Error(""+t);if(!this.isECI(t))throw new Error("value at "+t+" is not an ECI but a character");return this.bytes[t]-256},e.prototype.addEdge=function(t,r,n){(t[r][n.encoderIndex]==null||t[r][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(t[r][n.encoderIndex]=n)},e.prototype.addEdges=function(t,r,n,a,i,o){var s=t.charAt(a).charCodeAt(0),l=0,d=r.length();r.getPriorityEncoderIndex()>=0&&(s===o||r.canEncode(s,r.getPriorityEncoderIndex()))&&(l=r.getPriorityEncoderIndex(),d=l+1);for(var u=l;u<d;u++)(s===o||r.canEncode(s,u))&&this.addEdge(n,a+1,new $c(s,r,u,i,o))},e.prototype.encodeMinimally=function(t,r,n){var a=t.length,i=new $c[a+1][r.length()];this.addEdges(t,r,i,0,null,n);for(var o=1;o<=a;o++){for(var s=0;s<r.length();s++)i[o][s]!=null&&o<a&&this.addEdges(t,r,i,o,i[o][s],n);for(var s=0;s<r.length();s++)i[o-1][s]=null}for(var l=-1,d=le.MAX_VALUE,s=0;s<r.length();s++)if(i[a][s]!=null){var u=i[a][s];u.cachedTotalSize<d&&(d=u.cachedTotalSize,l=s)}if(l<0)throw new Error('Failed to encode "'+t+'"');for(var h=[],f=i[a][l];f!=null;){if(f.isFNC1())h.unshift(1e3);else for(var p=r.encode(f.c,f.encoderIndex),o=p.length-1;o>=0;o--)h.unshift(p[o]&255);var m=f.previous===null?0:f.previous.encoderIndex;m!==f.encoderIndex&&h.unshift(256+r.getECIValue(f.encoderIndex)),f=f.previous}for(var g=[],o=0;o<g.length;o++)g[o]=h[o];return g},e})(),$c=(function(){function e(t,r,n,a,i){this.c=t,this.encoderSet=r,this.encoderIndex=n,this.previous=a,this.fnc1=i,this.c=t===i?1e3:t;var o=this.isFNC1()?1:r.encode(t,n).length,s=a===null?0:a.encoderIndex;s!==n&&(o+=my),a!=null&&(o+=a.cachedTotalSize),this.cachedTotalSize=o}return e.prototype.isFNC1=function(){return this.c===1e3},e})(),xy=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();var Uc;(function(e){e[e.ASCII=0]="ASCII",e[e.C40=1]="C40",e[e.TEXT=2]="TEXT",e[e.X12=3]="X12",e[e.EDF=4]="EDF",e[e.B256=5]="B256"})(Uc||(Uc={}));(function(e){xy(t,e);function t(r,n,a,i,o){var s=e.call(this,r,n,a)||this;return s.shape=i,s.macroId=o,s}return t.prototype.getMacroId=function(){return this.macroId},t.prototype.getShapeHint=function(){return this.shape},t})(gy);var vy=(function(){function e(){}return e.prototype.isCompact=function(){return this.compact},e.prototype.setCompact=function(t){this.compact=t},e.prototype.getSize=function(){return this.size},e.prototype.setSize=function(t){this.size=t},e.prototype.getLayers=function(){return this.layers},e.prototype.setLayers=function(t){this.layers=t},e.prototype.getCodeWords=function(){return this.codeWords},e.prototype.setCodeWords=function(t){this.codeWords=t},e.prototype.getMatrix=function(){return this.matrix},e.prototype.setMatrix=function(t){this.matrix=t},e})(),zc=(function(){function e(){}return e.singletonList=function(t){return[t]},e.min=function(t,r){return t.sort(r)[0]},e})(),yy=(function(){function e(t){this.previous=t}return e.prototype.getPrevious=function(){return this.previous},e})(),by=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Ys=(function(e){by(t,e);function t(r,n,a){var i=e.call(this,r)||this;return i.value=n,i.bitCount=a,i}return t.prototype.appendTo=function(r,n){r.appendBits(this.value,this.bitCount)},t.prototype.add=function(r,n){return new t(this,r,n)},t.prototype.addBinaryShift=function(r,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new t(this,r,n)},t.prototype.toString=function(){var r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+le.toBinaryString(r|1<<this.bitCount).substring(1)+">"},t})(yy),wy=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),_y=(function(e){wy(t,e);function t(r,n,a){var i=e.call(this,r,0,0)||this;return i.binaryShiftStart=n,i.binaryShiftByteCount=a,i}return t.prototype.appendTo=function(r,n){for(var a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):a===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(n[this.binaryShiftStart+a],8)},t.prototype.addBinaryShift=function(r,n){return new t(this,r,n)},t.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},t})(Ys);function Cy(e,t,r){return new _y(e,t,r)}function Cn(e,t,r){return new Ys(e,t,r)}var Sy=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],fr=0,ni=1,At=2,Mh=3,$t=4,Ay=new Ys(null,0,0),_o=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],ky=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function Ey(e){var t,r;try{for(var n=ky(e),a=n.next();!a.done;a=n.next()){var i=a.value;$e.fill(i,-1)}}catch(o){t={error:o}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return e[fr][$t]=0,e[ni][$t]=0,e[ni][fr]=28,e[Mh][$t]=0,e[At][$t]=0,e[At][fr]=15,e}var Ph=Ey($e.createInt32Array(6,6)),Ny=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ty=(function(){function e(t,r,n,a){this.token=t,this.mode=r,this.binaryShiftByteCount=n,this.bitCount=a}return e.prototype.getMode=function(){return this.mode},e.prototype.getToken=function(){return this.token},e.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},e.prototype.getBitCount=function(){return this.bitCount},e.prototype.latchAndAppend=function(t,r){var n=this.bitCount,a=this.token;if(t!==this.mode){var i=_o[this.mode][t];a=Cn(a,i&65535,i>>16),n+=i>>16}var o=t===At?4:5;return a=Cn(a,r,o),new e(a,t,0,n+o)},e.prototype.shiftAndAppend=function(t,r){var n=this.token,a=this.mode===At?4:5;return n=Cn(n,Ph[this.mode][t],a),n=Cn(n,r,5),new e(n,this.mode,0,this.bitCount+a+5)},e.prototype.addBinaryShiftChar=function(t){var r=this.token,n=this.mode,a=this.bitCount;if(this.mode===$t||this.mode===At){var i=_o[n][fr];r=Cn(r,i&65535,i>>16),a+=i>>16,n=fr}var o=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,s=new e(r,n,this.binaryShiftByteCount+1,a+o);return s.binaryShiftByteCount===2078&&(s=s.endBinaryShift(t+1)),s},e.prototype.endBinaryShift=function(t){if(this.binaryShiftByteCount===0)return this;var r=this.token;return r=Cy(r,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new e(r,this.mode,0,this.bitCount)},e.prototype.isBetterThanOrEqualTo=function(t){var r=this.bitCount+(_o[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?r+=e.calculateBinaryShiftCost(t)-e.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(r+=10),r<=t.bitCount},e.prototype.toBitArray=function(t){for(var r,n,a=[],i=this.endBinaryShift(t.length).token;i!==null;i=i.getPrevious())a.unshift(i);var o=new Ge;try{for(var s=Ny(a),l=s.next();!l.done;l=s.next()){var d=l.value;d.appendTo(o,t)}}catch(u){r={error:u}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return o},e.prototype.toString=function(){return de.format("%s bits=%d bytes=%d",Sy[this.mode],this.bitCount,this.binaryShiftByteCount)},e.calculateBinaryShiftCost=function(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0},e.INITIAL_STATE=new e(Ay,fr,0,0),e})();function Iy(e){var t=de.getCharCode(" "),r=de.getCharCode("."),n=de.getCharCode(",");e[fr][t]=1;for(var a=de.getCharCode("Z"),i=de.getCharCode("A"),o=i;o<=a;o++)e[fr][o]=o-i+2;e[ni][t]=1;for(var s=de.getCharCode("z"),l=de.getCharCode("a"),o=l;o<=s;o++)e[ni][o]=o-l+2;e[At][t]=1;for(var d=de.getCharCode("9"),u=de.getCharCode("0"),o=u;o<=d;o++)e[At][o]=o-u+2;e[At][n]=12,e[At][r]=13;for(var h=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],f=0;f<h.length;f++)e[Mh][de.getCharCode(h[f])]=f;for(var p=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],f=0;f<p.length;f++)de.getCharCode(p[f])>0&&(e[$t][de.getCharCode(p[f])]=f);return e}var Co=Iy($e.createInt32Array(5,256)),wa=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Oy=(function(){function e(t){this.text=t}return e.prototype.encode=function(){for(var t=de.getCharCode(" "),r=de.getCharCode(`
`),n=zc.singletonList(Ty.INITIAL_STATE),a=0;a<this.text.length;a++){var i=void 0,o=a+1<this.text.length?this.text[a+1]:0;switch(this.text[a]){case de.getCharCode("\r"):i=o===r?2:0;break;case de.getCharCode("."):i=o===t?3:0;break;case de.getCharCode(","):i=o===t?4:0;break;case de.getCharCode(":"):i=o===t?5:0;break;default:i=0}i>0?(n=e.updateStateListForPair(n,a,i),a++):n=this.updateStateListForChar(n,a)}var s=zc.min(n,function(l,d){return l.getBitCount()-d.getBitCount()});return s.toBitArray(this.text)},e.prototype.updateStateListForChar=function(t,r){var n,a,i=[];try{for(var o=wa(t),s=o.next();!s.done;s=o.next()){var l=s.value;this.updateStateForChar(l,r,i)}}catch(d){n={error:d}}finally{try{s&&!s.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}return e.simplifyStates(i)},e.prototype.updateStateForChar=function(t,r,n){for(var a=this.text[r]&255,i=Co[t.getMode()][a]>0,o=null,s=0;s<=$t;s++){var l=Co[s][a];if(l>0){if(o==null&&(o=t.endBinaryShift(r)),!i||s===t.getMode()||s===At){var d=o.latchAndAppend(s,l);n.push(d)}if(!i&&Ph[t.getMode()][s]>=0){var u=o.shiftAndAppend(s,l);n.push(u)}}}if(t.getBinaryShiftByteCount()>0||Co[t.getMode()][a]===0){var h=t.addBinaryShiftChar(r);n.push(h)}},e.updateStateListForPair=function(t,r,n){var a,i,o=[];try{for(var s=wa(t),l=s.next();!l.done;l=s.next()){var d=l.value;this.updateStateForPair(d,r,n,o)}}catch(u){a={error:u}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(a)throw a.error}}return this.simplifyStates(o)},e.updateStateForPair=function(t,r,n,a){var i=t.endBinaryShift(r);if(a.push(i.latchAndAppend($t,n)),t.getMode()!==$t&&a.push(i.shiftAndAppend($t,n)),n===3||n===4){var o=i.latchAndAppend(At,16-n).latchAndAppend(At,1);a.push(o)}if(t.getBinaryShiftByteCount()>0){var s=t.addBinaryShiftChar(r).addBinaryShiftChar(r+1);a.push(s)}},e.simplifyStates=function(t){var r,n,a,i,o=[];try{for(var s=wa(t),l=s.next();!l.done;l=s.next()){var d=l.value,u=!0,h=function(x){if(x.isBetterThanOrEqualTo(d))return u=!1,"break";d.isBetterThanOrEqualTo(x)&&(o=o.filter(function(y){return y!==x}))};try{for(var f=(a=void 0,wa(o)),p=f.next();!p.done;p=f.next()){var m=p.value,g=h(m);if(g==="break")break}}catch(x){a={error:x}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(a)throw a.error}}u&&o.push(d)}}catch(x){r={error:x}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return o},e})(),By=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function e(){}return e.encodeBytes=function(t){return e.encode(t,e.DEFAULT_EC_PERCENT,e.DEFAULT_AZTEC_LAYERS)},e.encode=function(t,r,n){var a=new Oy(t).encode(),i=le.truncDivision(a.getSize()*r,100)+11,o=a.getSize()+i,s,l,d,u,h;if(n!==e.DEFAULT_AZTEC_LAYERS){if(s=n<0,l=Math.abs(n),l>(s?e.MAX_NB_BITS_COMPACT:e.MAX_NB_BITS))throw new ee(de.format("Illegal value %s for layers",n));d=e.totalBitsInLayer(l,s),u=e.WORD_SIZE[l];var f=d-d%u;if(h=e.stuffBits(a,u),h.getSize()+i>f)throw new ee("Data to large for user specified layer");if(s&&h.getSize()>u*64)throw new ee("Data to large for user specified layer")}else{u=0,h=null;for(var p=0;;p++){if(p>e.MAX_NB_BITS)throw new ee("Data too large for an Aztec code");if(s=p<=3,l=s?p+1:p,d=e.totalBitsInLayer(l,s),!(o>d)){(h==null||u!==e.WORD_SIZE[l])&&(u=e.WORD_SIZE[l],h=e.stuffBits(a,u));var f=d-d%u;if(!(s&&h.getSize()>u*64)&&h.getSize()+i<=f)break}}}var m=e.generateCheckWords(h,d,u),g=h.getSize()/u,x=e.generateModeMessage(s,l,g),y=(s?11:14)+l*4,v=new Int32Array(y),w;if(s){w=y;for(var p=0;p<v.length;p++)v[p]=p}else{w=y+1+2*le.truncDivision(le.truncDivision(y,2)-1,15);for(var S=le.truncDivision(y,2),C=le.truncDivision(w,2),p=0;p<S;p++){var k=p+le.truncDivision(p,15);v[S-p-1]=C-k-1,v[S+p]=C+k+1}}for(var A=new Ht(w),p=0,N=0;p<l;p++){for(var B=(l-p)*4+(s?9:12),E=0;E<B;E++)for(var I=E*2,F=0;F<2;F++)m.get(N+I+F)&&A.set(v[p*2+F],v[p*2+E]),m.get(N+B*2+I+F)&&A.set(v[p*2+E],v[y-1-p*2-F]),m.get(N+B*4+I+F)&&A.set(v[y-1-p*2-F],v[y-1-p*2-E]),m.get(N+B*6+I+F)&&A.set(v[y-1-p*2-E],v[p*2+F]);N+=B*8}if(e.drawModeMessage(A,s,w,x),s)e.drawBullsEye(A,le.truncDivision(w,2),5);else{e.drawBullsEye(A,le.truncDivision(w,2),7);for(var p=0,E=0;p<le.truncDivision(y,2)-1;p+=15,E+=16)for(var F=le.truncDivision(w,2)&1;F<w;F+=2)A.set(le.truncDivision(w,2)-E,F),A.set(le.truncDivision(w,2)+E,F),A.set(F,le.truncDivision(w,2)-E),A.set(F,le.truncDivision(w,2)+E)}var V=new vy;return V.setCompact(s),V.setSize(w),V.setLayers(l),V.setCodeWords(g),V.setMatrix(A),V},e.drawBullsEye=function(t,r,n){for(var a=0;a<n;a+=2)for(var i=r-a;i<=r+a;i++)t.set(i,r-a),t.set(i,r+a),t.set(r-a,i),t.set(r+a,i);t.set(r-n,r-n),t.set(r-n+1,r-n),t.set(r-n,r-n+1),t.set(r+n,r-n),t.set(r+n,r-n+1),t.set(r+n,r+n-1)},e.generateModeMessage=function(t,r,n){var a=new Ge;return t?(a.appendBits(r-1,2),a.appendBits(n-1,6),a=e.generateCheckWords(a,28,4)):(a.appendBits(r-1,5),a.appendBits(n-1,11),a=e.generateCheckWords(a,40,4)),a},e.drawModeMessage=function(t,r,n,a){var i=le.truncDivision(n,2);if(r)for(var o=0;o<7;o++){var s=i-3+o;a.get(o)&&t.set(s,i-5),a.get(o+7)&&t.set(i+5,s),a.get(20-o)&&t.set(s,i+5),a.get(27-o)&&t.set(i-5,s)}else for(var o=0;o<10;o++){var s=i-5+o+le.truncDivision(o,5);a.get(o)&&t.set(s,i-7),a.get(o+10)&&t.set(i+7,s),a.get(29-o)&&t.set(s,i+7),a.get(39-o)&&t.set(i-7,s)}},e.generateCheckWords=function(t,r,n){var a,i,o=t.getSize()/n,s=new Rh(e.getGF(n)),l=le.truncDivision(r,n),d=e.bitsToWords(t,n,l);s.encode(d,l-o);var u=r%n,h=new Ge;h.appendBits(0,u);try{for(var f=By(Array.from(d)),p=f.next();!p.done;p=f.next()){var m=p.value;h.appendBits(m,n)}}catch(g){a={error:g}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(a)throw a.error}}return h},e.bitsToWords=function(t,r,n){var a=new Int32Array(n),i,o;for(i=0,o=t.getSize()/r;i<o;i++){for(var s=0,l=0;l<r;l++)s|=t.get(i*r+l)?1<<r-l-1:0;a[i]=s}return a},e.getGF=function(t){switch(t){case 4:return ct.AZTEC_PARAM;case 6:return ct.AZTEC_DATA_6;case 8:return ct.AZTEC_DATA_8;case 10:return ct.AZTEC_DATA_10;case 12:return ct.AZTEC_DATA_12;default:throw new ee("Unsupported word size "+t)}},e.stuffBits=function(t,r){for(var n=new Ge,a=t.getSize(),i=(1<<r)-2,o=0;o<a;o+=r){for(var s=0,l=0;l<r;l++)(o+l>=a||t.get(o+l))&&(s|=1<<r-1-l);(s&i)===i?(n.appendBits(s&i,r),o--):(s&i)===0?(n.appendBits(s|1,r),o--):n.appendBits(s,r)}return n},e.totalBitsInLayer=function(t,r){return((r?88:112)+16*t)*t},e.DEFAULT_EC_PERCENT=33,e.DEFAULT_AZTEC_LAYERS=0,e.MAX_NB_BITS=32,e.MAX_NB_BITS_COMPACT=4,e.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),e})();var jy=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Dy=(function(e){jy(t,e);function t(r){var n=e.call(this,r.width,r.height)||this;return n.canvas=r,n.tempCanvasElement=null,n.buffer=t.makeBufferFromCanvasImageData(r),n}return t.makeBufferFromCanvasImageData=function(r){var n;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}if(!n)throw new Error("Couldn't get canvas context.");var a=n.getImageData(0,0,r.width,r.height);return t.toGrayscaleBuffer(a.data,r.width,r.height)},t.toGrayscaleBuffer=function(r,n,a){for(var i=new Uint8ClampedArray(n*a),o=0,s=0,l=r.length;o<l;o+=4,s++){var d=void 0,u=r[o+3];if(u===0)d=255;else{var h=r[o],f=r[o+1],p=r[o+2];d=306*h+601*f+117*p+512>>10}i[s]=d}return i},t.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new ee("Requested row is outside the image: "+r);var a=this.getWidth(),i=r*a;return n===null?n=this.buffer.slice(i,i+a):(n.length<a&&(n=new Uint8ClampedArray(a)),n.set(this.buffer.slice(i,i+a))),n},t.prototype.getMatrix=function(){return this.buffer},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(r,n,a,i){return e.prototype.crop.call(this,r,n,a,i),this},t.prototype.isRotateSupported=function(){return!0},t.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},t.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},t.prototype.invert=function(){return new Pi(this)},t.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},t.prototype.rotate=function(r){var n=this.getTempCanvasElement();if(!n)throw new Error("Could not create a Canvas element.");var a=r*t.DEGREE_TO_RADIANS,i=this.canvas.width,o=this.canvas.height,s=Math.ceil(Math.abs(Math.cos(a))*i+Math.abs(Math.sin(a))*o),l=Math.ceil(Math.abs(Math.sin(a))*i+Math.abs(Math.cos(a))*o);n.width=s,n.height=l;var d=n.getContext("2d");if(!d)throw new Error("Could not create a Canvas Context element.");return d.translate(s/2,l/2),d.rotate(a),d.drawImage(this.canvas,i/-2,o/-2),this.buffer=t.makeBufferFromCanvasImageData(n),this},t.DEGREE_TO_RADIANS=Math.PI/180,t})(oa);function Fh(){return typeof navigator<"u"}function Ry(){return Fh()&&!!navigator.mediaDevices}function Ly(){return!!(Ry()&&navigator.mediaDevices.enumerateDevices)}var Hr=function(){return Hr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Hr.apply(this,arguments)},Te=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function s(u){try{d(n.next(u))}catch(h){o(h)}}function l(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):a(u.value).then(s,l)}d((n=n.apply(e,t||[])).next())})},Ie=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(d){return function(u){return l([d,u])}}function l(d){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(i=d[0]&2?a.return:d[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,d[1])).done)return i;switch(a=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,a=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){r.label=d[1];break}if(d[0]===6&&r.label<i[1]){r.label=i[1],i=d;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(d);break}i[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(u){d=[6,u],a=0}finally{n=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},So=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},My={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},mn=(function(){function e(t,r,n){r===void 0&&(r=new Map),n===void 0&&(n={}),this.reader=t,this.hints=r,this.options=Hr(Hr({},My),n)}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(t){this.hints.set(we.POSSIBLE_FORMATS,t)},enumerable:!1,configurable:!0}),e.addVideoSource=function(t,r){try{t.srcObject=r}catch{console.error("got interrupted by new loading request")}},e.mediaStreamSetTorch=function(t,r){return Te(this,void 0,void 0,function(){return Ie(this,function(n){switch(n.label){case 0:return[4,t.applyConstraints({advanced:[{fillLightMode:r?"flash":"off",torch:!!r}]})];case 1:return n.sent(),[2]}})})},e.mediaStreamIsTorchCompatible=function(t){var r,n,a=t.getVideoTracks();try{for(var i=So(a),o=i.next();!o.done;o=i.next()){var s=o.value;if(e.mediaStreamIsTorchCompatibleTrack(s))return!0}}catch(l){r={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return!1},e.mediaStreamIsTorchCompatibleTrack=function(t){try{var r=t.getCapabilities();return"torch"in r}catch(n){return console.error(n),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},e.isVideoPlaying=function(t){return t.currentTime>0&&!t.paused&&t.readyState>2},e.getMediaElement=function(t,r){var n=document.getElementById(t);if(!n)throw new Be("element with id '".concat(t,"' not found"));if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new Be("element with id '".concat(t,"' must be an ").concat(r," element"));return n},e.createVideoElement=function(t){if(t instanceof HTMLVideoElement)return t;if(typeof t=="string")return e.getMediaElement(t,"video");if(!t&&typeof document<"u"){var r=document.createElement("video");return r.width=200,r.height=200,r}throw new Error("Couldn't get videoElement from videoSource!")},e.prepareImageElement=function(t){if(t instanceof HTMLImageElement)return t;if(typeof t=="string")return e.getMediaElement(t,"img");if(typeof t>"u"){var r=document.createElement("img");return r.width=200,r.height=200,r}throw new Error("Couldn't get imageElement from imageSource!")},e.prepareVideoElement=function(t){var r=e.createVideoElement(t);return r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},e.isImageLoaded=function(t){return!(!t.complete||t.naturalWidth===0)},e.createBinaryBitmapFromCanvas=function(t){var r=new Dy(t),n=new Ch(r);return new _h(n)},e.drawImageOnCanvas=function(t,r){t.drawImage(r,0,0)},e.getMediaElementDimensions=function(t){if(t instanceof HTMLVideoElement)return{height:t.videoHeight,width:t.videoWidth};if(t instanceof HTMLImageElement)return{height:t.naturalHeight||t.height,width:t.naturalWidth||t.width};throw new Error("Couldn't find the Source's dimensions!")},e.createCaptureCanvas=function(t){if(!t)throw new Be("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var r=document.createElement("canvas"),n=e.getMediaElementDimensions(t),a=n.width,i=n.height;return r.style.width=a+"px",r.style.height=i+"px",r.width=a,r.height=i,r},e.tryPlayVideo=function(t){return Te(this,void 0,void 0,function(){var r;return Ie(this,function(n){switch(n.label){case 0:if(t?.ended)return console.error("Trying to play video that has ended."),[2,!1];if(e.isVideoPlaying(t))return console.warn("Trying to play video that is already playing."),[2,!0];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,t.play()];case 2:return n.sent(),[2,!0];case 3:return r=n.sent(),console.warn("It was not possible to play the video.",r),[2,!1];case 4:return[2]}})})},e.createCanvasFromMediaElement=function(t){var r=e.createCaptureCanvas(t),n=r.getContext("2d");if(!n)throw new Error("Couldn't find Canvas 2D Context.");return e.drawImageOnCanvas(n,t),r},e.createBinaryBitmapFromMediaElem=function(t){var r=e.createCanvasFromMediaElement(t);return e.createBinaryBitmapFromCanvas(r)},e.destroyImageElement=function(t){t.src="",t.removeAttribute("src"),t=void 0},e.listVideoInputDevices=function(){return Te(this,void 0,void 0,function(){var t,r,n,a,i,o,s,l,d,u,h,f;return Ie(this,function(p){switch(p.label){case 0:if(!Fh())throw new Error("Can't enumerate devices, navigator is not present.");if(!Ly())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:t=p.sent(),r=[];try{for(n=So(t),a=n.next();!a.done;a=n.next())i=a.value,o=i.kind==="video"?"videoinput":i.kind,o==="videoinput"&&(s=i.deviceId||i.id,l=i.label||"Video device ".concat(r.length+1),d=i.groupId,u={deviceId:s,label:l,kind:o,groupId:d},r.push(u))}catch(m){h={error:m}}finally{try{a&&!a.done&&(f=n.return)&&f.call(n)}finally{if(h)throw h.error}}return[2,r]}})})},e.findDeviceById=function(t){return Te(this,void 0,void 0,function(){var r;return Ie(this,function(n){switch(n.label){case 0:return[4,e.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(a){return a.deviceId===t})]:[2]}})})},e.cleanVideoSource=function(t){if(t){try{t.srcObject=null}catch{t.src=""}t&&t.removeAttribute("src")}},e.releaseAllStreams=function(){e.streamTracker.length!==0&&e.streamTracker.forEach(function(t){t.getTracks().forEach(function(r){return r.stop()})}),e.streamTracker=[]},e.playVideoOnLoadAsync=function(t,r){return Te(this,void 0,void 0,function(){var n;return Ie(this,function(a){switch(a.label){case 0:return[4,e.tryPlayVideo(t)];case 1:return n=a.sent(),n?[2,!0]:[2,new Promise(function(i,o){var s=setTimeout(function(){e.isVideoPlaying(t)||(o(!1),t.removeEventListener("canplay",l))},r),l=function(){e.tryPlayVideo(t).then(function(d){clearTimeout(s),t.removeEventListener("canplay",l),i(d)})};t.addEventListener("canplay",l)})]}})})},e.attachStreamToVideo=function(t,r,n){return n===void 0&&(n=5e3),Te(this,void 0,void 0,function(){var a;return Ie(this,function(i){switch(i.label){case 0:return a=e.prepareVideoElement(r),e.addVideoSource(a,t),[4,e.playVideoOnLoadAsync(a,n)];case 1:return i.sent(),[2,a]}})})},e._waitImageLoad=function(t){return new Promise(function(r,n){var a=1e4,i=setTimeout(function(){e.isImageLoaded(t)||(t.removeEventListener("load",o),n())},a),o=function(){clearTimeout(i),t.removeEventListener("load",o),r()};t.addEventListener("load",o)})},e.checkCallbackFnOrThrow=function(t){if(!t)throw new Be("`callbackFn` is a required parameter, you cannot capture results without it.")},e.disposeMediaStream=function(t){t.getVideoTracks().forEach(function(r){return r.stop()}),t=void 0},e.prototype.decode=function(t){var r=e.createCanvasFromMediaElement(t);return this.decodeFromCanvas(r)},e.prototype.decodeBitmap=function(t){return this.reader.decode(t,this.hints)},e.prototype.decodeFromCanvas=function(t){var r=e.createBinaryBitmapFromCanvas(t);return this.decodeBitmap(r)},e.prototype.decodeFromImageElement=function(t){return Te(this,void 0,void 0,function(){var r;return Ie(this,function(n){switch(n.label){case 0:if(!t)throw new Be("An image element must be provided.");return r=e.prepareImageElement(t),[4,this._decodeOnLoadImage(r)];case 1:return[2,n.sent()]}})})},e.prototype.decodeFromImageUrl=function(t){return Te(this,void 0,void 0,function(){var r;return Ie(this,function(n){switch(n.label){case 0:if(!t)throw new Be("An URL must be provided.");r=e.prepareImageElement(),r.src=t,n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.decodeFromImageElement(r)];case 2:return[2,n.sent()];case 3:return e.destroyImageElement(r),[7];case 4:return[2]}})})},e.prototype.decodeFromConstraints=function(t,r,n){return Te(this,void 0,void 0,function(){var a,i;return Ie(this,function(o){switch(o.label){case 0:return e.checkCallbackFnOrThrow(n),[4,this.getUserMedia(t)];case 1:a=o.sent(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.decodeFromStream(a,r,n)];case 3:return[2,o.sent()];case 4:throw i=o.sent(),e.disposeMediaStream(a),i;case 5:return[2]}})})},e.prototype.decodeFromStream=function(t,r,n){return Te(this,void 0,void 0,function(){var a,i,o,s,l,d,u,h,f,p=this;return Ie(this,function(m){switch(m.label){case 0:return e.checkCallbackFnOrThrow(n),a=this.options.tryPlayVideoTimeout,[4,e.attachStreamToVideo(t,r,a)];case 1:return i=m.sent(),o=function(){e.disposeMediaStream(t),e.cleanVideoSource(i)},s=this.scan(i,n,o),l=t.getVideoTracks(),d=Hr(Hr({},s),{stop:function(){s.stop()},streamVideoConstraintsApply:function(g,x){return Te(this,void 0,void 0,function(){var y,v,w,S,C,k,A;return Ie(this,function(N){switch(N.label){case 0:y=x?l.filter(x):l,N.label=1;case 1:N.trys.push([1,6,7,8]),v=So(y),w=v.next(),N.label=2;case 2:return w.done?[3,5]:(S=w.value,[4,S.applyConstraints(g)]);case 3:N.sent(),N.label=4;case 4:return w=v.next(),[3,2];case 5:return[3,8];case 6:return C=N.sent(),k={error:C},[3,8];case 7:try{w&&!w.done&&(A=v.return)&&A.call(v)}finally{if(k)throw k.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(g){return l.find(g).getConstraints()},streamVideoSettingsGet:function(g){return l.find(g).getSettings()},streamVideoCapabilitiesGet:function(g){return l.find(g).getCapabilities()}}),u=e.mediaStreamIsTorchCompatible(t),u&&(h=l?.find(function(g){return e.mediaStreamIsTorchCompatibleTrack(g)}),f=function(g){return Te(p,void 0,void 0,function(){return Ie(this,function(x){switch(x.label){case 0:return[4,e.mediaStreamSetTorch(h,g)];case 1:return x.sent(),[2]}})})},d.switchTorch=f,d.stop=function(){return Te(p,void 0,void 0,function(){return Ie(this,function(g){switch(g.label){case 0:return s.stop(),[4,f(!1)];case 1:return g.sent(),[2]}})})}),[2,d]}})})},e.prototype.decodeFromVideoDevice=function(t,r,n){return Te(this,void 0,void 0,function(){var a,i;return Ie(this,function(o){switch(o.label){case 0:return e.checkCallbackFnOrThrow(n),t?a={deviceId:{exact:t}}:a={facingMode:"environment"},i={video:a},[4,this.decodeFromConstraints(i,r,n)];case 1:return[2,o.sent()]}})})},e.prototype.decodeFromVideoElement=function(t,r){return Te(this,void 0,void 0,function(){var n,a;return Ie(this,function(i){switch(i.label){case 0:if(e.checkCallbackFnOrThrow(r),!t)throw new Be("A video element must be provided.");return n=e.prepareVideoElement(t),a=this.options.tryPlayVideoTimeout,[4,e.playVideoOnLoadAsync(n,a)];case 1:return i.sent(),[2,this.scan(n,r)]}})})},e.prototype.decodeFromVideoUrl=function(t,r){return Te(this,void 0,void 0,function(){var n,a,i,o;return Ie(this,function(s){switch(s.label){case 0:if(e.checkCallbackFnOrThrow(r),!t)throw new Be("An URL must be provided.");return n=e.prepareVideoElement(),n.src=t,a=function(){e.cleanVideoSource(n)},i=this.options.tryPlayVideoTimeout,[4,e.playVideoOnLoadAsync(n,i)];case 1:return s.sent(),o=this.scan(n,r,a),[2,o]}})})},e.prototype.decodeOnceFromConstraints=function(t,r){return Te(this,void 0,void 0,function(){var n;return Ie(this,function(a){switch(a.label){case 0:return[4,this.getUserMedia(t)];case 1:return n=a.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,a.sent()]}})})},e.prototype.decodeOnceFromStream=function(t,r){return Te(this,void 0,void 0,function(){var n,a,i;return Ie(this,function(o){switch(o.label){case 0:return n=!!r,[4,e.attachStreamToVideo(t,r)];case 1:a=o.sent(),o.label=2;case 2:return o.trys.push([2,,4,5]),[4,this.scanOneResult(a)];case 3:return i=o.sent(),[2,i];case 4:return n||e.cleanVideoSource(a),[7];case 5:return[2]}})})},e.prototype.decodeOnceFromVideoDevice=function(t,r){return Te(this,void 0,void 0,function(){var n,a;return Ie(this,function(i){switch(i.label){case 0:return t?n={deviceId:{exact:t}}:n={facingMode:"environment"},a={video:n},[4,this.decodeOnceFromConstraints(a,r)];case 1:return[2,i.sent()]}})})},e.prototype.decodeOnceFromVideoElement=function(t){return Te(this,void 0,void 0,function(){var r,n;return Ie(this,function(a){switch(a.label){case 0:if(!t)throw new Be("A video element must be provided.");return r=e.prepareVideoElement(t),n=this.options.tryPlayVideoTimeout,[4,e.playVideoOnLoadAsync(r,n)];case 1:return a.sent(),[4,this.scanOneResult(r)];case 2:return[2,a.sent()]}})})},e.prototype.decodeOnceFromVideoUrl=function(t){return Te(this,void 0,void 0,function(){var r,n;return Ie(this,function(a){switch(a.label){case 0:if(!t)throw new Be("An URL must be provided.");r=e.prepareVideoElement(),r.src=t,n=this.decodeOnceFromVideoElement(r),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,n];case 2:return[2,a.sent()];case 3:return e.cleanVideoSource(r),[7];case 4:return[2]}})})},e.prototype.scanOneResult=function(t,r,n,a){var i=this;return r===void 0&&(r=!0),n===void 0&&(n=!0),a===void 0&&(a=!0),new Promise(function(o,s){i.scan(t,function(l,d,u){if(l){o(l),u.stop();return}if(d){if(d instanceof D&&r||d instanceof De&&n||d instanceof H&&a)return;u.stop(),s(d)}})})},e.prototype.scan=function(t,r,n){var a=this;e.checkCallbackFnOrThrow(r);var i=e.createCaptureCanvas(t),o;try{o=i.getContext("2d",{willReadFrequently:!0})}catch{o=i.getContext("2d")}if(!o)throw new Error("Couldn't create canvas for visual element scan.");var s=function(){o=void 0,i=void 0},l=!1,d,u=function(){l=!0,clearTimeout(d),s(),n&&n()},h={stop:u},f=function(){if(!l)try{e.drawImageOnCanvas(o,t);var p=a.decodeFromCanvas(i);r(p,void 0,h),d=setTimeout(f,a.options.delayBetweenScanSuccess)}catch(y){r(void 0,y,h);var m=y instanceof De,g=y instanceof H,x=y instanceof D;if(m||g||x){d=setTimeout(f,a.options.delayBetweenScanAttempts);return}s(),n&&n(y)}};return f(),h},e.prototype._decodeOnLoadImage=function(t){return Te(this,void 0,void 0,function(){var r;return Ie(this,function(n){switch(n.label){case 0:return r=e.isImageLoaded(t),r?[3,2]:[4,e._waitImageLoad(t)];case 1:n.sent(),n.label=2;case 2:return[2,this.decode(t)]}})})},e.prototype.getUserMedia=function(t){return Te(this,void 0,void 0,function(){var r;return Ie(this,function(n){switch(n.label){case 0:return[4,navigator.mediaDevices.getUserMedia(t)];case 1:return r=n.sent(),e.streamTracker.push(r),[2,r]}})})},e.streamTracker=[],e})(),Py=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(e){Py(t,e);function t(r,n){return e.call(this,new Ja,r,n)||this}return t})(mn);var Fy=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(e){Fy(t,e);function t(r,n){return e.call(this,new Ur(r),r,n)||this}return t})(mn);var $y=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(e){$y(t,e);function t(r,n){return e.call(this,new ei,r,n)||this}return t})(mn);var Uy=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Hc=(function(e){Uy(t,e);function t(r,n){var a=this,i=new Dh;return i.setHints(r),a=e.call(this,i,r,n)||this,a.reader=i,a}return Object.defineProperty(t.prototype,"possibleFormats",{set:function(r){this.hints.set(we.POSSIBLE_FORMATS,r),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),t.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},t.prototype.setHints=function(r){this.hints=r,this.reader.setHints(this.hints)},t})(mn),zy=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(e){zy(t,e);function t(r,n){return e.call(this,new ri,r,n)||this}return t})(mn);var Hy=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(e){Hy(t,e);function t(r,n){return e.call(this,new ti,r,n)||this}return t})(mn);const Ao=1e3,Gy=[W.QR_CODE,W.CODE_128,W.CODE_39,W.CODE_93,W.ITF,W.EAN_13,W.EAN_8,W.UPC_A,W.UPC_E,W.UPC_EAN_EXTENSION];function Vy(e){if(!e)return!1;if(`${e.name||""}`.toLowerCase().includes("notfound"))return!0;const r=`${e.message||""}`.toLowerCase();return r.includes("no multiformat readers")||r.includes("not found")}function qy({open:e,onClose:t,onDetected:r}){const n=b.useRef(null),a=b.useRef(null),i=b.useRef(null),[o,s]=b.useState([]),[l,d]=b.useState(""),[u,h]=b.useState(!1),[f,p]=b.useState(""),[m,g]=b.useState(""),x=b.useRef(0),y=b.useRef(0),v=b.useCallback(()=>{a.current?.stop(),a.current=null,i.current?.reset?.(),i.current=null},[]);return b.useEffect(()=>{if(!e){v(),s([]),d(""),p(""),g(""),y.current=0,x.current=0,h(!1);return}let w=!1;async function S(){p("");try{if(!navigator?.mediaDevices?.getUserMedia){p("This browser does not support camera access. Please try a different browser."),g(""),h(!1);return}if(h(!0),g("Requesting camera accessâ€¦"),(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(A=>A.stop()),w)return;const k=await Hc.listVideoInputDevices();if(w)return;if(s(k),!k.length){p("No camera devices were detected. Please connect a camera and try again."),h(!1);return}d(A=>A||k[0]?.deviceId||""),g("")}catch(C){console.error("Barcode scanner: unable to enumerate video devices",C),w||(C?.name==="NotAllowedError"||C?.name==="SecurityError"?p("Camera access was denied. Please allow camera permissions in your browser settings and try again."):p("Unable to access the camera. Please check browser permissions and try again."),g(""),h(!1))}}return S(),()=>{w=!0,v()}},[e,v]),b.useEffect(()=>{if(!e||!l)return;const w=new Map;w.set(we.POSSIBLE_FORMATS,Gy),w.set(we.TRY_HARDER,!0);const S=new Hc(w,Ao);i.current=S;let C=!0;return y.current=0,x.current=0,h(!0),p(""),g("Preparing cameraâ€¦"),S.decodeFromVideoDevice(l,n.current,(k,A,N)=>{if(C){if(k){const B=k.getText?.()||"";B&&r?.(B),N?.stop(),t?.()}if(A){if(Vy(A)){const E=Date.now();if(E-x.current>=Ao){x.current=E;const I=y.current+1;y.current=I,g(`Still scanningâ€¦ attempt ${I}.`)}p("");return}console.error("Barcode scanner: decode error",A),p("Unable to read the barcode. Try holding the product steady and ensure it fills the frame.");const B=Date.now();if(B-x.current>=Ao){x.current=B;const E=y.current+1;y.current=E,g(`Retrying in a secondâ€¦ attempt ${E}.`)}}}}).then(k=>{if(!C){k?.stop();return}a.current=k,h(!1),g("Scanning for a barcodeâ€¦")}).catch(k=>{C&&(console.error("Barcode scanner: failed to start video stream",k),p("Unable to start the camera stream. Please verify permissions and refresh the page."),h(!1))}),()=>{C=!1,h(!1),v()}},[l,t,r,e,v]),e?c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/70 px-4 py-8",children:c.jsxs("div",{className:"relative w-full max-w-2xl rounded-3xl bg-white p-6 shadow-xl dark:bg-slate-900",children:[c.jsx("button",{type:"button",onClick:t,className:"absolute right-4 top-4 inline-flex h-9 w-9 items-center justify-center rounded-full bg-slate-100 text-slate-600 hover:bg-slate-200 focus:outline-none focus:ring-2 focus:ring-brand-500 dark:bg-slate-800 dark:text-slate-200 dark:hover:bg-slate-700","aria-label":"Close barcode scanner",children:c.jsx(Up,{className:"h-5 w-5"})}),c.jsxs("div",{className:"flex flex-col gap-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Scan a barcode"}),c.jsx("p",{className:"mt-1 text-sm text-slate-600 dark:text-slate-300",children:"Allow camera access so we can scan the product barcode and look it up for you."})]}),o.length>1&&c.jsxs("label",{className:"flex flex-col gap-1 text-sm text-slate-700 dark:text-slate-200",children:["Camera",c.jsx("select",{className:"rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",value:l,onChange:w=>d(w.target.value),children:o.map(w=>c.jsx("option",{value:w.deviceId,children:w.label||`Camera ${w.deviceId.slice(-4)}`},w.deviceId))})]}),c.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-black shadow-inner",children:[c.jsx("video",{ref:n,className:"h-full w-full object-cover",autoPlay:!0,muted:!0,playsInline:!0}),u&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900/60",children:c.jsx("span",{className:"rounded-full bg-white/90 px-4 py-2 text-sm font-medium text-slate-700 shadow",children:"Initializing cameraâ€¦"})})]}),c.jsxs("div",{className:"flex flex-col gap-2",children:[f&&c.jsx("p",{className:"rounded-xl border border-amber-300 bg-amber-50 px-3 py-2 text-sm text-amber-700 dark:border-amber-500/60 dark:bg-amber-500/10 dark:text-amber-200",children:f}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:m||"Once a barcode is detected it will automatically populate the chat."})]})]})]})}):null}const Gc={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var Vc={};const ko=typeof import.meta<"u"&&Gc?Gc:void 0,Eo=typeof globalThis<"u"&&Vc?Vc:void 0;function Wy(e){if(ko&&ko[e]!==void 0)return ko[e];if(Eo&&Eo[e]!==void 0)return Eo[e]}const Xy=(Wy("VITE_CHAT_BASE_URL")||"https://groq-endpoint.louispaulet13.workers.dev").replace(/\/$/,"");function No(e="",t=180){if(!e)return"";const r=String(e).trim();return r.length<=t?r:`${r.slice(0,t)}...`}async function la(e,t,{signal:r,model:n,baseUrl:a}={}){const i=e?.logLabel||"Chat",o=(a||e?.defaultBaseUrl||Xy||"").replace(/\/$/,"");if(!o)throw new Error("Missing chat service base URL. Set VITE_CHAT_BASE_URL or provide an override.");const s=`${o}/chat`,l=typeof performance<"u"&&typeof performance.now=="function"?performance.now():Date.now(),u=t?.[t.length-1]?.content||"";console.log(`[${i}] â†’ POST %s â€” model: %s â€” prompt: %s`,s,n||"default",No(u,160));const h=n?{model:n,messages:t}:{messages:t};let f;try{f=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h),signal:r})}catch(v){throw new Error(`Request to ${i} service failed: ${v?.message||v}`)}const p=typeof performance<"u"&&typeof performance.now=="function"?performance.now():Date.now(),m=Math.round(p-l);let g="",x;if(typeof f.text=="function"){g=await f.text();try{x=JSON.parse(g)}catch{x=void 0}}else if(typeof f.json=="function"){x=await f.json();try{g=JSON.stringify(x)}catch{g="[object Object]"}}if(!f.ok){const v=f.statusText||"Unknown error",w=No(g||v,200);throw new Error(`Remote chat service returned ${f.status}: ${w}`)}if(!x)try{x=JSON.parse(g)}catch{throw new Error("Remote chat service returned invalid JSON")}let y=x?.choices?.[0]?.message?.content;if(!y&&typeof x?.output_text=="string"&&(y=x.output_text),y=typeof y=="string"?y.trim():"",!y)throw new Error("Remote chat service returned an empty message");return console.log(`[${i}] â† %s %d in %dms â€” response: %s`,s,f.status,m,No(y,160)),{content:y,payload:x,status:f.status,duration:m,baseUrl:o}}const $h=3600*24*365,qc=3500;function gn(){return typeof document>"u"?null:document}function Ks(e=gn()){return!e||!e.cookie?[]:e.cookie.split(";").map(t=>t.trim()).filter(Boolean).map(t=>{const r=t.indexOf("=");return r===-1?{name:t,value:""}:{name:t.slice(0,r),value:t.slice(r+1)}})}function Ui(e){if(!e)return"";const t=Ks().find(r=>r.name===e);return t?t.value:""}function Zs(e,t,r=$h){const n=gn();if(!n||!e)return;const a=encodeURIComponent(t);n.cookie=`${e}=${a}; path=/; max-age=${r}`}function Wr(e){const t=gn();!t||!e||(t.cookie=`${e}=; path=/; max-age=0`)}function vt(e){const t=gn();if(!t||!e||!t.cookie)return;const r=`${e}__`;Ks(t).filter(n=>n.name===e||n.name.startsWith(r)).forEach(n=>{t.cookie=`${n.name}=; path=/; max-age=0`})}function zi(e){if(!e)return"";const t=`${e}__`,r=Ks().filter(a=>a.name===e||a.name.startsWith(t)).map(a=>({name:a.name,value:a.value||"",index:a.name===e?0:Number.parseInt(a.name.slice(t.length),10)})).filter(a=>Number.isInteger(a.index)&&a.index>=0).sort((a,i)=>a.index-i.index);if(r.length===0)return"";const n=r.map(a=>a.value).join("");if(!n)return"";try{return decodeURIComponent(n)}catch{return""}}function Hi(e,t,{maxAgeSeconds:r=$h,chunkSize:n=qc}={}){const a=gn();if(!a||!e)return;const i=typeof t=="string"?t:JSON.stringify(t);if(!i){vt(e);return}const o=encodeURIComponent(i),s=Math.max(1,Number.parseInt(n,10)||qc);vt(e);for(let l=0;l*s<o.length;l+=1){const d=l*s,u=o.slice(d,d+s),h=l===0?e:`${e}__${l}`;a.cookie=`${h}=${u}; path=/; max-age=${r}`}}const Js="allergy_notes",Yy="allergyfinder_conversations",ai="allin_profile_name",Gr="allin_chat_counts",Uh="allergyfinder",Ky="allin_conversations_",Zy=["allergyfinder","stlviewer","pokedex"],Qs=3600*24*365,Jy=3500,Qy=Number.POSITIVE_INFINITY;function Xn(){try{return decodeURIComponent(Ui(Js))}catch{return""}}function zh(e,t=Qs){Zs(Js,e,t)}function Wc(){const e=Xn();return e?e.split(/\r?\n/).map(t=>t.replace(/^[-*+\s]+/,"").trim()).filter(t=>t.length>0).length:0}function eb(e){const t=e?.role==="assistant"?"assistant":"user",r=typeof e?.content=="string"?e.content:"";if(!r)return null;const n=typeof e?.timestamp=="number"&&Number.isFinite(e.timestamp)?Math.round(e.timestamp):Date.now(),a={role:t,content:r,timestamp:n};if(e?.sources&&Array.isArray(e.sources)&&e.sources.length>0)try{a.sources=JSON.parse(JSON.stringify(e.sources))}catch{a.sources=e.sources.filter(i=>typeof i=="string")}return e?.error&&(a.error=!0),a}function tb(e){if(!e)return null;const r=(Array.isArray(e.messages)?e.messages:[]).map(eb).filter(Boolean);if(r.length===0)return null;const n=typeof e.title=="string"&&e.title.trim()?e.title.trim().slice(0,60):"Saved chat",a={id:typeof e.id=="string"?e.id:void 0,title:n,messages:r};return e?.createdAt&&(a.createdAt=e.createdAt),a}function Hh(e){return(Array.isArray(e)?e:[]).filter(Boolean).map(tb).filter(Boolean)}function el(e){return!e||e===Uh?Yy:`${Ky}${e}`}function Gh(e){const t=el(e),r=zi(t)||(()=>{const n=Ui(t);return n?decodeURIComponent(n):""})();if(!r)return[];try{const n=JSON.parse(r);return Hh(n)}catch{return[]}}function To(e,t){const r=el(e),n=Hh(t);if(n.length===0){vt(r),rl(e);return}Hi(r,n,{maxAgeSeconds:Qs}),Vh(e,n.length)}function ls(e){const t=el(e);vt(t),rl(e)}function rb(){ls(Uh)}function Gi(){const e=Ui(Gr);if(!e)return{};try{const t=decodeURIComponent(e),r=JSON.parse(t);if(r&&typeof r=="object")return r}catch{}return{}}function tl(e){if(!e||Object.keys(e).length===0){Wr(Gr);return}try{const t=JSON.stringify(e);if(t.length>Jy){Wr(Gr);return}Zs(Gr,t)}catch{Wr(Gr)}}function Xc(){const e=Gi(),t={allergyfinder:Number.parseInt(e.allergyfinder,10)||0,stlviewer:Number.parseInt(e.stlviewer,10)||0,pokedex:Number.parseInt(e.pokedex,10)||0};return Zy.forEach(r=>{if(t[r]===0){const n=Gh(r);n.length>0&&(t[r]=n.length)}}),t}function nb(e){if(!e)return;const t=Gi();t[e]=(Number.parseInt(t[e],10)||0)+1,tl(t)}function Vh(e,t){if(!e)return;const r=Math.max(0,Number(t)||0),n=Gi(),a=Number.parseInt(n[e],10)||0;r===0&&a===0||r<=a||(n[e]=r,tl(n))}function rl(e){const t=Gi();!e||!(e in t)||(delete t[e],tl(t))}function ab(){Wr(Gr)}function ib(){const e=Ui(ai);if(!e)return"";try{return decodeURIComponent(e)}catch{return""}}function Yc(e,t=Qs){if(!e){Wr(ai);return}Zs(ai,e,t)}function ob(){Wr(ai)}function sb(){const e=gn();!e||!e.cookie||e.cookie.split(";").forEach(t=>{const r=t.indexOf("="),n=r>-1?t.slice(0,r).trim():t.trim();n&&(e.cookie=`${n}=; path=/; max-age=0`)})}const lb=/ã€[^ã€‘]+ã€‘/g;function cb(e){return e&&e.replace(lb,"")}function db(e,t){let r=t||"";return r&&(e?.id==="allergyfinder"&&(r=cb(r)),r.trim())}const Kc=/openfoodfacts\.org\/(?:[a-z]{2}\/)?produit\/(\d{6,})/gi,Zc=/\b(\d{8,18})\b/g;function ub(e){if(!e)return null;const t=String(e);Kc.lastIndex=0;let r;for(;r=Kc.exec(t);){const o=r[1];if(o)return o}const n=t.replace(/[^0-9]/g,""),a=t.replace(/[0-9\s-]/g,"");if(n.length>=8&&n.length<=18&&!a)return n;Zc.lastIndex=0;const i=Zc.exec(t);return i&&i[1]?i[1]:null}async function hb(e,t,{signal:r}={}){const n=typeof e=="string"?e.trim().replace(/\/$/,""):"";if(!n||!t)return null;const a=`${n}/flavor-finder/${encodeURIComponent(t)}`;console.log(`Calling flavor finder API: ${a}`);let i;try{i=await fetch(a,{method:"GET",headers:{Accept:"application/json"},signal:r})}catch(l){const d=new Error(`Flavor Finder request failed: ${l?.message||l}`);throw d.cause=l,d}const o=await i.text();let s;try{s=JSON.parse(o)}catch{s=null}if(console.log("Flavor finder response:",s),!i.ok){const l=new Error(`Flavor Finder returned ${i.status}`);throw l.status=i.status,l.body=o,l}return s||null}function In(e){return e==null?"":Array.isArray(e)?e.map(t=>t==null?"":typeof t=="string"?t.trim():typeof t=="number"||typeof t=="boolean"?String(t):"").filter(Boolean).join(", "):typeof e=="number"||typeof e=="boolean"?String(e):typeof e=="string"?e.trim():""}function bt(e,t,r){const n=In(r);n&&e.push(`${t}: ${n}`)}function fb(e,t){const r=Array.isArray(t?.products)?t.products:[];if(!e||r.length===0)return null;const n=[`OpenFoodFacts product context for barcode ${e}:`],a=In(t?.resolvedUrl);a&&n.push(`Resolved URL: ${a}`);const i=In(t?.resolvedSlug);i&&n.push(`Resolved slug: ${i}`);const o=In(t?.sources);o&&n.push(`Sources: ${o}`);const s=3;return r.slice(0,s).forEach((l,d)=>{const u=In(l?.name||l?.genericName||l?.generic_name||l?.product_name)||`Product ${d+1}`,h=`Product ${d+1}: ${u}`;n.push(h);const f=[];bt(f,"Brands",l?.brands),bt(f,"Quantity",l?.quantity),bt(f,"Serving size",l?.servingSize||l?.serving_size),bt(f,"Nutri-Score",l?.nutriscore||l?.nutrition_grade),bt(f,"NOVA group",l?.nova),bt(f,"Labels",l?.labels),bt(f,"Categories",l?.categories),bt(f,"Ingredients",l?.ingredients),bt(f,"Allergens",l?.allergens),bt(f,"Traces",l?.traces),bt(f,"Additives",l?.additives),bt(f,"Ingredients analysis",l?.ingredientsAnalysis||l?.ingredients_analysis),f.length>0&&f.forEach(p=>{n.push(`  - ${p}`)})}),r.length>s&&n.push(`(+ ${r.length-s} additional products omitted)`),n.join(`
`)}async function pb(e,t,{signal:r}={}){const n=ub(t);if(!n)return null;const a=await hb(e,n,{signal:r});if(!a)return null;const i=fb(n,a);return i?{code:n,summary:i,payload:a}:null}const mb=new Set(["allergyfinder","stlviewer","pokedex"]);function gb(e){const t=(e||"").trim();if(!t)throw new Error("Endpoint is required.");return t.replace(/\/$/,"")}function xb(e,t){const r=e?[{role:"system",content:e}]:[],n=(t||[]).filter(a=>a.role==="user"||a.role==="assistant").map(a=>({role:a.role,content:a.content}));return[...r,...n]}function qh(){return`conv-${Math.random().toString(16).slice(2,6)}-${Date.now()}`}function nl(e,t){return{role:"assistant",name:t,timestamp:Date.now(),content:e?.greeting||`Hello from ${t}`}}function _a(e,t){return{id:qh(),title:"New chat",messages:[nl(e,t)]}}function vb(e,t,r){return!Array.isArray(e)||e.length===0?[]:e.map((n,a)=>{const i=typeof n?.id=="string"?n.id:qh(),o=typeof n?.title=="string"&&n.title.trim()?n.title.trim():`Saved chat ${a+1}`,s=Array.isArray(n?.messages)?n.messages:[],l=s.length>0?s.map(d=>{const u=d?.role==="assistant"?"assistant":"user",h=typeof d?.content=="string"?d.content:"";return{role:u,content:h,name:u==="assistant"?r:"You",timestamp:typeof d?.timestamp=="number"&&Number.isFinite(d.timestamp)?d.timestamp:Date.now(),streaming:!1,error:!!d?.error,sources:Array.isArray(d?.sources)?d.sources:void 0}}):[nl(t,r)];return{id:i,title:o,messages:l}}).filter(n=>Array.isArray(n.messages)&&n.messages.length>0)}function yb(e){const t=e?.name||"Groq Assistant",r=e?.defaultModel||e?.modelOptions?.[0]||"openai/gpt-oss-20b",n=b.useMemo(()=>{const M=e?.defaultBaseUrl||"";return M?M.replace(/\/$/,""):""},[e]),[a,i]=b.useState(r),[o,s]=b.useState(n),[l,d]=b.useState(()=>[_a(e,t)]),[u,h]=b.useState(()=>l[0]?.id),[f,p]=b.useState(""),[m,g]=b.useState(!1),x=b.useRef(null),y=b.useRef(!1),v=!!e?.id&&mb.has(e.id),w=!!e?.enableBarcodeScanner;b.useEffect(()=>{let M=[],L=!1;if(v){const R=Gh(e.id),U=vb(R,e,t);U.length>0&&(M=U,L=!0,Vh(e?.id,U.length))}if(M.length===0&&(M=[_a(e,t)],v&&To(e.id,M)),d(M),h(M[0]?.id),p(""),i(e?.defaultModel||e?.modelOptions?.[0]||"openai/gpt-oss-20b"),s((e?.defaultBaseUrl||"").replace(/\/$/,"")),x.current){try{x.current.abort()}catch{}x.current=null}g(!1),y.current=L},[e,t,v]);const C=b.useMemo(()=>l.find(M=>M.id===u)||l[0],[l,u])?.messages||[],k=e?.promptPlaceholder||"Ask anything...";b.useEffect(()=>{if(v){if(y.current){y.current=!1;return}To(e.id,l)}},[l,e?.id,v]);function A(M,L){d(R=>R.map(U=>U.id===M?{...U,title:L?.trim()?L.trim():U.title}:U))}function N(){if(m)return;const M=_a(e,t);d(L=>{const R=[M,...L];return v?R.slice(0,Qy):R}),h(M.id),p("")}function B(){if(m)return;const M=nl(e,t);d(L=>L.map(R=>R.id===u?{...R,title:"New chat",messages:[M]}:R))}function E(){if(m)return;const M=_a(e,t);d([M]),h(M.id),p(""),v&&(To(e.id,[M]),y.current=!0)}function I(){if(m){try{x.current?.abort()}catch{}x.current=null,g(!1),d(M=>M.map(L=>{if(L.id!==u)return L;const R=[...L.messages],U=R.length-1;return U>=0&&R[U].role==="assistant"&&(R[U]={...R[U],content:"Request cancelled.",streaming:!1,error:!0}),{...L,messages:R}}))}}async function F(M){const L=(typeof M=="string"?M:f).trim();if(!L||m)return;const U={role:"user",name:"You",timestamp:Date.now(),content:L},$=!!e?.id&&!C.some(q=>q.role==="user");let j;try{const q=e?.allowBaseUrlOverride?o:e?.defaultBaseUrl||o;j=gb(q)}catch(q){d(Y=>Y.map(te=>{if(te.id!==u)return te;const ge=te.title==="New chat"&&L.slice(0,30)||te.title;return{...te,title:ge,messages:[...te.messages,U,{role:"assistant",name:t,timestamp:Date.now(),content:`Warning: ${q.message}`,error:!0}]}})),p("");return}d(q=>q.map(Y=>{if(Y.id!==u)return Y;const te=Y.title==="New chat"&&L.slice(0,30)||Y.title;return{...Y,title:te,messages:[...Y.messages,U,{role:"assistant",name:t,timestamp:Date.now(),content:"",streaming:!0}]}})),p(""),g(!0);const z=new AbortController;x.current=z;try{$&&nb(e.id);const q=[...C,U];let Y=e?.systemPrompt;if(e?.id==="allergyfinder"){const P=Xn();P&&(Y=[Y,"User allergy notes saved via the Allergy Cookie Editor (markdown format):",P].filter(Boolean).join(`

`))}let te=Y;if(e?.id==="allergyfinder")try{const P=await pb(j,L,{signal:z.signal});P?.summary?d(ie=>ie.map(oe=>{if(oe.id!==u)return oe;const ne=[...oe.messages],ye=ne.length-1;return ye>=0&&ne[ye].role==="assistant"&&(ne[ye]={...ne[ye],content:P.summary,streaming:!1,error:!1}),{...oe,messages:ne}})):te=[te,"I couldn't find any product with that barcode."].filter(Boolean).join(`

`)}catch(P){P?.name!=="AbortError"&&(console.error(`[${e?.logLabel||"Chat"}] flavor finder lookup failed`,P),d(ie=>ie.map(oe=>{if(oe.id!==u)return oe;const ne=[...oe.messages],ye=ne.length-1;return ye>=0&&ne[ye].role==="assistant"&&(ne[ye]={...ne[ye],content:"I couldn't find any product with that barcode.",streaming:!1,error:!0}),{...oe,messages:ne}})))}const ge=xb(te,q),J=await la(e,ge,{signal:z.signal,model:a,baseUrl:j});s(J.baseUrl);const ce=db(e,J.content);d(P=>P.map(ie=>{if(ie.id!==u)return ie;const oe=[...ie.messages],ne=oe.length-1;return ne>=0&&oe[ne].role==="assistant"&&(oe[ne]={...oe[ne],content:ce,streaming:!1,error:!1}),{...ie,messages:oe}}))}catch(q){const Y=q?.name==="AbortError",te=Y?"Request cancelled.":`Unable to reach the service. ${q?.message||"Please try again."}`;Y||console.error(`[${e?.logLabel||"Chat"}] request failed`,q),d(ge=>ge.map(J=>{if(J.id!==u)return J;const ce=[...J.messages],P=ce.length-1;return P>=0&&ce[P].role==="assistant"&&(ce[P]={...ce[P],content:te,streaming:!1,error:!0}),{...J,messages:ce}}))}finally{x.current=null,g(!1)}}const V=o||e?.defaultBaseUrl||"";return{activeId:u,assistantName:t,baseUrl:o,conversations:l,enableBarcodeScanner:w,endpointDisplay:V,handleClear:B,handleFlushHistory:E,handleNewConversation:N,handleRename:A,handleSend:F,handleStop:I,loading:m,messages:C,model:a,persistConversations:v,placeholder:k,prompt:f,setActiveId:h,setModel:i,setPrompt:p}}function Jc({experience:e}){const{activeId:t,assistantName:r,conversations:n,enableBarcodeScanner:a,endpointDisplay:i,handleClear:o,handleFlushHistory:s,handleNewConversation:l,handleRename:d,handleSend:u,handleStop:h,loading:f,messages:p,model:m,persistConversations:g,placeholder:x,prompt:y,setActiveId:v,setModel:w,setPrompt:S}=yb(e),[C,k]=b.useState(!1);function A(N){if(!a)return;const B=`${N}`.trim();B&&(k(!1),S(B),u(B))}return c.jsxs("div",{className:"grid gap-6 md:grid-cols-12",children:[c.jsx("aside",{className:"md:col-span-4 lg:col-span-3",children:c.jsx(Um,{conversations:n,activeId:t,onSelect:v,onNew:l,onRename:d,onFlushHistory:g?s:void 0,disableNew:f,disableFlush:f})}),c.jsxs("section",{className:"md:col-span-8 lg:col-span-9 flex flex-col gap-4",children:[c.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white/80 p-4 shadow-sm dark:border-slate-800 dark:bg-slate-900/60",children:[c.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-end lg:justify-between",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Session settings"}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Select a model and endpoint for this workspace."})]}),c.jsx("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end",children:c.jsx(Zm,{value:m,onChange:w,options:e?.modelOptions||[]})})]}),c.jsxs("div",{className:"mt-3 grid gap-2 text-xs text-slate-500 dark:text-slate-400 sm:grid-cols-2",children:[c.jsxs("div",{children:[c.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-300",children:"Assistant"}),": ",r]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-300",children:"Endpoint"}),": ",i||"Not configured"]})]})]}),c.jsx(Ym,{experience:e,messages:p}),c.jsx(Km,{value:y,onChange:S,onSend:u,onStop:h,onClear:o,loading:f,placeholder:x,onOpenScanner:a?()=>k(!0):void 0})]}),a&&c.jsx(qy,{open:C,onClose:()=>k(!1),onDetected:A})]})}const bb=`- Peanuts
- Shellfish
- Dairy
- Eggs
- Sesame
- Tree nuts`;function wb(){const[e,t]=b.useState(""),[r,n]=b.useState(null),a=b.useMemo(()=>bb,[]);b.useEffect(()=>{const s=Xn();t(s)},[]);function i(s){s.preventDefault(),zh(e||""),n({type:"success",message:"Allergy notes saved to cookie. âœ…"})}function o(){sb(),t(""),n({type:"warning",message:"All cookies cleared for this site. âš ï¸"})}return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"rounded-2xl border border-emerald-100 bg-emerald-50/60 p-6 text-emerald-900 dark:border-emerald-500/40 dark:bg-emerald-900/30 dark:text-emerald-100",children:[c.jsx("h2",{className:"text-xl font-semibold",children:"Allergy Cookie Editor ðŸª"}),c.jsx("p",{className:"mt-2 text-sm text-emerald-900/80 dark:text-emerald-100/80",children:"ðŸ“ Save a markdown list of allergens you or your household need to watch out for. The notes are stored in a browser cookie so you can quickly reference or reuse them when chatting with the assistant."})]}),c.jsxs("form",{className:"space-y-4",onSubmit:i,children:[c.jsxs("label",{className:"block space-y-2",htmlFor:"allergy-cookie-textarea",children:[c.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Allergy list ðŸ“‹"}),c.jsx("textarea",{id:"allergy-cookie-textarea",name:"allergy-notes",value:e,onChange:s=>t(s.target.value),placeholder:a,rows:10,className:"w-full rounded-2xl border border-slate-300 bg-white/80 p-4 font-mono text-sm text-slate-800 placeholder:text-slate-400 focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-400 dark:border-slate-700 dark:bg-slate-900/60 dark:text-slate-100 dark:placeholder:text-slate-500 dark:focus:border-emerald-300 dark:focus:ring-emerald-300","aria-describedby":"allergy-cookie-helper"})]}),c.jsx("p",{id:"allergy-cookie-helper",className:"text-xs text-slate-500 dark:text-slate-400",children:`Tip: This information is stored in the "${Js}" browser cookie. Use markdown lists, headings, or bold text to organise allergens by family members. ðŸ’¡`}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[c.jsx("button",{type:"submit",className:"inline-flex items-center gap-2 rounded-xl bg-emerald-600 px-4 py-2 text-sm font-medium text-white shadow-sm transition hover:bg-emerald-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-emerald-500 disabled:opacity-50",children:"Save Cookie ðŸ’¾"}),c.jsx("button",{type:"button",onClick:o,className:"inline-flex items-center gap-2 rounded-xl border border-slate-300 px-4 py-2 text-sm font-medium text-slate-700 transition hover:border-slate-400 hover:bg-slate-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-slate-400 dark:border-slate-600 dark:text-slate-200 dark:hover:border-slate-500 dark:hover:bg-slate-800 dark:focus-visible:outline-slate-500",children:"Delete All Cookies ðŸ§¹"}),r?c.jsx("span",{role:"status",className:`text-sm ${r.type==="success"?"text-emerald-600 dark:text-emerald-300":"text-amber-600 dark:text-amber-300"}`,children:r.message}):null]})]})]})}const Qc="inline-flex items-center rounded-xl px-4 py-2 text-sm font-medium transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2";function ed(){return c.jsxs("nav",{"aria-label":"AllergyFinder sections",className:"flex flex-wrap items-center gap-2",children:[c.jsx(st,{to:"/allergyfinder",end:!0,className:({isActive:e})=>`${Qc} ${e?"bg-emerald-600 text-white focus-visible:outline-emerald-400":"border border-transparent bg-white/80 text-emerald-700 hover:border-emerald-200 hover:bg-emerald-50 focus-visible:outline-emerald-300 dark:bg-slate-900/60 dark:text-emerald-200 dark:hover:bg-emerald-900/40"}`,children:"Chat Assistant"}),c.jsx(st,{to:"/allergyfinder/cookies",className:({isActive:e})=>`${Qc} ${e?"bg-emerald-600 text-white focus-visible:outline-emerald-400":"border border-transparent bg-white/80 text-emerald-700 hover:border-emerald-200 hover:bg-emerald-50 focus-visible:outline-emerald-300 dark:bg-slate-900/60 dark:text-emerald-200 dark:hover:bg-emerald-900/40"}`,children:"Allergy Cookie Editor"})]})}const al="objectmaker_zoo_v1";function il(){try{return globalThis.localStorage||null}catch{return null}}function ol(){const e=il();if(!e)return[];try{const t=e.getItem(al);if(!t)return[];const r=JSON.parse(t);return Array.isArray(r)?r:[]}catch{return[]}}function td(){const e=ol();return Array.isArray(e)?e.length:0}function Wh(e){const t=il();if(t)try{t.setItem(al,JSON.stringify(e||[]))}catch{}}function _b(e){const t=ol();t.unshift(e),Wh(t)}function Xh(){const e=il();if(e)try{e.removeItem(al)}catch{}}function Cb(e){const t=new Map;for(const r of e||[]){const n=(r?.type||"object").toString();t.has(n)||t.set(n,[]),t.get(n).push(r)}return t}const sl="newsanalyzer_classification_count_v1";function ll(){try{return globalThis.localStorage||null}catch{return null}}function Yh(){const e=ll();if(!e)return 0;try{const t=e.getItem(sl);if(!t)return 0;const r=Number.parseInt(t,10);return Number.isFinite(r)&&r>0?r:0}catch{return 0}}function rd(){return Yh()}function Sb(){const e=ll();if(!e)return;const t=Yh()+1;try{e.setItem(sl,String(t))}catch{}}function Ab(){const e=ll();if(e)try{e.removeItem(sl)}catch{}}const ii="allin_pizza_gallery",kb=3600*24*30,cl=40;function Kh(){return typeof document>"u"?null:document}function Eb(e){const t=Kh();if(!t||!t.cookie)return"";const n=t.cookie.split("; ").find(a=>a.startsWith(`${e}=`));return n?n.split("=").slice(1).join("="):""}function cs(e,t,r=kb){const n=Kh();if(!n)return;const a=encodeURIComponent(t),i=["path=/",`max-age=${r}`];n.cookie=`${e}=${a}; ${i.join("; ")}`}function Zh(e){return!e||typeof e.url!="string"||!e.url.trim()?null:{prompt:typeof e.prompt=="string"?e.prompt:"",url:e.url,summary:typeof e.summary=="string"?e.summary:"",timestamp:typeof e.timestamp=="number"?e.timestamp:Date.now()}}function Jh(){const e=Eb(ii);if(!e)return[];try{const t=JSON.parse(decodeURIComponent(e));return Array.isArray(t)?t.map(r=>Zh(r)).filter(Boolean).slice(0,cl):[]}catch{return[]}}function Nb(e){if(!Array.isArray(e)||e.length===0){cs(ii,"[]");return}const t=e.map(r=>Zh(r)).filter(Boolean).slice(0,cl);cs(ii,JSON.stringify(t))}function Qh(){cs(ii,"[]",0)}function Tb(){return Jh().length}const Ib={allergyfinder:"AllergyFinder",stlviewer:"STL Studio",pokedex:"PokÃ©dex"},nd=["Curious","Vigilant","Bright","Calm","Resilient","Swift","Gentle","Lively","Mindful","Radiant"],ad=["Aviator","Guardian","Navigator","Trailblazer","Harvest","Aurora","Sentinel","Voyager","Caretaker","Beacon"],Ob=new Intl.NumberFormat("en-US");function id(){const e=nd[Math.floor(Math.random()*nd.length)],t=ad[Math.floor(Math.random()*ad.length)];return`${e} ${t}`}function od(e,t=12){return e?e.split(/\r?\n/).map(r=>r.replace(/^[-*+\s]+/,"").trim()).filter(Boolean).slice(0,t):[]}function br(e){return Ob.format(Math.max(0,Number(e)||0))}function Bb(){const[e,t]=b.useState(""),[r,n]=b.useState(()=>Xc()),[a,i]=b.useState(()=>Wc()),[o,s]=b.useState(()=>od(Xn())),[l,d]=b.useState(()=>td()),[u,h]=b.useState(()=>rd()),[f,p]=b.useState(0);b.useEffect(()=>{let E=ib();E||(E=id(),Yc(E)),t(E),m()},[]);function m(){n(Xc()),i(Wc()),s(od(Xn())),d(td()),h(rd()),p(Tb())}function g(){const E=id();Yc(E),t(E)}function x(){ob(),t("")}function y(E){ls(E),rl(E),m()}function v(){ab(),Object.keys(Ib).forEach(E=>{ls(E)}),m()}function w(){zh(""),rb(),m()}function S(){Xh(),m()}function C(){Ab(),m()}function k(){Qh(),m()}const A=Object.values(r??{}).reduce((E,I)=>E+(Number(I)||0),0),N=[{id:"total-chats",label:"Total Chats Logged",value:br(A),hint:"Combined across all experiences."},{id:"allergy-count",label:"Saved Allergies",value:br(a),hint:"Markdown items kept locally."},{id:"object-count",label:"Objects Created",value:br(l),hint:"Stored in your Object Zoo."},{id:"pizza-count",label:"Pizza Gallery Items",value:br(f),hint:"Saved designs on this device."}],B=[{id:"allergyfinder",label:"AllergyFinder",icon:"ðŸ©º",value:r.allergyfinder??0,description:"Chats started with the allergy assistant.",cta:{to:"/allergyfinder",label:"Open AllergyFinder"},onReset:()=>y("allergyfinder"),resetLabel:"Clear AllergyFinder history",footnote:"Removes the cookie that stores saved conversations and counters for this experience."},{id:"stlviewer",label:"STL Studio",icon:"ðŸ› ï¸",value:r.stlviewer??0,description:"Design and printing chats initiated in STL Studio.",cta:{to:"/stlviewer",label:"Open STL Studio"},onReset:()=>y("stlviewer"),resetLabel:"Clear STL Studio history",footnote:"Deletes the STL Studio chat cookie, including saved sessions and counters."},{id:"pokedex",label:"PokÃ©dex",icon:"ðŸ”",value:r.pokedex??0,description:"Quick PokÃ©dex lookups launched from this browser.",cta:{to:"/pokedex",label:"Open PokÃ©dex"},onReset:()=>y("pokedex"),resetLabel:"Clear PokÃ©dex history",footnote:"Erases the PokÃ©dex chat cookie and any stored conversations."},{id:"objectmaker",label:"Object Maker",icon:"ðŸ§±",value:l,description:"Objects saved to your local Object Zoo.",cta:{to:"/objectmaker/zoo",label:"Visit Object Zoo"},onReset:S,resetLabel:"Delete saved objects",footnote:"Removes every object stored in the Object Maker Zoo on this device."},{id:"pizzamaker",label:"Pizza Maker",icon:"ðŸ•",value:f,description:"Pizzas saved to your cookie-backed gallery.",cta:{to:"/pizza-maker",label:"Open Pizza Maker"},onReset:k,resetLabel:"Clear pizza gallery",footnote:"Deletes every saved pizza render stored in browser cookies."},{id:"newsanalyzer",label:"News Analyzer",icon:"ðŸ“°",value:u,description:"Articles classified locally with the news workflow.",cta:{to:"/newsanalyzer",label:"Open News Analyzer"},onReset:C,resetLabel:"Reset article counter",footnote:"Clears the local counter that tracks processed news articles."}];return c.jsxs("div",{className:"space-y-12",children:[c.jsx("section",{className:"rounded-4xl border border-slate-200 bg-white p-8 shadow-md dark:border-slate-800 dark:bg-slate-950",children:c.jsxs("div",{className:"flex flex-col gap-8 lg:flex-row lg:items-start",children:[c.jsxs("div",{className:"flex-1 space-y-6",children:[c.jsxs("div",{className:"space-y-3",children:[c.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-600 dark:bg-slate-800 dark:text-slate-200",children:"Profile"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("h2",{className:"text-3xl font-semibold text-slate-900 sm:text-4xl dark:text-white",children:"User Preferences & Activity"}),c.jsx("p",{className:"max-w-2xl text-sm text-slate-600 dark:text-slate-300",children:"Generate a new alias, manage your local data, and see how often you revisit each tool. No information leaves this tab."})]})]}),c.jsxs("div",{className:"flex flex-col gap-3 rounded-2xl border border-slate-200 bg-slate-50 p-4 shadow-sm dark:border-slate-700 dark:bg-slate-900",children:[c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[c.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Current alias"}),c.jsxs("div",{className:"inline-flex items-center gap-2",children:[c.jsx("button",{type:"button",onClick:g,className:"inline-flex items-center rounded-full bg-slate-900 px-3 py-1.5 text-xs font-medium text-white transition hover:bg-slate-700 dark:bg-slate-700 dark:hover:bg-slate-600",children:"Generate New Alias ðŸŽ²"}),c.jsx("button",{type:"button",onClick:x,className:"inline-flex items-center rounded-full border border-red-200 bg-white px-3 py-1.5 text-xs font-semibold text-red-600 transition hover:border-red-300 hover:bg-red-50 dark:border-red-600/60 dark:bg-slate-900 dark:text-red-200 dark:hover:bg-red-900/20",children:"Clear Alias ðŸ—‘ï¸"})]})]}),c.jsx("div",{className:"rounded-xl bg-white px-4 py-3 text-lg font-semibold text-slate-900 shadow-inner dark:bg-slate-800 dark:text-slate-100",children:e||"No profile name stored"}),c.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Removing the alias resets the cookie immediately. A fresh name is generated next time you open this page."})]})]}),c.jsxs("div",{className:"flex-1 rounded-3xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900/60",children:[c.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-300",children:"Quick metrics"}),c.jsx("div",{className:"mt-4 grid gap-4 sm:grid-cols-2",children:N.map(E=>c.jsxs("div",{className:"space-y-1 rounded-2xl border border-slate-200 bg-slate-50 p-4 text-slate-700 shadow-sm dark:border-slate-700 dark:bg-slate-800 dark:text-slate-200",children:[c.jsx("div",{className:"text-2xl font-semibold text-slate-900 dark:text-white",children:E.value}),c.jsx("div",{className:"text-sm font-medium",children:E.label}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:E.hint})]},E.id))})]})]})}),c.jsxs("section",{className:"rounded-4xl border border-slate-200 bg-white p-8 shadow-sm dark:border-slate-800 dark:bg-slate-950",children:[c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("h3",{className:"text-2xl font-semibold text-slate-900 dark:text-white",children:"Saved Allergies ðŸ—‚ï¸"}),c.jsx("p",{className:"max-w-xl text-sm text-slate-600 dark:text-slate-300",children:"Your allergy notes stay local. Use the editor to update or remove items at any time."})]}),c.jsx(Oe,{to:"/allergyfinder/cookies",className:"inline-flex items-center rounded-full border border-slate-300 px-4 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100 dark:border-slate-600 dark:text-slate-200 dark:hover:bg-slate-800/80",children:"Edit Allergy List âœï¸"})]}),c.jsxs("div",{className:"mt-6 grid gap-6 lg:grid-cols-[minmax(0,280px)_1fr]",children:[c.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-slate-50 p-6 text-center text-slate-900 shadow-inner dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100",children:[c.jsx("div",{className:"text-sm uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Allergens tracked"}),c.jsx("div",{className:"mt-2 text-5xl font-bold",children:br(a)}),c.jsx("div",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:"Across saved markdown notes"})]}),c.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900/60",children:[o.length>0?c.jsxs("ul",{className:"grid grid-cols-1 gap-2 text-sm text-slate-700 dark:text-slate-200 sm:grid-cols-2",children:[o.map(E=>c.jsx("li",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-3 py-2 shadow-sm dark:border-slate-700 dark:bg-slate-800/70",children:E},E)),a>o.length?c.jsxs("li",{className:"rounded-2xl border border-dashed border-slate-300 px-3 py-2 text-slate-500 dark:border-slate-600 dark:text-slate-400",children:["â€¦and ",br(a-o.length)," more saved locally."]}):null]}):c.jsx("div",{className:"flex h-full items-center justify-center rounded-2xl border border-dashed border-slate-300 bg-slate-50 p-6 text-sm italic text-slate-500 dark:border-slate-700 dark:bg-slate-800/50 dark:text-slate-400",children:"No allergy notes saved yet."}),c.jsxs("div",{className:"mt-6 flex flex-wrap items-center gap-3",children:[c.jsx("button",{type:"button",onClick:w,className:"inline-flex items-center rounded-full bg-red-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-red-500",children:"Delete Allergy Notes & Saved Chats ðŸ§¹"}),c.jsx("p",{className:"rounded-2xl border border-red-200 bg-red-50 px-4 py-2 text-xs text-red-600 shadow-inner dark:border-red-700 dark:bg-red-900/30 dark:text-red-200",children:"Removing allergy data clears both the notes cookie and any saved AllergyFinder conversations from this browser."})]})]})]})]}),c.jsxs("section",{className:"space-y-6 rounded-4xl border border-slate-200 bg-white p-8 shadow-sm dark:border-slate-800 dark:bg-slate-950",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("h3",{className:"text-2xl font-semibold text-slate-900 dark:text-white",children:"Experience Snapshot ðŸ“Š"}),c.jsx("p",{className:"max-w-2xl text-sm text-slate-600 dark:text-slate-300",children:"Each card reflects what's stored locally for a specific section. Manage your history, saved objects, and news analytics without leaving the profile page."})]}),c.jsx("div",{className:"grid gap-5 md:grid-cols-2 xl:grid-cols-3",children:B.map(E=>c.jsx("div",{className:"group rounded-3xl border border-slate-200 bg-slate-50 p-6 shadow-sm transition hover:-translate-y-1 hover:shadow-md dark:border-slate-700 dark:bg-slate-900/70",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-start justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-400",children:E.label}),c.jsx("p",{className:"mt-1 text-sm text-slate-600 dark:text-slate-400",children:E.description})]}),c.jsx("span",{className:"text-2xl","aria-hidden":"true",children:E.icon})]}),c.jsxs("div",{className:"flex items-baseline gap-2",children:[c.jsx("div",{className:"text-4xl font-bold text-slate-900 dark:text-slate-100",children:br(E.value)}),c.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Total"})]}),c.jsxs("div",{className:"flex flex-wrap gap-3",children:[c.jsx(Oe,{to:E.cta.to,className:"inline-flex items-center rounded-full border border-slate-300 px-4 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100 dark:border-slate-600 dark:text-slate-200 dark:hover:bg-slate-800/60",children:E.cta.label}),c.jsx("button",{type:"button",onClick:E.onReset,className:"inline-flex items-center rounded-full bg-red-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-red-500",children:E.resetLabel})]}),c.jsx("p",{className:"rounded-2xl border border-slate-200 bg-white px-4 py-2 text-xs text-slate-600 shadow-inner dark:border-slate-700 dark:bg-slate-900/60 dark:text-slate-300",children:E.footnote})]})},E.id))}),c.jsx("div",{className:"rounded-3xl border border-slate-200 bg-slate-50 p-6 shadow-sm dark:border-slate-700 dark:bg-slate-900/70",children:c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Reset chat-based experiences"}),c.jsx("p",{className:"mt-1 text-sm text-slate-600 dark:text-slate-400",children:"This action clears every saved chat cookie for AllergyFinder, STL Studio, and the PokÃ©dex in one click."})]}),c.jsx("button",{type:"button",onClick:v,className:"inline-flex items-center rounded-full bg-red-700 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-red-600",children:"Delete All Saved Chat History ðŸ§½"})]})})]})]})}function jb(){return c.jsxs("div",{className:"space-y-10",children:[c.jsx("header",{className:"rounded-4xl border border-slate-200 bg-white py-10 pl-10 pr-8 shadow-sm dark:border-slate-800 dark:bg-slate-950",children:c.jsxs("div",{className:"flex flex-col gap-6 lg:flex-row lg:items-center lg:justify-between",children:[c.jsxs("div",{className:"space-y-3",children:[c.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-900/90 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-100 dark:bg-slate-800 dark:text-slate-200",children:"Dashboard"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-900 sm:text-4xl dark:text-white",children:"Profile Control Center"}),c.jsx("p",{className:"max-w-xl text-sm text-slate-600 dark:text-slate-300",children:"Review your generated alias, local activity, and saved preferences. You own the data on this pageâ€”every action here updates information stored only in your browser."})]})]}),c.jsxs("div",{className:"rounded-3xl border border-slate-200/80 bg-slate-50 px-6 py-4 text-left text-sm text-slate-600 shadow-inner dark:border-slate-700 dark:bg-slate-900 dark:text-slate-300",children:[c.jsx("p",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"Privacy Snapshot"}),c.jsxs("ul",{className:"mt-2 space-y-1",children:[c.jsx("li",{children:"â€¢ No cloud sync or external storage."}),c.jsx("li",{children:"â€¢ Cookies stay on this device."}),c.jsx("li",{children:"â€¢ Reset tools clear data instantly."})]})]})]})}),c.jsx(Bb,{})]})}function sd({isActive:e}){return`inline-flex items-center rounded-full border px-3 py-1.5 text-sm font-medium transition border-slate-300 text-slate-700 hover:border-amber-500 hover:text-amber-600 dark:border-slate-700 dark:text-slate-200 ${e?"bg-gradient-to-r from-yellow-400 to-amber-600 text-white border-transparent shadow":""}`}function ld(){return c.jsxs("nav",{className:"flex flex-wrap items-center gap-2",children:[c.jsx(st,{to:"/objectmaker",className:sd,end:!0,children:"Builder"}),c.jsx(st,{to:"/objectmaker/zoo",className:sd,children:"Zoo"})]})}function Db({baseUrl:e,setBaseUrl:t,model:r,setModel:n,experience:a}){function i(o){const s=(o||"").trim();return s?s.replace(/\/$/,""):""}return c.jsx("section",{className:"md:col-span-12",children:c.jsx("div",{className:"rounded-xl border border-slate-200 bg-white/80 p-3 dark:border-slate-800 dark:bg-slate-900/60",children:c.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Service settings"}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Configure model and base URL for object creation."})]}),c.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row",children:[c.jsxs("label",{className:"block text-sm",children:[c.jsx("span",{className:"block text-[10px] uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Model"}),c.jsx("select",{className:"mt-1 block w-56 rounded-md border border-slate-300 bg-white px-2 py-2 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",value:r,onChange:o=>n(o.target.value),children:(a?.modelOptions||[]).map(o=>c.jsx("option",{value:o,children:o},o))})]}),c.jsxs("label",{className:"block text-sm",children:[c.jsx("span",{className:"block text-[10px] uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Service base URL"}),c.jsx("input",{type:"url",value:e,onChange:o=>t(o.target.value),onBlur:o=>t(i(o.target.value)),className:"mt-1 block w-72 rounded-md border border-slate-300 bg-white px-2 py-2 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",placeholder:"https://your-endpoint.example"})]})]})]})})})}function Rb({prompt:e,setPrompt:t,chatMessages:r,chatLoading:n,onSend:a,onAdopt:i}){const o=!!e.trim()&&!n,l=!![...r].reverse().find(h=>h.role==="assistant"),d=h=>{h.key==="Enter"&&!h.shiftKey&&(h.preventDefault(),o&&a())},u=h=>{h.preventDefault(),o&&a()};return c.jsxs("section",{className:"md:col-span-5 space-y-4",children:[c.jsx("div",{className:"rounded-xl border border-slate-200 bg-white/80 p-4 shadow-sm dark:border-slate-800 dark:bg-slate-900/60",children:c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Assistant Schema Builder"}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Describe the object you want. The assistant will propose a single JSON schema."})]}),c.jsxs("form",{onSubmit:u,className:"flex flex-col gap-2",children:[c.jsx("textarea",{value:e,onChange:h=>t(h.target.value),onKeyDown:d,rows:3,spellCheck:!1,className:"block w-full rounded-lg border border-slate-300 bg-white/90 p-3 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-2 focus:ring-amber-500/60 dark:border-slate-700 dark:bg-slate-900/60 dark:text-slate-100",placeholder:"Ask for a schema ideaâ€¦"}),c.jsx("div",{className:"flex flex-wrap items-center justify-end gap-2",children:c.jsx("button",{type:"submit",disabled:!o,className:"inline-flex items-center gap-1 rounded-md bg-amber-600 px-3 py-1.5 text-sm font-semibold text-white shadow transition-colors hover:bg-amber-500 disabled:opacity-50",children:n?"Sendingâ€¦":c.jsxs(c.Fragment,{children:[c.jsx("span",{children:"Send to assistant"}),c.jsx(Ju,{className:"h-4 w-4","aria-hidden":"true"})]})})})]})]})}),c.jsxs("div",{className:"rounded-xl border border-amber-200 bg-amber-50/80 p-4 shadow-sm dark:border-amber-500/40 dark:bg-amber-500/10",children:[c.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Apply the assistant schema"}),c.jsx("p",{className:"text-xs text-amber-900/80 dark:text-amber-200/80",children:"Review the latest assistant reply below. When it looks good, send it to the Schema Setup card so you can validate and fine-tune it."})]}),c.jsxs("button",{type:"button",onClick:i,disabled:!l,className:"inline-flex items-center gap-1 rounded-md border border-amber-600 px-3 py-1.5 text-sm font-medium text-amber-700 transition-colors hover:bg-amber-100 disabled:opacity-50 dark:border-amber-400 dark:text-amber-200 dark:hover:bg-amber-500/20",children:[c.jsx(Qu,{className:"h-4 w-4","aria-hidden":"true"}),"Send to Schema Setup"]})]}),c.jsx("div",{className:"mt-3 max-h-64 space-y-2 overflow-auto",children:r.length?r.map((h,f)=>c.jsxs("div",{className:`rounded-md border p-2 text-sm ${h.role==="user"?"border-amber-200 bg-white text-slate-800 dark:border-amber-400/40 dark:bg-amber-500/10":"border-amber-300 bg-amber-100/80 text-amber-900 dark:border-amber-400/60 dark:bg-amber-500/20 dark:text-amber-50"}`,children:[c.jsx("div",{className:"mb-1 text-[10px] uppercase tracking-wide text-amber-600 dark:text-amber-200/80",children:h.role}),c.jsx("div",{className:"whitespace-pre-wrap break-words",children:h.content})]},f)):c.jsx("div",{className:"rounded-md border border-dashed border-amber-300 p-3 text-xs text-amber-700 dark:border-amber-400/50 dark:text-amber-200",children:"No assistant replies yet. Ask the assistant for a schema to get started."})}),l?null:c.jsx("p",{className:"mt-2 text-[11px] font-medium text-amber-800/80 dark:text-amber-200/70",children:"Send a prompt to the assistant firstâ€”then this button will push the suggested schema into the editor."})]})]})}function Lb({value:e,onChange:t,rows:r=10,placeholder:n}){return c.jsx("textarea",{value:e,onChange:a=>t(a.target.value),rows:r,spellCheck:!1,className:"mt-1 block w-full rounded-lg border border-slate-300 bg-white/90 p-2 font-mono text-[13px] text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-900/60 dark:text-slate-100",placeholder:n})}function Mb({value:e}){const t=b.useMemo(()=>{try{return JSON.stringify(e,null,2)}catch{return""}},[e]);return c.jsx("pre",{className:"max-h-80 overflow-auto rounded-lg border border-slate-200 bg-slate-50 p-3 text-xs text-slate-800 dark:border-slate-700 dark:bg-slate-900/50 dark:text-slate-200",children:t})}function Pb({structureText:e,setStructureText:t,onValidate:r,objectType:n,setObjectType:a,objectName:i,setObjectName:o,createPrompt:s,setCreatePrompt:l,systemText:d,setSystemText:u,temperature:h,setTemperature:f,strictMode:p,setStrictMode:m,onCreate:g,createLoading:x,error:y,resultObj:v,structureStatus:w}){const[S,C]=b.useState(""),k=b.useRef(null);b.useEffect(()=>()=>{k.current&&(clearTimeout(k.current),k.current=null)},[]);async function A(){if(v){try{const N=JSON.stringify(v,null,2);if(typeof navigator<"u"&&navigator.clipboard?.writeText)await navigator.clipboard.writeText(N);else{const B=document.createElement("textarea");B.value=N,B.setAttribute("readonly",""),B.style.position="absolute",B.style.left="-9999px",document.body.appendChild(B),B.select(),document.execCommand("copy"),document.body.removeChild(B)}C("Copied!")}catch(N){console.error("Copy failed",N),C("Copy failed")}k.current&&clearTimeout(k.current),k.current=setTimeout(()=>{C(""),k.current=null},2e3)}}return c.jsxs("section",{className:"md:col-span-7 space-y-4",children:[c.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white/80 p-4 shadow-sm dark:border-slate-800 dark:bg-slate-900/60",children:[c.jsxs("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-start sm:justify-between",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Schema Setup"}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Define and validate the JSON Schema before attempting generation."})]}),w?c.jsxs("div",{className:"flex items-center gap-1 text-xs font-medium text-emerald-600 dark:text-emerald-400",children:[c.jsx(zp,{className:"h-4 w-4","aria-hidden":"true"}),c.jsx("span",{children:w})]}):null]}),c.jsxs("div",{className:"mt-3 space-y-3",children:[c.jsx(Lb,{value:e,onChange:t,rows:16,placeholder:'{"type":"object","properties":{"name":{"type":"string"},"toppings":{"type":"array","items":{"type":"string"}}}}'}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[c.jsx("button",{type:"button",onClick:r,className:"rounded-md bg-amber-600 px-3 py-1.5 text-sm font-medium text-white shadow hover:bg-amber-500",children:"Validate JSON"}),c.jsxs("label",{className:"text-sm text-slate-600 dark:text-slate-300",children:[c.jsx("span",{className:"mr-1",children:"Type"}),c.jsx("input",{value:n,onChange:N=>a(N.target.value),className:"rounded-md border border-slate-300 bg-white px-2 py-1 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",placeholder:"pizza | hot_sauce | car"})]}),c.jsxs("label",{className:"text-sm text-slate-600 dark:text-slate-300",children:[c.jsx("span",{className:"mr-1",children:"Object Name (optional)"}),c.jsx("input",{value:i,onChange:N=>o(N.target.value),className:"rounded-md border border-slate-300 bg-white px-2 py-1 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",placeholder:"diavola"})]})]}),c.jsxs("label",{className:"block text-sm",children:[c.jsx("span",{className:"mr-1 text-slate-600 dark:text-slate-300",children:"System Instruction"}),c.jsx("input",{value:d,onChange:N=>u(N.target.value),className:"mt-1 block w-full rounded-md border border-slate-300 bg-white px-2 py-2 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",placeholder:"You create a pizza object that conforms strictly to the provided JSON Schema; return only JSON."})]})]})]}),c.jsx("div",{className:"rounded-xl border border-slate-200 bg-white/80 p-4 shadow-sm dark:border-slate-800 dark:bg-slate-900/60",children:c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Generation Request"}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Craft the prompt and run the request after your schema looks right."})]}),c.jsxs("label",{className:"block text-sm",children:[c.jsx("span",{className:"mr-1 text-slate-600 dark:text-slate-300",children:"User Prompt"}),c.jsx("input",{value:s,onChange:N=>l(N.target.value),className:"mt-1 block w-full rounded-md border border-slate-300 bg-white px-2 py-2 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",placeholder:"Describe the instance to create (e.g., 'A Margherita with basil and fresh mozzarella')"})]}),c.jsxs("div",{className:"flex flex-wrap gap-3",children:[c.jsxs("label",{className:"text-sm text-slate-600 dark:text-slate-300",children:[c.jsx("span",{className:"mr-1",children:"Temperature"}),c.jsx("input",{type:"number",value:h,onChange:N=>f(N.target.value),min:"0",max:"2",step:"0.1",className:"mt-1 block w-24 rounded-md border border-slate-300 bg-white px-2 py-1 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100"})]}),c.jsxs("label",{className:"text-sm text-slate-600 dark:text-slate-300",children:[c.jsx("span",{className:"mr-1",children:"Strict mode"}),c.jsxs("select",{value:p,onChange:N=>m(N.target.value),className:"mt-1 block rounded-md border border-slate-300 bg-white px-2 py-1 text-sm text-slate-800 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",children:[c.jsx("option",{value:"auto",children:"Auto (service decides)"}),c.jsx("option",{value:"true",children:"Force strict validation"}),c.jsx("option",{value:"false",children:"Relaxed validation"})]})]}),c.jsx("div",{className:"ml-auto flex items-end",children:c.jsx("button",{type:"button",onClick:g,disabled:x,className:"rounded-md bg-amber-700 px-4 py-2 text-sm font-semibold text-white shadow hover:bg-amber-600 disabled:opacity-50",children:x?"Creatingâ€¦":"Create Object"})})]}),y?c.jsx("div",{className:"rounded-md border border-red-300 bg-red-50 p-2 text-sm text-red-800 dark:border-red-800/60 dark:bg-red-900/40 dark:text-red-200",children:y}):null]})}),c.jsxs("section",{className:"rounded-xl border border-slate-200 bg-white/60 p-4 shadow-sm dark:border-slate-800 dark:bg-slate-900/50",children:[c.jsxs("div",{className:"flex items-center justify-between gap-2",children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Last Created Object"}),v?c.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 dark:text-slate-400",children:[S?c.jsx("span",{children:S}):null,c.jsxs("button",{type:"button",onClick:A,className:"inline-flex items-center gap-1 rounded-md border border-slate-300 px-2 py-1 text-xs font-medium text-slate-700 transition-colors hover:bg-slate-100 dark:border-slate-600 dark:text-slate-200 dark:hover:bg-slate-800",children:[c.jsx(Qu,{className:"h-4 w-4","aria-hidden":"true"}),"Copy JSON"]})]}):null]}),c.jsx("div",{className:"mt-3",children:v?c.jsx(Mb,{value:v}):c.jsx("div",{className:"rounded-lg border border-dashed border-slate-300 bg-white/60 p-4 text-sm text-slate-500 dark:border-slate-700 dark:bg-slate-900/60 dark:text-slate-400",children:"No object created yet. The response from /obj will appear here."})})]})]})}function dl(e){if(!e)return null;try{const t=JSON.parse(e);if(t&&typeof t=="object")return t}catch{return null}return null}function Fb(e){if(!e)return null;const t=/```(?:json)?\s*([\s\S]*?)```/i,r=e.match(t);return!r||!r[1]?null:dl(r[1].trim())}function $b(e){if(!e)return null;const t=String(e),r=t.indexOf("{");if(r<0)return null;let n=0;for(let a=r;a<t.length;a++){const i=t[a];if(i==="{")n++;else if(i==="}"&&(n--,n===0)){const o=t.slice(r,a+1),s=dl(o);if(s)return s}}return null}function Ub(e){return dl(e)||Fb(e)||$b(e)}const cd={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var dd={};const Io=typeof import.meta<"u"&&cd?cd:void 0,Oo=typeof globalThis<"u"&&dd?dd:void 0;function e0(e){if(e){if(Io&&Io[e]!==void 0)return Io[e];if(Oo&&Oo[e]!==void 0)return Oo[e]}}const zb=(e0("VITE_CHAT_BASE_URL")||"https://groq-endpoint.louispaulet13.workers.dev").replace(/\/$/,"");function Hb(e="",t=160){const r=(e||"").toString().trim();return r.length<=t?r:`${r.slice(0,t)}...`}function Gb(e){if(!e||typeof e!="object")return e;try{const t=JSON.parse(JSON.stringify(e)),r=n=>{if(!(!n||typeof n!="object")){if(n.type==="object"){n.additionalProperties!==!1&&(n.additionalProperties=!1);const a=n.properties&&typeof n.properties=="object"?n.properties:{},i=Object.keys(a);if(i.length){const l=Array.isArray(n.required)?n.required.filter(u=>typeof u=="string"):[],d=new Set([...l,...i]);n.required=Array.from(d)}Object.values(a).forEach(r);const o=n.patternProperties&&typeof n.patternProperties=="object"?n.patternProperties:{};Object.values(o).forEach(r);const s=n.dependencies&&typeof n.dependencies=="object"?n.dependencies:{};Object.values(s).forEach(l=>{l&&typeof l=="object"&&r(l)})}"format"in n&&delete n.format,n.items&&(Array.isArray(n.items)?n.items.forEach(r):r(n.items));for(const a of["allOf","anyOf","oneOf"])Array.isArray(n[a])&&n[a].forEach(r);for(const a of["not","if","then","else"])n[a]&&typeof n[a]=="object"&&r(n[a]);for(const a of["definitions","$defs"])n[a]&&typeof n[a]=="object"&&Object.values(n[a]).forEach(r)}};return r(t),t}catch{return e}}function Vb(e){const t=(e||"").toString().trim();return t?t.replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_-]/g,"").toLowerCase():""}async function ca({baseUrl:e,structure:t,model:r,objectType:n,prompt:a,system:i,temperature:o,strict:s}={}){const l=(e||zb||"").replace(/\/$/,"");if(!l)throw new Error("Missing service base URL for /obj");const d=(e0("VITE_OBJECTMAKER_OBJ_PATH")||"").trim(),u=Vb(n||t&&t.type),h=C=>C?u?C.replace("{type}",u).replace(":type",u).replace("%s",u):C.includes("{type}")||C.includes(":type")||C.includes("%s")?null:C:null;let f=[];if(d){const C=h(d);C?f.push(C.startsWith("/")?C:`/${C}`):u&&f.push(d.replace(/\/?$/,"/")+u)}u&&f.push(`/obj/${u}`,`/object/${u}`,`/objects/${u}`),u||f.push("/obj","/object","/objects"),f=Array.from(new Set(f.filter(Boolean).map(C=>C.startsWith("/")?C:`/${C}`)));const p=(a||"").toString().trim();if(!p)throw new Error("Object prompt is required to call /obj");const m="You are an object maker. Produce a single JSON object that strictly conforms to the provided JSON Schema. Do not include commentary or markdown. Only return the JSON object.",g=(i||m).toString().trim()||m,y={schema:Gb(t),system:g,user:p},v=typeof o=="number"?o:Number.parseFloat(o);Number.isFinite(v)&&(y.temperature=v),r&&(y.model=r),typeof s=="boolean"&&(y.strict=s);const w=[y];let S=null;for(const C of f){const k=`${l}${C}`;let A=null;for(const N of w)try{const B=await fetch(k,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)}),E=await B.text();if(!B.ok){const F=Hb(E);if(B.status===404){A=null;break}A=new Error(`HTTP ${B.status}: ${F} (path ${k})`);continue}let I;try{I=JSON.parse(E)}catch{I=null}if(!I||typeof I!="object")throw new Error("Invalid JSON response from object endpoint");return{payload:I,status:B.status,baseUrl:l,path:C}}catch(B){A=B}if(A)throw A;S=S||new Error(`HTTP 404: endpoint not found at ${k}`)}throw S||new Error("Object creation failed")}const ud="You are an object maker. Produce a single JSON object that strictly conforms to the provided JSON Schema. Do not include commentary or markdown. Only return the JSON object.",t0={type:"object",additionalProperties:!1,properties:{name:{type:"string"},size:{type:"string",enum:["small","medium","large"]},crust:{type:"string"},cheese:{type:"string"},toppings:{type:"array",items:{type:"string"}}},required:["name","size","crust","cheese","toppings"]},qb=JSON.stringify(t0,null,2),Wb="make a delicious spicy pizza that respects this schema",Xb="pizza",Yb="";function Kb(e,t){const r=t?[{role:"system",content:t}]:[],n=(e||[]).filter(a=>a&&(a.role==="user"||a.role==="assistant")).map(a=>({role:a.role,content:a.content}));return[...r,...n]}function Rn(e){const t=(e||"").trim();return t?t.replace(/\/$/,""):""}function r0(e){if(!e||typeof e!="object")return{schema:e,changed:!1};let t=!1;const r=JSON.parse(JSON.stringify(e)),n=a=>{if(!(!a||typeof a!="object")){if(a.type==="object"){a.additionalProperties!==!1&&(a.additionalProperties=!1,t=!0);const i=a.properties&&typeof a.properties=="object"?a.properties:{},o=Object.keys(i);if(o.length){const d=Array.isArray(a.required)?a.required.filter(f=>typeof f=="string"):[],u=new Set(d),h=u.size;for(const f of o)u.add(f);(u.size!==h||d.length!==u.size)&&(a.required=Array.from(u),t=!0)}Object.values(i).forEach(n);const s=a.patternProperties&&typeof a.patternProperties=="object"?a.patternProperties:{};Object.values(s).forEach(n);const l=a.dependencies&&typeof a.dependencies=="object"?a.dependencies:{};Object.values(l).forEach(d=>{d&&typeof d=="object"&&n(d)})}"format"in a&&(delete a.format,t=!0),a.items&&(Array.isArray(a.items)?a.items.forEach(n):n(a.items));for(const i of["allOf","anyOf","oneOf"])Array.isArray(a[i])&&a[i].forEach(n);for(const i of["not","if","then","else"])a[i]&&typeof a[i]=="object"&&n(a[i]);for(const i of["definitions","$defs"])a[i]&&typeof a[i]=="object"&&Object.values(a[i]).forEach(n)}};return n(r),{schema:r,changed:t}}function Zb(e,t,r){if(t)return t;const n=JSON.parse(e);if(!n||typeof n!="object")throw new Error("Structure must be a JSON object");if(n.type!=="object")throw new Error('Schema must declare "type":"object"');return r(n),n}function hd(e,t,r,n,a){const i=r0(e);return i.changed&&(t(i.schema),r(JSON.stringify(i.schema,null,2)),n(a)),i.schema}function Jb(e){const[t,r]=b.useState(e?.defaultModel||e?.modelOptions?.[0]),[n,a]=b.useState(Rn(e?.defaultBaseUrl)),[i,o]=b.useState(""),[s,l]=b.useState(!1),[d,u]=b.useState([]),[h,f]=b.useState(qb),[p,m]=b.useState(t0),[g,x]=b.useState(""),[y,v]=b.useState(!1),[w,S]=b.useState(null),[C,k]=b.useState(Xb),[A,N]=b.useState(Yb),[B,E]=b.useState(Wb),[I,F]=b.useState(ud),[V,M]=b.useState("0"),[L,R]=b.useState("auto"),[U,$]=b.useState("");return{experience:e,model:t,setModel:r,baseUrl:n,setBaseUrl:J=>a(J),prompt:i,setPrompt:o,chatLoading:s,chatMessages:d,sendToChat:async()=>{const J=i.trim();if(!J||s)return;$("");const ce=[...d,{role:"user",content:J,timestamp:Date.now()}];u(ce),o(""),l(!0);try{const P=Kb(ce,e?.systemPrompt),oe={role:"assistant",content:(await la(e,P,{model:t,baseUrl:Rn(n)})).content,timestamp:Date.now()};u(ne=>[...ne,oe])}catch(P){$(P?.message||"Chat failed")}finally{l(!1)}},tryAdoptAssistantJson:()=>{const J=[...d].reverse().find(ie=>ie.role==="assistant");if(!J){$("No assistant message to extract JSON from.");return}const ce=Ub(J.content);if(!ce){$("Could not extract JSON. Ensure the assistant returns a single JSON object.");return}if(ce?.type!=="object"){$('Schema must declare "type":"object".');return}const P=hd(ce,m,f,x,"Schema adopted from assistant");x("Schema adopted from assistant"),f(JSON.stringify(P,null,2)),m(P),$("")},structureText:h,setStructureText:J=>{f(J),m(null),x("")},validateStructure:()=>{$("");try{const J=JSON.parse(h);if(!J||typeof J!="object")throw new Error("Not an object");if(J.type!=="object")throw new Error('Schema must declare "type":"object"');const ce=r0(J);m(ce.schema),ce.changed&&f(JSON.stringify(ce.schema,null,2)),x(ce.changed?"Schema valid (normalized unsupported keywords)":"Schema valid")}catch(J){m(null),$(`Invalid JSON: ${J?.message||"parse error"}`),x("")}},structureStatus:g,objectType:C,setObjectType:k,objectName:A,setObjectName:N,createPrompt:B,setCreatePrompt:E,systemText:I,setSystemText:F,temperature:V,setTemperature:M,strictMode:L,setStrictMode:R,handleCreate:async()=>{$(""),S(null);let J;try{J=Zb(h,p,m)}catch(oe){$(oe.message);return}const ce=(C||J?.type||"").toString().trim();if(!ce){$('Type is required to call /obj/{type}. Fill the Type field or include "type" in your structure.');return}const P=B.trim();if(!P){$("Provide a user prompt for the object generation request.");return}const ie=I.trim()||ud;J=hd(J,m,f,x,"Schema normalized before create (unsupported keywords removed)"),v(!0);try{const oe=Rn(n),ne=Number.parseFloat(V),ye=L==="true"?!0:L==="false"?!1:void 0,{payload:Xe}=await ca({baseUrl:oe,structure:J,model:t,objectType:ce,prompt:P,system:ie,temperature:Number.isFinite(ne)?ne:void 0,strict:ye});S(Xe);const ft=(ce||Xe?.type||J?.type||"object").toString(),Xl=(Xe?.name||A||Xe?.title||ft).toString();_b({id:`obj-${Date.now().toString(16)}`,type:ft,title:Xl,createdAt:Date.now(),structure:J,result:Xe,conversation:d,prompt:P,system:ie,temperature:Number.isFinite(ne)?ne:void 0,strict:ye})}catch(oe){$(oe?.message||"Object creation failed")}finally{v(!1)}},createLoading:y,error:U,resultObj:w}}function Qb(){const e=Mi("objectmaker"),t=Jb(e);return c.jsx("div",{className:"space-y-8",children:c.jsxs("div",{className:"grid gap-6 md:grid-cols-12",children:[c.jsx(Db,{baseUrl:t.baseUrl,setBaseUrl:t.setBaseUrl,model:t.model,setModel:t.setModel,experience:e,objectType:t.objectType}),c.jsx(Rb,{prompt:t.prompt,setPrompt:t.setPrompt,chatMessages:t.chatMessages,chatLoading:t.chatLoading,onSend:t.sendToChat,onAdopt:t.tryAdoptAssistantJson}),c.jsx(Pb,{structureText:t.structureText,setStructureText:t.setStructureText,onValidate:t.validateStructure,objectType:t.objectType,setObjectType:t.setObjectType,objectName:t.objectName,setObjectName:t.setObjectName,createPrompt:t.createPrompt,setCreatePrompt:t.setCreatePrompt,systemText:t.systemText,setSystemText:t.setSystemText,temperature:t.temperature,setTemperature:t.setTemperature,strictMode:t.strictMode,setStrictMode:t.setStrictMode,onCreate:t.handleCreate,createLoading:t.createLoading,error:t.error,resultObj:t.resultObj,structureStatus:t.structureStatus})]})})}function e2({entry:e,onDelete:t}){const[r,n]=b.useState(!1),a=new Date(e.createdAt);return c.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white/80 p-3 shadow-sm dark:border-slate-800 dark:bg-slate-900/60",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-100",children:e.title}),c.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:a.toLocaleString()})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{className:"rounded-md border border-slate-300 px-2 py-1 text-xs text-slate-700 hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-800/60",onClick:()=>n(i=>!i),children:r?"Hide":"View"}),c.jsx("button",{className:"rounded-md border border-red-300 px-2 py-1 text-xs text-red-700 hover:bg-red-50 dark:border-red-800 dark:text-red-300 dark:hover:bg-red-900/30",onClick:t,children:"Delete"})]})]}),r?c.jsxs("div",{className:"mt-3 grid gap-3 lg:grid-cols-2",children:[c.jsxs("div",{children:[c.jsx("div",{className:"mb-1 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"Result"}),c.jsx("pre",{className:"max-h-72 overflow-auto rounded-md border border-slate-200 bg-slate-50 p-2 text-[12px] text-slate-800 dark:border-slate-700 dark:bg-slate-900/50 dark:text-slate-200",children:JSON.stringify(e.result,null,2)})]}),c.jsxs("div",{children:[c.jsx("div",{className:"mb-1 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"Structure"}),c.jsx("pre",{className:"max-h-72 overflow-auto rounded-md border border-slate-200 bg-slate-50 p-2 text-[12px] text-slate-800 dark:border-slate-700 dark:bg-slate-900/50 dark:text-slate-200",children:JSON.stringify(e.structure,null,2)})]}),c.jsxs("div",{className:"lg:col-span-2",children:[c.jsx("div",{className:"mb-1 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"Conversation"}),c.jsx("div",{className:"max-h-56 space-y-2 overflow-auto",children:(e.conversation||[]).map((i,o)=>c.jsxs("div",{className:`rounded-md p-2 text-[12px] ${i.role==="user"?"bg-yellow-50 text-slate-800 dark:bg-yellow-500/10":"bg-slate-50 text-slate-700 dark:bg-slate-800/50 dark:text-slate-200"}`,children:[c.jsx("div",{className:"mb-1 text-[10px] uppercase tracking-wide text-slate-500 dark:text-slate-400",children:i.role}),c.jsx("div",{className:"whitespace-pre-wrap break-words",children:i.content})]},o))})]})]}):null]})}function t2(){const[e,t]=b.useState(()=>ol()),r=b.useMemo(()=>Cb(e),[e]);function n(i){const o=e.filter(s=>s!==i);t(o),Wh(o)}function a(){Xh(),t([])}return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-base font-semibold text-slate-800 dark:text-slate-100",children:"Object Zoo ðŸ¦¾"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Oe,{to:"/objectmaker",className:"rounded-md border border-slate-300 px-3 py-1.5 text-sm text-slate-700 hover:bg-slate-50 dark:border-slate-700 dark:text-slate-200 dark:hover:bg-slate-800/60",children:"Back to Builder ðŸ› ï¸"}),e.length>0?c.jsx("button",{onClick:a,className:"rounded-md border border-red-300 px-3 py-1.5 text-sm font-medium text-red-700 hover:bg-red-50 dark:border-red-800 dark:text-red-300 dark:hover:bg-red-900/30",children:"Delete all saved objects ðŸ§¹"}):null]})]}),e.length===0?c.jsx("div",{className:"rounded-xl border border-slate-200 bg-white/70 p-6 text-sm text-slate-500 dark:border-slate-800 dark:bg-slate-900/60 dark:text-slate-400",children:"No entries yet. Create objects in the Builder and they will appear here grouped by type. ðŸ“"}):null,[...r.entries()].map(([i,o])=>c.jsxs("section",{className:"space-y-3",children:[c.jsx("div",{className:"flex items-center justify-between",children:c.jsxs("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:[i," â€” ",o.length," ðŸ“¦"]})}),c.jsx("div",{className:"grid gap-3 md:grid-cols-2",children:o.map(s=>c.jsx(e2,{entry:s,onDelete:()=>n(s)},s.id))})]},i))]})}const r2={usa:[{date:"2024-01-01",name:"New Year's Day"},{date:"2024-01-15",name:"Martin Luther King Jr. Day"},{date:"2024-05-27",name:"Memorial Day"},{date:"2024-07-04",name:"Independence Day"},{date:"2024-09-02",name:"Labor Day"},{date:"2024-11-28",name:"Thanksgiving Day"}],uk:[{date:"2024-01-01",name:"New Year's Day"},{date:"2024-03-29",name:"Good Friday"},{date:"2024-04-01",name:"Easter Monday"},{date:"2024-05-06",name:"Early May Bank Holiday"},{date:"2024-08-26",name:"Summer Bank Holiday"},{date:"2024-12-25",name:"Christmas Day"}],fr:[{date:"2025-01-01",name:"Jour de l'An"},{date:"2025-04-18",name:"Vendredi saint (Alsace-Moselle)"},{date:"2025-04-21",name:"Lundi de PÃ¢ques"},{date:"2025-05-01",name:"FÃªte du Travail"},{date:"2025-05-08",name:"Victoire 1945"},{date:"2025-05-29",name:"Jeudi de l'Ascension"},{date:"2025-06-09",name:"Lundi de PentecÃ´te"},{date:"2025-07-14",name:"FÃªte nationale"},{date:"2025-08-15",name:"Assomption"},{date:"2025-11-01",name:"Toussaint"},{date:"2025-11-11",name:"Armistice 1918"},{date:"2025-12-25",name:"NoÃ«l"},{date:"2025-12-26",name:"Saint-Ã‰tienne (Alsace-Moselle)"},{date:"2026-01-01",name:"Jour de l'An"},{date:"2026-04-03",name:"Vendredi saint (Alsace-Moselle)"},{date:"2026-04-06",name:"Lundi de PÃ¢ques"},{date:"2026-05-01",name:"FÃªte du Travail"},{date:"2026-05-08",name:"Victoire 1945"},{date:"2026-05-14",name:"Jeudi de l'Ascension"},{date:"2026-05-25",name:"Lundi de PentecÃ´te"},{date:"2026-07-14",name:"FÃªte nationale"},{date:"2026-08-15",name:"Assomption"},{date:"2026-11-01",name:"Toussaint"},{date:"2026-11-11",name:"Armistice 1918"},{date:"2026-12-25",name:"NoÃ«l"},{date:"2026-12-26",name:"Saint-Ã‰tienne (Alsace-Moselle)"}],es:[{date:"2024-01-01",name:"AÃ±o Nuevo"},{date:"2024-03-29",name:"Viernes Santo"},{date:"2024-05-01",name:"Fiesta del Trabajo"},{date:"2024-08-15",name:"AsunciÃ³n de la Virgen"},{date:"2024-11-01",name:"DÃ­a de Todos los Santos"},{date:"2024-12-06",name:"DÃ­a de la ConstituciÃ³n"}],it:[{date:"2024-01-01",name:"Capodanno"},{date:"2024-04-01",name:"LunedÃ¬ dellâ€™Angelo"},{date:"2024-04-25",name:"Festa della Liberazione"},{date:"2024-05-01",name:"Festa del Lavoro"},{date:"2024-08-15",name:"Ferragosto"},{date:"2024-12-25",name:"Natale"}]},Ca=[{id:"usa",label:"USA",locale:"en-US"},{id:"uk",label:"United Kingdom",locale:"en-GB"},{id:"fr",label:"France",locale:"fr-FR"},{id:"es",label:"Spain",locale:"es-ES"},{id:"it",label:"Italy",locale:"it-IT"}],Ln=25,fd="bank_holiday_plan",n2={type:"object",additionalProperties:!1,properties:{requestSummary:{type:"object",additionalProperties:!1,properties:{country:{type:"string"},daysReservedForOtherPlans:{type:"number"},daysAvailableForOptimization:{type:"number"},totalBankHolidaysConsidered:{type:"number"}},required:["country","daysReservedForOtherPlans","daysAvailableForOptimization","totalBankHolidaysConsidered"]},recommendations:{type:"array",items:{type:"object",additionalProperties:!1,properties:{label:{type:"string"},startDate:{type:"string"},endDate:{type:"string"},leaveDates:{type:"array",items:{type:"string"}},leaveDaysUsed:{type:"number"},totalContinuousDaysOff:{type:"number"},bankHolidaysLeveraged:{type:"array",items:{type:"string"}},rationale:{type:"string"}},required:["label","startDate","endDate","leaveDates","leaveDaysUsed","totalContinuousDaysOff","bankHolidaysLeveraged","rationale"]}},comparison:{type:"object",additionalProperties:!1,properties:{optimizedLeaveDaysUsed:{type:"number"},optimizedTotalDaysOff:{type:"number"},randomAverageDaysOff:{type:"number"},efficiencyGainPercentage:{type:"number"},commentary:{type:"string"}},required:["optimizedLeaveDaysUsed","optimizedTotalDaysOff","randomAverageDaysOff","efficiencyGainPercentage","commentary"]}},required:["requestSummary","recommendations","comparison"]},n0=new Intl.DateTimeFormat("en-US",{weekday:"long",timeZone:"UTC"}),a2=new Intl.DateTimeFormat("en-US",{dateStyle:"long",timeZone:"UTC"}),i2=new Intl.DateTimeFormat("en-US",{month:"short",timeZone:"UTC"});function a0(e){switch(e.getUTCDay()){case 0:return"Falls on a Sunday â€” consider taking the preceding Friday or following Monday to benefit.";case 1:return"Monday holiday â€” a single Friday off yields a four-day weekend.";case 2:return"Tuesday holiday â€” taking Monday connects the prior weekend; consider extending into the week.";case 3:return"Wednesday holiday â€” stacking Monday/Tuesday or Thursday/Friday can unlock a full week off.";case 4:return"Thursday holiday â€” one Friday off secures a four-day getaway; add earlier days for more time.";case 5:return"Friday holiday â€” combine with Thursday (and perhaps Monday) for a long stretch.";case 6:return"Falls on a Saturday â€” request adjacent Friday or following Monday for impact.";default:return""}}function o2({countryLabel:e,daysToOptimize:t,holidays:r,locale:n}){const a=Math.max(Ln-t,0),i=r.map(s=>{const l=new Date(`${s.date}T00:00:00Z`),d=n0.format(l),u=new Intl.DateTimeFormat(n||"en-US",{dateStyle:"long",timeZone:"UTC"}).format(l),h=a0(l);return`- ${s.name}: ${s.date} (${d}) â€” ${u}. ${h}`});return["You are BHP (Bank Holiday Planner), an assistant that designs optimal vacation plans using paid leave days and national bank holidays.",`Country: ${e}.`,`Total paid leave days available this year: ${Ln}.`,`Days already committed to other plans: ${a}.`,`Days available for optimization: ${t}.`,"Use the following list of bank holidays (ISO date order preserved):",i.join(`
`),"","Goals:","- Maximize total uninterrupted days off while spending no more than the available optimization days.","- Suggest specific paid leave dates to bridge weekends and holidays.","- Provide a clear rationale for each proposed vacation block.","- Include a comparison that estimates the average days off someone would gain by randomly placing the same number of leave days.","- Respect the response JSON schema exactly.","","Ensure recommendations are in chronological order and avoid overlapping leave suggestions."].join(`
`)}function s2({holidays:e,locale:t}){return e.length?c.jsx("ol",{className:"grid gap-3 sm:grid-cols-2",children:e.map(r=>{const n=new Date(`${r.date}T00:00:00Z`),a=n0.format(n),i=new Intl.DateTimeFormat(t||"en-US",{dateStyle:"long",timeZone:"UTC"}).format(n);return c.jsxs("li",{className:"rounded-3xl border border-emerald-200/70 bg-white/80 px-4 py-3 text-sm shadow-sm backdrop-blur dark:border-emerald-500/40 dark:bg-slate-900/60",children:[c.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:r.name}),c.jsx("div",{className:"text-slate-600 dark:text-slate-400",children:i}),c.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-500",children:a}),c.jsx("div",{className:"mt-2 text-xs text-emerald-700 dark:text-emerald-300",children:a0(n)})]},r.date)})}):c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No bank holidays configured for this country."})}function l2(e,t){if(!e||!t)return[];const r=new Date(`${e}T00:00:00Z`),n=new Date(`${t}T00:00:00Z`);if(Number.isNaN(r.getTime())||Number.isNaN(n.getTime()))return[];const a=[],i=new Date(r);for(;i<=n;)a.push(i.toISOString().slice(0,10)),i.setUTCDate(i.getUTCDate()+1);return a}function pd({year:e,holidays:t,recommendations:r}){const n=b.useMemo(()=>new Set(t.map(h=>h.date)),[t]),a=b.useMemo(()=>{const h=new Set;return r?.flatMap(f=>Array.isArray(f.leaveDates)?f.leaveDates:[]).forEach(f=>{typeof f=="string"&&h.add(f)}),h},[r]),i=b.useMemo(()=>{const h=new Set;return r?.forEach(f=>{l2(f.startDate,f.endDate).forEach(p=>h.add(p))}),h},[r]),o=new Date(Date.UTC(e,0,1)),s=new Date(Date.UTC(e+1,0,1)),l=[];let d=new Array(o.getUTCDay()).fill(null);for(let h=new Date(o);h<s;h.setUTCDate(h.getUTCDate()+1))d.length===7&&(l.push(d),d=[]),d.push(new Date(h));if(d.length){for(;d.length<7;)d.push(null);l.push(d)}const u=[];return l.forEach((h,f)=>{const p=h.find(Boolean);if(!p)return;const m=p.getUTCMonth();u.some(g=>g.month===m)||u.push({month:m,weekIndex:f,label:i2.format(p)})}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"flex gap-4 text-xs text-emerald-50/90",children:u.map(h=>c.jsx("span",{style:{marginLeft:`${h.weekIndex*16}px`},children:h.label},h.month))}),c.jsxs("div",{className:"flex gap-[3px] rounded-3xl bg-emerald-900/40 p-3 ring-1 ring-emerald-500/40",children:[c.jsx("div",{className:"grid grid-rows-7 gap-[3px] pr-2 text-[10px] uppercase tracking-wide text-emerald-100/70",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(h=>c.jsx("span",{className:"flex h-3 items-center",children:h},h))}),c.jsx("div",{className:"flex gap-[3px] overflow-x-auto pb-1",children:l.map((h,f)=>c.jsx("div",{className:"grid grid-rows-7 gap-[3px]",children:h.map((p,m)=>{if(!p)return c.jsx("span",{className:"h-3 w-3 rounded-sm bg-transparent"},`empty-${f}-${m}`);const g=p.toISOString().slice(0,10),x=n.has(g),y=a.has(g),v=i.has(g),w=p.getUTCDay()===0||p.getUTCDay()===6;let S="bg-emerald-950/30";v&&(S="bg-teal-300"),x&&(S="bg-emerald-400"),y&&(S="bg-amber-300"),!x&&!y&&!v&&w&&(S="bg-emerald-950/50");const C=[a2.format(p)];return x&&C.push("Bank holiday"),y?C.push("Recommended leave day"):v?C.push("Included in suggested getaway"):w&&C.push("Weekend"),c.jsx("span",{className:`h-3 w-3 rounded-sm transition ${S}`,title:C.join(" â€¢ ")},g)})},f))})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-emerald-100/80",children:[c.jsx(Sa,{className:"bg-amber-300",label:"Recommended leave"}),c.jsx(Sa,{className:"bg-emerald-400",label:"Bank holiday"}),c.jsx(Sa,{className:"bg-teal-300",label:"Vacation span"}),c.jsx(Sa,{className:"bg-emerald-950/50",label:"Weekends"})]})]})}function Sa({className:e,label:t}){return c.jsxs("span",{className:"inline-flex items-center gap-2",children:[c.jsx("span",{className:`h-3 w-3 rounded-sm ${e}`}),c.jsx("span",{children:t})]})}function c2({recommendations:e}){return e?.length?c.jsx("ol",{className:"space-y-4",children:e.map((t,r)=>{const n=Array.isArray(t.leaveDates)?t.leaveDates:[],a=Array.isArray(t.bankHolidaysLeveraged)?t.bankHolidaysLeveraged:[];return c.jsxs("li",{className:"rounded-3xl border border-emerald-400/30 bg-white/80 p-5 shadow-sm transition hover:-translate-y-0.5 hover:shadow-lg dark:border-emerald-500/40 dark:bg-slate-900/70",children:[c.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[c.jsx("span",{className:"inline-flex items-center rounded-full bg-emerald-500/10 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-200",children:t.label||"Vacation block"}),c.jsxs("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:[t.startDate," â†’ ",t.endDate]})]}),c.jsxs("div",{className:"mt-3 grid gap-3 text-sm text-slate-600 dark:text-slate-300 sm:grid-cols-3",children:[c.jsx(md,{title:"Leave days used",value:t.leaveDaysUsed}),c.jsx(md,{title:"Total days off",value:t.totalContinuousDaysOff}),c.jsxs("div",{className:"rounded-2xl bg-emerald-500/5 px-3 py-2",children:[c.jsx("div",{className:"text-xs uppercase tracking-wide text-emerald-700 dark:text-emerald-200",children:"Holidays leveraged"}),c.jsx("div",{className:"text-xs font-medium text-slate-600 dark:text-slate-300",children:a.length?a.join(", "):"â€”"})]})]}),c.jsxs("div",{className:"mt-3 space-y-2 text-sm text-slate-600 dark:text-slate-300",children:[c.jsxs("div",{children:[c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-200",children:"Paid leave dates:"})," ",n.length?n.join(", "):"None suggested"]}),c.jsx("p",{className:"leading-relaxed",children:t.rationale})]})]},`${t.startDate}-${t.endDate}-${r}`)})}):c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No optimization suggestions were returned. Try adjusting the inputs and running the planner again."})}function md({title:e,value:t}){return c.jsxs("div",{className:"rounded-2xl bg-emerald-500/5 px-3 py-2",children:[c.jsx("div",{className:"text-xs uppercase tracking-wide text-emerald-700 dark:text-emerald-200",children:e}),c.jsx("div",{className:"text-base font-semibold text-slate-900 dark:text-slate-100",children:t})]})}function d2({comparison:e}){return e?c.jsxs("div",{className:"grid gap-4 rounded-3xl border border-emerald-500/30 bg-white/80 p-5 shadow-sm dark:border-emerald-500/40 dark:bg-slate-900/70 sm:grid-cols-2",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-xs uppercase tracking-wide text-emerald-700 dark:text-emerald-200",children:"Optimized outcome"}),c.jsxs("div",{className:"mt-2 text-3xl font-semibold text-slate-900 dark:text-slate-100",children:[e.optimizedTotalDaysOff,c.jsx("span",{className:"ml-1 text-base font-medium text-slate-500 dark:text-slate-400",children:"days off"})]}),c.jsxs("div",{className:"mt-1 text-sm text-slate-600 dark:text-slate-300",children:["Using ",e.optimizedLeaveDaysUsed," paid leave days"]})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs uppercase tracking-wide text-emerald-700 dark:text-emerald-200",children:"Random placement baseline"}),c.jsxs("div",{className:"mt-2 text-3xl font-semibold text-slate-900 dark:text-slate-100",children:[e.randomAverageDaysOff,c.jsx("span",{className:"ml-1 text-base font-medium text-slate-500 dark:text-slate-400",children:"days off"})]}),c.jsxs("div",{className:"mt-1 text-sm text-slate-600 dark:text-slate-300",children:["Efficiency gain: ",e.efficiencyGainPercentage,"%"]})]}),c.jsx("div",{className:"sm:col-span-2 text-sm leading-relaxed text-slate-600 dark:text-slate-300",children:e.commentary})]}):null}function u2(){const e=Mi("objectmaker"),[t,r]=b.useState(Ca[0]?.id||"usa"),[n,a]=b.useState("10"),[i,o]=b.useState(!1),[s,l]=b.useState(""),[d,u]=b.useState(null),h=Ca.find(w=>w.id===t)||Ca[0],f=b.useMemo(()=>r2[h.id]||[],[h.id]),p=Rn(e?.defaultBaseUrl),m=e?.defaultModel||e?.modelOptions?.[0],g=Number.parseInt(n,10),x=b.useMemo(()=>{const w=f.length?new Date(`${f[0].date}T00:00:00Z`).getUTCFullYear():null;if(Number.isInteger(w))return w;if(d?.recommendations?.length){const S=d.recommendations.find(C=>C?.startDate);if(S){const C=new Date(`${S.startDate}T00:00:00Z`).getUTCFullYear();if(Number.isInteger(C))return C}}return new Date().getUTCFullYear()},[f,d?.recommendations]),y=Math.max(Ln-(Number.isFinite(g)?g:0),0),v=async w=>{w.preventDefault();const S=Number.isFinite(g)&&g>0?g:0;if(!S){l("Enter how many paid leave days you can dedicate to optimization.");return}if(!f.length){l("No bank holidays configured for this country yet.");return}if(!p){l("Missing Object Maker base URL for /obj requests.");return}o(!0),l(""),u(null);try{const C=o2({countryLabel:h.label,daysToOptimize:S,holidays:f,locale:h.locale}),{payload:k}=await ca({baseUrl:p,structure:n2,objectType:fd,prompt:C,strict:!0,model:m});u(k)}catch(C){l(C?.message||"BHP request failed")}finally{o(!1)}};return c.jsxs("div",{className:"space-y-12",children:[c.jsxs("section",{className:"relative overflow-hidden rounded-[2.75rem] bg-gradient-to-br from-emerald-600 via-cyan-600 to-teal-600 px-8 py-10 text-emerald-50 shadow-xl",children:[c.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.18),_transparent_55%)]","aria-hidden":!0}),c.jsxs("div",{className:"relative z-10 grid gap-8 lg:grid-cols-[minmax(0,3fr)_minmax(0,2fr)] lg:items-center",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-emerald-100/80",children:"BHP Â· Bank Holiday Planner"}),c.jsx("h1",{className:"text-3xl font-semibold sm:text-4xl",children:"Turn bank holidays into maxed-out vacations."}),c.jsxs("p",{className:"text-base leading-relaxed text-emerald-50/90",children:["Choose a supported country, enter the paid leave you can flex, and BHP calls the",c.jsx("code",{className:"mx-1 rounded bg-emerald-950/60 px-1 py-0.5 text-[0.7rem] font-semibold text-emerald-100",children:"/obj"}),"route with a strict schema. The response maps out PTO requests that weave weekends and bank holidays into long, continuous breaksâ€”and shows how that beats random scheduling."]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm text-emerald-100/90",children:[c.jsx("span",{className:"inline-flex items-center gap-2 rounded-full bg-emerald-950/30 px-3 py-1 text-xs font-semibold uppercase tracking-wide",children:"USA Â· UK Â· FR Â· ES Â· IT"}),c.jsx(Oe,{to:"/",className:"inline-flex items-center gap-2 rounded-full bg-emerald-50/10 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-emerald-50 transition hover:bg-emerald-50/20",children:"â† Back to overview"})]})]}),c.jsxs("div",{className:"hidden relative min-h-[160px] overflow-hidden rounded-3xl border border-emerald-200/40 bg-white/10 p-4 shadow-lg backdrop-blur-sm lg:flex lg:items-center lg:justify-center",children:[c.jsx("div",{className:"pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.28),_transparent_65%)]","aria-hidden":!0}),c.jsx("div",{className:"relative z-10 w-full",children:c.jsx(pd,{year:x,holidays:f,recommendations:d?.recommendations})})]})]})]}),c.jsxs("section",{className:"space-y-6",children:[c.jsxs("form",{onSubmit:v,className:"grid gap-6 rounded-3xl border border-emerald-500/30 bg-white/80 p-6 shadow-sm backdrop-blur dark:border-emerald-500/40 dark:bg-slate-900/70 md:grid-cols-2",children:[c.jsxs("label",{className:"flex flex-col gap-2",children:[c.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-emerald-700 dark:text-emerald-200",children:"Country"}),c.jsx("select",{value:t,onChange:w=>r(w.target.value),className:"rounded-2xl border border-emerald-400/60 bg-white px-3 py-2 text-sm text-slate-800 shadow-sm transition focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/40 dark:border-emerald-500/40 dark:bg-slate-950 dark:text-slate-100",children:Ca.map(w=>c.jsx("option",{value:w.id,children:w.label},w.id))})]}),c.jsxs("label",{className:"flex flex-col gap-2",children:[c.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-emerald-700 dark:text-emerald-200",children:"Days to optimize"}),c.jsx("input",{type:"number",min:"1",max:Ln,value:n,onChange:w=>a(w.target.value),className:"rounded-2xl border border-emerald-400/60 bg-white px-3 py-2 text-sm text-slate-800 shadow-sm transition focus:border-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/40 dark:border-emerald-500/40 dark:bg-slate-950 dark:text-slate-100"}),c.jsx("span",{className:"text-xs text-emerald-700/80 dark:text-emerald-200/80",children:y>0?`${y} of your ${Ln} paid leave days are already reserved for other plans.`:"All paid leave days are available for optimization."})]}),c.jsxs("div",{className:"md:col-span-2 flex flex-wrap items-center justify-between gap-3 text-xs text-emerald-700 dark:text-emerald-200",children:[c.jsxs("span",{children:["BHP will request ",c.jsx("strong",{children:g||0})," paid leave days via the",c.jsx("code",{className:"mx-1 rounded bg-emerald-500/10 px-1 py-0.5 text-[0.65rem] font-semibold text-emerald-800 dark:bg-emerald-500/20 dark:text-emerald-100",children:"/obj"}),"endpoint using ",m?c.jsx("span",{className:"font-medium",children:m}):"the configured model","."]}),c.jsx("button",{type:"submit",disabled:i,className:"inline-flex items-center gap-2 rounded-full bg-gradient-to-r from-emerald-400 via-cyan-400 to-teal-400 px-5 py-2 text-sm font-semibold text-emerald-950 shadow transition hover:shadow-md focus:outline-none focus-visible:ring-2 focus-visible:ring-emerald-300 disabled:cursor-not-allowed disabled:opacity-60",children:i?"Planningâ€¦":"Run planner"})]})]}),s&&c.jsx("div",{className:"rounded-2xl border border-rose-300 bg-rose-50 px-4 py-3 text-sm text-rose-600 dark:border-rose-500/40 dark:bg-rose-500/10 dark:text-rose-200",children:s})]}),c.jsxs("section",{className:"space-y-4",children:[c.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Bank holidays considered"}),c.jsx(s2,{holidays:f,locale:h.locale})]}),c.jsxs("section",{className:"space-y-4",children:[c.jsxs("header",{className:"space-y-2",children:[c.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Optimization output"}),c.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:["Once the ",fd," response lands, you will see suggested PTO placements, the total days unlocked, and how that compares to random scheduling."]})]}),i&&c.jsx("div",{className:"rounded-3xl border border-emerald-500/30 bg-white/80 px-4 py-6 text-center text-sm text-emerald-800 shadow-sm dark:border-emerald-500/40 dark:bg-slate-900/70 dark:text-emerald-200",children:"Crunching possibilities with BHPâ€¦"}),!i&&d&&c.jsxs("div",{className:"space-y-6",children:[d.requestSummary&&c.jsxs("div",{className:"rounded-3xl border border-emerald-500/30 bg-white/80 p-5 shadow-sm dark:border-emerald-500/40 dark:bg-slate-900/70",children:[c.jsx("div",{className:"text-xs uppercase tracking-wide text-emerald-700 dark:text-emerald-200",children:"Request summary"}),c.jsxs("dl",{className:"mt-3 grid gap-3 text-sm text-slate-600 dark:text-slate-300 sm:grid-cols-2",children:[c.jsxs("div",{children:[c.jsx("dt",{className:"font-medium text-slate-700 dark:text-slate-200",children:"Country"}),c.jsx("dd",{children:d.requestSummary.country})]}),c.jsxs("div",{children:[c.jsx("dt",{className:"font-medium text-slate-700 dark:text-slate-200",children:"Days reserved elsewhere"}),c.jsx("dd",{children:d.requestSummary.daysReservedForOtherPlans})]}),c.jsxs("div",{children:[c.jsx("dt",{className:"font-medium text-slate-700 dark:text-slate-200",children:"Days to optimize"}),c.jsx("dd",{children:d.requestSummary.daysAvailableForOptimization})]}),c.jsxs("div",{children:[c.jsx("dt",{className:"font-medium text-slate-700 dark:text-slate-200",children:"Bank holidays considered"}),c.jsx("dd",{children:d.requestSummary.totalBankHolidaysConsidered})]})]})]}),c.jsx("div",{className:"lg:hidden",children:c.jsx(pd,{year:x,holidays:f,recommendations:d.recommendations})}),c.jsx(c2,{recommendations:d.recommendations}),c.jsx(d2,{comparison:d.comparison})]}),!i&&!d&&!s&&c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Provide your constraints above and run the planner to surface optimized vacation blocks."})]})]})}const h2=[{value:"all",label:"All news"},{value:"good",label:"Good only"},{value:"bad",label:"Bad only"}];function f2({filter:e,onFilterChange:t}){return c.jsxs("div",{className:"flex flex-col gap-3 p-4",children:[c.jsx("h2",{className:"text-lg font-semibold",children:"News Headlines by Category"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:h2.map(r=>{const n=e===r.value;return c.jsx("button",{type:"button",onClick:()=>t(r.value),className:`rounded-full border px-3 py-1 text-sm transition-colors duration-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 ${n?"border-blue-500 bg-blue-500 text-white shadow-sm focus-visible:ring-blue-500":"border-slate-300 bg-white text-slate-600 hover:border-blue-400 hover:text-blue-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-200 dark:hover:border-blue-400"}`,children:r.label},r.value)})})]})}const i0={top:"Top Stories",world:"World",us:"US",business:"Business",technology:"Technology",politics:"Politics",health:"Health",entertainment:"Entertainment",travel:"Travel"},Mn=Object.keys(i0),oi=[{id:"openai/gpt-oss-20b",label:"GPT-OSS 20B",dotClass:"bg-emerald-500"},{id:"openai/gpt-oss-120b",label:"GPT-OSS 120B",dotClass:"bg-indigo-500"},{id:"moonshotai/kimi-k2-instruct-0905",label:"Kimi K2 Instruct",dotClass:"bg-amber-500"},{id:"meta-llama/llama-4-maverick-17b-128e-instruct",label:"Llama 4 Maverick",dotClass:"bg-rose-500"},{id:"meta-llama/llama-4-scout-17b-16e-instruct",label:"Llama 4 Scout",dotClass:"bg-cyan-500"}];function p2(e){return e&&oi.find(t=>t.id===e)||null}function m2(e,t,r){return t.reduce((n,a,i)=>{const o=r?.[`${e}-${i}`];return o&&(o.status==="pending"&&(n.hasPending=!0),o.status==="complete"&&(n.hasComplete=!0),o.status==="error"&&(n.hasError=!0)),n},{hasPending:!1,hasComplete:!1,hasError:!1})}function g2(e,t){return e==="all"?!0:!t||!t.sentiment?!1:t.sentiment===e}function x2(e){return e==="good"?"bg-emerald-50 dark:bg-emerald-900/30 border border-emerald-200 dark:border-emerald-500/40":e==="bad"?"bg-rose-50 dark:bg-rose-900/30 border border-rose-200 dark:border-rose-500/40":"bg-white dark:bg-slate-800 border border-transparent"}function v2({news:e,loading:t,classifications:r,filter:n,activationCounts:a,onActivateCategory:i,onActivateAllCategories:o}){if(t)return c.jsx("div",{className:"p-4 text-center",children:"Loading news..."});const s=Mn.filter(d=>(e[d]||[]).length>0),l=s.every(d=>(a?.[d]||0)>0);return c.jsxs("div",{className:"space-y-16",children:[c.jsx("section",{className:"rounded-3xl border border-slate-200 bg-white/80 p-6 shadow-sm backdrop-blur dark:border-slate-700 dark:bg-slate-900/60",children:c.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("h2",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100",children:"How classification unfolds"}),c.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:["The top news section autoloads so you get an instant pulse, while the rest wait for you to tap"," ",c.jsx("span",{className:"mx-1 rounded-full bg-slate-200 px-2 py-0.5 text-xs uppercase tracking-wide text-slate-700 dark:bg-slate-700 dark:text-slate-200",children:"Classify"})," ","when you're ready."]}),c.jsx("p",{className:"text-xs italic text-slate-500 dark:text-slate-400",children:"Curious note: our Groq API hummingbird spooks easilyâ€”hammering the auto-load can bump into rate limits."})]}),c.jsx("div",{className:"shrink-0",children:c.jsx("button",{type:"button",onClick:()=>{!l&&o&&o()},disabled:!s.length||l,className:`inline-flex items-center gap-2 rounded-full border border-blue-500 bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow-sm transition-all hover:bg-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 dark:border-blue-400 dark:bg-blue-500 dark:hover:bg-blue-400 ${!s.length||l?"cursor-not-allowed opacity-60 hover:bg-blue-600 dark:hover:bg-blue-500":""}`,children:"Autoload everything"})})]})}),c.jsxs("section",{"aria-label":"Model legend",className:"space-y-3",children:[c.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-gray-500 dark:text-slate-400",children:"Model legend"}),c.jsx("div",{className:"flex flex-wrap items-center gap-4",children:oi.map(d=>c.jsxs("span",{className:"inline-flex items-center gap-2 text-sm text-gray-600 dark:text-slate-300",children:[c.jsx("span",{className:`h-3 w-3 rounded-full ${d.dotClass}`,"aria-hidden":"true"}),c.jsx("span",{children:d.label})]},d.id))})]}),Mn.map(d=>{const u=(e[d]||[]).slice(0,10);if(!u.length)return null;const{hasPending:h,hasComplete:f,hasError:p}=m2(d,u,r),g=(a?.[d]||0)>0;let x="Classify",y=!u.length;return g&&(h?(x="Classifyingâ€¦",y=!0):p?(x="Retry classification",y=!1):f?(x="Classified",y=!0):(x="Classify",y=!u.length)),c.jsxs("section",{children:[c.jsxs("div",{className:"relative mb-8",children:[c.jsx("div",{className:"absolute inset-0 flex items-center","aria-hidden":"true",children:c.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),c.jsx("div",{className:"relative flex justify-center",children:c.jsx("span",{className:"bg-white dark:bg-slate-900 px-4 text-2xl font-serif text-gray-500 dark:text-gray-400",children:i0[d]})})]}),c.jsx("div",{className:"mb-6 flex justify-end",children:c.jsx("button",{type:"button",onClick:()=>{!y&&i&&i(d)},disabled:y,className:`inline-flex items-center gap-2 rounded-full border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-600 shadow-sm transition-colors hover:border-slate-400 hover:text-slate-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:border-slate-600 dark:bg-slate-800 dark:text-slate-200 dark:hover:border-slate-500 dark:hover:text-white ${y?"cursor-not-allowed opacity-60 hover:border-slate-300 hover:text-slate-600 dark:hover:border-slate-600 dark:hover:text-slate-200":""}`,children:x})}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:u.map((v,w)=>{const S=`${d}-${w}`,C=r?.[S];if(!g2(n,C))return null;const k=x2(C?.sentiment),A=p2(C?.modelId);return c.jsx("article",{className:`rounded-lg shadow-lg overflow-hidden transform hover:-translate-y-1 transition-transform duration-300 ${k}`,children:c.jsxs("div",{className:"p-6",children:[c.jsx("a",{href:v.link,target:"_blank",rel:"noopener noreferrer",className:"text-2xl font-serif text-gray-800 dark:text-slate-100 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-300",children:v.title.replace(/Fixture:/g,"")}),c.jsxs("div",{className:"mt-3 text-sm text-gray-500 dark:text-slate-400",children:[new Date(v.publishedAt).toLocaleString()," â€¢ ",v.sourceTitle]}),c.jsxs("div",{className:"mt-3 flex items-center gap-3 text-sm",children:[c.jsx("span",{className:"inline-flex items-center rounded-full bg-slate-100 px-2 py-1 text-xs font-medium uppercase tracking-wide text-slate-600 dark:bg-slate-700 dark:text-slate-200",children:C?.sentiment?`${C.sentiment} news`:C?.status==="pending"?"classifyingâ€¦":"not classified"}),A&&c.jsxs("span",{className:"inline-flex items-center gap-2 text-xs text-gray-500 dark:text-slate-400",children:[c.jsx("span",{className:`h-2.5 w-2.5 rounded-full ${A.dotClass}`,"aria-hidden":"true"}),c.jsx("span",{children:A.label})]}),C?.status==="error"&&c.jsx("span",{className:"text-xs text-rose-500",children:"Classification failed"})]}),c.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[v.sourceTitle&&c.jsx("span",{className:"badge bg-gray-100 dark:bg-slate-700 text-gray-600 dark:text-slate-300 border-gray-200 dark:border-slate-600",children:v.sourceTitle}),v.link&&c.jsx("span",{className:"badge bg-gray-100 dark:bg-slate-700 text-gray-600 dark:text-slate-300 border-gray-200 dark:border-slate-600",children:new URL(v.link).hostname.replace(/^www\./,"")})]}),v.description&&c.jsx("p",{className:"mt-4 text-gray-600 dark:text-slate-300",dangerouslySetInnerHTML:{__html:v.description}})]})},w)})})]},d)})]})}const y2="https://groq-endpoint.louispaulet13.workers.dev/",b2={type:"object",additionalProperties:!1,properties:{sentiment:{type:"string",enum:["good","bad"]}},required:["sentiment"]};function w2(e){const t=["Please classify the following news article while adhering the schema:","",`Title: ${e.title||"N/A"}`];return e.description&&t.push(`Description: ${e.description}`),e.sourceTitle&&t.push(`Source: ${e.sourceTitle}`),e.publishedAt&&t.push(`Published At: ${e.publishedAt}`),e.content&&t.push(`Content: ${e.content}`),t.join(`
`)}function _2(){const e=Mi("newsanalyzer"),[t,r]=b.useState({}),[n,a]=b.useState(!0),[i,o]=b.useState("all"),[s,l]=b.useState({}),[d,u]=b.useState({}),h=b.useRef(s),f=b.useRef([]),p=b.useRef(!1),m=b.useRef(0),g=b.useRef(!0),x=b.useRef(null);b.useEffect(()=>{h.current=s},[s]),b.useEffect(()=>(g.current=!0,()=>{g.current=!1,x.current&&(clearTimeout(x.current),x.current=null)}),[]);const y=b.useCallback(()=>{if(!g.current||p.current)return;const C=f.current.shift();if(!C)return;p.current=!0;const{category:k,index:A,item:N}=C,B=`${k}-${A}`,E=oi.length,I=E?oi[m.current%E]:null;E&&(m.current=(m.current+1)%E),(async()=>{try{const{payload:F}=await ca({structure:b2,prompt:w2(N),strict:!0,model:I?.id}),V=typeof F?.sentiment=="string"?F.sentiment.toLowerCase():null,M=V==="good"||V==="bad"?V:null;g.current&&l(L=>{const R=L[B]?.status,U=M?"complete":"error";return M&&R!=="complete"&&Sb(),{...L,[B]:{...L[B]||{},sentiment:M,status:U,modelId:I?.id||null,modelLabel:I?.label||null,error:M?null:L[B]?.error||null}}})}catch(F){console.error("Failed to classify article",F),g.current&&l(V=>({...V,[B]:{...V[B]||{},sentiment:null,status:"error",modelId:I?.id||null,modelLabel:I?.label||null,error:F?.message||"Classification failed"}}))}finally{p.current=!1,x.current&&clearTimeout(x.current),g.current&&(x.current=setTimeout(()=>{x.current=null,y()},1e3))}})()},[]);b.useEffect(()=>{let C=!1;return(async()=>{a(!0);const A={};if(await Promise.all(Mn.map(async B=>{try{const E=`${y2}news/${B}`,F=await(await fetch(E,{headers:{Accept:"application/json"}})).json();A[B]=(F?.items||[]).slice(0,10)}catch(E){console.error(`Failed to fetch news for category: ${B}`,E),A[B]=[]}})),C||!g.current)return;f.current=[],p.current=!1,x.current&&(clearTimeout(x.current),x.current=null),l({}),h.current={};const N=Mn[0];u(N?{[N]:1}:{}),r(A),a(!1)})(),()=>{C=!0}},[]);const v=b.useCallback(C=>{const k=t[C]||[];if(!k.length)return;const A=[],N={};k.forEach((B,E)=>{const I=`${C}-${E}`,F=h.current[I];F?.status==="complete"||F?.status==="pending"||(A.push({category:C,index:E,item:B}),N[I]={sentiment:null,status:"pending",modelId:null,modelLabel:null,error:null})}),A.length&&(l(B=>({...B,...N})),f.current.push(...A),y())},[t,y]);b.useEffect(()=>{n||Object.keys(t).length&&Object.entries(d).forEach(([C,k])=>{k>0&&v(C)})},[d,v,n,t]);const w=b.useCallback(C=>{u(k=>({...k,[C]:(k[C]||0)+1}))},[]),S=b.useCallback(()=>{u(C=>{const k={...C};return Mn.forEach(A=>{(t[A]||[]).length&&(k[A]=(k[A]||0)+1)}),k})},[t]);return c.jsx(gt,{experience:e,navigation:c.jsx(f2,{filter:i,onFilterChange:o}),children:c.jsx(v2,{news:t,loading:n,classifications:s,filter:i,activationCounts:d,onActivateCategory:w,onActivateAllCategories:S})})}const Fa=Mi("sixdegrees"),C2=Fa?.systemPrompt||["You are a playful parody writer. When given any text you respond with a witty parody of it.","Keep responses concise (2-4 sentences) and ensure they clearly riff on the original idea.","Match the length of the original message as closely as possibleâ€”no more than about 20% longer than the user's input.","Avoid quoting the original verbatim; reshape it with humor and creative twists."].join(" ");function S2(e){return new Promise(t=>{setTimeout(t,e)})}function A2(){const[e,t]=b.useState(""),[r,n]=b.useState(""),[a,i]=b.useState([]),[o,s]=b.useState(0),[l,d]=b.useState(!1),u=b.useMemo(()=>e.trim().length>0&&!l,[e,l]);async function h(f){if(f.preventDefault(),!Fa){n("Unable to load the Six Degrees experience configuration.");return}const p=e.trim();if(!p){n("Please provide a sentence to parody.");return}d(!0),n(""),s(0),i([{label:"Original spark",content:p}]);let m=p;for(let g=1;g<=6;g+=1){s(g);try{m=(await la(Fa,[{role:"system",content:C2},{role:"user",content:m}],{model:Fa.defaultModel})).content.trim(),i(y=>[...y,{label:`Degree ${g}`,content:m}])}catch(x){console.error(x),n(x?.message||"Something went wrong while generating the parody.");break}g<6&&await S2(1e3)}d(!1),s(0)}return c.jsxs("div",{className:"space-y-10",children:[c.jsx("header",{className:"space-y-4 rounded-3xl bg-gradient-to-br from-fuchsia-500 via-purple-500 to-purple-700 p-[1px]",children:c.jsxs("div",{className:"rounded-[calc(1.5rem-1px)] bg-white/95 p-8 shadow-sm dark:bg-slate-900/90",children:[c.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-fuchsia-500",children:"Remix Lab"}),c.jsx("h1",{className:"text-3xl font-semibold text-slate-900 dark:text-slate-100",children:"Six Degrees Of Parody"}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Start with a sentence and watch Groq parody it six times in a row. Each degree only sees the previous punchline, so the humor evolves right in front of you."}),c.jsxs("form",{className:"mt-6 space-y-4",onSubmit:h,children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",htmlFor:"six-degree-input",children:"Enter your seed sentence"}),c.jsx("textarea",{id:"six-degree-input",className:"w-full rounded-2xl border border-slate-300 bg-white/90 p-4 text-sm text-slate-800 shadow-sm transition focus:border-fuchsia-500 focus:outline-none focus:ring-2 focus:ring-fuchsia-500/30 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-100",rows:3,value:e,onChange:f=>t(f.target.value),placeholder:"Example: Our office coffee machine just became self-aware.",disabled:l}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[c.jsx("button",{type:"submit",disabled:!u,className:"inline-flex items-center gap-2 rounded-full bg-gradient-to-r from-fuchsia-500 to-purple-600 px-5 py-2 text-sm font-semibold text-white shadow transition disabled:cursor-not-allowed disabled:opacity-60",children:l?"Remixingâ€¦":"Run six degrees"}),c.jsx("button",{type:"button",onClick:()=>{t(""),i([]),n(""),s(0)},className:"inline-flex items-center rounded-full border border-slate-300 px-4 py-2 text-sm font-medium text-slate-600 transition hover:border-fuchsia-500 hover:text-fuchsia-600 dark:border-slate-700 dark:text-slate-300 dark:hover:border-fuchsia-500 dark:hover:text-fuchsia-400",disabled:l&&a.length<=1,children:"Reset"}),l&&c.jsxs("span",{className:"text-xs font-medium uppercase tracking-wide text-fuchsia-600 dark:text-fuchsia-400",children:["Generating degree ",o," of 6â€¦"]})]}),r&&c.jsx("p",{className:"text-sm text-rose-600 dark:text-rose-400",children:r})]})]})}),!!a.length&&c.jsxs("section",{className:"space-y-6",children:[c.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Evolution timeline"}),c.jsx("ol",{className:"space-y-4",children:a.map((f,p)=>c.jsxs("li",{className:"relative overflow-hidden rounded-3xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900",children:[c.jsxs("div",{className:"flex items-start justify-between gap-3",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-xs uppercase tracking-wider text-fuchsia-500 dark:text-fuchsia-300",children:f.label}),c.jsx("p",{className:"mt-2 whitespace-pre-wrap text-sm text-slate-700 dark:text-slate-200",children:f.content})]}),c.jsx("span",{className:"text-xs font-semibold text-slate-400",children:String(p).padStart(2,"0")})]}),p===a.length-1&&l&&p<6&&c.jsx("div",{className:"absolute inset-x-0 bottom-0 h-1 bg-gradient-to-r from-fuchsia-400 via-purple-500 to-purple-700 animate-pulse"})]},`${f.label}-${p}`))})]})]})}const Pn="allin_flux_image_history",k2=3600*24*30;function o0(e){if(!e)return null;const t=typeof e.url=="string"?e.url.trim():"";if(!t)return null;const r=typeof e.prompt=="string"?e.prompt:"",n=typeof e.timestamp=="number"&&Number.isFinite(e.timestamp)?e.timestamp:Date.now();return{url:t,prompt:r,timestamp:n}}function s0(){const e=zi(Pn);if(!e)return[];try{const t=JSON.parse(e);return Array.isArray(t)?t.map(o0).filter(Boolean):[]}catch{return[]}}function E2(e){if(!Array.isArray(e)||e.length===0){vt(Pn);return}const t=e.map(o0).filter(Boolean);if(t.length===0){vt(Pn);return}Hi(Pn,t,{maxAgeSeconds:k2})}function l0(){vt(Pn)}const N2=Number.POSITIVE_INFINITY;function T2(e){const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"})}function I2({entry:e,onSelect:t}){return c.jsxs("button",{type:"button",onClick:()=>t(e),className:"flex flex-col items-start gap-1 rounded-xl border border-slate-200 bg-white/70 p-3 text-left shadow-sm transition hover:border-brand-400 hover:bg-brand-50/70 dark:border-slate-700 dark:bg-slate-900/60 dark:hover:border-brand-300",children:[c.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:e.prompt||"Saved image"}),e.timestamp?c.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:T2(e.timestamp)}):null]})}function O2({experience:e}){const[t,r]=b.useState("train speeding through a neon cyberpunk tunnel"),[n,a]=b.useState(!1),[i,o]=b.useState(""),[s,l]=b.useState(null),[d,u]=b.useState([]);b.useEffect(()=>{u(s0())},[]);const h=e?.imageApiBaseUrl||"https://groq-endpoint.louispaulet13.workers.dev";async function f(g){g.preventDefault();const x=t.trim();if(!x){o("Please provide a prompt before generating an image.");return}a(!0),o("");try{const y=new URL(`${h.replace(/\/$/,"")}/flux/${encodeURIComponent(x)}`),v=await fetch(y.toString());if(!v.ok)throw new Error(`Generation failed with status ${v.status}`);const w=await v.json(),S=Array.isArray(w?.images)?w.images:[];if(S.length===0||!S[0]?.url)throw new Error("The service did not return an image URL.");const C=typeof w.prompt=="string"&&w.prompt.trim()?w.prompt.trim():x,k={prompt:C,images:S.map((I,F)=>({url:I?.url||"",index:typeof I?.index=="number"?I.index:F})),raw:w};l(k);const A=Date.now(),N=k.images.filter(I=>I?.url).map((I,F)=>({prompt:C,url:I.url,timestamp:A+F})),B=d.filter(I=>!N.some(F=>F.url===I.url)),E=[...N,...B].slice(0,N2);u(E),E2(E)}catch(y){o(y instanceof Error?y.message:"Unexpected error during generation.")}finally{a(!1)}}function p(g){g?.url&&(r(g.prompt||""),l({prompt:g.prompt,images:[{url:g.url,index:0}],raw:null}))}function m(){l0(),u([])}return c.jsx("div",{className:"space-y-8",children:c.jsxs("section",{className:"grid gap-8 lg:grid-cols-[1.1fr_0.9fr]",children:[c.jsxs("form",{onSubmit:f,className:"space-y-6 rounded-2xl border border-slate-200 bg-white/80 p-6 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"imagegen-prompt",className:"flex items-center justify-between text-sm font-medium text-slate-700 dark:text-slate-200",children:["Image prompt",c.jsx("span",{className:"text-xs font-normal text-slate-400 dark:text-slate-500",children:"Flux @ Groq endpoint"})]}),c.jsx("textarea",{id:"imagegen-prompt",value:t,onChange:g=>r(g.target.value),rows:4,className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-3 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/50 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100",placeholder:"Describe the image you want to see..."}),c.jsxs("p",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:["The request is sent to ",c.jsx("code",{className:"rounded bg-slate-100 px-1 py-0.5 text-[0.7rem] text-slate-700 dark:bg-slate-800 dark:text-slate-200",children:`${h}/flux/<prompt>`}),". We'll display the first image from the response."]})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[c.jsxs("button",{type:"submit",disabled:n,className:"inline-flex items-center gap-2 rounded-full bg-brand-600 px-5 py-2.5 text-sm font-medium text-white shadow transition hover:bg-brand-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500/40 focus-visible:ring-offset-2 focus-visible:ring-offset-white disabled:cursor-not-allowed disabled:bg-brand-400 dark:focus-visible:ring-offset-slate-900",children:[c.jsx(Zr,{className:`h-5 w-5 ${n?"animate-spin":""}`}),n?"Generatingâ€¦":"Generate image"]}),c.jsx(Oe,{to:"/imagegen/gallery",className:"inline-flex items-center gap-2 rounded-full border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-600 shadow-sm transition hover:border-brand-400 hover:text-brand-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-400/40 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:border-slate-600 dark:bg-slate-900 dark:text-slate-200",children:"View gallery"}),d.length>0?c.jsxs("button",{type:"button",onClick:m,className:"inline-flex items-center gap-2 rounded-full border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-600 shadow-sm transition hover:border-red-400 hover:text-red-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-400/30 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:border-slate-600 dark:bg-slate-900 dark:text-slate-200 dark:hover:border-red-400 dark:hover:text-red-300 dark:focus-visible:ring-offset-slate-900",children:[c.jsx(dn,{className:"h-4 w-4"}),"Clear saved images"]}):null]}),i?c.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700 dark:border-red-800 dark:bg-red-900/40 dark:text-red-200",children:i}):null]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white/80 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[c.jsx("div",{className:"border-b border-slate-200 bg-slate-50 px-4 py-3 text-sm font-semibold text-slate-600 dark:border-slate-700 dark:bg-slate-900/80 dark:text-slate-200",children:"Latest result"}),c.jsx("div",{className:"flex flex-col gap-4 p-4",children:s?c.jsxs(c.Fragment,{children:[c.jsx("div",{children:c.jsx("h3",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:s.prompt})}),c.jsx("div",{className:"relative overflow-hidden rounded-xl border border-slate-200 bg-slate-100 dark:border-slate-700 dark:bg-slate-800",children:c.jsx("img",{src:s.images[0].url,alt:s.prompt,className:"h-full w-full object-cover",loading:"lazy"})}),c.jsx("a",{href:s.images[0].url,target:"_blank",rel:"noreferrer",className:"inline-flex w-fit items-center gap-2 rounded-full border border-slate-300 bg-white px-4 py-2 text-xs font-medium text-slate-600 transition hover:border-brand-400 hover:text-brand-600 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-200",children:"Open image in new tab"})]}):c.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Submit a prompt to generate your first image. Your results will appear here."})})]}),c.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white/80 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[c.jsx("div",{className:"border-b border-slate-200 bg-slate-50 px-4 py-3 text-sm font-semibold text-slate-600 dark:border-slate-700 dark:bg-slate-900/80 dark:text-slate-200",children:"Saved images (browser cookie)"}),c.jsx("div",{className:"grid gap-3 p-4 sm:grid-cols-2",children:d.length===0?c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Generate an image to automatically store the image URL, prompt, and timestamp in a browser cookie for quick acce ss."}):d.map(g=>c.jsx(I2,{entry:g,onSelect:p},`${g.url}-${g.timestamp}`))})]})]})]})})}const Sn=12;function B2(){const[e,t]=b.useState([]),[r,n]=b.useState(Sn),a=b.useRef(null),i=b.useCallback(()=>{t(s0())},[]);b.useEffect(()=>{i()},[i]),b.useEffect(()=>{n(u=>{if(e.length===0)return Sn;const h=Math.max(Sn,u);return Math.min(h,e.length)})},[e.length]),b.useEffect(()=>{if(typeof window>"u")return;const u=()=>i();window.addEventListener("focus",u);let h;return typeof document<"u"&&(h=()=>{document.visibilityState==="visible"&&i()},document.addEventListener("visibilitychange",h)),()=>{window.removeEventListener("focus",u),h&&typeof document<"u"&&document.removeEventListener("visibilitychange",h)}},[i]),b.useEffect(()=>{const u=a.current;if(!u)return;if(typeof window>"u"||!("IntersectionObserver"in window)){n(e.length);return}const h=new IntersectionObserver(f=>{f.forEach(p=>{p.isIntersecting&&n(m=>Math.min(m+Sn,e.length))})});return h.observe(u),()=>{h.disconnect()}},[e.length]);const o=b.useMemo(()=>e.slice(0,r),[e,r]),s=e.length>0,l=r<e.length;function d(){l0(),t([]),n(Sn)}return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-xl font-semibold text-slate-800 dark:text-slate-100",children:"Saved image gallery"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Browse every image saved to your browser cookie. Scroll to load more or refresh after generating new art."})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[c.jsx(Oe,{to:"/imagegen",className:"inline-flex items-center gap-2 rounded-full border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-600 shadow-sm transition hover:border-brand-400 hover:text-brand-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-400/40 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:border-slate-600 dark:bg-slate-900 dark:text-slate-200",children:"Back to generator"}),c.jsx("button",{type:"button",onClick:i,className:"inline-flex items-center gap-2 rounded-full border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-600 shadow-sm transition hover:border-sky-400 hover:text-sky-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-400/40 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:border-slate-600 dark:bg-slate-900 dark:text-slate-200",children:"Refresh"}),s?c.jsx("button",{type:"button",onClick:d,className:"inline-flex items-center gap-2 rounded-full border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-600 shadow-sm transition hover:border-red-400 hover:text-red-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-400/30 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:border-slate-600 dark:bg-slate-900 dark:text-slate-200",children:"Clear all"}):null]})]}),s?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:o.map(u=>c.jsxs("article",{className:"flex flex-col overflow-hidden rounded-2xl border border-slate-200 bg-white/80 shadow-sm transition hover:-translate-y-0.5 hover:border-sky-300 dark:border-slate-700 dark:bg-slate-900/60",children:[c.jsx("div",{className:"relative aspect-square w-full overflow-hidden bg-slate-100 dark:bg-slate-800",children:c.jsx("img",{src:u.url,alt:u.prompt||"Generated image",className:"h-full w-full object-cover",loading:"lazy"})}),c.jsxs("div",{className:"space-y-2 p-4",children:[c.jsx("h2",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:u.prompt||"Saved image"}),u.timestamp?c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:new Date(u.timestamp).toLocaleString()}):null,c.jsx("a",{href:u.url,target:"_blank",rel:"noreferrer",className:"inline-flex w-fit items-center gap-2 rounded-full border border-slate-300 bg-white px-4 py-1.5 text-xs font-medium text-slate-600 transition hover:border-sky-400 hover:text-sky-600 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-200",children:"Open original"})]})]},`${u.url}-${u.timestamp}`))}),c.jsx("div",{ref:a,className:"h-8 w-full","aria-hidden":!0}),l?null:c.jsx("p",{className:"text-center text-sm text-slate-500 dark:text-slate-400",children:"You've reached the end of your saved images."})]}):c.jsx("div",{className:"rounded-2xl border border-dashed border-slate-300 bg-white/60 p-10 text-center text-sm text-slate-500 dark:border-slate-700 dark:bg-slate-900/40 dark:text-slate-400",children:"No saved images yet. Generate something new and it will appear here automatically."})]})}const Aa=12,ka=70,gd=30,xd=54,vd=80,yd=1e3,j2=260,D2=20;function Bo(e,t,r){return Number.isFinite(e)?Math.min(Math.max(e,t),r):t}function R2(e){return Number.isFinite(e)?e<1e3?`${e} ms`:`${(e/1e3).toFixed(1)} s`:""}function L2(){const[e,t]=b.useState(gd),[r,n]=b.useState(xd),[a,i]=b.useState(j2),[o,s]=b.useState(!0),[l,d]=b.useState(0),[u,h]=b.useState(()=>Za(Jt[0],gd,xd)),[f,p]=b.useState(0);b.useEffect(()=>{h(Za(Jt[l],e,r)),p(0)},[r,l,e]),b.useEffect(()=>{if(!o)return;const A=window.setInterval(()=>{h(N=>Ko(N)),p(N=>N+1)},a);return()=>window.clearInterval(A)},[o,a]);const m=Jt[l],g=b.useMemo(()=>Tm(u),[u]),x=e*r,y=x>0?(g/x*100).toFixed(1):"0.0";function v(A){const N=Bo(A.target.valueAsNumber,Aa,ka);t(N)}function w(A){const N=Bo(A.target.valueAsNumber,Aa,ka);n(N)}function S(A){const N=Bo(A.target.valueAsNumber,vd,yd);i(N)}function C(){s(A=>!A)}function k(){h(A=>Ko(A)),p(A=>A+1)}return c.jsxs("div",{className:"space-y-10",children:[c.jsxs("header",{className:"relative overflow-hidden rounded-[2.75rem] border border-slate-200 bg-slate-950 px-6 py-10 text-white shadow-xl dark:border-slate-700 sm:px-10",children:[c.jsx("div",{className:"pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(56,189,248,0.28),_transparent_60%)]","aria-hidden":!0}),c.jsxs("div",{className:"relative z-10 space-y-5",children:[c.jsx("p",{className:"inline-flex items-center gap-2 rounded-full bg-white/10 px-4 py-1 text-xs font-semibold uppercase tracking-[0.35em] text-sky-200",children:"ðŸ§ª Game of Life Lab"}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h1",{className:"text-3xl font-semibold sm:text-4xl",children:"Design your own cellular automata experiments"}),c.jsx("p",{className:"max-w-2xl text-sm text-slate-200",children:"Conway's Game of Life unfolds on an infinite grid where simple rules generate surprising patterns. Dial in a preset, resize the toroidal stage, and control the simulation speed to watch oscillators, spaceships, and glider guns behave under different conditions."})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs uppercase tracking-[0.35em] text-slate-300",children:[c.jsx("span",{className:"rounded-full border border-white/15 px-3 py-1 font-semibold",children:"Toroidal wrap"}),c.jsx("span",{className:"rounded-full border border-white/15 px-3 py-1 font-semibold",children:"Live controls"}),c.jsx("span",{className:"rounded-full border border-white/15 px-3 py-1 font-semibold",children:"Preset seeds"})]}),c.jsxs(Oe,{to:"/",className:"inline-flex items-center gap-2 rounded-full border border-white/20 bg-white/10 px-4 py-2 text-sm font-semibold text-white transition hover:border-white/30 hover:bg-white/20 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/40 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-900",children:["Back to landing page",c.jsx("span",{"aria-hidden":!0,children:"â†º"})]})]})]}),c.jsxs("section",{className:"grid gap-8 lg:grid-cols-[minmax(0,1.2fr)_minmax(0,20rem)]",children:[c.jsxs("div",{className:"relative overflow-hidden rounded-[2.5rem] border border-slate-200 bg-gradient-to-br from-slate-950 via-slate-900 to-slate-800 p-6 text-slate-100 shadow-xl dark:border-slate-700",children:[c.jsx("div",{className:"pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_center,_rgba(14,116,144,0.22),_transparent_68%)]","aria-hidden":!0}),c.jsxs("div",{className:"relative z-10 flex flex-col gap-6",children:[c.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs uppercase tracking-[0.35em] text-slate-300",children:[c.jsxs("span",{className:"rounded-full border border-white/20 px-3 py-1 font-semibold",children:["Generation ",f.toLocaleString()]}),c.jsxs("span",{className:"rounded-full border border-white/20 px-3 py-1 font-semibold",children:["Alive ",g.toLocaleString()," (",y,"%)"]}),c.jsxs("span",{className:"rounded-full border border-white/20 px-3 py-1 font-semibold",children:["Grid ",e," Ã— ",r]})]}),c.jsx("div",{className:"grid w-full gap-[2px] rounded-3xl border border-white/10 bg-slate-950/70 p-4 shadow-inner sm:p-6",style:{gridTemplateColumns:`repeat(${r}, minmax(0, 1fr))`},children:u.map((A,N)=>A.map((B,E)=>c.jsx("div",{className:`aspect-square rounded-md transition-all duration-300 ${B?"bg-sky-300 shadow-[0_0_6px_rgba(125,211,252,0.6)]":"bg-slate-800"}`},`${N}-${E}`)))}),c.jsxs("div",{className:"space-y-2 text-sm text-slate-300",children:[c.jsx("p",{className:"font-semibold text-slate-100",children:m.name}),c.jsx("p",{className:"text-slate-300/80",children:m.description})]})]})]}),c.jsxs("aside",{className:"space-y-6",children:[c.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white/80 p-6 shadow-sm backdrop-blur dark:border-slate-700 dark:bg-slate-900/70",children:[c.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Controls"}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Tune the matrix, swap presets, and adjust the simulation clock. Changes reload the grid with a centered seed."}),c.jsxs("div",{className:"mt-5 space-y-5",children:[c.jsxs("label",{className:"block space-y-2",children:[c.jsx("span",{className:"text-xs font-semibold uppercase tracking-[0.35em] text-slate-500 dark:text-slate-400",children:"Starter pattern"}),c.jsx("select",{value:l,onChange:A=>d(Number.parseInt(A.target.value,10)||0),className:"w-full rounded-2xl border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 shadow-sm transition hover:border-sky-400 focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-200 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100",children:Jt.map((A,N)=>c.jsx("option",{value:N,children:A.name},A.name))})]}),c.jsxs("label",{className:"block space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between text-xs font-semibold uppercase tracking-[0.35em] text-slate-500 dark:text-slate-400",children:[c.jsx("span",{children:"Rows"}),c.jsx("span",{className:"rounded-full bg-slate-200 px-2 py-0.5 text-[0.65rem] font-bold text-slate-700 dark:bg-slate-700 dark:text-slate-100",children:e})]}),c.jsx("input",{type:"range",min:Aa,max:ka,step:1,value:e,onChange:v,className:"w-full accent-sky-400"})]}),c.jsxs("label",{className:"block space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between text-xs font-semibold uppercase tracking-[0.35em] text-slate-500 dark:text-slate-400",children:[c.jsx("span",{children:"Columns"}),c.jsx("span",{className:"rounded-full bg-slate-200 px-2 py-0.5 text-[0.65rem] font-bold text-slate-700 dark:bg-slate-700 dark:text-slate-100",children:r})]}),c.jsx("input",{type:"range",min:Aa,max:ka,step:1,value:r,onChange:w,className:"w-full accent-sky-400"})]}),c.jsxs("label",{className:"block space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between text-xs font-semibold uppercase tracking-[0.35em] text-slate-500 dark:text-slate-400",children:[c.jsx("span",{children:"Tick speed"}),c.jsx("span",{className:"rounded-full bg-slate-200 px-2 py-0.5 text-[0.65rem] font-bold text-slate-700 dark:bg-slate-700 dark:text-slate-100",children:R2(a)})]}),c.jsx("input",{type:"range",min:vd,max:yd,step:D2,value:a,onChange:S,className:"w-full accent-sky-400"})]}),c.jsxs("div",{className:"flex flex-wrap gap-3",children:[c.jsx("button",{type:"button",onClick:C,className:"inline-flex flex-1 items-center justify-center gap-2 rounded-full bg-slate-900 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-slate-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-400 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:bg-slate-100 dark:text-slate-900 dark:hover:bg-slate-200",children:o?"Pause":"Resume"}),c.jsx("button",{type:"button",onClick:k,className:"inline-flex flex-1 items-center justify-center gap-2 rounded-full border border-slate-300 bg-white px-4 py-2 text-sm font-semibold text-slate-700 shadow-sm transition hover:border-sky-400 hover:text-sky-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-sky-200 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100 dark:hover:border-sky-400 dark:hover:text-sky-300",disabled:o,children:"Step once"})]})]})]}),c.jsx("div",{className:"rounded-3xl border border-dashed border-slate-300 bg-white/70 p-5 text-sm text-slate-600 shadow-sm dark:border-slate-600 dark:bg-slate-900/60 dark:text-slate-300",children:c.jsx("p",{children:"Patterns are centered and wrapped on a toroidal grid, mirroring the ambient showcase. Increase the dimensions to give glider guns more room to breathe, or slow the clock to analyze oscillator cycles frame-by-frame."})})]})]})]})}function bd({isActive:e}){return`inline-flex items-center rounded-full border px-3 py-1.5 text-sm font-medium transition border-slate-300 text-slate-700 hover:border-sky-500 hover:text-sky-600 dark:border-slate-700 dark:text-slate-200 ${e?"bg-gradient-to-r from-sky-500 to-cyan-600 text-white border-transparent shadow":""}`}function wd(){return c.jsxs("nav",{className:"flex flex-wrap items-center gap-2",children:[c.jsx(st,{to:"/imagegen",className:bd,end:!0,children:"Generator"}),c.jsx(st,{to:"/imagegen/gallery",className:bd,children:"Gallery"})]})}const M2=[{value:"personal",label:'Personal (8")'},{value:"medium",label:'Medium (12")'},{value:"large",label:'Large (16")'},{value:"xl",label:'Extra large (18")'}],P2=[{value:"thin and crispy",label:"Thin & crispy"},{value:"hand-tossed",label:"Hand-tossed"},{value:"sourdough",label:"Sourdough artisan"},{value:"deep dish",label:"Deep dish"}],_d=[{value:"slow simmered San Marzano tomato sauce",label:"Tomato base"},{value:"creamy roasted garlic white sauce",label:"White base"},{value:"pesto infused olive oil",label:"Pesto base"}],F2=["fresh mozzarella","aged provolone","shaved parmesan","buffalo mozzarella","ricotta dollops","vegan cashew cheese"],si=[{id:"pepperoni",label:"Pepperoni"},{id:"wild-mushroom",label:"Wild mushrooms"},{id:"heirloom-tomato",label:"Heirloom tomato"},{id:"roasted-pepper",label:"Roasted peppers"},{id:"prosciutto",label:"Prosciutto"},{id:"basil",label:"Fresh basil"},{id:"arugula",label:"Baby arugula"},{id:"pineapple",label:"Golden pineapple"},{id:"olives",label:"Castelvetrano olives"}],$2=[{value:"light",label:"Light"},{value:"regular",label:"Regular"},{value:"extra",label:"Extra"}],Cd=[{value:"styled on a rustic wood board with fresh ingredients artfully scattered",label:"Rustic board styling"},{value:"served on a marble slab with elegant cutlery and a linen napkin",label:"Modern marble plating"},{value:"displayed inside a stone oven with glowing embers",label:"Stone oven reveal"},{value:"on a dark slate with overhead sprinkle of herbs and parmesan",label:"Moody slate backdrop"}],Sd=[{value:"dramatic softbox studio lighting with controlled highlights",label:"Studio softbox"},{value:"warm golden hour lighting streaming through a window",label:"Golden hour"},{value:"crisp natural daylight with gentle shadows",label:"Natural daylight"},{value:"moody cinematic lighting with selective focus",label:"Cinematic"}];function U2({size:e,crust:t,sauce:r,cheeses:n,toppingSelections:a,finishingNotes:i,presentation:o,lighting:s}){const l=si.filter(d=>a[d.id]?.enabled).map(d=>`- ${d.label}: ${a[d.id].amount}`);return["Create an imaginative yet photorealistic AI image prompt for a pizza photo shoot.","Honor every detail from the configuration, emphasise gourmet styling, texture, and lighting.","Limit the response to a single paragraph under 75 words with no lists or line breaks.","Do not include camera brands or quotation marks.","","Pizza configuration:",`â€¢ Size: ${e}`,`â€¢ Crust: ${t}`,`â€¢ Sauce: ${r}`,`â€¢ Cheeses: ${n.length>0?n.join(", "):"none"}`,l.length>0?`â€¢ Toppings:
`+l.join(`
`):"â€¢ Toppings: none",`â€¢ Presentation: ${o}`,`â€¢ Lighting: ${s}`,i?`â€¢ Extra direction: ${i}`:"â€¢ Extra direction: none"].filter(Boolean).join(`
`)}function z2({size:e,crust:t,sauce:r,cheeses:n,toppingSelections:a,presentation:i,lighting:o,finishingNotes:s}){const l=si.filter(h=>a[h.id]?.enabled),d=l.length>0?l.map(h=>`${h.label.toLowerCase()} (${a[h.id].amount})`).join(", "):"no additional toppings",u=n.length>0?n.join(", "):"no cheese";return`A ${e} pizza on ${t} crust with ${r}, featuring ${u} and ${d}. Styled ${i} under ${o}${s?`, with extra direction: ${s}`:""}.`}function H2({experience:e}){const[t,r]=b.useState("medium"),[n,a]=b.useState("hand-tossed"),[i,o]=b.useState(_d[0].value),[s,l]=b.useState(["fresh mozzarella"]),[d,u]=b.useState(()=>si.reduce((j,z)=>({...j,[z.id]:{enabled:["pepperoni","basil"].includes(z.id),amount:"regular"}}),{})),[h,f]=b.useState(Cd[0].value),[p,m]=b.useState(Sd[0].value),[g,x]=b.useState(""),[y,v]=b.useState(!1),[w,S]=b.useState(""),[C,k]=b.useState(""),[A,N]=b.useState(""),[B,E]=b.useState([]);b.useEffect(()=>{E(Jh())},[]);const I=b.useMemo(()=>z2({size:t,crust:n,sauce:i,cheeses:s,toppingSelections:d,presentation:h,lighting:p,finishingNotes:g}),[t,n,i,s,d,h,p,g]),F=(e?.imageApiBaseUrl||"https://groq-endpoint.louispaulet13.workers.dev").replace(/\/$/,"");function V(j){const z=new Date(j);return Number.isNaN(z.getTime())?"":z.toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"})}function M(j){l(z=>z.includes(j)?z.filter(q=>q!==j):[...z,j])}function L(j){u(z=>({...z,[j]:{...z[j],enabled:!z[j]?.enabled}}))}function R(j,z){u(q=>({...q,[j]:{...q[j],amount:z}}))}async function U(j){j.preventDefault(),S(""),v(!0);try{const z=U2({size:t,crust:n,sauce:i,cheeses:s,toppingSelections:d,presentation:h,lighting:p,finishingNotes:g}),Y=await la(e,[{role:"system",content:"You are a Michelin-level food stylist who writes elite image prompts for photorealistic pizza photography. Respond with one sentence under 75 words capturing texture, ingredients, setting, and lighting."},{role:"user",content:z}],{model:e?.defaultModel}),te=typeof Y?.content=="string"?Y.content.trim():"";if(!te)throw new Error("The prompt service returned an empty description.");k(te);const ge=new URL(`${F}/flux/${encodeURIComponent(te)}`),J=await fetch(ge.toString());if(!J.ok)throw new Error(`Image generation failed with status ${J.status}`);const P=(await J.json())?.images?.[0]?.url;if(!P)throw new Error("The image service did not return a usable URL.");N(P);const ie=Date.now(),oe={prompt:te,url:P,summary:I,timestamp:ie};E(ne=>{const ye=ne.filter(ft=>ft.url!==oe.url),Xe=[oe,...ye].slice(0,cl);return Nb(Xe),Xe})}catch(z){N(""),k(""),S(z instanceof Error?z.message:"Unexpected error while generating your pizza image.")}finally{v(!1)}}function $(){Qh(),E([])}return c.jsxs("section",{className:"grid gap-6 lg:grid-cols-[minmax(0,0.95fr)_minmax(0,1.05fr)]",children:[c.jsxs("form",{onSubmit:U,className:"space-y-6 rounded-2xl border border-slate-200 bg-white/80 p-6 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[c.jsxs("header",{className:"space-y-1",children:[c.jsx("h2",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100",children:"Configure your pizza"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Dial in every detail, then let Groq draft a studio-grade prompt and render the pie on the right."})]}),c.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"pizza-size",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Size"}),c.jsx("select",{id:"pizza-size",value:t,onChange:j=>r(j.target.value),className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100",children:M2.map(j=>c.jsx("option",{value:j.value,children:j.label},j.value))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"pizza-crust",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Crust style"}),c.jsx("select",{id:"pizza-crust",value:n,onChange:j=>a(j.target.value),className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100",children:P2.map(j=>c.jsx("option",{value:j.value,children:j.label},j.value))})]})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Sauce base"}),c.jsx("div",{className:"mt-3 grid gap-2 sm:grid-cols-3",children:_d.map(j=>{const z=i===j.value;return c.jsx("button",{type:"button",onClick:()=>o(j.value),className:`rounded-xl border px-3 py-2 text-left text-sm font-medium transition ${z?"border-brand-500 bg-brand-50 text-brand-700 shadow-sm dark:border-brand-400 dark:bg-brand-500/10 dark:text-brand-200":"border-slate-300 bg-white text-slate-600 hover:border-brand-300 hover:text-brand-600 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-300"}`,children:j.label},j.value)})})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Cheeses"}),c.jsx("div",{className:"mt-3 grid gap-2 sm:grid-cols-2",children:F2.map(j=>{const z=s.includes(j);return c.jsxs("label",{className:`flex items-center gap-3 rounded-xl border px-3 py-2 text-sm font-medium transition ${z?"border-brand-500 bg-brand-50 text-brand-700 shadow-sm dark:border-brand-400 dark:bg-brand-500/10 dark:text-brand-200":"border-slate-300 bg-white text-slate-600 hover:border-brand-300 hover:text-brand-600 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-300"}`,children:[c.jsx("input",{type:"checkbox",checked:z,onChange:()=>M(j),className:"h-4 w-4 rounded border-slate-300 text-brand-600 focus:ring-brand-500"}),j]},j)})})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Toppings & intensity"}),c.jsx("div",{className:"space-y-2",children:si.map(j=>{const z=d[j.id],q=z?.enabled;return c.jsxs("div",{className:"flex flex-col gap-2 rounded-xl border border-slate-200 bg-white/70 p-3 shadow-sm sm:flex-row sm:items-center sm:justify-between dark:border-slate-700 dark:bg-slate-900/40",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{type:"button",onClick:()=>L(j.id),className:`inline-flex items-center rounded-full px-3 py-1 text-sm font-medium transition ${q?"bg-brand-600 text-white shadow hover:bg-brand-500":"border border-slate-300 text-slate-600 hover:border-brand-300 hover:text-brand-600 dark:border-slate-600 dark:text-slate-300"}`,children:q?"Included":"Add"}),c.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:j.label})]}),c.jsxs("div",{className:"sm:w-40",children:[c.jsxs("label",{htmlFor:`${j.id}-amount`,className:"sr-only",children:[j.label," amount"]}),c.jsx("select",{id:`${j.id}-amount`,value:z?.amount||"regular",onChange:Y=>R(j.id,Y.target.value),disabled:!q,className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-600 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 disabled:cursor-not-allowed disabled:opacity-60 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-300",children:$2.map(Y=>c.jsx("option",{value:Y.value,children:Y.label},Y.value))})]})]},j.id)})})]}),c.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"pizza-presentation",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Presentation style"}),c.jsx("select",{id:"pizza-presentation",value:h,onChange:j=>f(j.target.value),className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100",children:Cd.map(j=>c.jsx("option",{value:j.value,children:j.label},j.value))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"pizza-lighting",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Lighting direction"}),c.jsx("select",{id:"pizza-lighting",value:p,onChange:j=>m(j.target.value),className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100",children:Sd.map(j=>c.jsx("option",{value:j.value,children:j.label},j.value))})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"pizza-notes",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Final direction"}),c.jsx("textarea",{id:"pizza-notes",value:g,onChange:j=>x(j.target.value),rows:3,placeholder:"Any additional art direction or plating requests...",className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100"})]}),w?c.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700 dark:border-red-800 dark:bg-red-900/30 dark:text-red-200",children:w}):null,c.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[c.jsxs("button",{type:"submit",disabled:y,className:"inline-flex items-center gap-2 rounded-full bg-brand-600 px-5 py-2.5 text-sm font-medium text-white shadow transition hover:bg-brand-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500/40 focus-visible:ring-offset-2 focus-visible:ring-offset-white disabled:cursor-not-allowed disabled:bg-brand-400 dark:focus-visible:ring-offset-slate-900",children:[c.jsx(Zr,{className:`h-5 w-5 ${y?"animate-spin":""}`}),y?"Bakingâ€¦":"Bake this pizza image"]}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:I})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white/80 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[c.jsx("div",{className:"border-b border-slate-200 bg-slate-50 px-4 py-3 text-sm font-semibold text-slate-600 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-200",children:"Generated prompt"}),c.jsx("div",{className:"p-5",children:C?c.jsx("p",{className:"text-sm leading-relaxed text-slate-700 dark:text-slate-200",children:C}):c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Configure your pie and click ",c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-200",children:"Bake this pizza image"})," to see the LLM-crafted prompt."]})})]}),c.jsxs("div",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white/80 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[c.jsx("div",{className:"border-b border-slate-200 bg-slate-50 px-4 py-3 text-sm font-semibold text-slate-600 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-200",children:"Pizza render"}),c.jsx("div",{className:"flex min-h-[320px] items-center justify-center bg-slate-100 dark:bg-slate-800",children:A?c.jsx("img",{src:A,alt:C||"Generated pizza",className:"h-full w-full object-cover",loading:"lazy"}):y?c.jsxs("div",{className:"flex flex-col items-center gap-2 text-sm text-slate-500 dark:text-slate-400",children:[c.jsx("span",{className:"h-10 w-10 animate-spin rounded-full border-2 border-slate-300 border-t-brand-500","aria-hidden":!0}),"Baking your pizza photoâ€¦"]}):c.jsx("p",{className:"px-6 text-center text-sm text-slate-500 dark:text-slate-400",children:"Your pizza masterpiece will appear here once the image service finishes rendering."})})]}),c.jsxs("div",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white/80 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[c.jsxs("div",{className:"flex items-center justify-between gap-3 border-b border-slate-200 bg-slate-50 px-4 py-3 text-sm font-semibold text-slate-600 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-200",children:[c.jsx("span",{children:"Saved pizza gallery"}),B.length>0?c.jsxs("button",{type:"button",onClick:$,className:"inline-flex items-center gap-2 rounded-full border border-slate-300 bg-white px-3 py-1.5 text-xs font-medium text-slate-600 shadow-sm transition hover:border-red-400 hover:text-red-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-400/40 focus-visible:ring-offset-1 focus-visible:ring-offset-white dark:border-slate-600 dark:bg-slate-900 dark:text-slate-200 dark:hover:border-red-400 dark:hover:text-red-300",children:[c.jsx(dn,{className:"h-4 w-4"}),"Clear gallery"]}):null]}),c.jsx("div",{className:"p-5",children:B.length>0?c.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:B.map(j=>c.jsxs("article",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white/80 shadow-sm transition hover:-translate-y-0.5 hover:shadow-lg dark:border-slate-700 dark:bg-slate-900/70",children:[c.jsx("div",{className:"relative h-40 w-full overflow-hidden border-b border-slate-200 bg-slate-100 dark:border-slate-700 dark:bg-slate-800",children:c.jsx("img",{src:j.url,alt:j.prompt||"Saved pizza render",className:"h-full w-full object-cover",loading:"lazy"})}),c.jsxs("div",{className:"space-y-2 p-4",children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-100",children:j.prompt||"Saved pizza prompt"}),j.summary?c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:j.summary}):null,c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-[0.7rem] text-slate-400 dark:text-slate-500",children:[c.jsx("span",{children:V(j.timestamp)}),c.jsx("a",{href:j.url,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1 rounded-full border border-slate-300 px-2 py-1 text-[0.7rem] font-medium text-slate-600 transition hover:border-brand-400 hover:text-brand-600 dark:border-slate-600 dark:text-slate-200",children:"Open â†—"})]})]})]},`${j.url}-${j.timestamp}`))}):c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Every generated pizza is saved to a browser cookie so you can revisit it later. Bake a pie to see it here."})})]})]})]})}const li="allin_car_gallery",G2=3600*24*30,ci=40;function c0(){return typeof document>"u"?null:document}function V2(e){const t=c0();if(!t||!t.cookie)return"";const n=t.cookie.split("; ").find(a=>a.startsWith(`${e}=`));return n?n.split("=").slice(1).join("="):""}function ds(e,t,r=G2){const n=c0();if(!n)return;const a=encodeURIComponent(t),i=["path=/",`max-age=${r}`];n.cookie=`${e}=${a}; ${i.join("; ")}`}function d0(e){return!e||typeof e.url!="string"||!e.url.trim()?null:{prompt:typeof e.prompt=="string"?e.prompt:"",url:e.url,summary:typeof e.summary=="string"?e.summary:"",timestamp:typeof e.timestamp=="number"?e.timestamp:Date.now()}}function q2(){const e=V2(li);if(!e)return[];try{const t=JSON.parse(decodeURIComponent(e));return Array.isArray(t)?t.map(r=>d0(r)).filter(Boolean).slice(0,ci):[]}catch{return[]}}function W2(e){if(!Array.isArray(e)||e.length===0){ds(li,"[]");return}const t=e.map(r=>d0(r)).filter(Boolean).slice(0,ci);ds(li,JSON.stringify(t))}function X2(){ds(li,"[]",0)}const us="__custom__",Ad=[{value:"Tesla",label:"Tesla"},{value:"Lamborghini",label:"Lamborghini"},{value:"Porsche",label:"Porsche"},{value:"Mercedes-Benz",label:"Mercedes-Benz"},{value:"Bugatti",label:"Bugatti"},{value:"Aston Martin",label:"Aston Martin"},{value:"Pagani",label:"Pagani"},{value:us,label:"Custom (follow your prompt)"}],kd=[{value:"sleek two-door coupe",label:"Coupe"},{value:"low-slung roadster",label:"Roadster"},{value:"wide-body hypercar",label:"Hypercar"},{value:"muscular grand tourer",label:"Grand tourer"},{value:"futuristic concept car",label:"Concept"},{value:"lifted adventure rig",label:"Adventure rig"}],Ed=[{value:"production supercar",label:"Production supercar"},{value:"bespoke concept car",label:"Concept showpiece"},{value:"vintage-inspired restomod",label:"Restomod classic"},{value:"electric performance car",label:"Electric performance"},{value:"off-road performance build",label:"Off-road performance"}],Nd=[{value:"mirror-gloss paint with crisp reflections",label:"Mirror gloss"},{value:"satin paint with velvety highlights",label:"Satin finish"},{value:"matte paint with soft diffused reflections",label:"Matte finish"},{value:"color-shifting pearlescent paint",label:"Pearlescent"}],Td=[{value:"dramatic three-quarter front view",label:"3/4 front"},{value:"side profile stance shot",label:"Side profile"},{value:"low angle hero shot",label:"Low angle hero"},{value:"rear three-quarter tracking shot",label:"3/4 rear"},{value:"top-down showcase of the silhouette",label:"Top-down"}],Id=[{value:"set against a misty mountain landscape",label:"Mountain landscape"},{value:"coasting beside a neon-lit city center",label:"City center"},{value:"parked on a coastal seascape overlook",label:"Seascape overlook"},{value:"charging within a futuristic studio environment",label:"Futuristic studio"},{value:"sprinting across a desert salt flat",label:"Desert salt flat"}],Od=[{value:"glowing golden hour lighting with long highlights",label:"Golden hour"},{value:"moody cinematic lighting with crisp rim lights",label:"Cinematic"},{value:"soft diffused studio lighting with controlled reflections",label:"Soft studio"},{value:"nocturnal lighting with neon accents and reflections",label:"Neon night"},{value:"clear daylight with sharp contrast and defined shadows",label:"Clear daylight"}],Y2=[{value:"subtle",label:"Subtle"},{value:"balanced",label:"Balanced"},{value:"bold",label:"Bold"}],di=[{id:"aero-kit",label:"Aerodynamic body kit",description:"splitters, diffusers, and side skirts"},{id:"light-trail",label:"Motion light trails",description:"streaks implying speed"},{id:"door-style",label:"Signature doors open",description:"gullwing or scissor doors raised"},{id:"wheel-glow",label:"Illuminated wheel accents",description:"glowing rims or brake calipers"},{id:"graphic",label:"Custom livery graphics",description:"stripes, numbers, or sponsor decals"},{id:"environmental-effects",label:"Environmental effects",description:"mist, dust, or water spray"}];function K2({brand:e,color:t,wheelCount:r,bodyStyle:n,carType:a,finish:i,viewpoint:o,scenery:s,lighting:l,detailSelections:d,finishingNotes:u}){const h=di.filter(f=>d[f.id]?.enabled).map(f=>`- ${f.label}: ${d[f.id].intensity}`);return["Craft a vivid yet concise AI image prompt for an automotive exterior photoshoot.","Describe only the visible design, stance, setting, and lightingâ€”avoid mechanical specifications or interior commentary.","Respond with one paragraph under 80 words and do not use lists or line breaks.","","Car configuration:",`â€¢ Brand: ${e}`,`â€¢ Exterior color: ${t||"unspecified"}`,`â€¢ Wheel count: ${r||"unspecified"}`,`â€¢ Body style: ${n}`,`â€¢ Car type: ${a}`,`â€¢ Finish: ${i}`,h.length>0?`â€¢ Distinctive details:
`+h.join(`
`):"â€¢ Distinctive details: none",`â€¢ Viewpoint: ${o}`,`â€¢ Scenery: ${s}`,`â€¢ Lighting: ${l}`,u?`â€¢ Extra direction: ${u}`:"â€¢ Extra direction: none"].filter(Boolean).join(`
`)}function Z2({brand:e,color:t,wheelCount:r,bodyStyle:n,carType:a,finish:i,viewpoint:o,scenery:s,lighting:l,detailSelections:d,finishingNotes:u}){const h=di.filter(m=>d[m.id]?.enabled),f=h.length>0?h.map(m=>`${m.label.toLowerCase()} (${d[m.id].intensity})`).join(", "):"no extra flourishes",p=(()=>{if(typeof r=="number")return Number.isFinite(r)?`${r}-wheel`:"custom-wheel";const m=typeof r=="string"?r.trim():"";return m?`${m}-wheel`:"custom-wheel"})();return[`A ${e} ${n} portrayed as a ${a}`,`finished in ${t||"a custom hue"} with ${i}`,`shown from a ${o} in ${s}`,`under ${l}, featuring ${f}`,u?`extra direction: ${u}`:null,`wheel setup: ${p}`].filter(Boolean).join(", ")}function J2({experience:e}){const[t,r]=b.useState(Ad[0].value),[n,a]=b.useState(""),[i,o]=b.useState("candy apple red"),[s,l]=b.useState("4"),[d,u]=b.useState(kd[0].value),[h,f]=b.useState(Ed[0].value),[p,m]=b.useState(Nd[0].value),[g,x]=b.useState(Td[0].value),[y,v]=b.useState(Id[0].value),[w,S]=b.useState(Od[0].value),[C,k]=b.useState(()=>di.reduce((P,ie)=>({...P,[ie.id]:{enabled:["aero-kit","graphic"].includes(ie.id),intensity:"balanced"}}),{})),[A,N]=b.useState(""),[B,E]=b.useState(!1),[I,F]=b.useState(""),[V,M]=b.useState(""),[L,R]=b.useState(""),[U,$]=b.useState([]),j=t===us?n.trim()||"bespoke concept car brand guided by the prompt":t;b.useEffect(()=>{$(q2())},[]);const z=b.useMemo(()=>Z2({brand:j,color:i,wheelCount:s,bodyStyle:d,carType:h,finish:p,viewpoint:g,scenery:y,lighting:w,detailSelections:C,finishingNotes:A}),[j,i,s,d,h,p,g,y,w,C,A]),q=(e?.imageApiBaseUrl||"https://groq-endpoint.louispaulet13.workers.dev").replace(/\/$/,"");function Y(P){const ie=new Date(P);return Number.isNaN(ie.getTime())?"":ie.toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"})}function te(P){k(ie=>({...ie,[P]:{...ie[P],enabled:!ie[P]?.enabled}}))}function ge(P,ie){k(oe=>({...oe,[P]:{...oe[P],intensity:ie}}))}async function J(P){P.preventDefault(),F(""),E(!0);try{const ie=K2({brand:j,color:i,wheelCount:s.trim(),bodyStyle:d,carType:h,finish:p,viewpoint:g,scenery:y,lighting:w,detailSelections:C,finishingNotes:A}),ne=await la(e,[{role:"system",content:"You are an automotive exterior stylist who writes high-end image prompts for hero car photography. Focus on what is visible and cinematic without mentioning internal mechanics."},{role:"user",content:ie}],{model:e?.defaultModel}),ye=typeof ne?.content=="string"?ne.content.trim():"";if(!ye)throw new Error("The prompt service returned an empty description.");M(ye);const Xe=new URL(`${q}/flux/${encodeURIComponent(ye)}`),ft=await fetch(Xe.toString());if(!ft.ok)throw new Error(`Image generation failed with status ${ft.status}`);const co=(await ft.json())?.images?.[0]?.url;if(!co)throw new Error("The image service did not return a usable URL.");R(co);const Ip=Date.now(),Yl={prompt:ye,url:co,summary:z,timestamp:Ip};$(Op=>{const Bp=Op.filter(jp=>jp.url!==Yl.url),Kl=[Yl,...Bp].slice(0,ci);return W2(Kl),Kl})}catch(ie){R(""),M(""),F(ie instanceof Error?ie.message:"Unexpected error while generating your car image.")}finally{E(!1)}}function ce(){X2(),$([])}return c.jsxs("section",{className:"grid gap-6 lg:grid-cols-[minmax(0,0.95fr)_minmax(0,1.05fr)]",children:[c.jsxs("form",{onSubmit:J,className:"space-y-6 rounded-2xl border border-slate-200 bg-white/80 p-6 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[c.jsxs("header",{className:"space-y-1",children:[c.jsx("h2",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100",children:"Configure your hero car"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Shape every visible detail, then let Groq author a cinematic prompt and render the shot on the right."})]}),c.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"car-brand",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Brand"}),c.jsx("select",{id:"car-brand",value:t,onChange:P=>r(P.target.value),className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100",children:Ad.map(P=>c.jsx("option",{value:P.value,children:P.label},P.value))}),t===us?c.jsxs("div",{className:"mt-3 space-y-2",children:[c.jsx("label",{htmlFor:"car-brand-custom",className:"text-xs font-medium uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Custom brand direction"}),c.jsx("input",{id:"car-brand-custom",type:"text",value:n,onChange:P=>a(P.target.value),placeholder:"e.g. art-deco inspired electric marque",className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100"}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Leave blank to let Groq invent a marque that matches your prompt."})]}):null]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"car-color",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Exterior color"}),c.jsx("input",{id:"car-color",type:"text",value:i,onChange:P=>o(P.target.value),placeholder:"e.g. deep sapphire blue",className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100"})]})]}),c.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"car-body-style",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Body style"}),c.jsx("select",{id:"car-body-style",value:d,onChange:P=>u(P.target.value),className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100",children:kd.map(P=>c.jsx("option",{value:P.value,children:P.label},P.value))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"car-type",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Car type"}),c.jsx("select",{id:"car-type",value:h,onChange:P=>f(P.target.value),className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100",children:Ed.map(P=>c.jsx("option",{value:P.value,children:P.label},P.value))})]})]}),c.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"car-wheels",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Number of wheels"}),c.jsx("input",{id:"car-wheels",type:"number",min:"0",value:s,onChange:P=>l(P.target.value),className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100"}),c.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:"Enter any wheel countâ€”even unconventional ones."})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Paint finish"}),c.jsx("div",{className:"mt-3 grid gap-2",children:Nd.map(P=>{const ie=p===P.value;return c.jsx("button",{type:"button",onClick:()=>m(P.value),className:`rounded-xl border px-3 py-2 text-left text-sm font-medium transition ${ie?"border-brand-500 bg-brand-50 text-brand-700 shadow-sm dark:border-brand-400 dark:bg-brand-500/10 dark:text-brand-200":"border-slate-300 bg-white text-slate-600 hover:border-brand-300 hover:text-brand-600 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-300"}`,children:P.label},P.value)})})]})]}),c.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"car-viewpoint",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Viewpoint"}),c.jsx("select",{id:"car-viewpoint",value:g,onChange:P=>x(P.target.value),className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100",children:Td.map(P=>c.jsx("option",{value:P.value,children:P.label},P.value))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"car-scenery",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Scenery"}),c.jsx("select",{id:"car-scenery",value:y,onChange:P=>v(P.target.value),className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100",children:Id.map(P=>c.jsx("option",{value:P.value,children:P.label},P.value))})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"car-lighting",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Lighting"}),c.jsx("select",{id:"car-lighting",value:w,onChange:P=>S(P.target.value),className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100",children:Od.map(P=>c.jsx("option",{value:P.value,children:P.label},P.value))})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Signature details"}),c.jsx("div",{className:"space-y-2",children:di.map(P=>{const ie=C[P.id],oe=ie?.enabled;return c.jsxs("div",{className:"flex flex-col gap-2 rounded-xl border border-slate-200 bg-white/70 p-3 shadow-sm sm:flex-row sm:items-center sm:justify-between dark:border-slate-700 dark:bg-slate-900/40",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{type:"button",onClick:()=>te(P.id),className:`inline-flex items-center rounded-full px-3 py-1 text-sm font-medium transition ${oe?"bg-brand-600 text-white shadow hover:bg-brand-500":"border border-slate-300 text-slate-600 hover:border-brand-300 hover:text-brand-600 dark:border-slate-600 dark:text-slate-300"}`,children:oe?"Included":"Add"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:P.label}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:P.description})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{className:"text-xs font-medium uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Intensity"}),c.jsx("select",{value:ie?.intensity||"balanced",onChange:ne=>ge(P.id,ne.target.value),className:"rounded-lg border border-slate-300 bg-white px-2 py-1 text-xs text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100",children:Y2.map(ne=>c.jsx("option",{value:ne.value,children:ne.label},ne.value))})]})]},P.id)})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"car-notes",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Extra direction"}),c.jsx("textarea",{id:"car-notes",value:A,onChange:P=>N(P.target.value),rows:3,placeholder:"Optional styling notes visible from the exterior...",className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/40 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100"})]}),c.jsxs("div",{className:"flex items-center justify-between gap-3",children:[c.jsx("button",{type:"submit",disabled:B,className:"inline-flex items-center gap-2 rounded-xl bg-brand-600 px-4 py-2 text-sm font-semibold text-white shadow transition hover:bg-brand-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-400/60 disabled:cursor-not-allowed disabled:bg-brand-400",children:B?c.jsxs(c.Fragment,{children:[c.jsx(Zr,{className:"h-4 w-4 animate-spin","aria-hidden":"true"}),"Generatingâ€¦"]}):"Generate car image"}),c.jsxs("button",{type:"button",onClick:ce,className:"inline-flex items-center gap-2 rounded-xl border border-slate-300 px-3 py-2 text-xs font-semibold uppercase tracking-wide text-slate-500 transition hover:border-red-400 hover:text-red-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-400/50 dark:border-slate-600 dark:text-slate-300",children:[c.jsx(dn,{className:"h-4 w-4","aria-hidden":"true"}),"Clear gallery"]})]}),I?c.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:I}):null,c.jsxs("div",{className:"rounded-xl bg-slate-50 p-4 text-sm text-slate-600 shadow-inner dark:bg-slate-900/40 dark:text-slate-300",children:[c.jsx("p",{className:"font-medium text-slate-700 dark:text-slate-100",children:"Quick summary"}),c.jsx("p",{className:"mt-1 leading-relaxed",children:z})]})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("section",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white/70 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[c.jsx("header",{className:"border-b border-slate-200 bg-slate-50/80 px-5 py-4 dark:border-slate-700 dark:bg-slate-900/40",children:c.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-300",children:"Prompt & render"})}),c.jsx("div",{className:"space-y-4 p-5",children:V?c.jsxs("article",{className:"space-y-3",children:[c.jsx("div",{className:"rounded-lg border border-slate-200 bg-white/90 p-3 text-sm leading-relaxed text-slate-700 shadow-sm dark:border-slate-700 dark:bg-slate-900/60 dark:text-slate-200",children:V}),L?c.jsx("img",{src:L,alt:"Generated hero car",className:"w-full rounded-xl border border-slate-200 bg-slate-100 object-cover shadow-sm dark:border-slate-700 dark:bg-slate-900"}):null]}):c.jsx("div",{className:"rounded-lg border border-dashed border-slate-300 bg-white/40 p-6 text-center text-sm text-slate-400 dark:border-slate-700 dark:bg-slate-900/20 dark:text-slate-500",children:"Configure the ride and generate to see your prompt and render here."})})]}),c.jsxs("section",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white/70 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[c.jsxs("header",{className:"flex items-center justify-between border-b border-slate-200 bg-slate-50/80 px-5 py-4 dark:border-slate-700 dark:bg-slate-900/40",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-300",children:"Car gallery"}),c.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:"Recent renders are stored in a cookie on this device."})]}),c.jsxs("span",{className:"rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-600 dark:bg-slate-800 dark:text-slate-300",children:[U.length,"/",ci]})]}),U.length>0?c.jsx("ul",{className:"divide-y divide-slate-200 dark:divide-slate-800",children:U.map(P=>c.jsxs("li",{className:"flex flex-col gap-4 p-5 sm:flex-row sm:items-start",children:[c.jsx("img",{src:P.url,alt:"Saved hero car render",className:"h-32 w-full rounded-xl border border-slate-200 object-cover shadow-sm sm:h-24 sm:w-40 dark:border-slate-700"}),c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-100",children:P.summary}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:P.prompt}),c.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:["Saved ",Y(P.timestamp)]})]})]},P.url))}):c.jsx("p",{className:"p-5 text-sm text-slate-500 dark:text-slate-400",children:"Generate a car to begin filling your gallery."})]})]})]})}const Fn="allin_svg_prompt_history",Q2=3600*24*30,hs=8;function u0(e){if(typeof e!="string")return"";const t=e.trim();return t||""}function ew({dataUrl:e,svgMarkup:t}){if(typeof e=="string"&&e.startsWith("data:image/svg+xml"))return e;const r=u0(t);return r?`data:image/svg+xml;utf8,${encodeURIComponent(r)}`:""}function h0(e){if(!e)return null;const t=typeof e.prompt=="string"?e.prompt.trim():"",r=u0(e.svgMarkup),n=typeof e.dataUrl=="string"?e.dataUrl.trim():"";if(!r&&!n)return null;const a=typeof e.timestamp=="number"&&Number.isFinite(e.timestamp)?e.timestamp:Date.now();return{prompt:t,svgMarkup:r,dataUrl:ew({dataUrl:n,svgMarkup:r}),timestamp:a}}function tw(){const e=zi(Fn);if(!e)return[];try{const t=JSON.parse(e);return Array.isArray(t)?t.map(h0).filter(Boolean):[]}catch{return[]}}function rw(e){if(!Array.isArray(e)||e.length===0){vt(Fn);return}const t=e.map(r=>{const n=h0(r);if(!n)return null;const{dataUrl:a,...i}=n;return i}).filter(Boolean).slice(0,hs);if(t.length===0){vt(Fn);return}Hi(Fn,t,{maxAgeSeconds:Q2})}function nw(){vt(Fn)}function fs({dataUrl:e,svgMarkup:t}){return typeof e=="string"&&e.startsWith("data:image/svg+xml")?e:typeof t=="string"&&t.trim()?`data:image/svg+xml;utf8,${encodeURIComponent(t.trim())}`:""}const aw={USE_PROFILES:{svg:!0,svgFilters:!0},ADD_TAGS:["animate","animateMotion","animateTransform","mpath"],ADD_ATTR:["attributeName","attributeType","begin","by","calcMode","dur","href","keySplines","keyTimes","repeatCount","to","values","xlink:href"]};function Bd(e){if(typeof e!="string")return null;const t=e.trim();if(!t||t.endsWith("%"))return null;const r=Number.parseFloat(t);return!Number.isFinite(r)||r<=0?null:r}function iw(e){if(typeof window>"u"||typeof e!="string"||!e.trim())return null;try{const n=new DOMParser().parseFromString(e,"image/svg+xml").querySelector("svg");if(!n)return null;const a=Bd(n.getAttribute("width")),i=Bd(n.getAttribute("height"));if(a&&i)return a/i;const o=n.getAttribute("viewBox")||n.getAttribute("viewbox");if(o){const s=o.split(/[\s,]+/).map(l=>Number.parseFloat(l)).filter(l=>Number.isFinite(l));if(s.length===4){const[,,l,d]=s;if(l>0&&d>0)return l/d}}return null}catch{return null}}function ow(e){const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"})}function sw({entry:e,onSelect:t}){const r=fs(e);return c.jsxs("button",{type:"button",onClick:()=>t(e),className:"group flex flex-col gap-2 overflow-hidden rounded-xl border border-slate-200 bg-white/80 p-3 text-left shadow-sm transition hover:border-brand-400 hover:bg-brand-50/70 dark:border-slate-700 dark:bg-slate-900/60 dark:hover:border-brand-300",children:[c.jsx("div",{className:"relative overflow-hidden rounded-lg border border-slate-200 bg-slate-100 dark:border-slate-700 dark:bg-slate-800",children:r?c.jsx("img",{src:r,alt:e.prompt||"Saved SVG preview",className:"h-24 w-full object-contain",loading:"lazy"}):c.jsx("div",{className:"flex h-24 items-center justify-center text-xs text-slate-400 dark:text-slate-500",children:"No preview"})}),c.jsxs("div",{children:[c.jsx("p",{className:"line-clamp-2 text-sm font-medium text-slate-700 dark:text-slate-200",children:e.prompt||"Saved request"}),e.route?c.jsx("p",{className:"text-[0.65rem] uppercase tracking-wide text-slate-400 dark:text-slate-500",children:e.route==="svg_deluxe"?"Deluxe /svg_deluxe (oss-120B)":"Standard /svg (Llama 3 70B)"}):null,e.timestamp?c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:ow(e.timestamp)}):null]})]})}function lw({experience:e}){const[t,r]=b.useState("A cheerful robot painting geometric trees"),[n,a]=b.useState(!1),[i,o]=b.useState(""),[s,l]=b.useState(null),[d,u]=b.useState([]),[h,f]=b.useState(!1),[p,m]=b.useState(!1),g=b.useMemo(()=>typeof window>"u"||!s?.svgMarkup?"":Rs.sanitize(s.svgMarkup,aw),[s?.svgMarkup]),x=b.useMemo(()=>iw(g),[g]),y=b.useMemo(()=>g?`<!DOCTYPE html><html lang="en"><head><meta charset="utf-8" /><style>
      :root { color-scheme: light dark; }
      html, body {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
        background: transparent;
      }
      body {
        display: flex;
        align-items: center;
        justify-content: center;
      }
      svg {
        width: 100%;
        height: auto;
        max-width: 100%;
        max-height: 100%;
      }
    </style></head><body>${g}</body></html>`:"",[g]);b.useEffect(()=>{u(tw())},[]),b.useEffect(()=>{if(!h)return;const N=setTimeout(()=>f(!1),1500);return()=>clearTimeout(N)},[h]);const v=e?.svgApiBaseUrl||e?.defaultBaseUrl||"https://groq-endpoint.louispaulet13.workers.dev",w=p?"svg_deluxe":"svg";async function S(N){N.preventDefault();const B=t.trim();if(!B){o("Please enter a prompt for the SVG generator.");return}a(!0),o("");try{const E=new URL(`${v.replace(/\/$/,"")}/${w}/${encodeURIComponent(B)}`),I=await fetch(E.toString());if(!I.ok){let q=`Generation failed with status ${I.status}`;try{const Y=await I.json();Y?.error&&(q=Y.error)}catch{}throw new Error(q)}const F=await I.json(),V=typeof F?.svg=="string"?F.svg.trim():"",M=fs({dataUrl:typeof F?.dataUrl=="string"?F.dataUrl.trim():"",svgMarkup:V});if(!M)throw new Error("The SVG response did not include renderable markup.");const L=typeof F?.prompt=="string"&&F.prompt.trim()?F.prompt.trim():B;l({prompt:L,dataUrl:M,svgMarkup:V,raw:F,route:w});const U=Date.now(),$={prompt:L,dataUrl:M,svgMarkup:V,timestamp:U,route:w},j=d.filter(q=>q.dataUrl!==$.dataUrl||q.prompt!==$.prompt),z=[$,...j].slice(0,hs);u(z),rw(z)}catch(E){o(E instanceof Error?E.message:"Unexpected error during SVG generation.")}finally{a(!1)}}function C(N){N&&(r(N.prompt||""),m(N.route==="svg_deluxe"),l({prompt:N.prompt,dataUrl:fs(N),svgMarkup:N.svgMarkup||"",raw:null,route:N.route||"svg"}))}function k(){nw(),u([])}async function A(){if(s?.svgMarkup)try{await navigator.clipboard.writeText(s.svgMarkup),f(!0)}catch(N){console.error("Failed to copy SVG markup",N)}}return c.jsx("div",{className:"space-y-8",children:c.jsxs("section",{className:"grid gap-8 lg:grid-cols-[1.1fr_0.9fr]",children:[c.jsxs("form",{onSubmit:S,className:"space-y-6 rounded-2xl border border-slate-200 bg-white/80 p-6 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"svglab-prompt",className:"flex items-center justify-between text-sm font-medium text-slate-700 dark:text-slate-200",children:["SVG prompt",c.jsx("span",{className:"text-xs font-normal text-slate-400 dark:text-slate-500",children:"/svg worker endpoint"})]}),c.jsx("textarea",{id:"svglab-prompt",value:t,onChange:N=>r(N.target.value),rows:4,className:"mt-2 w-full rounded-xl border border-slate-300 bg-white px-3 py-3 text-sm text-slate-700 shadow-sm focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-400/50 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100",placeholder:"Describe what the SVG should contain..."}),c.jsxs("p",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:["Requests are sent to"," ",c.jsx("code",{className:"rounded bg-slate-100 px-1 py-0.5 text-[0.7rem] text-slate-700 dark:bg-slate-800 dark:text-slate-200",children:`${v}/${w}/<prompt>`}),". We encode the prompt so spaces and punctuation are preserved."]}),c.jsxs("label",{htmlFor:"svglab-deluxe",className:"mt-3 flex cursor-pointer items-start gap-3 rounded-xl border border-slate-200 bg-slate-50/70 px-3 py-3 text-sm text-slate-600 shadow-sm transition hover:border-brand-300 dark:border-slate-700 dark:bg-slate-800/60 dark:text-slate-300",children:[c.jsx("input",{id:"svglab-deluxe",type:"checkbox",checked:p,onChange:N=>m(N.target.checked),className:"mt-1 h-4 w-4 rounded border-slate-300 text-brand-600 focus:ring-brand-500 dark:border-slate-600 dark:bg-slate-900"}),c.jsxs("span",{children:["Use the ",c.jsx("code",{className:"rounded bg-slate-200 px-1 py-0.5 text-[0.7rem] text-slate-700 dark:bg-slate-900 dark:text-slate-200",children:"/svg_deluxe"})," route for"," ","oss-120B generations with an 8,192-token canvas suitable for animated SVGs."]})]})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[c.jsxs("button",{type:"submit",disabled:n,className:"inline-flex items-center gap-2 rounded-full bg-brand-600 px-5 py-2.5 text-sm font-medium text-white shadow transition hover:bg-brand-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500/40 focus-visible:ring-offset-2 focus-visible:ring-offset-white disabled:cursor-not-allowed disabled:bg-brand-400 dark:focus-visible:ring-offset-slate-900",children:[c.jsx(Zr,{className:`h-5 w-5 ${n?"animate-spin":""}`}),n?"Generatingâ€¦":"Generate SVG"]}),d.length>0?c.jsxs("button",{type:"button",onClick:k,className:"inline-flex items-center gap-2 rounded-full border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-600 shadow-sm transition hover:border-red-400 hover:text-red-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-400/30 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:border-slate-600 dark:bg-slate-900 dark:text-slate-200 dark:hover:border-red-400 dark:hover:text-red-300 dark:focus-visible:ring-offset-slate-900",children:[c.jsx(dn,{className:"h-4 w-4"}),"Clear saved prompts"]}):null]}),i?c.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700 dark:border-red-800 dark:bg-red-900/40 dark:text-red-200",children:i}):null]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white/80 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[c.jsx("div",{className:"border-b border-slate-200 bg-slate-50 px-4 py-3 text-sm font-semibold text-slate-600 dark:border-slate-700 dark:bg-slate-900/80 dark:text-slate-200",children:"Latest result"}),c.jsx("div",{className:"flex flex-col gap-4 p-4",children:s?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-start justify-between gap-4",children:[c.jsx("h3",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:s.prompt}),s.svgMarkup?c.jsxs("button",{type:"button",onClick:A,className:"inline-flex items-center gap-2 rounded-full border border-slate-300 bg-white px-3 py-1 text-xs font-medium text-slate-600 transition hover:border-brand-400 hover:text-brand-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-400/40 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:border-slate-600 dark:bg-slate-900 dark:text-slate-200",children:[c.jsx(eh,{className:"h-4 w-4"}),h?"Copied!":"Copy SVG"]}):null]}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Served via ",s.route==="svg_deluxe"?"oss-120B":"Llama 3 70B"," on the"," ",c.jsxs("code",{className:"rounded bg-slate-100 px-1 py-0.5 text-[0.65rem] text-slate-700 dark:bg-slate-800 dark:text-slate-200",children:["/",s.route||"svg"]})," ","endpoint."]}),c.jsx("div",{className:"relative w-full overflow-hidden rounded-xl border border-slate-200 bg-slate-100 dark:border-slate-700 dark:bg-slate-800",style:{aspectRatio:x||1},children:g?c.jsx("iframe",{title:s.prompt,srcDoc:y,sandbox:"",className:"h-full w-full bg-white/40 dark:bg-slate-900/40",scrolling:"no",loading:"lazy",style:{border:"none"}},s.svgMarkup):c.jsx("img",{src:s.dataUrl,alt:s.prompt,className:"h-full w-full object-contain",loading:"lazy"})}),s.raw?c.jsxs("details",{className:"rounded-xl border border-slate-200 bg-slate-50 px-4 py-3 text-xs text-slate-600 dark:border-slate-700 dark:bg-slate-900/70 dark:text-slate-300",children:[c.jsx("summary",{className:"cursor-pointer text-sm font-semibold",children:"View raw response"}),c.jsx("pre",{className:"mt-2 whitespace-pre-wrap break-all text-[0.7rem] leading-relaxed",children:JSON.stringify(s.raw,null,2)})]}):null]}):c.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Submit a prompt to generate your first SVG. The rendered artwork will appear here."})})]}),c.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white/80 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[c.jsx("div",{className:"border-b border-slate-200 bg-slate-50 px-4 py-3 text-sm font-semibold text-slate-600 dark:border-slate-700 dark:bg-slate-900/80 dark:text-slate-200",children:"Saved prompts (cookie-based gallery)"}),c.jsx("div",{className:"grid gap-3 p-4 sm:grid-cols-2",children:d.length===0?c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Generate an SVG to store the prompt and markup in a browser cookie. Up to ",hs," recent entries are saved for quick recall."]}):d.map(N=>c.jsx(sw,{entry:N,onSelect:C},`${N.timestamp}-${N.prompt}`))})]})]})]})})}function ui(){return ui=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ui.apply(this,arguments)}function cw(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}var dw=["cdnSuffix","cdnUrl","countryCode","style","svg"],uw="https://cdn.jsdelivr.net/gh/lipis/flag-icons/flags/4x3/",hw="svg",fw=127397,jd=function(t){var r=t.cdnSuffix,n=r===void 0?hw:r,a=t.cdnUrl,i=a===void 0?uw:a,o=t.countryCode,s=t.style,l=t.svg,d=l===void 0?!1:l,u=cw(t,dw);if(typeof o!="string")return null;if(d){var h=""+i+o.toLowerCase()+"."+n;return b.createElement("img",Object.assign({},u,{src:h,style:ui({display:"inline-block",width:"1em",height:"1em",verticalAlign:"middle"},s)}))}var f=o.toUpperCase().replace(/./g,function(p){return String.fromCodePoint(p.charCodeAt(0)+fw)});return b.createElement("span",Object.assign({role:"img"},u,{style:ui({display:"inline-block",fontSize:"1em",lineHeight:"1em",verticalAlign:"middle"},s)}),f)};const pw=2e3,f0=e=>({country:e,status:"idle",prompt:"",dataUrl:"",error:""}),mw=e=>{const t=typeof e?.dataUrl=="string"?e.dataUrl.trim():"";if(t.startsWith("data:image/svg+xml"))return t;const r=typeof e?.svg=="string"?e.svg.trim():"";return r?`data:image/svg+xml;utf8,${encodeURIComponent(r)}`:""},gw=new Intl.NumberFormat("en-US"),Yn=[{id:"europe",name:"Europe",description:"Auto-queues every European flag so you can watch the continent populate without lifting a finger.",countries:[{name:"Russia",code:"RU",population:143997393},{name:"Germany",code:"DE",population:84075075},{name:"United Kingdom",code:"GB",population:69551332},{name:"France",code:"FR",population:66650804},{name:"Italy",code:"IT",population:59146260},{name:"Spain",code:"ES",population:47889958},{name:"Ukraine",code:"UA",population:38980376},{name:"Poland",code:"PL",population:38140910},{name:"Romania",code:"RO",population:18908650},{name:"Netherlands",code:"NL",population:18346819},{name:"Belgium",code:"BE",population:11779946},{name:"Sweden",code:"SE",population:11055959},{name:"Czechia",code:"CZ",population:10678744},{name:"Portugal",code:"PT",population:10519018},{name:"Greece",code:"GR",population:10423054},{name:"Hungary",code:"HU",population:9668149},{name:"Belarus",code:"BY",population:9443211},{name:"Austria",code:"AT",population:9131761},{name:"Switzerland",code:"CH",population:8767849},{name:"Serbia",code:"RS",population:6911019},{name:"Bulgaria",code:"BG",population:6446596},{name:"Denmark",code:"DK",population:5866324},{name:"Norway",code:"NO",population:5735040},{name:"Finland",code:"FI",population:5528859},{name:"Slovakia",code:"SK",population:5458e3},{name:"Ireland",code:"IE",population:5274e3},{name:"Croatia",code:"HR",population:3856431},{name:"Bosnia and Herzegovina",code:"BA",population:3500295},{name:"Albania",code:"AL",population:2891085},{name:"Moldova",code:"MD",population:2681536},{name:"Lithuania",code:"LT",population:2599928},{name:"Slovenia",code:"SI",population:2146844},{name:"North Macedonia",code:"MK",population:2064183},{name:"Latvia",code:"LV",population:1849843},{name:"Estonia",code:"EE",population:1357728},{name:"Cyprus",code:"CY",population:1313959},{name:"Luxembourg",code:"LU",population:669132},{name:"Montenegro",code:"ME",population:630219},{name:"Malta",code:"MT",population:574300},{name:"Iceland",code:"IS",population:381552},{name:"Andorra",code:"AD",population:77287},{name:"Monaco",code:"MC",population:39244},{name:"Liechtenstein",code:"LI",population:39010},{name:"San Marino",code:"SM",population:32700},{name:"Vatican City",code:"VA",population:801}]},{id:"africa",name:"Africa",description:"Queue the full suite of African nations when you are ready to tour the continent.",countries:[{name:"Algeria",code:"DZ"},{name:"Angola",code:"AO"},{name:"Benin",code:"BJ"},{name:"Botswana",code:"BW"},{name:"Burkina Faso",code:"BF"},{name:"Burundi",code:"BI"},{name:"Cabo Verde",code:"CV"},{name:"Cameroon",code:"CM"},{name:"Central African Republic",code:"CF"},{name:"Chad",code:"TD"},{name:"Comoros",code:"KM"},{name:"Democratic Republic of the Congo",code:"CD"},{name:"Republic of the Congo",code:"CG"},{name:"CÃ´te d'Ivoire",code:"CI"},{name:"Djibouti",code:"DJ"},{name:"Egypt",code:"EG"},{name:"Equatorial Guinea",code:"GQ"},{name:"Eritrea",code:"ER"},{name:"Eswatini",code:"SZ"},{name:"Ethiopia",code:"ET"},{name:"Gabon",code:"GA"},{name:"Gambia",code:"GM"},{name:"Ghana",code:"GH"},{name:"Guinea",code:"GN"},{name:"Guinea-Bissau",code:"GW"},{name:"Kenya",code:"KE"},{name:"Lesotho",code:"LS"},{name:"Liberia",code:"LR"},{name:"Libya",code:"LY"},{name:"Madagascar",code:"MG"},{name:"Malawi",code:"MW"},{name:"Mali",code:"ML"},{name:"Mauritania",code:"MR"},{name:"Mauritius",code:"MU"},{name:"Morocco",code:"MA"},{name:"Mozambique",code:"MZ"},{name:"Namibia",code:"NA"},{name:"Niger",code:"NE"},{name:"Nigeria",code:"NG"},{name:"Rwanda",code:"RW"},{name:"SÃ£o TomÃ© and PrÃ­ncipe",code:"ST"},{name:"Senegal",code:"SN"},{name:"Seychelles",code:"SC"},{name:"Sierra Leone",code:"SL"},{name:"Somalia",code:"SO"},{name:"South Africa",code:"ZA"},{name:"South Sudan",code:"SS"},{name:"Sudan",code:"SD"},{name:"Tanzania",code:"TZ"},{name:"Togo",code:"TG"},{name:"Tunisia",code:"TN"},{name:"Uganda",code:"UG"},{name:"Zambia",code:"ZM"},{name:"Zimbabwe",code:"ZW"}]},{id:"asia",name:"Asia",description:"From the Middle East to the Pacific Rim, queue every Asian flag on demand.",countries:[{name:"Afghanistan",code:"AF"},{name:"Armenia",code:"AM"},{name:"Azerbaijan",code:"AZ"},{name:"Bahrain",code:"BH"},{name:"Bangladesh",code:"BD"},{name:"Bhutan",code:"BT"},{name:"Brunei",code:"BN"},{name:"Cambodia",code:"KH"},{name:"China",code:"CN"},{name:"Georgia",code:"GE"},{name:"India",code:"IN"},{name:"Indonesia",code:"ID"},{name:"Iran",code:"IR"},{name:"Iraq",code:"IQ"},{name:"Israel",code:"IL"},{name:"Japan",code:"JP"},{name:"Jordan",code:"JO"},{name:"Kazakhstan",code:"KZ"},{name:"Kuwait",code:"KW"},{name:"Kyrgyzstan",code:"KG"},{name:"Laos",code:"LA"},{name:"Lebanon",code:"LB"},{name:"Malaysia",code:"MY"},{name:"Maldives",code:"MV"},{name:"Mongolia",code:"MN"},{name:"Myanmar",code:"MM"},{name:"Nepal",code:"NP"},{name:"North Korea",code:"KP"},{name:"Oman",code:"OM"},{name:"Pakistan",code:"PK"},{name:"Palestine",code:"PS"},{name:"Philippines",code:"PH"},{name:"Qatar",code:"QA"},{name:"Saudi Arabia",code:"SA"},{name:"Singapore",code:"SG"},{name:"South Korea",code:"KR"},{name:"Sri Lanka",code:"LK"},{name:"Syria",code:"SY"},{name:"Taiwan",code:"TW"},{name:"Tajikistan",code:"TJ"},{name:"Thailand",code:"TH"},{name:"Timor-Leste",code:"TL"},{name:"Turkey",code:"TR"},{name:"Turkmenistan",code:"TM"},{name:"United Arab Emirates",code:"AE"},{name:"Uzbekistan",code:"UZ"},{name:"Vietnam",code:"VN"},{name:"Yemen",code:"YE"}]},{id:"north-america",name:"North America",description:"Includes Canada, the United States, Mexico, Central America, and the Caribbean.",countries:[{name:"Antigua and Barbuda",code:"AG"},{name:"Bahamas",code:"BS"},{name:"Barbados",code:"BB"},{name:"Belize",code:"BZ"},{name:"Canada",code:"CA"},{name:"Costa Rica",code:"CR"},{name:"Cuba",code:"CU"},{name:"Dominica",code:"DM"},{name:"Dominican Republic",code:"DO"},{name:"El Salvador",code:"SV"},{name:"Grenada",code:"GD"},{name:"Guatemala",code:"GT"},{name:"Haiti",code:"HT"},{name:"Honduras",code:"HN"},{name:"Jamaica",code:"JM"},{name:"Mexico",code:"MX"},{name:"Nicaragua",code:"NI"},{name:"Panama",code:"PA"},{name:"Saint Kitts and Nevis",code:"KN"},{name:"Saint Lucia",code:"LC"},{name:"Saint Vincent and the Grenadines",code:"VC"},{name:"Trinidad and Tobago",code:"TT"},{name:"United States",code:"US"}]},{id:"south-america",name:"South America",description:"Follow the southern hemisphere with a guided tour through every national flag.",countries:[{name:"Argentina",code:"AR"},{name:"Bolivia",code:"BO"},{name:"Brazil",code:"BR"},{name:"Chile",code:"CL"},{name:"Colombia",code:"CO"},{name:"Ecuador",code:"EC"},{name:"Guyana",code:"GY"},{name:"Paraguay",code:"PY"},{name:"Peru",code:"PE"},{name:"Suriname",code:"SR"},{name:"Uruguay",code:"UY"},{name:"Venezuela",code:"VE"}]},{id:"oceania",name:"Oceania",description:"Island-hop across the Pacific by generating every sovereign flag in Oceania.",countries:[{name:"Australia",code:"AU"},{name:"Fiji",code:"FJ"},{name:"Kiribati",code:"KI"},{name:"Marshall Islands",code:"MH"},{name:"Micronesia",code:"FM"},{name:"Nauru",code:"NR"},{name:"New Zealand",code:"NZ"},{name:"Palau",code:"PW"},{name:"Papua New Guinea",code:"PG"},{name:"Samoa",code:"WS"},{name:"Solomon Islands",code:"SB"},{name:"Tonga",code:"TO"},{name:"Tuvalu",code:"TV"},{name:"Vanuatu",code:"VU"}]}],Dd=Yn.reduce((e,t)=>(e[t.id]=t,e),{}),xw=()=>Yn.reduce((e,t)=>(e[t.id]=t.countries.map(f0),e),{}),vw=()=>Yn.reduce((e,t)=>(e[t.id]={running:!1,completed:!1},e),{});function yw({entry:e}){const{country:t,dataUrl:r,error:n,prompt:a,status:i}=e,o=typeof t.population=="number"&&Number.isFinite(t.population)?`2025 est. population: ${gw.format(t.population)}`:null;return c.jsxs("article",{className:"space-y-3 rounded-2xl border border-slate-200 bg-white/80 p-5 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[c.jsxs("header",{className:"space-y-3 text-center",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{className:"inline-flex items-center gap-2 text-lg font-semibold text-slate-800 dark:text-slate-100",children:[c.jsx(jd,{countryCode:t.code,svg:!0,title:`${t.name} reference flag`,className:"text-2xl"}),c.jsx("span",{children:t.name})]}),o?c.jsx("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:o}):null]}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Unicode reference flag for quick color checks."})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"overflow-hidden rounded-xl border border-slate-200 bg-slate-50 p-2 dark:border-slate-700 dark:bg-slate-800",children:c.jsx(jd,{countryCode:t.code,svg:!0,title:`${t.name} official flag`,className:"block h-24 w-full"})}),c.jsx("div",{className:"overflow-hidden rounded-xl border border-brand-200 bg-white p-2 text-center dark:border-brand-500/60 dark:bg-slate-900",children:r?c.jsx("img",{src:r,alt:`Generated ${t.name} flag`,className:"h-24 w-full object-contain",loading:"lazy"}):c.jsx("div",{className:"flex h-24 items-center justify-center text-xs font-medium text-slate-400 dark:text-slate-500",children:i==="error"?"Generation failed":i==="loading"?"Loading flagâ€¦":"Pending request"})})]}),c.jsxs("footer",{className:"space-y-2 text-xs text-slate-500 dark:text-slate-400",children:[c.jsx("p",{className:"rounded-lg bg-slate-100 px-3 py-2 font-medium text-slate-600 dark:bg-slate-800/70 dark:text-slate-300",children:a||`Waiting to request the ${t.name} flagâ€¦`}),n?c.jsx("p",{className:"text-red-500 dark:text-red-400",children:n}):null]})]})}function bw({experience:e}){const[t,r]=b.useState(xw),[n,a]=b.useState(vw),i=b.useMemo(()=>(e?.svgApiBaseUrl||e?.defaultBaseUrl||"https://groq-endpoint.louispaulet13.workers.dev").replace(/\/$/,""),[e]),o=b.useRef({}),s=b.useRef(!1),l=b.useRef(n),d=b.useCallback(m=>{a(g=>{const x=typeof m=="function"?m(g):m;return l.current=x,x})},[]);b.useEffect(()=>{s.current=!1;const m=o.current;return()=>{s.current=!0,Object.values(m).forEach(g=>{g&&clearTimeout(g)})}},[]);const u=b.useCallback((m,g,x)=>{r(y=>{const w=(y[m]||[]).map((S,C)=>C===g?{...S,...x}:S);return{...y,[m]:w}})},[]),h=b.useCallback((m,g)=>{const x=Dd[m];if(!x||s.current)return;if(g>=x.countries.length){d(w=>({...w,[m]:{running:!1,completed:!0}})),o.current[m]=void 0;return}const v=`Generate an accurate flat SVG of the national flag of ${x.countries[g].name}. Respect the official proportions and palette.`;u(m,g,{status:"loading",prompt:v,error:"",dataUrl:""}),(async()=>{try{const w=new URL(`${i}/svg/${encodeURIComponent(v)}`),S=await fetch(w.toString());if(!S.ok)throw new Error(`Request failed with status ${S.status}`);const C=await S.json(),k=mw(C);if(!k)throw new Error("The response did not include SVG markup.");u(m,g,{status:"done",dataUrl:k,prompt:typeof C?.prompt=="string"&&C.prompt.trim()?C.prompt.trim():v})}catch(w){u(m,g,{status:"error",error:w instanceof Error?w.message:"Unexpected error while generating the flag."})}finally{s.current||(o.current[m]=setTimeout(()=>h(m,g+1),pw))}})()},[i,d,u]),f=b.useCallback((m,{force:g=!1}={})=>{const x=Dd[m];!x||l.current[m]?.running&&!g||(r(v=>({...v,[m]:x.countries.map(f0)})),d(v=>({...v,[m]:{running:!0,completed:!1}})),o.current[m]&&clearTimeout(o.current[m]),o.current[m]=setTimeout(()=>h(m,0),200))},[h,d]);b.useEffect(()=>{f("europe")},[f]);const p=b.useCallback(()=>{Yn.forEach(m=>{f(m.id,{force:!0})})},[f]);return c.jsxs("div",{className:"space-y-8",children:[c.jsx("section",{className:"rounded-2xl border border-slate-200 bg-white/80 p-6 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:c.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[c.jsx("button",{type:"button",onClick:p,className:"inline-flex items-center justify-center rounded-full border border-brand-500/20 bg-brand-500/10 px-5 py-2 text-sm font-semibold text-brand-700 transition hover:bg-brand-500/20 focus:outline-none focus-visible:ring-2 focus-visible:ring-brand-500/40 dark:border-brand-400/30 dark:bg-brand-400/10 dark:text-brand-200 dark:hover:bg-brand-400/20",children:"Generate every flag"}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 sm:max-w-xs",children:"Please remember API rate limits â€” this triggers hundreds of sequential calls, so let the queue finish before retrying."})]})}),Yn.map(m=>{const g=t[m.id]||[],x=n[m.id]||{running:!1,completed:!1},y=x.running?"Generatingâ€¦":x.completed?"Regenerate flags":m.id==="europe"?"Regenerate Europe":`Generate ${m.name}`;return c.jsxs("section",{className:"space-y-4 rounded-2xl border border-slate-200 bg-white/80 p-6 shadow-sm dark:border-slate-700 dark:bg-slate-900/60",children:[c.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("h3",{className:"text-base font-semibold text-slate-800 dark:text-slate-100",children:m.name}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:m.description})]}),c.jsx("button",{type:"button",onClick:()=>f(m.id),disabled:x.running,className:"inline-flex items-center justify-center rounded-full border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-700 transition hover:bg-slate-100 focus:outline-none focus-visible:ring-2 focus-visible:ring-brand-500 disabled:cursor-not-allowed disabled:border-slate-200 disabled:bg-slate-100 disabled:text-slate-400 dark:border-slate-600 dark:bg-slate-800 dark:text-slate-200 dark:hover:bg-slate-700 dark:disabled:border-slate-700 dark:disabled:bg-slate-900/60 dark:disabled:text-slate-500",children:y})]}),c.jsx("div",{className:"grid gap-6 md:grid-cols-2 xl:grid-cols-3",children:g.map(v=>c.jsx(yw,{entry:v},v.country.code))})]},m.id)})]})}const jo=[{id:"dirty-hands-hot-dog",title:"Dirty Hands Hot Dog",description:"Classic street food experience enhanced by authentic grime and possible tetanus. Hand flavor included.",price:"â‚¬2.50",image:"/secondhand_food_market/hot_dog_dirty_hands.png",curse:"Seasoned with axle grease memories and unverified relish.",category:"food"},{id:"bath-water-vial",title:"Bath Water Vial",description:"Artisanal bottled bath water. Collected fresh after a long, reflective soak. Slightly soapy undertones.",price:"â‚¬9.99",image:"/secondhand_food_market/bath_water_vial.png",curse:"Infused with existential dread and three stray eyelashes.",category:"spells-and-potions"},{id:"influencer-tears",title:"Influencer Tears",description:"A concentrated vial of algorithm-approved despair, perfect for potions requiring boosted engagement or dramatic flair.",price:"â‚¬14.40",image:"/secondhand_food_market/influencer_tears.png",curse:"May summon parasocial hauntings and the faint echo of sponsored apologies.",category:"spells-and-potions"},{id:"liquid-serenity-potion",title:"Liquid Serenity Potion",description:"A luminous tonic that jolts your ambition while smoothing out every frayed nerve, ideal for nights requiring sharp focus and soft edges.",price:"â‚¬11.11",image:"/secondhand_food_market/liquid_serenity_potion.png",curse:"Grants tranquil alertness until the witching hour, then insists on karaoke with unexpected confidence.",category:"spells-and-potions"},{id:"lipstick-starbucks-drink",title:"Lipstick Starbucks Drink",description:"Half-finished caramel latte featuring a bold lipstick accent. A kiss of mystery and backwash.",price:"â‚¬4.00",image:"/secondhand_food_market/didnt_use_the_straw.png",curse:"Guaranteed to share secrets you never wanted to overhear.",category:"food"},{id:"sushi-minus-fish",title:"Sushi Minus Fish",description:"A minimalist sushi experience. Eight perfect rice ovals, all the fish gone to a better place.",price:"â‚¬5.50",image:"/secondhand_food_market/oops_i_ate_all_the_fish.png",curse:"Haunted by the ghosts of sashimi past.",category:"food"},{id:"foot-stomped-pizza",title:"Foot-Stomped Pizza",description:"Freshly stepped-on pepperoni pizza. Notes of human warmth and crushed dignity.",price:"â‚¬6.66",image:"/secondhand_food_market/pizza_stomp.png",curse:"Pairs well with toe jam and despair.",category:"food"},{id:"single-bite-burger",title:"Single Bite Burger",description:"Perfectly intact except for one large bite. Comes with existential regret and saliva residue.",price:"â‚¬3.20",image:"/secondhand_food_market/single_bite_burger.png",curse:"Whispers â€œyou should have been fasterâ€ with every chew.",category:"food"},{id:"pizza-missing-slice",title:"Pizza Missing a Slice",description:"Generous seven-slice offering, ideal for those who love paying full price for less.",price:"â‚¬7.00",image:"/secondhand_food_market/pizza_missing_slice.png",curse:"Forever incomplete; every slice tastes like absence.",category:"food"},{id:"butter-without-packaging",title:"Butter Without Packaging",description:"Naked butter bar, hand-temperature. Comes with a faint scent of palm sweat and trust issues.",price:"â‚¬1.80",image:"/secondhand_food_market/butter_without_packaging.png",curse:"Melts faster when you start asking questions.",category:"food"},{id:"forgotten-office-coffee",title:"Forgotten Office Coffee",description:"Corporate relic in a branded mug, brewed last week and abandoned during the big move.",price:"â‚¬1.10",image:"/secondhand_food_market/forgotten_coffee.png",curse:"Tastes like burnout and three rescheduled meetings.",category:"food"},{id:"microwaved-yesterday-fries",title:"Reheated Fries Offer",description:"Yesterday's fast food fries revived by microwave - soggy, lukewarm, and surprisingly affordable.",price:"â‚¬0.80",image:"/secondhand_food_market/reheated_fries.png",curse:"Forever haunted by the crunch they once had.",category:"food"}];function ww(){const e=jo.filter(r=>r.category!=="spells-and-potions"),t=jo.filter(r=>r.category==="spells-and-potions");return c.jsxs("div",{className:"space-y-12",children:[c.jsxs("section",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-amber-500 via-rose-500 to-brand-600 px-8 py-14 text-white shadow-xl",children:[c.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.2),_transparent_55%)]","aria-hidden":!0}),c.jsxs("div",{className:"relative z-10 grid gap-10 lg:grid-cols-[minmax(0,1.2fr)_minmax(0,1fr)] lg:items-center",children:[c.jsxs("div",{className:"space-y-5",children:[c.jsxs("p",{className:"inline-flex items-center gap-2 rounded-full bg-white/15 px-4 py-1 text-xs font-semibold uppercase tracking-[0.35em] text-white/80",children:[c.jsx(Zu,{className:"h-4 w-4","aria-hidden":!0}),"Pop-Up Market"]}),c.jsx("h1",{className:"text-3xl font-semibold sm:text-4xl",children:"Second-Hand Food Market"}),c.jsx("p",{className:"max-w-2xl text-sm leading-relaxed text-white/85",children:"Welcome to the dystopian deli counter where hygiene laws dare not tread. Each pre-loved delicacy arrives with a bespoke curse, a suspicious backstory, and a non-refundable price tag. Shop fastâ€”before the health inspector finds us."}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[c.jsxs(Oe,{to:"/",className:"inline-flex items-center gap-2 rounded-full bg-white px-4 py-2 text-sm font-semibold text-brand-700 shadow transition hover:bg-brand-50",children:["Back to overview",c.jsx("span",{"aria-hidden":!0,children:"â†’"})]}),c.jsx("span",{className:"inline-flex items-center gap-2 rounded-full bg-white/20 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-white/80",children:"Curses complimentary"})]})]}),c.jsx("div",{className:"relative hidden h-full lg:flex",children:c.jsxs("div",{className:"relative w-full max-w-md rounded-3xl border border-white/30 bg-white/10 p-6 shadow-lg backdrop-blur",children:[c.jsx("div",{className:"absolute -top-10 right-4 h-20 w-20 rounded-full bg-white/10 blur-2xl","aria-hidden":!0}),c.jsxs("div",{className:"space-y-4 text-sm text-white/90",children:[c.jsxs("div",{className:"flex items-center gap-2 text-xs uppercase tracking-[0.3em] text-white/70",children:[c.jsx(Hp,{className:"h-4 w-4","aria-hidden":!0}),"Certified Questionable"]}),c.jsx("p",{children:"Groqâ€™s procurement goblins scoured back-alley buffets and underground potlucks to curate this ethically dubious tasting menu. Each item ships in a suspicious paper bag alongside a legal waiver scented with despair."}),c.jsx("p",{children:"Pro tip: pair with a tetanus shot and a strong stomach. Returns politely redirected to the nearest void."})]})]})})]})]}),c.jsxs("section",{className:"space-y-8",children:[c.jsxs("header",{className:"space-y-3",children:[c.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Tonightâ€™s questionable specials ðŸ›’"}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Every listing comes with the sellerâ€™s original fingerprints, unresolved drama, and an enthusiastic â€œBuy Nowâ€ button that doesnâ€™t actually do anything. Please enjoy responsiblyâ€”or at least ironically."})]}),c.jsx("div",{className:"grid gap-6 md:grid-cols-2 xl:grid-cols-3",children:e.map(r=>c.jsxs("article",{className:"group relative flex flex-col overflow-hidden rounded-3xl border border-slate-200 bg-white/95 shadow-sm transition hover:border-brand-400/60 hover:shadow-xl dark:border-slate-800 dark:bg-slate-900/95",children:[c.jsxs("div",{className:"relative aspect-square w-full overflow-hidden bg-slate-900/80",children:[c.jsx("img",{src:r.image,alt:r.title,className:"h-full w-full object-cover transition duration-500 group-hover:scale-105",loading:"lazy"}),c.jsx("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-slate-900/80 to-transparent p-4 text-xs uppercase tracking-[0.3em] text-white/75",children:r.curse})]}),c.jsxs("div",{className:"flex flex-1 flex-col space-y-4 p-6",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:r.title}),c.jsx("p",{className:"text-sm leading-relaxed text-slate-600 dark:text-slate-300",children:r.description})]}),c.jsxs("div",{className:"mt-auto flex items-center justify-between pt-2",children:[c.jsx("span",{className:"text-sm font-semibold text-brand-600 dark:text-brand-400",children:r.price}),c.jsxs("button",{type:"button",className:"inline-flex items-center gap-2 rounded-full border border-brand-500/40 bg-brand-500/10 px-4 py-1.5 text-xs font-semibold uppercase tracking-wide text-brand-700 transition hover:border-brand-500 hover:bg-brand-500/20 dark:text-brand-300",children:["Buy Now",c.jsx("span",{"aria-hidden":!0,children:"â†’"})]})]})]})]},r.id))})]}),t.length>0&&c.jsxs("section",{className:"space-y-8",children:[c.jsxs("header",{className:"space-y-3",children:[c.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Spells & Potions Annex ðŸ”®"}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"For patrons seeking something more arcane than reheated leftovers, we stashed the enchanted liquids and curious brews down here. Ingredients may include moonlight, discarded wishes, and probably soap."})]}),c.jsx("div",{className:"grid gap-6 md:grid-cols-2 xl:grid-cols-3",children:t.map(r=>c.jsxs("article",{className:"group relative flex flex-col overflow-hidden rounded-3xl border border-slate-200 bg-white/95 shadow-sm transition hover:border-brand-400/60 hover:shadow-xl dark:border-slate-800 dark:bg-slate-900/95",children:[c.jsxs("div",{className:"relative aspect-square w-full overflow-hidden bg-slate-900/80",children:[c.jsx("img",{src:r.image,alt:r.title,className:"h-full w-full object-cover transition duration-500 group-hover:scale-105",loading:"lazy"}),c.jsx("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-slate-900/80 to-transparent p-4 text-xs uppercase tracking-[0.3em] text-white/75",children:r.curse})]}),c.jsxs("div",{className:"flex flex-1 flex-col space-y-4 p-6",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:r.title}),c.jsx("p",{className:"text-sm leading-relaxed text-slate-600 dark:text-slate-300",children:r.description})]}),c.jsxs("div",{className:"mt-auto flex items-center justify-between pt-2",children:[c.jsx("span",{className:"text-sm font-semibold text-brand-600 dark:text-brand-400",children:r.price}),c.jsxs("button",{type:"button",className:"inline-flex items-center gap-2 rounded-full border border-brand-500/40 bg-brand-500/10 px-4 py-1.5 text-xs font-semibold uppercase tracking-wide text-brand-700 transition hover:border-brand-500 hover:bg-brand-500/20 dark:text-brand-300",children:["Buy Now",c.jsx("span",{"aria-hidden":!0,children:"â†’"})]})]})]})]},r.id))})]}),c.jsx("section",{className:"overflow-hidden rounded-3xl border border-slate-200 bg-white/80 p-8 shadow-sm dark:border-slate-800 dark:bg-slate-900/80",children:c.jsxs("div",{className:"grid gap-8 lg:grid-cols-[minmax(0,1fr)_minmax(0,0.9fr)] lg:items-center",children:[c.jsxs("div",{className:"space-y-3 text-sm leading-relaxed text-slate-600 dark:text-slate-300",children:[c.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Satisfaction not guaranteed"}),c.jsx("p",{children:"By tapping any button above, you agree to our 48-page End-Of-Taste waiver, accept that flavor timelines are non-linear, and acknowledge that cursed calories still count. Remember: if it looks haunted, it probably is."}),c.jsx("p",{children:"Need palate cleanser recommendations after this experience? Swing by AllergyFinder or Pizza Maker for something less contaminated. Maybe."})]}),c.jsxs("div",{className:"rounded-2xl border border-dashed border-brand-500/50 bg-brand-50/60 p-6 text-brand-700 dark:border-brand-400/50 dark:bg-brand-500/10 dark:text-brand-200",children:[c.jsx("h3",{className:"text-sm font-semibold uppercase tracking-[0.3em]",children:"Menu JSON"}),c.jsx("p",{className:"mt-2 text-sm",children:"Import this cursed catalogue into Object Maker at your own risk. Side effects include laughter, discomfort, and sudden urges to disinfect your soul."}),c.jsx("pre",{className:"mt-4 max-h-52 overflow-auto rounded-xl bg-slate-900/90 p-4 text-xs text-emerald-200",children:JSON.stringify(jo.map(({title:r,description:n,price:a,image:i})=>({title:r,description:n,price:a,image:i})),null,2)})]})]})})]})}const Pt=720,Ot=420,wr=12,pt=96,Pr=32,mt=10,Ea=300,Na=90,Rd=4,Ld=.12,_w="pong_theme",Cw="meta-llama/llama-4-maverick-17b-128e-instruct",Md=15e3,Pd=45e3,Sw={type:"object",additionalProperties:!1,properties:{styleName:{type:"string"},stylePrompt:{type:"string"},colors:{type:"array",items:{type:"object",additionalProperties:!1,properties:{role:{type:"string",enum:["background","leftPaddle","rightPaddle","ball","accent","scoreText"]},hex:{type:"string"},prompt:{type:"string"}},required:["role","hex","prompt"]}}},required:["styleName","stylePrompt","colors"]},$a={styleName:"Neon Baseline",stylePrompt:"Default neon training wheels for the first serve.",colors:[{role:"background",hex:"#0f172a",prompt:"Deep navy void so the rest of the palette glows."},{role:"leftPaddle",hex:"#f87171",prompt:"Cherry paddle for Player One swagger."},{role:"rightPaddle",hex:"#34d399",prompt:"Mint paddle for Player Two chill."},{role:"ball",hex:"#facc15",prompt:"Electric canary ball to track the volley."},{role:"accent",hex:"#38bdf8",prompt:"Icy cyan grid lines and HUD glints."},{role:"scoreText",hex:"#e2e8f0",prompt:"Frosted typography keeps the score readable."}]},ul={background:"#0f172a",leftPaddle:"#ef4444",rightPaddle:"#22d3ee",ball:"#facc15",accent:"#38bdf8",scoreText:"#f8fafc"},Aw={background:"Background",leftPaddle:"Left Paddle",rightPaddle:"Right Paddle",ball:"Ball",accent:"Accent & Lines",scoreText:"Score Text"};function ps(e,t,r){return Math.min(Math.max(e,t),r)}function hi(e){if(typeof e!="string")return null;const t=e.trim();if(!t)return null;const r=t.match(/#?[0-9a-fA-F]{6}/);return r?r[0].startsWith("#")?r[0].toUpperCase():`#${r[0].toUpperCase()}`:null}function Do(e,t){const r=hi(e);if(!r)return`rgba(15, 23, 42, ${t})`;const n=r.slice(1),a=Number.parseInt(n,16),i=a>>16&255,o=a>>8&255,s=a&255;return`rgba(${i}, ${o}, ${s}, ${ps(t,0,1)})`}function kw(e){const t=typeof e?.styleName=="string"?e.styleName.trim():"",r=typeof e?.stylePrompt=="string"?e.stylePrompt.trim():"";let a=(Array.isArray(e?.colors)?e.colors:[]).map(i=>{const o=typeof i?.role=="string"?i.role:"",s=hi(i?.hex),l=typeof i?.prompt=="string"?i.prompt.trim():"";return!o||!s||!l||!Object.prototype.hasOwnProperty.call(ul,o)?null:{role:o,hex:s,prompt:l}}).filter(Boolean);return a.length>6&&(a=a.slice(0,6)),a.length<4?$a:{styleName:t||"Untitled Theme",stylePrompt:r||"A surprise volley of color from the model.",colors:a}}function Ew({reason:e,scores:t,previousStyle:r}){const n=e==="left-paddle"?"Left paddle just made contactâ€”reward the defense with a fresh look.":e==="right-paddle"?"Right paddle returned the shotâ€”give the offense a new flair.":e==="score-left"?"Left side scored. Celebrate with a confident palette shift.":e==="score-right"?"Right side scored. Cue a comeback-ready palette.":"Opening serve deserves a stylish stage.",a=r?`Avoid reusing the exact style name "${r}".`:"";return["You design vivid, legible themes for a web-based Pong arena.","Return JSON that satisfies the provided schema. Provide between four and six colors.","Each color entry must have a role from the allowed enum, a #RRGGBB hex value, and a prompt sentence describing how the color looks in the scene.","Ensure the background contrasts strongly with paddles and ball for accessibility.","Let the accent color cover center line, particle sparks, and UI chrome.",`Current score: Left ${t.left} Â· Right ${t.right}.`,n,"Keep styleName to 2-4 words, and let stylePrompt be one energetic sentence about the vibe.","Make each palette feel distinct from the previous round and embrace playful arcade moods.",a].filter(Boolean).join(`
`)}function Nw(e){const t={...ul};return e?.colors&&e.colors.forEach(r=>{r?.role&&hi(r?.hex)&&(t[r.role]=hi(r.hex))}),t}function Tw(){const[e,t]=b.useState($a),[r,n]=b.useState(!1),[a,i]=b.useState(""),[o,s]=b.useState([{theme:$a,reason:"Opening serve",timestamp:Date.now()}]),l=b.useRef(!1),d=b.useRef($a),u=b.useRef("initial"),h=b.useRef(0),f=b.useRef(0),p=b.useRef(null),m=b.useRef({left:0,right:0});b.useEffect(()=>{d.current=e},[e]),b.useEffect(()=>()=>{p.current&&(clearTimeout(p.current),p.current=null)},[]);const g=b.useCallback(({reason:x,scores:y})=>{m.current=y;const v=(k,A)=>{if(typeof window>"u")return;const N=Math.max(0,Number.isFinite(k)?k:0);p.current&&(clearTimeout(p.current),p.current=null),p.current=window.setTimeout(()=>{p.current=null,g({reason:A,scores:m.current})},N)};if(l.current)return u.current=x,{status:"queued"};const w=Date.now();if(f.current&&w<f.current)return i("Rate limit hit. Cooling down before the next theme."),v(f.current-w,x),{status:"rate-limited"};const S=w-h.current;return S<Md?(v(Md-S,x),{status:"delayed"}):(p.current&&(clearTimeout(p.current),p.current=null),l.current=!0,u.current="initial",n(!0),i(""),h.current=w,(async()=>{try{const k=Ew({reason:x,scores:y,previousStyle:d.current?.styleName}),{payload:A}=await ca({structure:Sw,objectType:_w,prompt:k,strict:!0,model:Cw}),N=kw(A);t(N),s(B=>[{theme:N,reason:x,timestamp:Date.now(),prompt:k},...B].slice(0,8)),f.current=0}catch(k){console.error("Theme request failed",k),k?.message?.includes("HTTP 429")?(i("Rate limit hit. Cooling down before the next theme."),f.current=Date.now()+Pd,v(Pd,x)):i(k?.message||"Theme request failed")}finally{if(n(!1),l.current=!1,u.current!=="initial"){const k=u.current;u.current="initial",g({reason:k,scores:m.current})}}})(),{status:"started"})},[]);return{theme:e,loading:r,error:a,history:o,requestTheme:g}}function Iw(){const e=b.useRef(null),t=b.useRef(null),r=b.useRef(null),n=b.useRef({x:Pt/2,y:Ot/2,vx:Na,vy:Na*.6,cooldown:0}),a=b.useRef({y:Ot/2-pt/2}),i=b.useRef({y:Ot/2-pt/2}),o=b.useRef({left:0,right:0}),[s,l]=b.useState({left:0,right:0}),[d,u]=b.useState("Spooling up the arenaâ€¦"),{theme:h,loading:f,error:p,history:m,requestTheme:g}=Tw(),x=b.useMemo(()=>Nw(h),[h]),y=b.useRef(x);b.useEffect(()=>{y.current=x},[x]);const v=b.useCallback(k=>{n.current={x:Pt/2,y:Ot/2,vx:(k==="left"?-1:1)*Na,vy:(Math.random()>.5?1:-1)*(Na*(.4+Math.random()*.4)),cooldown:Ld}},[]),w=b.useCallback(k=>{const A=k,N={"left-paddle":"Left paddle deflects the rallyâ€”palette remix unlocked.","right-paddle":"Right paddle counters in styleâ€”new colors inbound.","score-left":"Left side banks a point and claims a fresh vibe.","score-right":"Right side scores and the court reinvents itself.",initial:"Opening serve ignites the palette generator."},B=g({reason:A,scores:o.current}),E=N[A]||"New theme charging upâ€¦",I=B?.status==="rate-limited"?"Rate limit reached. Cooling down before new colors.":B?.status==="delayed"?"Cooling down the palette generatorâ€¦":B?.status==="queued"?"Palette update queuedâ€¦":E;u(I)},[g]);b.useEffect(()=>{w("initial")},[w]),b.useEffect(()=>{const k=e.current;if(!k)return;const A=k.getContext("2d");r.current=null;const N=B=>{r.current||(r.current=B);const E=(B-r.current)/1e3;r.current=B;const I=n.current,F=a.current,V=i.current;I.cooldown=Math.max(0,I.cooldown-E);const M=F.y+pt/2,L=V.y+pt/2,R=.6,U=I.y-pt*.25,$=I.y+pt*.25;M<U?F.y+=Ea*R*E:M>U&&(F.y-=Ea*R*E),L<$?V.y+=Ea*R*E:L>$&&(V.y-=Ea*R*E),F.y=ps(F.y,0,Ot-pt),V.y=ps(V.y,0,Ot-pt),I.x+=I.vx*E,I.y+=I.vy*E,I.y-mt<=0&&I.vy<0?(I.y=mt,I.vy=Math.abs(I.vy)):I.y+mt>=Ot&&I.vy>0&&(I.y=Ot-mt,I.vy=-Math.abs(I.vy));const j=(te,ge)=>{if(I.cooldown>0)return!1;const J=te.y,ce=te.y+pt;if(I.y+mt<J||I.y-mt>ce)return!1;if(ge==="left")if(I.x-mt<=Pr+wr&&I.vx<0)I.x=Pr+wr+mt,I.vx=Math.abs(I.vx)+Rd;else return!1;else if(I.x+mt>=Pt-Pr-wr&&I.vx>0)I.x=Pt-Pr-wr-mt,I.vx=-(Math.abs(I.vx)+Rd);else return!1;const P=(I.y-(te.y+pt/2))/(pt/2);return I.vy+=P*120,I.cooldown=Ld,!0},z=j(F,"left"),q=j(V,"right");if(z?w("left-paddle"):q&&w("right-paddle"),I.x+mt<0){const te={left:o.current.left,right:o.current.right+1};o.current=te,l({...te}),w("score-right"),v("right")}else if(I.x-mt>Pt){const te={left:o.current.left+1,right:o.current.right};o.current=te,l({...te}),w("score-left"),v("left")}const Y=y.current;A.fillStyle=Y.background,A.fillRect(0,0,Pt,Ot),A.strokeStyle=Do(Y.accent,.6),A.setLineDash([10,14]),A.lineWidth=4,A.beginPath(),A.moveTo(Pt/2,16),A.lineTo(Pt/2,Ot-16),A.stroke(),A.setLineDash([]),A.fillStyle=Y.leftPaddle,A.fillRect(Pr,F.y,wr,pt),A.fillStyle=Y.rightPaddle,A.fillRect(Pt-Pr-wr,V.y,wr,pt),A.fillStyle=Y.ball,A.beginPath(),A.arc(I.x,I.y,mt,0,Math.PI*2),A.fill(),t.current=requestAnimationFrame(N)};return t.current=requestAnimationFrame(N),()=>{t.current&&cancelAnimationFrame(t.current)}},[v,w]);const S=b.useMemo(()=>Do(x.accent,.35),[x.accent]),C=b.useMemo(()=>Do(x.accent,.18),[x.accent]);return c.jsxs("div",{className:"space-y-10",children:[c.jsxs("section",{className:"relative overflow-hidden rounded-[2.75rem] border border-slate-200/40 bg-slate-900 text-slate-50 shadow-xl",children:[c.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(148,163,184,0.35),_transparent_55%)]","aria-hidden":!0}),c.jsxs("div",{className:"relative z-10 grid gap-8 p-8 lg:grid-cols-[minmax(0,2fr)_minmax(0,3fr)] lg:items-center",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-200/70",children:"Groq Arcade Â· Auto Pong"}),c.jsx("h1",{className:"text-3xl font-semibold sm:text-4xl",children:"Pong Showdown"}),c.jsxs("p",{className:"text-base leading-relaxed text-slate-200/90",children:["Watch two AI paddles volley while Groq LLAMA 4 models remix the arena's palette on every clutch play. Each collision or score fires a structured ",c.jsx("code",{className:"mx-1 rounded bg-slate-50/10 px-1 py-0.5 text-[0.7rem] font-semibold",children:"/obj"})," call that returns fresh colors, usage prompts, and a vibe-forward style name."]}),c.jsx("p",{className:"text-sm text-slate-300/80",children:d})]}),c.jsxs("div",{className:"relative flex flex-col gap-4",children:[c.jsxs("div",{className:"flex items-center justify-between rounded-2xl px-5 py-4 shadow-lg",style:{backgroundColor:C,border:`1px solid ${S}`,color:x.scoreText},children:[c.jsxs("div",{className:"text-left",children:[c.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-100/70",children:"Current Theme"}),c.jsx("p",{className:"text-2xl font-semibold text-slate-50",children:h?.styleName}),c.jsx("p",{className:"text-sm text-slate-100/80",children:h?.stylePrompt})]}),c.jsxs("div",{className:"flex flex-col items-end text-right text-sm text-slate-100/90",children:[c.jsxs("div",{className:"flex items-center gap-3 text-lg font-semibold",children:[c.jsx("span",{children:"Left"}),c.jsx("span",{children:s.left})]}),c.jsxs("div",{className:"flex items-center gap-3 text-lg font-semibold",children:[c.jsx("span",{children:"Right"}),c.jsx("span",{children:s.right})]}),f?c.jsx("span",{className:"mt-2 text-xs uppercase tracking-wide text-slate-100/60",children:"Updating themeâ€¦"}):null,p?c.jsx("span",{className:"mt-2 text-xs text-rose-200",children:p}):null]})]}),c.jsxs("div",{className:"rounded-2xl border border-slate-200/30 bg-slate-950/60 p-4 text-xs text-slate-300/80 backdrop-blur",children:[c.jsx("p",{className:"text-[0.65rem] uppercase tracking-[0.35em] text-slate-400",children:"How the palette arrives"}),c.jsxs("p",{children:["Themes are minted via ",c.jsx("span",{className:"font-semibold",children:"meta-llama/llama-4-maverick-17b-128e-instruct"})," on the Groq endpoint with a schema demanding named roles and prompts. The paddle AI sticks to classic Pong so the colors steal the show."]})]})]})]})]}),c.jsxs("section",{className:"grid gap-8 lg:grid-cols-[minmax(0,3fr)_minmax(0,2fr)]",children:[c.jsx("div",{className:"space-y-4",children:c.jsx("div",{className:"relative overflow-hidden rounded-3xl border border-slate-200/40 bg-slate-950 shadow-inner",children:c.jsx("canvas",{ref:e,width:Pt,height:Ot,className:"h-full w-full object-contain",style:{backgroundColor:x.background}})})}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"rounded-3xl border border-slate-200/40 bg-white/80 p-5 shadow-sm backdrop-blur dark:border-slate-700 dark:bg-slate-900/70",children:[c.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-500 dark:text-slate-400",children:"Palette roles"}),c.jsx("ul",{className:"mt-4 space-y-3 text-sm",children:Object.keys(ul).map(k=>{const A=h?.colors?.find(B=>B.role===k),N=x[k];return c.jsxs("li",{className:"flex gap-3",children:[c.jsx("span",{className:"mt-1 inline-flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-full border border-slate-200 text-xs font-semibold",style:{backgroundColor:N,color:k==="background"?"#0f172a":"#020617"},children:k.slice(0,1).toUpperCase()}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-100",children:Aw[k]}),c.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400",children:N}),c.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:A?.prompt||"Default prompt applied."})]})]},k)})})]}),c.jsxs("div",{className:"rounded-3xl border border-slate-200/40 bg-white/70 p-5 text-sm shadow-sm backdrop-blur dark:border-slate-700 dark:bg-slate-900/60",children:[c.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-500 dark:text-slate-400",children:"Recent volleys"}),c.jsx("ul",{className:"mt-3 space-y-3",children:m.map(k=>c.jsxs("li",{className:"rounded-2xl border border-slate-200/40 bg-white/60 p-3 text-xs shadow-sm dark:border-slate-700 dark:bg-slate-900/50",children:[c.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-100",children:k.theme.styleName}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:k.theme.stylePrompt}),c.jsxs("p",{className:"mt-1 text-[0.65rem] uppercase tracking-wide text-slate-400",children:["Trigger: ",k.reason.replace("-"," ")," Â· ",new Date(k.timestamp).toLocaleTimeString()]})]},k.timestamp))})]})]})]})]})}const Fd=10,Ro="/",Ow=`${Ro.endsWith("/")?Ro:`${Ro}/`}data/dalle-flux-comparison.csv`;function $d(e){return e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}function Bw(e,t,r){let n="png";try{const s=new URL(e).pathname,l=s.lastIndexOf(".");l!==-1&&l<s.length-1&&(n=s.slice(l+1))}catch{}const a=$d(t).slice(0,48)||"artwork",i=$d(r);return`${i?`${i}-`:""}${a}.${n}`}function jw(e){const t=[];let r="",n=[],a=!1;for(let i=0;i<e.length;i+=1){const o=e[i];if(a){o==='"'?e[i+1]==='"'?(r+='"',i+=1):a=!1:r+=o;continue}if(o==='"'){a=!0;continue}if(o===","){n.push(r),r="";continue}if(o!=="\r"){if(o===`
`){n.push(r),n.some(s=>s!=="")&&t.push(n),n=[],r="";continue}r+=o}}if(a)throw new Error("CSV parse error: unmatched quote");return n.push(r),n.some(i=>i!=="")&&t.push(n),t}function Dw(e){const t=jw(e);if(!t.length)return[];const r=t[0].map(d=>d.trim().toLowerCase()),n=r.indexOf("prompt"),a=r.indexOf("file_flux_url"),i=r.indexOf("file_dalle_url"),o=r.indexOf("category");if(n===-1||a===-1||i===-1)throw new Error("CSV header missing required columns");const s=[n,a,i];o!==-1&&s.push(o);const l=Math.max(...s);return t.slice(1).filter(d=>d.length>l).map(d=>({prompt:d[n]?.trim()||"",fluxUrl:d[a]?.trim()||"",dalleUrl:d[i]?.trim()||"",category:o===-1?"Uncategorized":d[o]?.trim()||"Uncategorized"})).filter(d=>d.prompt&&d.fluxUrl&&d.dalleUrl)}function Rw(e,t){const[r,n]=b.useState(1),a=Math.max(1,Math.ceil(e.length/t)),i=Math.min(r,a),o=(i-1)*t,s=b.useMemo(()=>e.slice(o,o+t),[e,o,t]),l=h=>{if(Number.isNaN(h))return;const f=Math.min(Math.max(h,1),a);n(f)};return{page:i,totalPages:a,pageItems:s,goToPage:l,goToPrevious:()=>l(i-1),goToNext:()=>l(i+1)}}function Lw(){const[e,t]=b.useState([]),[r,n]=b.useState("loading"),[a,i]=b.useState(""),[o,s]=b.useState("all"),[l,d]=b.useState("");b.useEffect(()=>{let E=!1;async function I(){n("loading"),i("");try{const F=await fetch(Ow,{headers:{Accept:"text/csv"}});if(!F.ok)throw new Error(`Failed to load CSV (status ${F.status})`);const V=await F.text(),M=Dw(V);E||(t(M),n("ready"))}catch(F){E||(n("error"),i(F instanceof Error?F.message:"Unknown error"))}}return I(),()=>{E=!0}},[]);const u=b.useMemo(()=>{const E=new Set;return e.forEach(({category:I})=>{const F=(I||"").trim();F&&E.add(F)}),Array.from(E)},[e]);b.useEffect(()=>{o!=="all"&&!u.includes(o)&&s("all")},[u,o]);const h=b.useMemo(()=>o==="all"?e:e.filter(({category:E})=>E===o),[e,o]),{page:f,totalPages:p,pageItems:m,goToPage:g,goToNext:x,goToPrevious:y}=Rw(h,Fd),v=E=>{const I=E.target.value;s(I),g(1),typeof window<"u"&&window.scrollTo({top:0,behavior:"smooth"})},w=()=>{x(),typeof window<"u"&&window.scrollTo({top:0,behavior:"smooth"})},S=async(E,I,F)=>{if(E){d(E);try{const V=await fetch(E,{mode:"cors",cache:"no-store"});if(!V.ok)throw new Error(`Failed to download image (status ${V.status})`);const M=await V.blob(),L=URL.createObjectURL(M),R=document.createElement("a");R.href=L,R.download=Bw(E,I,F),document.body.appendChild(R),R.click(),R.remove(),URL.revokeObjectURL(L)}catch(V){console.error("Failed to download image",V)}finally{d("")}}},C=h.length,k=r==="loading",A=r==="error",N=e.length>0,B=C>0;return c.jsxs("div",{className:"space-y-12",children:[c.jsxs("section",{className:"relative overflow-hidden rounded-3xl border border-slate-200 bg-white/90 px-8 py-10 shadow-sm dark:border-slate-800 dark:bg-slate-900",children:[c.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(99,102,241,0.08),_transparent_60%)] dark:bg-[radial-gradient(circle_at_top,_rgba(99,102,241,0.18),_transparent_65%)]","aria-hidden":!0}),c.jsxs("div",{className:"relative z-10 space-y-5",children:[c.jsx("p",{className:"inline-flex items-center gap-2 rounded-full bg-brand-500/10 px-4 py-1 text-xs font-semibold uppercase tracking-[0.35em] text-brand-600 dark:text-brand-300",children:"Side-by-side study"}),c.jsx("h1",{className:"text-3xl font-semibold text-slate-900 dark:text-slate-100",children:"DALLÂ·E 3 vs Flux Schnell"}),c.jsx("p",{className:"text-sm leading-relaxed text-slate-600 dark:text-slate-300",children:"We captured a like-for-like benchmark using 186 prompts. Flux Schnell ran on GroqCloudâ€™s free endpoint while DALLÂ·E 3 used $30 of OpenAI credits. Explore the prompts, visuals, and stylistic differences below â€” each page streams ten comparisons for quick scanning."}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-slate-500 dark:text-slate-400",children:[c.jsx("span",{className:"inline-flex items-center gap-2 rounded-full border border-brand-500/30 px-3 py-1 font-semibold uppercase tracking-wide text-brand-600 dark:text-brand-300",children:"Flux Schnell Â· GroqCloud"}),c.jsx("span",{className:"inline-flex items-center gap-2 rounded-full border border-slate-300 px-3 py-1 font-semibold uppercase tracking-wide text-slate-500 dark:border-slate-700 dark:text-slate-300",children:"DALLÂ·E 3 Â· OpenAI"}),c.jsxs(Oe,{to:"/",className:"inline-flex items-center gap-2 rounded-full border border-slate-300 px-3 py-1 font-semibold text-slate-600 transition hover:border-brand-500 hover:bg-brand-500/10 hover:text-brand-600 dark:border-slate-700 dark:text-slate-200 dark:hover:border-brand-400/60 dark:hover:bg-brand-500/10",children:["Back to overview",c.jsx("span",{"aria-hidden":!0,children:"â†—"})]})]})]})]}),c.jsxs("section",{className:"space-y-6",children:[c.jsxs("header",{className:"flex flex-col gap-4 lg:flex-row lg:items-end lg:justify-between",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Prompt gallery"}),c.jsx("p",{className:"max-w-xl text-sm text-slate-600 dark:text-slate-400",children:"Each prompt renders Flux Schnell (left) beside DALLÂ·E 3 (right). Click an image to open the original export."})]}),c.jsxs("div",{className:"flex flex-col items-stretch gap-3 sm:flex-row sm:items-center sm:gap-4",children:[c.jsxs("div",{className:"flex items-center gap-2 rounded-full border border-slate-200 bg-white/90 px-3 py-2 text-sm text-slate-600 shadow-sm dark:border-slate-700 dark:bg-slate-800/60 dark:text-slate-200",children:[c.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400 dark:text-slate-500",children:"Category"}),c.jsxs("select",{"aria-label":"Filter by category",value:o,onChange:v,className:"min-w-[12rem] rounded-full border border-transparent bg-white/80 px-3 py-1 text-sm font-medium text-slate-700 transition focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-500/40 dark:bg-slate-900/60 dark:text-slate-100 dark:focus:border-brand-400",children:[c.jsx("option",{value:"all",children:"All categories"}),u.map(E=>c.jsx("option",{value:E,children:E},E))]})]}),c.jsxs("div",{className:"inline-flex flex-nowrap items-center gap-2 rounded-full border border-slate-200 bg-white/90 px-4 py-2 text-sm font-medium text-slate-600 shadow-sm dark:border-slate-700 dark:bg-slate-800/60 dark:text-slate-200",children:[c.jsxs("span",{className:"whitespace-nowrap",children:["Page ",f," of ",p]}),c.jsx("span",{"aria-hidden":!0,children:"â€¢"}),c.jsxs("span",{className:"whitespace-nowrap",children:[C," prompts"]})]})]})]}),c.jsxs("div",{className:"space-y-8",children:[k&&c.jsx("article",{className:"space-y-4 rounded-3xl border border-slate-200 bg-white/90 p-6 text-sm text-slate-600 shadow-sm dark:border-slate-800 dark:bg-slate-900 dark:text-slate-300",children:"Loading comparison datasetâ€¦"}),A&&!k&&c.jsxs("article",{className:"space-y-3 rounded-3xl border border-rose-200/80 bg-rose-50/80 p-6 text-sm text-rose-700 shadow-sm dark:border-rose-700/60 dark:bg-rose-900/30 dark:text-rose-200",children:[c.jsx("p",{className:"font-semibold",children:"We couldnâ€™t load the CSV file."}),c.jsx("p",{children:a})]}),!k&&!A&&!N&&c.jsx("article",{className:"space-y-3 rounded-3xl border border-slate-200 bg-white/90 p-6 text-sm text-slate-600 shadow-sm dark:border-slate-800 dark:bg-slate-900 dark:text-slate-300",children:"No comparisons are available yet. Check back soon."}),!k&&!A&&N&&!B&&c.jsxs("article",{className:"space-y-3 rounded-3xl border border-amber-200 bg-amber-50 p-6 text-sm text-amber-700 shadow-sm dark:border-amber-600/60 dark:bg-amber-900/30 dark:text-amber-200",children:[c.jsx("p",{className:"font-semibold",children:"No prompts match this category."}),c.jsx("p",{children:"Try selecting a different category to continue exploring the comparison set."})]}),m.map(({prompt:E,fluxUrl:I,dalleUrl:F,category:V},M)=>c.jsxs("article",{className:"space-y-6 rounded-3xl border border-slate-200 bg-white/90 p-6 shadow-sm transition hover:shadow-lg dark:border-slate-800 dark:bg-slate-900",children:[c.jsxs("header",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center gap-3 text-xs font-semibold uppercase tracking-wider text-slate-400 dark:text-slate-500",children:[c.jsxs("span",{children:["Prompt ",M+1+(f-1)*Fd]}),c.jsx("span",{"aria-hidden":!0,children:"â€¢"}),c.jsxs("span",{children:[E.length," characters"]})]}),c.jsx("span",{className:"inline-flex items-center gap-2 rounded-full border border-slate-200 bg-slate-100 px-3 py-1 text-[0.65rem] font-semibold uppercase tracking-wide text-slate-600 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-200",children:V}),c.jsx("p",{className:"text-sm leading-relaxed text-slate-700 dark:text-slate-200",children:E})]}),c.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[c.jsxs("figure",{className:"space-y-3",children:[c.jsx("div",{className:"overflow-hidden rounded-2xl border border-emerald-500/40 bg-slate-100/60 dark:border-emerald-400/30 dark:bg-slate-800/70",children:c.jsx("a",{href:I,target:"_blank",rel:"noreferrer",children:c.jsx("img",{src:I,alt:`Flux Schnell render for prompt: ${E}`,loading:"lazy",className:"h-full w-full object-cover"})})}),c.jsx("figcaption",{className:"text-xs uppercase tracking-wide text-emerald-600 dark:text-emerald-300",children:c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[c.jsx("span",{className:"font-semibold",children:"Flux Schnell â€” GroqCloud (free endpoint)"}),c.jsx("button",{type:"button",onClick:()=>S(I,E,"Flux Schnell"),disabled:l===I,className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-3 py-1 text-[0.65rem] font-semibold tracking-wide text-slate-600 transition hover:border-brand-500 hover:bg-brand-500/10 hover:text-brand-600 disabled:cursor-not-allowed disabled:opacity-60 dark:border-slate-700 dark:text-slate-200 dark:hover:border-brand-400/60 dark:hover:bg-brand-500/10","aria-label":"Download Flux Schnell image",children:l===I?"Downloadingâ€¦":"Download"})]})})]}),c.jsxs("figure",{className:"space-y-3",children:[c.jsx("div",{className:"overflow-hidden rounded-2xl border border-indigo-500/40 bg-slate-100/60 dark:border-indigo-400/30 dark:bg-slate-800/70",children:c.jsx("a",{href:F,target:"_blank",rel:"noreferrer",children:c.jsx("img",{src:F,alt:`DALLÂ·E 3 render for prompt: ${E}`,loading:"lazy",className:"h-full w-full object-cover"})})}),c.jsx("figcaption",{className:"text-xs uppercase tracking-wide text-indigo-600 dark:text-indigo-300",children:c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[c.jsx("span",{className:"font-semibold",children:"DALLÂ·E 3 â€” OpenAI (paid usage)"}),c.jsx("button",{type:"button",onClick:()=>S(F,E,"DALLE-3"),disabled:l===F,className:"inline-flex items-center gap-2 rounded-full border border-slate-200 px-3 py-1 text-[0.65rem] font-semibold tracking-wide text-slate-600 transition hover:border-brand-500 hover:bg-brand-500/10 hover:text-brand-600 disabled:cursor-not-allowed disabled:opacity-60 dark:border-slate-700 dark:text-slate-200 dark:hover:border-brand-400/60 dark:hover:bg-brand-500/10","aria-label":"Download DALLÂ·E 3 image",children:l===F?"Downloadingâ€¦":"Download"})]})})]})]})]},`${E}-${I}`))]}),c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 rounded-3xl border border-slate-200 bg-white/90 px-4 py-3 text-sm shadow-sm dark:border-slate-800 dark:bg-slate-900/80",children:[c.jsx("button",{type:"button",onClick:y,disabled:f===1||k||!B,className:"inline-flex items-center gap-2 rounded-full border border-slate-300 px-4 py-2 font-medium text-slate-600 transition enabled:hover:border-brand-500 enabled:hover:bg-brand-500/10 enabled:hover:text-brand-600 disabled:opacity-50 dark:border-slate-700 dark:text-slate-200 dark:enabled:hover:border-brand-400/60 dark:enabled:hover:bg-brand-500/10",children:"â† Previous"}),c.jsx("button",{type:"button",onClick:w,disabled:f===p||k||!B,className:"inline-flex items-center gap-2 rounded-full border border-slate-300 px-4 py-2 font-medium text-slate-600 transition enabled:hover:border-brand-500 enabled:hover:bg-brand-500/10 enabled:hover:text-brand-600 disabled:opacity-50 dark:border-slate-700 dark:text-slate-200 dark:enabled:hover:border-brand-400/60 dark:enabled:hover:bg-brand-500/10",children:"Next â†’"})]})]})]})}function Mw(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=Array.from(typeof e=="string"?[e]:e);n[n.length-1]=n[n.length-1].replace(/\r?\n([\t ]*)$/,"");var a=n.reduce(function(s,l){var d=l.match(/\n([\t ]+|(?!\s).)/g);return d?s.concat(d.map(function(u){var h,f;return(f=(h=u.match(/[\t ]/g))===null||h===void 0?void 0:h.length)!==null&&f!==void 0?f:0})):s},[]);if(a.length){var i=new RegExp(`
[	 ]{`+Math.min.apply(Math,a)+"}","g");n=n.map(function(s){return s.replace(i,`
`)})}n[0]=n[0].replace(/^\r?\n/,"");var o=n[0];return t.forEach(function(s,l){var d=o.match(/(?:^|\n)( *)$/),u=d?d[1]:"",h=s;typeof s=="string"&&s.includes(`
`)&&(h=String(s).split(`
`).map(function(f,p){return p===0?f:""+u+f}).join(`
`)),o+=h+n[l+1]}),o}var Ua={exports:{}},Pw=Ua.exports,Ud;function Fw(){return Ud||(Ud=1,(function(e,t){(function(r,n){e.exports=n()})(Pw,(function(){var r=1e3,n=6e4,a=36e5,i="millisecond",o="second",s="minute",l="hour",d="day",u="week",h="month",f="quarter",p="year",m="date",g="Invalid Date",x=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(M){var L=["th","st","nd","rd"],R=M%100;return"["+M+(L[(R-20)%10]||L[R]||L[0])+"]"}},w=function(M,L,R){var U=String(M);return!U||U.length>=L?M:""+Array(L+1-U.length).join(R)+M},S={s:w,z:function(M){var L=-M.utcOffset(),R=Math.abs(L),U=Math.floor(R/60),$=R%60;return(L<=0?"+":"-")+w(U,2,"0")+":"+w($,2,"0")},m:function M(L,R){if(L.date()<R.date())return-M(R,L);var U=12*(R.year()-L.year())+(R.month()-L.month()),$=L.clone().add(U,h),j=R-$<0,z=L.clone().add(U+(j?-1:1),h);return+(-(U+(R-$)/(j?$-z:z-$))||0)},a:function(M){return M<0?Math.ceil(M)||0:Math.floor(M)},p:function(M){return{M:h,y:p,w:u,d,D:m,h:l,m:s,s:o,ms:i,Q:f}[M]||String(M||"").toLowerCase().replace(/s$/,"")},u:function(M){return M===void 0}},C="en",k={};k[C]=v;var A="$isDayjsObject",N=function(M){return M instanceof F||!(!M||!M[A])},B=function M(L,R,U){var $;if(!L)return C;if(typeof L=="string"){var j=L.toLowerCase();k[j]&&($=j),R&&(k[j]=R,$=j);var z=L.split("-");if(!$&&z.length>1)return M(z[0])}else{var q=L.name;k[q]=L,$=q}return!U&&$&&(C=$),$||!U&&C},E=function(M,L){if(N(M))return M.clone();var R=typeof L=="object"?L:{};return R.date=M,R.args=arguments,new F(R)},I=S;I.l=B,I.i=N,I.w=function(M,L){return E(M,{locale:L.$L,utc:L.$u,x:L.$x,$offset:L.$offset})};var F=(function(){function M(R){this.$L=B(R.locale,null,!0),this.parse(R),this.$x=this.$x||R.x||{},this[A]=!0}var L=M.prototype;return L.parse=function(R){this.$d=(function(U){var $=U.date,j=U.utc;if($===null)return new Date(NaN);if(I.u($))return new Date;if($ instanceof Date)return new Date($);if(typeof $=="string"&&!/Z$/i.test($)){var z=$.match(x);if(z){var q=z[2]-1||0,Y=(z[7]||"0").substring(0,3);return j?new Date(Date.UTC(z[1],q,z[3]||1,z[4]||0,z[5]||0,z[6]||0,Y)):new Date(z[1],q,z[3]||1,z[4]||0,z[5]||0,z[6]||0,Y)}}return new Date($)})(R),this.init()},L.init=function(){var R=this.$d;this.$y=R.getFullYear(),this.$M=R.getMonth(),this.$D=R.getDate(),this.$W=R.getDay(),this.$H=R.getHours(),this.$m=R.getMinutes(),this.$s=R.getSeconds(),this.$ms=R.getMilliseconds()},L.$utils=function(){return I},L.isValid=function(){return this.$d.toString()!==g},L.isSame=function(R,U){var $=E(R);return this.startOf(U)<=$&&$<=this.endOf(U)},L.isAfter=function(R,U){return E(R)<this.startOf(U)},L.isBefore=function(R,U){return this.endOf(U)<E(R)},L.$g=function(R,U,$){return I.u(R)?this[U]:this.set($,R)},L.unix=function(){return Math.floor(this.valueOf()/1e3)},L.valueOf=function(){return this.$d.getTime()},L.startOf=function(R,U){var $=this,j=!!I.u(U)||U,z=I.p(R),q=function(oe,ne){var ye=I.w($.$u?Date.UTC($.$y,ne,oe):new Date($.$y,ne,oe),$);return j?ye:ye.endOf(d)},Y=function(oe,ne){return I.w($.toDate()[oe].apply($.toDate("s"),(j?[0,0,0,0]:[23,59,59,999]).slice(ne)),$)},te=this.$W,ge=this.$M,J=this.$D,ce="set"+(this.$u?"UTC":"");switch(z){case p:return j?q(1,0):q(31,11);case h:return j?q(1,ge):q(0,ge+1);case u:var P=this.$locale().weekStart||0,ie=(te<P?te+7:te)-P;return q(j?J-ie:J+(6-ie),ge);case d:case m:return Y(ce+"Hours",0);case l:return Y(ce+"Minutes",1);case s:return Y(ce+"Seconds",2);case o:return Y(ce+"Milliseconds",3);default:return this.clone()}},L.endOf=function(R){return this.startOf(R,!1)},L.$set=function(R,U){var $,j=I.p(R),z="set"+(this.$u?"UTC":""),q=($={},$[d]=z+"Date",$[m]=z+"Date",$[h]=z+"Month",$[p]=z+"FullYear",$[l]=z+"Hours",$[s]=z+"Minutes",$[o]=z+"Seconds",$[i]=z+"Milliseconds",$)[j],Y=j===d?this.$D+(U-this.$W):U;if(j===h||j===p){var te=this.clone().set(m,1);te.$d[q](Y),te.init(),this.$d=te.set(m,Math.min(this.$D,te.daysInMonth())).$d}else q&&this.$d[q](Y);return this.init(),this},L.set=function(R,U){return this.clone().$set(R,U)},L.get=function(R){return this[I.p(R)]()},L.add=function(R,U){var $,j=this;R=Number(R);var z=I.p(U),q=function(ge){var J=E(j);return I.w(J.date(J.date()+Math.round(ge*R)),j)};if(z===h)return this.set(h,this.$M+R);if(z===p)return this.set(p,this.$y+R);if(z===d)return q(1);if(z===u)return q(7);var Y=($={},$[s]=n,$[l]=a,$[o]=r,$)[z]||1,te=this.$d.getTime()+R*Y;return I.w(te,this)},L.subtract=function(R,U){return this.add(-1*R,U)},L.format=function(R){var U=this,$=this.$locale();if(!this.isValid())return $.invalidDate||g;var j=R||"YYYY-MM-DDTHH:mm:ssZ",z=I.z(this),q=this.$H,Y=this.$m,te=this.$M,ge=$.weekdays,J=$.months,ce=$.meridiem,P=function(ne,ye,Xe,ft){return ne&&(ne[ye]||ne(U,j))||Xe[ye].slice(0,ft)},ie=function(ne){return I.s(q%12||12,ne,"0")},oe=ce||function(ne,ye,Xe){var ft=ne<12?"AM":"PM";return Xe?ft.toLowerCase():ft};return j.replace(y,(function(ne,ye){return ye||(function(Xe){switch(Xe){case"YY":return String(U.$y).slice(-2);case"YYYY":return I.s(U.$y,4,"0");case"M":return te+1;case"MM":return I.s(te+1,2,"0");case"MMM":return P($.monthsShort,te,J,3);case"MMMM":return P(J,te);case"D":return U.$D;case"DD":return I.s(U.$D,2,"0");case"d":return String(U.$W);case"dd":return P($.weekdaysMin,U.$W,ge,2);case"ddd":return P($.weekdaysShort,U.$W,ge,3);case"dddd":return ge[U.$W];case"H":return String(q);case"HH":return I.s(q,2,"0");case"h":return ie(1);case"hh":return ie(2);case"a":return oe(q,Y,!0);case"A":return oe(q,Y,!1);case"m":return String(Y);case"mm":return I.s(Y,2,"0");case"s":return String(U.$s);case"ss":return I.s(U.$s,2,"0");case"SSS":return I.s(U.$ms,3,"0");case"Z":return z}return null})(ne)||z.replace(":","")}))},L.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},L.diff=function(R,U,$){var j,z=this,q=I.p(U),Y=E(R),te=(Y.utcOffset()-this.utcOffset())*n,ge=this-Y,J=function(){return I.m(z,Y)};switch(q){case p:j=J()/12;break;case h:j=J();break;case f:j=J()/3;break;case u:j=(ge-te)/6048e5;break;case d:j=(ge-te)/864e5;break;case l:j=ge/a;break;case s:j=ge/n;break;case o:j=ge/r;break;default:j=ge}return $?j:I.a(j)},L.daysInMonth=function(){return this.endOf(h).$D},L.$locale=function(){return k[this.$L]},L.locale=function(R,U){if(!R)return this.$L;var $=this.clone(),j=B(R,U,!0);return j&&($.$L=j),$},L.clone=function(){return I.w(this.$d,this)},L.toDate=function(){return new Date(this.valueOf())},L.toJSON=function(){return this.isValid()?this.toISOString():null},L.toISOString=function(){return this.$d.toISOString()},L.toString=function(){return this.$d.toUTCString()},M})(),V=F.prototype;return E.prototype=V,[["$ms",i],["$s",o],["$m",s],["$H",l],["$W",d],["$M",h],["$y",p],["$D",m]].forEach((function(M){V[M[1]]=function(L){return this.$g(L,M[0],M[1])}})),E.extend=function(M,L){return M.$i||(M(L,F,E),M.$i=!0),E},E.locale=B,E.isDayjs=N,E.unix=function(M){return E(1e3*M)},E.en=k[C],E.Ls=k,E.p={},E}))})(Ua)),Ua.exports}var $w=Fw();const Uw=Yp($w);var Lo={},zd;function zw(){return zd||(zd=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.sanitizeUrl=e.BLANK_URL=void 0;var t=/^([^\w]*)(javascript|data|vbscript)/im,r=/&#(\w+)(^\w|;)?/g,n=/&(newline|tab);/gi,a=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,i=/^.+(:|&colon;)/gim,o=[".","/"];e.BLANK_URL="about:blank";function s(u){return o.indexOf(u[0])>-1}function l(u){var h=u.replace(a,"");return h.replace(r,function(f,p){return String.fromCharCode(p)})}function d(u){if(!u)return e.BLANK_URL;var h=l(u).replace(n,"").replace(a,"").trim();if(!h)return e.BLANK_URL;if(s(h))return h;var f=h.match(i);if(!f)return h;var p=f[0];return t.test(p)?e.BLANK_URL:h}e.sanitizeUrl=d})(Lo)),Lo}var Hw=zw(),Gw={value:()=>{}};function p0(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new za(r)}function za(e){this._=e}function Vw(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}za.prototype=p0.prototype={constructor:za,on:function(e,t){var r=this._,n=Vw(e+"",r),a,i=-1,o=n.length;if(arguments.length<2){for(;++i<o;)if((a=(e=n[i]).type)&&(a=qw(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<o;)if(a=(e=n[i]).type)r[a]=Hd(r[a],e.name,t);else if(t==null)for(a in r)r[a]=Hd(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new za(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,i;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],n=0,a=i.length;n<a;++n)i[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,i=n.length;a<i;++a)n[a].value.apply(t,r)}};function qw(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function Hd(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=Gw,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var ms="http://www.w3.org/1999/xhtml";const Gd={svg:"http://www.w3.org/2000/svg",xhtml:ms,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Vi(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),Gd.hasOwnProperty(t)?{space:Gd[t],local:e}:e}function Ww(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===ms&&t.documentElement.namespaceURI===ms?t.createElement(e):t.createElementNS(r,e)}}function Xw(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function m0(e){var t=Vi(e);return(t.local?Xw:Ww)(t)}function Yw(){}function hl(e){return e==null?Yw:function(){return this.querySelector(e)}}function Kw(e){typeof e!="function"&&(e=hl(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var i=t[a],o=i.length,s=n[a]=new Array(o),l,d,u=0;u<o;++u)(l=i[u])&&(d=e.call(l,l.__data__,u,i))&&("__data__"in l&&(d.__data__=l.__data__),s[u]=d);return new yt(n,this._parents)}function Zw(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Jw(){return[]}function g0(e){return e==null?Jw:function(){return this.querySelectorAll(e)}}function Qw(e){return function(){return Zw(e.apply(this,arguments))}}function e_(e){typeof e=="function"?e=Qw(e):e=g0(e);for(var t=this._groups,r=t.length,n=[],a=[],i=0;i<r;++i)for(var o=t[i],s=o.length,l,d=0;d<s;++d)(l=o[d])&&(n.push(e.call(l,l.__data__,d,o)),a.push(l));return new yt(n,a)}function x0(e){return function(){return this.matches(e)}}function v0(e){return function(t){return t.matches(e)}}var t_=Array.prototype.find;function r_(e){return function(){return t_.call(this.children,e)}}function n_(){return this.firstElementChild}function a_(e){return this.select(e==null?n_:r_(typeof e=="function"?e:v0(e)))}var i_=Array.prototype.filter;function o_(){return Array.from(this.children)}function s_(e){return function(){return i_.call(this.children,e)}}function l_(e){return this.selectAll(e==null?o_:s_(typeof e=="function"?e:v0(e)))}function c_(e){typeof e!="function"&&(e=x0(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var i=t[a],o=i.length,s=n[a]=[],l,d=0;d<o;++d)(l=i[d])&&e.call(l,l.__data__,d,i)&&s.push(l);return new yt(n,this._parents)}function y0(e){return new Array(e.length)}function d_(){return new yt(this._enter||this._groups.map(y0),this._parents)}function fi(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}fi.prototype={constructor:fi,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function u_(e){return function(){return e}}function h_(e,t,r,n,a,i){for(var o=0,s,l=t.length,d=i.length;o<d;++o)(s=t[o])?(s.__data__=i[o],n[o]=s):r[o]=new fi(e,i[o]);for(;o<l;++o)(s=t[o])&&(a[o]=s)}function f_(e,t,r,n,a,i,o){var s,l,d=new Map,u=t.length,h=i.length,f=new Array(u),p;for(s=0;s<u;++s)(l=t[s])&&(f[s]=p=o.call(l,l.__data__,s,t)+"",d.has(p)?a[s]=l:d.set(p,l));for(s=0;s<h;++s)p=o.call(e,i[s],s,i)+"",(l=d.get(p))?(n[s]=l,l.__data__=i[s],d.delete(p)):r[s]=new fi(e,i[s]);for(s=0;s<u;++s)(l=t[s])&&d.get(f[s])===l&&(a[s]=l)}function p_(e){return e.__data__}function m_(e,t){if(!arguments.length)return Array.from(this,p_);var r=t?f_:h_,n=this._parents,a=this._groups;typeof e!="function"&&(e=u_(e));for(var i=a.length,o=new Array(i),s=new Array(i),l=new Array(i),d=0;d<i;++d){var u=n[d],h=a[d],f=h.length,p=g_(e.call(u,u&&u.__data__,d,n)),m=p.length,g=s[d]=new Array(m),x=o[d]=new Array(m),y=l[d]=new Array(f);r(u,h,g,x,y,p,t);for(var v=0,w=0,S,C;v<m;++v)if(S=g[v]){for(v>=w&&(w=v+1);!(C=x[w])&&++w<m;);S._next=C||null}}return o=new yt(o,n),o._enter=s,o._exit=l,o}function g_(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function x_(){return new yt(this._exit||this._groups.map(y0),this._parents)}function v_(e,t,r){var n=this.enter(),a=this,i=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),r==null?i.remove():r(i),n&&a?n.merge(a).order():a}function y_(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,a=r.length,i=n.length,o=Math.min(a,i),s=new Array(a),l=0;l<o;++l)for(var d=r[l],u=n[l],h=d.length,f=s[l]=new Array(h),p,m=0;m<h;++m)(p=d[m]||u[m])&&(f[m]=p);for(;l<a;++l)s[l]=r[l];return new yt(s,this._parents)}function b_(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],a=n.length-1,i=n[a],o;--a>=0;)(o=n[a])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function w_(e){e||(e=__);function t(h,f){return h&&f?e(h.__data__,f.__data__):!h-!f}for(var r=this._groups,n=r.length,a=new Array(n),i=0;i<n;++i){for(var o=r[i],s=o.length,l=a[i]=new Array(s),d,u=0;u<s;++u)(d=o[u])&&(l[u]=d);l.sort(t)}return new yt(a,this._parents).order()}function __(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function C_(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function S_(){return Array.from(this)}function A_(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,i=n.length;a<i;++a){var o=n[a];if(o)return o}return null}function k_(){let e=0;for(const t of this)++e;return e}function E_(){return!this.node()}function N_(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var a=t[r],i=0,o=a.length,s;i<o;++i)(s=a[i])&&e.call(s,s.__data__,i,a);return this}function T_(e){return function(){this.removeAttribute(e)}}function I_(e){return function(){this.removeAttributeNS(e.space,e.local)}}function O_(e,t){return function(){this.setAttribute(e,t)}}function B_(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function j_(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function D_(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function R_(e,t){var r=Vi(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?I_:T_:typeof t=="function"?r.local?D_:j_:r.local?B_:O_)(r,t))}function b0(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function L_(e){return function(){this.style.removeProperty(e)}}function M_(e,t,r){return function(){this.style.setProperty(e,t,r)}}function P_(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function F_(e,t,r){return arguments.length>1?this.each((t==null?L_:typeof t=="function"?P_:M_)(e,t,r??"")):en(this.node(),e)}function en(e,t){return e.style.getPropertyValue(t)||b0(e).getComputedStyle(e,null).getPropertyValue(t)}function $_(e){return function(){delete this[e]}}function U_(e,t){return function(){this[e]=t}}function z_(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function H_(e,t){return arguments.length>1?this.each((t==null?$_:typeof t=="function"?z_:U_)(e,t)):this.node()[e]}function w0(e){return e.trim().split(/^|\s+/)}function fl(e){return e.classList||new _0(e)}function _0(e){this._node=e,this._names=w0(e.getAttribute("class")||"")}_0.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function C0(e,t){for(var r=fl(e),n=-1,a=t.length;++n<a;)r.add(t[n])}function S0(e,t){for(var r=fl(e),n=-1,a=t.length;++n<a;)r.remove(t[n])}function G_(e){return function(){C0(this,e)}}function V_(e){return function(){S0(this,e)}}function q_(e,t){return function(){(t.apply(this,arguments)?C0:S0)(this,e)}}function W_(e,t){var r=w0(e+"");if(arguments.length<2){for(var n=fl(this.node()),a=-1,i=r.length;++a<i;)if(!n.contains(r[a]))return!1;return!0}return this.each((typeof t=="function"?q_:t?G_:V_)(r,t))}function X_(){this.textContent=""}function Y_(e){return function(){this.textContent=e}}function K_(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Z_(e){return arguments.length?this.each(e==null?X_:(typeof e=="function"?K_:Y_)(e)):this.node().textContent}function J_(){this.innerHTML=""}function Q_(e){return function(){this.innerHTML=e}}function eC(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function tC(e){return arguments.length?this.each(e==null?J_:(typeof e=="function"?eC:Q_)(e)):this.node().innerHTML}function rC(){this.nextSibling&&this.parentNode.appendChild(this)}function nC(){return this.each(rC)}function aC(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function iC(){return this.each(aC)}function oC(e){var t=typeof e=="function"?e:m0(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function sC(){return null}function lC(e,t){var r=typeof e=="function"?e:m0(e),n=t==null?sC:typeof t=="function"?t:hl(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function cC(){var e=this.parentNode;e&&e.removeChild(this)}function dC(){return this.each(cC)}function uC(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function hC(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function fC(e){return this.select(e?hC:uC)}function pC(e){return arguments.length?this.property("__data__",e):this.node().__data__}function mC(e){return function(t){e.call(this,t,this.__data__)}}function gC(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function xC(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,a=t.length,i;r<a;++r)i=t[r],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++n]=i;++n?t.length=n:delete this.__on}}}function vC(e,t,r){return function(){var n=this.__on,a,i=mC(t);if(n){for(var o=0,s=n.length;o<s;++o)if((a=n[o]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=i,a.options=r),a.value=t;return}}this.addEventListener(e.type,i,r),a={type:e.type,name:e.name,value:t,listener:i,options:r},n?n.push(a):this.__on=[a]}}function yC(e,t,r){var n=gC(e+""),a,i=n.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,d=s.length,u;l<d;++l)for(a=0,u=s[l];a<i;++a)if((o=n[a]).type===u.type&&o.name===u.name)return u.value}return}for(s=t?vC:xC,a=0;a<i;++a)this.each(s(n[a],t,r));return this}function A0(e,t,r){var n=b0(e),a=n.CustomEvent;typeof a=="function"?a=new a(t,r):(a=n.document.createEvent("Event"),r?(a.initEvent(t,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function bC(e,t){return function(){return A0(this,e,t)}}function wC(e,t){return function(){return A0(this,e,t.apply(this,arguments))}}function _C(e,t){return this.each((typeof t=="function"?wC:bC)(e,t))}function*CC(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,i=n.length,o;a<i;++a)(o=n[a])&&(yield o)}var k0=[null];function yt(e,t){this._groups=e,this._parents=t}function da(){return new yt([[document.documentElement]],k0)}function SC(){return this}yt.prototype=da.prototype={constructor:yt,select:Kw,selectAll:e_,selectChild:a_,selectChildren:l_,filter:c_,data:m_,enter:d_,exit:x_,join:v_,merge:y_,selection:SC,order:b_,sort:w_,call:C_,nodes:S_,node:A_,size:k_,empty:E_,each:N_,attr:R_,style:F_,property:H_,classed:W_,text:Z_,html:tC,raise:nC,lower:iC,append:oC,insert:lC,remove:dC,clone:fC,datum:pC,on:yC,dispatch:_C,[Symbol.iterator]:CC};function St(e){return typeof e=="string"?new yt([[document.querySelector(e)]],[document.documentElement]):new yt([[e]],k0)}function pl(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function E0(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function ua(){}var Kn=.7,pi=1/Kn,Xr="\\s*([+-]?\\d+)\\s*",Zn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ut="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",AC=/^#([0-9a-f]{3,8})$/,kC=new RegExp(`^rgb\\(${Xr},${Xr},${Xr}\\)$`),EC=new RegExp(`^rgb\\(${Ut},${Ut},${Ut}\\)$`),NC=new RegExp(`^rgba\\(${Xr},${Xr},${Xr},${Zn}\\)$`),TC=new RegExp(`^rgba\\(${Ut},${Ut},${Ut},${Zn}\\)$`),IC=new RegExp(`^hsl\\(${Zn},${Ut},${Ut}\\)$`),OC=new RegExp(`^hsla\\(${Zn},${Ut},${Ut},${Zn}\\)$`),Vd={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};pl(ua,Jn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:qd,formatHex:qd,formatHex8:BC,formatHsl:jC,formatRgb:Wd,toString:Wd});function qd(){return this.rgb().formatHex()}function BC(){return this.rgb().formatHex8()}function jC(){return N0(this).formatHsl()}function Wd(){return this.rgb().formatRgb()}function Jn(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=AC.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?Xd(t):r===3?new dt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Ta(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Ta(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=kC.exec(e))?new dt(t[1],t[2],t[3],1):(t=EC.exec(e))?new dt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=NC.exec(e))?Ta(t[1],t[2],t[3],t[4]):(t=TC.exec(e))?Ta(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=IC.exec(e))?Zd(t[1],t[2]/100,t[3]/100,1):(t=OC.exec(e))?Zd(t[1],t[2]/100,t[3]/100,t[4]):Vd.hasOwnProperty(e)?Xd(Vd[e]):e==="transparent"?new dt(NaN,NaN,NaN,0):null}function Xd(e){return new dt(e>>16&255,e>>8&255,e&255,1)}function Ta(e,t,r,n){return n<=0&&(e=t=r=NaN),new dt(e,t,r,n)}function DC(e){return e instanceof ua||(e=Jn(e)),e?(e=e.rgb(),new dt(e.r,e.g,e.b,e.opacity)):new dt}function gs(e,t,r,n){return arguments.length===1?DC(e):new dt(e,t,r,n??1)}function dt(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}pl(dt,gs,E0(ua,{brighter(e){return e=e==null?pi:Math.pow(pi,e),new dt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Kn:Math.pow(Kn,e),new dt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new dt(Nr(this.r),Nr(this.g),Nr(this.b),mi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Yd,formatHex:Yd,formatHex8:RC,formatRgb:Kd,toString:Kd}));function Yd(){return`#${Ar(this.r)}${Ar(this.g)}${Ar(this.b)}`}function RC(){return`#${Ar(this.r)}${Ar(this.g)}${Ar(this.b)}${Ar((isNaN(this.opacity)?1:this.opacity)*255)}`}function Kd(){const e=mi(this.opacity);return`${e===1?"rgb(":"rgba("}${Nr(this.r)}, ${Nr(this.g)}, ${Nr(this.b)}${e===1?")":`, ${e})`}`}function mi(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Nr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ar(e){return e=Nr(e),(e<16?"0":"")+e.toString(16)}function Zd(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Dt(e,t,r,n)}function N0(e){if(e instanceof Dt)return new Dt(e.h,e.s,e.l,e.opacity);if(e instanceof ua||(e=Jn(e)),!e)return new Dt;if(e instanceof Dt)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,s=i-a,l=(i+a)/2;return s?(t===i?o=(r-n)/s+(r<n)*6:r===i?o=(n-t)/s+2:o=(t-r)/s+4,s/=l<.5?i+a:2-i-a,o*=60):s=l>0&&l<1?0:o,new Dt(o,s,l,e.opacity)}function LC(e,t,r,n){return arguments.length===1?N0(e):new Dt(e,t,r,n??1)}function Dt(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}pl(Dt,LC,E0(ua,{brighter(e){return e=e==null?pi:Math.pow(pi,e),new Dt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Kn:Math.pow(Kn,e),new Dt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new dt(Mo(e>=240?e-240:e+120,a,n),Mo(e,a,n),Mo(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Dt(Jd(this.h),Ia(this.s),Ia(this.l),mi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=mi(this.opacity);return`${e===1?"hsl(":"hsla("}${Jd(this.h)}, ${Ia(this.s)*100}%, ${Ia(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Jd(e){return e=(e||0)%360,e<0?e+360:e}function Ia(e){return Math.max(0,Math.min(1,e||0))}function Mo(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const ml=e=>()=>e;function T0(e,t){return function(r){return e+r*t}}function MC(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function UT(e,t){var r=t-e;return r?T0(e,r>180||r<-180?r-360*Math.round(r/360):r):ml(isNaN(e)?t:e)}function PC(e){return(e=+e)==1?I0:function(t,r){return r-t?MC(t,r,e):ml(isNaN(t)?r:t)}}function I0(e,t){var r=t-e;return r?T0(e,r):ml(isNaN(e)?t:e)}const Qd=(function e(t){var r=PC(t);function n(a,i){var o=r((a=gs(a)).r,(i=gs(i)).r),s=r(a.g,i.g),l=r(a.b,i.b),d=I0(a.opacity,i.opacity);return function(u){return a.r=o(u),a.g=s(u),a.b=l(u),a.opacity=d(u),a+""}}return n.gamma=e,n})(1);function dr(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}var xs=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Po=new RegExp(xs.source,"g");function FC(e){return function(){return e}}function $C(e){return function(t){return e(t)+""}}function UC(e,t){var r=xs.lastIndex=Po.lastIndex=0,n,a,i,o=-1,s=[],l=[];for(e=e+"",t=t+"";(n=xs.exec(e))&&(a=Po.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(a=a[0])?s[o]?s[o]+=a:s[++o]=a:(s[++o]=null,l.push({i:o,x:dr(n,a)})),r=Po.lastIndex;return r<t.length&&(i=t.slice(r),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?$C(l[0].x):FC(t):(t=l.length,function(d){for(var u=0,h;u<t;++u)s[(h=l[u]).i]=h.x(d);return s.join("")})}var eu=180/Math.PI,vs={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function O0(e,t,r,n,a,i){var o,s,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*r+t*n)&&(r-=e*l,n-=t*l),(s=Math.sqrt(r*r+n*n))&&(r/=s,n/=s,l/=s),e*n<t*r&&(e=-e,t=-t,l=-l,o=-o),{translateX:a,translateY:i,rotate:Math.atan2(t,e)*eu,skewX:Math.atan(l)*eu,scaleX:o,scaleY:s}}var Oa;function zC(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?vs:O0(t.a,t.b,t.c,t.d,t.e,t.f)}function HC(e){return e==null||(Oa||(Oa=document.createElementNS("http://www.w3.org/2000/svg","g")),Oa.setAttribute("transform",e),!(e=Oa.transform.baseVal.consolidate()))?vs:(e=e.matrix,O0(e.a,e.b,e.c,e.d,e.e,e.f))}function B0(e,t,r,n){function a(d){return d.length?d.pop()+" ":""}function i(d,u,h,f,p,m){if(d!==h||u!==f){var g=p.push("translate(",null,t,null,r);m.push({i:g-4,x:dr(d,h)},{i:g-2,x:dr(u,f)})}else(h||f)&&p.push("translate("+h+t+f+r)}function o(d,u,h,f){d!==u?(d-u>180?u+=360:u-d>180&&(d+=360),f.push({i:h.push(a(h)+"rotate(",null,n)-2,x:dr(d,u)})):u&&h.push(a(h)+"rotate("+u+n)}function s(d,u,h,f){d!==u?f.push({i:h.push(a(h)+"skewX(",null,n)-2,x:dr(d,u)}):u&&h.push(a(h)+"skewX("+u+n)}function l(d,u,h,f,p,m){if(d!==h||u!==f){var g=p.push(a(p)+"scale(",null,",",null,")");m.push({i:g-4,x:dr(d,h)},{i:g-2,x:dr(u,f)})}else(h!==1||f!==1)&&p.push(a(p)+"scale("+h+","+f+")")}return function(d,u){var h=[],f=[];return d=e(d),u=e(u),i(d.translateX,d.translateY,u.translateX,u.translateY,h,f),o(d.rotate,u.rotate,h,f),s(d.skewX,u.skewX,h,f),l(d.scaleX,d.scaleY,u.scaleX,u.scaleY,h,f),d=u=null,function(p){for(var m=-1,g=f.length,x;++m<g;)h[(x=f[m]).i]=x.x(p);return h.join("")}}}var GC=B0(zC,"px, ","px)","deg)"),VC=B0(HC,", ",")",")"),tn=0,On=0,An=0,j0=1e3,gi,Bn,xi=0,Ir=0,qi=0,Qn=typeof performance=="object"&&performance.now?performance:Date,D0=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function gl(){return Ir||(D0(qC),Ir=Qn.now()+qi)}function qC(){Ir=0}function vi(){this._call=this._time=this._next=null}vi.prototype=R0.prototype={constructor:vi,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?gl():+r)+(t==null?0:+t),!this._next&&Bn!==this&&(Bn?Bn._next=this:gi=this,Bn=this),this._call=e,this._time=r,ys()},stop:function(){this._call&&(this._call=null,this._time=1/0,ys())}};function R0(e,t,r){var n=new vi;return n.restart(e,t,r),n}function WC(){gl(),++tn;for(var e=gi,t;e;)(t=Ir-e._time)>=0&&e._call.call(void 0,t),e=e._next;--tn}function tu(){Ir=(xi=Qn.now())+qi,tn=On=0;try{WC()}finally{tn=0,YC(),Ir=0}}function XC(){var e=Qn.now(),t=e-xi;t>j0&&(qi-=t,xi=e)}function YC(){for(var e,t=gi,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:gi=r);Bn=e,ys(n)}function ys(e){if(!tn){On&&(On=clearTimeout(On));var t=e-Ir;t>24?(e<1/0&&(On=setTimeout(tu,e-Qn.now()-qi)),An&&(An=clearInterval(An))):(An||(xi=Qn.now(),An=setInterval(XC,j0)),tn=1,D0(tu))}}function ru(e,t,r){var n=new vi;return t=t==null?0:+t,n.restart(a=>{n.stop(),e(a+t)},t,r),n}var KC=p0("start","end","cancel","interrupt"),ZC=[],L0=0,nu=1,bs=2,Ha=3,au=4,ws=5,Ga=6;function Wi(e,t,r,n,a,i){var o=e.__transition;if(!o)e.__transition={};else if(r in o)return;JC(e,r,{name:t,index:n,group:a,on:KC,tween:ZC,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:L0})}function xl(e,t){var r=Mt(e,t);if(r.state>L0)throw new Error("too late; already scheduled");return r}function Wt(e,t){var r=Mt(e,t);if(r.state>Ha)throw new Error("too late; already running");return r}function Mt(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function JC(e,t,r){var n=e.__transition,a;n[t]=r,r.timer=R0(i,0,r.time);function i(d){r.state=nu,r.timer.restart(o,r.delay,r.time),r.delay<=d&&o(d-r.delay)}function o(d){var u,h,f,p;if(r.state!==nu)return l();for(u in n)if(p=n[u],p.name===r.name){if(p.state===Ha)return ru(o);p.state===au?(p.state=Ga,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete n[u]):+u<t&&(p.state=Ga,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete n[u])}if(ru(function(){r.state===Ha&&(r.state=au,r.timer.restart(s,r.delay,r.time),s(d))}),r.state=bs,r.on.call("start",e,e.__data__,r.index,r.group),r.state===bs){for(r.state=Ha,a=new Array(f=r.tween.length),u=0,h=-1;u<f;++u)(p=r.tween[u].value.call(e,e.__data__,r.index,r.group))&&(a[++h]=p);a.length=h+1}}function s(d){for(var u=d<r.duration?r.ease.call(null,d/r.duration):(r.timer.restart(l),r.state=ws,1),h=-1,f=a.length;++h<f;)a[h].call(e,u);r.state===ws&&(r.on.call("end",e,e.__data__,r.index,r.group),l())}function l(){r.state=Ga,r.timer.stop(),delete n[t];for(var d in n)return;delete e.__transition}}function QC(e,t){var r=e.__transition,n,a,i=!0,o;if(r){t=t==null?null:t+"";for(o in r){if((n=r[o]).name!==t){i=!1;continue}a=n.state>bs&&n.state<ws,n.state=Ga,n.timer.stop(),n.on.call(a?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[o]}i&&delete e.__transition}}function e3(e){return this.each(function(){QC(this,e)})}function t3(e,t){var r,n;return function(){var a=Wt(this,e),i=a.tween;if(i!==r){n=r=i;for(var o=0,s=n.length;o<s;++o)if(n[o].name===t){n=n.slice(),n.splice(o,1);break}}a.tween=n}}function r3(e,t,r){var n,a;if(typeof r!="function")throw new Error;return function(){var i=Wt(this,e),o=i.tween;if(o!==n){a=(n=o).slice();for(var s={name:t,value:r},l=0,d=a.length;l<d;++l)if(a[l].name===t){a[l]=s;break}l===d&&a.push(s)}i.tween=a}}function n3(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=Mt(this.node(),r).tween,a=0,i=n.length,o;a<i;++a)if((o=n[a]).name===e)return o.value;return null}return this.each((t==null?t3:r3)(r,e,t))}function vl(e,t,r){var n=e._id;return e.each(function(){var a=Wt(this,n);(a.value||(a.value={}))[t]=r.apply(this,arguments)}),function(a){return Mt(a,n).value[t]}}function M0(e,t){var r;return(typeof t=="number"?dr:t instanceof Jn?Qd:(r=Jn(t))?(t=r,Qd):UC)(e,t)}function a3(e){return function(){this.removeAttribute(e)}}function i3(e){return function(){this.removeAttributeNS(e.space,e.local)}}function o3(e,t,r){var n,a=r+"",i;return function(){var o=this.getAttribute(e);return o===a?null:o===n?i:i=t(n=o,r)}}function s3(e,t,r){var n,a=r+"",i;return function(){var o=this.getAttributeNS(e.space,e.local);return o===a?null:o===n?i:i=t(n=o,r)}}function l3(e,t,r){var n,a,i;return function(){var o,s=r(this),l;return s==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=s+"",o===l?null:o===n&&l===a?i:(a=l,i=t(n=o,s)))}}function c3(e,t,r){var n,a,i;return function(){var o,s=r(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=s+"",o===l?null:o===n&&l===a?i:(a=l,i=t(n=o,s)))}}function d3(e,t){var r=Vi(e),n=r==="transform"?VC:M0;return this.attrTween(e,typeof t=="function"?(r.local?c3:l3)(r,n,vl(this,"attr."+e,t)):t==null?(r.local?i3:a3)(r):(r.local?s3:o3)(r,n,t))}function u3(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function h3(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function f3(e,t){var r,n;function a(){var i=t.apply(this,arguments);return i!==n&&(r=(n=i)&&h3(e,i)),r}return a._value=t,a}function p3(e,t){var r,n;function a(){var i=t.apply(this,arguments);return i!==n&&(r=(n=i)&&u3(e,i)),r}return a._value=t,a}function m3(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=Vi(e);return this.tween(r,(n.local?f3:p3)(n,t))}function g3(e,t){return function(){xl(this,e).delay=+t.apply(this,arguments)}}function x3(e,t){return t=+t,function(){xl(this,e).delay=t}}function v3(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?g3:x3)(t,e)):Mt(this.node(),t).delay}function y3(e,t){return function(){Wt(this,e).duration=+t.apply(this,arguments)}}function b3(e,t){return t=+t,function(){Wt(this,e).duration=t}}function w3(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?y3:b3)(t,e)):Mt(this.node(),t).duration}function _3(e,t){if(typeof t!="function")throw new Error;return function(){Wt(this,e).ease=t}}function C3(e){var t=this._id;return arguments.length?this.each(_3(t,e)):Mt(this.node(),t).ease}function S3(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;Wt(this,e).ease=r}}function A3(e){if(typeof e!="function")throw new Error;return this.each(S3(this._id,e))}function k3(e){typeof e!="function"&&(e=x0(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var i=t[a],o=i.length,s=n[a]=[],l,d=0;d<o;++d)(l=i[d])&&e.call(l,l.__data__,d,i)&&s.push(l);return new nr(n,this._parents,this._name,this._id)}function E3(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,a=r.length,i=Math.min(n,a),o=new Array(n),s=0;s<i;++s)for(var l=t[s],d=r[s],u=l.length,h=o[s]=new Array(u),f,p=0;p<u;++p)(f=l[p]||d[p])&&(h[p]=f);for(;s<n;++s)o[s]=t[s];return new nr(o,this._parents,this._name,this._id)}function N3(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function T3(e,t,r){var n,a,i=N3(t)?xl:Wt;return function(){var o=i(this,e),s=o.on;s!==n&&(a=(n=s).copy()).on(t,r),o.on=a}}function I3(e,t){var r=this._id;return arguments.length<2?Mt(this.node(),r).on.on(e):this.each(T3(r,e,t))}function O3(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function B3(){return this.on("end.remove",O3(this._id))}function j3(e){var t=this._name,r=this._id;typeof e!="function"&&(e=hl(e));for(var n=this._groups,a=n.length,i=new Array(a),o=0;o<a;++o)for(var s=n[o],l=s.length,d=i[o]=new Array(l),u,h,f=0;f<l;++f)(u=s[f])&&(h=e.call(u,u.__data__,f,s))&&("__data__"in u&&(h.__data__=u.__data__),d[f]=h,Wi(d[f],t,r,f,d,Mt(u,r)));return new nr(i,this._parents,t,r)}function D3(e){var t=this._name,r=this._id;typeof e!="function"&&(e=g0(e));for(var n=this._groups,a=n.length,i=[],o=[],s=0;s<a;++s)for(var l=n[s],d=l.length,u,h=0;h<d;++h)if(u=l[h]){for(var f=e.call(u,u.__data__,h,l),p,m=Mt(u,r),g=0,x=f.length;g<x;++g)(p=f[g])&&Wi(p,t,r,g,f,m);i.push(f),o.push(u)}return new nr(i,o,t,r)}var R3=da.prototype.constructor;function L3(){return new R3(this._groups,this._parents)}function M3(e,t){var r,n,a;return function(){var i=en(this,e),o=(this.style.removeProperty(e),en(this,e));return i===o?null:i===r&&o===n?a:a=t(r=i,n=o)}}function P0(e){return function(){this.style.removeProperty(e)}}function P3(e,t,r){var n,a=r+"",i;return function(){var o=en(this,e);return o===a?null:o===n?i:i=t(n=o,r)}}function F3(e,t,r){var n,a,i;return function(){var o=en(this,e),s=r(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),en(this,e))),o===l?null:o===n&&l===a?i:(a=l,i=t(n=o,s))}}function $3(e,t){var r,n,a,i="style."+t,o="end."+i,s;return function(){var l=Wt(this,e),d=l.on,u=l.value[i]==null?s||(s=P0(t)):void 0;(d!==r||a!==u)&&(n=(r=d).copy()).on(o,a=u),l.on=n}}function U3(e,t,r){var n=(e+="")=="transform"?GC:M0;return t==null?this.styleTween(e,M3(e,n)).on("end.style."+e,P0(e)):typeof t=="function"?this.styleTween(e,F3(e,n,vl(this,"style."+e,t))).each($3(this._id,e)):this.styleTween(e,P3(e,n,t),r).on("end.style."+e,null)}function z3(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function H3(e,t,r){var n,a;function i(){var o=t.apply(this,arguments);return o!==a&&(n=(a=o)&&z3(e,o,r)),n}return i._value=t,i}function G3(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,H3(e,t,r??""))}function V3(e){return function(){this.textContent=e}}function q3(e){return function(){var t=e(this);this.textContent=t??""}}function W3(e){return this.tween("text",typeof e=="function"?q3(vl(this,"text",e)):V3(e==null?"":e+""))}function X3(e){return function(t){this.textContent=e.call(this,t)}}function Y3(e){var t,r;function n(){var a=e.apply(this,arguments);return a!==r&&(t=(r=a)&&X3(a)),t}return n._value=e,n}function K3(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Y3(e))}function Z3(){for(var e=this._name,t=this._id,r=F0(),n=this._groups,a=n.length,i=0;i<a;++i)for(var o=n[i],s=o.length,l,d=0;d<s;++d)if(l=o[d]){var u=Mt(l,t);Wi(l,e,r,d,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new nr(n,this._parents,e,r)}function J3(){var e,t,r=this,n=r._id,a=r.size();return new Promise(function(i,o){var s={value:o},l={value:function(){--a===0&&i()}};r.each(function(){var d=Wt(this,n),u=d.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),d.on=t}),a===0&&i()})}var Q3=0;function nr(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function F0(){return++Q3}var Yt=da.prototype;nr.prototype={constructor:nr,select:j3,selectAll:D3,selectChild:Yt.selectChild,selectChildren:Yt.selectChildren,filter:k3,merge:E3,selection:L3,transition:Z3,call:Yt.call,nodes:Yt.nodes,node:Yt.node,size:Yt.size,empty:Yt.empty,each:Yt.each,on:I3,attr:d3,attrTween:m3,style:U3,styleTween:G3,text:W3,textTween:K3,remove:B3,tween:n3,delay:v3,duration:w3,ease:C3,easeVarying:A3,end:J3,[Symbol.iterator]:Yt[Symbol.iterator]};function e4(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var t4={time:null,delay:0,duration:250,ease:e4};function r4(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function n4(e){var t,r;e instanceof nr?(t=e._id,e=e._name):(t=F0(),(r=t4).time=gl(),e=e==null?null:e+"");for(var n=this._groups,a=n.length,i=0;i<a;++i)for(var o=n[i],s=o.length,l,d=0;d<s;++d)(l=o[d])&&Wi(l,e,t,d,o,r||r4(l,t));return new nr(n,this._parents,e,t)}da.prototype.interrupt=e3;da.prototype.transition=n4;const zT=Math.abs,HT=Math.atan2,GT=Math.cos,VT=Math.max,qT=Math.min,WT=Math.sin,XT=Math.sqrt,iu=1e-12,yl=Math.PI,ou=yl/2,YT=2*yl;function KT(e){return e>1?0:e<-1?yl:Math.acos(e)}function ZT(e){return e>=1?ou:e<=-1?-ou:Math.asin(e)}function $0(e){this._context=e}$0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function a4(e){return new $0(e)}class U0{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function i4(e){return new U0(e,!0)}function o4(e){return new U0(e,!1)}function mr(){}function yi(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function Xi(e){this._context=e}Xi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:yi(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:yi(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function s4(e){return new Xi(e)}function z0(e){this._context=e}z0.prototype={areaStart:mr,areaEnd:mr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:yi(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function l4(e){return new z0(e)}function H0(e){this._context=e}H0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:yi(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function c4(e){return new H0(e)}function G0(e,t){this._basis=new Xi(e),this._beta=t}G0.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,r=e.length-1;if(r>0)for(var n=e[0],a=t[0],i=e[r]-n,o=t[r]-a,s=-1,l;++s<=r;)l=s/r,this._basis.point(this._beta*e[s]+(1-this._beta)*(n+l*i),this._beta*t[s]+(1-this._beta)*(a+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const d4=(function e(t){function r(n){return t===1?new Xi(n):new G0(n,t)}return r.beta=function(n){return e(+n)},r})(.85);function bi(e,t,r){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-r),e._x2,e._y2)}function bl(e,t){this._context=e,this._k=(1-t)/6}bl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:bi(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:bi(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const u4=(function e(t){function r(n){return new bl(n,t)}return r.tension=function(n){return e(+n)},r})(0);function wl(e,t){this._context=e,this._k=(1-t)/6}wl.prototype={areaStart:mr,areaEnd:mr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:bi(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const h4=(function e(t){function r(n){return new wl(n,t)}return r.tension=function(n){return e(+n)},r})(0);function _l(e,t){this._context=e,this._k=(1-t)/6}_l.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:bi(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const f4=(function e(t){function r(n){return new _l(n,t)}return r.tension=function(n){return e(+n)},r})(0);function Cl(e,t,r){var n=e._x1,a=e._y1,i=e._x2,o=e._y2;if(e._l01_a>iu){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);n=(n*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,a=(a*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>iu){var d=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);i=(i*d+e._x1*e._l23_2a-t*e._l12_2a)/u,o=(o*d+e._y1*e._l23_2a-r*e._l12_2a)/u}e._context.bezierCurveTo(n,a,i,o,e._x2,e._y2)}function V0(e,t){this._context=e,this._alpha=t}V0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Cl(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const p4=(function e(t){function r(n){return t?new V0(n,t):new bl(n,0)}return r.alpha=function(n){return e(+n)},r})(.5);function q0(e,t){this._context=e,this._alpha=t}q0.prototype={areaStart:mr,areaEnd:mr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Cl(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const m4=(function e(t){function r(n){return t?new q0(n,t):new wl(n,0)}return r.alpha=function(n){return e(+n)},r})(.5);function W0(e,t){this._context=e,this._alpha=t}W0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Cl(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const g4=(function e(t){function r(n){return t?new W0(n,t):new _l(n,0)}return r.alpha=function(n){return e(+n)},r})(.5);function X0(e){this._context=e}X0.prototype={areaStart:mr,areaEnd:mr,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function x4(e){return new X0(e)}function su(e){return e<0?-1:1}function lu(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),o=(r-e._y1)/(a||n<0&&-0),s=(i*a+o*n)/(n+a);return(su(i)+su(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(s))||0}function cu(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Fo(e,t,r){var n=e._x0,a=e._y0,i=e._x1,o=e._y1,s=(i-n)/3;e._context.bezierCurveTo(n+s,a+s*t,i-s,o-s*r,i,o)}function wi(e){this._context=e}wi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Fo(this,this._t0,cu(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Fo(this,cu(this,r=lu(this,e,t)),r);break;default:Fo(this,this._t0,r=lu(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function Y0(e){this._context=new K0(e)}(Y0.prototype=Object.create(wi.prototype)).point=function(e,t){wi.prototype.point.call(this,t,e)};function K0(e){this._context=e}K0.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function v4(e){return new wi(e)}function y4(e){return new Y0(e)}function Z0(e){this._context=e}Z0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=du(e),a=du(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function du(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function b4(e){return new Z0(e)}function Yi(e,t){this._context=e,this._t=t}Yi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function w4(e){return new Yi(e,.5)}function _4(e){return new Yi(e,0)}function C4(e){return new Yi(e,1)}function jn(e,t,r){this.k=e,this.x=t,this.y=r}jn.prototype={constructor:jn,scale:function(e){return e===1?this:new jn(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new jn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};jn.prototype;const Va={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:e=>e>=255?255:e<0?0:e,g:e=>e>=255?255:e<0?0:e,b:e=>e>=255?255:e<0?0:e,h:e=>e%360,s:e=>e>=100?100:e<0?0:e,l:e=>e>=100?100:e<0?0:e,a:e=>e>=1?1:e<0?0:e},toLinear:e=>{const t=e/255;return e>.03928?Math.pow((t+.055)/1.055,2.4):t/12.92},hue2rgb:(e,t,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e),hsl2rgb:({h:e,s:t,l:r},n)=>{if(!t)return r*2.55;e/=360,t/=100,r/=100;const a=r<.5?r*(1+t):r+t-r*t,i=2*r-a;switch(n){case"r":return Va.hue2rgb(i,a,e+1/3)*255;case"g":return Va.hue2rgb(i,a,e)*255;case"b":return Va.hue2rgb(i,a,e-1/3)*255}},rgb2hsl:({r:e,g:t,b:r},n)=>{e/=255,t/=255,r/=255;const a=Math.max(e,t,r),i=Math.min(e,t,r),o=(a+i)/2;if(n==="l")return o*100;if(a===i)return 0;const s=a-i,l=o>.5?s/(2-a-i):s/(a+i);if(n==="s")return l*100;switch(a){case e:return((t-r)/s+(t<r?6:0))*60;case t:return((r-e)/s+2)*60;case r:return((e-t)/s+4)*60;default:return-1}}},S4={clamp:(e,t,r)=>t>r?Math.min(t,Math.max(r,e)):Math.min(r,Math.max(t,e)),round:e=>Math.round(e*1e10)/1e10},A4={dec2hex:e=>{const t=Math.round(e).toString(16);return t.length>1?t:`0${t}`}},ae={channel:Va,lang:S4,unit:A4},lr={};for(let e=0;e<=255;e++)lr[e]=ae.unit.dec2hex(e);const Ke={ALL:0,RGB:1,HSL:2};class k4{constructor(){this.type=Ke.ALL}get(){return this.type}set(t){if(this.type&&this.type!==t)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=t}reset(){this.type=Ke.ALL}is(t){return this.type===t}}class E4{constructor(t,r){this.color=r,this.changed=!1,this.data=t,this.type=new k4}set(t,r){return this.color=r,this.changed=!1,this.data=t,this.type.type=Ke.ALL,this}_ensureHSL(){const t=this.data,{h:r,s:n,l:a}=t;r===void 0&&(t.h=ae.channel.rgb2hsl(t,"h")),n===void 0&&(t.s=ae.channel.rgb2hsl(t,"s")),a===void 0&&(t.l=ae.channel.rgb2hsl(t,"l"))}_ensureRGB(){const t=this.data,{r,g:n,b:a}=t;r===void 0&&(t.r=ae.channel.hsl2rgb(t,"r")),n===void 0&&(t.g=ae.channel.hsl2rgb(t,"g")),a===void 0&&(t.b=ae.channel.hsl2rgb(t,"b"))}get r(){const t=this.data,r=t.r;return!this.type.is(Ke.HSL)&&r!==void 0?r:(this._ensureHSL(),ae.channel.hsl2rgb(t,"r"))}get g(){const t=this.data,r=t.g;return!this.type.is(Ke.HSL)&&r!==void 0?r:(this._ensureHSL(),ae.channel.hsl2rgb(t,"g"))}get b(){const t=this.data,r=t.b;return!this.type.is(Ke.HSL)&&r!==void 0?r:(this._ensureHSL(),ae.channel.hsl2rgb(t,"b"))}get h(){const t=this.data,r=t.h;return!this.type.is(Ke.RGB)&&r!==void 0?r:(this._ensureRGB(),ae.channel.rgb2hsl(t,"h"))}get s(){const t=this.data,r=t.s;return!this.type.is(Ke.RGB)&&r!==void 0?r:(this._ensureRGB(),ae.channel.rgb2hsl(t,"s"))}get l(){const t=this.data,r=t.l;return!this.type.is(Ke.RGB)&&r!==void 0?r:(this._ensureRGB(),ae.channel.rgb2hsl(t,"l"))}get a(){return this.data.a}set r(t){this.type.set(Ke.RGB),this.changed=!0,this.data.r=t}set g(t){this.type.set(Ke.RGB),this.changed=!0,this.data.g=t}set b(t){this.type.set(Ke.RGB),this.changed=!0,this.data.b=t}set h(t){this.type.set(Ke.HSL),this.changed=!0,this.data.h=t}set s(t){this.type.set(Ke.HSL),this.changed=!0,this.data.s=t}set l(t){this.type.set(Ke.HSL),this.changed=!0,this.data.l=t}set a(t){this.changed=!0,this.data.a=t}}const Ki=new E4({r:0,g:0,b:0,a:0},"transparent"),Yr={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:e=>{if(e.charCodeAt(0)!==35)return;const t=e.match(Yr.re);if(!t)return;const r=t[1],n=parseInt(r,16),a=r.length,i=a%4===0,o=a>4,s=o?1:17,l=o?8:4,d=i?0:-1,u=o?255:15;return Ki.set({r:(n>>l*(d+3)&u)*s,g:(n>>l*(d+2)&u)*s,b:(n>>l*(d+1)&u)*s,a:i?(n&u)*s/255:1},e)},stringify:e=>{const{r:t,g:r,b:n,a}=e;return a<1?`#${lr[Math.round(t)]}${lr[Math.round(r)]}${lr[Math.round(n)]}${lr[Math.round(a*255)]}`:`#${lr[Math.round(t)]}${lr[Math.round(r)]}${lr[Math.round(n)]}`}},kr={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:e=>{const t=e.match(kr.hueRe);if(t){const[,r,n]=t;switch(n){case"grad":return ae.channel.clamp.h(parseFloat(r)*.9);case"rad":return ae.channel.clamp.h(parseFloat(r)*180/Math.PI);case"turn":return ae.channel.clamp.h(parseFloat(r)*360)}}return ae.channel.clamp.h(parseFloat(e))},parse:e=>{const t=e.charCodeAt(0);if(t!==104&&t!==72)return;const r=e.match(kr.re);if(!r)return;const[,n,a,i,o,s]=r;return Ki.set({h:kr._hue2deg(n),s:ae.channel.clamp.s(parseFloat(a)),l:ae.channel.clamp.l(parseFloat(i)),a:o?ae.channel.clamp.a(s?parseFloat(o)/100:parseFloat(o)):1},e)},stringify:e=>{const{h:t,s:r,l:n,a}=e;return a<1?`hsla(${ae.lang.round(t)}, ${ae.lang.round(r)}%, ${ae.lang.round(n)}%, ${a})`:`hsl(${ae.lang.round(t)}, ${ae.lang.round(r)}%, ${ae.lang.round(n)}%)`}},$n={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:e=>{e=e.toLowerCase();const t=$n.colors[e];if(t)return Yr.parse(t)},stringify:e=>{const t=Yr.stringify(e);for(const r in $n.colors)if($n.colors[r]===t)return r}},Dn={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:e=>{const t=e.charCodeAt(0);if(t!==114&&t!==82)return;const r=e.match(Dn.re);if(!r)return;const[,n,a,i,o,s,l,d,u]=r;return Ki.set({r:ae.channel.clamp.r(a?parseFloat(n)*2.55:parseFloat(n)),g:ae.channel.clamp.g(o?parseFloat(i)*2.55:parseFloat(i)),b:ae.channel.clamp.b(l?parseFloat(s)*2.55:parseFloat(s)),a:d?ae.channel.clamp.a(u?parseFloat(d)/100:parseFloat(d)):1},e)},stringify:e=>{const{r:t,g:r,b:n,a}=e;return a<1?`rgba(${ae.lang.round(t)}, ${ae.lang.round(r)}, ${ae.lang.round(n)}, ${ae.lang.round(a)})`:`rgb(${ae.lang.round(t)}, ${ae.lang.round(r)}, ${ae.lang.round(n)})`}},Gt={format:{keyword:$n,hex:Yr,rgb:Dn,rgba:Dn,hsl:kr,hsla:kr},parse:e=>{if(typeof e!="string")return e;const t=Yr.parse(e)||Dn.parse(e)||kr.parse(e)||$n.parse(e);if(t)return t;throw new Error(`Unsupported color format: "${e}"`)},stringify:e=>!e.changed&&e.color?e.color:e.type.is(Ke.HSL)||e.data.r===void 0?kr.stringify(e):e.a<1||!Number.isInteger(e.r)||!Number.isInteger(e.g)||!Number.isInteger(e.b)?Dn.stringify(e):Yr.stringify(e)},J0=(e,t)=>{const r=Gt.parse(e);for(const n in t)r[n]=ae.channel.clamp[n](t[n]);return Gt.stringify(r)},Un=(e,t,r=0,n=1)=>{if(typeof e!="number")return J0(e,{a:t});const a=Ki.set({r:ae.channel.clamp.r(e),g:ae.channel.clamp.g(t),b:ae.channel.clamp.b(r),a:ae.channel.clamp.a(n)});return Gt.stringify(a)},N4=e=>{const{r:t,g:r,b:n}=Gt.parse(e),a=.2126*ae.channel.toLinear(t)+.7152*ae.channel.toLinear(r)+.0722*ae.channel.toLinear(n);return ae.lang.round(a)},T4=e=>N4(e)>=.5,ha=e=>!T4(e),Q0=(e,t,r)=>{const n=Gt.parse(e),a=n[t],i=ae.channel.clamp[t](a+r);return a!==i&&(n[t]=i),Gt.stringify(n)},K=(e,t)=>Q0(e,"l",t),re=(e,t)=>Q0(e,"l",-t),T=(e,t)=>{const r=Gt.parse(e),n={};for(const a in t)t[a]&&(n[a]=r[a]+t[a]);return J0(e,n)},I4=(e,t,r=50)=>{const{r:n,g:a,b:i,a:o}=Gt.parse(e),{r:s,g:l,b:d,a:u}=Gt.parse(t),h=r/100,f=h*2-1,p=o-u,g=((f*p===-1?f:(f+p)/(1+f*p))+1)/2,x=1-g,y=n*g+s*x,v=a*g+l*x,w=i*g+d*x,S=o*h+u*(1-h);return Un(y,v,w,S)},G=(e,t=100)=>{const r=Gt.parse(e);return r.r=255-r.r,r.g=255-r.g,r.b=255-r.b,I4(r,e,t)};var ef=typeof global=="object"&&global&&global.Object===Object&&global,O4=typeof self=="object"&&self&&self.Object===Object&&self,Xt=ef||O4||Function("return this")(),_i=Xt.Symbol,tf=Object.prototype,B4=tf.hasOwnProperty,j4=tf.toString,kn=_i?_i.toStringTag:void 0;function D4(e){var t=B4.call(e,kn),r=e[kn];try{e[kn]=void 0;var n=!0}catch{}var a=j4.call(e);return n&&(t?e[kn]=r:delete e[kn]),a}var R4=Object.prototype,L4=R4.toString;function M4(e){return L4.call(e)}var P4="[object Null]",F4="[object Undefined]",uu=_i?_i.toStringTag:void 0;function xn(e){return e==null?e===void 0?F4:P4:uu&&uu in Object(e)?D4(e):M4(e)}function Dr(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var $4="[object AsyncFunction]",U4="[object Function]",z4="[object GeneratorFunction]",H4="[object Proxy]";function Sl(e){if(!Dr(e))return!1;var t=xn(e);return t==U4||t==z4||t==$4||t==H4}var $o=Xt["__core-js_shared__"],hu=(function(){var e=/[^.]+$/.exec($o&&$o.keys&&$o.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})();function G4(e){return!!hu&&hu in e}var V4=Function.prototype,q4=V4.toString;function Rr(e){if(e!=null){try{return q4.call(e)}catch{}try{return e+""}catch{}}return""}var W4=/[\\^$.*+?()[\]{}|]/g,X4=/^\[object .+?Constructor\]$/,Y4=Function.prototype,K4=Object.prototype,Z4=Y4.toString,J4=K4.hasOwnProperty,Q4=RegExp("^"+Z4.call(J4).replace(W4,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function eS(e){if(!Dr(e)||G4(e))return!1;var t=Sl(e)?Q4:X4;return t.test(Rr(e))}function tS(e,t){return e?.[t]}function Lr(e,t){var r=tS(e,t);return eS(r)?r:void 0}var ea=Lr(Object,"create");function rS(){this.__data__=ea?ea(null):{},this.size=0}function nS(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var aS="__lodash_hash_undefined__",iS=Object.prototype,oS=iS.hasOwnProperty;function sS(e){var t=this.__data__;if(ea){var r=t[e];return r===aS?void 0:r}return oS.call(t,e)?t[e]:void 0}var lS=Object.prototype,cS=lS.hasOwnProperty;function dS(e){var t=this.__data__;return ea?t[e]!==void 0:cS.call(t,e)}var uS="__lodash_hash_undefined__";function hS(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=ea&&t===void 0?uS:t,this}function Or(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Or.prototype.clear=rS;Or.prototype.delete=nS;Or.prototype.get=sS;Or.prototype.has=dS;Or.prototype.set=hS;function fS(){this.__data__=[],this.size=0}function Zi(e,t){return e===t||e!==e&&t!==t}function Ji(e,t){for(var r=e.length;r--;)if(Zi(e[r][0],t))return r;return-1}var pS=Array.prototype,mS=pS.splice;function gS(e){var t=this.__data__,r=Ji(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():mS.call(t,r,1),--this.size,!0}function xS(e){var t=this.__data__,r=Ji(t,e);return r<0?void 0:t[r][1]}function vS(e){return Ji(this.__data__,e)>-1}function yS(e,t){var r=this.__data__,n=Ji(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function ir(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ir.prototype.clear=fS;ir.prototype.delete=gS;ir.prototype.get=xS;ir.prototype.has=vS;ir.prototype.set=yS;var ta=Lr(Xt,"Map");function bS(){this.size=0,this.__data__={hash:new Or,map:new(ta||ir),string:new Or}}function wS(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Qi(e,t){var r=e.__data__;return wS(t)?r[typeof t=="string"?"string":"hash"]:r.map}function _S(e){var t=Qi(this,e).delete(e);return this.size-=t?1:0,t}function CS(e){return Qi(this,e).get(e)}function SS(e){return Qi(this,e).has(e)}function AS(e,t){var r=Qi(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function xr(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}xr.prototype.clear=bS;xr.prototype.delete=_S;xr.prototype.get=CS;xr.prototype.has=SS;xr.prototype.set=AS;var kS="Expected a function";function fa(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(kS);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var o=e.apply(this,n);return r.cache=i.set(a,o)||i,o};return r.cache=new(fa.Cache||xr),r}fa.Cache=xr;function ES(){this.__data__=new ir,this.size=0}function NS(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function TS(e){return this.__data__.get(e)}function IS(e){return this.__data__.has(e)}var OS=200;function BS(e,t){var r=this.__data__;if(r instanceof ir){var n=r.__data__;if(!ta||n.length<OS-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new xr(n)}return r.set(e,t),this.size=r.size,this}function vn(e){var t=this.__data__=new ir(e);this.size=t.size}vn.prototype.clear=ES;vn.prototype.delete=NS;vn.prototype.get=TS;vn.prototype.has=IS;vn.prototype.set=BS;var Ci=(function(){try{var e=Lr(Object,"defineProperty");return e({},"",{}),e}catch{}})();function Al(e,t,r){t=="__proto__"&&Ci?Ci(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function _s(e,t,r){(r!==void 0&&!Zi(e[t],r)||r===void 0&&!(t in e))&&Al(e,t,r)}function jS(e){return function(t,r,n){for(var a=-1,i=Object(t),o=n(t),s=o.length;s--;){var l=o[++a];if(r(i[l],l,i)===!1)break}return t}}var DS=jS(),rf=typeof exports=="object"&&exports&&!exports.nodeType&&exports,fu=rf&&typeof module=="object"&&module&&!module.nodeType&&module,RS=fu&&fu.exports===rf,pu=RS?Xt.Buffer:void 0,mu=pu?pu.allocUnsafe:void 0;function LS(e,t){if(t)return e.slice();var r=e.length,n=mu?mu(r):new e.constructor(r);return e.copy(n),n}var gu=Xt.Uint8Array;function MS(e){var t=new e.constructor(e.byteLength);return new gu(t).set(new gu(e)),t}function PS(e,t){var r=t?MS(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function FS(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var xu=Object.create,$S=(function(){function e(){}return function(t){if(!Dr(t))return{};if(xu)return xu(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}})();function nf(e,t){return function(r){return e(t(r))}}var af=nf(Object.getPrototypeOf,Object),US=Object.prototype;function eo(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||US;return e===r}function zS(e){return typeof e.constructor=="function"&&!eo(e)?$S(af(e)):{}}function pa(e){return e!=null&&typeof e=="object"}var HS="[object Arguments]";function vu(e){return pa(e)&&xn(e)==HS}var of=Object.prototype,GS=of.hasOwnProperty,VS=of.propertyIsEnumerable,Si=vu((function(){return arguments})())?vu:function(e){return pa(e)&&GS.call(e,"callee")&&!VS.call(e,"callee")},Ai=Array.isArray,qS=9007199254740991;function sf(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=qS}function to(e){return e!=null&&sf(e.length)&&!Sl(e)}function WS(e){return pa(e)&&to(e)}function XS(){return!1}var lf=typeof exports=="object"&&exports&&!exports.nodeType&&exports,yu=lf&&typeof module=="object"&&module&&!module.nodeType&&module,YS=yu&&yu.exports===lf,bu=YS?Xt.Buffer:void 0,KS=bu?bu.isBuffer:void 0,kl=KS||XS,ZS="[object Object]",JS=Function.prototype,QS=Object.prototype,cf=JS.toString,eA=QS.hasOwnProperty,tA=cf.call(Object);function rA(e){if(!pa(e)||xn(e)!=ZS)return!1;var t=af(e);if(t===null)return!0;var r=eA.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&cf.call(r)==tA}var nA="[object Arguments]",aA="[object Array]",iA="[object Boolean]",oA="[object Date]",sA="[object Error]",lA="[object Function]",cA="[object Map]",dA="[object Number]",uA="[object Object]",hA="[object RegExp]",fA="[object Set]",pA="[object String]",mA="[object WeakMap]",gA="[object ArrayBuffer]",xA="[object DataView]",vA="[object Float32Array]",yA="[object Float64Array]",bA="[object Int8Array]",wA="[object Int16Array]",_A="[object Int32Array]",CA="[object Uint8Array]",SA="[object Uint8ClampedArray]",AA="[object Uint16Array]",kA="[object Uint32Array]",Se={};Se[vA]=Se[yA]=Se[bA]=Se[wA]=Se[_A]=Se[CA]=Se[SA]=Se[AA]=Se[kA]=!0;Se[nA]=Se[aA]=Se[gA]=Se[iA]=Se[xA]=Se[oA]=Se[sA]=Se[lA]=Se[cA]=Se[dA]=Se[uA]=Se[hA]=Se[fA]=Se[pA]=Se[mA]=!1;function EA(e){return pa(e)&&sf(e.length)&&!!Se[xn(e)]}function NA(e){return function(t){return e(t)}}var df=typeof exports=="object"&&exports&&!exports.nodeType&&exports,zn=df&&typeof module=="object"&&module&&!module.nodeType&&module,TA=zn&&zn.exports===df,Uo=TA&&ef.process,wu=(function(){try{var e=zn&&zn.require&&zn.require("util").types;return e||Uo&&Uo.binding&&Uo.binding("util")}catch{}})(),_u=wu&&wu.isTypedArray,El=_u?NA(_u):EA;function Cs(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var IA=Object.prototype,OA=IA.hasOwnProperty;function BA(e,t,r){var n=e[t];(!(OA.call(e,t)&&Zi(n,r))||r===void 0&&!(t in e))&&Al(e,t,r)}function jA(e,t,r,n){var a=!r;r||(r={});for(var i=-1,o=t.length;++i<o;){var s=t[i],l=void 0;l===void 0&&(l=e[s]),a?Al(r,s,l):BA(r,s,l)}return r}function DA(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var RA=9007199254740991,LA=/^(?:0|[1-9]\d*)$/;function uf(e,t){var r=typeof e;return t=t??RA,!!t&&(r=="number"||r!="symbol"&&LA.test(e))&&e>-1&&e%1==0&&e<t}var MA=Object.prototype,PA=MA.hasOwnProperty;function FA(e,t){var r=Ai(e),n=!r&&Si(e),a=!r&&!n&&kl(e),i=!r&&!n&&!a&&El(e),o=r||n||a||i,s=o?DA(e.length,String):[],l=s.length;for(var d in e)(t||PA.call(e,d))&&!(o&&(d=="length"||a&&(d=="offset"||d=="parent")||i&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||uf(d,l)))&&s.push(d);return s}function $A(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var UA=Object.prototype,zA=UA.hasOwnProperty;function HA(e){if(!Dr(e))return $A(e);var t=eo(e),r=[];for(var n in e)n=="constructor"&&(t||!zA.call(e,n))||r.push(n);return r}function hf(e){return to(e)?FA(e,!0):HA(e)}function GA(e){return jA(e,hf(e))}function VA(e,t,r,n,a,i,o){var s=Cs(e,r),l=Cs(t,r),d=o.get(l);if(d){_s(e,r,d);return}var u=i?i(s,l,r+"",e,t,o):void 0,h=u===void 0;if(h){var f=Ai(l),p=!f&&kl(l),m=!f&&!p&&El(l);u=l,f||p||m?Ai(s)?u=s:WS(s)?u=FS(s):p?(h=!1,u=LS(l,!0)):m?(h=!1,u=PS(l,!0)):u=[]:rA(l)||Si(l)?(u=s,Si(s)?u=GA(s):(!Dr(s)||Sl(s))&&(u=zS(l))):h=!1}h&&(o.set(l,u),a(u,l,n,i,o),o.delete(l)),_s(e,r,u)}function ff(e,t,r,n,a){e!==t&&DS(t,function(i,o){if(a||(a=new vn),Dr(i))VA(e,t,o,r,ff,n,a);else{var s=n?n(Cs(e,o),i,o+"",e,t,a):void 0;s===void 0&&(s=i),_s(e,o,s)}},hf)}function pf(e){return e}function qA(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var Cu=Math.max;function WA(e,t,r){return t=Cu(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,i=Cu(n.length-t,0),o=Array(i);++a<i;)o[a]=n[t+a];a=-1;for(var s=Array(t+1);++a<t;)s[a]=n[a];return s[t]=r(o),qA(e,this,s)}}function XA(e){return function(){return e}}var YA=Ci?function(e,t){return Ci(e,"toString",{configurable:!0,enumerable:!1,value:XA(t),writable:!0})}:pf,KA=800,ZA=16,JA=Date.now;function QA(e){var t=0,r=0;return function(){var n=JA(),a=ZA-(n-r);if(r=n,a>0){if(++t>=KA)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var ek=QA(YA);function tk(e,t){return ek(WA(e,t,pf),e+"")}function rk(e,t,r){if(!Dr(r))return!1;var n=typeof t;return(n=="number"?to(r)&&uf(t,r.length):n=="string"&&t in r)?Zi(r[t],e):!1}function nk(e){return tk(function(t,r){var n=-1,a=r.length,i=a>1?r[a-1]:void 0,o=a>2?r[2]:void 0;for(i=e.length>3&&typeof i=="function"?(a--,i):void 0,o&&rk(r[0],r[1],o)&&(i=a<3?void 0:i,a=1),t=Object(t);++n<a;){var s=r[n];s&&e(t,s,n,i)}return t})}var ak=nk(function(e,t,r){ff(e,t,r)}),mf="comm",gf="rule",xf="decl",ik="@import",ok="@namespace",sk="@keyframes",lk="@layer",vf=Math.abs,Nl=String.fromCharCode;function yf(e){return e.trim()}function qa(e,t,r){return e.replace(t,r)}function ck(e,t,r){return e.indexOf(t,r)}function Kr(e,t){return e.charCodeAt(t)|0}function rn(e,t,r){return e.slice(t,r)}function Ft(e){return e.length}function dk(e){return e.length}function Ba(e,t){return t.push(e),e}var ro=1,nn=1,bf=0,Nt=0,je=0,yn="";function Tl(e,t,r,n,a,i,o,s){return{value:e,root:t,parent:r,type:n,props:a,children:i,line:ro,column:nn,length:o,return:"",siblings:s}}function uk(){return je}function hk(){return je=Nt>0?Kr(yn,--Nt):0,nn--,je===10&&(nn=1,ro--),je}function Rt(){return je=Nt<bf?Kr(yn,Nt++):0,nn++,je===10&&(nn=1,ro++),je}function ur(){return Kr(yn,Nt)}function Wa(){return Nt}function no(e,t){return rn(yn,e,t)}function ra(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function fk(e){return ro=nn=1,bf=Ft(yn=e),Nt=0,[]}function pk(e){return yn="",e}function zo(e){return yf(no(Nt-1,Ss(e===91?e+2:e===40?e+1:e)))}function mk(e){for(;(je=ur())&&je<33;)Rt();return ra(e)>2||ra(je)>3?"":" "}function gk(e,t){for(;--t&&Rt()&&!(je<48||je>102||je>57&&je<65||je>70&&je<97););return no(e,Wa()+(t<6&&ur()==32&&Rt()==32))}function Ss(e){for(;Rt();)switch(je){case e:return Nt;case 34:case 39:e!==34&&e!==39&&Ss(je);break;case 40:e===41&&Ss(e);break;case 92:Rt();break}return Nt}function xk(e,t){for(;Rt()&&e+je!==57;)if(e+je===84&&ur()===47)break;return"/*"+no(t,Nt-1)+"*"+Nl(e===47?e:Rt())}function vk(e){for(;!ra(ur());)Rt();return no(e,Nt)}function yk(e){return pk(Xa("",null,null,null,[""],e=fk(e),0,[0],e))}function Xa(e,t,r,n,a,i,o,s,l){for(var d=0,u=0,h=o,f=0,p=0,m=0,g=1,x=1,y=1,v=0,w="",S=a,C=i,k=n,A=w;x;)switch(m=v,v=Rt()){case 40:if(m!=108&&Kr(A,h-1)==58){ck(A+=qa(zo(v),"&","&\f"),"&\f",vf(d?s[d-1]:0))!=-1&&(y=-1);break}case 34:case 39:case 91:A+=zo(v);break;case 9:case 10:case 13:case 32:A+=mk(m);break;case 92:A+=gk(Wa()-1,7);continue;case 47:switch(ur()){case 42:case 47:Ba(bk(xk(Rt(),Wa()),t,r,l),l),(ra(m||1)==5||ra(ur()||1)==5)&&Ft(A)&&rn(A,-1,void 0)!==" "&&(A+=" ");break;default:A+="/"}break;case 123*g:s[d++]=Ft(A)*y;case 125*g:case 59:case 0:switch(v){case 0:case 125:x=0;case 59+u:y==-1&&(A=qa(A,/\f/g,"")),p>0&&(Ft(A)-h||g===0&&m===47)&&Ba(p>32?Au(A+";",n,r,h-1,l):Au(qa(A," ","")+";",n,r,h-2,l),l);break;case 59:A+=";";default:if(Ba(k=Su(A,t,r,d,u,a,s,w,S=[],C=[],h,i),i),v===123)if(u===0)Xa(A,t,k,k,S,i,h,s,C);else{switch(f){case 99:if(Kr(A,3)===110)break;case 108:if(Kr(A,2)===97)break;default:u=0;case 100:case 109:case 115:}u?Xa(e,k,k,n&&Ba(Su(e,k,k,0,0,a,s,w,a,S=[],h,C),C),a,C,h,s,n?S:C):Xa(A,k,k,k,[""],C,0,s,C)}}d=u=p=0,g=y=1,w=A="",h=o;break;case 58:h=1+Ft(A),p=m;default:if(g<1){if(v==123)--g;else if(v==125&&g++==0&&hk()==125)continue}switch(A+=Nl(v),v*g){case 38:y=u>0?1:(A+="\f",-1);break;case 44:s[d++]=(Ft(A)-1)*y,y=1;break;case 64:ur()===45&&(A+=zo(Rt())),f=ur(),u=h=Ft(w=A+=vk(Wa())),v++;break;case 45:m===45&&Ft(A)==2&&(g=0)}}return i}function Su(e,t,r,n,a,i,o,s,l,d,u,h){for(var f=a-1,p=a===0?i:[""],m=dk(p),g=0,x=0,y=0;g<n;++g)for(var v=0,w=rn(e,f+1,f=vf(x=o[g])),S=e;v<m;++v)(S=yf(x>0?p[v]+" "+w:qa(w,/&\f/g,p[v])))&&(l[y++]=S);return Tl(e,t,r,a===0?gf:s,l,d,u,h)}function bk(e,t,r,n){return Tl(e,t,r,mf,Nl(uk()),rn(e,2,-2),0,n)}function Au(e,t,r,n,a){return Tl(e,t,r,xf,rn(e,0,n),rn(e,n+1,-1),n,a)}function As(e,t){for(var r="",n=0;n<e.length;n++)r+=t(e[n],n,e,t)||"";return r}function wk(e,t,r,n){switch(e.type){case lk:if(e.children.length)break;case ik:case ok:case xf:return e.return=e.return||e.value;case mf:return"";case sk:return e.return=e.value+"{"+As(e.children,n)+"}";case gf:if(!Ft(e.value=e.props.join(",")))return""}return Ft(r=As(e.children,n))?e.return=e.value+"{"+r+"}":""}var _k=nf(Object.keys,Object),Ck=Object.prototype,Sk=Ck.hasOwnProperty;function Ak(e){if(!eo(e))return _k(e);var t=[];for(var r in Object(e))Sk.call(e,r)&&r!="constructor"&&t.push(r);return t}var ks=Lr(Xt,"DataView"),Es=Lr(Xt,"Promise"),Ns=Lr(Xt,"Set"),Ts=Lr(Xt,"WeakMap"),ku="[object Map]",kk="[object Object]",Eu="[object Promise]",Nu="[object Set]",Tu="[object WeakMap]",Iu="[object DataView]",Ek=Rr(ks),Nk=Rr(ta),Tk=Rr(Es),Ik=Rr(Ns),Ok=Rr(Ts),Cr=xn;(ks&&Cr(new ks(new ArrayBuffer(1)))!=Iu||ta&&Cr(new ta)!=ku||Es&&Cr(Es.resolve())!=Eu||Ns&&Cr(new Ns)!=Nu||Ts&&Cr(new Ts)!=Tu)&&(Cr=function(e){var t=xn(e),r=t==kk?e.constructor:void 0,n=r?Rr(r):"";if(n)switch(n){case Ek:return Iu;case Nk:return ku;case Tk:return Eu;case Ik:return Nu;case Ok:return Tu}return t});var Bk="[object Map]",jk="[object Set]",Dk=Object.prototype,Rk=Dk.hasOwnProperty;function Ho(e){if(e==null)return!0;if(to(e)&&(Ai(e)||typeof e=="string"||typeof e.splice=="function"||kl(e)||El(e)||Si(e)))return!e.length;var t=Cr(e);if(t==Bk||t==jk)return!e.size;if(eo(e))return!Ak(e).length;for(var r in e)if(Rk.call(e,r))return!1;return!0}const Kt={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},Q={trace:(...e)=>{},debug:(...e)=>{},info:(...e)=>{},warn:(...e)=>{},error:(...e)=>{},fatal:(...e)=>{}},Il=function(e="fatal"){let t=Kt.fatal;typeof e=="string"?(e=e.toLowerCase(),e in Kt&&(t=Kt[e])):typeof e=="number"&&(t=e),Q.trace=()=>{},Q.debug=()=>{},Q.info=()=>{},Q.warn=()=>{},Q.error=()=>{},Q.fatal=()=>{},t<=Kt.fatal&&(Q.fatal=console.error?console.error.bind(console,wt("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",wt("FATAL"))),t<=Kt.error&&(Q.error=console.error?console.error.bind(console,wt("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",wt("ERROR"))),t<=Kt.warn&&(Q.warn=console.warn?console.warn.bind(console,wt("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",wt("WARN"))),t<=Kt.info&&(Q.info=console.info?console.info.bind(console,wt("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",wt("INFO"))),t<=Kt.debug&&(Q.debug=console.debug?console.debug.bind(console,wt("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",wt("DEBUG"))),t<=Kt.trace&&(Q.trace=console.debug?console.debug.bind(console,wt("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",wt("TRACE")))},wt=e=>`%c${Uw().format("ss.SSS")} : ${e} : `,ma=/<br\s*\/?>/gi,Lk=e=>e?_f(e).replace(/\\n/g,"#br#").split("#br#"):[""],Mk=(()=>{let e=!1;return()=>{e||(Pk(),e=!0)}})();function Pk(){const e="data-temp-href-target";Jr.addHook("beforeSanitizeAttributes",t=>{t.tagName==="A"&&t.hasAttribute("target")&&t.setAttribute(e,t.getAttribute("target")||"")}),Jr.addHook("afterSanitizeAttributes",t=>{t.tagName==="A"&&t.hasAttribute(e)&&(t.setAttribute("target",t.getAttribute(e)||""),t.removeAttribute(e),t.getAttribute("target")==="_blank"&&t.setAttribute("rel","noopener"))})}const wf=e=>(Mk(),Jr.sanitize(e)),Ou=(e,t)=>{var r;if(((r=t.flowchart)==null?void 0:r.htmlLabels)!==!1){const n=t.securityLevel;n==="antiscript"||n==="strict"?e=wf(e):n!=="loose"&&(e=_f(e),e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),e=e.replace(/=/g,"&equals;"),e=zk(e))}return e},an=(e,t)=>e&&(t.dompurifyConfig?e=Jr.sanitize(Ou(e,t),t.dompurifyConfig).toString():e=Jr.sanitize(Ou(e,t),{FORBID_TAGS:["style"]}).toString(),e),Fk=(e,t)=>typeof e=="string"?an(e,t):e.flat().map(r=>an(r,t)),$k=e=>ma.test(e),Uk=e=>e.split(ma),zk=e=>e.replace(/#br#/g,"<br/>"),_f=e=>e.replace(ma,"#br#"),Hk=e=>{let t="";return e&&(t=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,t=t.replaceAll(/\(/g,"\\("),t=t.replaceAll(/\)/g,"\\)")),t},Cf=e=>!(e===!1||["false","null","0"].includes(String(e).trim().toLowerCase())),Gk=function(...e){const t=e.filter(r=>!isNaN(r));return Math.max(...t)},Vk=function(...e){const t=e.filter(r=>!isNaN(r));return Math.min(...t)},JT=function(e){const t=e.split(/(,)/),r=[];for(let n=0;n<t.length;n++){let a=t[n];if(a===","&&n>0&&n+1<t.length){const i=t[n-1],o=t[n+1];qk(i,o)&&(a=i+","+o,n++,r.pop())}r.push(Wk(a))}return r.join("")},Is=(e,t)=>Math.max(0,e.split(t).length-1),qk=(e,t)=>{const r=Is(e,"~"),n=Is(t,"~");return r===1&&n===1},Wk=e=>{const t=Is(e,"~");let r=!1;if(t<=1)return e;t%2!==0&&e.startsWith("~")&&(e=e.substring(1),r=!0);const n=[...e];let a=n.indexOf("~"),i=n.lastIndexOf("~");for(;a!==-1&&i!==-1&&a!==i;)n[a]="<",n[i]=">",a=n.indexOf("~"),i=n.lastIndexOf("~");return r&&n.unshift("~"),n.join("")},Bu=()=>window.MathMLElement!==void 0,Os=/\$\$(.*)\$\$/g,ju=e=>{var t;return(((t=e.match(Os))==null?void 0:t.length)??0)>0},QT=async(e,t)=>{const r=document.createElement("div");r.innerHTML=await Yk(e,t),r.id="katex-temp",r.style.visibility="hidden",r.style.position="absolute",r.style.top="0";const n=document.querySelector("body");n?.insertAdjacentElement("beforeend",r);const a={width:r.clientWidth,height:r.clientHeight};return r.remove(),a},Xk=async(e,t)=>{if(!ju(e))return e;if(!Bu()&&!t.legacyMathML)return e.replace(Os,"MathML is unsupported in this environment.");const{default:r}=await Ne(async()=>{const{default:n}=await import("./katex-qrhCpa0F.js");return{default:n}},[]);return e.split(ma).map(n=>ju(n)?`
            <div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">
              ${n}
            </div>
          `:`<div>${n}</div>`).join("").replace(Os,(n,a)=>r.renderToString(a,{throwOnError:!0,displayMode:!0,output:Bu()?"mathml":"htmlAndMathml"}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,""))},Yk=async(e,t)=>an(await Xk(e,t),t),Ol={getRows:Lk,sanitizeText:an,sanitizeTextOrArray:Fk,hasBreaks:$k,splitBreaks:Uk,lineBreakRegex:ma,removeScript:wf,getUrl:Hk,evaluate:Cf,getMax:Gk,getMin:Vk},it=(e,t)=>t?T(e,{s:-40,l:10}):T(e,{s:-40,l:-10}),ao="#ffffff",io="#f2f2f2";let Kk=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){var t,r,n,a,i,o,s,l,d,u,h;if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||T(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||T(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||it(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||it(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||it(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||it(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||G(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||G(this.tertiaryColor),this.lineColor=this.lineColor||G(this.background),this.arrowheadColor=this.arrowheadColor||G(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?re(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||"grey",this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||re(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||G(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||K(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||T(this.primaryColor,{h:30}),this.cScale4=this.cScale4||T(this.primaryColor,{h:60}),this.cScale5=this.cScale5||T(this.primaryColor,{h:90}),this.cScale6=this.cScale6||T(this.primaryColor,{h:120}),this.cScale7=this.cScale7||T(this.primaryColor,{h:150}),this.cScale8=this.cScale8||T(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||T(this.primaryColor,{h:270}),this.cScale10=this.cScale10||T(this.primaryColor,{h:300}),this.cScale11=this.cScale11||T(this.primaryColor,{h:330}),this.darkMode)for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this["cScale"+p]=re(this["cScale"+p],75);else for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this["cScale"+p]=re(this["cScale"+p],25);for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this["cScaleInv"+p]=this["cScaleInv"+p]||G(this["cScale"+p]);for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this.darkMode?this["cScalePeer"+p]=this["cScalePeer"+p]||K(this["cScale"+p],10):this["cScalePeer"+p]=this["cScalePeer"+p]||re(this["cScale"+p],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this["cScaleLabel"+p]=this["cScaleLabel"+p]||this.scaleLabelColor;const f=this.darkMode?-4:-1;for(let p=0;p<5;p++)this["surface"+p]=this["surface"+p]||T(this.mainBkg,{h:180,s:-15,l:f*(5+p*3)}),this["surfacePeer"+p]=this["surfacePeer"+p]||T(this.mainBkg,{h:180,s:-15,l:f*(8+p*3)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||T(this.primaryColor,{h:64}),this.fillType3=this.fillType3||T(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||T(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||T(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||T(this.primaryColor,{h:128}),this.fillType7=this.fillType7||T(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||T(this.primaryColor,{l:-10}),this.pie5=this.pie5||T(this.secondaryColor,{l:-10}),this.pie6=this.pie6||T(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||T(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||T(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||T(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||T(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||T(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||T(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||T(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||T(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||T(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||T(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||T(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||T(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||ha(this.quadrant1Fill)?K(this.quadrant1Fill):re(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((t=this.xyChart)==null?void 0:t.backgroundColor)||this.background,titleColor:((r=this.xyChart)==null?void 0:r.titleColor)||this.primaryTextColor,xAxisTitleColor:((n=this.xyChart)==null?void 0:n.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((a=this.xyChart)==null?void 0:a.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((i=this.xyChart)==null?void 0:i.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((o=this.xyChart)==null?void 0:o.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((s=this.xyChart)==null?void 0:s.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((d=this.xyChart)==null?void 0:d.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((h=this.xyChart)==null?void 0:h.plotColorPalette)||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?re(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||T(this.primaryColor,{h:-30}),this.git4=this.git4||T(this.primaryColor,{h:-60}),this.git5=this.git5||T(this.primaryColor,{h:-90}),this.git6=this.git6||T(this.primaryColor,{h:60}),this.git7=this.git7||T(this.primaryColor,{h:120}),this.darkMode?(this.git0=K(this.git0,25),this.git1=K(this.git1,25),this.git2=K(this.git2,25),this.git3=K(this.git3,25),this.git4=K(this.git4,25),this.git5=K(this.git5,25),this.git6=K(this.git6,25),this.git7=K(this.git7,25)):(this.git0=re(this.git0,25),this.git1=re(this.git1,25),this.git2=re(this.git2,25),this.git3=re(this.git3,25),this.git4=re(this.git4,25),this.git5=re(this.git5,25),this.git6=re(this.git6,25),this.git7=re(this.git7,25)),this.gitInv0=this.gitInv0||G(this.git0),this.gitInv1=this.gitInv1||G(this.git1),this.gitInv2=this.gitInv2||G(this.git2),this.gitInv3=this.gitInv3||G(this.git3),this.gitInv4=this.gitInv4||G(this.git4),this.gitInv5=this.gitInv5||G(this.git5),this.gitInv6=this.gitInv6||G(this.git6),this.gitInv7=this.gitInv7||G(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||ao,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||io}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(n=>{this[n]=t[n]}),this.updateColors(),r.forEach(n=>{this[n]=t[n]})}};const Zk=e=>{const t=new Kk;return t.calculate(e),t};let Jk=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=K(this.primaryColor,16),this.tertiaryColor=T(this.primaryColor,{h:-160}),this.primaryBorderColor=G(this.background),this.secondaryBorderColor=it(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=it(this.tertiaryColor,this.darkMode),this.primaryTextColor=G(this.primaryColor),this.secondaryTextColor=G(this.secondaryColor),this.tertiaryTextColor=G(this.tertiaryColor),this.lineColor=G(this.background),this.textColor=G(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=K(G("#323D47"),10),this.lineColor="calculated",this.border1="#81B1DB",this.border2=Un(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=re("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=re(this.sectionBkgColor,10),this.taskBorderColor=Un(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=Un(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){var t,r,n,a,i,o,s,l,d,u,h;this.secondBkg=K(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=K(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.mainContrastColor,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=K(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=T(this.primaryColor,{h:64}),this.fillType3=T(this.secondaryColor,{h:64}),this.fillType4=T(this.primaryColor,{h:-64}),this.fillType5=T(this.secondaryColor,{h:-64}),this.fillType6=T(this.primaryColor,{h:128}),this.fillType7=T(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||T(this.primaryColor,{h:30}),this.cScale4=this.cScale4||T(this.primaryColor,{h:60}),this.cScale5=this.cScale5||T(this.primaryColor,{h:90}),this.cScale6=this.cScale6||T(this.primaryColor,{h:120}),this.cScale7=this.cScale7||T(this.primaryColor,{h:150}),this.cScale8=this.cScale8||T(this.primaryColor,{h:210}),this.cScale9=this.cScale9||T(this.primaryColor,{h:270}),this.cScale10=this.cScale10||T(this.primaryColor,{h:300}),this.cScale11=this.cScale11||T(this.primaryColor,{h:330});for(let f=0;f<this.THEME_COLOR_LIMIT;f++)this["cScaleInv"+f]=this["cScaleInv"+f]||G(this["cScale"+f]);for(let f=0;f<this.THEME_COLOR_LIMIT;f++)this["cScalePeer"+f]=this["cScalePeer"+f]||K(this["cScale"+f],10);for(let f=0;f<5;f++)this["surface"+f]=this["surface"+f]||T(this.mainBkg,{h:30,s:-30,l:-(-10+f*4)}),this["surfacePeer"+f]=this["surfacePeer"+f]||T(this.mainBkg,{h:30,s:-30,l:-(-7+f*4)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let f=0;f<this.THEME_COLOR_LIMIT;f++)this["cScaleLabel"+f]=this["cScaleLabel"+f]||this.scaleLabelColor;for(let f=0;f<this.THEME_COLOR_LIMIT;f++)this["pie"+f]=this["cScale"+f];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||T(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||T(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||T(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||T(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||T(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||T(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||ha(this.quadrant1Fill)?K(this.quadrant1Fill):re(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((t=this.xyChart)==null?void 0:t.backgroundColor)||this.background,titleColor:((r=this.xyChart)==null?void 0:r.titleColor)||this.primaryTextColor,xAxisTitleColor:((n=this.xyChart)==null?void 0:n.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((a=this.xyChart)==null?void 0:a.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((i=this.xyChart)==null?void 0:i.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((o=this.xyChart)==null?void 0:o.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((s=this.xyChart)==null?void 0:s.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((d=this.xyChart)==null?void 0:d.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((h=this.xyChart)==null?void 0:h.plotColorPalette)||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?re(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=K(this.secondaryColor,20),this.git1=K(this.pie2||this.secondaryColor,20),this.git2=K(this.pie3||this.tertiaryColor,20),this.git3=K(this.pie4||T(this.primaryColor,{h:-30}),20),this.git4=K(this.pie5||T(this.primaryColor,{h:-60}),20),this.git5=K(this.pie6||T(this.primaryColor,{h:-90}),10),this.git6=K(this.pie7||T(this.primaryColor,{h:60}),10),this.git7=K(this.pie8||T(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||G(this.git0),this.gitInv1=this.gitInv1||G(this.git1),this.gitInv2=this.gitInv2||G(this.git2),this.gitInv3=this.gitInv3||G(this.git3),this.gitInv4=this.gitInv4||G(this.git4),this.gitInv5=this.gitInv5||G(this.git5),this.gitInv6=this.gitInv6||G(this.git6),this.gitInv7=this.gitInv7||G(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||G(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||G(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||K(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||K(this.background,2)}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(n=>{this[n]=t[n]}),this.updateColors(),r.forEach(n=>{this[n]=t[n]})}};const Qk=e=>{const t=new Jk;return t.calculate(e),t};let e8=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=T(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=T(this.primaryColor,{h:-160}),this.primaryBorderColor=it(this.primaryColor,this.darkMode),this.secondaryBorderColor=it(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=it(this.tertiaryColor,this.darkMode),this.primaryTextColor=G(this.primaryColor),this.secondaryTextColor=G(this.secondaryColor),this.tertiaryTextColor=G(this.tertiaryColor),this.lineColor=G(this.background),this.textColor=G(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#e8e8e8",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.sectionBkgColor=Un(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){var t,r,n,a,i,o,s,l,d,u,h;this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||T(this.primaryColor,{h:30}),this.cScale4=this.cScale4||T(this.primaryColor,{h:60}),this.cScale5=this.cScale5||T(this.primaryColor,{h:90}),this.cScale6=this.cScale6||T(this.primaryColor,{h:120}),this.cScale7=this.cScale7||T(this.primaryColor,{h:150}),this.cScale8=this.cScale8||T(this.primaryColor,{h:210}),this.cScale9=this.cScale9||T(this.primaryColor,{h:270}),this.cScale10=this.cScale10||T(this.primaryColor,{h:300}),this.cScale11=this.cScale11||T(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||re(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||re(this.tertiaryColor,40);for(let f=0;f<this.THEME_COLOR_LIMIT;f++)this["cScale"+f]=re(this["cScale"+f],10),this["cScalePeer"+f]=this["cScalePeer"+f]||re(this["cScale"+f],25);for(let f=0;f<this.THEME_COLOR_LIMIT;f++)this["cScaleInv"+f]=this["cScaleInv"+f]||T(this["cScale"+f],{h:180});for(let f=0;f<5;f++)this["surface"+f]=this["surface"+f]||T(this.mainBkg,{h:30,l:-(5+f*5)}),this["surfacePeer"+f]=this["surfacePeer"+f]||T(this.mainBkg,{h:30,l:-(7+f*5)});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||G(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||G(this.labelTextColor);for(let f=0;f<this.THEME_COLOR_LIMIT;f++)this["cScaleLabel"+f]=this["cScaleLabel"+f]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=K(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=T(this.primaryColor,{h:64}),this.fillType3=T(this.secondaryColor,{h:64}),this.fillType4=T(this.primaryColor,{h:-64}),this.fillType5=T(this.secondaryColor,{h:-64}),this.fillType6=T(this.primaryColor,{h:128}),this.fillType7=T(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||T(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||T(this.primaryColor,{l:-10}),this.pie5=this.pie5||T(this.secondaryColor,{l:-30}),this.pie6=this.pie6||T(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||T(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||T(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||T(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||T(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||T(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||T(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||T(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||T(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||T(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||T(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||T(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||T(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||ha(this.quadrant1Fill)?K(this.quadrant1Fill):re(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((t=this.xyChart)==null?void 0:t.backgroundColor)||this.background,titleColor:((r=this.xyChart)==null?void 0:r.titleColor)||this.primaryTextColor,xAxisTitleColor:((n=this.xyChart)==null?void 0:n.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((a=this.xyChart)==null?void 0:a.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((i=this.xyChart)==null?void 0:i.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((o=this.xyChart)==null?void 0:o.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((s=this.xyChart)==null?void 0:s.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((d=this.xyChart)==null?void 0:d.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((h=this.xyChart)==null?void 0:h.plotColorPalette)||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||T(this.primaryColor,{h:-30}),this.git4=this.git4||T(this.primaryColor,{h:-60}),this.git5=this.git5||T(this.primaryColor,{h:-90}),this.git6=this.git6||T(this.primaryColor,{h:60}),this.git7=this.git7||T(this.primaryColor,{h:120}),this.darkMode?(this.git0=K(this.git0,25),this.git1=K(this.git1,25),this.git2=K(this.git2,25),this.git3=K(this.git3,25),this.git4=K(this.git4,25),this.git5=K(this.git5,25),this.git6=K(this.git6,25),this.git7=K(this.git7,25)):(this.git0=re(this.git0,25),this.git1=re(this.git1,25),this.git2=re(this.git2,25),this.git3=re(this.git3,25),this.git4=re(this.git4,25),this.git5=re(this.git5,25),this.git6=re(this.git6,25),this.git7=re(this.git7,25)),this.gitInv0=this.gitInv0||re(G(this.git0),25),this.gitInv1=this.gitInv1||G(this.git1),this.gitInv2=this.gitInv2||G(this.git2),this.gitInv3=this.gitInv3||G(this.git3),this.gitInv4=this.gitInv4||G(this.git4),this.gitInv5=this.gitInv5||G(this.git5),this.gitInv6=this.gitInv6||G(this.git6),this.gitInv7=this.gitInv7||G(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||G(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||G(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||ao,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||io}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(n=>{this[n]=t[n]}),this.updateColors(),r.forEach(n=>{this[n]=t[n]})}};const t8=e=>{const t=new e8;return t.calculate(e),t};let r8=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=K("#cde498",10),this.primaryBorderColor=it(this.primaryColor,this.darkMode),this.secondaryBorderColor=it(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=it(this.tertiaryColor,this.darkMode),this.primaryTextColor=G(this.primaryColor),this.secondaryTextColor=G(this.secondaryColor),this.tertiaryTextColor=G(this.primaryColor),this.lineColor=G(this.background),this.textColor=G(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var t,r,n,a,i,o,s,l,d,u,h;this.actorBorder=re(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||T(this.primaryColor,{h:30}),this.cScale4=this.cScale4||T(this.primaryColor,{h:60}),this.cScale5=this.cScale5||T(this.primaryColor,{h:90}),this.cScale6=this.cScale6||T(this.primaryColor,{h:120}),this.cScale7=this.cScale7||T(this.primaryColor,{h:150}),this.cScale8=this.cScale8||T(this.primaryColor,{h:210}),this.cScale9=this.cScale9||T(this.primaryColor,{h:270}),this.cScale10=this.cScale10||T(this.primaryColor,{h:300}),this.cScale11=this.cScale11||T(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||re(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||re(this.tertiaryColor,40);for(let f=0;f<this.THEME_COLOR_LIMIT;f++)this["cScale"+f]=re(this["cScale"+f],10),this["cScalePeer"+f]=this["cScalePeer"+f]||re(this["cScale"+f],25);for(let f=0;f<this.THEME_COLOR_LIMIT;f++)this["cScaleInv"+f]=this["cScaleInv"+f]||T(this["cScale"+f],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let f=0;f<this.THEME_COLOR_LIMIT;f++)this["cScaleLabel"+f]=this["cScaleLabel"+f]||this.scaleLabelColor;for(let f=0;f<5;f++)this["surface"+f]=this["surface"+f]||T(this.mainBkg,{h:30,s:-30,l:-(5+f*5)}),this["surfacePeer"+f]=this["surfacePeer"+f]||T(this.mainBkg,{h:30,s:-30,l:-(8+f*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=T(this.primaryColor,{h:64}),this.fillType3=T(this.secondaryColor,{h:64}),this.fillType4=T(this.primaryColor,{h:-64}),this.fillType5=T(this.secondaryColor,{h:-64}),this.fillType6=T(this.primaryColor,{h:128}),this.fillType7=T(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||T(this.primaryColor,{l:-30}),this.pie5=this.pie5||T(this.secondaryColor,{l:-30}),this.pie6=this.pie6||T(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||T(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||T(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||T(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||T(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||T(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||T(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||T(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||T(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||T(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||T(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||T(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||T(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||ha(this.quadrant1Fill)?K(this.quadrant1Fill):re(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((t=this.xyChart)==null?void 0:t.backgroundColor)||this.background,titleColor:((r=this.xyChart)==null?void 0:r.titleColor)||this.primaryTextColor,xAxisTitleColor:((n=this.xyChart)==null?void 0:n.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((a=this.xyChart)==null?void 0:a.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((i=this.xyChart)==null?void 0:i.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((o=this.xyChart)==null?void 0:o.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((s=this.xyChart)==null?void 0:s.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((d=this.xyChart)==null?void 0:d.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((h=this.xyChart)==null?void 0:h.plotColorPalette)||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||T(this.primaryColor,{h:-30}),this.git4=this.git4||T(this.primaryColor,{h:-60}),this.git5=this.git5||T(this.primaryColor,{h:-90}),this.git6=this.git6||T(this.primaryColor,{h:60}),this.git7=this.git7||T(this.primaryColor,{h:120}),this.darkMode?(this.git0=K(this.git0,25),this.git1=K(this.git1,25),this.git2=K(this.git2,25),this.git3=K(this.git3,25),this.git4=K(this.git4,25),this.git5=K(this.git5,25),this.git6=K(this.git6,25),this.git7=K(this.git7,25)):(this.git0=re(this.git0,25),this.git1=re(this.git1,25),this.git2=re(this.git2,25),this.git3=re(this.git3,25),this.git4=re(this.git4,25),this.git5=re(this.git5,25),this.git6=re(this.git6,25),this.git7=re(this.git7,25)),this.gitInv0=this.gitInv0||G(this.git0),this.gitInv1=this.gitInv1||G(this.git1),this.gitInv2=this.gitInv2||G(this.git2),this.gitInv3=this.gitInv3||G(this.git3),this.gitInv4=this.gitInv4||G(this.git4),this.gitInv5=this.gitInv5||G(this.git5),this.gitInv6=this.gitInv6||G(this.git6),this.gitInv7=this.gitInv7||G(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||G(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||G(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||ao,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||io}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(n=>{this[n]=t[n]}),this.updateColors(),r.forEach(n=>{this[n]=t[n]})}};const n8=e=>{const t=new r8;return t.calculate(e),t};class a8{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=K(this.contrast,55),this.background="#ffffff",this.tertiaryColor=T(this.primaryColor,{h:-160}),this.primaryBorderColor=it(this.primaryColor,this.darkMode),this.secondaryBorderColor=it(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=it(this.tertiaryColor,this.darkMode),this.primaryTextColor=G(this.primaryColor),this.secondaryTextColor=G(this.secondaryColor),this.tertiaryTextColor=G(this.tertiaryColor),this.lineColor=G(this.background),this.textColor=G(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var t,r,n,a,i,o,s,l,d,u,h;this.secondBkg=K(this.contrast,55),this.border2=this.contrast,this.actorBorder=K(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.lineColor,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let f=0;f<this.THEME_COLOR_LIMIT;f++)this["cScaleInv"+f]=this["cScaleInv"+f]||G(this["cScale"+f]);for(let f=0;f<this.THEME_COLOR_LIMIT;f++)this.darkMode?this["cScalePeer"+f]=this["cScalePeer"+f]||K(this["cScale"+f],10):this["cScalePeer"+f]=this["cScalePeer"+f]||re(this["cScale"+f],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let f=0;f<this.THEME_COLOR_LIMIT;f++)this["cScaleLabel"+f]=this["cScaleLabel"+f]||this.scaleLabelColor;for(let f=0;f<5;f++)this["surface"+f]=this["surface"+f]||T(this.mainBkg,{l:-(5+f*5)}),this["surfacePeer"+f]=this["surfacePeer"+f]||T(this.mainBkg,{l:-(8+f*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=K(this.contrast,30),this.sectionBkgColor2=K(this.contrast,30),this.taskBorderColor=re(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=K(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=re(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=T(this.primaryColor,{h:64}),this.fillType3=T(this.secondaryColor,{h:64}),this.fillType4=T(this.primaryColor,{h:-64}),this.fillType5=T(this.secondaryColor,{h:-64}),this.fillType6=T(this.primaryColor,{h:128}),this.fillType7=T(this.secondaryColor,{h:128});for(let f=0;f<this.THEME_COLOR_LIMIT;f++)this["pie"+f]=this["cScale"+f];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||T(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||T(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||T(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||T(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||T(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||T(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||ha(this.quadrant1Fill)?K(this.quadrant1Fill):re(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((t=this.xyChart)==null?void 0:t.backgroundColor)||this.background,titleColor:((r=this.xyChart)==null?void 0:r.titleColor)||this.primaryTextColor,xAxisTitleColor:((n=this.xyChart)==null?void 0:n.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((a=this.xyChart)==null?void 0:a.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((i=this.xyChart)==null?void 0:i.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((o=this.xyChart)==null?void 0:o.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((s=this.xyChart)==null?void 0:s.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((d=this.xyChart)==null?void 0:d.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((h=this.xyChart)==null?void 0:h.plotColorPalette)||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=re(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||T(this.primaryColor,{h:-30}),this.git4=this.pie5||T(this.primaryColor,{h:-60}),this.git5=this.pie6||T(this.primaryColor,{h:-90}),this.git6=this.pie7||T(this.primaryColor,{h:60}),this.git7=this.pie8||T(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||G(this.git0),this.gitInv1=this.gitInv1||G(this.git1),this.gitInv2=this.gitInv2||G(this.git2),this.gitInv3=this.gitInv3||G(this.git3),this.gitInv4=this.gitInv4||G(this.git4),this.gitInv5=this.gitInv5||G(this.git5),this.gitInv6=this.gitInv6||G(this.git6),this.gitInv7=this.gitInv7||G(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||ao,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||io}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(n=>{this[n]=t[n]}),this.updateColors(),r.forEach(n=>{this[n]=t[n]})}}const i8=e=>{const t=new a8;return t.calculate(e),t},tr={base:{getThemeVariables:Zk},dark:{getThemeVariables:Qk},default:{getThemeVariables:t8},forest:{getThemeVariables:n8},neutral:{getThemeVariables:i8}},Zt={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"]},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},theme:"default",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","maxEdges"],legacyMathML:!1,deterministicIds:!1,fontSize:16},Sf={...Zt,deterministicIDSeed:void 0,themeCSS:void 0,themeVariables:tr.default.getThemeVariables(),sequence:{...Zt.sequence,messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},noteFont:function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},actorFont:function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}}},gantt:{...Zt.gantt,tickInterval:void 0,useWidth:void 0},c4:{...Zt.c4,useWidth:void 0,personFont:function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},external_personFont:function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},systemFont:function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},external_systemFont:function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},system_dbFont:function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},external_system_dbFont:function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},system_queueFont:function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},external_system_queueFont:function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},containerFont:function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},external_containerFont:function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},container_dbFont:function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},external_container_dbFont:function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},container_queueFont:function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},external_container_queueFont:function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},componentFont:function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},external_componentFont:function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},component_dbFont:function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},external_component_dbFont:function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},component_queueFont:function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},external_component_queueFont:function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},boundaryFont:function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}}},pie:{...Zt.pie,useWidth:984},xyChart:{...Zt.xyChart,useWidth:void 0},requirement:{...Zt.requirement,useWidth:void 0},gitGraph:{...Zt.gitGraph,useMaxWidth:!1},sankey:{...Zt.sankey,useMaxWidth:!1}},Af=(e,t="")=>Object.keys(e).reduce((r,n)=>Array.isArray(e[n])?r:typeof e[n]=="object"&&e[n]!==null?[...r,t+n,...Af(e[n],"")]:[...r,t+n],[]),o8=new Set(Af(Sf,"")),s8=Sf,ki=e=>{if(Q.debug("sanitizeDirective called with",e),!(typeof e!="object"||e==null)){if(Array.isArray(e)){e.forEach(t=>ki(t));return}for(const t of Object.keys(e)){if(Q.debug("Checking key",t),t.startsWith("__")||t.includes("proto")||t.includes("constr")||!o8.has(t)||e[t]==null){Q.debug("sanitize deleting key: ",t),delete e[t];continue}if(typeof e[t]=="object"){Q.debug("sanitizing object",t),ki(e[t]);continue}const r=["themeCSS","fontFamily","altFontFamily"];for(const n of r)t.includes(n)&&(Q.debug("sanitizing css option",t),e[t]=l8(e[t]))}if(e.themeVariables)for(const t of Object.keys(e.themeVariables)){const r=e.themeVariables[t];r?.match&&!r.match(/^[\d "#%(),.;A-Za-z]+$/)&&(e.themeVariables[t]="")}Q.debug("After sanitization",e)}},l8=e=>{let t=0,r=0;for(const n of e){if(t<r)return"{ /* ERROR: Unbalanced CSS */ }";n==="{"?t++:n==="}"&&r++}return t!==r?"{ /* ERROR: Unbalanced CSS */ }":e},kf=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,Hn=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,c8=/\s*%%.*\n/gm;class Ef extends Error{constructor(t){super(t),this.name="UnknownDiagramError"}}const on={},oo=function(e,t){e=e.replace(kf,"").replace(Hn,"").replace(c8,`
`);for(const[r,{detector:n}]of Object.entries(on))if(n(e,t))return r;throw new Ef(`No diagram type detected matching given configuration for text: ${e}`)},Nf=(...e)=>{for(const{id:t,detector:r,loader:n}of e)Tf(t,r,n)},Tf=(e,t,r)=>{on[e]?Q.error(`Detector with key ${e} already exists`):on[e]={detector:t,loader:r},Q.debug(`Detector with key ${e} added${r?" with loader":""}`)},d8=e=>on[e].loader,Bs=(e,t,{depth:r=2,clobber:n=!1}={})=>{const a={depth:r,clobber:n};return Array.isArray(t)&&!Array.isArray(e)?(t.forEach(i=>Bs(e,i,a)),e):Array.isArray(t)&&Array.isArray(e)?(t.forEach(i=>{e.includes(i)||e.push(i)}),e):e===void 0||r<=0?e!=null&&typeof e=="object"&&typeof t=="object"?Object.assign(e,t):t:(t!==void 0&&typeof e=="object"&&typeof t=="object"&&Object.keys(t).forEach(i=>{typeof t[i]=="object"&&(e[i]===void 0||typeof e[i]=="object")?(e[i]===void 0&&(e[i]=Array.isArray(t[i])?[]:{}),e[i]=Bs(e[i],t[i],{depth:r-1,clobber:n})):(n||typeof e[i]!="object"&&typeof t[i]!="object")&&(e[i]=t[i])}),e)},Ze=Bs,u8="â€‹",h8={curveBasis:s4,curveBasisClosed:l4,curveBasisOpen:c4,curveBumpX:i4,curveBumpY:o4,curveBundle:d4,curveCardinalClosed:h4,curveCardinalOpen:f4,curveCardinal:u4,curveCatmullRomClosed:m4,curveCatmullRomOpen:g4,curveCatmullRom:p4,curveLinear:a4,curveLinearClosed:x4,curveMonotoneX:v4,curveMonotoneY:y4,curveNatural:b4,curveStep:w4,curveStepAfter:C4,curveStepBefore:_4},f8=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,p8=function(e,t){const r=If(e,/(?:init\b)|(?:initialize\b)/);let n={};if(Array.isArray(r)){const o=r.map(s=>s.args);ki(o),n=Ze(n,[...o])}else n=r.args;if(!n)return;let a=oo(e,t);const i="config";return n[i]!==void 0&&(a==="flowchart-v2"&&(a="flowchart"),n[a]=n[i],delete n[i]),n},If=function(e,t=null){try{const r=new RegExp(`[%]{2}(?![{]${f8.source})(?=[}][%]{2}).*
`,"ig");e=e.trim().replace(r,"").replace(/'/gm,'"'),Q.debug(`Detecting diagram directive${t!==null?" type:"+t:""} based on the text:${e}`);let n;const a=[];for(;(n=Hn.exec(e))!==null;)if(n.index===Hn.lastIndex&&Hn.lastIndex++,n&&!t||t&&n[1]&&n[1].match(t)||t&&n[2]&&n[2].match(t)){const i=n[1]?n[1]:n[2],o=n[3]?n[3].trim():n[4]?JSON.parse(n[4].trim()):null;a.push({type:i,args:o})}return a.length===0?{type:e,args:null}:a.length===1?a[0]:a}catch(r){return Q.error(`ERROR: ${r.message} - Unable to parse directive type: '${t}' based on the text: '${e}'`),{type:void 0,args:null}}},m8=function(e){return e.replace(Hn,"")},g8=function(e,t){for(const[r,n]of t.entries())if(n.match(e))return r;return-1};function x8(e,t){if(!e)return t;const r=`curve${e.charAt(0).toUpperCase()+e.slice(1)}`;return h8[r]??t}function v8(e,t){const r=e.trim();if(r)return t.securityLevel!=="loose"?Hw.sanitizeUrl(r):r}const y8=(e,...t)=>{const r=e.split("."),n=r.length-1,a=r[n];let i=window;for(let o=0;o<n;o++)if(i=i[r[o]],!i){Q.error(`Function name: ${e} not found in window`);return}i[a](...t)};function Of(e,t){return!e||!t?0:Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function b8(e){let t,r=0;e.forEach(a=>{r+=Of(a,t),t=a});const n=r/2;return Bl(e,n)}function w8(e){return e.length===1?e[0]:b8(e)}const Du=(e,t=2)=>{const r=Math.pow(10,t);return Math.round(e*r)/r},Bl=(e,t)=>{let r,n=t;for(const a of e){if(r){const i=Of(a,r);if(i<n)n-=i;else{const o=n/i;if(o<=0)return r;if(o>=1)return{x:a.x,y:a.y};if(o>0&&o<1)return{x:Du((1-o)*r.x+o*a.x,5),y:Du((1-o)*r.y+o*a.y,5)}}}r=a}throw new Error("Could not find a suitable point for the given distance")},_8=(e,t,r)=>{Q.info(`our points ${JSON.stringify(t)}`),t[0]!==r&&(t=t.reverse());const a=Bl(t,25),i=e?10:5,o=Math.atan2(t[0].y-a.y,t[0].x-a.x),s={x:0,y:0};return s.x=Math.sin(o)*i+(t[0].x+a.x)/2,s.y=-Math.cos(o)*i+(t[0].y+a.y)/2,s};function C8(e,t,r){const n=structuredClone(r);Q.info("our points",n),t!=="start_left"&&t!=="start_right"&&n.reverse();const a=25+e,i=Bl(n,a),o=10+e*.5,s=Math.atan2(n[0].y-i.y,n[0].x-i.x),l={x:0,y:0};return t==="start_left"?(l.x=Math.sin(s+Math.PI)*o+(n[0].x+i.x)/2,l.y=-Math.cos(s+Math.PI)*o+(n[0].y+i.y)/2):t==="end_right"?(l.x=Math.sin(s-Math.PI)*o+(n[0].x+i.x)/2-5,l.y=-Math.cos(s-Math.PI)*o+(n[0].y+i.y)/2-5):t==="end_left"?(l.x=Math.sin(s)*o+(n[0].x+i.x)/2-5,l.y=-Math.cos(s)*o+(n[0].y+i.y)/2-5):(l.x=Math.sin(s)*o+(n[0].x+i.x)/2,l.y=-Math.cos(s)*o+(n[0].y+i.y)/2),l}function S8(e){let t="",r="";for(const n of e)n!==void 0&&(n.startsWith("color:")||n.startsWith("text-align:")?r=r+n+";":t=t+n+";");return{style:t,labelStyle:r}}let Ru=0;const A8=()=>(Ru++,"id-"+Math.random().toString(36).substr(2,12)+"-"+Ru);function k8(e){let t="";const r="0123456789abcdef",n=r.length;for(let a=0;a<e;a++)t+=r.charAt(Math.floor(Math.random()*n));return t}const E8=e=>k8(e.length),N8=function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},T8=function(e,t){const r=t.text.replace(Ol.lineBreakRegex," "),[,n]=Dl(t.fontSize),a=e.append("text");a.attr("x",t.x),a.attr("y",t.y),a.style("text-anchor",t.anchor),a.style("font-family",t.fontFamily),a.style("font-size",n),a.style("font-weight",t.fontWeight),a.attr("fill",t.fill),t.class!==void 0&&a.attr("class",t.class);const i=a.append("tspan");return i.attr("x",t.x+t.textMargin*2),i.attr("fill",t.fill),i.text(r),a},I8=fa((e,t,r)=>{if(!e||(r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},r),Ol.lineBreakRegex.test(e)))return e;const n=e.split(" "),a=[];let i="";return n.forEach((o,s)=>{const l=Ei(`${o} `,r),d=Ei(i,r);if(l>t){const{hyphenatedStrings:f,remainingWord:p}=O8(o,t,"-",r);a.push(i,...f),i=p}else d+l>=t?(a.push(i),i=o):i=[i,o].filter(Boolean).join(" ");s+1===n.length&&a.push(i)}),a.filter(o=>o!=="").join(r.joinWith)},(e,t,r)=>`${e}${t}${r.fontSize}${r.fontWeight}${r.fontFamily}${r.joinWith}`),O8=fa((e,t,r="-",n)=>{n=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},n);const a=[...e],i=[];let o="";return a.forEach((s,l)=>{const d=`${o}${s}`;if(Ei(d,n)>=t){const h=l+1,f=a.length===h,p=`${d}${r}`;i.push(f?d:p),o=""}else o=d}),{hyphenatedStrings:i,remainingWord:o}},(e,t,r="-",n)=>`${e}${t}${r}${n.fontSize}${n.fontWeight}${n.fontFamily}`);function B8(e,t){return jl(e,t).height}function Ei(e,t){return jl(e,t).width}const jl=fa((e,t)=>{const{fontSize:r=12,fontFamily:n="Arial",fontWeight:a=400}=t;if(!e)return{width:0,height:0};const[,i]=Dl(r),o=["sans-serif",n],s=e.split(Ol.lineBreakRegex),l=[],d=St("body");if(!d.remove)return{width:0,height:0,lineHeight:0};const u=d.append("svg");for(const f of o){let p=0;const m={width:0,height:0,lineHeight:0};for(const g of s){const x=N8();x.text=g||u8;const y=T8(u,x).style("font-size",i).style("font-weight",a).style("font-family",f),v=(y._groups||y)[0][0].getBBox();if(v.width===0&&v.height===0)throw new Error("svg element not in render tree");m.width=Math.round(Math.max(m.width,v.width)),p=Math.round(v.height),m.height+=p,m.lineHeight=Math.round(Math.max(m.lineHeight,p))}l.push(m)}u.remove();const h=isNaN(l[1].height)||isNaN(l[1].width)||isNaN(l[1].lineHeight)||l[0].height>l[1].height&&l[0].width>l[1].width&&l[0].lineHeight>l[1].lineHeight?0:1;return l[h]},(e,t)=>`${e}${t.fontSize}${t.fontWeight}${t.fontFamily}`);class j8{constructor(t=!1,r){this.count=0,this.count=r?r.length:0,this.next=t?()=>this.count++:()=>Date.now()}}let ja;const D8=function(e){return ja=ja||document.createElement("div"),e=escape(e).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),ja.innerHTML=e,unescape(ja.textContent)};function Bf(e){return"str"in e}const R8=(e,t,r,n)=>{var a;if(!n)return;const i=(a=e.node())==null?void 0:a.getBBox();i&&e.append("text").text(n).attr("x",i.x+i.width/2).attr("y",-r).attr("class",t)},Dl=e=>{if(typeof e=="number")return[e,e+"px"];const t=parseInt(e??"",10);return Number.isNaN(t)?[void 0,void 0]:e===String(t)?[t,e+"px"]:[t,e]};function jf(e,t){return ak({},e,t)}const Gn={assignWithDepth:Ze,wrapLabel:I8,calculateTextHeight:B8,calculateTextWidth:Ei,calculateTextDimensions:jl,cleanAndMerge:jf,detectInit:p8,detectDirective:If,isSubstringInArray:g8,interpolateToCurve:x8,calcLabelPosition:w8,calcCardinalityPosition:_8,calcTerminalLabelPosition:C8,formatUrl:v8,getStylesFromArray:S8,generateId:A8,random:E8,runFunc:y8,entityDecode:D8,insertTitle:R8,parseFontSize:Dl,InitIDGenerator:j8},L8=function(e){let t=e;return t=t.replace(/style.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),t=t.replace(/classDef.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),t=t.replace(/#\w+;/g,function(r){const n=r.substring(1,r.length-1);return/^\+?\d+$/.test(n)?"ï¬‚Â°Â°"+n+"Â¶ÃŸ":"ï¬‚Â°"+n+"Â¶ÃŸ"}),t},M8=function(e){return e.replace(/ï¬‚Â°Â°/g,"&#").replace(/ï¬‚Â°/g,"&").replace(/Â¶ÃŸ/g,";")},Lu="10.9.4",sn=Object.freeze(s8);let lt=Ze({},sn),Df,ln=[],Vn=Ze({},sn);const so=(e,t)=>{let r=Ze({},e),n={};for(const a of t)Mf(a),n=Ze(n,a);if(r=Ze(r,n),n.theme&&n.theme in tr){const a=Ze({},Df),i=Ze(a.themeVariables||{},n.themeVariables);r.theme&&r.theme in tr&&(r.themeVariables=tr[r.theme].getThemeVariables(i))}return Vn=r,Pf(Vn),Vn},P8=e=>(lt=Ze({},sn),lt=Ze(lt,e),e.theme&&tr[e.theme]&&(lt.themeVariables=tr[e.theme].getThemeVariables(e.themeVariables)),so(lt,ln),lt),F8=e=>{Df=Ze({},e)},$8=e=>(lt=Ze(lt,e),so(lt,ln),lt),Rf=()=>Ze({},lt),Lf=e=>(Pf(e),Ze(Vn,e),Vt()),Vt=()=>Ze({},Vn),Mf=e=>{e&&(["secure",...lt.secure??[]].forEach(t=>{Object.hasOwn(e,t)&&(Q.debug(`Denied attempt to modify a secure key ${t}`,e[t]),delete e[t])}),Object.keys(e).forEach(t=>{t.startsWith("__")&&delete e[t]}),Object.keys(e).forEach(t=>{typeof e[t]=="string"&&(e[t].includes("<")||e[t].includes(">")||e[t].includes("url(data:"))&&delete e[t],typeof e[t]=="object"&&Mf(e[t])}))},U8=e=>{ki(e),e.fontFamily&&(!e.themeVariables||!e.themeVariables.fontFamily)&&(e.themeVariables={fontFamily:e.fontFamily}),ln.push(e),so(lt,ln)},Ni=(e=lt)=>{ln=[],so(e,ln)},z8={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},Mu={},H8=e=>{Mu[e]||(Q.warn(z8[e]),Mu[e]=!0)},Pf=e=>{e&&(e.lazyLoadedDiagrams||e.loadExternalDiagramsAtStartup)&&H8("LAZY_LOAD_DEPRECATED")},Ff="c4",G8=e=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(e),V8=async()=>{const{diagram:e}=await Ne(async()=>{const{diagram:t}=await import("./c4Diagram-15b5d702-BDtK7OUg.js");return{diagram:t}},__vite__mapDeps([4,5,3,2,1]));return{id:Ff,diagram:e}},q8={id:Ff,detector:G8,loader:V8},W8=q8,$f="flowchart",X8=(e,t)=>{var r,n;return((r=t?.flowchart)==null?void 0:r.defaultRenderer)==="dagre-wrapper"||((n=t?.flowchart)==null?void 0:n.defaultRenderer)==="elk"?!1:/^\s*graph/.test(e)},Y8=async()=>{const{diagram:e}=await Ne(async()=>{const{diagram:t}=await import("./flowDiagram-cbd28bf7-B4zT7_Ld.js");return{diagram:t}},__vite__mapDeps([6,7,8,9,10,11,12,13,14,15,16,17,18,3,2,1]));return{id:$f,diagram:e}},K8={id:$f,detector:X8,loader:Y8},Z8=K8,Uf="flowchart-v2",J8=(e,t)=>{var r,n,a;return((r=t?.flowchart)==null?void 0:r.defaultRenderer)==="dagre-d3"||((n=t?.flowchart)==null?void 0:n.defaultRenderer)==="elk"?!1:/^\s*graph/.test(e)&&((a=t?.flowchart)==null?void 0:a.defaultRenderer)==="dagre-wrapper"?!0:/^\s*flowchart/.test(e)},Q8=async()=>{const{diagram:e}=await Ne(async()=>{const{diagram:t}=await import("./flowDiagram-v2-ffc7f31a-Pc5EjOhl.js");return{diagram:t}},__vite__mapDeps([19,7,10,8,11,9,12,13,14,15,16,17,18,3,2,1]));return{id:Uf,diagram:e}},e6={id:Uf,detector:J8,loader:Q8},t6=e6,zf="er",r6=e=>/^\s*erDiagram/.test(e),n6=async()=>{const{diagram:e}=await Ne(async()=>{const{diagram:t}=await import("./erDiagram-880f2ed8-DdX2qLMW.js");return{diagram:t}},__vite__mapDeps([20,8,9,3,15,16,17,2,1]));return{id:zf,diagram:e}},a6={id:zf,detector:r6,loader:n6},i6=a6,Hf="gitGraph",o6=e=>/^\s*gitGraph/.test(e),s6=async()=>{const{diagram:e}=await Ne(async()=>{const{diagram:t}=await import("./gitGraphDiagram-21fc4d3e-BWwLNY3l.js");return{diagram:t}},__vite__mapDeps([21,3,2,1]));return{id:Hf,diagram:e}},l6={id:Hf,detector:o6,loader:s6},c6=l6,Gf="gantt",d6=e=>/^\s*gantt/.test(e),u6=async()=>{const{diagram:e}=await Ne(async()=>{const{diagram:t}=await import("./ganttDiagram-04f9e578-Cmvk1tT3.js");return{diagram:t}},__vite__mapDeps([22,3,23,24,2,1]));return{id:Gf,diagram:e}},h6={id:Gf,detector:d6,loader:u6},f6=h6,Vf="info",p6=e=>/^\s*info/.test(e),m6=async()=>{const{diagram:e}=await Ne(async()=>{const{diagram:t}=await import("./infoDiagram-4a4f5b27-CKex5BaD.js");return{diagram:t}},__vite__mapDeps([25,3,2,1]));return{id:Vf,diagram:e}},g6={id:Vf,detector:p6,loader:m6},qf="pie",x6=e=>/^\s*pie/.test(e),v6=async()=>{const{diagram:e}=await Ne(async()=>{const{diagram:t}=await import("./pieDiagram-421022e6-Va9sC7AY.js");return{diagram:t}},__vite__mapDeps([26,3,27,17,28,24,16,2,1]));return{id:qf,diagram:e}},y6={id:qf,detector:x6,loader:v6},Wf="quadrantChart",b6=e=>/^\s*quadrantChart/.test(e),w6=async()=>{const{diagram:e}=await Ne(async()=>{const{diagram:t}=await import("./quadrantDiagram-0957ecba-wVU8lUI_.js");return{diagram:t}},__vite__mapDeps([29,3,23,24,2,1]));return{id:Wf,diagram:e}},_6={id:Wf,detector:b6,loader:w6},C6=_6,Xf="xychart",S6=e=>/^\s*xychart-beta/.test(e),A6=async()=>{const{diagram:e}=await Ne(async()=>{const{diagram:t}=await import("./xychartDiagram-b6496bcd-EmkEWI-y.js");return{diagram:t}},__vite__mapDeps([30,14,3,24,28,23,15,16,17,2,1]));return{id:Xf,diagram:e}},k6={id:Xf,detector:S6,loader:A6},E6=k6,Yf="requirement",N6=e=>/^\s*requirement(Diagram)?/.test(e),T6=async()=>{const{diagram:e}=await Ne(async()=>{const{diagram:t}=await import("./requirementDiagram-23d650b8-CNyHGkV6.js");return{diagram:t}},__vite__mapDeps([31,8,9,3,15,16,17,2,1]));return{id:Yf,diagram:e}},I6={id:Yf,detector:N6,loader:T6},O6=I6,Kf="sequence",B6=e=>/^\s*sequenceDiagram/.test(e),j6=async()=>{const{diagram:e}=await Ne(async()=>{const{diagram:t}=await import("./sequenceDiagram-17ac3bff-B9bG5-dd.js");return{diagram:t}},__vite__mapDeps([32,5,3,2,1]));return{id:Kf,diagram:e}},D6={id:Kf,detector:B6,loader:j6},R6=D6,Zf="class",L6=(e,t)=>{var r;return((r=t?.class)==null?void 0:r.defaultRenderer)==="dagre-wrapper"?!1:/^\s*classDiagram/.test(e)},M6=async()=>{const{diagram:e}=await Ne(async()=>{const{diagram:t}=await import("./classDiagram-d40c83e7-BnsV2bUW.js");return{diagram:t}},__vite__mapDeps([33,34,8,9,3,15,16,17,2,1]));return{id:Zf,diagram:e}},P6={id:Zf,detector:L6,loader:M6},F6=P6,Jf="classDiagram",$6=(e,t)=>{var r;return/^\s*classDiagram/.test(e)&&((r=t?.class)==null?void 0:r.defaultRenderer)==="dagre-wrapper"?!0:/^\s*classDiagram-v2/.test(e)},U6=async()=>{const{diagram:e}=await Ne(async()=>{const{diagram:t}=await import("./classDiagram-v2-d5a6b087-Bl_tjhlA.js");return{diagram:t}},__vite__mapDeps([35,34,8,11,9,12,13,14,15,16,17,3,2,1]));return{id:Jf,diagram:e}},z6={id:Jf,detector:$6,loader:U6},H6=z6,Qf="state",G6=(e,t)=>{var r;return((r=t?.state)==null?void 0:r.defaultRenderer)==="dagre-wrapper"?!1:/^\s*stateDiagram/.test(e)},V6=async()=>{const{diagram:e}=await Ne(async()=>{const{diagram:t}=await import("./stateDiagram-9c5f0230-Bj2U7053.js");return{diagram:t}},__vite__mapDeps([36,37,8,9,3,15,16,17,2,1]));return{id:Qf,diagram:e}},q6={id:Qf,detector:G6,loader:V6},W6=q6,ep="stateDiagram",X6=(e,t)=>{var r;return!!(/^\s*stateDiagram-v2/.test(e)||/^\s*stateDiagram/.test(e)&&((r=t?.state)==null?void 0:r.defaultRenderer)==="dagre-wrapper")},Y6=async()=>{const{diagram:e}=await Ne(async()=>{const{diagram:t}=await import("./stateDiagram-v2-51a3dcff-hgrWHN9i.js");return{diagram:t}},__vite__mapDeps([38,37,8,11,9,12,13,14,15,16,17,3,2,1]));return{id:ep,diagram:e}},K6={id:ep,detector:X6,loader:Y6},Z6=K6,tp="journey",J6=e=>/^\s*journey/.test(e),Q6=async()=>{const{diagram:e}=await Ne(async()=>{const{diagram:t}=await import("./journeyDiagram-29694f62-C-rZoJ4a.js");return{diagram:t}},__vite__mapDeps([39,5,3,27,17,2,1]));return{id:tp,diagram:e}},eE={id:tp,detector:J6,loader:Q6},tE=eE,rE=function(e,t){for(let r of t)e.attr(r[0],r[1])},nE=function(e,t,r){let n=new Map;return r?(n.set("width","100%"),n.set("style",`max-width: ${t}px;`)):(n.set("height",e),n.set("width",t)),n},rp=function(e,t,r,n){const a=nE(t,r,n);rE(e,a)},aE=function(e,t,r,n){const a=t.node().getBBox(),i=a.width,o=a.height;Q.info(`SVG bounds: ${i}x${o}`,a);let s=0,l=0;Q.info(`Graph bounds: ${s}x${l}`,e),s=i+r*2,l=o+r*2,Q.info(`Calculated bounds: ${s}x${l}`),rp(t,l,s,n);const d=`${a.x-r} ${a.y-r} ${a.width+2*r} ${a.height+2*r}`;t.attr("viewBox",d)},Ya={},iE=(e,t,r)=>{let n="";return e in Ya&&Ya[e]?n=Ya[e](r):Q.warn(`No theme found for ${e}`),` & {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
    fill: ${r.textColor}
  }

  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${r.errorBkgColor};
  }
  & .error-text {
    fill: ${r.errorTextColor};
    stroke: ${r.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 2px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }

  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${r.lineColor};
    stroke: ${r.lineColor};
  }
  & .marker.cross {
    stroke: ${r.lineColor};
  }

  & svg {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
  }

  ${n}

  ${t}
`},oE=(e,t)=>{t!==void 0&&(Ya[e]=t)},sE=iE;let Rl="",Ll="",Ml="";const Pl=e=>an(e,Vt()),lE=()=>{Rl="",Ml="",Ll=""},cE=e=>{Rl=Pl(e).replace(/^\s+/g,"")},dE=()=>Rl,uE=e=>{Ml=Pl(e).replace(/\n\s+/g,`
`)},hE=()=>Ml,fE=e=>{Ll=Pl(e)},pE=()=>Ll,mE=Object.freeze(Object.defineProperty({__proto__:null,clear:lE,getAccDescription:hE,getAccTitle:dE,getDiagramTitle:pE,setAccDescription:uE,setAccTitle:cE,setDiagramTitle:fE},Symbol.toStringTag,{value:"Module"})),gE=Q,xE=Il,Fl=Vt,aI=Lf,iI=sn,vE=e=>an(e,Fl()),yE=aE,bE=()=>mE,Ti={},Ii=(e,t,r)=>{var n;if(Ti[e])throw new Error(`Diagram ${e} already registered.`);Ti[e]=t,r&&Tf(e,r),oE(e,t.styles),(n=t.injectUtils)==null||n.call(t,gE,xE,Fl,vE,yE,bE(),()=>{})},$l=e=>{if(e in Ti)return Ti[e];throw new wE(e)};class wE extends Error{constructor(t){super(`Diagram ${t} not found.`)}}const _E=e=>{var t;const{securityLevel:r}=Fl();let n=St("body");if(r==="sandbox"){const o=((t=St(`#i${e}`).node())==null?void 0:t.contentDocument)??document;n=St(o.body)}return n.select(`#${e}`)},CE=(e,t,r)=>{Q.debug(`rendering svg for syntax error
`);const n=_E(t),a=n.append("g");n.attr("viewBox","0 0 2412 512"),rp(n,100,512,!0),a.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),a.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),a.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),a.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),a.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),a.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),a.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),a.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${r}`)},np={draw:CE},SE=np,AE={db:{},renderer:np,parser:{parser:{yy:{}},parse:()=>{}}},kE=AE,ap="flowchart-elk",EE=(e,t)=>{var r;return!!(/^\s*flowchart-elk/.test(e)||/^\s*flowchart|graph/.test(e)&&((r=t?.flowchart)==null?void 0:r.defaultRenderer)==="elk")},NE=async()=>{const{diagram:e}=await Ne(async()=>{const{diagram:t}=await import("./flowchart-elk-definition-36e2d292-BCaQoej5.js");return{diagram:t}},__vite__mapDeps([40,7,13,14,15,16,17,3,2,1]));return{id:ap,diagram:e}},TE={id:ap,detector:EE,loader:NE},IE=TE,ip="timeline",OE=e=>/^\s*timeline/.test(e),BE=async()=>{const{diagram:e}=await Ne(async()=>{const{diagram:t}=await import("./timeline-definition-7e6b55e7-CQGNBDdj.js");return{diagram:t}},__vite__mapDeps([41,3,27,17,2,1]));return{id:ip,diagram:e}},jE={id:ip,detector:OE,loader:BE},DE=jE,op="mindmap",RE=e=>/^\s*mindmap/.test(e),LE=async()=>{const{diagram:e}=await Ne(async()=>{const{diagram:t}=await import("./mindmap-definition-ac74a2e8-CCaaNTEa.js");return{diagram:t}},__vite__mapDeps([42,3,14,2,1]));return{id:op,diagram:e}},ME={id:op,detector:RE,loader:LE},PE=ME,sp="sankey",FE=e=>/^\s*sankey-beta/.test(e),$E=async()=>{const{diagram:e}=await Ne(async()=>{const{diagram:t}=await import("./sankeyDiagram-23345273-BtOm1w59.js");return{diagram:t}},__vite__mapDeps([43,3,28,24,44,2,1]));return{id:sp,diagram:e}},UE={id:sp,detector:FE,loader:$E},zE=UE,lp="block",HE=e=>/^\s*block-beta/.test(e),GE=async()=>{const{diagram:e}=await Ne(async()=>{const{diagram:t}=await import("./blockDiagram-68f4deed-Bu75VDEl.js");return{diagram:t}},__vite__mapDeps([45,12,8,13,14,15,16,17,3,18,28,24,44,2,1]));return{id:lp,diagram:e}},VE={id:lp,detector:HE,loader:GE},qE=VE;let Pu=!1;const Ul=()=>{Pu||(Pu=!0,Ii("error",kE,e=>e.toLowerCase().trim()==="error"),Ii("---",{db:{clear:()=>{}},styles:{},renderer:{draw:()=>{}},parser:{parser:{yy:{}},parse:()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")}},init:()=>null},e=>e.toLowerCase().trimStart().startsWith("---")),Nf(W8,H6,F6,i6,f6,g6,y6,O6,R6,IE,t6,Z8,PE,DE,c6,Z6,W6,tE,C6,zE,E6,qE))};class cp{constructor(t,r={}){this.text=t,this.metadata=r,this.type="graph",this.text=L8(t),this.text+=`
`;const n=Vt();try{this.type=oo(t,n)}catch(i){this.type="error",this.detectError=i}const a=$l(this.type);Q.debug("Type "+this.type),this.db=a.db,this.renderer=a.renderer,this.parser=a.parser,this.parser.parser.yy=this.db,this.init=a.init,this.parse()}parse(){var t,r,n,a,i;if(this.detectError)throw this.detectError;(r=(t=this.db).clear)==null||r.call(t);const o=Vt();(n=this.init)==null||n.call(this,o),this.metadata.title&&((i=(a=this.db).setDiagramTitle)==null||i.call(a,this.metadata.title)),this.parser.parse(this.text)}async render(t,r){await this.renderer.draw(this.text,t,r,this)}getParser(){return this.parser}getType(){return this.type}}const WE=async(e,t={})=>{const r=oo(e,Vt());try{$l(r)}catch{const a=d8(r);if(!a)throw new Ef(`Diagram ${r} not found.`);const{id:i,diagram:o}=await a();Ii(i,o)}return new cp(e,t)};let Fu=[];const XE=()=>{Fu.forEach(e=>{e()}),Fu=[]},YE="graphics-document document";function KE(e,t){e.attr("role",YE),t!==""&&e.attr("aria-roledescription",t)}function ZE(e,t,r,n){if(e.insert!==void 0){if(r){const a=`chart-desc-${n}`;e.attr("aria-describedby",a),e.insert("desc",":first-child").attr("id",a).text(r)}if(t){const a=`chart-title-${n}`;e.attr("aria-labelledby",a),e.insert("title",":first-child").attr("id",a).text(t)}}}const JE=e=>e.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart();/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function dp(e){return typeof e>"u"||e===null}function QE(e){return typeof e=="object"&&e!==null}function e5(e){return Array.isArray(e)?e:dp(e)?[]:[e]}function t5(e,t){var r,n,a,i;if(t)for(i=Object.keys(t),r=0,n=i.length;r<n;r+=1)a=i[r],e[a]=t[a];return e}function r5(e,t){var r="",n;for(n=0;n<t;n+=1)r+=e;return r}function n5(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var a5=dp,i5=QE,o5=e5,s5=r5,l5=n5,c5=t5,at={isNothing:a5,isObject:i5,toArray:o5,repeat:s5,isNegativeZero:l5,extend:c5};function up(e,t){var r="",n=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(r+=`

`+e.mark.snippet),n+" "+r):n}function na(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=up(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}na.prototype=Object.create(Error.prototype);na.prototype.constructor=na;na.prototype.toString=function(t){return this.name+": "+up(this,t)};var Qt=na;function Go(e,t,r,n,a){var i="",o="",s=Math.floor(a/2)-1;return n-t>s&&(i=" ... ",t=n-s+i.length),r-n>s&&(o=" ...",r=n+s-o.length),{str:i+e.slice(t,r).replace(/\t/g,"â†’")+o,pos:n-t+i.length}}function Vo(e,t){return at.repeat(" ",t-e.length)+e}function d5(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],a=[],i,o=-1;i=r.exec(e.buffer);)a.push(i.index),n.push(i.index+i[0].length),e.position<=i.index&&o<0&&(o=n.length-2);o<0&&(o=n.length-1);var s="",l,d,u=Math.min(e.line+t.linesAfter,a.length).toString().length,h=t.maxLength-(t.indent+u+3);for(l=1;l<=t.linesBefore&&!(o-l<0);l++)d=Go(e.buffer,n[o-l],a[o-l],e.position-(n[o]-n[o-l]),h),s=at.repeat(" ",t.indent)+Vo((e.line-l+1).toString(),u)+" | "+d.str+`
`+s;for(d=Go(e.buffer,n[o],a[o],e.position,h),s+=at.repeat(" ",t.indent)+Vo((e.line+1).toString(),u)+" | "+d.str+`
`,s+=at.repeat("-",t.indent+u+3+d.pos)+`^
`,l=1;l<=t.linesAfter&&!(o+l>=a.length);l++)d=Go(e.buffer,n[o+l],a[o+l],e.position-(n[o]-n[o+l]),h),s+=at.repeat(" ",t.indent)+Vo((e.line+l+1).toString(),u)+" | "+d.str+`
`;return s.replace(/\n$/,"")}var u5=d5,h5=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],f5=["scalar","sequence","mapping"];function p5(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(n){t[String(n)]=r})}),t}function m5(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if(h5.indexOf(r)===-1)throw new Qt('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=p5(t.styleAliases||null),f5.indexOf(this.kind)===-1)throw new Qt('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var Je=m5;function $u(e,t){var r=[];return e[t].forEach(function(n){var a=r.length;r.forEach(function(i,o){i.tag===n.tag&&i.kind===n.kind&&i.multi===n.multi&&(a=o)}),r[a]=n}),r}function g5(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,r;function n(a){a.multi?(e.multi[a.kind].push(a),e.multi.fallback.push(a)):e[a.kind][a.tag]=e.fallback[a.tag]=a}for(t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(n);return e}function js(e){return this.extend(e)}js.prototype.extend=function(t){var r=[],n=[];if(t instanceof Je)n.push(t);else if(Array.isArray(t))n=n.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(r=r.concat(t.implicit)),t.explicit&&(n=n.concat(t.explicit));else throw new Qt("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(i){if(!(i instanceof Je))throw new Qt("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(i.loadKind&&i.loadKind!=="scalar")throw new Qt("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(i.multi)throw new Qt("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(i){if(!(i instanceof Je))throw new Qt("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var a=Object.create(js.prototype);return a.implicit=(this.implicit||[]).concat(r),a.explicit=(this.explicit||[]).concat(n),a.compiledImplicit=$u(a,"implicit"),a.compiledExplicit=$u(a,"explicit"),a.compiledTypeMap=g5(a.compiledImplicit,a.compiledExplicit),a};var x5=js,v5=new Je("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),y5=new Je("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),b5=new Je("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),w5=new x5({explicit:[v5,y5,b5]});function _5(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function C5(){return null}function S5(e){return e===null}var A5=new Je("tag:yaml.org,2002:null",{kind:"scalar",resolve:_5,construct:C5,predicate:S5,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function k5(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function E5(e){return e==="true"||e==="True"||e==="TRUE"}function N5(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var T5=new Je("tag:yaml.org,2002:bool",{kind:"scalar",resolve:k5,construct:E5,predicate:N5,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function I5(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function O5(e){return 48<=e&&e<=55}function B5(e){return 48<=e&&e<=57}function j5(e){if(e===null)return!1;var t=e.length,r=0,n=!1,a;if(!t)return!1;if(a=e[r],(a==="-"||a==="+")&&(a=e[++r]),a==="0"){if(r+1===t)return!0;if(a=e[++r],a==="b"){for(r++;r<t;r++)if(a=e[r],a!=="_"){if(a!=="0"&&a!=="1")return!1;n=!0}return n&&a!=="_"}if(a==="x"){for(r++;r<t;r++)if(a=e[r],a!=="_"){if(!I5(e.charCodeAt(r)))return!1;n=!0}return n&&a!=="_"}if(a==="o"){for(r++;r<t;r++)if(a=e[r],a!=="_"){if(!O5(e.charCodeAt(r)))return!1;n=!0}return n&&a!=="_"}}if(a==="_")return!1;for(;r<t;r++)if(a=e[r],a!=="_"){if(!B5(e.charCodeAt(r)))return!1;n=!0}return!(!n||a==="_")}function D5(e){var t=e,r=1,n;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),n=t[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),t=t.slice(1),n=t[0]),t==="0")return 0;if(n==="0"){if(t[1]==="b")return r*parseInt(t.slice(2),2);if(t[1]==="x")return r*parseInt(t.slice(2),16);if(t[1]==="o")return r*parseInt(t.slice(2),8)}return r*parseInt(t,10)}function R5(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!at.isNegativeZero(e)}var L5=new Je("tag:yaml.org,2002:int",{kind:"scalar",resolve:j5,construct:D5,predicate:R5,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),M5=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function P5(e){return!(e===null||!M5.test(e)||e[e.length-1]==="_")}function F5(e){var t,r;return t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:r*parseFloat(t,10)}var $5=/^[-+]?[0-9]+e/;function U5(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(at.isNegativeZero(e))return"-0.0";return r=e.toString(10),$5.test(r)?r.replace("e",".e"):r}function z5(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||at.isNegativeZero(e))}var H5=new Je("tag:yaml.org,2002:float",{kind:"scalar",resolve:P5,construct:F5,predicate:z5,represent:U5,defaultStyle:"lowercase"}),hp=w5.extend({implicit:[A5,T5,L5,H5]}),G5=hp,fp=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),pp=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function V5(e){return e===null?!1:fp.exec(e)!==null||pp.exec(e)!==null}function q5(e){var t,r,n,a,i,o,s,l=0,d=null,u,h,f;if(t=fp.exec(e),t===null&&(t=pp.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],n=+t[2]-1,a=+t[3],!t[4])return new Date(Date.UTC(r,n,a));if(i=+t[4],o=+t[5],s=+t[6],t[7]){for(l=t[7].slice(0,3);l.length<3;)l+="0";l=+l}return t[9]&&(u=+t[10],h=+(t[11]||0),d=(u*60+h)*6e4,t[9]==="-"&&(d=-d)),f=new Date(Date.UTC(r,n,a,i,o,s,l)),d&&f.setTime(f.getTime()-d),f}function W5(e){return e.toISOString()}var X5=new Je("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:V5,construct:q5,instanceOf:Date,represent:W5});function Y5(e){return e==="<<"||e===null}var K5=new Je("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Y5}),zl=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Z5(e){if(e===null)return!1;var t,r,n=0,a=e.length,i=zl;for(r=0;r<a;r++)if(t=i.indexOf(e.charAt(r)),!(t>64)){if(t<0)return!1;n+=6}return n%8===0}function J5(e){var t,r,n=e.replace(/[\r\n=]/g,""),a=n.length,i=zl,o=0,s=[];for(t=0;t<a;t++)t%4===0&&t&&(s.push(o>>16&255),s.push(o>>8&255),s.push(o&255)),o=o<<6|i.indexOf(n.charAt(t));return r=a%4*6,r===0?(s.push(o>>16&255),s.push(o>>8&255),s.push(o&255)):r===18?(s.push(o>>10&255),s.push(o>>2&255)):r===12&&s.push(o>>4&255),new Uint8Array(s)}function Q5(e){var t="",r=0,n,a,i=e.length,o=zl;for(n=0;n<i;n++)n%3===0&&n&&(t+=o[r>>18&63],t+=o[r>>12&63],t+=o[r>>6&63],t+=o[r&63]),r=(r<<8)+e[n];return a=i%3,a===0?(t+=o[r>>18&63],t+=o[r>>12&63],t+=o[r>>6&63],t+=o[r&63]):a===2?(t+=o[r>>10&63],t+=o[r>>4&63],t+=o[r<<2&63],t+=o[64]):a===1&&(t+=o[r>>2&63],t+=o[r<<4&63],t+=o[64],t+=o[64]),t}function eN(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var tN=new Je("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Z5,construct:J5,predicate:eN,represent:Q5}),rN=Object.prototype.hasOwnProperty,nN=Object.prototype.toString;function aN(e){if(e===null)return!0;var t=[],r,n,a,i,o,s=e;for(r=0,n=s.length;r<n;r+=1){if(a=s[r],o=!1,nN.call(a)!=="[object Object]")return!1;for(i in a)if(rN.call(a,i))if(!o)o=!0;else return!1;if(!o)return!1;if(t.indexOf(i)===-1)t.push(i);else return!1}return!0}function iN(e){return e!==null?e:[]}var oN=new Je("tag:yaml.org,2002:omap",{kind:"sequence",resolve:aN,construct:iN}),sN=Object.prototype.toString;function lN(e){if(e===null)return!0;var t,r,n,a,i,o=e;for(i=new Array(o.length),t=0,r=o.length;t<r;t+=1){if(n=o[t],sN.call(n)!=="[object Object]"||(a=Object.keys(n),a.length!==1))return!1;i[t]=[a[0],n[a[0]]]}return!0}function cN(e){if(e===null)return[];var t,r,n,a,i,o=e;for(i=new Array(o.length),t=0,r=o.length;t<r;t+=1)n=o[t],a=Object.keys(n),i[t]=[a[0],n[a[0]]];return i}var dN=new Je("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:lN,construct:cN}),uN=Object.prototype.hasOwnProperty;function hN(e){if(e===null)return!0;var t,r=e;for(t in r)if(uN.call(r,t)&&r[t]!==null)return!1;return!0}function fN(e){return e!==null?e:{}}var pN=new Je("tag:yaml.org,2002:set",{kind:"mapping",resolve:hN,construct:fN}),mN=G5.extend({implicit:[X5,K5],explicit:[tN,oN,dN,pN]}),gr=Object.prototype.hasOwnProperty,Oi=1,mp=2,gp=3,Bi=4,qo=1,gN=2,Uu=3,xN=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,vN=/[\x85\u2028\u2029]/,yN=/[,\[\]\{\}]/,xp=/^(?:!|!!|![a-z\-]+!)$/i,vp=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function zu(e){return Object.prototype.toString.call(e)}function zt(e){return e===10||e===13}function Tr(e){return e===9||e===32}function ut(e){return e===9||e===32||e===10||e===13}function Vr(e){return e===44||e===91||e===93||e===123||e===125}function bN(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function wN(e){return e===120?2:e===117?4:e===85?8:0}function _N(e){return 48<=e&&e<=57?e-48:-1}function Hu(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"Â…":e===95?"Â ":e===76?"\u2028":e===80?"\u2029":""}function CN(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var yp=new Array(256),bp=new Array(256);for(var Fr=0;Fr<256;Fr++)yp[Fr]=Hu(Fr)?1:0,bp[Fr]=Hu(Fr);function SN(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||mN,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function wp(e,t){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=u5(r),new Qt(t,r)}function Z(e,t){throw wp(e,t)}function ji(e,t){e.onWarning&&e.onWarning.call(null,wp(e,t))}var Gu={YAML:function(t,r,n){var a,i,o;t.version!==null&&Z(t,"duplication of %YAML directive"),n.length!==1&&Z(t,"YAML directive accepts exactly one argument"),a=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),a===null&&Z(t,"ill-formed argument of the YAML directive"),i=parseInt(a[1],10),o=parseInt(a[2],10),i!==1&&Z(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=o<2,o!==1&&o!==2&&ji(t,"unsupported YAML version of the document")},TAG:function(t,r,n){var a,i;n.length!==2&&Z(t,"TAG directive accepts exactly two arguments"),a=n[0],i=n[1],xp.test(a)||Z(t,"ill-formed tag handle (first argument) of the TAG directive"),gr.call(t.tagMap,a)&&Z(t,'there is a previously declared suffix for "'+a+'" tag handle'),vp.test(i)||Z(t,"ill-formed tag prefix (second argument) of the TAG directive");try{i=decodeURIComponent(i)}catch{Z(t,"tag prefix is malformed: "+i)}t.tagMap[a]=i}};function pr(e,t,r,n){var a,i,o,s;if(t<r){if(s=e.input.slice(t,r),n)for(a=0,i=s.length;a<i;a+=1)o=s.charCodeAt(a),o===9||32<=o&&o<=1114111||Z(e,"expected valid JSON character");else xN.test(s)&&Z(e,"the stream contains non-printable characters");e.result+=s}}function Vu(e,t,r,n){var a,i,o,s;for(at.isObject(r)||Z(e,"cannot merge mappings; the provided source object is unacceptable"),a=Object.keys(r),o=0,s=a.length;o<s;o+=1)i=a[o],gr.call(t,i)||(t[i]=r[i],n[i]=!0)}function qr(e,t,r,n,a,i,o,s,l){var d,u;if(Array.isArray(a))for(a=Array.prototype.slice.call(a),d=0,u=a.length;d<u;d+=1)Array.isArray(a[d])&&Z(e,"nested arrays are not supported inside keys"),typeof a=="object"&&zu(a[d])==="[object Object]"&&(a[d]="[object Object]");if(typeof a=="object"&&zu(a)==="[object Object]"&&(a="[object Object]"),a=String(a),t===null&&(t={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(i))for(d=0,u=i.length;d<u;d+=1)Vu(e,t,i[d],r);else Vu(e,t,i,r);else!e.json&&!gr.call(r,a)&&gr.call(t,a)&&(e.line=o||e.line,e.lineStart=s||e.lineStart,e.position=l||e.position,Z(e,"duplicated mapping key")),a==="__proto__"?Object.defineProperty(t,a,{configurable:!0,enumerable:!0,writable:!0,value:i}):t[a]=i,delete r[a];return t}function Hl(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):Z(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function Re(e,t,r){for(var n=0,a=e.input.charCodeAt(e.position);a!==0;){for(;Tr(a);)a===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),a=e.input.charCodeAt(++e.position);if(t&&a===35)do a=e.input.charCodeAt(++e.position);while(a!==10&&a!==13&&a!==0);if(zt(a))for(Hl(e),a=e.input.charCodeAt(e.position),n++,e.lineIndent=0;a===32;)e.lineIndent++,a=e.input.charCodeAt(++e.position);else break}return r!==-1&&n!==0&&e.lineIndent<r&&ji(e,"deficient indentation"),n}function lo(e){var t=e.position,r;return r=e.input.charCodeAt(t),!!((r===45||r===46)&&r===e.input.charCodeAt(t+1)&&r===e.input.charCodeAt(t+2)&&(t+=3,r=e.input.charCodeAt(t),r===0||ut(r)))}function Gl(e,t){t===1?e.result+=" ":t>1&&(e.result+=at.repeat(`
`,t-1))}function AN(e,t,r){var n,a,i,o,s,l,d,u,h=e.kind,f=e.result,p;if(p=e.input.charCodeAt(e.position),ut(p)||Vr(p)||p===35||p===38||p===42||p===33||p===124||p===62||p===39||p===34||p===37||p===64||p===96||(p===63||p===45)&&(a=e.input.charCodeAt(e.position+1),ut(a)||r&&Vr(a)))return!1;for(e.kind="scalar",e.result="",i=o=e.position,s=!1;p!==0;){if(p===58){if(a=e.input.charCodeAt(e.position+1),ut(a)||r&&Vr(a))break}else if(p===35){if(n=e.input.charCodeAt(e.position-1),ut(n))break}else{if(e.position===e.lineStart&&lo(e)||r&&Vr(p))break;if(zt(p))if(l=e.line,d=e.lineStart,u=e.lineIndent,Re(e,!1,-1),e.lineIndent>=t){s=!0,p=e.input.charCodeAt(e.position);continue}else{e.position=o,e.line=l,e.lineStart=d,e.lineIndent=u;break}}s&&(pr(e,i,o,!1),Gl(e,e.line-l),i=o=e.position,s=!1),Tr(p)||(o=e.position+1),p=e.input.charCodeAt(++e.position)}return pr(e,i,o,!1),e.result?!0:(e.kind=h,e.result=f,!1)}function kN(e,t){var r,n,a;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=a=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(pr(e,n,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)n=e.position,e.position++,a=e.position;else return!0;else zt(r)?(pr(e,n,a,!0),Gl(e,Re(e,!1,t)),n=a=e.position):e.position===e.lineStart&&lo(e)?Z(e,"unexpected end of the document within a single quoted scalar"):(e.position++,a=e.position);Z(e,"unexpected end of the stream within a single quoted scalar")}function EN(e,t){var r,n,a,i,o,s;if(s=e.input.charCodeAt(e.position),s!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;(s=e.input.charCodeAt(e.position))!==0;){if(s===34)return pr(e,r,e.position,!0),e.position++,!0;if(s===92){if(pr(e,r,e.position,!0),s=e.input.charCodeAt(++e.position),zt(s))Re(e,!1,t);else if(s<256&&yp[s])e.result+=bp[s],e.position++;else if((o=wN(s))>0){for(a=o,i=0;a>0;a--)s=e.input.charCodeAt(++e.position),(o=bN(s))>=0?i=(i<<4)+o:Z(e,"expected hexadecimal character");e.result+=CN(i),e.position++}else Z(e,"unknown escape sequence");r=n=e.position}else zt(s)?(pr(e,r,n,!0),Gl(e,Re(e,!1,t)),r=n=e.position):e.position===e.lineStart&&lo(e)?Z(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}Z(e,"unexpected end of the stream within a double quoted scalar")}function NN(e,t){var r=!0,n,a,i,o=e.tag,s,l=e.anchor,d,u,h,f,p,m=Object.create(null),g,x,y,v;if(v=e.input.charCodeAt(e.position),v===91)u=93,p=!1,s=[];else if(v===123)u=125,p=!0,s={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),v=e.input.charCodeAt(++e.position);v!==0;){if(Re(e,!0,t),v=e.input.charCodeAt(e.position),v===u)return e.position++,e.tag=o,e.anchor=l,e.kind=p?"mapping":"sequence",e.result=s,!0;r?v===44&&Z(e,"expected the node content, but found ','"):Z(e,"missed comma between flow collection entries"),x=g=y=null,h=f=!1,v===63&&(d=e.input.charCodeAt(e.position+1),ut(d)&&(h=f=!0,e.position++,Re(e,!0,t))),n=e.line,a=e.lineStart,i=e.position,cn(e,t,Oi,!1,!0),x=e.tag,g=e.result,Re(e,!0,t),v=e.input.charCodeAt(e.position),(f||e.line===n)&&v===58&&(h=!0,v=e.input.charCodeAt(++e.position),Re(e,!0,t),cn(e,t,Oi,!1,!0),y=e.result),p?qr(e,s,m,x,g,y,n,a,i):h?s.push(qr(e,null,m,x,g,y,n,a,i)):s.push(g),Re(e,!0,t),v=e.input.charCodeAt(e.position),v===44?(r=!0,v=e.input.charCodeAt(++e.position)):r=!1}Z(e,"unexpected end of the stream within a flow collection")}function TN(e,t){var r,n,a=qo,i=!1,o=!1,s=t,l=0,d=!1,u,h;if(h=e.input.charCodeAt(e.position),h===124)n=!1;else if(h===62)n=!0;else return!1;for(e.kind="scalar",e.result="";h!==0;)if(h=e.input.charCodeAt(++e.position),h===43||h===45)qo===a?a=h===43?Uu:gN:Z(e,"repeat of a chomping mode identifier");else if((u=_N(h))>=0)u===0?Z(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?Z(e,"repeat of an indentation width identifier"):(s=t+u-1,o=!0);else break;if(Tr(h)){do h=e.input.charCodeAt(++e.position);while(Tr(h));if(h===35)do h=e.input.charCodeAt(++e.position);while(!zt(h)&&h!==0)}for(;h!==0;){for(Hl(e),e.lineIndent=0,h=e.input.charCodeAt(e.position);(!o||e.lineIndent<s)&&h===32;)e.lineIndent++,h=e.input.charCodeAt(++e.position);if(!o&&e.lineIndent>s&&(s=e.lineIndent),zt(h)){l++;continue}if(e.lineIndent<s){a===Uu?e.result+=at.repeat(`
`,i?1+l:l):a===qo&&i&&(e.result+=`
`);break}for(n?Tr(h)?(d=!0,e.result+=at.repeat(`
`,i?1+l:l)):d?(d=!1,e.result+=at.repeat(`
`,l+1)):l===0?i&&(e.result+=" "):e.result+=at.repeat(`
`,l):e.result+=at.repeat(`
`,i?1+l:l),i=!0,o=!0,l=0,r=e.position;!zt(h)&&h!==0;)h=e.input.charCodeAt(++e.position);pr(e,r,e.position,!1)}return!0}function qu(e,t){var r,n=e.tag,a=e.anchor,i=[],o,s=!1,l;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=i),l=e.input.charCodeAt(e.position);l!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,Z(e,"tab characters must not be used in indentation")),!(l!==45||(o=e.input.charCodeAt(e.position+1),!ut(o))));){if(s=!0,e.position++,Re(e,!0,-1)&&e.lineIndent<=t){i.push(null),l=e.input.charCodeAt(e.position);continue}if(r=e.line,cn(e,t,gp,!1,!0),i.push(e.result),Re(e,!0,-1),l=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&l!==0)Z(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return s?(e.tag=n,e.anchor=a,e.kind="sequence",e.result=i,!0):!1}function IN(e,t,r){var n,a,i,o,s,l,d=e.tag,u=e.anchor,h={},f=Object.create(null),p=null,m=null,g=null,x=!1,y=!1,v;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=h),v=e.input.charCodeAt(e.position);v!==0;){if(!x&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,Z(e,"tab characters must not be used in indentation")),n=e.input.charCodeAt(e.position+1),i=e.line,(v===63||v===58)&&ut(n))v===63?(x&&(qr(e,h,f,p,m,null,o,s,l),p=m=g=null),y=!0,x=!0,a=!0):x?(x=!1,a=!0):Z(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,v=n;else{if(o=e.line,s=e.lineStart,l=e.position,!cn(e,r,mp,!1,!0))break;if(e.line===i){for(v=e.input.charCodeAt(e.position);Tr(v);)v=e.input.charCodeAt(++e.position);if(v===58)v=e.input.charCodeAt(++e.position),ut(v)||Z(e,"a whitespace character is expected after the key-value separator within a block mapping"),x&&(qr(e,h,f,p,m,null,o,s,l),p=m=g=null),y=!0,x=!1,a=!1,p=e.tag,m=e.result;else if(y)Z(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=d,e.anchor=u,!0}else if(y)Z(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=d,e.anchor=u,!0}if((e.line===i||e.lineIndent>t)&&(x&&(o=e.line,s=e.lineStart,l=e.position),cn(e,t,Bi,!0,a)&&(x?m=e.result:g=e.result),x||(qr(e,h,f,p,m,g,o,s,l),p=m=g=null),Re(e,!0,-1),v=e.input.charCodeAt(e.position)),(e.line===i||e.lineIndent>t)&&v!==0)Z(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return x&&qr(e,h,f,p,m,null,o,s,l),y&&(e.tag=d,e.anchor=u,e.kind="mapping",e.result=h),y}function ON(e){var t,r=!1,n=!1,a,i,o;if(o=e.input.charCodeAt(e.position),o!==33)return!1;if(e.tag!==null&&Z(e,"duplication of a tag property"),o=e.input.charCodeAt(++e.position),o===60?(r=!0,o=e.input.charCodeAt(++e.position)):o===33?(n=!0,a="!!",o=e.input.charCodeAt(++e.position)):a="!",t=e.position,r){do o=e.input.charCodeAt(++e.position);while(o!==0&&o!==62);e.position<e.length?(i=e.input.slice(t,e.position),o=e.input.charCodeAt(++e.position)):Z(e,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!ut(o);)o===33&&(n?Z(e,"tag suffix cannot contain exclamation marks"):(a=e.input.slice(t-1,e.position+1),xp.test(a)||Z(e,"named tag handle cannot contain such characters"),n=!0,t=e.position+1)),o=e.input.charCodeAt(++e.position);i=e.input.slice(t,e.position),yN.test(i)&&Z(e,"tag suffix cannot contain flow indicator characters")}i&&!vp.test(i)&&Z(e,"tag name cannot contain such characters: "+i);try{i=decodeURIComponent(i)}catch{Z(e,"tag name is malformed: "+i)}return r?e.tag=i:gr.call(e.tagMap,a)?e.tag=e.tagMap[a]+i:a==="!"?e.tag="!"+i:a==="!!"?e.tag="tag:yaml.org,2002:"+i:Z(e,'undeclared tag handle "'+a+'"'),!0}function BN(e){var t,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&Z(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!ut(r)&&!Vr(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&Z(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function jN(e){var t,r,n;if(n=e.input.charCodeAt(e.position),n!==42)return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!ut(n)&&!Vr(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&Z(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),gr.call(e.anchorMap,r)||Z(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],Re(e,!0,-1),!0}function cn(e,t,r,n,a){var i,o,s,l=1,d=!1,u=!1,h,f,p,m,g,x;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,i=o=s=Bi===r||gp===r,n&&Re(e,!0,-1)&&(d=!0,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)),l===1)for(;ON(e)||BN(e);)Re(e,!0,-1)?(d=!0,s=i,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)):s=!1;if(s&&(s=d||a),(l===1||Bi===r)&&(Oi===r||mp===r?g=t:g=t+1,x=e.position-e.lineStart,l===1?s&&(qu(e,x)||IN(e,x,g))||NN(e,g)?u=!0:(o&&TN(e,g)||kN(e,g)||EN(e,g)?u=!0:jN(e)?(u=!0,(e.tag!==null||e.anchor!==null)&&Z(e,"alias node should not have any properties")):AN(e,g,Oi===r)&&(u=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):l===0&&(u=s&&qu(e,x))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&Z(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),h=0,f=e.implicitTypes.length;h<f;h+=1)if(m=e.implicitTypes[h],m.resolve(e.result)){e.result=m.construct(e.result),e.tag=m.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(gr.call(e.typeMap[e.kind||"fallback"],e.tag))m=e.typeMap[e.kind||"fallback"][e.tag];else for(m=null,p=e.typeMap.multi[e.kind||"fallback"],h=0,f=p.length;h<f;h+=1)if(e.tag.slice(0,p[h].tag.length)===p[h].tag){m=p[h];break}m||Z(e,"unknown tag !<"+e.tag+">"),e.result!==null&&m.kind!==e.kind&&Z(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+m.kind+'", not "'+e.kind+'"'),m.resolve(e.result,e.tag)?(e.result=m.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):Z(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||u}function DN(e){var t=e.position,r,n,a,i=!1,o;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(o=e.input.charCodeAt(e.position))!==0&&(Re(e,!0,-1),o=e.input.charCodeAt(e.position),!(e.lineIndent>0||o!==37));){for(i=!0,o=e.input.charCodeAt(++e.position),r=e.position;o!==0&&!ut(o);)o=e.input.charCodeAt(++e.position);for(n=e.input.slice(r,e.position),a=[],n.length<1&&Z(e,"directive name must not be less than one character in length");o!==0;){for(;Tr(o);)o=e.input.charCodeAt(++e.position);if(o===35){do o=e.input.charCodeAt(++e.position);while(o!==0&&!zt(o));break}if(zt(o))break;for(r=e.position;o!==0&&!ut(o);)o=e.input.charCodeAt(++e.position);a.push(e.input.slice(r,e.position))}o!==0&&Hl(e),gr.call(Gu,n)?Gu[n](e,n,a):ji(e,'unknown document directive "'+n+'"')}if(Re(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,Re(e,!0,-1)):i&&Z(e,"directives end mark is expected"),cn(e,e.lineIndent-1,Bi,!1,!0),Re(e,!0,-1),e.checkLineBreaks&&vN.test(e.input.slice(t,e.position))&&ji(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&lo(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,Re(e,!0,-1));return}if(e.position<e.length-1)Z(e,"end of the stream or a document separator is expected");else return}function RN(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new SN(e,t),n=e.indexOf("\0");for(n!==-1&&(r.position=n,Z(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)DN(r);return r.documents}function LN(e,t){var r=RN(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new Qt("expected a single document in the stream, but found more")}}var MN=LN,PN={load:MN},FN=hp,$N=PN.load;function UN(e){const t=e.match(kf);if(!t)return{text:e,metadata:{}};let r=$N(t[1],{schema:FN})??{};r=typeof r=="object"&&!Array.isArray(r)?r:{};const n={};return r.displayMode&&(n.displayMode=r.displayMode.toString()),r.title&&(n.title=r.title.toString()),r.config&&(n.config=r.config),{text:e.slice(t[0].length),metadata:n}}const zN=e=>e.replace(/\r\n?/g,`
`).replace(/<(\w+)([^>]*)>/g,(t,r,n)=>"<"+r+n.replace(/="([^"]*)"/g,"='$1'")+">"),HN=e=>{const{text:t,metadata:r}=UN(e),{displayMode:n,title:a,config:i={}}=r;return n&&(i.gantt||(i.gantt={}),i.gantt.displayMode=n),{title:a,config:i,text:t}},GN=e=>{const t=Gn.detectInit(e)??{},r=Gn.detectDirective(e,"wrap");return Array.isArray(r)?t.wrap=r.some(({type:n})=>{}):r?.type==="wrap"&&(t.wrap=!0),{text:m8(e),directive:t}};function _p(e){const t=zN(e),r=HN(t),n=GN(r.text),a=jf(r.config,n.directive);return e=JE(n.text),{code:e,title:r.title,config:a}}const VN=5e4,qN="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",WN="sandbox",XN="loose",YN="http://www.w3.org/2000/svg",KN="http://www.w3.org/1999/xlink",ZN="http://www.w3.org/1999/xhtml",JN="100%",QN="100%",eT="border:0;margin:0;",tT="margin:0",rT="allow-top-navigation-by-user-activation allow-popups",nT='The "iframe" tag is not supported by your browser.',aT=["foreignobject"],iT=["dominant-baseline"];function Cp(e){const t=_p(e);return Ni(),U8(t.config??{}),t}async function oT(e,t){Ul(),e=Cp(e).code;try{await Vl(e)}catch(r){if(t?.suppressErrors)return!1;throw r}return!0}const Wu=(e,t,r=[])=>`
.${e} ${t} { ${r.join(" !important; ")} !important; }`,sT=(e,t={})=>{var r;let n="";if(e.themeCSS!==void 0&&(n+=`
${e.themeCSS}`),e.fontFamily!==void 0&&(n+=`
:root { --mermaid-font-family: ${e.fontFamily}}`),e.altFontFamily!==void 0&&(n+=`
:root { --mermaid-alt-font-family: ${e.altFontFamily}}`),!Ho(t)){const s=e.htmlLabels||((r=e.flowchart)==null?void 0:r.htmlLabels)?["> *","span"]:["rect","polygon","ellipse","circle","path"];for(const l in t){const d=t[l];Ho(d.styles)||s.forEach(u=>{n+=Wu(d.id,u,d.styles)}),Ho(d.textStyles)||(n+=Wu(d.id,"tspan",d.textStyles))}}return n},lT=(e,t,r,n)=>{const a=sT(e,r),i=sE(t,a,e.themeVariables);return As(yk(`${n}{${i}}`),wk)},cT=(e="",t,r)=>{let n=e;return!r&&!t&&(n=n.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),n=M8(n),n=n.replace(/<br>/g,"<br/>"),n},dT=(e="",t)=>{var r,n;const a=(n=(r=t?.viewBox)==null?void 0:r.baseVal)!=null&&n.height?t.viewBox.baseVal.height+"px":QN,i=btoa('<body style="'+tT+'">'+e+"</body>");return`<iframe style="width:${JN};height:${a};${eT}" src="data:text/html;base64,${i}" sandbox="${rT}">
  ${nT}
</iframe>`},Xu=(e,t,r,n,a)=>{const i=e.append("div");i.attr("id",r),n&&i.attr("style",n);const o=i.append("svg").attr("id",t).attr("width","100%").attr("xmlns",YN);return a&&o.attr("xmlns:xlink",a),o.append("g"),e};function Yu(e,t){return e.append("iframe").attr("id",t).attr("style","width: 100%; height: 100%;").attr("sandbox","")}const uT=(e,t,r,n)=>{var a,i,o;(a=e.getElementById(t))==null||a.remove(),(i=e.getElementById(r))==null||i.remove(),(o=e.getElementById(n))==null||o.remove()},hT=async function(e,t,r){var n,a,i,o,s,l;Ul();const d=Cp(t);t=d.code;const u=Vt();Q.debug(u),t.length>(u?.maxTextSize??VN)&&(t=qN);const h="#"+e,f="i"+e,p="#"+f,m="d"+e,g="#"+m;let x=St("body");const y=u.securityLevel===WN,v=u.securityLevel===XN,w=u.fontFamily;if(r!==void 0){if(r&&(r.innerHTML=""),y){const j=Yu(St(r),f);x=St(j.nodes()[0].contentDocument.body),x.node().style.margin=0}else x=St(r);Xu(x,e,m,`font-family: ${w}`,KN)}else{if(uT(document,e,m,f),y){const j=Yu(St("body"),f);x=St(j.nodes()[0].contentDocument.body),x.node().style.margin=0}else x=St("body");Xu(x,e,m)}let S,C;try{S=await Vl(t,{title:d.title})}catch(j){S=new cp("error"),C=j}const k=x.select(g).node(),A=S.type,N=k.firstChild,B=N.firstChild,E=(a=(n=S.renderer).getClasses)==null?void 0:a.call(n,t,S),I=lT(u,A,E,h),F=document.createElement("style");F.innerHTML=I,N.insertBefore(F,B);try{await S.renderer.draw(t,e,Lu,S)}catch(j){throw SE.draw(t,e,Lu),j}const V=x.select(`${g} svg`),M=(o=(i=S.db).getAccTitle)==null?void 0:o.call(i),L=(l=(s=S.db).getAccDescription)==null?void 0:l.call(s);pT(A,V,M,L),x.select(`[id="${e}"]`).selectAll("foreignobject > *").attr("xmlns",ZN);let R=x.select(g).node().innerHTML;if(Q.debug("config.arrowMarkerAbsolute",u.arrowMarkerAbsolute),R=cT(R,y,Cf(u.arrowMarkerAbsolute)),y){const j=x.select(g+" svg").node();R=dT(R,j)}else v||(R=Jr.sanitize(R,{ADD_TAGS:aT,ADD_ATTR:iT}));if(XE(),C)throw C;const $=St(y?p:g).node();return $&&"remove"in $&&$.remove(),{svg:R,bindFunctions:S.db.bindFunctions}};function fT(e={}){var t;e?.fontFamily&&!((t=e.themeVariables)!=null&&t.fontFamily)&&(e.themeVariables||(e.themeVariables={}),e.themeVariables.fontFamily=e.fontFamily),F8(e),e?.theme&&e.theme in tr?e.themeVariables=tr[e.theme].getThemeVariables(e.themeVariables):e&&(e.themeVariables=tr.default.getThemeVariables(e.themeVariables));const r=typeof e=="object"?P8(e):Rf();Il(r.logLevel),Ul()}const Vl=(e,t={})=>{const{code:r}=_p(e);return WE(r,t)};function pT(e,t,r,n){KE(t,e),ZE(t,r,n,t.attr("id"))}const Br=Object.freeze({render:hT,parse:oT,getDiagramFromText:Vl,initialize:fT,getConfig:Vt,setConfig:Lf,getSiteConfig:Rf,updateSiteConfig:$8,reset:()=>{Ni()},globalReset:()=>{Ni(sn)},defaultConfig:sn});Il(Vt().logLevel);Ni(Vt());const mT=async()=>{Q.debug("Loading registered diagrams");const t=(await Promise.allSettled(Object.entries(on).map(async([r,{detector:n,loader:a}])=>{if(a)try{$l(r)}catch{try{const{diagram:o,id:s}=await a();Ii(s,o,n)}catch(o){throw Q.error(`Failed to load external diagram with key ${r}. Removing from detectors.`),delete on[r],o}}}))).filter(r=>r.status==="rejected");if(t.length>0){Q.error(`Failed to load ${t.length} external diagrams`);for(const r of t)Q.error(r);throw new Error(`Failed to load ${t.length} external diagrams`)}},gT=(e,t,r)=>{Q.warn(e),Bf(e)?(r&&r(e.str,e.hash),t.push({...e,message:e.str,error:e})):(r&&r(e),e instanceof Error&&t.push({str:e.message,message:e.message,hash:e.name,error:e}))},Sp=async function(e={querySelector:".mermaid"}){try{await xT(e)}catch(t){if(Bf(t)&&Q.error(t.str),Tt.parseError&&Tt.parseError(t),!e.suppressErrors)throw Q.error("Use the suppressErrors option to suppress these errors"),t}},xT=async function({postRenderCallback:e,querySelector:t,nodes:r}={querySelector:".mermaid"}){const n=Br.getConfig();Q.debug(`${e?"":"No "}Callback function found`);let a;if(r)a=r;else if(t)a=document.querySelectorAll(t);else throw new Error("Nodes and querySelector are both undefined");Q.debug(`Found ${a.length} diagrams`),n?.startOnLoad!==void 0&&(Q.debug("Start On Load: "+n?.startOnLoad),Br.updateSiteConfig({startOnLoad:n?.startOnLoad}));const i=new Gn.InitIDGenerator(n.deterministicIds,n.deterministicIDSeed);let o;const s=[];for(const l of Array.from(a)){Q.info("Rendering diagram: "+l.id);/*! Check if previously processed */if(l.getAttribute("data-processed"))continue;l.setAttribute("data-processed","true");const d=`mermaid-${i.next()}`;o=l.innerHTML,o=Mw(Gn.entityDecode(o)).trim().replace(/<br\s*\/?>/gi,"<br/>");const u=Gn.detectInit(o);u&&Q.debug("Detected early reinit: ",u);try{const{svg:h,bindFunctions:f}=await Np(d,o,l);l.innerHTML=h,e&&await e(d),f&&f(l)}catch(h){gT(h,s,Tt.parseError)}}if(s.length>0)throw s[0]},Ap=function(e){Br.initialize(e)},vT=async function(e,t,r){Q.warn("mermaid.init is deprecated. Please use run instead."),e&&Ap(e);const n={postRenderCallback:r,querySelector:".mermaid"};typeof t=="string"?n.querySelector=t:t&&(t instanceof HTMLElement?n.nodes=[t]:n.nodes=t),await Sp(n)},yT=async(e,{lazyLoad:t=!0}={})=>{Nf(...e),t===!1&&await mT()},kp=function(){if(Tt.startOnLoad){const{startOnLoad:e}=Br.getConfig();e&&Tt.run().catch(t=>Q.error("Mermaid failed to initialize",t))}};if(typeof document<"u"){/*!
 * Wait for document loaded before starting the execution
 */window.addEventListener("load",kp,!1)}const bT=function(e){Tt.parseError=e},Di=[];let Wo=!1;const Ep=async()=>{if(!Wo){for(Wo=!0;Di.length>0;){const e=Di.shift();if(e)try{await e()}catch(t){Q.error("Error executing queue",t)}}Wo=!1}},wT=async(e,t)=>new Promise((r,n)=>{const a=()=>new Promise((i,o)=>{Br.parse(e,t).then(s=>{i(s),r(s)},s=>{var l;Q.error("Error parsing",s),(l=Tt.parseError)==null||l.call(Tt,s),o(s),n(s)})});Di.push(a),Ep().catch(n)}),Np=(e,t,r)=>new Promise((n,a)=>{const i=()=>new Promise((o,s)=>{Br.render(e,t,r).then(l=>{o(l),n(l)},l=>{var d;Q.error("Error parsing",l),(d=Tt.parseError)==null||d.call(Tt,l),s(l),a(l)})});Di.push(i),Ep().catch(a)}),Tt={startOnLoad:!0,mermaidAPI:Br,parse:wT,render:Np,init:vT,run:Sp,registerExternalDiagrams:yT,initialize:Ap,parseError:void 0,contentLoaded:kp,setParseErrorHandler:bT,detectType:oo},qn="allin_mermaid_history",_T=3600*24*30,ql=12;function CT(e){if(typeof e!="string")return"";const t=e.trim();return t||""}function Wl(e){if(!e)return null;const t=typeof e.prompt=="string"?e.prompt.trim():"",r=CT(e.svgMarkup),n=typeof e.mermaidSource=="string"?e.mermaidSource.trim():"",a=typeof e.title=="string"?e.title.trim():"",i=typeof e.notes=="string"?e.notes.trim():"";if(!r)return null;const o=typeof e.timestamp=="number"&&Number.isFinite(e.timestamp)?e.timestamp:Date.now();return{prompt:t,svgMarkup:r,mermaidSource:n,title:a,notes:i,timestamp:o}}function Ds(){const e=zi(qn);if(!e)return[];try{const t=JSON.parse(e);return Array.isArray(t)?t.map(Wl).filter(Boolean):[]}catch{return[]}}function ST(e){if(!Array.isArray(e)||e.length===0){vt(qn);return}const t=e.map(r=>Wl(r)).filter(Boolean).slice(0,ql);if(t.length===0){vt(qn);return}Hi(qn,t,{maxAgeSeconds:_T})}function AT(e){const t=Wl(e);if(!t)return Ds();const r=Ds(),n=[t,...r.filter(a=>a.svgMarkup!==t.svgMarkup||a.prompt!==t.prompt||a.mermaidSource!==t.mermaidSource)].slice(0,ql);return ST(n),n}function kT(){vt(qn)}const ET={USE_PROFILES:{svg:!0,svgFilters:!0},ADD_TAGS:["foreignObject","div","span","p","style","br","switch","tspan"],ADD_ATTR:["class","style","id","data-background","data-mermaid-enhanced","data-mermaid-text-style","dominant-baseline","alignment-baseline","baseline-shift","text-anchor","font-family","font-size","font-weight","font-style","marker-start","marker-mid","marker-end","transform","fill","stroke","stroke-width","stroke-linecap","stroke-linejoin","stroke-dasharray","stroke-dashoffset","opacity","viewBox","width","height","x","y","dx","dy","rx","ry","cx","cy","r","d","points","xmlns","xmlns:xlink","xml:space","xlink:href"],KEEP_CONTENT:!0},NT={type:"object",additionalProperties:!1,properties:{title:{type:"string",description:"Short label for the generated diagram."},mermaid:{type:"string",description:"Valid Mermaid definition (no code fences)."},notes:{type:"string",description:"Optional summary or assumptions about the diagram."}},required:["mermaid"]},TT="mermaid_blueprint",IT=["You are a diagram director who produces Mermaid.js diagrams from natural language briefs.","Return a JSON object that follows the provided schema.",'The "mermaid" field must contain a valid Mermaid definition that renders in Mermaid v10 without modifications. Do not include code fences or commentary.',"Choose the most appropriate diagram style (flowchart, sequence, class, timeline, mindmap, etc.) for the request and use concise, descriptive labels.","Keep identifiers syntax-safe and prefer multi-line layouts when relationships need clarity.",'Capture any assumptions or guidance for the user in the optional "notes" field (keep it under 100 words).',"Every node must include a clear, human-readable label that names the entity (such as a character or system component).","Provide short edge labels (e.g., â€œmentorsâ€, â€œreports toâ€) whenever it clarifies the relationship between nodes."].join(" ");function Tp(e){if(typeof window>"u"||typeof e!="string")return"";const t=e.trim();return t?Rs.sanitize(t,ET):""}function OT(e){return["Create a Mermaid.js diagram that satisfies the following request.","Respond with a JSON object matching the provided schema.","Use newline characters to format the diagram for readability.","","User brief:",e].join(`
`)}const BT=`<style data-mermaid-text-style>
[data-mermaid-enhanced="true"] .nodeLabel,
[data-mermaid-enhanced="true"] .label,
[data-mermaid-enhanced="true"] foreignObject div {
  color: #1f2937 !important;
  font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  font-size: 15px;
  font-weight: 500;
  line-height: 1.35;
}
[data-mermaid-enhanced="true"] .edgeLabel,
[data-mermaid-enhanced="true"] .edgeLabel tspan {
  fill: #1f2937 !important;
  color: #1f2937 !important;
  font-size: 13px;
  font-weight: 500;
  text-shadow: 0 1px 1px rgba(15, 23, 42, 0.08);
}
[data-mermaid-enhanced="true"] .edgeLabel rect {
  fill: rgba(226, 232, 240, 0.95);
  stroke: rgba(148, 163, 184, 0.65);
  stroke-width: 0.6;
}
[data-mermaid-enhanced="true"] .label text,
[data-mermaid-enhanced="true"] .nodeLabel text {
  fill: #1f2937 !important;
}
[data-mermaid-enhanced="true"] .label foreignObject {
  overflow: visible;
}
</style>`;function jT(e){if(typeof e!="string"||!e.trim())return"";let t=e;return t.includes("data-mermaid-enhanced")||(t=t.replace(/<svg\b/,r=>`${r} data-mermaid-enhanced="true"`)),t.includes("data-mermaid-text-style")||(t=t.replace(/<svg\b[^>]*>/,r=>`${r}${BT}`)),t}function DT({entry:e,onSelect:t}){const r=b.useMemo(()=>Tp(e.svgMarkup),[e.svgMarkup]),n=e.title||"Saved Mermaid diagram",a=e.prompt;return c.jsxs("button",{type:"button",onClick:()=>t(e),className:"group flex flex-col gap-2 overflow-hidden rounded-xl border border-slate-200 bg-white/80 p-3 text-left shadow-sm transition hover:border-brand-400 hover:bg-brand-50/70 dark:border-slate-700 dark:bg-slate-900/60 dark:hover:border-brand-300",children:[c.jsx("div",{className:"relative flex h-28 items-center justify-center overflow-hidden rounded-lg border border-slate-200 bg-slate-50 dark:border-slate-700 dark:bg-slate-800",children:r?c.jsx("div",{className:"h-full w-full origin-top-left scale-90 transform text-slate-900 dark:text-slate-100",dangerouslySetInnerHTML:{__html:r}}):c.jsx("div",{className:"flex h-full w-full items-center justify-center text-xs text-slate-400 dark:text-slate-500",children:"Preview unavailable"})}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"line-clamp-1 text-sm font-semibold text-slate-700 dark:text-slate-200",children:n}),a?c.jsxs("p",{className:"line-clamp-2 text-xs text-slate-500 dark:text-slate-400",children:["â€œ",a,"â€"]}):null,e.timestamp?c.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:new Date(e.timestamp).toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"})}):null]})]})}function RT({experience:e}){const[t,r]=b.useState("Show the interactions of The Office characters."),[n,a]=b.useState(null),[i,o]=b.useState([]),[s,l]=b.useState(null),[d,u]=b.useState(!1),[h,f]=b.useState(!1),p=b.useRef(0),m=Rn(e?.defaultBaseUrl),g=e?.defaultModel||e?.modelOptions?.[0]||"";b.useEffect(()=>{typeof window>"u"||Tt.initialize({startOnLoad:!1,securityLevel:"loose",theme:"neutral",flowchart:{useMaxWidth:!1,htmlLabels:!1,curve:"basis"},themeVariables:{fontFamily:"Inter, system-ui, sans-serif",fontSize:"15px",textColor:"#1f2937",primaryTextColor:"#1f2937",secondaryTextColor:"#1f2937",nodeTextColor:"#1f2937",labelTextColor:"#1f2937",primaryColor:"#f8fafc",secondaryColor:"#e2e8f0",tertiaryColor:"#cbd5f5",lineColor:"#64748b",edgeLabelBackground:"#e2e8f0",edgeLabelTextColor:"#1f2937"}})},[]),b.useEffect(()=>{o(Ds())},[]),b.useEffect(()=>{if(!h)return;const E=setTimeout(()=>f(!1),1500);return()=>clearTimeout(E)},[h]);const x=b.useMemo(()=>Tp(n?.svgMarkup||""),[n?.svgMarkup]),y=n?.mermaidSource||"",v=n?.title||"",w=n?.notes||"";async function S(E){E.preventDefault();const I=t.trim();if(!I){l({type:"error",message:"Describe the diagram you want before calling /obj."});return}if(typeof window>"u"){l({type:"error",message:"Mermaid is not available in this environment."});return}const F=n,V=F&&F.prompt!==I;V&&a(null),u(!0),f(!1),l({type:"info",message:"Drafting Mermaid markup via /objâ€¦"});let M="",L="",R="";try{const{payload:U}=await ca({baseUrl:m||void 0,structure:NT,objectType:TT,prompt:OT(I),system:IT,strict:!0,model:g||void 0});if(M=typeof U?.mermaid=="string"?U.mermaid.trim():"",L=typeof U?.title=="string"?U.title.trim():"",R=typeof U?.notes=="string"?U.notes.trim():"",!M)throw new Error("Mermaid diagram missing from /obj response.");p.current+=1;const $=`mermaid-diagram-${p.current}`,{svg:j}=await Tt.render($,M),z=jT(j);if(V&&F){const q=AT(F);o(q)}a({prompt:I,mermaidSource:M,svgMarkup:z,title:L,notes:R}),l({type:"success",message:"Mermaid diagram generated via /obj. Copy the source or iterate with another brief."})}catch(U){const $=U&&typeof U.message=="string"?U.message:"Mermaid generation failed. Please try a different description.";M?(a({prompt:I,mermaidSource:M,svgMarkup:"",title:L,notes:R}),l({type:"error",message:`Mermaid render failed: ${$}. Copy the generated source below or adjust your prompt.`})):(V&&F&&a(F),l({type:"error",message:$}))}finally{u(!1)}}function C(){y&&(typeof navigator<"u"&&navigator.clipboard?.writeText?navigator.clipboard.writeText(y).then(()=>f(!0)).catch(()=>{l({type:"error",message:"Copy failed. Select the Mermaid source manually instead."})}):l({type:"error",message:"Clipboard API unavailable. Select the Mermaid source manually instead."}))}function k(){a(null),r(""),l({type:"info",message:"Cleared the current brief and diagram. Your gallery remains intact."}),f(!1)}function A(E){E&&(r(E.prompt||""),a({prompt:E.prompt||"",svgMarkup:E.svgMarkup,mermaidSource:E.mermaidSource||"",title:E.title||"",notes:E.notes||""}),l({type:"info",message:"Loaded a saved Mermaid render. Submit to regenerate it via /obj."}),f(!1))}function N(){kT(),o([]),l({type:"info",message:"Cleared the Mermaid gallery cookie for this browser."})}const B=e?.promptPlaceholder||"Example: Show the interactions of The Office characters.";return c.jsxs("div",{className:"space-y-8",children:[c.jsxs("section",{className:"rounded-3xl border border-slate-200 bg-white/90 p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900/70 sm:p-8",children:[c.jsxs("form",{className:"space-y-4",onSubmit:S,children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"mermaid-prompt",className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Describe the diagram you need"}),c.jsx("textarea",{id:"mermaid-prompt",value:t,onChange:E=>r(E.target.value),placeholder:B,rows:4,className:"w-full rounded-2xl border border-slate-300 bg-white px-4 py-3 text-sm text-slate-900 shadow-sm transition focus:border-brand-500 focus:outline-none focus:ring-2 focus:ring-brand-500/20 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100",disabled:d}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["We send your brief to the ",c.jsx("code",{className:"rounded bg-slate-900/80 px-1 py-0.5 text-[0.7rem] text-white",children:"/obj"})," ","helper so the LLM returns a ready-to-render Mermaid definition."]})]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[c.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 rounded-full bg-brand-600 px-4 py-2 text-sm font-semibold text-white shadow transition hover:bg-brand-500 disabled:cursor-not-allowed disabled:bg-brand-400",disabled:d,children:[d?c.jsx(Zr,{className:"h-4 w-4 animate-spin"}):c.jsx(Gp,{className:"h-4 w-4"}),c.jsx("span",{children:d?"Draftingâ€¦":"Generate diagram"})]}),c.jsxs("button",{type:"button",onClick:k,className:"inline-flex items-center gap-2 rounded-full border border-slate-300 px-4 py-2 text-sm font-semibold text-slate-600 transition hover:border-red-400 hover:text-red-500 dark:border-slate-700 dark:text-slate-200 dark:hover:border-red-400 dark:hover:text-red-300",children:[c.jsx(dn,{className:"h-4 w-4"}),c.jsx("span",{children:"Clear"})]}),g?c.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Powered by ",c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-200",children:g})," via /obj"]}):null]})]}),s?c.jsx("div",{className:`mt-4 rounded-2xl border px-4 py-3 text-sm ${s.type==="error"?"border-red-200 bg-red-50 text-red-700 dark:border-red-800 dark:bg-red-900/30 dark:text-red-200":s.type==="success"?"border-emerald-200 bg-emerald-50 text-emerald-700 dark:border-emerald-800 dark:bg-emerald-900/20 dark:text-emerald-200":"border-slate-200 bg-slate-50 text-slate-600 dark:border-slate-700 dark:bg-slate-800/60 dark:text-slate-200"}`,children:s.message}):null]}),y?c.jsxs("section",{className:"space-y-3 rounded-3xl border border-slate-200 bg-white/90 p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900/70 sm:p-8",children:[c.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100",children:"Generated Mermaid source"}),v?c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:v}):null]}),c.jsxs("button",{type:"button",onClick:C,className:"inline-flex items-center gap-2 rounded-full border border-slate-300 px-3 py-1.5 text-xs font-semibold uppercase tracking-wide text-slate-600 transition hover:border-brand-400 hover:text-brand-600 dark:border-slate-700 dark:text-slate-200 dark:hover:border-brand-300 dark:hover:text-brand-200",children:[c.jsx(eh,{className:"h-4 w-4"}),c.jsx("span",{children:h?"Copied!":"Copy source"})]})]}),c.jsx("textarea",{value:y,readOnly:!0,spellCheck:!1,className:"h-48 w-full rounded-2xl border border-slate-300 bg-slate-950/5 px-4 py-3 text-xs font-mono text-slate-700 shadow-inner transition dark:border-slate-700 dark:bg-slate-950/60 dark:text-slate-100"}),w?c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:w}):null]}):null,c.jsxs("section",{className:"space-y-4",children:[c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("h2",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100",children:"Live Mermaid canvas"}),v?c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:v}):null]}),n?.prompt?c.jsx("span",{className:"max-w-xs text-right text-xs uppercase tracking-wide text-slate-400 dark:text-slate-500",children:n.prompt}):null]}),c.jsxs("div",{className:"relative min-h-[16rem] overflow-hidden rounded-3xl border border-slate-200 bg-white/90 p-4 shadow-sm dark:border-slate-700 dark:bg-slate-900/70",children:[d?c.jsx("div",{className:"absolute inset-0 grid place-items-center",children:c.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-slate-500 dark:text-slate-400",children:[c.jsx(Zr,{className:"h-5 w-5 animate-spin"}),c.jsx("span",{children:"Rendering Mermaid diagramâ€¦"})]})}):null,x?c.jsx("div",{className:`transition-opacity ${d?"opacity-0":"opacity-100"}`,children:c.jsx("div",{className:"mermaid-diagram w-full text-slate-900 dark:text-slate-100",dangerouslySetInnerHTML:{__html:x}})}):!d&&c.jsx("div",{className:"flex h-full items-center justify-center text-sm text-slate-400 dark:text-slate-500",children:"No diagram rendered yet. Describe a scene above to see Mermaid in action."})]})]}),c.jsxs("section",{className:"space-y-4",children:[c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100",children:"Mermaid gallery"}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Each new render archives the previous diagram here. The gallery keeps up to ",ql," diagrams per browser."]})]}),c.jsx("button",{type:"button",onClick:N,className:"inline-flex items-center gap-2 rounded-full border border-slate-300 px-3 py-1.5 text-xs font-semibold uppercase tracking-wide text-slate-500 transition hover:border-red-400 hover:text-red-500 dark:border-slate-700 dark:text-slate-300 dark:hover:border-red-400 dark:hover:text-red-300",children:"Clear gallery cookie"})]}),i.length>0?c.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:i.map(E=>c.jsx(DT,{entry:E,onSelect:A},`${E.timestamp}-${E.prompt}`))}):c.jsx("div",{className:"rounded-3xl border border-dashed border-slate-300 bg-slate-50/70 p-6 text-sm text-slate-500 dark:border-slate-700 dark:bg-slate-900/40 dark:text-slate-300",children:"Generate a diagram to start building your Mermaid gallery. Every submission tucks the previous render here for safekeeping."})]})]})}function LT(){const{pathname:e}=ar();return b.useEffect(()=>{window.scrollTo(0,0)},[e]),null}function MT(){return c.jsx(bm,{children:c.jsxs(cm,{children:[c.jsx(LT,{}),c.jsx(Am,{children:c.jsxs($1,{children:[c.jsx(ke,{path:"/",element:c.jsx(Pm,{})}),c.jsx(ke,{path:"/bank-holiday-planner",element:c.jsx(u2,{})}),c.jsx(ke,{path:"/second-hand-food-market",element:c.jsx(ww,{})}),c.jsx(ke,{path:"/game-of-life-lab",element:c.jsx(L2,{})}),c.jsx(ke,{path:"/dalle-vs-flux",element:c.jsx(Lw,{})}),fn.map(e=>e.id==="allergyfinder"?c.jsxs(b.Fragment,{children:[c.jsx(ke,{path:e.path,element:c.jsx(gt,{experience:e,navigation:c.jsx(ed,{}),children:c.jsx(Jc,{experience:e})})}),c.jsx(ke,{path:`${e.path}/cookies`,element:c.jsx(gt,{experience:e,navigation:c.jsx(ed,{}),children:c.jsx(wb,{})})})]},e.id):e.id==="objectmaker"?c.jsxs(b.Fragment,{children:[c.jsx(ke,{path:e.path,element:c.jsx(gt,{experience:e,navigation:c.jsx(ld,{}),children:c.jsx(Qb,{})})}),c.jsx(ke,{path:`${e.path}/zoo`,element:c.jsx(gt,{experience:e,navigation:c.jsx(ld,{}),children:c.jsx(t2,{})})})]},e.id):e.id==="imagegen"?c.jsxs(b.Fragment,{children:[c.jsx(ke,{path:e.path,element:c.jsx(gt,{experience:e,navigation:c.jsx(wd,{}),children:c.jsx(O2,{experience:e})})}),c.jsx(ke,{path:`${e.path}/gallery`,element:c.jsx(gt,{experience:e,navigation:c.jsx(wd,{}),children:c.jsx(B2,{})})})]},e.id):e.id==="svglab"?c.jsx(ke,{path:e.path,element:c.jsx(gt,{experience:e,children:c.jsx(lw,{experience:e})})},e.id):e.id==="mermaidstudio"?c.jsx(ke,{path:e.path,element:c.jsx(gt,{experience:e,children:c.jsx(RT,{experience:e})})},e.id):e.id==="flagfoundry"?c.jsx(ke,{path:e.path,element:c.jsx(gt,{experience:e,children:c.jsx(bw,{experience:e})})},e.id):e.id==="pizzamaker"?c.jsx(ke,{path:e.path,element:c.jsx(gt,{experience:e,children:c.jsx(H2,{experience:e})})},e.id):e.id==="carmaker"?c.jsx(ke,{path:e.path,element:c.jsx(gt,{experience:e,children:c.jsx(J2,{experience:e})})},e.id):e.id==="newsanalyzer"?c.jsx(ke,{path:e.path,element:c.jsx(_2,{})},e.id):e.id==="sixdegrees"?c.jsx(ke,{path:e.path,element:c.jsx(A2,{})},e.id):e.id==="pongshowdown"?c.jsx(ke,{path:e.path,element:c.jsx(Iw,{})},e.id):c.jsx(ke,{path:e.path,element:c.jsx(gt,{experience:e,children:c.jsx(Jc,{experience:e})})},e.id)),c.jsx(ke,{path:"/profile",element:c.jsx(jb,{})}),c.jsx(ke,{path:"/about",element:c.jsx($m,{})}),c.jsx(ke,{path:"*",element:c.jsx(P1,{to:"/",replace:!0})})]})})]})})}Vp.createRoot(document.getElementById("root")).render(c.jsx(qp.StrictMode,{children:c.jsx(MT,{})}));export{Qd as $,Un as A,Gn as B,pE as C,fE as D,lE as E,s4 as F,JT as G,yE as H,E8 as I,DC as J,pl as K,E0 as L,ua as M,I0 as N,UT as O,Uw as P,_E as Q,dt as R,yt as S,YT as T,jf as U,Dl as V,s8 as W,t8 as X,Vt as Y,ml as Z,dr as _,hE as a,El as a$,UC as a0,Jn as a1,ju as a2,QT as a3,u8 as a4,A8 as a5,Dr as a6,ek as a7,WA as a8,tk as a9,zT as aA,HT as aB,ZT as aC,VT as aD,KT as aE,ae as aF,Gt as aG,pa as aH,xn as aI,_i as aJ,FA as aK,Ak as aL,fa as aM,Si as aN,jA as aO,af as aP,MS as aQ,PS as aR,Cr as aS,wu as aT,FS as aU,kl as aV,LS as aW,zS as aX,vn as aY,xr as aZ,gu as a_,rk as aa,hf as ab,Zi as ac,to as ad,Ai as ae,DS as af,Al as ag,pf as ah,uf as ai,BA as aj,NA as ak,XA as al,ak as am,ma as an,iI as ao,ha as ap,K as aq,re as ar,mE as as,yl as at,GT as au,WT as av,ou as aw,iu as ax,XT as ay,qT as az,dE as b,sf as b0,Ns as b1,WS as b2,Ho as b3,M8 as b4,Mw as b5,cE as c,St as d,rp as e,Ze as f,Fl as g,Ei as h,an as i,Hw as j,Ol as k,Q as l,B8 as m,a4 as n,aE as o,S8 as p,x8 as q,Cf as r,uE as s,Yk as t,aI as u,k0 as v,I8 as w,Zw as x,rA as y,Sl as z};
